Ext.BLANK_IMAGE_URL="/appFlowerPlugin/extjs-3/resources/images/default/s.gif";Ext.state.Manager.setProvider(new Ext.state.CookieProvider());Ext.ns("afStudio");var afStudio=function(){return{currentHash:false,vtload:false,codeEditor:false,initDataProxyErrorsHandling:function(){var a=function(c){var b=c.message||c.content||c.msg||c.errors;return Ext.isArray(b)?b.join(""):b};Ext.data.DataProxy.on("exception",function(e,f,c,k,d,i){var j,g=String.format("Request Failed {0}",k.url);if(f=="response"){var b=Ext.decode(d.responseText);if(d.status==200){j=a(b)||"The remote-request succeeded but the reader could not read the response"}else{j=String.format("Server side error <br/> status code: {0}, message: {1}",b.status,b.statusText||"---")}}else{j=a(d.raw)}afStudio.Msg.error(g,j)})},setConsole:function(a){afStudio.cli.CommandLineMgr.setConsole(a)},updateConsole:function(a){afStudio.cli.CommandLineMgr.updateConsole(a)},log:function(b,a){a=a||false;afStudio.xhr.executeAction({url:afStudioWSUrls.notificationUrl,showNoteOnSuccess:false,params:{cmd:"set",message:b,messageType:a}})},getViewport:function(){return this.vp},getRecentProjects:function(){var a=Ext.decode(Ext.util.Cookies.get("appFlowerStudioRecentProjects"))||[];recentProject=a.reverse();return a},addCurrentProject:function(){var a=Ext.decode(Ext.util.Cookies.get("appFlowerStudioRecentProjects"))||[];afStudio.xhr.executeAction({url:afStudioWSUrls.configureProjectUrl,run:function(b,d){var e={};e.text=b.data.name;e.url=b.data.url+"/studio";Ext.each(a,function(g,f){if(g.url==e.url){delete a[f]}});a[a.length]=e;var c=new Date();c.setDate(c.getDate()+30);Ext.util.Cookies.set("appFlowerStudioRecentProjects",Ext.encode(a),c,"/","")}})},init:function(){Ext.QuickTips.init();Ext.apply(Ext.QuickTips.getQuickTip(),{trackMouse:true});Ext.form.Field.prototype.msgTarget="side";this.initDataProxyErrorsHandling();afStudio.xhr.initAjaxRequestComplete();afStudio.xhr.setTimeout(300000);this.tb=new afStudio.viewport.StudioToolbar();this.vp=new afStudio.viewport.StudioViewport();afStudio.Cli.init();afStudio.Logger.mode=afStudio.Logger.OFF;this.addCurrentProject();if(Ext.util.Cookies.get("appFlowerStudioDontShowWelcomePopup")!="true"){new afStudio.Welcome().show()}Ext.History.init();this.loadFirst()},createSlug:function(d){d=d.toLowerCase();var b={a:/\u00e1/g,e:/u00e9/g,i:/\u00ed/g,o:/\u00f3/g,u:/\u00fa/g,n:/\u00f1/g};for(var c in b){d=d.replace(b[c],c)}var e=d.replace(/\s/g,"-");var a=e.replace(/[^a-zA-Z0-9\-\_]/g,"");a=a.toLowerCase();a=a.replace(/-+/g,"-");a=a.replace(/(^-)|(-$)/g,"");return a},load:function(c){this.currentHash=c;var e=c.split("#");var b=["layout","widget","file"];var d=e[0];if(b.inArray(d)){switch(d){case"layout":var f=e[1].split("/");afStudio.xhr.executeAction({url:"/afsLayoutBuilder/get",params:{app:f[0],page:f[1]},mask:String.format('Loading layout "{0}" metadata...',f[1]),showNoteOnSuccess:false,run:function(g){afStudio.vp.viewRegions.west.layout.setActiveItem("layoutdesigner");afStudio.vp.addToWorkspace(new afStudio.layoutDesigner.DesignerPanel({layoutMeta:g.content,layoutApp:f[0],layoutPage:f[1]}),true)}});break;case"widget":var f=e[1].split("/");var a=Ext.getCmp("widgets");if(a.root.hasChildNodes()){afStudio.WD.findShowWidgetDesigner(f[0],f[1],f[2])}else{a.on("load",function(){if(afStudio.wtload){afStudio.WD.findShowWidgetDesigner(f[0],f[1],f[2]);afStudio.wtload=false}});afStudio.vp.viewRegions.west.layout.setActiveItem("widgets");this.wtload=true}break;case"file":var f=e[1];this.openCodeEditor(f);break}}},loadFirst:function(){var b=document.location.href.split("#");b[1]=b[1]||"/";b[2]=b[2]?"#"+b[2]:"";var a=b[1]+b[2];this.load(a)},openCodeEditor:function(a){if(!this.codeEditor){this.codeEditor=new afStudio.CodeEditor()}this.codeEditor.show();if(a){var b=this.codeEditor;b.westPanel.expandPath("/Project/"+a,"text",function(d,c){if(d){b.openFile(b.westPanel.getFileName(a),"root/"+a)}})}}}}();Ext.applyIf(Array.prototype,{dragUp:function(f,e){if(f<e){throw new RangeError('"dragUp": "from" index should be greater than "to"')}var d=this[f];for(var b=0,c=f-e,a=f;b<c;b++,a--){this[a]=this[a-1]}this[e]=d},dragDown:function(f,e){if(f>e){throw new RangeError('"dragDown": "from" index should be less than "to"')}var d=this[f];for(var b=0,c=e-f,a=f;b<c;b++,a++){this[a]=this[a+1]}this[e]=d},inArray:function(e,c){var b="",a=!!c,d=this;if(a){for(b in d){if(d[b]===e){return true}}}else{for(b in d){if(d[b]==e){return true}}}return false}});Ext.applyIf(String.prototype,{ucfirst:function(){return this.substr(0,1).toUpperCase()+this.substr(1)},lcfirst:function(){return this.substr(0,1).toLowerCase()+this.substr(1)},bool:function(){return(/^true$/i).test(this)}});Ext.History.on("change",function(a){if(a){if(afStudio.currentHash!=a){afStudio.load(a)}}});afStudio.xhr={requestSucceed:"Request was successfully processed!",requestFail:"Error occured during action execution.",mask:function(a){if(Ext.isObject(a)&&a.ctn){var b=this.getMaskElement(a.ctn);if(b){b.mask(a.msg?a.msg:"loading...","x-mask-loading")}}else{if(a){afStudio.vp.mask(a)}}},unmask:function(a){if(Ext.isObject(a)&&a.ctn){var b=this.getMaskElement(a.ctn);if(b){b.unmask()}}else{if(a){a.region?afStudio.vp.unmask(a.region):afStudio.vp.unmask()}}},getMaskElement:function(a){if(a instanceof Ext.Element){return a}if(Ext.isString(a)||Ext.isElement(a)){return(Ext.isString(a)&&Ext.getCmp(a))?Ext.getCmp(a).el:Ext.get(a)}if(a instanceof Ext.Component){return a.getEl()}return null},setTimeout:function(a){Ext.Ajax.timeout=a},executeAction:function(c){var b=this,a=c.showNoteOnSuccess===false?false:true;b.mask(c.mask);var d={url:c.url,params:c.params,scope:c.scope?c.scope:b,jsonResponse:true,success:function(k,g){b.unmask(g.mask);try{var f=Ext.decode(k.responseText)}catch(j){return}var i=(g.message===true)?(f.message||f.content||g.message):(g.message||f.message||f.content||null);i=(i===true)?(f.success?b.requestSucceed:b.requestFail):i;if(f.success){if(Ext.isFunction(c.run)){Ext.util.Functions.createDelegate(c.run,this,[f,g],false)()}if(f.console){afStudio.updateConsole(f.console)}if(c.logMessage){this.fireEvent("logmessage",this,c.logMessage)}if(a&&!Ext.isEmpty(i)){afStudio.Msg.info(i)}}else{if(Ext.isFunction(c.error)){Ext.util.Functions.createDelegate(c.error,this,[f,g],false)()}afStudio.Msg.warning(i)}},failure:function(i,f){b.unmask(f.mask);if(Ext.isFunction(c.error)){Ext.util.Functions.createDelegate(c.error,this,[i,f,true],false)()}var g=String.format("Status code: {0} <br /> Message: {1}",i.status,i.statusText||"none"),e="Server communication failure";afStudio.Msg.error(e,g)}};Ext.applyIf(d,c);return Ext.Ajax.request(d)},initAjaxRequestComplete:function(){Ext.Ajax.on("requestcomplete",function(c,f,b){var a;try{a=Ext.decode(f.responseText)}catch(d){if(b.jsonResponse||f.getResponseHeader("Content-Type")=="application/json"){afStudio.Msg.error("Response decoding error",String.format("<u>url</u>: <b>{0}</b> <br/>{1}",b.url,f.responseText))}return}if(!Ext.isEmpty(a)&&!Ext.isEmpty(a.redirect)){location.href=a.redirect}})}};Ext.ns("afStudio");afStudio.WSUrlsClass=function(){};afStudio.WSUrlsClass=Ext.extend(afStudio.WSUrlsClass,{helpUrl:"http://www.appflower.com/cms/learningcenter",welcomeWinUrl:"/appFlowerStudio/welcome",modelListUrl:"/appFlowerStudio/models",getFiletreeUrl:"/appFlowerStudio/filetree",moduleListUrl:"/afsModuleManager/getList",moduleGroupedUrl:"/afsModuleManager/getGrouped",moduleAddUrl:"/afsModuleManager/add",moduleRenameUrl:"/afsModuleManager/rename",moduleDeleteUrl:"/afsModuleManager/delete",widgetRenameUrl:"/afsModuleManager/renameView",widgetDeleteUrl:"/afsModuleManager/deleteView",widgetGenerateUrl:"afsWidgetBuilder/generateWidget",widgetSetAsHomepage:"/afsModuleManager/setAsHomepage",pageSetAsHomepage:"/afsLayoutBuilder/setAsHomepage",getModuleWidgetsUrl:function(){return this.buildUrlFor("/appFlowerStudio/moduleWidgets")},widgetPreviewUrl:"/appFlowerStudio/preview",widgetUrl:"afsLayoutBuilder/getWidget",layoutSaveUrl:"afsLayoutBuilder/save",pluginListUrl:"/afsPluginManager/getList",pluginAddUrl:"/afsPluginManager/add",pluginRenameUrl:"/afsPluginManager/rename",pluginDeleteUrl:"/afsPluginManager/delete",widgetGetDefinitionUrl:"/afsWidgetBuilder/getWidget",widgetSaveDefinitionUrl:"/afsWidgetBuilder/saveWidget",getFilecontentUrl:"/appFlowerStudio/filecontent",userCreateUrl:"/afsUserManager/create",userUpdateUrl:"/afsUserManager/update",userDeleteUrl:"/afsUserManager/delete",userListUrl:"/afsUserManager/getList",userGetUrl:"/afsUserManager/get",getDebugUrl:function(){return this.buildUrlFor("/appFlowerStudio/debug")},notificationUrl:"/appFlowerStudio/notifications",getConsoleUrl:function(){return this.buildUrlFor("/appFlowerStudio/console")},configureProjectUrl:"/appFlowerStudio/configureProject",getConfigureDatabaseUrl:function(){return this.buildUrlFor("/appFlowerStudio/configureDatabase")},getLoadDatabaseConnectionSettingsUrl:function(){return this.buildUrlFor("/appFlowerStudio/loadDatabaseConnectionSettings")},dbQueryDatabaseListUrl:"/afsDatabaseQuery/databaseList",dbQueryQueryUrl:"/afsDatabaseQuery/query",dbQueryComplexQueryUrl:"/afsDatabaseQuery/complexQuery",getModelGridDataReadUrl:function(a){return this.buildUrlFor("/afsModelGridData/read?model="+a)},getModelGridDataCreateUrl:function(a){return this.buildUrlFor("/afsModelGridData/create?model="+a)},getModelGridDataUpdateUrl:function(a){return this.buildUrlFor("/afsModelGridData/update?model="+a)},getModelGridDataDeleteUrl:function(a){return this.buildUrlFor("/afsModelGridData/delete?model="+a)},templateSelectorUrl:"/appFlowerStudio/templateSelector",checkHelperFileUrl:"/appFlowerStudio/checkHelperFileExist",getCheckUserExistUrl:function(){return this.buildUrlFor("/afsUserManager/checkUserExist")},project:"/appFlowerStudio/project",exportUrl:"/appFlowerStudio/export",buildUrlFor:function(a){return a}});afStudioWSUrls=new afStudio.WSUrlsClass();Ext.ns("afStudio.log");afStudio.log.Console=(function(){return{debug:function(){console.debug.apply(console,arguments)},info:function(){console.log.apply(console,arguments)},error:function(){console.error.apply(console,arguments)}}})();Ext.ns("afStudio.log");afStudio.log.Logger=(function(){var a=afStudio.log.Console;return{DEBUG:"debug",INFO:"info",ERROR:"error",OFF:"off",mode:"debug",log:function(g,f){var c=[this.DEBUG,this.INFO,this.ERROR],e=c.concat(this.OFF),d=e.indexOf(this.mode),b=c.indexOf(g);if(b>=d&&!Ext.isEmpty(f)){a[g].apply(this,f)}},debug:function(){this.log("debug",arguments)},info:function(){this.log("info",arguments)},error:function(){this.log("error",arguments)},getLogger:function(){return a},setLogger:function(b){a=b}}})();afStudio.Logger=afStudio.log.Logger;Ext.override(Ext.BoxComponent,{initComponent:function(){Ext.BoxComponent.superclass.initComponent.apply(this,arguments);this.addEvents("resize","move","logmessage");this.on("logmessage",this.onLogMessage,this)},onLogMessage:function(b,a){afStudio.log(a,"afStudioChange")}});Ext.override(Ext.Element,(function(){var f=document,c="scrollLeft",e="scrollTop",d=/^(scroll|resize|load|unload|abort|error)$/,b=/^(click|dblclick|mousedown|mouseup|mouseover|mouseout|contextmenu|mousenter|mouseleave)$/,a=/^(focus|blur|select|change|reset|keypress|keydown|keyup)$/,i=/^on/;function g(){var j=f.documentElement,k=f.body;if(j&&(j[e]||j[c])){return[j[c],j[e]]}else{if(k){return[k[c],k[e]]}else{return[0,0]}}}return{fireEvent:Ext.isIE?function(l,k){var j;l=l.toLowerCase();if(!i.test(l)){l="on"+l}if(Ext.isFunction(k)){j=document.createEventObject();k(j)}else{j=k}this.dom.fireEvent(l,j)}:function(n,m){var l;n=n.toLowerCase();n.replace(i,"");if(b.test(n)){var k={};if(this.getBox){k=this.getBox()}else{k.width=this.getWidth();k.height=this.getHeight();k.x=this.getX();k.y=this.getY()}var j=k.x+k.width/2,o=k.y+k.height/2;l=document.createEvent("MouseEvents");l.initMouseEvent(n,true,true,window,(n=="dblclick")?2:1,j,o,j,o,false,false,false,false,0,null)}else{if(a.test(n)){l=document.createEvent("UIEvents");l.initUIEvent(n,true,true,window,0)}else{if(d.test(n)){l=document.createEvent("HTMLEvents");l.initEvent(n,true,true)}}}if(l){if(Ext.isFunction(m)){m(l)}this.dom.dispatchEvent(l)}},forwardMouseEvents:function(n){var q=this,r,p,j,m=["mousemove","mousedown","mouseup","dblclick","mousewheel"];q.on("mouseout",function(){if(j){Ext.fly(j).fireEvent("mouseout");j=null}});for(var o=0,k=m.length;o<k;o++){this.on(m[o],function(A){var v=(Ext.isGecko)?g():[0,0],w=A.browserEvent,l=Ext.num(w.pageX,w.clientX)-v[0],B=Ext.num(w.pageY,w.clientY)-v[1],z=w.type,u;if(!q.forwardingSuspended&&q.isVisible()){A.stopPropagation();q.forwardingSuspended=true;q.hide();u=Ext.get(document.elementFromPoint(l,B));q.show();if(!u){j.fireEvent("mouseout");j=u;delete q.forwardingSuspended;return}if(u===j){if(z=="mouseup"){u.fireEvent("click")}}else{if(j){j.fireEvent("mouseout")}u.fireEvent("mouseover")}if(z!=="mousemove"){if(u.dom.fireEvent){u.fireEvent(z,w)}else{A=document.createEvent("MouseEvents");A.initMouseEvent(z,true,true,window,w.detail,w.screenX,w.screenY,w.clientX,w.clientY,w.ctrlKey,w.altKey,w.shiftKey,w.metaKey,w.button,null);u.dom.dispatchEvent(A)}}j=u;delete q.forwardingSuspended}})}}}})());Ext.ns("Ext.ux.grid");Ext.ux.grid.DataDrop=(function(){var e=/\r\n|\r|\n/,c=/\s*\t\s*/;function b(){var f=this.view;if(f.mainBody){this.textEl=Ext.DomHelper.insertAfter(f.scroller,{tag:"textarea",id:Ext.id(),value:"",style:{"font-size":"1px",border:"0px none",overflow:"hidden",color:"#fff",position:"absolute",top:f.mainHd.getHeight()+"px",left:"0px","background-color":"#fff",margin:0,cursor:"default"}},true);this.textEl.setOpacity(0.1);this.textEl.forwardMouseEvents();this.textEl.on({mouseover:function(){Ext.TaskMgr.start(this.changeValueTask)},mouseout:function(){Ext.TaskMgr.stop(this.changeValueTask)},scope:this});a.call(this)}}function a(){if(this.textEl){var f=this.view,j=f.scroller,i=j.getSize,g={width:j.dom.clientWidth||(i.width-f.getScrollOffset()+2),height:j.dom.clientHeight||i.height};this.textEl.setSize(g)}}function d(q,g){var r=g.value;g.blur();if(r!==""){var w=this.getStore(),u=w.recordType;g.value="";var x=r.split(e),t=this.getColumnModel().getColumnsBy(function(i){return !i.hidden}),p=u.prototype.fields;if(t.length&&x.length){for(var o=0;o<x.length;o++){var s=x[o].split(c),n={};if(s.join("").replace(" ","")!==""){for(var m=0;m<s.length;m++){var f=t[m].dataIndex;var j=p.item(f);n[f]=j?j.convert(s[m]):s[m]}var l=new u(n);w.add(l);var v=w.indexOf(l);this.view.focusRow(v);Ext.get(this.view.getRow(v)).highlight()}}a.call(this)}}}return{init:function(f){Ext.apply(f,{changeValueTask:{run:function(){d.call(this,null,this.textEl.dom)},interval:100,scope:f},onResize:f.onResize.createSequence(a)});f.getView().afterRender=f.getView().afterRender.createSequence(b,f)}}})();Ext.ns("Ext.ux");Ext.ux.TabMenu=function(){var a,c,e,b;this.init=function(f){a=f;a.on("contextmenu",d)};function d(i,g,j){if(!c){c=new Ext.menu.Menu([{id:a.id+"-save",text:"Save",iconCls:"icon-file-save",handler:function(){Ext.Ajax.request({url:b.fileContentUrl,method:"post",params:{"file":b.file,"code":b.getCode()},success:function(l,m){Ext.Msg.alert("Success","The file was saved !")},failure:function(){Ext.Msg.alert("Failure","The server can't save the file !")}})}},{id:a.id+"-close",text:"Close Tab",iconCls:"icon-file-close",handler:function(){a.remove(e)}},{id:a.id+"-close-others",text:"Close Other Tabs",iconCls:"icon-file-close-others",handler:function(){a.items.each(function(l){if(l.closable&&l!=e){a.remove(l)}})}}])}e=g;if(e.items&&e.items.items[0]&&e.items.items[0].code){b=e.items.items[0]}else{b=e}var f=c.items;f.get(a.id+"-close").setDisabled(!g.closable);var k=true;a.items.each(function(){if(this!=g&&this.closable){k=false;return false}});if(g.itemId=="security"||g.itemId=="designer"){f.get(a.id+"-save").setDisabled(true)}else{f.get(a.id+"-save").setDisabled(false)}f.get(a.id+"-close-others").setDisabled(k);c.showAt(j.getPoint())}};Ext.ns("Ext.ux.form");Ext.ux.form.GroupingComboBox=Ext.extend(Ext.form.ComboBox,{initComponent:function(){if(this.transform){this.allowDomMove=false;var l=Ext.getDom(this.transform);if(!this.hiddenName){this.hiddenName=l.name}if(!this.store){this.mode="local";var f=[],a=l.options;for(var c=0,e=a.length;c<e;c++){var b=a[c];var g=(Ext.isIE?b.getAttributeNode("value").specified:b.hasAttribute("value"))?b.value:b.text;if(b.selected){this.value=g}var k=b.parentNode,j=k.tagName.toLowerCase()=="optgroup"?k.label:false;f.push([g,b.text,j])}this.store=new Ext.data.SimpleStore({"id":0,fields:["value","text","group"],data:f});this.valueField="value";this.displayField="text";this.groupField="group"}l.name=Ext.id();if(!this.lazyRender){this.target=true;this.el=Ext.DomHelper.insertBefore(l,this.autoCreate||this.defaultAutoCreate);Ext.removeNode(l);this.render(this.el.parentNode)}else{Ext.removeNode(l)}}delete this.transform;Ext.ux.form.GroupingComboBox.superclass.initComponent.call(this)},initList:function(){if(!this.list&&!this.tpl){this.tpl=['<tpl for=".">','<tpl if="values.'+this.groupField+" && (xindex == 1 || parent[xindex - 2]."+this.groupField+" != values."+this.groupField+')">','<div class="x-combo-list-group">{'+this.groupField+"}</div>","</tpl>",'<div class="x-combo-list-item">','<tpl if="values.'+this.groupField+'">&nbsp;</tpl>',"{"+this.displayField+"}","</div>","</tpl>"].join("")}Ext.ux.form.GroupingComboBox.superclass.initList.call(this)}});Ext.ns("Ext.ux.grid");Ext.ux.grid.PagingRowNumberer=Ext.extend(Ext.grid.RowNumberer,{renderer:function(d,g,b,i,e,c){if(this.rowspan){g.cellAttr='rowspan="'+this.rowspan+'"'}var f=c.lastOptions;var a=f?f.params:null;return((a&&a.start)?a.start:0)+i+1}});
/*
 * Ext JS Library 3.3.1
 * Copyright(c) 2006-2010 Sencha Inc.
 * licensing@sencha.com
 * http://www.sencha.com/license
 */
Ext.ux.TabCloseMenu=Ext.extend(Object,{closeTabText:"Close Tab",closeOtherTabsText:"Close Other Tabs",showCloseAll:true,closeAllTabsText:"Close All Tabs",constructor:function(a){Ext.apply(this,a||{})},init:function(a){this.tabs=a;a.on({scope:this,contextmenu:this.onContextMenu,destroy:this.destroy})},destroy:function(){Ext.destroy(this.menu);delete this.menu;delete this.tabs;delete this.active},onContextMenu:function(b,c,g){this.active=c;var a=this.createMenu(),d=true,i=true,f=a.getComponent("closeall");a.getComponent("close").setDisabled(!c.closable);b.items.each(function(){if(this.closable){d=false;if(this!=c){i=false;return false}}});a.getComponent("closeothers").setDisabled(i);if(f){f.setDisabled(d)}g.stopEvent();a.showAt(g.getPoint())},createMenu:function(){if(!this.menu){var a=[{itemId:"close",text:this.closeTabText,scope:this,handler:this.onClose}];if(this.showCloseAll){a.push("-")}a.push({itemId:"closeothers",text:this.closeOtherTabsText,scope:this,handler:this.onCloseOthers});if(this.showCloseAll){a.push({itemId:"closeall",text:this.closeAllTabsText,scope:this,handler:this.onCloseAll})}this.menu=new Ext.menu.Menu({items:a})}return this.menu},onClose:function(){var a=this.active;if(a.fireEvent("beforeclose",a)!==false){a.fireEvent("close",a);this.tabs.remove(a)}},onCloseOthers:function(){this.doClose(true)},onCloseAll:function(){this.doClose(false)},doClose:function(c){var b=[];this.tabs.items.each(function(d){if(d.closable){if(!c||d!=this.active){b.push(d)}}},this);var a=this.active;if(a.fireEvent("beforeclose",a,true,b)!==false){Ext.each(b,function(d){d.fireEvent("close",d);this.tabs.remove(d)},this)}}});Ext.preg("tabclosemenu",Ext.ux.TabCloseMenu);
/*
 * Ext JS Library 3.3.0
 * Copyright(c) 2006-2010 Ext JS, Inc.
 * licensing@extjs.com
 * http://www.extjs.com/license
 */
Ext.ux.Portal=Ext.extend(Ext.Panel,{layout:"column",autoScroll:true,cls:"x-portal",defaultType:"portalcolumn",initComponent:function(){Ext.ux.Portal.superclass.initComponent.call(this);this.addEvents({validatedrop:true,beforedragover:true,dragover:true,beforedrop:true,drop:true})},initEvents:function(){Ext.ux.Portal.superclass.initEvents.call(this);this.dd=new Ext.ux.Portal.DropZone(this,this.dropConfig)},beforeDestroy:function(){if(this.dd){this.dd.unreg()}Ext.ux.Portal.superclass.beforeDestroy.call(this)}});Ext.reg("portal",Ext.ux.Portal);Ext.ux.Portal.DropZone=Ext.extend(Ext.dd.DropTarget,{constructor:function(a,b){this.portal=a;Ext.dd.ScrollManager.register(a.body);Ext.ux.Portal.DropZone.superclass.constructor.call(this,a.bwrap.dom,b);a.body.ddScrollConfig=this.ddScrollConfig},ddScrollConfig:{vthresh:50,hthresh:-1,animate:true,increment:200},createEvent:function(a,f,d,b,i,g){return{portal:this.portal,panel:d.panel,columnIndex:b,column:i,position:g,data:d,source:a,rawEvent:f,status:this.dropAllowed}},notifyOver:function(v,t,w){var f=t.getXY(),a=this.portal,n=v.proxy;if(!this.grid){this.grid=this.getGrid()}var b=a.body.dom.clientWidth;if(!this.lastCW){this.lastCW=b}else{if(this.lastCW!=b){this.lastCW=b;a.doLayout();this.grid=this.getGrid()}}var d=0,l=this.grid.columnX,m=false;for(var s=l.length;d<s;d++){if(f[0]<(l[d].x+l[d].w)){m=true;break}}if(!m){d--}var q,k=false,i=0,u=a.items.itemAt(d),o=u.items.items,j=false;for(var s=o.length;i<s;i++){q=o[i];var r=q.el.getHeight();if(r===0){j=true}else{if((q.el.getY()+(r/2))>f[1]){k=true;break}}}i=(k&&q?i:u.items.getCount())+(j?-1:0);var g=this.createEvent(v,t,w,d,u,i);if(a.fireEvent("validatedrop",g)!==false&&a.fireEvent("beforedragover",g)!==false){n.getProxy().setWidth("auto");if(q){n.moveProxy(q.el.dom.parentNode,k?q.el.dom:null)}else{n.moveProxy(u.el.dom,null)}this.lastPos={c:u,col:d,p:j||(k&&q)?i:false};this.scrollPos=a.body.getScroll();a.fireEvent("dragover",g);return g.status}else{return g.status}},notifyOut:function(){delete this.grid},notifyDrop:function(m,i,g){delete this.grid;if(!this.lastPos){return}var k=this.lastPos.c,f=this.lastPos.col,l=this.lastPos.p,a=m.panel,b=this.createEvent(m,i,g,f,k,l!==false?l:k.items.getCount());if(this.portal.fireEvent("validatedrop",b)!==false&&this.portal.fireEvent("beforedrop",b)!==false){m.proxy.getProxy().remove();a.el.dom.parentNode.removeChild(m.panel.el.dom);if(l!==false){k.insert(l,a)}else{k.add(a)}k.doLayout();this.portal.fireEvent("drop",b);var n=this.scrollPos.top;if(n){var j=this.portal.body.dom;setTimeout(function(){j.scrollTop=n},10)}}delete this.lastPos},getGrid:function(){var a=this.portal.bwrap.getBox();a.columnX=[];this.portal.items.each(function(b){a.columnX.push({x:b.el.getX(),w:b.el.getWidth()})});return a},unreg:function(){Ext.dd.ScrollManager.unregister(this.portal.body);Ext.ux.Portal.DropZone.superclass.unreg.call(this)}});
/*
 * Ext JS Library 3.3.0
 * Copyright(c) 2006-2010 Ext JS, Inc.
 * licensing@extjs.com
 * http://www.extjs.com/license
 */
Ext.ux.PortalColumn=Ext.extend(Ext.Container,{layout:"anchor",defaultType:"portlet",cls:"x-portal-column"});Ext.reg("portalcolumn",Ext.ux.PortalColumn);
/*
 * Ext JS Library 3.3.0
 * Copyright(c) 2006-2010 Ext JS, Inc.
 * licensing@extjs.com
 * http://www.extjs.com/license
 */
Ext.ux.Portlet=Ext.extend(Ext.Panel,{anchor:"100%",frame:true,collapsible:true,draggable:true,cls:"x-portlet"});Ext.reg("portlet",Ext.ux.Portlet);Ext.ux.FileTreePanel=Ext.extend(Ext.tree.TreePanel,{confirmText:"Confirm",containerScroll:true,deleteText:"Delete",enableDD:true,enableDelete:true,enableNewDir:true,enableOpen:true,enableProgress:true,enableRename:true,enableSort:true,enableUpload:true,errorText:"Error",existsText:"File <b>{0}</b> already exists",expandOnRender:true,fileCls:"file",fileText:"File",fileOpenSingleClick:false,focusPopup:true,folderSort:true,hrefPrefix:"",hrefSuffix:"",layout:"fit",loadingText:"Loading",loadMask:false,maxFileSize:524288,maxMsgLen:2000,method:"post",newdirText:"New Folder",newfileText:"file.php",openNewFile:true,openMode:"container",overwriteText:"Do you want to overwrite it?",popupFeatures:"width=800,height=600,dependent=1,scrollbars=1,resizable=1,toolbar=1",readOnly:false,reallyWantText:"Do you really want to",rootPath:"root",rootText:"Tree Root",rootVisible:true,selectOnEdit:true,singleUpload:false,topMenu:false,url:"",initComponent:function(){Ext.apply(this,{root:new Ext.tree.AsyncTreeNode({text:this.rootText,path:this.rootPath,rootVisible:this.rootVisible,allowDrag:false}),treeEditor:!this.readOnly?new Ext.tree.TreeEditor(this,{allowBlank:false,cancelOnEsc:true,completeOnEnter:true,ignoreNoChange:true,selectOnFocus:this.selectOnEdit}):undefined,dropConfig:this.dropConfig?this.dropConfig:{ddGroup:this.ddGroup||"TreeDD",appendOnly:this.enableSort,expandDelay:3600000},treeSorter:this.enableSort?new Ext.tree.TreeSorter(this,{folderSort:this.folderSort}):undefined,keys:[{key:Ext.EventObject.ENTER,scope:this,fn:function(a,c){var d=this.getSelectionModel();var b=d.getSelectedNode();if(b&&0!==b.getDepth()&&b.isLeaf()){this.openNode(b)}}},{key:113,scope:this,fn:function(a,c){var d=this.getSelectionModel();var b=d.getSelectedNode();if(b&&0!==b.getDepth()&&this.enableRename&&this.readOnly!==true){this.treeEditor.triggerEdit(b)}}},{key:46,stopEvent:true,scope:this,fn:function(a,c){var d=this.getSelectionModel();var b=d.getSelectedNode();if(b&&0!==b.getDepth()&&this.enableDelete&&this.readOnly!==true){this.deleteNode(b)}}},{key:69,ctrl:true,stopEvent:true,scope:this,fn:function(a,c){var d=this.getSelectionModel();var b=d.getSelectedNode();if(b){b=b.isLeaf()?b.parentNode:b;d.select(b);b.reload()}}},{key:39,ctrl:true,stopEvent:true,scope:this,fn:function(a,c){var d=this.getSelectionModel();var b=d.getSelectedNode();if(b&&!b.isLeaf()){d.select(b);b.expand.defer(1,b,[true])}}},{key:37,ctrl:true,scope:this,stopEvent:true,fn:function(a,c){var d=this.getSelectionModel();var b=d.getSelectedNode();if(b&&!b.isLeaf()){d.select(b);b.collapse.defer(1,b,[true])}}},{key:78,ctrl:true,scope:this,stopEvent:true,fn:function(a,c){var d,b;d=this.getSelectionModel();b=d.getSelectedNode();if(b&&this.enableNewDir&&this.readOnly!==true){b=b.isLeaf()?b.parentNode:b;this.createNewDir(b)}}}]});if(!this.loader){this.loader=new Ext.tree.TreeLoader({url:this.url,baseParams:{cmd:"get"},listeners:{beforeload:{scope:this,fn:function(a,b){a.baseParams.path=this.getPath(b)}}}})}if(true===this.topMenu){this.tbar=[{text:this.fileText,disabled:true,scope:this,menu:this.getContextMenu()}]}Ext.ux.FileTreePanel.superclass.initComponent.apply(this,arguments);if(this.treeEditor){this.treeEditor.beforeNodeClick=function(a,b){return true};this.treeEditor.on({scope:this,complete:this.onEditComplete,beforecomplete:this.onBeforeEditComplete})}if(this.openMode=="container"){this.fileCt=this.getFileContainer()}this.addEvents("beforeopen","open","beforerename","rename","renamefailure","beforedelete","delete","deletefailure","beforenewdir","newdir","newdirfailure","beforenewfile","newfile","newfilefailure","unarchive","unarchivefailure")},onRender:function(){Ext.ux.FileTreePanel.superclass.onRender.apply(this,arguments);if(this.topMenu===true){this.topMenu=Ext.getCmp(this.getTopToolbar().items.itemAt(0).id);this.getSelectionModel().on({scope:this,selectionchange:function(c,b){var a=(b?false:true)||this.readOnly;this.topMenu.setDisabled(a)}});Ext.apply(this.topMenu,{showMenu:function(){this.showContextMenu(false)}.createDelegate(this)})}if(this.expandOnRender){this.root.expand()}this.el.on({contextmenu:{fn:function(){return false},stopEvent:true}});if(true===this.loadMask){this.loader.on({scope:this.el,beforeload:this.el.mask.createDelegate(this.el,[this.loadingText+"..."]),load:this.el.unmask,loadexception:this.el.unmask})}},initEvents:function(){Ext.ux.FileTreePanel.superclass.initEvents.call(this);this.on({scope:this,contextmenu:{fn:this.onContextMenu,stopEvent:true},beforenodedrop:this.onBeforeNodeDrop,nodedrop:this.onNodeDrop,nodedragover:this.onNodeDragOver});this.on(this.fileOpenSingleClick?"click":"dblclick",this.onClick,this,{buffer:100})},cmdCallback:function(k,j,d){var g=true,e,a,c;if(true===j){try{a=Ext.decode(d.responseText)}catch(f){this.showError(d.responseText)}if(true===a.success){switch(k.params.cmd){case"delete":if(true!==this.eventsSuspended){this.fireEvent("delete",this,k.node)}k.node.parentNode.removeChild(k.node);if(this.openMode=="container"){this.fileCt.deleteFile(k.params.file)}break;case"newdir":if(true!==this.eventsSuspended){this.fireEvent("newdir",this,k.node)}break;case"newfile":if(true!==this.eventsSuspended){this.fireEvent("newfile",this,k.node)}if(this.openNewFile){this.openNode(k.node)}break;case"rename":this.updateCls(k.node,k.params.oldname);if(true!==this.eventsSuspended){this.fireEvent("rename",this,k.node,k.params.newname,k.params.oldname)}if(this.openMode=="container"){var b=this.getFileName(k.params.newname);this.fileCt.renameFile(b,k.params.newname,k.params.oldname)}break;case"unarchive":if(true!==this.eventsSuspended){this.fireEvent("unarchive",this,k.node)}k.node.parentNode.reload();break}}else{switch(k.params.cmd){case"rename":if(k.oldParent){k.oldParent.appendChild(k.node)}else{k.node.setText(k.oldName)}if(k.e){k.e.failure=true}if(true!==this.eventsSuspended){this.fireEvent("renamefailure",this,k.node,k.params.newname,k.params.oldname)}break;case"newdir":if(false!==this.eventsSuspended){this.fireEvent("newdirfailure",this,k.params.dir)}k.node.parentNode.removeChild(k.node);break;case"newfile":if(false!==this.eventsSuspended){this.fireEvent("newfilefailure",this,k.params.file)}k.node.parentNode.removeChild(k.node);break;case"delete":if(true!==this.eventsSuspended){this.fireEvent("deletefailure",this,k.node)}k.node.parentNode.reload.defer(1,k.node.parentNode);break;case"unarchive":if(true!==this.eventsSuspended){this.fireEvent("unarchivefailure",this,k.node)}break;default:this.root.reload();break}this.showError(a.message||d.responseText)}}else{this.showError(d.responseText)}},confirmOverwrite:function(a,c,b){Ext.Msg.show({title:this.confirmText,msg:String.format(this.existsText,a)+". "+this.overwriteText,icon:Ext.Msg.QUESTION,buttons:Ext.Msg.YESNO,fn:c.createDelegate(b||this)})},createNewDir:function(d){if(true!==this.eventsSuspended&&false===this.fireEvent("beforenewdir",this,d)){return}var b=this.treeEditor;var a;var c=d.isLeaf()?d.parentNode:d;c.expand(false,false,function(e){a=e.appendChild(new Ext.tree.AsyncTreeNode({text:this.newdirText,iconCls:"folder"}));b.on({complete:{scope:this,single:true,fn:this.onNewDir}});b.creatingNewDir=true;(function(){b.triggerEdit(a)}.defer(10))}.createDelegate(this))},createNewFile:function(d){if(true!==this.eventsSuspended&&this.fireEvent("beforenewfile",this,d)===false){return}var b=this.treeEditor;var a;var c=d.isLeaf()?d.parentNode:d;c.expand(false,false,function(e){a=e.appendChild(new Ext.tree.AsyncTreeNode({text:this.newfileText,leaf:true}));b.on({complete:{scope:this,single:true,fn:this.onNewFile}});b.creatingNewFile=true;(function(){b.triggerEdit(a)}.defer(10))}.createDelegate(this))},deleteNode:function(a){if(true!==this.eventsSuspended&&this.fireEvent("beforedelete",this,a)===false){return}Ext.Msg.show({title:this.deleteText,msg:this.reallyWantText+" "+this.deleteText.toLowerCase()+" <b>"+a.text+"</b>?",icon:Ext.Msg.WARNING,buttons:Ext.Msg.YESNO,scope:this,fn:function(b){if("yes"!==b){this.getEl().dom.focus();return}var c={url:this.deleteUrl||this.url,method:this.method,scope:this,callback:this.cmdCallback,node:a,params:{cmd:"delete",file:this.getPath(a)}};Ext.Ajax.request(c)}})},downloadFile:function(c){var f=Ext.id();var d=document.createElement("iframe");d.id=f;d.name=f;d.className="x-hidden";if(Ext.isIE){d.src=Ext.SSL_SECURE_URL}document.body.appendChild(d);if(Ext.isIE){document.frames[f].name=f}var a=Ext.DomHelper.append(document.body,{tag:"form",method:"post",action:this.downloadUrl||this.url,target:f});document.body.appendChild(a);var b;b=document.createElement("input");b.type="hidden";b.name="cmd";b.value="download";a.appendChild(b);b=document.createElement("input");b.type="hidden";b.name="path";b.value=c;a.appendChild(b);var e=function(){Ext.EventManager.removeListener(d,"load",e,this);setTimeout(function(){document.body.removeChild(a)},100);setTimeout(function(){document.body.removeChild(d)},110)};Ext.EventManager.on(d,"load",e,this);a.submit()},unarchiveFile:function(b){var a={url:this.url,method:this.method,scope:this,callback:this.cmdCallback,node:b,params:{cmd:"unarchive",file:this.getPath(b)}};Ext.Ajax.request(a)},openFileInContainer:function(b){var a=this.getFileName(b);this.fileCt.openFile(a,b)},getFileContainer:function(){var a=this.fileCt;if(Ext.isString(a)){return Ext.getCmp(a)}if(Ext.isFunction(a)){return a()}return a},getContextMenu:function(){if(!this.contextmenu){var a={singleUpload:this.singleUpload,maxFileSize:this.maxFileSize,enableProgress:this.enableProgress};if(this.baseParams){a.baseParams=this.baseParams}this.contextmenu=new Ext.ux.FileTreeMenu(a);this.contextmenu.on({scope:this,click:this.onContextClick});this.uploadPanel=this.contextmenu.getItemByCmd("upload-panel");this.uploadPanel.on({scope:this,beforeupload:this.onBeforeUpload,allfinished:this.onAllFinished});this.uploadPanel.setUrl(this.uploadUrl||this.url)}return this.contextmenu},getFileCls:function(a){var b=a.split(".");if(1===b.length){return this.fileCls}else{return this.fileCls+"-"+b.pop().toLowerCase()}},getFileName:function(b){b=Ext.isString(b)?b:this.getPath(b);var a=b.split("/");return a[a.length-1]},getFileExtension:function(a){if(!Ext.isString(a)&&!this.isFile(a)){return null}a=this.isFile(a)?this.getFileName(a):a;var b=/\.(\w+)$/.exec(a);return b?b[1]:null},getPath:function(c){var e,d,b;if(c!==this.root){d=c.parentNode;b=[c.text];while(d&&d!==this.root){b.unshift(d.text);d=d.parentNode}b.unshift(this.root.attributes.path||"");e=b.join(this.pathSeparator)}else{e=c.attributes.path||""}e=e.replace(/^[\/\.]*/,"");return e},isFile:function(a){return a instanceof Ext.tree.TreeNode&&a.isLeaf()},isArchive:function(a){var b=this.getFileExtension(a);a=Ext.isString(a)?a:this.getFileName(a);if(b!=null&&(["tar","tgz"].indexOf(b)!=-1||/\.tar\.gz$/ig.test(a))){return true}return false},hasChild:function(b,a){return(b.isLeaf()?b.parentNode:b).findChild("text",a)!==null},hideContextMenu:function(){if(this.contextmenu&&this.contextmenu.isVisible()){this.contextmenu.hide()}return this},onBeforeEditComplete:function(c,a,b){if(c.cancellingEdit){c.cancellingEdit=false;return}var e=this.getPath(c.editNode);var d=e.replace(/\/[^\\]+$/,"/"+a);if(false===this.fireEvent("beforerename",this,c.editNode,d,e)){c.cancellingEdit=true;c.cancelEdit();return false}},onBeforeNodeDrop:function(g){var f=g.dropNode;var i=g.target.leaf?g.target.parentNode:g.target;if(f.parentNode===i){return false}if(this.hasChild(i,f.text)&&undefined===g.confirmed){this.confirmOverwrite(f.text,function(d){g.confirmed="yes"===d;this.onBeforeNodeDrop(g)});return false}if(false===g.confirmed){return false}g.confirmed=undefined;g.oldParent=f.parentNode;var c=this.getPath(f);var a=this.getPath(i)+"/"+f.text;if(true!==this.eventsSuspended&&false===this.fireEvent("beforerename",this,f,a,c)){return false}var b={url:this.renameUrl||this.url,method:this.method,scope:this,callback:this.cmdCallback,node:f,oldParent:f.parentNode,e:g,params:{cmd:"rename",oldname:c,newname:a}};Ext.Ajax.request(b);return true},onBeforeUpload:function(c){var b=this.getContextMenu();var a=this.getPath(b.node);if(b.node.isLeaf()){a=a.replace(/\/[^\/]+$/,"",a)}c.setPath(a)},onAllFinished:function(a){var b=this.getContextMenu();(b.node.isLeaf()?b.node.parentNode:b.node).reload()},onContextClick:function(d,b,c){if(b.disabled){return}var a=d.node;if(!a){a=d.parentMenu.node}switch(b.cmd){case"reload":a.reload();break;case"expand":a.expand(true);break;case"collapse":a.collapse(true);break;case"open":this.openNode(a);break;case"open-self":this.openNode(a,"_self");break;case"open-popup":this.openNode(a,"popup");break;case"open-blank":this.openNode(a,"_blank");break;case"open-dwnld":this.openNode(a,"download");break;case"rename":this.treeEditor.triggerEdit(a);break;case"delete":this.deleteNode(a);break;case"newdir":this.createNewDir(a);break;case"newfile":this.createNewFile(a);break;case"unarchive":this.unarchiveFile(a);break;default:break}},onContextMenu:function(a,b){if(this.readOnly){return false}this.showContextMenu(a);return false},onDblClick:function(a,b){},onClick:function(a,b){this.openNode(a)},onDestroy:function(){if(this.contextmenu){this.contextmenu.purgeListeners();this.contextmenu.destroy();this.contextmenu=null}if(this.treeEditor){this.treeEditor.purgeListeners();this.treeEditor.destroy();this.treeEditor=null}if(this.treeSorter){this.treeSorter=null}if(this.fileCt){this.fileCt=null}Ext.ux.FileTreePanel.superclass.onDestroy.call(this)},onEditComplete:function(d,a,c){var e=d.editNode;if(a===c||d.creatingNewDir||d.creatingNewFile){d.creatingNewDir=false;d.creatingNewFile=false;return}var f=this.getPath(e.parentNode);var b={url:this.renameUrl||this.url,method:this.method,scope:this,callback:this.cmdCallback,node:e,oldName:c,params:{cmd:"rename",oldname:f+"/"+c,newname:f+"/"+a}};Ext.Ajax.request(b)},onNewDir:function(b){var c=this.getPath(b.editNode);var a={url:this.newdirUrl||this.url,method:this.method,scope:this,node:b.editNode,callback:this.cmdCallback,params:{cmd:"newdir",dir:c}};Ext.Ajax.request(a)},onNewFile:function(b){var c=this.getPath(b.editNode);var a={url:this.newfileUrl||this.url,method:this.method,scope:this,node:b.editNode,callback:this.cmdCallback,params:{cmd:"newfile",file:c}};Ext.Ajax.request(a)},onNodeDragOver:function(a){a.cancel=a.target.disabled||a.dropNode.parentNode===a.target.parentNode&&a.target.isLeaf()},onNodeDrop:function(b){if(true===b.failure){b.oldParent.appendChild(b.dropNode);return}var a=b.dropNode.parentNode.findChild("text",b.dropNode.text);if(a&&a!==b.dropNode){a.parentNode.removeChild(a)}},openNode:function(b,d){if(!this.enableOpen){return}d=d||this.openMode;var a,c;if(b.isLeaf()){c=this.getPath(b);a=this.hrefPrefix+c+this.hrefSuffix;if(true!==this.eventsSuspended&&false===this.fireEvent("beforeopen",this,b.text,a,d)){return}switch(d){case"container":this.openFileInContainer(c);break;case"popup":if(!this.popup||this.popup.closed){this.popup=window.open(a,this.hrefTarget,this.popupFeatures)}this.popup.location=a;if(this.focusPopup){this.popup.focus()}break;case"_self":window.location=a;break;case"_blank":window.open(a);break;case"download":this.downloadFile(c);break}if(true!==this.eventsSuspended){this.fireEvent("open",this,b.text,a,d)}}},setDeleteDisabled:function(a){a=!(!a);if(!this.enableDelete===a){return this}this.hideContextMenu();this.enableDelete=!a},setNewdirDisabled:function(a){a=!(!a);if(!this.enableNewDir===a){return this}this.hideContextMenu();this.enableNewDir=!a},setOpenDisabled:function(a){a=!(!a);if(!this.enableOpen===a){return this}this.hideContextMenu();this.enableOpen=!a;return this},setReadOnly:function(a){a=!(!a);if(this.readOnly===a){return this}this.hideContextMenu();if(this.dragZone){this.dragZone.locked=a}this.readOnly=a;return this},setRenameDisabled:function(a){a=!(!a);if(!this.enableRename===a){return this}this.hideContextMenu();if(this.dragZone){this.dragZone.locked=a}this.enableRename=!a;return this},setUploadDisabled:function(a){a=!(!a);if(!this.enableUpload===a){return this}this.hideContextMenu();this.enableUpload=!a;return this},showContextMenu:function(c){var a=false,b=this.topMenu?this.topMenu.getEl():this.body;if(!c){c=this.getSelectionModel().getSelectedNode();a=true}else{b=c.getUI().getEl()}if(!c){return}var d=this.getContextMenu();d.node=c;d.getItemByCmd("nodename").setText(Ext.util.Format.ellipsis(c.text,22));d.setItemDisabled("open",!c.isLeaf());d.setItemDisabled("reload",c.isLeaf());d.setItemDisabled("expand",c.isLeaf());d.setItemDisabled("collapse",c.isLeaf());d.setItemDisabled("delete",c===this.root||c.disabled);d.setItemDisabled("rename",this.readOnly||c===this.root||c.disabled);d.setItemDisabled("newdir",this.readOnly||(c.isLeaf()?c.parentNode.disabled:c.disabled));d.setItemDisabled("newfile",this.readOnly||(c.isLeaf()?c.parentNode.disabled:c.disabled));d.setItemDisabled("upload",c.isLeaf()?c.parentNode.disabled:c.disabled);d.setItemDisabled("upload-panel",c.isLeaf()?c.parentNode.disabled:c.disabled);d.getItemByCmd("open").setVisible(this.enableOpen);d.getItemByCmd("delete").setVisible(this.enableDelete);d.getItemByCmd("newdir").setVisible(this.enableNewDir);d.getItemByCmd("rename").setVisible(this.enableRename);d.getItemByCmd("upload").setVisible(this.enableUpload);d.getItemByCmd("upload-panel").setVisible(this.enableUpload);d.getItemByCmd("sep-upload").setVisible(this.enableUpload);d.getItemByCmd("sep-collapse").setVisible(this.enableNewDir||this.enableDelete||this.enableRename);d.getItemByCmd("unarchive").setVisible(this.isArchive(c));d.render();c.select();if(a){d.showAt(d.getEl().getAlignToXY(b,"tl-bl?"))}else{d.showAt(d.getEl().getAlignToXY(b,"tl-tl?",[0,18]))}},showError:function(b,a){Ext.Msg.show({title:a||this.errorText,msg:Ext.util.Format.ellipsis(b,this.maxMsgLen),fixCursor:true,icon:Ext.Msg.ERROR,buttons:Ext.Msg.OK,minWidth:1200>String(b).length?360:600})},updateCls:function(b,a){if(b.isLeaf()){Ext.fly(b.getUI().iconNode).removeClass(this.getFileCls(a));Ext.fly(b.getUI().iconNode).addClass(this.getFileCls(b.text))}}});Ext.reg("filetreepanel",Ext.ux.FileTreePanel);Ext.ux.FileTreeMenu=function(b){b=b||{};var a={hideOnClick:false,cmd:"upload-panel",contextmenu:this,buttonsAt:b.buttonsAt||"tbar",singleUpload:b.singleUpload||false,maxFileSize:b.maxFileSize,enableProgress:b.enableProgress};if(b.baseParams){b.baseParams.cmd=b.baseParams.cmd||"upload";b.baseParams.dir=b.baseParams.dir||".";a.baseParams=b.baseParams}Ext.apply(b,{items:[{text:"&#160",cls:"ux-ftm-nodename",disabledClass:"",disabled:true,cmd:"nodename"},{text:this.openText+" (Enter)",iconCls:this.openIconCls,cmd:"open",menu:{items:[{text:this.openSelfText,iconCls:this.openSelfIconCls,cmd:"open-self"}]}},new Ext.menu.Separator({cmd:"sep-open"}),{text:this.reloadText+" (Ctrl+E)",iconCls:this.reloadIconCls,cmd:"reload"},{text:this.expandText+" (Ctrl+&nbsp;&rarr;)",iconCls:this.expandIconCls,cmd:"expand"},{text:this.collapseText+" (Ctrl+&nbsp;&larr;)",iconCls:this.collapseIconCls,cmd:"collapse"},new Ext.menu.Separator({cmd:"sep-collapse"}),{text:this.renameText+" (F2)",iconCls:this.renameIconCls,cmd:"rename"},{text:this.deleteText+" ("+this.deleteKeyName+")",iconCls:this.deleteIconCls,cmd:"delete"},{text:this.newdirText+"... (Ctrl+N)",iconCls:this.newdirIconCls,cmd:"newdir"},{text:this.newfileText,iconCls:this.newfileIconCls,cmd:"newfile"},{text:this.unarchiveText,iconCls:this.unarchiveIconCls,cmd:"unarchive"},new Ext.menu.Separator({cmd:"sep-upload"}),{text:this.uploadFileText+" (Ctrl+U)",iconCls:this.uploadIconCls,hideOnClick:false,cmd:"upload"},new Ext.ux.UploadPanel(a)]});Ext.ux.FileTreeMenu.superclass.constructor.call(this,b);this.relayEvents(this.getItemByCmd("open").menu,["click","itemclick"])};Ext.extend(Ext.ux.FileTreeMenu,Ext.menu.Menu,{collapseIconCls:"icon-collapse-all",collapseText:"Collapse all",deleteIconCls:"icon-cross",deleteKeyName:"Delete Key",deleteText:"Delete",expandIconCls:"icon-expand-all",expandText:"Expand all",newdirIconCls:"icon-folder-add",newdirText:"New folder",newfileIconCls:"icon-plus",newfileText:"New file",unarchiveIconCls:"icon-unarchive",unarchiveText:"Unarchive",openBlankIconCls:"icon-open-blank",openBlankText:"Open in new window",openDwnldIconCls:"icon-open-download",openDwnldText:"Download",openIconCls:"icon-open",openPopupIconCls:"icon-open-popup",openPopupText:"Open in popup",openSelfIconCls:"icon-open-self",openSelfText:"Open in this window",openText:"Open",reloadIconCls:"icon-refresh",reloadText:'R<span style="text-decoration:underline">e</span>load',renameIconCls:"icon-pencil",renameText:"Rename",uploadFileText:'<span style="text-decoration:underline">U</span>pload file',uploadIconCls:"icon-upload",uploadText:"Upload",width:190,getItemByCmd:function(c){var b=this.items.find(function(d){return c===d.cmd});if(!b){var a=this.items.find(function(d){return"open"===d.cmd});if(!a){return null}b=a.menu.items.find(function(d){return c===d.cmd})}return b},setItemDisabled:function(c,a){var b=this.getItemByCmd(c);if(b){b.setDisabled(a)}},beforeDestroy:function(){var a=this.getItemByCmd("upload-panel");if(a&&a.component){a.component.purgeListeners();a.component.destroy();a.component=null}}});Ext.reg("filetreemenu",Ext.ux.FileTreeMenu);Ext.namespace("Ext.ux.form");Ext.ux.form.BrowseButton=Ext.extend(Ext.Button,{inputFileName:"file",debug:false,FLOAT_EL_WIDTH:60,FLOAT_EL_HEIGHT:18,buttonCt:null,clipEl:null,floatEl:null,inputFileEl:null,originalHandler:null,originalScope:null,initComponent:function(){Ext.ux.form.BrowseButton.superclass.initComponent.call(this);this.originalHandler=this.handler;this.originalScope=this.scope;this.handler=null;this.scope=null},onRender:function(d,b){Ext.ux.form.BrowseButton.superclass.onRender.call(this,d,b);this.buttonCt=this.el.child(".x-btn-mc em");this.buttonCt.position("relative");var c={position:"absolute",overflow:"hidden",top:"0px",left:"0px"};if(Ext.isIE){Ext.apply(c,{left:"-3px",top:"-3px"})}else{if(Ext.isGecko){Ext.apply(c,{left:"-3px",top:"-3px"})}else{if(Ext.isSafari){Ext.apply(c,{left:"-4px",top:"-2px"})}}}this.clipEl=this.buttonCt.createChild({tag:"div",style:c});this.setClipSize();this.clipEl.on({"mousemove":this.onButtonMouseMove,"mouseover":this.onButtonMouseMove,scope:this});this.floatEl=this.clipEl.createChild({tag:"div",style:{position:"absolute",width:this.FLOAT_EL_WIDTH+"px",height:this.FLOAT_EL_HEIGHT+"px",overflow:"hidden"}});if(this.debug){this.clipEl.applyStyles({"background-color":"green"});this.floatEl.applyStyles({"background-color":"red"})}else{this.clipEl.setOpacity(0)}var a=this.el.child(this.buttonSelector);a.on("focus",this.onButtonFocus,this);if(Ext.isIE){this.el.on("keydown",this.onButtonKeyDown,this)}this.createInputFile()},setClipSize:function(){if(this.clipEl){var b=this.buttonCt.getWidth();var a=this.buttonCt.getHeight();if(b===0||a===0){this.setClipSize.defer(100,this)}else{if(Ext.isIE){b=b+5;a=a+5}else{if(Ext.isGecko){b=b+6;a=a+6}else{if(Ext.isSafari){b=b+6;a=a+6}}}this.clipEl.setSize(b,a)}}},createInputFile:function(){this.floatEl.select("em").each(function(a){a.remove()});this.inputFileEl=this.floatEl.createChild({tag:"input",type:"file",size:1,name:this.inputFileName||Ext.id(this.el),tabindex:this.tabIndex,style:{position:"absolute",cursor:"pointer",right:"0px",top:Ext.isIE?"10px":"0px"}});this.inputFileEl=this.inputFileEl.child("input")||this.inputFileEl;this.inputFileEl.on({"click":this.onInputFileClick,"change":this.onInputFileChange,"focus":this.onInputFileFocus,"select":this.onInputFileFocus,"blur":this.onInputFileBlur,scope:this});if(this.tooltip){if(typeof this.tooltip=="object"){Ext.QuickTips.register(Ext.apply({target:this.inputFileEl},this.tooltip))}else{this.inputFileEl.dom[this.tooltipType]=this.tooltip}}},onButtonFocus:function(a){if(this.inputFileEl){this.inputFileEl.focus();a.stopEvent()}},onButtonKeyDown:function(a){if(this.inputFileEl&&a.getKey()==Ext.EventObject.SPACE){this.inputFileEl.dom.click();a.stopEvent()}},onButtonMouseMove:function(b){var a=b.getXY();a[0]-=this.FLOAT_EL_WIDTH/2;a[1]-=this.FLOAT_EL_HEIGHT/2;this.floatEl.setXY(a)},onInputFileFocus:function(a){if(!this.isDisabled){this.el.addClass("x-btn-over")}},onInputFileBlur:function(a){this.el.removeClass("x-btn-over")},onInputFileClick:function(a){a.stopPropagation()},onInputFileChange:function(){if(this.originalHandler){this.originalHandler.call(this.originalScope,this)}},detachInputFile:function(b){var a=this.inputFileEl;if(typeof this.tooltip=="object"){Ext.QuickTips.unregister(this.inputFileEl)}else{this.inputFileEl.dom[this.tooltipType]=null}this.inputFileEl.removeAllListeners();this.inputFileEl=null;if(!b){this.createInputFile()}return a},getInputFile:function(){return this.inputFileEl},disable:function(){Ext.ux.form.BrowseButton.superclass.disable.call(this);this.inputFileEl.dom.disabled=true},enable:function(){Ext.ux.form.BrowseButton.superclass.enable.call(this);this.inputFileEl.dom.disabled=false}});Ext.reg("browsebutton",Ext.ux.form.BrowseButton);Ext.ux.FileUploader=function(a){Ext.apply(this,a);Ext.ux.FileUploader.superclass.constructor.apply(this,arguments);this.addEvents("beforeallstart","allfinished","beforefilestart","filefinished","progress")};Ext.extend(Ext.ux.FileUploader,Ext.util.Observable,{baseParams:{cmd:"upload",dir:"."},concurrent:true,enableProgress:true,jsonErrorText:"Cannot decode JSON object",maxFileSize:524288,progressIdName:"UPLOAD_IDENTIFIER",progressInterval:2000,progressUrl:"progress.php",progressMap:{bytes_total:"bytesTotal",bytes_uploaded:"bytesUploaded",est_sec:"estSec",files_uploaded:"filesUploaded",speed_average:"speedAverage",speed_last:"speedLast",time_last:"timeLast",time_start:"timeStart"},singleUpload:false,unknownErrorText:"Unknown error",upCount:0,createForm:function(a){var c=parseInt(Math.random()*10000000000,10);var b=Ext.getBody().createChild({tag:"form",action:this.url,method:"post",cls:"x-hidden",id:Ext.id(),cn:[{tag:"input",type:"hidden",name:"APC_UPLOAD_PROGRESS",value:c},{tag:"input",type:"hidden",name:this.progressIdName,value:c},{tag:"input",type:"hidden",name:"MAX_FILE_SIZE",value:this.maxFileSize}]});if(a){if(Ext.isIE){a.set("form",undefined)}else{a.set("form",b)}a.set("progressId",c)}else{this.progressId=c}return b},deleteForm:function(b,a){b.remove();if(a){a.set("form",null)}},fireFinishEvents:function(a){if(true!==this.eventsSuspended&&!this.singleUpload){this.fireEvent("filefinished",this,a&&a.record)}if(true!==this.eventsSuspended&&0===this.upCount){this.stopProgress();this.fireEvent("allfinished",this)}},getIframe:function(a){var b=null;var c=a.get("form");if(c&&c.dom&&c.dom.target){b=Ext.get(c.dom.target)}return b},getOptions:function(a,c){var b={url:this.url,method:"post",isUpload:true,scope:this,callback:this.uploadCallback,record:a,params:this.getParams(a,c)};return b},getParams:function(a,c){var b={path:this.path};Ext.apply(b,this.baseParams||{},c||{});return b},processSuccess:function(c,b,d){var a=false;if(this.singleUpload){this.store.each(function(e){e.set("state","done");e.set("error","");e.commit()})}else{a=c.record;a.set("state","done");a.set("error","");a.commit()}this.deleteForm(c.form,a)},processFailure:function(e,c,d){var a=e.record;var b;afStudio.Msg.error("Upload error",d.message);if(this.singleUpload){b=this.store.queryBy(function(f){var g=f.get("state");return"done"!==g&&"uploading"!==g});b.each(function(f){var g=d.errors?d.errors[f.id]:this.unknownErrorText;if(g){f.set("state","failed");f.set("error",g);Ext.getBody().appendChild(f.get("input"))}else{f.set("state","done");f.set("error","")}f.commit()},this);this.deleteForm(e.form)}else{if(d&&"object"===Ext.type(d)){a.set("error",d.errors&&d.errors[a.id]?d.errors[a.id]:this.unknownErrorText)}else{if(d){a.set("error",d)}else{if(c&&c.responseText){a.set("error",c.responseText)}else{a.set("error",this.unknownErrorText)}}}a.set("state","failed");a.commit()}},requestProgress:function(){var a,b;var c={url:this.progressUrl,method:"post",params:{},scope:this,callback:function(f,j,d){var i;if(true!==j){return}try{i=Ext.decode(d.responseText)}catch(g){return}if("object"!==Ext.type(i)||true!==i.success){return}if(this.singleUpload){this.progress={};for(b in i){if(this.progressMap[b]){this.progress[this.progressMap[b]]=parseInt(i[b],10)}}if(true!==this.eventsSuspended){this.fireEvent("progress",this,this.progress)}}else{for(b in i){if(this.progressMap[b]&&f.record){f.record.set(this.progressMap[b],parseInt(i[b],10))}}if(f.record){f.record.commit();if(true!==this.eventsSuspended){this.fireEvent("progress",this,f.record.data,f.record)}}}this.progressTask.delay(this.progressInterval)}};if(this.singleUpload){c.params[this.progressIdName]=this.progressId;c.params.APC_UPLOAD_PROGRESS=this.progressId;Ext.Ajax.request(c)}else{a=this.store.query("state","uploading");a.each(function(d){c.params[this.progressIdName]=d.get("progressId");c.params.APC_UPLOAD_PROGRESS=c.params[this.progressIdName];c.record=d;(function(){Ext.Ajax.request(c)}).defer(250)},this)}},setPath:function(a){this.path=a},setUrl:function(a){this.url=a},startProgress:function(){if(!this.progressTask){this.progressTask=new Ext.util.DelayedTask(this.requestProgress,this)}this.progressTask.delay.defer(this.progressInterval/2,this.progressTask,[this.progressInterval])},stopProgress:function(){if(this.progressTask){this.progressTask.cancel()}},stopAll:function(){var a=this.store.query("state","uploading");a.each(this.stopUpload,this)},stopUpload:function(a){var b=false;if(a){b=this.getIframe(a);this.stopIframe(b);this.upCount--;this.upCount=0>this.upCount?0:this.upCount;a.set("state","stopped");this.fireFinishEvents({record:a})}else{if(this.form){b=Ext.fly(this.form.dom.target);this.stopIframe(b);this.upCount=0;this.fireFinishEvents()}}},stopIframe:function(a){if(a){try{a.dom.contentWindow.stop();a.remove.defer(250,a)}catch(b){}}},upload:function(){var a=this.store.queryBy(function(b){return"done"!==b.get("state")});if(!a.getCount()){return}if(true!==this.eventsSuspended&&false===this.fireEvent("beforeallstart",this)){return}if(this.singleUpload){this.uploadSingle()}else{a.each(this.uploadFile,this)}if(true===this.enableProgress){this.startProgress()}},uploadCallback:function(b,f,a){var d;this.upCount--;this.form=false;if(true===f){try{d=Ext.decode(a.responseText)}catch(c){this.processFailure(b,a,this.jsonErrorText);this.fireFinishEvents(b);return}if(true===d.success){this.processSuccess(b,a,d)}else{this.processFailure(b,a,d)}}else{this.processFailure(b,a)}this.fireFinishEvents(b)},uploadFile:function(a,e){if(true!==this.eventsSuspended&&false===this.fireEvent("beforefilestart",this,a)){return}var c=this.createForm(a);var b=a.get("input");b.set({name:b.id});c.appendChild(b);var d=this.getOptions(a,e);d.form=c;a.set("state","uploading");a.set("pctComplete",0);this.upCount++;Ext.Ajax.request(d);this.getIframe.defer(100,this,[a])},uploadSingle:function(){var a=this.store.queryBy(function(d){return"done"!==d.get("state")});if(!a.getCount()){return}var b=this.createForm();a.each(function(d){var e=d.get("input");e.set({name:e.id});b.appendChild(e);d.set("state","uploading")},this);var c=this.getOptions();c.form=b;this.form=b;this.upCount++;Ext.Ajax.request(c)}});Ext.reg("fileuploader",Ext.ux.FileUploader);Ext.ux.UploadPanel=Ext.extend(Ext.Panel,{addIconCls:"icon-plus",addText:"Add",bodyStyle:"padding:2px",buttonsAt:"tbar",clickRemoveText:"Click to remove",clickStopText:"Click to stop",emptyText:"No files",enableProgress:true,errorText:"Error",fileCls:"file",fileQueuedText:"File <b>{0}</b> is queued for upload",fileDoneText:"File <b>{0}</b> has been successfully uploaded",fileFailedText:"File <b>{0}</b> failed to upload",fileStoppedText:"File <b>{0}</b> stopped by user",fileUploadingText:"Uploading file <b>{0}</b>",maxFileSize:524288,maxLength:18,removeAllIconCls:"icon-cross",removeAllText:"Remove All",removeIconCls:"icon-minus",removeText:"Remove",selectedClass:"ux-up-item-selected",singleUpload:false,stopAllText:"Stop All",stopIconCls:"icon-stop",uploadText:"Upload",uploadIconCls:"icon-upload",workingIconCls:"icon-working",initComponent:function(){var d={xtype:"browsebutton",text:this.addText+"...",iconCls:this.addIconCls,scope:this,handler:this.onAddFile};var b={xtype:"button",iconCls:this.uploadIconCls,text:this.uploadText,scope:this,handler:this.onUpload,disabled:true};var e={xtype:"button",iconCls:this.removeAllIconCls,tooltip:this.removeAllText,scope:this,handler:this.onRemoveAllClick,disabled:true};if("body"!==this.buttonsAt){this[this.buttonsAt]=[d,b,"->",e]}var a=[{name:"id",type:"text",system:true},{name:"shortName",type:"text",system:true},{name:"fileName",type:"text",system:true},{name:"filePath",type:"text",system:true},{name:"fileCls",type:"text",system:true},{name:"input",system:true},{name:"form",system:true},{name:"state",type:"text",system:true},{name:"error",type:"text",system:true},{name:"progressId",type:"int",system:true},{name:"bytesTotal",type:"int",system:true},{name:"bytesUploaded",type:"int",system:true},{name:"estSec",type:"int",system:true},{name:"filesUploaded",type:"int",system:true},{name:"speedAverage",type:"int",system:true},{name:"speedLast",type:"int",system:true},{name:"timeLast",type:"int",system:true},{name:"timeStart",type:"int",system:true},{name:"pctComplete",type:"int",system:true}];if(Ext.isArray(this.customFields)){a.push(this.customFields)}this.store=new Ext.data.SimpleStore({id:0,fields:a,data:[]});Ext.apply(this,{items:[{xtype:"dataview",itemSelector:"div.ux-up-item",store:this.store,selectedClass:this.selectedClass,singleSelect:true,emptyText:this.emptyText,tpl:this.tpl||new Ext.XTemplate('<tpl for=".">'+'<div class="ux-up-item">'+'<div class="ux-up-icon-file {fileCls}">&#160;</div>'+'<div class="ux-up-text x-unselectable" qtip="{fileName}">{shortName}</div>'+'<div id="remove-{[values.input.id]}" class="ux-up-icon-state ux-up-icon-{state}"'+'qtip="{[this.scope.getQtip(values)]}">&#160;</div>'+"</div>"+"</tpl>",{scope:this}),listeners:{click:{scope:this,fn:this.onViewClick}}}]});Ext.ux.UploadPanel.superclass.initComponent.apply(this,arguments);this.view=this.items.itemAt(0);this.addEvents("beforefileadd","fileadd","beforefileremove","fileremove","beforequeueclear","queueclear","beforeupload");this.relayEvents(this.view,["beforeclick","beforeselect","click","containerclick","contextmenu","dblclick","selectionchange"]);var c={store:this.store,singleUpload:this.singleUpload,maxFileSize:this.maxFileSize,enableProgress:this.enableProgress,url:this.url,path:this.path};if(this.baseParams){c.baseParams=this.baseParams}this.uploader=new Ext.ux.FileUploader(c);this.relayEvents(this.uploader,["beforeallstart","allfinished","progress"]);this.on({beforeallstart:{scope:this,fn:function(){this.uploading=true;this.updateButtons()}},allfinished:{scope:this,fn:function(){this.uploading=false;this.updateButtons()}},progress:{fn:this.onProgress.createDelegate(this)}})},onRender:function(){Ext.ux.UploadPanel.superclass.onRender.apply(this,arguments);var a="tbar"===this.buttonsAt?this.getTopToolbar():this.getBottomToolbar();this.addBtn=Ext.getCmp(a.items.first().id);this.uploadBtn=Ext.getCmp(a.items.itemAt(1).id);this.removeAllBtn=Ext.getCmp(a.items.last().id);this.ownerCt.doLayout()},getQtip:function(a){var b="";switch(a.state){case"queued":b=String.format(this.fileQueuedText,a.fileName);b+="<br>"+this.clickRemoveText;break;case"uploading":b=String.format(this.fileUploadingText,a.fileName);b+="<br>"+a.pctComplete+"% done";b+="<br>"+this.clickStopText;break;case"done":b=String.format(this.fileDoneText,a.fileName);b+="<br>"+this.clickRemoveText;break;case"failed":b=String.format(this.fileFailedText,a.fileName);b+="<br>"+this.errorText+":"+a.error;b+="<br>"+this.clickRemoveText;break;case"stopped":b=String.format(this.fileStoppedText,a.fileName);b+="<br>"+this.clickRemoveText;break}return b},getFileName:function(a){return a.getValue().split(/[\/\\]/).pop()},getFilePath:function(a){return a.getValue().replace(/[^\/\\]+$/,"")},getFileCls:function(a){var b=a.split(".");if(1===b.length){return this.fileCls}else{return this.fileCls+"-"+b.pop().toLowerCase()}},onAddFile:function(c){if(true!==this.eventsSuspended&&false===this.fireEvent("beforefileadd",this,c.getInputFile())){return}var a=c.detachInputFile();a.addClass("x-hidden");var d=this.getFileName(a);var b=new this.store.recordType({input:a,fileName:d,filePath:this.getFilePath(a),shortName:Ext.util.Format.ellipsis(d,this.maxLength),fileCls:this.getFileCls(d),state:"queued"},a.id);b.commit();this.store.add(b);this.syncShadow();this.uploadBtn.enable();this.removeAllBtn.enable();if(true!==this.eventsSuspended){this.fireEvent("fileadd",this,this.store,b);this.ownerCt.doLayout()}},onDestroy:function(){if(this.uploader){this.uploader.stopAll();this.uploader.purgeListeners();this.uploader=null}if(this.view){this.view.purgeListeners();this.view.destroy();this.view=null}if(this.store){this.store.purgeListeners();this.store.destroy();this.store=null}},onProgress:function(i,f,g){var e,d,j,a,k,l,b,c;if(g){a=g.get("state");e=g.get("bytesTotal")||1;d=g.get("bytesUploaded")||0;if("uploading"===a){j=Math.round(1000*d/e)/10}else{if("done"===a){j=100}else{j=0}}g.set("pctComplete",j);k=this.store.indexOf(g);l=Ext.get(this.view.getNode(k));if(l){b=l.getWidth();l.applyStyles({"background-position":b*j/100+"px"})}}},onRemoveFile:function(a){if(true!==this.eventsSuspended&&false===this.fireEvent("beforefileremove",this,this.store,a)){return}var d=a.get("input");var b=d.up("em");d.remove();if(b){}this.store.remove(a);var c=this.store.getCount();this.uploadBtn.setDisabled(!c);this.removeAllBtn.setDisabled(!c);if(true!==this.eventsSuspended){this.fireEvent("fileremove",this,this.store);this.syncShadow()}this.ownerCt.doLayout()},onRemoveAllClick:function(a){if(true===this.uploading){this.stopAll()}else{this.removeAll()}},stopAll:function(){this.uploader.stopAll()},onViewClick:function(a,b,d,f){var c=f.getTarget("div:any(.ux-up-icon-queued|.ux-up-icon-failed|.ux-up-icon-done|.ux-up-icon-stopped)");if(c){this.onRemoveFile(this.store.getAt(b))}c=f.getTarget("div.ux-up-icon-uploading");if(c){this.uploader.stopUpload(this.store.getAt(b))}},onUpload:function(){if(true!==this.eventsSuspended&&false===this.fireEvent("beforeupload",this)){return false}this.uploader.upload()},setUrl:function(a){this.url=a;this.uploader.setUrl(a)},setPath:function(a){this.uploader.setPath(a)},updateButtons:function(){if(true===this.uploading){this.addBtn.disable();this.uploadBtn.disable();this.removeAllBtn.setIconClass(this.stopIconCls);this.removeAllBtn.getEl().child(this.removeAllBtn.buttonSelector).dom[this.removeAllBtn.tooltipType]=this.stopAllText}else{this.addBtn.enable();this.uploadBtn.enable();this.removeAllBtn.setIconClass(this.removeAllIconCls);this.removeAllBtn.getEl().child(this.removeAllBtn.buttonSelector).dom[this.removeAllBtn.tooltipType]=this.removeAllText}},removeAll:function(){var a=this.eventsSuspended;if(false!==this.eventsSuspended&&false===this.fireEvent("beforequeueclear",this,this.store)){return false}this.suspendEvents();this.store.each(this.onRemoveFile,this);this.eventsSuspended=a;if(true!==this.eventsSuspended){this.fireEvent("queueclear",this,this.store)}this.syncShadow()},syncShadow:function(){if(this.contextmenu&&this.contextmenu.shadow){this.contextmenu.getEl().shadow.show(this.contextmenu.getEl())}}});Ext.reg("uploadpanel",Ext.ux.UploadPanel);
/*
 * Ext JS Library 3.4.0
 * Copyright(c) 2006-2011 Sencha Inc.
 * licensing@sencha.com
 * http://www.sencha.com/license
 */
Ext.ns("Ext.ux.tree");Ext.ux.tree.TreeGridSorter=Ext.extend(Ext.tree.TreeSorter,{sortClasses:["sort-asc","sort-desc"],sortAscText:"Sort Ascending",sortDescText:"Sort Descending",constructor:function(a,b){if(!Ext.isObject(b)){b={property:a.columns[0].dataIndex||"text",folderSort:true}}Ext.ux.tree.TreeGridSorter.superclass.constructor.apply(this,arguments);this.tree=a;a.on("headerclick",this.onHeaderClick,this);a.ddAppendOnly=true;var c=this;this.defaultSortFn=function(l,k){var j=c.dir&&c.dir.toLowerCase()=="desc",d=c.property||"text",f=c.sortType,n=c.caseSensitive===true,e=c.leafAttr||"leaf",o=l.attributes,m=k.attributes;if(c.folderSort){if(o[e]&&!m[e]){return 1}if(!o[e]&&m[e]){return -1}}var i=o[d],g=m[d],p=f?f(i):(n?i:i.toUpperCase());v2=f?f(g):(n?g:g.toUpperCase());if(p<v2){return j?+1:-1}else{if(p>v2){return j?-1:+1}else{return 0}}};a.on("afterrender",this.onAfterTreeRender,this,{single:true});a.on("headermenuclick",this.onHeaderMenuClick,this)},onAfterTreeRender:function(){if(this.tree.hmenu){this.tree.hmenu.insert(0,{itemId:"asc",text:this.sortAscText,cls:"xg-hmenu-sort-asc"},{itemId:"desc",text:this.sortDescText,cls:"xg-hmenu-sort-desc"})}this.updateSortIcon(0,"asc")},onHeaderMenuClick:function(d,b,a){if(b==="asc"||b==="desc"){this.onHeaderClick(d,null,a);return false}},onHeaderClick:function(e,b,a){if(e&&!this.tree.headersDisabled){var d=this;d.property=e.dataIndex;d.dir=e.dir=(e.dir==="desc"?"asc":"desc");d.sortType=e.sortType;d.caseSensitive===Ext.isBoolean(e.caseSensitive)?e.caseSensitive:this.caseSensitive;d.sortFn=e.sortFn||this.defaultSortFn;this.tree.root.cascade(function(c){if(!c.isLeaf()){d.updateSort(d.tree,c)}});this.updateSortIcon(a,e.dir)}},updateSortIcon:function(b,a){var d=this.sortClasses,c=this.tree.innerHd.select("td").removeClass(d);c.item(b).addClass(d[a=="desc"?1:0])}});
/*
 * Ext JS Library 3.4.0
 * Copyright(c) 2006-2011 Sencha Inc.
 * licensing@sencha.com
 * http://www.sencha.com/license
 */
Ext.tree.ColumnResizer=Ext.extend(Ext.util.Observable,{minWidth:14,constructor:function(a){Ext.apply(this,a);Ext.tree.ColumnResizer.superclass.constructor.call(this)},init:function(a){this.tree=a;a.on("render",this.initEvents,this)},initEvents:function(a){a.mon(a.innerHd,"mousemove",this.handleHdMove,this);this.tracker=new Ext.dd.DragTracker({onBeforeStart:this.onBeforeStart.createDelegate(this),onStart:this.onStart.createDelegate(this),onDrag:this.onDrag.createDelegate(this),onEnd:this.onEnd.createDelegate(this),tolerance:3,autoStart:300});this.tracker.initEl(a.innerHd);a.on("beforedestroy",this.tracker.destroy,this.tracker)},handleHdMove:function(f,k){var g=5,j=f.getPageX(),d=f.getTarget(".x-treegrid-hd",3,true);if(d){var b=d.getRegion(),l=d.dom.style,c=d.dom.parentNode;if(j-b.left<=g&&d.dom!==c.firstChild){var a=d.dom.previousSibling;while(a&&Ext.fly(a).hasClass("x-treegrid-hd-hidden")){a=a.previousSibling}if(a){this.activeHd=Ext.get(a);l.cursor=Ext.isWebKit?"e-resize":"col-resize"}}else{if(b.right-j<=g){var i=d.dom;while(i&&Ext.fly(i).hasClass("x-treegrid-hd-hidden")){i=i.previousSibling}if(i){this.activeHd=Ext.get(i);l.cursor=Ext.isWebKit?"w-resize":"col-resize"}}else{delete this.activeHd;l.cursor=""}}}},onBeforeStart:function(a){this.dragHd=this.activeHd;return !!this.dragHd},onStart:function(b){this.dragHeadersDisabled=this.tree.headersDisabled;this.tree.headersDisabled=true;this.proxy=this.tree.body.createChild({cls:"x-treegrid-resizer"});this.proxy.setHeight(this.tree.body.getHeight());var a=this.tracker.getXY()[0];this.hdX=this.dragHd.getX();this.hdIndex=this.tree.findHeaderIndex(this.dragHd);this.proxy.setX(this.hdX);this.proxy.setWidth(a-this.hdX);this.maxWidth=this.tree.outerCt.getWidth()-this.tree.innerBody.translatePoints(this.hdX).left},onDrag:function(b){var a=this.tracker.getXY()[0];this.proxy.setWidth((a-this.hdX).constrain(this.minWidth,this.maxWidth))},onEnd:function(d){var b=this.proxy.getWidth(),a=this.tree,c=this.dragHeadersDisabled;this.proxy.remove();delete this.dragHd;a.columns[this.hdIndex].width=b;a.updateColumnWidths();setTimeout(function(){a.headersDisabled=c},100)}});
/*
 * Ext JS Library 3.4.0
 * Copyright(c) 2006-2011 Sencha Inc.
 * licensing@sencha.com
 * http://www.sencha.com/license
 */
Ext.ux.tree.TreeGridNodeUI=Ext.extend(Ext.tree.TreeNodeUI,{isTreeGridNodeUI:true,renderElements:function(d,m,j,o){var p=d.getOwnerTree(),l=p.columns,k=l[0],e,b,g;this.indentMarkup=d.parentNode?d.parentNode.ui.getChildIndent():"";b=['<tbody class="x-tree-node">','<tr ext:tree-node-id="',d.id,'" class="x-tree-node-el x-tree-node-leaf ',m.cls,'">','<td class="x-treegrid-col">','<span class="x-tree-node-indent">',this.indentMarkup,"</span>",'<img src="',this.emptyIcon,'" class="x-tree-ec-icon x-tree-elbow" />','<img src="',m.icon||this.emptyIcon,'" class="x-tree-node-icon',(m.icon?" x-tree-node-inline-icon":""),(m.iconCls?" "+m.iconCls:""),'" unselectable="on" />','<a hidefocus="on" class="x-tree-node-anchor" href="',m.href?m.href:"#",'" tabIndex="1" ',m.hrefTarget?' target="'+m.hrefTarget+'"':"",">",'<span unselectable="on">',(k.tpl?k.tpl.apply(m):m[k.dataIndex]||k.text),"</span></a>","</td>"];for(e=1,g=l.length;e<g;e++){k=l[e];b.push('<td class="x-treegrid-col ',(k.cls?k.cls:""),'">','<div unselectable="on" class="x-treegrid-text"',(k.align?' style="text-align: '+k.align+';"':""),">",(k.tpl?k.tpl.apply(m):m[k.dataIndex]),"</div>","</td>")}b.push('</tr><tr class="x-tree-node-ct"><td colspan="',l.length,'">','<table class="x-treegrid-node-ct-table" cellpadding="0" cellspacing="0" style="table-layout: fixed; display: none; width: ',p.innerCt.getWidth(),'px;"><colgroup>');for(e=0,g=l.length;e<g;e++){b.push('<col style="width: ',(l[e].hidden?0:l[e].width),'px;" />')}b.push("</colgroup></table></td></tr></tbody>");if(o!==true&&d.nextSibling&&d.nextSibling.ui.getEl()){this.wrap=Ext.DomHelper.insertHtml("beforeBegin",d.nextSibling.ui.getEl(),b.join(""))}else{this.wrap=Ext.DomHelper.insertHtml("beforeEnd",j,b.join(""))}this.elNode=this.wrap.childNodes[0];this.ctNode=this.wrap.childNodes[1].firstChild.firstChild;var f=this.elNode.firstChild.childNodes;this.indentNode=f[0];this.ecNode=f[1];this.iconNode=f[2];this.anchor=f[3];this.textNode=f[3].firstChild},animExpand:function(a){this.ctNode.style.display="";Ext.ux.tree.TreeGridNodeUI.superclass.animExpand.call(this,a)}});Ext.ux.tree.TreeGridRootNodeUI=Ext.extend(Ext.tree.TreeNodeUI,{isTreeGridNodeUI:true,render:function(){if(!this.rendered){this.wrap=this.ctNode=this.node.ownerTree.innerCt.dom;this.node.expanded=true}if(Ext.isWebKit){var a=this.ctNode;a.style.tableLayout=null;(function(){a.style.tableLayout="fixed"}).defer(1)}},destroy:function(){if(this.elNode){Ext.dd.Registry.unregister(this.elNode.id)}delete this.node},collapse:Ext.emptyFn,expand:Ext.emptyFn});
/*
 * Ext JS Library 3.4.0
 * Copyright(c) 2006-2011 Sencha Inc.
 * licensing@sencha.com
 * http://www.sencha.com/license
 */
Ext.ux.tree.TreeGridLoader=Ext.extend(Ext.tree.TreeLoader,{createNode:function(a){if(!a.uiProvider){a.uiProvider=Ext.ux.tree.TreeGridNodeUI}return Ext.tree.TreeLoader.prototype.createNode.call(this,a)}});
/*
 * Ext JS Library 3.4.0
 * Copyright(c) 2006-2011 Sencha Inc.
 * licensing@sencha.com
 * http://www.sencha.com/license
 */
(function(){Ext.override(Ext.list.Column,{init:function(){var b=Ext.data.Types,a=this.sortType;if(this.type){if(Ext.isString(this.type)){this.type=Ext.data.Types[this.type.toUpperCase()]||b.AUTO}}else{this.type=b.AUTO}if(Ext.isString(a)){this.sortType=Ext.data.SortTypes[a]}else{if(Ext.isEmpty(a)){this.sortType=this.type.sortType}}}});Ext.tree.Column=Ext.extend(Ext.list.Column,{});Ext.tree.NumberColumn=Ext.extend(Ext.list.NumberColumn,{});Ext.tree.DateColumn=Ext.extend(Ext.list.DateColumn,{});Ext.tree.BooleanColumn=Ext.extend(Ext.list.BooleanColumn,{});Ext.reg("tgcolumn",Ext.tree.Column);Ext.reg("tgnumbercolumn",Ext.tree.NumberColumn);Ext.reg("tgdatecolumn",Ext.tree.DateColumn);Ext.reg("tgbooleancolumn",Ext.tree.BooleanColumn)})();
/*
 * Ext JS Library 3.4.0
 * Copyright(c) 2006-2011 Sencha Inc.
 * licensing@sencha.com
 * http://www.sencha.com/license
 */
Ext.ux.tree.TreeGrid=Ext.extend(Ext.tree.TreePanel,{rootVisible:false,useArrows:true,lines:false,borderWidth:Ext.isBorderBox?0:2,cls:"x-treegrid",columnResize:true,enableSort:true,reserveScrollOffset:true,enableHdMenu:true,columnsText:"Columns",initComponent:function(){if(!this.root){this.root=new Ext.tree.AsyncTreeNode({text:"Root"})}var a=this.loader;if(!a){a=new Ext.ux.tree.TreeGridLoader({dataUrl:this.dataUrl,requestMethod:this.requestMethod,store:this.store})}else{if(Ext.isObject(a)&&!a.load){a=new Ext.ux.tree.TreeGridLoader(a)}}this.loader=a;Ext.ux.tree.TreeGrid.superclass.initComponent.call(this);this.initColumns();if(this.enableSort){this.treeGridSorter=new Ext.ux.tree.TreeGridSorter(this,this.enableSort)}if(this.columnResize){this.colResizer=new Ext.tree.ColumnResizer(this.columnResize);this.colResizer.init(this)}var b=this.columns;if(!this.internalTpl){this.internalTpl=new Ext.XTemplate('<div class="x-grid3-header">','<div class="x-treegrid-header-inner">','<div class="x-grid3-header-offset">','<table style="table-layout: fixed;" cellspacing="0" cellpadding="0" border="0"><colgroup><tpl for="columns"><col /></tpl></colgroup>','<thead><tr class="x-grid3-hd-row">','<tpl for="columns">','<td class="x-grid3-hd x-grid3-cell x-treegrid-hd" style="text-align: {align};" id="',this.id,'-xlhd-{#}">','<div class="x-grid3-hd-inner x-treegrid-hd-inner" unselectable="on">',this.enableHdMenu?'<a class="x-grid3-hd-btn" href="#"></a>':"",'{header}<img class="x-grid3-sort-icon" src="',Ext.BLANK_IMAGE_URL,'" />',"</div>","</td></tpl>","</tr></thead>","</table>","</div></div>","</div>",'<div class="x-treegrid-root-node">','<table class="x-treegrid-root-table" cellpadding="0" cellspacing="0" style="table-layout: fixed;"></table>',"</div>")}if(!this.colgroupTpl){this.colgroupTpl=new Ext.XTemplate('<colgroup><tpl for="columns"><col style="width: {width}px"/></tpl></colgroup>')}},initColumns:function(){var e=this.columns,a=e.length,d=[],b,f;for(b=0;b<a;b++){f=e[b];if(!f.isColumn){f.xtype=f.xtype?(/^tg/.test(f.xtype)?f.xtype:"tg"+f.xtype):"tgcolumn";f=Ext.create(f)}f.init(this);d.push(f);if(this.enableSort!==false&&f.sortable!==false){f.sortable=true;this.enableSort=true}}this.columns=d},onRender:function(){Ext.tree.TreePanel.superclass.onRender.apply(this,arguments);this.el.addClass("x-treegrid");this.outerCt=this.body.createChild({cls:"x-tree-root-ct x-treegrid-ct "+(this.useArrows?"x-tree-arrows":this.lines?"x-tree-lines":"x-tree-no-lines")});this.internalTpl.overwrite(this.outerCt,{columns:this.columns});this.mainHd=Ext.get(this.outerCt.dom.firstChild);this.innerHd=Ext.get(this.mainHd.dom.firstChild);this.innerBody=Ext.get(this.outerCt.dom.lastChild);this.innerCt=Ext.get(this.innerBody.dom.firstChild);this.colgroupTpl.insertFirst(this.innerCt,{columns:this.columns});if(this.hideHeaders){this.el.child(".x-grid3-header").setDisplayed("none")}else{if(this.enableHdMenu!==false){this.hmenu=new Ext.menu.Menu({id:this.id+"-hctx"});if(this.enableColumnHide!==false){this.colMenu=new Ext.menu.Menu({id:this.id+"-hcols-menu"});this.colMenu.on({scope:this,beforeshow:this.beforeColMenuShow,itemclick:this.handleHdMenuClick});this.hmenu.add({itemId:"columns",hideOnClick:false,text:this.columnsText,menu:this.colMenu,iconCls:"x-cols-icon"})}this.hmenu.on("itemclick",this.handleHdMenuClick,this)}}},setRootNode:function(a){a.attributes.uiProvider=Ext.ux.tree.TreeGridRootNodeUI;a=Ext.ux.tree.TreeGrid.superclass.setRootNode.call(this,a);if(this.innerCt){this.colgroupTpl.insertFirst(this.innerCt,{columns:this.columns})}return a},clearInnerCt:function(){if(Ext.isIE){var a=this.innerCt.dom;while(a.firstChild){a.removeChild(a.firstChild)}}else{Ext.ux.tree.TreeGrid.superclass.clearInnerCt.call(this)}},initEvents:function(){Ext.ux.tree.TreeGrid.superclass.initEvents.apply(this,arguments);this.mon(this.innerBody,"scroll",this.syncScroll,this);this.mon(this.innerHd,"click",this.handleHdDown,this);this.mon(this.mainHd,{scope:this,mouseover:this.handleHdOver,mouseout:this.handleHdOut})},onResize:function(b,c){Ext.ux.tree.TreeGrid.superclass.onResize.apply(this,arguments);var e=this.innerBody.dom;var f=this.innerHd.dom;if(!e){return}if(Ext.isNumber(c)){e.style.height=this.body.getHeight(true)-f.offsetHeight+"px"}if(Ext.isNumber(b)){var a=Ext.num(this.scrollOffset,Ext.getScrollBarWidth());if(this.reserveScrollOffset||((e.offsetWidth-e.clientWidth)>10)){this.setScrollOffset(a)}else{var d=this;setTimeout(function(){d.setScrollOffset(e.offsetWidth-e.clientWidth>10?a:0)},10)}}},updateColumnWidths:function(){var l=this.columns,n=l.length,a=this.outerCt.query("colgroup"),m=a.length,k,e,d,b;for(d=0;d<n;d++){k=l[d];for(b=0;b<m;b++){e=a[b];e.childNodes[d].style.width=(k.hidden?0:k.width)+"px"}}for(d=0,a=this.innerHd.query("td"),len=a.length;d<len;d++){k=Ext.fly(a[d]);if(l[d]&&l[d].hidden){k.addClass("x-treegrid-hd-hidden")}else{k.removeClass("x-treegrid-hd-hidden")}}var f=this.getTotalColumnWidth();Ext.fly(this.innerHd.dom.firstChild).setWidth(f+(this.scrollOffset||0));this.outerCt.select("table").setWidth(f);this.syncHeaderScroll()},getVisibleColumns:function(){var c=[],d=this.columns,a=d.length,b;for(b=0;b<a;b++){if(!d[b].hidden){c.push(d[b])}}return c},getTotalColumnWidth:function(){var d=0;for(var b=0,c=this.getVisibleColumns(),a=c.length;b<a;b++){d+=c[b].width}return d},setScrollOffset:function(a){this.scrollOffset=a;this.updateColumnWidths()},handleHdDown:function(j,f){var i=j.getTarget(".x-treegrid-hd");if(i&&Ext.fly(f).hasClass("x-grid3-hd-btn")){var b=this.hmenu.items,g=this.columns,a=this.findHeaderIndex(i),k=g[a],d=k.sortable;j.stopEvent();Ext.fly(i).addClass("x-grid3-hd-menu-open");this.hdCtxIndex=a;this.fireEvent("headerbuttonclick",b,k,i,a);this.hmenu.on("hide",function(){Ext.fly(i).removeClass("x-grid3-hd-menu-open")},this,{single:true});this.hmenu.show(f,"tl-bl?")}else{if(i){var a=this.findHeaderIndex(i);this.fireEvent("headerclick",this.columns[a],i,a)}}},handleHdOver:function(d,a){var c=d.getTarget(".x-treegrid-hd");if(c&&!this.headersDisabled){index=this.findHeaderIndex(c);this.activeHdRef=a;this.activeHdIndex=index;var b=Ext.get(c);this.activeHdRegion=b.getRegion();b.addClass("x-grid3-hd-over");this.activeHdBtn=b.child(".x-grid3-hd-btn");if(this.activeHdBtn){this.activeHdBtn.dom.style.height=(c.firstChild.offsetHeight-1)+"px"}}},handleHdOut:function(c,a){var b=c.getTarget(".x-treegrid-hd");if(b&&(!Ext.isIE||!c.within(b,true))){this.activeHdRef=null;Ext.fly(b).removeClass("x-grid3-hd-over");b.style.cursor=""}},findHeaderIndex:function(d){d=d.dom||d;var b=d.parentNode.childNodes;for(var a=0,e;e=b[a];a++){if(e==d){return a}}return -1},beforeColMenuShow:function(){var d=this.columns,b=d.length,a,e;this.colMenu.removeAll();for(a=1;a<b;a++){e=d[a];if(e.hideable!==false){this.colMenu.add(new Ext.menu.CheckItem({itemId:"col-"+a,text:e.header,checked:!e.hidden,hideOnClick:false,disabled:e.hideable===false}))}}},handleHdMenuClick:function(b){var a=this.hdCtxIndex,c=b.getItemId();if(this.fireEvent("headermenuclick",this.columns[a],c,a)!==false){a=c.substr(4);if(a>0&&this.columns[a]){this.setColumnVisible(a,!b.checked)}}return true},setColumnVisible:function(a,b){this.columns[a].hidden=!b;this.updateColumnWidths()},scrollToTop:function(){this.innerBody.dom.scrollTop=0;this.innerBody.dom.scrollLeft=0},syncScroll:function(){this.syncHeaderScroll();var a=this.innerBody.dom;this.fireEvent("bodyscroll",a.scrollLeft,a.scrollTop)},syncHeaderScroll:function(){var a=this.innerBody.dom;this.innerHd.dom.scrollLeft=a.scrollLeft;this.innerHd.dom.scrollLeft=a.scrollLeft},registerNode:function(a){Ext.ux.tree.TreeGrid.superclass.registerNode.call(this,a);if(!a.uiProvider&&!a.isRoot&&!a.ui.isTreeGridNodeUI){a.ui=new Ext.ux.tree.TreeGridNodeUI(a)}}});Ext.reg("treegrid",Ext.ux.tree.TreeGrid);(function(){var g="ace";var d=(function(){return this})();if(typeof requirejs!=="undefined"){return}var c=function(i,k,j){if(typeof i!=="string"){if(c.original){c.original.apply(window,arguments)}else{console.error("dropping module because define wasn't a string.");console.trace()}return}if(arguments.length==2){j=k}if(!c.modules){c.modules={}}c.modules[i]=j};var a=function(r,m,q){if(Object.prototype.toString.call(m)==="[object Array]"){var p=[];for(var k=0,j=m.length;k<j;++k){var o=f(r,m[k]);if(!o&&a.original){return a.original.apply(window,arguments)}p.push(o)}if(q){q.apply(null,p)}}else{if(typeof m==="string"){var n=f(r,m);if(!n&&a.original){return a.original.apply(window,arguments)}if(q){q()}return n}else{if(a.original){return a.original.apply(window,arguments)}}}};var e=function(m,i){if(i.indexOf("!")!==-1){var l=i.split("!");return e(m,l[0])+"!"+e(m,l[1])}if(i.charAt(0)=="."){var k=m.split("/").slice(0,-1).join("/");i=k+"/"+i;while(i.indexOf(".")!==-1&&j!=i){var j=i;i=i.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return i};var f=function(o,j){j=e(o,j);var l=c.modules[j];if(!l){return null}if(typeof l==="function"){var i={};var k={id:j,uri:"",exports:i,packaged:true};var n=function(p,q){return a(j,p,q)};var m=l(n,i,k);i=m||k.exports;c.modules[j]=i;return i}return l};function b(k){var j=function(l,m){return a("",l,m)};j.packaged=true;var i=d;if(k){if(!d[k]){d[k]={}}i=d[k]}if(i.define){c.original=i.define}i.define=c;if(i.require){a.original=i.require}i.require=j}b(g)})();ace.define("ace/ace",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/dom","ace/lib/event","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/theme/textmate"],function(d,f,c){d("./lib/fixoldbrowsers");var g=d("./lib/dom");var j=d("./lib/event");var i=d("./editor").Editor;var a=d("./edit_session").EditSession;var b=d("./undomanager").UndoManager;var e=d("./virtual_renderer").VirtualRenderer;f.edit=function(m){if(typeof(m)=="string"){m=document.getElementById(m)}var n=new a(g.getInnerText(m));n.setUndoManager(new b());m.innerHTML="";var l=new i(new e(m,d("./theme/textmate")));l.setSession(n);var k={};k.document=n;k.editor=l;l.resize();j.addListener(window,"resize",function(){l.resize()});m.env=k;l.env=k;return l}});
/*
    Copyright (c) 2009, 280 North Inc. http://280north.com/
    MIT License. http://github.com/280north/narwhal/blob/master/README.md
*/
ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/regexp","ace/lib/es5-shim"],function(b,a,c){b("./regexp");b("./es5-shim")});ace.define("ace/lib/regexp",["require","exports","module"],function(b,a,c){var i={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},f=i.exec.call(/()??/,"")[1]===undefined,e=function(){var j=/^/g;i.test.call(j,"");return !j.lastIndex}();RegExp.prototype.exec=function(n){var l=i.exec.apply(this,arguments),k,j;if(l){if(!f&&l.length>1&&d(l,"")>-1){j=RegExp(this.source,i.replace.call(g(this),"g",""));i.replace.call(n.slice(l.index),j,function(){for(var o=1;o<arguments.length-2;o++){if(arguments[o]===undefined){l[o]=undefined}}})}if(this._xregexp&&this._xregexp.captureNames){for(var m=1;m<l.length;m++){k=this._xregexp.captureNames[m-1];if(k){l[k]=l[m]}}}if(!e&&this.global&&!l[0].length&&(this.lastIndex>l.index)){this.lastIndex--}}return l};if(!e){RegExp.prototype.test=function(k){var j=i.exec.call(this,k);if(j&&this.global&&!j[0].length&&(this.lastIndex>j.index)){this.lastIndex--}return !!j}}function g(j){return(j.global?"g":"")+(j.ignoreCase?"i":"")+(j.multiline?"m":"")+(j.extended?"x":"")+(j.sticky?"y":"")}function d(m,k,l){if(Array.prototype.indexOf){return m.indexOf(k,l)}for(var j=l||0;j<m.length;j++){if(m[j]===k){return j}}return -1}});
/*
    Copyright (c) 2009, 280 North Inc. http://280north.com/
    MIT License. http://github.com/280north/narwhal/blob/master/README.md
*/
ace.define("ace/lib/es5-shim",["require","exports","module"],function(g,ah,e){if(!Function.prototype.bind){Function.prototype.bind=function j(ap){var aq=this;if(typeof aq!="function"){throw new TypeError()}var an=v.call(arguments,1);var ao=function(){if(this instanceof ao){var au=function(){};au.prototype=aq.prototype;var at=new au;var ar=aq.apply(at,an.concat(v.call(arguments)));if(ar!==null&&Object(ar)===ar){return ar}return at}else{return aq.apply(ap,an.concat(v.call(arguments)))}};return ao}}var c=Function.prototype.call;var L=Array.prototype;var A=Object.prototype;var v=L.slice;var i=c.bind(A.toString);var X=c.bind(A.hasOwnProperty);var af;var al;var ae;var aj;var r;if((r=X(A,"__defineGetter__"))){af=c.bind(A.__defineGetter__);al=c.bind(A.__defineSetter__);ae=c.bind(A.__lookupGetter__);aj=c.bind(A.__lookupSetter__)}if(!Array.isArray){Array.isArray=function D(an){return i(an)=="[object Array]"}}if(!Array.prototype.forEach){Array.prototype.forEach=function d(an){var ao=M(this),aq=arguments[1],ap=0,ar=ao.length>>>0;if(i(an)!="[object Function]"){throw new TypeError()}while(ap<ar){if(ap in ao){an.call(aq,ao[ap],ap,ao)}ap++}}}if(!Array.prototype.map){Array.prototype.map=function K(ao){var ap=M(this),at=ap.length>>>0,an=Array(at),ar=arguments[1];if(i(ao)!="[object Function]"){throw new TypeError()}for(var aq=0;aq<at;aq++){if(aq in ap){an[aq]=ao.call(ar,ap[aq],aq,ap)}}return an}}if(!Array.prototype.filter){Array.prototype.filter=function U(ao){var ap=M(this),at=ap.length>>>0,an=[],ar=arguments[1];if(i(ao)!="[object Function]"){throw new TypeError()}for(var aq=0;aq<at;aq++){if(aq in ap&&ao.call(ar,ap[aq],aq,ap)){an.push(ap[aq])}}return an}}if(!Array.prototype.every){Array.prototype.every=function Q(an){var ao=M(this),ar=ao.length>>>0,aq=arguments[1];if(i(an)!="[object Function]"){throw new TypeError()}for(var ap=0;ap<ar;ap++){if(ap in ao&&!an.call(aq,ao[ap],ap,ao)){return false}}return true}}if(!Array.prototype.some){Array.prototype.some=function ab(an){var ao=M(this),ar=ao.length>>>0,aq=arguments[1];if(i(an)!="[object Function]"){throw new TypeError()}for(var ap=0;ap<ar;ap++){if(ap in ao&&an.call(aq,ao[ap],ap,ao)){return true}}return false}}if(!Array.prototype.reduce){Array.prototype.reduce=function s(ao){var ap=M(this),ar=ap.length>>>0;if(i(ao)!="[object Function]"){throw new TypeError()}if(!ar&&arguments.length==1){throw new TypeError()}var aq=0;var an;if(arguments.length>=2){an=arguments[1]}else{do{if(aq in ap){an=ap[aq++];break}if(++aq>=ar){throw new TypeError()}}while(true)}for(;aq<ar;aq++){if(aq in ap){an=ao.call(void 0,an,ap[aq],aq,ap)}}return an}}if(!Array.prototype.reduceRight){Array.prototype.reduceRight=function C(ao){var ap=M(this),ar=ap.length>>>0;if(i(ao)!="[object Function]"){throw new TypeError()}if(!ar&&arguments.length==1){throw new TypeError()}var an,aq=ar-1;if(arguments.length>=2){an=arguments[1]}else{do{if(aq in ap){an=ap[aq--];break}if(--aq<0){throw new TypeError()}}while(true)}do{if(aq in this){an=ao.call(void 0,an,ap[aq],aq,ap)}}while(aq--);return an}}if(!Array.prototype.indexOf){Array.prototype.indexOf=function x(ao){var an=M(this),aq=an.length>>>0;if(!aq){return -1}var ap=0;if(arguments.length>1){ap=Y(arguments[1])}ap=ap>=0?ap:Math.max(0,aq+ap);for(;ap<aq;ap++){if(ap in an&&an[ap]===ao){return ap}}return -1}}if(!Array.prototype.lastIndexOf){Array.prototype.lastIndexOf=function W(ao){var an=M(this),aq=an.length>>>0;if(!aq){return -1}var ap=aq-1;if(arguments.length>1){ap=Math.min(ap,Y(arguments[1]))}ap=ap>=0?ap:aq-Math.abs(ap);for(;ap>=0;ap--){if(ap in an&&ao===an[ap]){return ap}}return -1}}if(!Object.getPrototypeOf){Object.getPrototypeOf=function ai(an){return an.__proto__||(an.constructor?an.constructor.prototype:A)}}if(!Object.getOwnPropertyDescriptor){var b="Object.getOwnPropertyDescriptor called on a "+"non-object: ";Object.getOwnPropertyDescriptor=function B(ap,aq){if((typeof ap!="object"&&typeof ap!="function")||ap===null){throw new TypeError(b+ap)}if(!X(ap,aq)){return}var ar,an,at;ar={enumerable:true,configurable:true};if(r){var ao=ap.__proto__;ap.__proto__=A;var an=ae(ap,aq);var at=aj(ap,aq);ap.__proto__=ao;if(an||at){if(an){ar.get=an}if(at){ar.set=at}return ar}}ar.value=ap[aq];return ar}}if(!Object.getOwnPropertyNames){Object.getOwnPropertyNames=function V(an){return Object.keys(an)}}if(!Object.create){Object.create=function l(ap,aq){var ao;if(ap===null){ao={"__proto__":null}}else{if(typeof ap!="object"){throw new TypeError("typeof prototype["+(typeof ap)+"] != 'object'")}var an=function(){};an.prototype=ap;ao=new an();ao.__proto__=ap}if(aq!==void 0){Object.defineProperties(ao,aq)}return ao}}function F(an){try{Object.defineProperty(an,"sentinel",{});return"sentinel" in an}catch(ao){}}if(Object.defineProperty){var k=F({});var H=typeof document=="undefined"||F(document.createElement("div"));if(!k||!H){var E=Object.defineProperty}}if(!Object.defineProperty||E){var f="Property description must be an object: ";var Z="Object.defineProperty called on non-object: ";var q="getters & setters can not be defined "+"on this javascript engine";Object.defineProperty=function ac(ao,aq,ar){if((typeof ao!="object"&&typeof ao!="function")||ao===null){throw new TypeError(Z+ao)}if((typeof ar!="object"&&typeof ar!="function")||ar===null){throw new TypeError(f+ar)}if(E){try{return E.call(Object,ao,aq,ar)}catch(ap){}}if(X(ar,"value")){if(r&&(ae(ao,aq)||aj(ao,aq))){var an=ao.__proto__;ao.__proto__=A;delete ao[aq];ao[aq]=ar.value;ao.__proto__=an}else{ao[aq]=ar.value}}else{if(!r){throw new TypeError(q)}if(X(ar,"get")){af(ao,aq,ar.get)}if(X(ar,"set")){al(ao,aq,ar.set)}}return ao}}if(!Object.defineProperties){Object.defineProperties=function O(an,ao){for(var ap in ao){if(X(ao,ap)){Object.defineProperty(an,ap,ao[ap])}}return an}}if(!Object.seal){Object.seal=function aa(an){return an}}if(!Object.freeze){Object.freeze=function u(an){return an}}try{Object.freeze(function(){})}catch(n){Object.freeze=(function u(ao){return function an(ap){if(typeof ap=="function"){return ap}else{return ao(ap)}}})(Object.freeze)}if(!Object.preventExtensions){Object.preventExtensions=function P(an){return an}}if(!Object.isSealed){Object.isSealed=function am(an){return false}}if(!Object.isFrozen){Object.isFrozen=function ad(an){return false}}if(!Object.isExtensible){Object.isExtensible=function t(ao){if(Object(ao)===ao){throw new TypeError()}var an="";while(X(ao,an)){an+="?"}ao[an]=true;var ap=X(ao,an);delete ao[an];return ap}}if(!Object.keys){var p=true,w=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],m=w.length;for(var y in {"toString":null}){p=false}Object.keys=function J(ap){if((typeof ap!="object"&&typeof ap!="function")||ap===null){throw new TypeError("Object.keys called on a non-object")}var at=[];for(var ao in ap){if(X(ap,ao)){at.push(ao)}}if(p){for(var aq=0,ar=m;aq<ar;aq++){var an=w[aq];if(X(ap,an)){at.push(an)}}}return at}}if(!Date.prototype.toISOString||(new Date(-62198755200000).toISOString().indexOf("-000001")===-1)){Date.prototype.toISOString=function o(){var an,ap,aq,ao;if(!isFinite(this)){throw new RangeError}an=[this.getUTCMonth()+1,this.getUTCDate(),this.getUTCHours(),this.getUTCMinutes(),this.getUTCSeconds()];ao=this.getUTCFullYear();ao=(ao<0?"-":(ao>9999?"+":""))+("00000"+Math.abs(ao)).slice(0<=ao&&ao<=9999?-4:-6);ap=an.length;while(ap--){aq=an[ap];if(aq<10){an[ap]="0"+aq}}return ao+"-"+an.slice(0,2).join("-")+"T"+an.slice(2).join(":")+"."+("000"+this.getUTCMilliseconds()).slice(-3)+"Z"}}if(!Date.now){Date.now=function ag(){return new Date().getTime()}}if(!Date.prototype.toJSON){Date.prototype.toJSON=function R(an){if(typeof this.toISOString!="function"){throw new TypeError()}return this.toISOString()}}if(Date.parse("+275760-09-13T00:00:00.000Z")!==8640000000000000){Date=(function(ap){var an=function an(av,aA,at,az,ay,aB,au){var aw=arguments.length;if(this instanceof ap){var ax=aw==1&&String(av)===av?new ap(an.parse(av)):aw>=7?new ap(av,aA,at,az,ay,aB,au):aw>=6?new ap(av,aA,at,az,ay,aB):aw>=5?new ap(av,aA,at,az,ay):aw>=4?new ap(av,aA,at,az):aw>=3?new ap(av,aA,at):aw>=2?new ap(av,aA):aw>=1?new ap(av):new ap();ax.constructor=an;return ax}return ap.apply(this,arguments)};var aq=new RegExp("^"+"(\\d{4}|[+-]\\d{6})"+"(?:-(\\d{2})"+"(?:-(\\d{2})"+"(?:"+"T(\\d{2})"+":(\\d{2})"+"(?:"+":(\\d{2})"+"(?:\\.(\\d{3}))?"+")?"+"(?:"+"Z|"+"(?:"+"([-+])"+"(\\d{2})"+":(\\d{2})"+")"+")?)?)?)?"+"$");for(var ao in ap){an[ao]=ap[ao]}an.now=ap.now;an.UTC=ap.UTC;an.prototype=ap.prototype;an.prototype.constructor=an;an.parse=function ar(aw){var av=aq.exec(aw);if(av){av.shift();for(var ax=1;ax<7;ax++){av[ax]=+(av[ax]||(ax<3?1:0));if(ax==1){av[ax]--}}var au=+av.pop(),aA=+av.pop(),at=av.pop();var az=0;if(at){if(aA>23||au>59){return NaN}az=(aA*60+au)*60000*(at=="+"?-1:1)}var ay=+av[0];if(0<=ay&&ay<=99){av[0]=ay+400;return ap.UTC.apply(this,av)+az-12622780800000}return ap.UTC.apply(this,av)+az}return ap.parse.apply(this,arguments)};return an})(Date)}var ak="\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003"+"\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028"+"\u2029\uFEFF";if(!String.prototype.trim||ak.trim()){ak="["+ak+"]";var G=new RegExp("^"+ak+ak+"*"),z=new RegExp(ak+ak+"*$");String.prototype.trim=function a(){return String(this).replace(G,"").replace(z,"")}}var Y=function(an){an=+an;if(an!==an){an=0}else{if(an!==0&&an!==(1/0)&&an!==-(1/0)){an=(an>0||-1)*Math.floor(Math.abs(an))}}return an};var I="a"[0]!="a",M=function(an){if(an==null){throw new TypeError()}if(I&&typeof an=="string"&&an){return an.split("")}return Object(an)}});ace.define("ace/lib/dom",["require","exports","module"],function(c,a,d){var b="http://www.w3.org/1999/xhtml";a.createElement=function(f,g){return document.createElementNS?document.createElementNS(g||b,f):document.createElement(f)};a.setText=function(f,g){if(f.innerText!==undefined){f.innerText=g}if(f.textContent!==undefined){f.textContent=g}};a.hasCssClass=function(i,f){var g=i.className.split(/\s+/g);return g.indexOf(f)!==-1};a.addCssClass=function(g,f){if(!a.hasCssClass(g,f)){g.className+=" "+f}};a.removeCssClass=function(j,g){var i=j.className.split(/\s+/g);while(true){var f=i.indexOf(g);if(f==-1){break}i.splice(f,1)}j.className=i.join(" ")};a.toggleCssClass=function(j,g){var i=j.className.split(/\s+/g),k=true;while(true){var f=i.indexOf(g);if(f==-1){break}k=false;i.splice(f,1)}if(k){i.push(g)}j.className=i.join(" ");return k};a.setCssClass=function(i,g,f){if(f){a.addCssClass(i,g)}else{a.removeCssClass(i,g)}};a.hasCssString=function(j,i){var f=0,g;i=i||document;if(i.createStyleSheet&&(g=i.styleSheets)){while(f<g.length){if(g[f++].title===j){return true}}}else{if((g=i.getElementsByTagName("style"))){while(f<g.length){if(g[f++].id===j){return true}}}}return false};a.importCssString=function e(i,k,j){j=j||document;if(k&&a.hasCssString(k,j)){return null}var g;if(j.createStyleSheet){g=j.createStyleSheet();g.cssText=i;if(k){g.title=k}}else{g=j.createElementNS?j.createElementNS(b,"style"):j.createElement("style");g.appendChild(j.createTextNode(i));if(k){g.id=k}var f=j.getElementsByTagName("head")[0]||j.documentElement;f.appendChild(g)}};a.importCssStylsheet=function(i,j){if(j.createStyleSheet){j.createStyleSheet(i)}else{var g=a.createElement("link");g.rel="stylesheet";g.href=i;var f=j.getElementsByTagName("head")[0]||j.documentElement;f.appendChild(g)}};a.getInnerWidth=function(f){return(parseInt(a.computedStyle(f,"paddingLeft"),10)+parseInt(a.computedStyle(f,"paddingRight"),10)+f.clientWidth)};a.getInnerHeight=function(f){return(parseInt(a.computedStyle(f,"paddingTop"),10)+parseInt(a.computedStyle(f,"paddingBottom"),10)+f.clientHeight)};if(window.pageYOffset!==undefined){a.getPageScrollTop=function(){return window.pageYOffset};a.getPageScrollLeft=function(){return window.pageXOffset}}else{a.getPageScrollTop=function(){return document.body.scrollTop};a.getPageScrollLeft=function(){return document.body.scrollLeft}}if(window.getComputedStyle){a.computedStyle=function(f,g){if(g){return(window.getComputedStyle(f,"")||{})[g]||""}return window.getComputedStyle(f,"")||{}}}else{a.computedStyle=function(f,g){if(g){return f.currentStyle[g]}return f.currentStyle}}a.scrollbarWidth=function(g){var i=a.createElement("p");i.style.width="100%";i.style.minWidth="0px";i.style.height="200px";var k=a.createElement("div");var l=k.style;l.position="absolute";l.left="-10000px";l.overflow="hidden";l.width="200px";l.minWidth="0px";l.height="150px";k.appendChild(i);var f=g.body||g.documentElement;f.appendChild(k);var j=i.offsetWidth;l.overflow="scroll";var m=i.offsetWidth;if(j==m){m=k.clientWidth}f.removeChild(k);return j-m};a.setInnerHtml=function(i,f){var g=i.cloneNode(false);g.innerHTML=f;i.parentNode.replaceChild(g,i);return g};a.setInnerText=function(g,i){var f=g.ownerDocument;if(f.body&&"textContent" in f.body){g.textContent=i}else{g.innerText=i}};a.getInnerText=function(g){var f=g.ownerDocument;if(f.body&&"textContent" in f.body){return g.textContent}else{return g.innerText||g.textContent||""}};a.getParentWindow=function(f){return f.defaultView||f.parentWindow}});ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent","ace/lib/dom"],function(c,b,d){var e=c("./keys");var a=c("./useragent");var i=c("./dom");b.addListener=function(k,j,m){if(k.addEventListener){return k.addEventListener(j,m,false)}if(k.attachEvent){var l=function(){m(window.event)};m._wrapper=l;k.attachEvent("on"+j,l)}};b.removeListener=function(k,j,l){if(k.removeEventListener){return k.removeEventListener(j,l,false)}if(k.detachEvent){k.detachEvent("on"+j,l._wrapper||l)}};b.stopEvent=function(j){b.stopPropagation(j);b.preventDefault(j);return false};b.stopPropagation=function(j){if(j.stopPropagation){j.stopPropagation()}else{j.cancelBubble=true}};b.preventDefault=function(j){if(j.preventDefault){j.preventDefault()}else{j.returnValue=false}};b.getDocumentX=function(j){if(j.clientX){return j.clientX+i.getPageScrollLeft()}else{return j.pageX}};b.getDocumentY=function(j){if(j.clientY){return j.clientY+i.getPageScrollTop()}else{return j.pageY}};b.getButton=function(j){if(j.type=="dblclick"){return 0}else{if(j.type=="contextmenu"){return 2}}if(j.preventDefault){return j.button}else{return{1:0,2:2,4:1}[j.button]}};if(document.documentElement.setCapture){b.capture=function(m,l,k){function o(p){l(p);return b.stopPropagation(p)}var n=false;function j(p){l(p);if(!n){n=true;k(p)}b.removeListener(m,"mousemove",l);b.removeListener(m,"mouseup",j);b.removeListener(m,"losecapture",j);m.releaseCapture()}b.addListener(m,"mousemove",l);b.addListener(m,"mouseup",j);b.addListener(m,"losecapture",j);m.setCapture()}}else{b.capture=function(m,l,k){function n(o){l(o);o.stopPropagation()}function j(o){l&&l(o);k&&k(o);document.removeEventListener("mousemove",n,true);document.removeEventListener("mouseup",j,true);o.stopPropagation()}document.addEventListener("mousemove",n,true);document.addEventListener("mouseup",j,true)}}b.addMouseWheelListener=function(k,m){var j=0;var l=function(o){if(o.wheelDelta!==undefined){if(Math.abs(o.wheelDeltaY)>j){j=Math.abs(o.wheelDeltaY)}if(j>5000){var n=400}else{var n=8}if(o.wheelDeltaX!==undefined){o.wheelX=-o.wheelDeltaX/n;o.wheelY=-o.wheelDeltaY/n}else{o.wheelX=0;o.wheelY=-o.wheelDelta/n}}else{if(o.axis&&o.axis==o.HORIZONTAL_AXIS){o.wheelX=(o.detail||0)*5;o.wheelY=0}else{o.wheelX=0;o.wheelY=(o.detail||0)*5}}m(o)};b.addListener(k,"DOMMouseScroll",l);b.addListener(k,"mousewheel",l)};b.addMultiMouseDownListener=function(j,m,o,p,q){var r=0;var n,l;var k=function(t){r+=1;if(r==1){n=t.clientX;l=t.clientY;setTimeout(function(){r=0},p||600)}var s=b.getButton(t)==m;if(!s||Math.abs(t.clientX-n)>5||Math.abs(t.clientY-l)>5){r=0}if(r==o){r=0;q(t)}if(s){return b.preventDefault(t)}};b.addListener(j,"mousedown",k);a.isOldIE&&b.addListener(j,"dblclick",k)};function g(m,l,k){var j=0;if(a.isOpera&&a.isMac){j=0|(l.metaKey?1:0)|(l.altKey?2:0)|(l.shiftKey?4:0)|(l.ctrlKey?8:0)}else{j=0|(l.ctrlKey?1:0)|(l.altKey?2:0)|(l.shiftKey?4:0)|(l.metaKey?8:0)}if(k in e.MODIFIER_KEYS){switch(e.MODIFIER_KEYS[k]){case"Alt":j=2;break;case"Shift":j=4;break;case"Ctrl":j=1;break;default:j=8;break}k=0}if(j&8&&(k==91||k==93)){k=0}if(!j&&!(k in e.FUNCTION_KEYS)&&!(k in e.PRINTABLE_KEYS)){return false}return m(l,j,k)}b.addCommandKeyListener=function(k,n){var j=b.addListener;if(a.isOldGecko||a.isOpera){var m=null;j(k,"keydown",function(o){m=o.keyCode});j(k,"keypress",function(o){return g(n,o,m)})}else{var l=null;j(k,"keydown",function(o){l=o.keyIdentifier||o.keyCode;return g(n,o,o.keyCode)})}};if(window.postMessage){var f=1;b.nextTick=function(m,l){l=l||window;var j="zero-timeout-message-"+f;b.addListener(l,"message",function k(n){if(n.data==j){b.stopPropagation(n);b.removeListener(l,"message",k);m()}});l.postMessage(j,"*")}}else{b.nextTick=function(k,j){j=j||window;window.setTimeout(k,0)}}});
/* @license
==========================================================================
SproutCore -- JavaScript Application Framework
copyright 2006-2009, Sprout Systems Inc., Apple Inc. and contributors.

Permission is hereby granted, free of charge, to any person obtaining a
copy of this software and associated documentation files (the "Software"),
to deal in the Software without restriction, including without limitation
the rights to use, copy, modify, merge, publish, distribute, sublicense,
and/or sell copies of the Software, and to permit persons to whom the
Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
DEALINGS IN THE SOFTWARE.

SproutCore and the SproutCore logo are trademarks of Sprout Systems, Inc.

For more information about SproutCore, visit http://www.sproutcore.com


==========================================================================
@license */
ace.define("ace/lib/keys",["require","exports","module","ace/lib/oop"],function(c,a,d){var e=c("./oop");var b=(function(){var g={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta"},KEY_MODS:{"ctrl":1,"alt":2,"option":2,"shift":4,"meta":8,"command":8},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",188:",",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:'"'}};for(var j in g.FUNCTION_KEYS){var f=g.FUNCTION_KEYS[j].toUpperCase();g[f]=parseInt(j,10)}e.mixin(g,g.MODIFIER_KEYS);e.mixin(g,g.PRINTABLE_KEYS);e.mixin(g,g.FUNCTION_KEYS);return g})();e.mixin(a,b);a.keyCodeToString=function(f){return(b[f]||String.fromCharCode(f)).toLowerCase()}});ace.define("ace/lib/oop",["require","exports","module"],function(b,a,c){a.inherits=(function(){var d=function(){};return function(f,e){d.prototype=e.prototype;f.super_=e.prototype;f.prototype=new d();f.prototype.constructor=f}}());a.mixin=function(f,d){for(var e in d){f[e]=d[e]}};a.implement=function(e,d){a.mixin(e,d)}});ace.define("ace/lib/useragent",["require","exports","module"],function(b,a,d){var e=(navigator.platform.match(/mac|win|linux/i)||["other"])[0].toLowerCase();var c=navigator.userAgent;a.isWin=(e=="win");a.isMac=(e=="mac");a.isLinux=(e=="linux");a.isIE=navigator.appName=="Microsoft Internet Explorer"&&parseFloat(navigator.userAgent.match(/MSIE ([0-9]+[\.0-9]+)/)[1]);a.isOldIE=a.isIE&&a.isIE<9;a.isGecko=a.isMozilla=window.controllers&&window.navigator.product==="Gecko";a.isOldGecko=a.isGecko&&parseInt((navigator.userAgent.match(/rv\:(\d+)/)||[])[1],10)<4;a.isOpera=window.opera&&Object.prototype.toString.call(window.opera)=="[object Opera]";a.isWebKit=parseFloat(c.split("WebKit/")[1])||undefined;a.isChrome=parseFloat(c.split(" Chrome/")[1])||undefined;a.isAIR=c.indexOf("AdobeAIR")>=0;a.isIPad=c.indexOf("iPad")>=0;a.isTouchPad=c.indexOf("TouchPad")>=0;a.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"};a.getOS=function(){if(a.isMac){return a.OS.MAC}else{if(a.isLinux){return a.OS.LINUX}else{return a.OS.WINDOWS}}}});ace.define("ace/editor",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands"],function(g,k,c){g("./lib/fixoldbrowsers");var p=g("./lib/oop");var b=g("./lib/lang");var d=g("./lib/useragent");var m=g("./keyboard/textinput").TextInput;var j=g("./mouse/mouse_handler").MouseHandler;var o=g("./mouse/fold_handler").FoldHandler;var i=g("./keyboard/keybinding").KeyBinding;var a=g("./edit_session").EditSession;var f=g("./search").Search;var e=g("./range").Range;var r=g("./lib/event_emitter").EventEmitter;var q=g("./commands/command_manager").CommandManager;var l=g("./commands/default_commands").commands;var n=function(t,u){var s=t.getContainerElement();this.container=s;this.renderer=t;this.textInput=new m(t.getTextAreaContainer(),this);this.keyBinding=new i(this);if(d.isIPad){}else{this.$mouseHandler=new j(this);new o(this)}this.$blockScrolling=0;this.$search=new f().set({wrap:true});this.commands=new q(d.isMac?"mac":"win",l);this.setSession(u||new a(""))};(function(){p.implement(this,r);this.setKeyboardHandler=function(s){this.keyBinding.setKeyboardHandler(s)};this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()};this.setSession=function(u){if(this.session==u){return}if(this.session){var t=this.session;this.session.removeEventListener("change",this.$onDocumentChange);this.session.removeEventListener("changeMode",this.$onChangeMode);this.session.removeEventListener("tokenizerUpdate",this.$onTokenizerUpdate);this.session.removeEventListener("changeTabSize",this.$onChangeTabSize);this.session.removeEventListener("changeWrapLimit",this.$onChangeWrapLimit);this.session.removeEventListener("changeWrapMode",this.$onChangeWrapMode);this.session.removeEventListener("onChangeFold",this.$onChangeFold);this.session.removeEventListener("changeFrontMarker",this.$onChangeFrontMarker);this.session.removeEventListener("changeBackMarker",this.$onChangeBackMarker);this.session.removeEventListener("changeBreakpoint",this.$onChangeBreakpoint);this.session.removeEventListener("changeAnnotation",this.$onChangeAnnotation);this.session.removeEventListener("changeOverwrite",this.$onCursorChange);this.session.removeEventListener("changeScrollTop",this.$onScrollTopChange);this.session.removeEventListener("changeLeftTop",this.$onScrollLeftChange);var s=this.session.getSelection();s.removeEventListener("changeCursor",this.$onCursorChange);s.removeEventListener("changeSelection",this.$onSelectionChange)}this.session=u;this.$onDocumentChange=this.onDocumentChange.bind(this);u.addEventListener("change",this.$onDocumentChange);this.renderer.setSession(u);this.$onChangeMode=this.onChangeMode.bind(this);u.addEventListener("changeMode",this.$onChangeMode);this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this);u.addEventListener("tokenizerUpdate",this.$onTokenizerUpdate);this.$onChangeTabSize=this.renderer.updateText.bind(this.renderer);u.addEventListener("changeTabSize",this.$onChangeTabSize);this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this);u.addEventListener("changeWrapLimit",this.$onChangeWrapLimit);this.$onChangeWrapMode=this.onChangeWrapMode.bind(this);u.addEventListener("changeWrapMode",this.$onChangeWrapMode);this.$onChangeFold=this.onChangeFold.bind(this);u.addEventListener("changeFold",this.$onChangeFold);this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this);this.session.addEventListener("changeFrontMarker",this.$onChangeFrontMarker);this.$onChangeBackMarker=this.onChangeBackMarker.bind(this);this.session.addEventListener("changeBackMarker",this.$onChangeBackMarker);this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this);this.session.addEventListener("changeBreakpoint",this.$onChangeBreakpoint);this.$onChangeAnnotation=this.onChangeAnnotation.bind(this);this.session.addEventListener("changeAnnotation",this.$onChangeAnnotation);this.$onCursorChange=this.onCursorChange.bind(this);this.session.addEventListener("changeOverwrite",this.$onCursorChange);this.$onScrollTopChange=this.onScrollTopChange.bind(this);this.session.addEventListener("changeScrollTop",this.$onScrollTopChange);this.$onScrollLeftChange=this.onScrollLeftChange.bind(this);this.session.addEventListener("changeScrollLeft",this.$onScrollLeftChange);this.selection=u.getSelection();this.selection.addEventListener("changeCursor",this.$onCursorChange);this.$onSelectionChange=this.onSelectionChange.bind(this);this.selection.addEventListener("changeSelection",this.$onSelectionChange);this.onChangeMode();this.onCursorChange();this.onScrollTopChange();this.onScrollLeftChange();this.onSelectionChange();this.onChangeFrontMarker();this.onChangeBackMarker();this.onChangeBreakpoint();this.onChangeAnnotation();this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit();this.renderer.updateFull();this._emit("changeSession",{session:u,oldSession:t})};this.getSession=function(){return this.session};this.getSelection=function(){return this.selection};this.resize=function(){this.renderer.onResize()};this.setTheme=function(s){this.renderer.setTheme(s)};this.getTheme=function(){return this.renderer.getTheme()};this.setStyle=function(s){this.renderer.setStyle(s)};this.unsetStyle=function(s){this.renderer.unsetStyle(s)};this.setFontSize=function(s){this.container.style.fontSize=s;this.renderer.updateFontSize()};this.$highlightBrackets=function(){if(this.session.$bracketHighlight){this.session.removeMarker(this.session.$bracketHighlight);this.session.$bracketHighlight=null}if(this.$highlightPending){return}var s=this;this.$highlightPending=true;setTimeout(function(){s.$highlightPending=false;var u=s.session.findMatchingBracket(s.getCursorPosition());if(u){var t=new e(u.row,u.column,u.row,u.column+1);s.session.$bracketHighlight=s.session.addMarker(t,"ace_bracket","text")}},10)};this.focus=function(){var s=this;setTimeout(function(){s.textInput.focus()});this.textInput.focus()};this.isFocused=function(){return this.textInput.isFocused()};this.blur=function(){this.textInput.blur()};this.onFocus=function(){this.renderer.showCursor();this.renderer.visualizeFocus();this._emit("focus")};this.onBlur=function(){this.renderer.hideCursor();this.renderer.visualizeBlur();this._emit("blur")};this.onDocumentChange=function(u){var v=u.data;var s=v.range;var t;if(s.start.row==s.end.row&&v.action!="insertLines"&&v.action!="removeLines"){t=s.end.row}else{t=Infinity}this.renderer.updateLines(s.start.row,t);this._emit("change",u);this.onCursorChange()};this.onTokenizerUpdate=function(t){var s=t.data;this.renderer.updateLines(s.first,s.last)};this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())};this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())};this.onCursorChange=function(){this.renderer.updateCursor();if(!this.$blockScrolling){this.renderer.scrollCursorIntoView()}this.renderer.moveTextAreaToCursor(this.textInput.getElement());this.$highlightBrackets();this.$updateHighlightActiveLine()};this.$updateHighlightActiveLine=function(){var t=this.getSession();if(t.$highlightLineMarker){t.removeMarker(t.$highlightLineMarker)}t.$highlightLineMarker=null;if(this.getHighlightActiveLine()&&(this.getSelectionStyle()!="line"||!this.selection.isMultiLine())){var v=this.getCursorPosition(),u=this.session.getFoldLine(v.row);var s;if(u){s=new e(u.start.row,0,u.end.row+1,0)}else{s=new e(v.row,0,v.row+1,0)}t.$highlightLineMarker=t.addMarker(s,"ace_active_line","background")}};this.onSelectionChange=function(v){var u=this.getSession();if(u.$selectionMarker){u.removeMarker(u.$selectionMarker)}u.$selectionMarker=null;if(!this.selection.isEmpty()){var s=this.selection.getRange();var t=this.getSelectionStyle();u.$selectionMarker=u.addMarker(s,"ace_selection",t)}else{this.$updateHighlightActiveLine()}if(this.$highlightSelectedWord){this.session.getMode().highlightSelection(this)}};this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()};this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()};this.onChangeBreakpoint=function(){this.renderer.setBreakpoints(this.session.getBreakpoints())};this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())};this.onChangeMode=function(){this.renderer.updateText()};this.onChangeWrapLimit=function(){this.renderer.updateFull()};this.onChangeWrapMode=function(){this.renderer.onResize(true)};this.onChangeFold=function(){this.$updateHighlightActiveLine();this.renderer.updateFull()};this.getCopyText=function(){var s="";if(!this.selection.isEmpty()){s=this.session.getTextRange(this.getSelectionRange())}this._emit("copy",s);return s};this.onCut=function(){if(this.$readOnly){return}var s=this.getSelectionRange();this._emit("cut",s);if(!this.selection.isEmpty()){this.session.remove(s);this.clearSelection()}};this.insert=function(D){var t=this.session;var E=t.getMode();var w=this.getCursorPosition();if(this.getBehavioursEnabled()){var B=E.transformAction(t.getState(w.row),"insertion",this,t,D);if(B){D=B.text}}D=D.replace("\t",this.session.getTabString());if(!this.selection.isEmpty()){w=this.session.remove(this.getSelectionRange());this.clearSelection()}else{if(this.session.getOverwrite()){var F=new e.fromPoints(w,w);F.end.column+=D.length;this.session.remove(F)}}this.clearSelection();var x=w.column;var H=t.getState(w.row);var J=E.checkOutdent(H,t.getLine(w.row),D);var z=t.getLine(w.row);var s=E.getNextLineIndent(H,z.slice(0,w.column),t.getTabString());var u=t.insert(w,D);if(B&&B.selection){if(B.selection.length==2){this.selection.setSelectionRange(new e(w.row,x+B.selection[0],w.row,x+B.selection[1]))}else{this.selection.setSelectionRange(new e(w.row+B.selection[0],B.selection[1],w.row+B.selection[2],B.selection[3]))}}var H=t.getState(w.row);if(t.getDocument().isNewLine(D)){this.moveCursorTo(w.row+1,0);var G=t.getTabSize();var v=Number.MAX_VALUE;for(var y=w.row+1;y<=u.row;++y){var A=0;z=t.getLine(y);for(var I=0;I<z.length;++I){if(z.charAt(I)=="\t"){A+=G}else{if(z.charAt(I)==" "){A+=1}else{break}}}if(/[^\s]/.test(z)){v=Math.min(A,v)}}for(var y=w.row+1;y<=u.row;++y){var C=v;z=t.getLine(y);for(var I=0;I<z.length&&C>0;++I){if(z.charAt(I)=="\t"){C-=G}else{if(z.charAt(I)==" "){C-=1}}}t.remove(new e(y,0,y,I))}t.indentRows(w.row+1,u.row,s)}if(J){E.autoOutdent(H,t,w.row)}};this.onTextInput=function(t,s){if(s){this._emit("paste",t)}this.keyBinding.onTextInput(t,s)};this.onCommandKey=function(u,s,t){this.keyBinding.onCommandKey(u,s,t)};this.setOverwrite=function(s){this.session.setOverwrite(s)};this.getOverwrite=function(){return this.session.getOverwrite()};this.toggleOverwrite=function(){this.session.toggleOverwrite()};this.setScrollSpeed=function(s){this.$mouseHandler.setScrollSpeed(s)};this.getScrollSpeed=function(){return this.$mouseHandler.getScrollSpeed()};this.setDragDelay=function(s){this.$mouseHandler.setDragDelay(s)};this.getDragDelay=function(){return this.$mouseHandler.getDragDelay()};this.$selectionStyle="line";this.setSelectionStyle=function(s){if(this.$selectionStyle==s){return}this.$selectionStyle=s;this.onSelectionChange();this._emit("changeSelectionStyle",{data:s})};this.getSelectionStyle=function(){return this.$selectionStyle};this.$highlightActiveLine=true;this.setHighlightActiveLine=function(s){if(this.$highlightActiveLine==s){return}this.$highlightActiveLine=s;this.$updateHighlightActiveLine()};this.getHighlightActiveLine=function(){return this.$highlightActiveLine};this.$highlightSelectedWord=true;this.setHighlightSelectedWord=function(s){if(this.$highlightSelectedWord==s){return}this.$highlightSelectedWord=s;if(s){this.session.getMode().highlightSelection(this)}else{this.session.getMode().clearSelectionHighlight(this)}};this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord};this.setShowInvisibles=function(s){if(this.getShowInvisibles()==s){return}this.renderer.setShowInvisibles(s)};this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()};this.setShowPrintMargin=function(s){this.renderer.setShowPrintMargin(s)};this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()};this.setPrintMarginColumn=function(s){this.renderer.setPrintMarginColumn(s)};this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()};this.$readOnly=false;this.setReadOnly=function(s){this.$readOnly=s};this.getReadOnly=function(){return this.$readOnly};this.$modeBehaviours=true;this.setBehavioursEnabled=function(s){this.$modeBehaviours=s};this.getBehavioursEnabled=function(){return this.$modeBehaviours};this.setShowFoldWidgets=function(s){var t=this.renderer.$gutterLayer;if(t.getShowFoldWidgets()==s){return}this.renderer.$gutterLayer.setShowFoldWidgets(s);this.$showFoldWidgets=s;this.renderer.updateFull()};this.getShowFoldWidgets=function(){return this.renderer.$gutterLayer.getShowFoldWidgets()};this.remove=function(t){if(this.selection.isEmpty()){if(t=="left"){this.selection.selectLeft()}else{this.selection.selectRight()}}var s=this.getSelectionRange();if(this.getBehavioursEnabled()){var v=this.session;var u=v.getState(s.start.row);var w=v.getMode().transformAction(u,"deletion",this,v,s);if(w){s=w}}this.session.remove(s);this.clearSelection()};this.removeWordRight=function(){if(this.selection.isEmpty()){this.selection.selectWordRight()}this.session.remove(this.getSelectionRange());this.clearSelection()};this.removeWordLeft=function(){if(this.selection.isEmpty()){this.selection.selectWordLeft()}this.session.remove(this.getSelectionRange());this.clearSelection()};this.removeToLineStart=function(){if(this.selection.isEmpty()){this.selection.selectLineStart()}this.session.remove(this.getSelectionRange());this.clearSelection()};this.removeToLineEnd=function(){if(this.selection.isEmpty()){this.selection.selectLineEnd()}var s=this.getSelectionRange();if(s.start.column==s.end.column&&s.start.row==s.end.row){s.end.column=0;s.end.row++}this.session.remove(s);this.clearSelection()};this.splitLine=function(){if(!this.selection.isEmpty()){this.session.remove(this.getSelectionRange());this.clearSelection()}var s=this.getCursorPosition();this.insert("\n");this.moveCursorToPosition(s)};this.transposeLetters=function(){if(!this.selection.isEmpty()){return}var w=this.getCursorPosition();var u=w.column;if(u===0){return}var s=this.session.getLine(w.row);var v,t;if(u<s.length){v=s.charAt(u)+s.charAt(u-1);t=new e(w.row,u-1,w.row,u+1)}else{v=s.charAt(u-1)+s.charAt(u-2);t=new e(w.row,u-2,w.row,u)}this.session.replace(t,v)};this.toLowerCase=function(){var t=this.getSelectionRange();if(this.selection.isEmpty()){this.selection.selectWord()}var s=this.getSelectionRange();var u=this.session.getTextRange(s);this.session.replace(s,u.toLowerCase());this.selection.setSelectionRange(t)};this.toUpperCase=function(){var t=this.getSelectionRange();if(this.selection.isEmpty()){this.selection.selectWord()}var s=this.getSelectionRange();var u=this.session.getTextRange(s);this.session.replace(s,u.toUpperCase());this.selection.setSelectionRange(t)};this.indent=function(){var y=this.session;var t=this.getSelectionRange();if(t.start.row<t.end.row||t.start.column<t.end.column){var x=this.$getSelectedRows();y.indentRows(x.first,x.last,"\t")}else{var z;if(this.session.getUseSoftTabs()){var u=y.getTabSize(),s=this.getCursorPosition(),v=y.documentToScreenColumn(s.row,s.column),w=(u-v%u);z=b.stringRepeat(" ",w)}else{z="\t"}return this.insert(z)}};this.blockOutdent=function(){var s=this.session.getSelection();this.session.outdentRows(s.getRange())};this.toggleCommentLines=function(){var t=this.session.getState(this.getCursorPosition().row);var s=this.$getSelectedRows();this.session.getMode().toggleCommentLines(t,this.session,s.first,s.last)};this.removeLines=function(){var t=this.$getSelectedRows();var s;if(t.first===0||t.last+1<this.session.getLength()){s=new e(t.first,0,t.last+1,0)}else{s=new e(t.first-1,this.session.getLine(t.first-1).length,t.last,this.session.getLine(t.last).length)}this.session.remove(s);this.clearSelection()};this.moveLinesDown=function(){this.$moveLines(function(t,s){return this.session.moveLinesDown(t,s)})};this.moveLinesUp=function(){this.$moveLines(function(t,s){return this.session.moveLinesUp(t,s)})};this.moveText=function(s,t){if(this.$readOnly){return null}return this.session.moveText(s,t)};this.copyLinesUp=function(){this.$moveLines(function(t,s){this.session.duplicateLines(t,s);return 0})};this.copyLinesDown=function(){this.$moveLines(function(t,s){return this.session.duplicateLines(t,s)})};this.$moveLines=function(t){var x=this.$getSelectedRows();var w=this.selection;if(!w.isMultiLine()){var s=w.getRange();var u=w.isBackwards()}var v=t.call(this,x.first,x.last);if(s){s.start.row+=v;s.end.row+=v;w.setSelectionRange(s,u)}else{w.setSelectionAnchor(x.last+v+1,0);w.$moveSelection(function(){w.moveCursorTo(x.first+v,0)})}};this.$getSelectedRows=function(){var s=this.getSelectionRange().collapseRows();return{first:s.start.row,last:s.end.row}};this.onCompositionStart=function(s){this.renderer.showComposition(this.getCursorPosition())};this.onCompositionUpdate=function(s){this.renderer.setCompositionText(s)};this.onCompositionEnd=function(){this.renderer.hideComposition()};this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()};this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()};this.isRowVisible=function(s){return(s>=this.getFirstVisibleRow()&&s<=this.getLastVisibleRow())};this.isRowFullyVisible=function(s){return(s>=this.renderer.getFirstFullyVisibleRow()&&s<=this.renderer.getLastFullyVisibleRow())};this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1};this.$getPageDownRow=function(){return this.renderer.getScrollBottomRow()};this.$getPageUpRow=function(){var t=this.renderer.getScrollTopRow();var s=this.renderer.getScrollBottomRow();return t-(s-t)};this.selectPageDown=function(){var u=this.$getPageDownRow()+Math.floor(this.$getVisibleRowCount()/2);this.scrollPageDown();var t=this.getSelection();var v=this.session.documentToScreenPosition(t.getSelectionLead());var s=this.session.screenToDocumentPosition(u,v.column);t.selectTo(s.row,s.column)};this.selectPageUp=function(){var v=this.renderer.getScrollTopRow()-this.renderer.getScrollBottomRow();var u=this.$getPageUpRow()+Math.round(v/2);this.scrollPageUp();var t=this.getSelection();var w=this.session.documentToScreenPosition(t.getSelectionLead());var s=this.session.screenToDocumentPosition(u,w.column);t.selectTo(s.row,s.column)};this.gotoPageDown=function(){var t=this.$getPageDownRow();var s=this.getCursorPositionScreen().column;this.scrollToRow(t);this.getSelection().moveCursorToScreen(t,s)};this.gotoPageUp=function(){var t=this.$getPageUpRow();var s=this.getCursorPositionScreen().column;this.scrollToRow(t);this.getSelection().moveCursorToScreen(t,s)};this.scrollPageDown=function(){this.scrollToRow(this.$getPageDownRow())};this.scrollPageUp=function(){this.renderer.scrollToRow(this.$getPageUpRow())};this.scrollToRow=function(s){this.renderer.scrollToRow(s)};this.scrollToLine=function(t,s){this.renderer.scrollToLine(t,s)};this.centerSelection=function(){var t=this.getSelectionRange();var s=Math.floor(t.start.row+(t.end.row-t.start.row)/2);this.renderer.scrollToLine(s,true)};this.getCursorPosition=function(){return this.selection.getCursor()};this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())};this.getSelectionRange=function(){return this.selection.getRange()};this.selectAll=function(){this.$blockScrolling+=1;this.selection.selectAll();this.$blockScrolling-=1};this.clearSelection=function(){this.selection.clearSelection()};this.moveCursorTo=function(t,s){this.selection.moveCursorTo(t,s)};this.moveCursorToPosition=function(s){this.selection.moveCursorToPosition(s)};this.jumpToMatching=function(){var s=this.getCursorPosition();var t=this.session.findMatchingBracket(s);if(!t){s.column+=1;t=this.session.findMatchingBracket(s)}if(!t){s.column-=2;t=this.session.findMatchingBracket(s)}if(t){this.clearSelection();this.moveCursorTo(t.row,t.column)}};this.gotoLine=function(s,t){this.selection.clearSelection();this.session.unfold({row:s-1,column:t||0});this.$blockScrolling+=1;this.moveCursorTo(s-1,t||0);this.$blockScrolling-=1;if(!this.isRowFullyVisible(this.getCursorPosition().row)){this.scrollToLine(s,true)}};this.navigateTo=function(t,s){this.clearSelection();this.moveCursorTo(t,s)};this.navigateUp=function(s){this.selection.clearSelection();s=s||1;this.selection.moveCursorBy(-s,0)};this.navigateDown=function(s){this.selection.clearSelection();s=s||1;this.selection.moveCursorBy(s,0)};this.navigateLeft=function(t){if(!this.selection.isEmpty()){var s=this.getSelectionRange().start;this.moveCursorToPosition(s)}else{t=t||1;while(t--){this.selection.moveCursorLeft()}}this.clearSelection()};this.navigateRight=function(t){if(!this.selection.isEmpty()){var s=this.getSelectionRange().end;this.moveCursorToPosition(s)}else{t=t||1;while(t--){this.selection.moveCursorRight()}}this.clearSelection()};this.navigateLineStart=function(){this.selection.moveCursorLineStart();this.clearSelection()};this.navigateLineEnd=function(){this.selection.moveCursorLineEnd();this.clearSelection()};this.navigateFileEnd=function(){this.selection.moveCursorFileEnd();this.clearSelection()};this.navigateFileStart=function(){this.selection.moveCursorFileStart();this.clearSelection()};this.navigateWordRight=function(){this.selection.moveCursorWordRight();this.clearSelection()};this.navigateWordLeft=function(){this.selection.moveCursorWordLeft();this.clearSelection()};this.replace=function(u,t){if(t){this.$search.set(t)}var s=this.$search.find(this.session);if(!s){return}this.$tryReplace(s,u);if(s!==null){this.selection.setSelectionRange(s)}};this.replaceAll=function(w,t){if(t){this.$search.set(t)}var s=this.$search.findAll(this.session);if(!s.length){return}var v=this.getSelectionRange();this.clearSelection();this.selection.moveCursorTo(0,0);this.$blockScrolling+=1;for(var u=s.length-1;u>=0;--u){this.$tryReplace(s[u],w)}this.selection.setSelectionRange(v);this.$blockScrolling-=1};this.$tryReplace=function(t,u){var s=this.session.getTextRange(t);u=this.$search.replace(s,u);if(u!==null){t.end=this.session.replace(t,u);return t}else{return null}};this.getLastSearchOptions=function(){return this.$search.getOptions()};this.find=function(t,s){this.clearSelection();s=s||{};s.needle=t;this.$search.set(s);this.$find()};this.findNext=function(s){s=s||{};if(typeof s.backwards=="undefined"){s.backwards=false}this.$search.set(s);this.$find()};this.findPrevious=function(s){s=s||{};if(typeof s.backwards=="undefined"){s.backwards=true}this.$search.set(s);this.$find()};this.$find=function(s){if(!this.selection.isEmpty()){this.$search.set({needle:this.session.getTextRange(this.getSelectionRange())})}if(typeof s!="undefined"){this.$search.set({backwards:s})}var t=this.$search.find(this.session);if(t){this.session.unfold(t);this.selection.setSelectionRange(t)}};this.undo=function(){this.session.getUndoManager().undo()};this.redo=function(){this.session.getUndoManager().redo()};this.destroy=function(){this.renderer.destroy()}}).call(n.prototype);k.Editor=n});ace.define("ace/lib/lang",["require","exports","module"],function(b,a,c){a.stringReverse=function(f){return f.split("").reverse().join("")};a.stringRepeat=function(f,g){return new Array(g+1).join(f)};var d=/^\s\s*/;var e=/\s\s*$/;a.stringTrimLeft=function(f){return f.replace(d,"")};a.stringTrimRight=function(f){return f.replace(e,"")};a.copyObject=function(g){var i={};for(var f in g){i[f]=g[f]}return i};a.copyArray=function(k){var j=[];for(var g=0,f=k.length;g<f;g++){if(k[g]&&typeof k[g]=="object"){j[g]=this.copyObject(k[g])}else{j[g]=k[g]}}return j};a.deepCopy=function(g){if(typeof g!="object"){return g}var i=g.constructor();for(var f in g){if(typeof g[f]=="object"){i[f]=this.deepCopy(g[f])}else{i[f]=g[f]}}return i};a.arrayToMap=function(f){var j={};for(var g=0;g<f.length;g++){j[f[g]]=1}return j};a.arrayRemove=function(j,g){for(var f=0;f<=j.length;f++){if(g===j[f]){j.splice(f,1)}}};a.escapeRegExp=function(f){return f.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")};a.deferredCall=function(g){var j=null;var i=function(){j=null;g()};var f=function(k){f.cancel();j=setTimeout(i,k||0);return f};f.schedule=f;f.call=function(){this.cancel();g();return f};f.cancel=function(){clearTimeout(j);j=null;return f};return f}});ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom"],function(c,b,d){var f=c("../lib/event");var a=c("../lib/useragent");var g=c("../lib/dom");var e=function(n,t){var q=g.createElement("textarea");if(a.isTouchPad){q.setAttribute("x-palm-disable-auto-cap",true)}q.style.left="-10000px";q.style.position="fixed";n.insertBefore(q,n.firstChild);var i=String.fromCharCode(0);y();var r=false;var u=false;var j=false;var A="";function w(){try{q.select()}catch(B){}}function y(C){if(!u){var B=C||q.value;if(B){if(B.charCodeAt(B.length-1)==i.charCodeAt(0)){B=B.slice(0,-1);if(B){t.onTextInput(B,j)}}else{t.onTextInput(B,j)}if(!o()){return false}}}u=false;j=false;q.value=i;w()}var m=function(B){setTimeout(function(){if(!r){y(B.data)}},0)};var z=function(B){if(a.isOldIE&&q.value.charCodeAt(0)>128){return}setTimeout(function(){if(!r){y()}},0)};var s=function(B){r=true;t.onCompositionStart();if(!a.isGecko){setTimeout(x,0)}};var x=function(){if(!r){return}t.onCompositionUpdate(q.value)};var k=function(B){r=false;t.onCompositionEnd()};var p=function(C){u=true;var B=t.getCopyText();if(B){q.value=B}else{C.preventDefault()}w();setTimeout(function(){y()},0)};var l=function(C){u=true;var B=t.getCopyText();if(B){q.value=B;t.onCut()}else{C.preventDefault()}w();setTimeout(function(){y()},0)};f.addCommandKeyListener(q,t.onCommandKey.bind(t));if(a.isOldIE){var v={13:1,27:1};f.addListener(q,"keyup",function(B){if(r&&(!q.value||v[B.keyCode])){setTimeout(k,0)}if((q.value.charCodeAt(0)|0)<129){return}r?x():s()})}if("onpropertychange" in q&&!("oninput" in q)){f.addListener(q,"propertychange",z)}else{f.addListener(q,"input",m)}f.addListener(q,"paste",function(B){j=true;if(B.clipboardData&&B.clipboardData.getData){y(B.clipboardData.getData("text/plain"));B.preventDefault()}else{z()}});if("onbeforecopy" in q&&typeof clipboardData!=="undefined"){f.addListener(q,"beforecopy",function(C){var B=t.getCopyText();if(B){clipboardData.setData("Text",B)}else{C.preventDefault()}});f.addListener(n,"keydown",function(C){if(C.ctrlKey&&C.keyCode==88){var B=t.getCopyText();if(B){clipboardData.setData("Text",B);t.onCut()}f.preventDefault(C)}})}else{f.addListener(q,"copy",p);f.addListener(q,"cut",l)}f.addListener(q,"compositionstart",s);if(a.isGecko){f.addListener(q,"text",x)}if(a.isWebKit){f.addListener(q,"keyup",x)}f.addListener(q,"compositionend",k);f.addListener(q,"blur",function(){t.onBlur()});f.addListener(q,"focus",function(){t.onFocus();w()});this.focus=function(){t.onFocus();w();q.focus()};this.blur=function(){q.blur()};function o(){return document.activeElement===q}this.isFocused=o;this.getElement=function(){return q};this.onContextMenu=function(B,C){if(B){if(!A){A=q.style.cssText}q.style.cssText="position:fixed; z-index:1000;"+"left:"+(B.x-2)+"px; top:"+(B.y-2)+"px;"}if(C){q.value=""}};this.onContextMenuClose=function(){setTimeout(function(){if(A){q.style.cssText=A;A=""}y()},0)}};b.TextInput=e});ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event"],function(b,a,c){var g=b("../lib/event");var f=b("./default_handlers").DefaultHandlers;var e=b("./default_gutter_handler").GutterHandler;var d=b("./mouse_event").MouseEvent;var i=function(k){this.editor=k;new f(k);new e(k);g.addListener(k.container,"mousedown",function(m){k.focus();return g.preventDefault(m)});g.addListener(k.container,"selectstart",function(m){return g.preventDefault(m)});var l=k.renderer.getMouseEventTarget();g.addListener(l,"mousedown",this.onMouseEvent.bind(this,"mousedown"));g.addListener(l,"click",this.onMouseEvent.bind(this,"click"));g.addListener(l,"mousemove",this.onMouseMove.bind(this,"mousemove"));g.addMultiMouseDownListener(l,0,2,500,this.onMouseEvent.bind(this,"dblclick"));g.addMultiMouseDownListener(l,0,3,600,this.onMouseEvent.bind(this,"tripleclick"));g.addMultiMouseDownListener(l,0,4,600,this.onMouseEvent.bind(this,"quadclick"));g.addMouseWheelListener(k.container,this.onMouseWheel.bind(this,"mousewheel"));var j=k.renderer.$gutter;g.addListener(j,"mousedown",this.onMouseEvent.bind(this,"guttermousedown"));g.addListener(j,"click",this.onMouseEvent.bind(this,"gutterclick"));g.addListener(j,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick"));g.addListener(j,"mousemove",this.onMouseMove.bind(this,"gutter"))};(function(){this.$scrollSpeed=1;this.setScrollSpeed=function(j){this.$scrollSpeed=j};this.getScrollSpeed=function(){return this.$scrollSpeed};this.onMouseEvent=function(j,k){this.editor._emit(j,new d(k,this.editor))};this.$dragDelay=250;this.setDragDelay=function(j){this.$dragDelay=j};this.getDragDelay=function(){return this.$dragDelay};this.onMouseMove=function(j,l){var k=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;if(!k||!k.length){return}this.editor._emit(j,new d(l,this.editor))};this.onMouseWheel=function(j,k){var l=new d(k,this.editor);l.speed=this.$scrollSpeed*2;l.wheelX=k.wheelX;l.wheelY=k.wheelY;this.editor._emit(j,l)}}).call(i.prototype);a.MouseHandler=i});ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/event","ace/lib/dom","ace/lib/browser_focus"],function(d,g,c){var a=d("../lib/event");var f=d("../lib/dom");var i=d("../lib/browser_focus").BrowserFocus;var m=0;var e=1;var j=2;var l=5;function k(n){this.editor=n;this.$clickSelection=null;this.browserFocus=new i();n.setDefaultHandler("mousedown",this.onMouseDown.bind(this));n.setDefaultHandler("dblclick",this.onDoubleClick.bind(this));n.setDefaultHandler("tripleclick",this.onTripleClick.bind(this));n.setDefaultHandler("quadclick",this.onQuadClick.bind(this));n.setDefaultHandler("mousewheel",this.onScroll.bind(this))}(function(){this.onMouseDown=function(K){var I=K.inSelection();var p=K.pageX;var n=K.pageY;var z=K.getDocumentPosition();var w=this.editor;var v=this;var L=w.getSelectionRange();var B=L.isEmpty();var y=m;if(I&&(!this.browserFocus.isFocused()||new Date().getTime()-this.browserFocus.lastFocus<20||!w.isFocused())){w.focus();return}var o=K.getButton();if(o!==0){if(B){w.moveCursorToPosition(z)}if(o==2){w.textInput.onContextMenu({x:K.clientX,y:K.clientY},B);a.capture(w.container,function(){},w.textInput.onContextMenuClose)}return}if(!I){A(z)}var s=p,r=n;var G=(new Date()).getTime();var t,u,H;var x=function(M){s=a.getDocumentX(M);r=a.getDocumentY(M)};var q=function(M){clearInterval(C);if(y==m){A(z)}else{if(y==j){D(M)}}v.$clickSelection=null;y=m};var D=function(P){f.removeCssClass(w.container,"ace_dragging");w.session.removeMarker(H);if(!w.$mouseHandler.$clickSelection){if(!t){w.moveCursorToPosition(z);w.selection.clearSelection(z.row,z.column)}}if(!t){return}if(u.contains(t.row,t.column)){t=null;return}w.clearSelection();if(P&&(P.ctrlKey||P.altKey)){var O=w.session;var M=O.insert(t,O.getTextRange(u))}else{var M=w.moveText(u,t)}if(!M){t=null;return}w.selection.setSelectionRange(M)};var J=function(){if(y==m){var Q=b(p,n,s,r);var O=(new Date()).getTime();if(Q>l){y=e;var P=w.renderer.screenToTextCoordinates(s,r);P.row=Math.max(0,Math.min(P.row,w.session.getLength()-1));A(P)}else{if((O-G)>w.getDragDelay()){y=j;u=w.getSelectionRange();var M=w.getSelectionStyle();H=w.session.addMarker(u,"ace_selection",M);w.clearSelection();f.addCssClass(w.container,"ace_dragging")}}}if(y==j){F()}else{if(y==e){E()}}};function A(M){if(K.getShiftKey()){w.selection.selectToPosition(M)}else{if(!v.$clickSelection){w.moveCursorToPosition(M);w.selection.clearSelection(M.row,M.column)}}y=e}var E=function(){var M;var O=w.renderer.screenToTextCoordinates(s,r);O.row=Math.max(0,Math.min(O.row,w.session.getLength()-1));if(v.$clickSelection){if(v.$clickSelection.contains(O.row,O.column)){w.selection.setSelectionRange(v.$clickSelection)}else{if(v.$clickSelection.compare(O.row,O.column)==-1){M=v.$clickSelection.end}else{M=v.$clickSelection.start}w.selection.setSelectionAnchor(M.row,M.column);w.selection.selectToPosition(O)}}else{w.selection.selectToPosition(O)}w.renderer.scrollCursorIntoView()};var F=function(){t=w.renderer.screenToTextCoordinates(s,r);t.row=Math.max(0,Math.min(t.row,w.session.getLength()-1));w.moveCursorToPosition(t)};a.capture(w.container,x,q);var C=setInterval(J,20);return K.preventDefault()};this.onDoubleClick=function(o){var p=o.getDocumentPosition();var n=this.editor;n.moveCursorToPosition(p);n.selection.selectWord();this.$clickSelection=n.getSelectionRange()};this.onTripleClick=function(o){var p=o.getDocumentPosition();var n=this.editor;n.moveCursorToPosition(p);n.selection.selectLine();this.$clickSelection=n.getSelectionRange()};this.onQuadClick=function(o){var n=this.editor;n.selectAll();this.$clickSelection=n.getSelectionRange()};this.onScroll=function(o){var n=this.editor;n.renderer.scrollBy(o.wheelX*o.speed,o.wheelY*o.speed);if(n.renderer.isScrollableBy(o.wheelX*o.speed,o.wheelY*o.speed)){return o.preventDefault()}}}).call(k.prototype);g.DefaultHandlers=k;function b(o,n,q,p){return Math.sqrt(Math.pow(q-o,2)+Math.pow(p-n,2))}});ace.define("ace/lib/browser_focus",["require","exports","module","ace/lib/oop","ace/lib/event","ace/lib/event_emitter"],function(b,a,c){var g=b("./oop");var f=b("./event");var e=b("./event_emitter").EventEmitter;var d=function(j){j=j||window;this.lastFocus=new Date().getTime();this._isFocused=true;var i=this;if("onfocusin" in j.document){f.addListener(j.document,"focusin",function(k){i._setFocused(true)});f.addListener(j.document,"focusout",function(k){i._setFocused(!!k.toElement)})}else{f.addListener(j,"blur",function(k){i._setFocused(false)});f.addListener(j,"focus",function(k){i._setFocused(true)})}};(function(){g.implement(this,e);this.isFocused=function(){return this._isFocused};this._setFocused=function(i){if(this._isFocused==i){return}if(i){this.lastFocus=new Date().getTime()}this._isFocused=i;this._emit("changeFocus")}}).call(d.prototype);a.BrowserFocus=d});ace.define("ace/lib/event_emitter",["require","exports","module"],function(b,a,c){var d={};d._emit=d._dispatchEvent=function(f,l){this._eventRegistry=this._eventRegistry||{};this._defaultHandlers=this._defaultHandlers||{};var k=this._eventRegistry[f]||[];var g=this._defaultHandlers[f];if(!k.length&&!g){return}l=l||{};l.type=f;if(!l.stopPropagation){l.stopPropagation=function(){this.propagationStopped=true}}if(!l.preventDefault){l.preventDefault=function(){this.defaultPrevented=true}}for(var j=0;j<k.length;j++){k[j](l);if(l.propagationStopped){break}}if(g&&!l.defaultPrevented){g(l)}};d.setDefaultHandler=function(e,f){this._defaultHandlers=this._defaultHandlers||{};if(this._defaultHandlers[e]){throw new Error("The default handler for '"+e+"' is already set")}this._defaultHandlers[e]=f};d.on=d.addEventListener=function(e,g){this._eventRegistry=this._eventRegistry||{};var f=this._eventRegistry[e];if(!f){var f=this._eventRegistry[e]=[]}if(f.indexOf(g)==-1){f.push(g)}};d.removeListener=d.removeEventListener=function(e,i){this._eventRegistry=this._eventRegistry||{};var g=this._eventRegistry[e];if(!g){return}var f=g.indexOf(i);if(f!==-1){g.splice(f,1)}};d.removeAllListeners=function(e){if(this._eventRegistry){this._eventRegistry[e]=[]}};a.EventEmitter=d});ace.define("ace/mouse/default_gutter_handler",["require","exports","module"],function(c,b,d){function a(e){e.setDefaultHandler("gutterclick",function(g){var i=g.getDocumentPosition().row;var f=e.session.selection;f.moveCursorTo(i,0);f.selectLine()})}b.GutterHandler=a});ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event"],function(b,a,c){var e=b("../lib/event");var d=a.MouseEvent=function(g,f){this.domEvent=g;this.editor=f;this.pageX=e.getDocumentX(g);this.pageY=e.getDocumentY(g);this.clientX=g.clientX;this.clientY=g.clientY;this.$pos=null;this.$inSelection=null;this.propagationStopped=false;this.defaultPrevented=false};(function(){this.stopPropagation=function(){e.stopPropagation(this.domEvent);this.propagationStopped=true};this.preventDefault=function(){e.preventDefault(this.domEvent);this.defaultPrevented=true};this.stop=function(){this.stopPropagation();this.preventDefault()};this.getDocumentPosition=function(){if(this.$pos){return this.$pos}var g=e.getDocumentX(this.domEvent);var f=e.getDocumentY(this.domEvent);this.$pos=this.editor.renderer.screenToTextCoordinates(g,f);this.$pos.row=Math.max(0,Math.min(this.$pos.row,this.editor.session.getLength()-1));return this.$pos};this.inSelection=function(){if(this.$inSelection!==null){return this.$inSelection}var f=this.editor;if(f.getReadOnly()){this.$inSelection=false}else{var i=f.getSelectionRange();if(i.isEmpty()){this.$inSelection=false}else{var g=this.getDocumentPosition();this.$inSelection=i.contains(g.row,g.column)}}return this.$inSelection};this.getButton=function(){return e.getButton(this.domEvent)};this.getShiftKey=function(){return this.domEvent.shiftKey};this.getAccelKey=function(){return this.domEvent.ctrlKey||this.domEvent.metaKey}}).call(d.prototype)});ace.define("ace/mouse/fold_handler",["require","exports","module"],function(b,a,c){function d(e){e.on("click",function(j){var f=j.getDocumentPosition();var i=e.session;var g=i.getFoldAt(f.row,f.column,1);if(g){if(j.getAccelKey()){i.removeFold(g)}else{i.expandFold(g)}j.stop()}});e.on("gutterclick",function(f){if(f.domEvent.target.className.indexOf("ace_fold-widget")!=-1){var g=f.getDocumentPosition().row;e.session.onFoldWidgetClick(g,f.domEvent);f.stop()}})}a.FoldHandler=d});ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event","ace/commands/default_commands"],function(c,a,d){var b=c("../lib/keys");var e=c("../lib/event");c("../commands/default_commands");var f=function(g){this.$editor=g;this.$data={};this.$handlers=[this]};(function(){this.setKeyboardHandler=function(g){if(this.$handlers[this.$handlers.length-1]==g){return}this.$data={};this.$handlers=g?[this,g]:[this]};this.addKeyboardHandler=function(g){this.removeKeyboardHandler(g);this.$handlers.push(g)};this.removeKeyboardHandler=function(j){var g=this.$handlers.indexOf(j);if(g==-1){return false}this.$handlers.splice(g,1);return true};this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]};this.$callKeyboardHandlers=function(m,j,o,n){var l;for(var k=this.$handlers.length;k--;){l=this.$handlers[k].handleKeyboard(this.$data,m,j,o,n);if(l&&l.command){break}}if(!l||!l.command){return false}var p=false;var g=this.$editor.commands;if(l.command!="null"){p=g.exec(l.command,this.$editor,l.args)}else{p=true}if(p&&n){e.stopEvent(n)}return p};this.handleKeyboard=function(j,i,g){return{command:this.$editor.commands.findKeyCommand(i,g)}};this.onCommandKey=function(k,i,j){var g=b.keyCodeToString(j);this.$callKeyboardHandlers(i,g,j,k)};this.onTextInput=function(j,g){var i=false;if(!g&&j.length==1){i=this.$callKeyboardHandlers(0,j)}if(!i){this.$editor.commands.exec("insertstring",this.$editor,j)}}}).call(f.prototype);a.KeyBinding=f});ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang"],function(b,a,c){var e=b("../lib/lang");function d(f,g){return{win:f,mac:g}}a.commands=[{name:"selectall",bindKey:d("Ctrl-A","Command-A"),exec:function(f){f.selectAll()},readOnly:true},{name:"centerselection",bindKey:d(null,"Ctrl-L"),exec:function(f){f.centerSelection()},readOnly:true},{name:"gotoline",bindKey:d("Ctrl-L","Command-L"),exec:function(g){var f=parseInt(prompt("Enter line number:"),10);if(!isNaN(f)){g.gotoLine(f)}},readOnly:true},{name:"fold",bindKey:d("Alt-L","Alt-L"),exec:function(f){f.session.toggleFold(false)},readOnly:true},{name:"unfold",bindKey:d("Alt-Shift-L","Alt-Shift-L"),exec:function(f){f.session.toggleFold(true)},readOnly:true},{name:"foldall",bindKey:d("Alt-0","Alt-0"),exec:function(f){f.session.foldAll()},readOnly:true},{name:"unfoldall",bindKey:d("Alt-Shift-0","Alt-Shift-0"),exec:function(f){f.session.unfold()},readOnly:true},{name:"findnext",bindKey:d("Ctrl-K","Command-G"),exec:function(f){f.findNext()},readOnly:true},{name:"findprevious",bindKey:d("Ctrl-Shift-K","Command-Shift-G"),exec:function(f){f.findPrevious()},readOnly:true},{name:"find",bindKey:d("Ctrl-F","Command-F"),exec:function(f){var g=prompt("Find:",f.getCopyText());f.find(g)},readOnly:true},{name:"overwrite",bindKey:d("Insert","Insert"),exec:function(f){f.toggleOverwrite()},readOnly:true},{name:"selecttostart",bindKey:d("Ctrl-Shift-Home|Alt-Shift-Up","Command-Shift-Up"),exec:function(f){f.getSelection().selectFileStart()},readOnly:true},{name:"gotostart",bindKey:d("Ctrl-Home|Ctrl-Up","Command-Home|Command-Up"),exec:function(f){f.navigateFileStart()},readOnly:true},{name:"selectup",bindKey:d("Shift-Up","Shift-Up"),exec:function(f){f.getSelection().selectUp()},readOnly:true},{name:"golineup",bindKey:d("Up","Up|Ctrl-P"),exec:function(g,f){g.navigateUp(f.times)},readOnly:true},{name:"selecttoend",bindKey:d("Ctrl-Shift-End|Alt-Shift-Down","Command-Shift-Down"),exec:function(f){f.getSelection().selectFileEnd()},readOnly:true},{name:"gotoend",bindKey:d("Ctrl-End|Ctrl-Down","Command-End|Command-Down"),exec:function(f){f.navigateFileEnd()},readOnly:true},{name:"selectdown",bindKey:d("Shift-Down","Shift-Down"),exec:function(f){f.getSelection().selectDown()},readOnly:true},{name:"golinedown",bindKey:d("Down","Down|Ctrl-N"),exec:function(g,f){g.navigateDown(f.times)},readOnly:true},{name:"selectwordleft",bindKey:d("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(f){f.getSelection().selectWordLeft()},readOnly:true},{name:"gotowordleft",bindKey:d("Ctrl-Left","Option-Left"),exec:function(f){f.navigateWordLeft()},readOnly:true},{name:"selecttolinestart",bindKey:d("Alt-Shift-Left","Command-Shift-Left"),exec:function(f){f.getSelection().selectLineStart()},readOnly:true},{name:"gotolinestart",bindKey:d("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(f){f.navigateLineStart()},readOnly:true},{name:"selectleft",bindKey:d("Shift-Left","Shift-Left"),exec:function(f){f.getSelection().selectLeft()},readOnly:true},{name:"gotoleft",bindKey:d("Left","Left|Ctrl-B"),exec:function(g,f){g.navigateLeft(f.times)},readOnly:true},{name:"selectwordright",bindKey:d("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(f){f.getSelection().selectWordRight()},readOnly:true},{name:"gotowordright",bindKey:d("Ctrl-Right","Option-Right"),exec:function(f){f.navigateWordRight()},readOnly:true},{name:"selecttolineend",bindKey:d("Alt-Shift-Right","Command-Shift-Right"),exec:function(f){f.getSelection().selectLineEnd()},readOnly:true},{name:"gotolineend",bindKey:d("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(f){f.navigateLineEnd()},readOnly:true},{name:"selectright",bindKey:d("Shift-Right","Shift-Right"),exec:function(f){f.getSelection().selectRight()},readOnly:true},{name:"gotoright",bindKey:d("Right","Right|Ctrl-F"),exec:function(g,f){g.navigateRight(f.times)},readOnly:true},{name:"selectpagedown",bindKey:d("Shift-PageDown","Shift-PageDown"),exec:function(f){f.selectPageDown()},readOnly:true},{name:"pagedown",bindKey:d(null,"PageDown"),exec:function(f){f.scrollPageDown()},readOnly:true},{name:"gotopagedown",bindKey:d("PageDown","Option-PageDown|Ctrl-V"),exec:function(f){f.gotoPageDown()},readOnly:true},{name:"selectpageup",bindKey:d("Shift-PageUp","Shift-PageUp"),exec:function(f){f.selectPageUp()},readOnly:true},{name:"pageup",bindKey:d(null,"PageUp"),exec:function(f){f.scrollPageUp()},readOnly:true},{name:"gotopageup",bindKey:d("PageUp","Option-PageUp"),exec:function(f){f.gotoPageUp()},readOnly:true},{name:"selectlinestart",bindKey:d("Shift-Home","Shift-Home"),exec:function(f){f.getSelection().selectLineStart()},readOnly:true},{name:"selectlineend",bindKey:d("Shift-End","Shift-End"),exec:function(f){f.getSelection().selectLineEnd()},readOnly:true},{name:"togglerecording",bindKey:d("Ctrl-Alt-E","Command-Option-E"),exec:function(f){f.commands.toggleRecording()},readOnly:true},{name:"replaymacro",bindKey:d("Ctrl-Shift-E","Command-Shift-E"),exec:function(f){f.commands.replay(f)},readOnly:true},{name:"jumptomatching",bindKey:d("Ctrl-Shift-P","Ctrl-Shift-P"),exec:function(f){f.jumpToMatching()},readOnly:true},{name:"removeline",bindKey:d("Ctrl-D","Command-D"),exec:function(f){f.removeLines()}},{name:"togglecomment",bindKey:d("Ctrl-7","Command-7"),exec:function(f){f.toggleCommentLines()}},{name:"replace",bindKey:d("Ctrl-R","Command-Option-F"),exec:function(g){var i=prompt("Find:",g.getCopyText());if(!i){return}var f=prompt("Replacement:");if(!f){return}g.replace(f,{needle:i})}},{name:"replaceall",bindKey:d("Ctrl-Shift-R","Command-Shift-Option-F"),exec:function(g){var i=prompt("Find:");if(!i){return}var f=prompt("Replacement:");if(!f){return}g.replaceAll(f,{needle:i})}},{name:"undo",bindKey:d("Ctrl-Z","Command-Z"),exec:function(f){f.undo()}},{name:"redo",bindKey:d("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(f){f.redo()}},{name:"copylinesup",bindKey:d("Ctrl-Alt-Up","Command-Option-Up"),exec:function(f){f.copyLinesUp()}},{name:"movelinesup",bindKey:d("Alt-Up","Option-Up"),exec:function(f){f.moveLinesUp()}},{name:"copylinesdown",bindKey:d("Ctrl-Alt-Down","Command-Option-Down"),exec:function(f){f.copyLinesDown()}},{name:"movelinesdown",bindKey:d("Alt-Down","Option-Down"),exec:function(f){f.moveLinesDown()}},{name:"del",bindKey:d("Delete","Delete|Ctrl-D"),exec:function(f){f.remove("right")}},{name:"backspace",bindKey:d("Ctrl-Backspace|Command-Backspace|Option-Backspace|Shift-Backspace|Backspace","Ctrl-Backspace|Command-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(f){f.remove("left")}},{name:"removetolinestart",bindKey:d("Alt-Backspace","Option-Backspace"),exec:function(f){f.removeToLineStart()}},{name:"removetolineend",bindKey:d("Alt-Delete","Ctrl-K"),exec:function(f){f.removeToLineEnd()}},{name:"removewordleft",bindKey:d("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(f){f.removeWordLeft()}},{name:"removewordright",bindKey:d("Ctrl-Delete","Alt-Delete"),exec:function(f){f.removeWordRight()}},{name:"outdent",bindKey:d("Shift-Tab","Shift-Tab"),exec:function(f){f.blockOutdent()}},{name:"indent",bindKey:d("Tab","Tab"),exec:function(f){f.indent()}},{name:"insertstring",exec:function(f,g){f.insert(g)}},{name:"inserttext",exec:function(g,f){g.insert(e.stringRepeat(f.text||"",f.times||1))}},{name:"splitline",bindKey:d(null,"Ctrl-O"),exec:function(f){f.splitLine()}},{name:"transposeletters",bindKey:d("Ctrl-T","Ctrl-T"),exec:function(f){f.transposeLetters()}},{name:"touppercase",bindKey:d("Ctrl-U","Ctrl-U"),exec:function(f){f.toUpperCase()}},{name:"tolowercase",bindKey:d("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(f){f.toLowerCase()}}]});ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/edit_session/folding","ace/edit_session/bracket_match"],function(f,i,c){var k=f("./lib/oop");var b=f("./lib/lang");var l=f("./lib/event_emitter").EventEmitter;var m=f("./selection").Selection;var g=f("./mode/text").Mode;var e=f("./range").Range;var j=f("./document").Document;var d=f("./background_tokenizer").BackgroundTokenizer;var a=function(o,n){this.$modified=true;this.$breakpoints=[];this.$frontMarkers={};this.$backMarkers={};this.$markerId=1;this.$rowCache=[];this.$wrapData=[];this.$foldData=[];this.$undoSelect=true;this.$foldData.toString=function(){var p="";this.forEach(function(q){p+="\n"+q.toString()});return p};if(o instanceof j){this.setDocument(o)}else{this.setDocument(new j(o))}this.selection=new m(this);if(n){this.setMode(n)}else{this.setMode(new g())}};(function(){k.implement(this,l);this.setDocument=function(w){if(this.doc){throw new Error("Document is already set")}this.doc=w;w.on("change",this.onChange.bind(this));this.on("changeFold",this.onChangeFold.bind(this));if(this.bgTokenizer){this.bgTokenizer.setDocument(this.getDocument());this.bgTokenizer.start(0)}};this.getDocument=function(){return this.doc};this.$resetRowCache=function(y){if(y==0){this.$rowCache=[];return}var x=this.$rowCache;for(var w=0;w<x.length;w++){if(x[w].docRow>=y){x.splice(w,x.length);return}}};this.onChangeFold=function(x){var w=x.data;this.$resetRowCache(w.start.row)};this.onChange=function(x){var y=x.data;this.$modified=true;this.$resetRowCache(y.range.start.row);var w=this.$updateInternalDataOnChange(x);if(!this.$fromUndo&&this.$undoManager&&!y.ignore){this.$deltasDoc.push(y);if(w&&w.length!=0){this.$deltasFold.push({action:"removeFolds",folds:w})}this.$informUndoManager.schedule()}this.bgTokenizer.start(y.range.start.row);this._emit("change",x)};this.setValue=function(w){this.doc.setValue(w);this.selection.moveCursorTo(0,0);this.selection.clearSelection();this.$resetRowCache(0);this.$deltas=[];this.$deltasDoc=[];this.$deltasFold=[];this.getUndoManager().reset()};this.getValue=this.toString=function(){return this.doc.getValue()};this.getSelection=function(){return this.selection};this.getState=function(w){return this.bgTokenizer.getState(w)};this.getTokens=function(x,w){return this.bgTokenizer.getTokens(x,w)};this.getTokenAt=function(A,y){var z=this.bgTokenizer.getTokens(A,A)[0].tokens;var x,B=0;if(y==null){w=z.length-1;B=this.getLine(A).length}else{for(var w=0;w<z.length;w++){B+=z[w].value.length;if(B>=y){break}}}x=z[w];if(!x){return null}x.index=w;x.start=B-x.value.length;return x};this.setUndoManager=function(x){this.$undoManager=x;this.$resetRowCache(0);this.$deltas=[];this.$deltasDoc=[];this.$deltasFold=[];if(this.$informUndoManager){this.$informUndoManager.cancel()}if(x){var w=this;this.$syncInformUndoManager=function(){w.$informUndoManager.cancel();if(w.$deltasFold.length){w.$deltas.push({group:"fold",deltas:w.$deltasFold});w.$deltasFold=[]}if(w.$deltasDoc.length){w.$deltas.push({group:"doc",deltas:w.$deltasDoc});w.$deltasDoc=[]}if(w.$deltas.length>0){x.execute({action:"aceupdate",args:[w.$deltas,w]})}w.$deltas=[]};this.$informUndoManager=b.deferredCall(this.$syncInformUndoManager)}};this.$defaultUndoManager={undo:function(){},redo:function(){},reset:function(){}};this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},this.getTabString=function(){if(this.getUseSoftTabs()){return b.stringRepeat(" ",this.getTabSize())}else{return"\t"}};this.$useSoftTabs=true;this.setUseSoftTabs=function(w){if(this.$useSoftTabs===w){return}this.$useSoftTabs=w};this.getUseSoftTabs=function(){return this.$useSoftTabs};this.$tabSize=4;this.setTabSize=function(w){if(isNaN(w)||this.$tabSize===w){return}this.$modified=true;this.$tabSize=w;this._emit("changeTabSize")};this.getTabSize=function(){return this.$tabSize};this.isTabStop=function(w){return this.$useSoftTabs&&(w.column%this.$tabSize==0)};this.$overwrite=false;this.setOverwrite=function(w){if(this.$overwrite==w){return}this.$overwrite=w;this._emit("changeOverwrite")};this.getOverwrite=function(){return this.$overwrite};this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)};this.getBreakpoints=function(){return this.$breakpoints};this.setBreakpoints=function(x){this.$breakpoints=[];for(var w=0;w<x.length;w++){this.$breakpoints[x[w]]=true}this._emit("changeBreakpoint",{})};this.clearBreakpoints=function(){this.$breakpoints=[];this._emit("changeBreakpoint",{})};this.setBreakpoint=function(w){this.$breakpoints[w]=true;this._emit("changeBreakpoint",{})};this.clearBreakpoint=function(w){delete this.$breakpoints[w];this._emit("changeBreakpoint",{})};this.getBreakpoints=function(){return this.$breakpoints};this.addMarker=function(y,z,A,x){var B=this.$markerId++;var w={range:y,type:A||"line",renderer:typeof A=="function"?A:null,clazz:z,inFront:!!x};if(x){this.$frontMarkers[B]=w;this._emit("changeFrontMarker")}else{this.$backMarkers[B]=w;this._emit("changeBackMarker")}return B};this.removeMarker=function(x){var w=this.$frontMarkers[x]||this.$backMarkers[x];if(!w){return}var y=w.inFront?this.$frontMarkers:this.$backMarkers;if(w){delete (y[x]);this._emit(w.inFront?"changeFrontMarker":"changeBackMarker")}};this.getMarkers=function(w){return w?this.$frontMarkers:this.$backMarkers};this.setAnnotations=function(y){this.$annotations={};for(var x=0;x<y.length;x++){var w=y[x];var z=w.row;if(this.$annotations[z]){this.$annotations[z].push(w)}else{this.$annotations[z]=[w]}}this._emit("changeAnnotation",{})};this.getAnnotations=function(){return this.$annotations||{}};this.clearAnnotations=function(){this.$annotations={};this._emit("changeAnnotation",{})};this.$detectNewLine=function(x){var w=x.match(/^.*?(\r?\n)/m);if(w){this.$autoNewLine=w[1]}else{this.$autoNewLine="\n"}};this.getWordRange=function(B,A){var y=this.getLine(B);var w=false;if(A>0){w=!!y.charAt(A-1).match(this.tokenRe)}if(!w){w=!!y.charAt(A).match(this.tokenRe)}var z=w?this.tokenRe:this.nonTokenRe;var C=A;if(C>0){do{C--}while(C>=0&&y.charAt(C).match(z));C++}var x=A;while(x<y.length&&y.charAt(x).match(z)){x++}return new e(B,C,B,x)};this.getAWordRange=function(y,x){var z=this.getWordRange(y,x);var w=this.getLine(z.end.row);while(w.charAt(z.end.column).match(/[ \t]/)){z.end.column+=1}return z};this.setNewLineMode=function(w){this.doc.setNewLineMode(w)};this.getNewLineMode=function(){return this.doc.getNewLineMode()};this.$useWorker=true;this.setUseWorker=function(w){if(this.$useWorker==w){return}this.$useWorker=w;this.$stopWorker();if(w){this.$startWorker()}};this.getUseWorker=function(){return this.$useWorker};this.onReloadTokenizer=function(x){var w=x.data;this.bgTokenizer.start(w.first);this._emit("tokenizerUpdate",x)};this.$mode=null;this.setMode=function(z){if(this.$mode===z){return}this.$mode=z;this.$stopWorker();if(this.$useWorker){this.$startWorker()}var y=z.getTokenizer();if(y.addEventListener!==undefined){var x=this.onReloadTokenizer.bind(this);y.addEventListener("update",x)}if(!this.bgTokenizer){this.bgTokenizer=new d(y);var w=this;this.bgTokenizer.addEventListener("update",function(A){w._emit("tokenizerUpdate",A)})}else{this.bgTokenizer.setTokenizer(y)}this.bgTokenizer.setDocument(this.getDocument());this.bgTokenizer.start(0);this.tokenRe=z.tokenRe;this.nonTokenRe=z.nonTokenRe;this.$setFolding(z.foldingRules);this._emit("changeMode")};this.$stopWorker=function(){if(this.$worker){this.$worker.terminate()}this.$worker=null};this.$startWorker=function(){if(typeof Worker!=="undefined"&&!f.noWorker){try{this.$worker=this.$mode.createWorker(this)}catch(w){console.log("Could not load worker");console.log(w);this.$worker=null}}else{this.$worker=null}};this.getMode=function(){return this.$mode};this.$scrollTop=0;this.setScrollTop=function(w){w=Math.round(Math.max(0,w));if(this.$scrollTop===w){return}this.$scrollTop=w;this._emit("changeScrollTop",w)};this.getScrollTop=function(){return this.$scrollTop};this.$scrollLeft=0;this.setScrollLeft=function(w){w=Math.round(Math.max(0,w));if(this.$scrollLeft===w){return}this.$scrollLeft=w;this._emit("changeScrollLeft",w)};this.getScrollLeft=function(){return this.$scrollLeft};this.getWidth=function(){this.$computeWidth();return this.width};this.getScreenWidth=function(){this.$computeWidth();return this.screenWidth};this.$computeWidth=function(w){if(this.$modified||w){this.$modified=false;var D=this.doc.getAllLines();var B=0;var y=0;for(var z=0;z<D.length;z++){var C=this.getFoldLine(z),E,A;E=D[z];if(C){var x=C.range.end;E=this.getFoldDisplayLine(C);z=x.row}A=E.length;B=Math.max(B,A);if(!this.$useWrapMode){y=Math.max(y,this.$getStringScreenWidth(E)[0])}}this.width=B;if(this.$useWrapMode){this.screenWidth=this.$wrapLimit}else{this.screenWidth=y}}};this.getLine=function(w){return this.doc.getLine(w)};this.getLines=function(x,w){return this.doc.getLines(x,w)};this.getLength=function(){return this.doc.getLength()};this.getTextRange=function(w){return this.doc.getTextRange(w)};this.insert=function(w,x){return this.doc.insert(w,x)};this.remove=function(w){return this.doc.remove(w)};this.undoChanges=function(z,y){if(!z.length){return}this.$fromUndo=true;var w=null;for(var x=z.length-1;x!=-1;x--){var A=z[x];if(A.group=="doc"){this.doc.revertDeltas(A.deltas);w=this.$getUndoSelection(A.deltas,true,w)}else{A.deltas.forEach(function(B){this.addFolds(B.folds)},this)}}this.$fromUndo=false;w&&this.$undoSelect&&!y&&this.selection.setSelectionRange(w);return w};this.redoChanges=function(z,y){if(!z.length){return}this.$fromUndo=true;var w=null;for(var x=0;x<z.length;x++){var A=z[x];if(A.group=="doc"){this.doc.applyDeltas(A.deltas);w=this.$getUndoSelection(A.deltas,false,w)}}this.$fromUndo=false;w&&this.$undoSelect&&!y&&this.selection.setSelectionRange(w);return w};this.setUndoSelect=function(w){this.$undoSelect=w};this.$getUndoSelection=function(w,x,D){function A(H){var G=H.action=="insertText"||H.action=="insertLines";return x?!G:G}var F=w[0];var z,E;var B=false;if(A(F)){z=F.range.clone();B=true}else{z=e.fromPoints(F.range.start,F.range.start);B=false}for(var y=1;y<w.length;y++){F=w[y];if(A(F)){E=F.range.start;if(z.compare(E.row,E.column)==-1){z.setStart(F.range.start)}E=F.range.end;if(z.compare(E.row,E.column)==1){z.setEnd(F.range.end)}B=true}else{E=F.range.start;if(z.compare(E.row,E.column)==-1){z=e.fromPoints(F.range.start,F.range.start)}B=false}}if(D!=null){var C=D.compareRange(z);if(C==1){z.setStart(D.start)}else{if(C==-1){z.setEnd(D.end)}}}return z},this.replace=function(w,x){return this.doc.replace(w,x)};this.moveText=function(A,B){var C=this.getTextRange(A);this.remove(A);var D=B.row;var z=B.column;if(!A.isMultiLine()&&A.start.row==D&&A.end.column<z){z-=C.length}if(A.isMultiLine()&&A.end.row<D){var E=this.doc.$split(C);D-=E.length-1}var x=D+A.end.row-A.start.row;var y=A.isMultiLine()?A.end.column:z+A.end.column-A.start.column;var w=new e(D,z,x,y);this.insert(w.start,C);return w};this.indentRows=function(x,w,z){z=z.replace(/\t/g,this.getTabString());for(var y=x;y<=w;y++){this.insert({row:y,column:0},z)}};this.outdentRows=function(y){var C=y.collapseRows();var x=new e(0,0,0,0);var B=this.getTabSize();for(var A=C.start.row;A<=C.end.row;++A){var w=this.getLine(A);x.start.row=A;x.end.row=A;for(var z=0;z<B;++z){if(w.charAt(z)!=" "){break}}if(z<B&&w.charAt(z)=="\t"){x.start.column=z;x.end.column=z+1}else{x.start.column=0;x.end.column=z}this.remove(x)}};this.moveLinesUp=function(y,w){if(y<=0){return 0}var x=this.doc.removeLines(y,w);this.doc.insertLines(y-1,x);return -1};this.moveLinesDown=function(y,w){if(w>=this.doc.getLength()-1){return 0}var x=this.doc.removeLines(y,w);this.doc.insertLines(y+1,x);return 1};this.duplicateLines=function(z,y){var z=this.$clipRowToDocument(z);var y=this.$clipRowToDocument(y);var w=this.getLines(z,y);this.doc.insertLines(z,w);var x=y-z+1;return x};this.$clipRowToDocument=function(w){return Math.max(0,Math.min(w,this.doc.getLength()-1))};this.$clipColumnToRow=function(x,w){if(w<0){return 0}return Math.min(this.doc.getLine(x).length,w)};this.$clipPositionToDocument=function(y,x){x=Math.max(0,x);if(y<0){y=0;x=0}else{var w=this.doc.getLength();if(y>=w){y=w-1;x=this.doc.getLine(w-1).length}else{x=Math.min(this.doc.getLine(y).length,x)}}return{row:y,column:x}};this.$clipRangeToDocument=function(x){if(x.start.row<0){x.start.row=0;x.start.column=0}else{x.start.column=this.$clipColumnToRow(x.start.row,x.start.column)}var w=this.doc.getLength()-1;if(x.end.row>w){x.end.row=w;x.end.column=this.doc.getLine(w).length}else{x.end.column=this.$clipColumnToRow(x.end.row,x.end.column)}return x};this.$wrapLimit=80;this.$useWrapMode=false;this.$wrapLimitRange={min:null,max:null};this.setUseWrapMode=function(y){if(y!=this.$useWrapMode){this.$useWrapMode=y;this.$modified=true;this.$resetRowCache(0);if(y){var w=this.getLength();this.$wrapData=[];for(var x=0;x<w;x++){this.$wrapData.push([])}this.$updateWrapData(0,w-1)}this._emit("changeWrapMode")}};this.getUseWrapMode=function(){return this.$useWrapMode};this.setWrapLimitRange=function(x,w){if(this.$wrapLimitRange.min!==x||this.$wrapLimitRange.max!==w){this.$wrapLimitRange.min=x;this.$wrapLimitRange.max=w;this.$modified=true;this._emit("changeWrapMode")}};this.adjustWrapLimit=function(x){var w=this.$constrainWrapLimit(x);if(w!=this.$wrapLimit&&w>0){this.$wrapLimit=w;this.$modified=true;if(this.$useWrapMode){this.$updateWrapData(0,this.getLength()-1);this.$resetRowCache(0);this._emit("changeWrapLimit")}return true}return false};this.$constrainWrapLimit=function(x){var y=this.$wrapLimitRange.min;if(y){x=Math.max(y,x)}var w=this.$wrapLimitRange.max;if(w){x=Math.min(w,x)}return Math.max(1,x)};this.getWrapLimit=function(){return this.$wrapLimit};this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}};this.$updateInternalDataOnChange=function(F){var C=this.$useWrapMode;var E;var A=F.data.action;var z=F.data.range.start.row;var L=F.data.range.end.row;var x=F.data.range.start;var B=F.data.range.end;var w=null;if(A.indexOf("Lines")!=-1){if(A=="insertLines"){L=z+(F.data.lines.length)}else{L=z}E=F.data.lines?F.data.lines.length:L-z}else{E=L-z}if(E!=0){if(A.indexOf("remove")!=-1){C&&this.$wrapData.splice(z,E);var y=this.$foldData;w=this.getFoldsInRange(F.data.range);this.removeFolds(w);var J=this.getFoldLine(B.row);var K=0;if(J){J.addRemoveChars(B.row,B.column,x.column-B.column);J.shiftRow(-E);var I=this.getFoldLine(z);if(I&&I!==J){I.merge(J);J=I}K=y.indexOf(J)+1}for(K;K<y.length;K++){var J=y[K];if(J.start.row>=B.row){J.shiftRow(-E)}}L=z}else{var G;if(C){G=[z,0];for(var D=0;D<E;D++){G.push([])}this.$wrapData.splice.apply(this.$wrapData,G)}var y=this.$foldData;var J=this.getFoldLine(z);var K=0;if(J){var H=J.range.compareInside(x.row,x.column);if(H==0){J=J.split(x.row,x.column);J.shiftRow(E);J.addRemoveChars(L,0,B.column-x.column)}else{if(H==-1){J.addRemoveChars(z,0,B.column-x.column);J.shiftRow(E)}}K=y.indexOf(J)+1}for(K;K<y.length;K++){var J=y[K];if(J.start.row>=z){J.shiftRow(E)}}}}else{E=Math.abs(F.data.range.start.column-F.data.range.end.column);if(A.indexOf("remove")!=-1){w=this.getFoldsInRange(F.data.range);this.removeFolds(w);E=-E}var J=this.getFoldLine(z);if(J){J.addRemoveChars(z,x.column,E)}}if(C&&this.$wrapData.length!=this.doc.getLength()){console.error("doc.getLength() and $wrapData.length have to be the same!")}C&&this.$updateWrapData(z,L);return w};this.$updateWrapData=function(w,C){var E=this.doc.getAllLines();var y=this.getTabSize();var x=this.$wrapData;var D=this.$wrapLimit;var z;var A;var B=w;C=Math.min(C,E.length-1);while(B<=C){A=this.getFoldLine(B,A);if(!A){z=this.$getDisplayTokens(b.stringTrimRight(E[B]));x[B]=this.$computeWrapSplits(z,D,y);B++}else{z=[];A.walk(function(K,J,I,F){var G;if(K){G=this.$getDisplayTokens(K,z.length);G[0]=t;for(var H=1;H<G.length;H++){G[H]=n}}else{G=this.$getDisplayTokens(E[J].substring(F,I),z.length)}z=z.concat(G)}.bind(this),A.end.row,E[A.end.row].length+1);while(z.length!=0&&z[z.length-1]>=r){z.pop()}x[A.start.row]=this.$computeWrapSplits(z,D,y);B=A.end.row+1}}};var v=1,u=2,t=3,n=4,q=9,r=10,s=11,o=12;this.$computeWrapSplits=function(A,E){if(A.length==0){return[]}var C=[];var x=A.length;var z=0,w=0;function D(H){var G=A.slice(z,H);var F=G.length;G.join("").replace(/12/g,function(){F-=1}).replace(/2/g,function(){F-=1});w+=F;C.push(w);z=H}while(x-z>E){var B=z+E;if(A[B]>=r){while(A[B]>=r){B++}D(B);continue}if(A[B]==t||A[B]==n){for(B;B!=z-1;B--){if(A[B]==t){break}}if(B>z){D(B);continue}B=z+E;for(B;B<A.length;B++){if(A[B]!=n){break}}if(B==A.length){break}D(B);continue}var y=Math.max(B-10,z-1);while(B>y&&A[B]<t){B--}while(B>y&&A[B]==q){B--}if(B>y){D(++B);continue}B=z+E;D(B)}return C};this.$getDisplayTokens=function(A,z){var w=[];var y;z=z||0;for(var x=0;x<A.length;x++){var C=A.charCodeAt(x);if(C==9){y=this.getScreenTabSize(w.length+z);w.push(s);for(var B=1;B<y;B++){w.push(o)}}else{if(C==32){w.push(r)}else{if((C>39&&C<48)||(C>57&&C<64)){w.push(q)}else{if(C>=4352&&p(C)){w.push(v,u)}else{w.push(v)}}}}}return w};this.$getStringScreenWidth=function(y,A,w){if(A==0){return[0,0]}if(A==null){A=w+y.length*Math.max(this.getTabSize(),2)}w=w||0;var z,x;for(x=0;x<y.length;x++){z=y.charCodeAt(x);if(z==9){w+=this.getScreenTabSize(w)}else{if(z>=4352&&p(z)){w+=2}else{w+=1}}if(w>A){break}}return[w,x]};this.getRowLength=function(w){if(!this.$useWrapMode||!this.$wrapData[w]){return 1}else{return this.$wrapData[w].length+1}};this.getRowHeight=function(w,x){return this.getRowLength(x)*w.lineHeight};this.getScreenLastRowColumn=function(w){return this.documentToScreenColumn(w,this.doc.getLine(w).length)};this.getDocumentLastRowColumn=function(w,y){var x=this.documentToScreenRow(w,y);return this.getScreenLastRowColumn(x)};this.getDocumentLastRowColumnPosition=function(w,y){var x=this.documentToScreenRow(w,y);return this.screenToDocumentPosition(x,Number.MAX_VALUE/10)};this.getRowSplitData=function(w){if(!this.$useWrapMode){return undefined}else{return this.$wrapData[w]}};this.getScreenTabSize=function(w){return this.$tabSize-w%this.$tabSize};this.screenToDocumentRow=function(x,w){return this.screenToDocumentPosition(x,w).row};this.screenToDocumentColumn=function(x,w){return this.screenToDocumentPosition(x,w).column};this.screenToDocumentPosition=function(E,F){if(E<0){return{row:0,column:0}}var K;var y=0;var B=0;var z;var J=0;var A=0;var x=this.$rowCache;for(var D=0;D<x.length;D++){if(x[D].screenRow<E){J=x[D].screenRow;y=x[D].docRow}else{break}}var w=!x.length||D==x.length;var G=this.getLength()-1;var H=this.getNextFoldLine(y);var C=H?H.start.row:Infinity;while(J<=E){A=this.getRowLength(y);if(J+A-1>=E||y>=G){break}else{J+=A;y++;if(y>C){y=H.end.row+1;H=this.getNextFoldLine(y,H);C=H?H.start.row:Infinity}}if(w){x.push({docRow:y,screenRow:J})}}if(H&&H.start.row<=y){K=this.getFoldDisplayLine(H);y=H.start.row}else{if(J+A<=E||y>G){return{row:G,column:this.getLine(G).length}}else{K=this.getLine(y);H=null}}if(this.$useWrapMode){var I=this.$wrapData[y];if(I){z=I[E-J];if(E>J&&I.length){B=I[E-J-1]||I[I.length-1];K=K.substring(B)}}}B+=this.$getStringScreenWidth(K,F)[1];if(this.$useWrapMode){if(B>=z){B=z-1}}else{B=Math.min(B,K.length)}if(H){return H.idxToPosition(B)}return{row:y,column:B}};this.documentToScreenPosition=function(z,A){if(typeof A==="undefined"){var J=this.$clipPositionToDocument(z.row,z.column)}else{J=this.$clipPositionToDocument(z,A)}z=J.row;A=J.column;var B;if(this.$useWrapMode){B=this.$wrapData;if(z>B.length-1){return{row:this.getScreenLength(),column:B.length==0?0:(B[B.length-1].length-1)}}}var F=0;var E=null;var G=null;G=this.getFoldAt(z,A,1);if(G){z=G.start.row;A=G.start.column}var H,M=0;var y=this.$rowCache;for(var D=0;D<y.length;D++){if(y[D].docRow<z){F=y[D].screenRow;M=y[D].docRow}else{break}}var x=!y.length||D==y.length;var K=this.getNextFoldLine(M);var C=K?K.start.row:Infinity;while(M<z){if(M>=C){H=K.end.row+1;if(H>z){break}K=this.getNextFoldLine(H,K);C=K?K.start.row:Infinity}else{H=M+1}F+=this.getRowLength(M);M=H;if(x){y.push({docRow:M,screenRow:F})}}var w="";if(K&&M>=C){w=this.getFoldDisplayLine(K,z,A);E=K.start.row}else{w=this.getLine(z).substring(0,A);E=z}if(this.$useWrapMode){var L=B[E];var I=0;while(w.length>=L[I]){F++;I++}w=w.substring(L[I-1]||0,w.length)}return{row:F,column:this.$getStringScreenWidth(w)[0]}};this.documentToScreenColumn=function(x,w){return this.documentToScreenPosition(x,w).column};this.documentToScreenRow=function(w,x){return this.documentToScreenPosition(w,x).row};this.getScreenLength=function(){var B=0;var x=null;if(!this.$useWrapMode){B=this.getLength();var z=this.$foldData;for(var y=0;y<z.length;y++){x=z[y];B-=x.end.row-x.start.row}}else{var A=this.$wrapData.length;var C=0,y=0;var x=this.$foldData[y++];var w=x?x.start.row:Infinity;while(C<A){B+=this.$wrapData[C].length+1;C++;if(C>w){C=x.end.row+1;x=this.$foldData[y++];w=x?x.start.row:Infinity}}}return B};function p(w){if(w<4352){return false}return w>=4352&&w<=4447||w>=4515&&w<=4519||w>=4602&&w<=4607||w>=9001&&w<=9002||w>=11904&&w<=11929||w>=11931&&w<=12019||w>=12032&&w<=12245||w>=12272&&w<=12283||w>=12288&&w<=12350||w>=12353&&w<=12438||w>=12441&&w<=12543||w>=12549&&w<=12589||w>=12593&&w<=12686||w>=12688&&w<=12730||w>=12736&&w<=12771||w>=12784&&w<=12830||w>=12832&&w<=12871||w>=12880&&w<=13054||w>=13056&&w<=19903||w>=19968&&w<=42124||w>=42128&&w<=42182||w>=43360&&w<=43388||w>=44032&&w<=55203||w>=55216&&w<=55238||w>=55243&&w<=55291||w>=63744&&w<=64255||w>=65040&&w<=65049||w>=65072&&w<=65106||w>=65108&&w<=65126||w>=65128&&w<=65131||w>=65281&&w<=65376||w>=65504&&w<=65510}}).call(a.prototype);f("./edit_session/folding").Folding.call(a.prototype);f("./edit_session/bracket_match").BracketMatch.call(a.prototype);i.EditSession=a});ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(b,a,c){var f=b("./lib/oop");var i=b("./lib/lang");var e=b("./lib/event_emitter").EventEmitter;var g=b("./range").Range;var d=function(k){this.session=k;this.doc=k.getDocument();this.clearSelection();this.selectionLead=this.doc.createAnchor(0,0);this.selectionAnchor=this.doc.createAnchor(0,0);var j=this;this.selectionLead.on("change",function(l){j._emit("changeCursor");if(!j.$isEmpty){j._emit("changeSelection")}if(!j.$preventUpdateDesiredColumnOnChange&&l.old.column!=l.value.column){j.$updateDesiredColumn()}});this.selectionAnchor.on("change",function(){if(!j.$isEmpty){j._emit("changeSelection")}})};(function(){f.implement(this,e);this.isEmpty=function(){return(this.$isEmpty||(this.selectionAnchor.row==this.selectionLead.row&&this.selectionAnchor.column==this.selectionLead.column))};this.isMultiLine=function(){if(this.isEmpty()){return false}return this.getRange().isMultiLine()};this.getCursor=function(){return this.selectionLead.getPosition()};this.setSelectionAnchor=function(k,j){this.selectionAnchor.setPosition(k,j);if(this.$isEmpty){this.$isEmpty=false;this._emit("changeSelection")}};this.getSelectionAnchor=function(){if(this.$isEmpty){return this.getSelectionLead()}else{return this.selectionAnchor.getPosition()}};this.getSelectionLead=function(){return this.selectionLead.getPosition()};this.shiftSelection=function(l){if(this.$isEmpty){this.moveCursorTo(this.selectionLead.row,this.selectionLead.column+l);return}var k=this.getSelectionAnchor();var j=this.getSelectionLead();var m=this.isBackwards();if(!m||k.column!==0){this.setSelectionAnchor(k.row,k.column+l)}if(m||j.column!==0){this.$moveSelection(function(){this.moveCursorTo(j.row,j.column+l)})}};this.isBackwards=function(){var k=this.selectionAnchor;var j=this.selectionLead;return(k.row>j.row||(k.row==j.row&&k.column>j.column))};this.getRange=function(){var k=this.selectionAnchor;var j=this.selectionLead;if(this.isEmpty()){return g.fromPoints(j,j)}if(this.isBackwards()){return g.fromPoints(j,k)}else{return g.fromPoints(k,j)}};this.clearSelection=function(){if(!this.$isEmpty){this.$isEmpty=true;this._emit("changeSelection")}};this.selectAll=function(){var j=this.doc.getLength()-1;this.setSelectionAnchor(j,this.doc.getLine(j).length);this.moveCursorTo(0,0)};this.setSelectionRange=function(j,k){if(k){this.setSelectionAnchor(j.end.row,j.end.column);this.selectTo(j.start.row,j.start.column)}else{this.setSelectionAnchor(j.start.row,j.start.column);this.selectTo(j.end.row,j.end.column)}this.$updateDesiredColumn()};this.$updateDesiredColumn=function(){var j=this.getCursor();this.$desiredColumn=this.session.documentToScreenColumn(j.row,j.column)};this.$moveSelection=function(j){var k=this.selectionLead;if(this.$isEmpty){this.setSelectionAnchor(k.row,k.column)}j.call(this)};this.selectTo=function(k,j){this.$moveSelection(function(){this.moveCursorTo(k,j)})};this.selectToPosition=function(j){this.$moveSelection(function(){this.moveCursorToPosition(j)})};this.selectUp=function(){this.$moveSelection(this.moveCursorUp)};this.selectDown=function(){this.$moveSelection(this.moveCursorDown)};this.selectRight=function(){this.$moveSelection(this.moveCursorRight)};this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)};this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)};this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)};this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)};this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)};this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)};this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)};this.selectWord=function(){var k=this.getCursor();var j=this.session.getWordRange(k.row,k.column);this.setSelectionRange(j)};this.selectAWord=function(){var k=this.getCursor();var j=this.session.getAWordRange(k.row,k.column);this.setSelectionRange(j)};this.selectLine=function(){var j=this.selectionLead.row;var k;var l=this.session.getFoldLine(j);if(l){j=l.start.row;k=l.end.row}else{k=j}this.setSelectionAnchor(j,0);this.$moveSelection(function(){this.moveCursorTo(k+1,0)})};this.moveCursorUp=function(){this.moveCursorBy(-1,0)};this.moveCursorDown=function(){this.moveCursorBy(1,0)};this.moveCursorLeft=function(){var l=this.selectionLead.getPosition(),j;if(j=this.session.getFoldAt(l.row,l.column,-1)){this.moveCursorTo(j.start.row,j.start.column)}else{if(l.column==0){if(l.row>0){this.moveCursorTo(l.row-1,this.doc.getLine(l.row-1).length)}}else{var k=this.session.getTabSize();if(this.session.isTabStop(l)&&this.doc.getLine(l.row).slice(l.column-k,l.column).split(" ").length-1==k){this.moveCursorBy(0,-k)}else{this.moveCursorBy(0,-1)}}}};this.moveCursorRight=function(){var l=this.selectionLead.getPosition(),j;if(j=this.session.getFoldAt(l.row,l.column,1)){this.moveCursorTo(j.end.row,j.end.column)}else{if(this.selectionLead.column==this.doc.getLine(this.selectionLead.row).length){if(this.selectionLead.row<this.doc.getLength()-1){this.moveCursorTo(this.selectionLead.row+1,0)}}else{var k=this.session.getTabSize();var l=this.selectionLead;if(this.session.isTabStop(l)&&this.doc.getLine(l.row).slice(l.column,l.column+k).split(" ").length-1==k){this.moveCursorBy(0,k)}else{this.moveCursorBy(0,1)}}}};this.moveCursorLineStart=function(){var o=this.selectionLead.row;var l=this.selectionLead.column;var k=this.session.documentToScreenRow(o,l);var j=this.session.screenToDocumentPosition(k,0);var m=this.session.getDisplayLine(o,null,j.row,j.column);var n=m.match(/^\s*/);if(n[0].length==l){this.moveCursorTo(j.row,j.column)}else{this.moveCursorTo(j.row,j.column+n[0].length)}};this.moveCursorLineEnd=function(){var k=this.selectionLead;var j=this.session.getDocumentLastRowColumnPosition(k.row,k.column);this.moveCursorTo(j.row,j.column)};this.moveCursorFileEnd=function(){var k=this.doc.getLength()-1;var j=this.doc.getLine(k).length;this.moveCursorTo(k,j)};this.moveCursorFileStart=function(){this.moveCursorTo(0,0)};this.moveCursorWordRight=function(){var o=this.selectionLead.row;var m=this.selectionLead.column;var j=this.doc.getLine(o);var n=j.substring(m);var l;this.session.nonTokenRe.lastIndex=0;this.session.tokenRe.lastIndex=0;var k=this.session.getFoldAt(o,m,1);if(k){this.moveCursorTo(k.end.row,k.end.column);return}if(l=this.session.nonTokenRe.exec(n)){m+=this.session.nonTokenRe.lastIndex;this.session.nonTokenRe.lastIndex=0;n=j.substring(m)}if(m>=j.length){this.moveCursorTo(o,j.length);this.moveCursorRight();if(o<this.doc.getLength()-1){this.moveCursorWordRight()}return}if(l=this.session.tokenRe.exec(n)){m+=this.session.tokenRe.lastIndex;this.session.tokenRe.lastIndex=0}this.moveCursorTo(o,m)};this.moveCursorWordLeft=function(){var o=this.selectionLead.row;var l=this.selectionLead.column;var k;if(k=this.session.getFoldAt(o,l,-1)){this.moveCursorTo(k.start.row,k.start.column);return}var n=this.session.getFoldStringAt(o,l,-1);if(n==null){n=this.doc.getLine(o).substring(0,l)}var m=i.stringReverse(n);var j;this.session.nonTokenRe.lastIndex=0;this.session.tokenRe.lastIndex=0;if(j=this.session.nonTokenRe.exec(m)){l-=this.session.nonTokenRe.lastIndex;m=m.slice(this.session.nonTokenRe.lastIndex);this.session.nonTokenRe.lastIndex=0}if(l<=0){this.moveCursorTo(o,0);this.moveCursorLeft();if(o>0){this.moveCursorWordLeft()}return}if(j=this.session.tokenRe.exec(m)){l-=this.session.tokenRe.lastIndex;this.session.tokenRe.lastIndex=0}this.moveCursorTo(o,l)};this.moveCursorBy=function(m,l){var k=this.session.documentToScreenPosition(this.selectionLead.row,this.selectionLead.column);var n=(l===0&&this.$desiredColumn)||k.column;var j=this.session.screenToDocumentPosition(k.row+m,n);this.moveCursorTo(j.row,j.column+l,l===0)};this.moveCursorToPosition=function(j){this.moveCursorTo(j.row,j.column)};this.moveCursorTo=function(m,l,k){var j=this.session.getFoldAt(m,l,1);if(j){m=j.start.row;l=j.start.column}this.$preventUpdateDesiredColumnOnChange=true;this.selectionLead.setPosition(m,l);this.$preventUpdateDesiredColumnOnChange=false;if(!k){this.$updateDesiredColumn(this.selectionLead.column)}};this.moveCursorToScreen=function(l,k,j){var m=this.session.screenToDocumentPosition(l,k);l=m.row;k=m.column;this.moveCursorTo(l,k,j)}}).call(d.prototype);a.Selection=d});ace.define("ace/range",["require","exports","module"],function(b,a,c){var d=function(f,g,e,i){this.start={row:f,column:g};this.end={row:e,column:i}};(function(){this.isEequal=function(e){return this.start.row==e.start.row&&this.end.row==e.end.row&&this.start.column==e.start.column&&this.end.column==e.end.column};this.toString=function(){return("Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]")};this.contains=function(f,e){return this.compare(f,e)==0};this.compareRange=function(f){var g,e=f.end,i=f.start;g=this.compare(e.row,e.column);if(g==1){g=this.compare(i.row,i.column);if(g==1){return 2}else{if(g==0){return 1}else{return 0}}}else{if(g==-1){return -2}else{g=this.compare(i.row,i.column);if(g==-1){return -1}else{if(g==1){return 42}else{return 0}}}}};this.comparePoint=function(e){return this.compare(e.row,e.column)};this.containsRange=function(e){return this.comparePoint(e.start)==0&&this.comparePoint(e.end)==0};this.isEnd=function(f,e){return this.end.row==f&&this.end.column==e};this.isStart=function(f,e){return this.start.row==f&&this.start.column==e};this.setStart=function(f,e){if(typeof f=="object"){this.start.column=f.column;this.start.row=f.row}else{this.start.row=f;this.start.column=e}};this.setEnd=function(f,e){if(typeof f=="object"){this.end.column=f.column;this.end.row=f.row}else{this.end.row=f;this.end.column=e}};this.inside=function(f,e){if(this.compare(f,e)==0){if(this.isEnd(f,e)||this.isStart(f,e)){return false}else{return true}}return false};this.insideStart=function(f,e){if(this.compare(f,e)==0){if(this.isEnd(f,e)){return false}else{return true}}return false};this.insideEnd=function(f,e){if(this.compare(f,e)==0){if(this.isStart(f,e)){return false}else{return true}}return false};this.compare=function(f,e){if(!this.isMultiLine()){if(f===this.start.row){return e<this.start.column?-1:(e>this.end.column?1:0)}}if(f<this.start.row){return -1}if(f>this.end.row){return 1}if(this.start.row===f){return e>=this.start.column?0:-1}if(this.end.row===f){return e<=this.end.column?0:1}return 0};this.compareStart=function(f,e){if(this.start.row==f&&this.start.column==e){return -1}else{return this.compare(f,e)}};this.compareEnd=function(f,e){if(this.end.row==f&&this.end.column==e){return 1}else{return this.compare(f,e)}};this.compareInside=function(f,e){if(this.end.row==f&&this.end.column==e){return 1}else{if(this.start.row==f&&this.start.column==e){return -1}else{return this.compare(f,e)}}};this.clipRows=function(g,f){if(this.end.row>f){var e={row:f+1,column:0}}if(this.start.row>f){var i={row:f+1,column:0}}if(this.start.row<g){var i={row:g,column:0}}if(this.end.row<g){var e={row:g,column:0}}return d.fromPoints(i||this.start,e||this.end)};this.extend=function(i,f){var g=this.compare(i,f);if(g==0){return this}else{if(g==-1){var j={row:i,column:f}}else{var e={row:i,column:f}}}return d.fromPoints(j||this.start,e||this.end)};this.isEmpty=function(){return(this.start.row==this.end.row&&this.start.column==this.end.column)};this.isMultiLine=function(){return(this.start.row!==this.end.row)};this.clone=function(){return d.fromPoints(this.start,this.end)};this.collapseRows=function(){if(this.end.column==0){return new d(this.start.row,0,Math.max(this.start.row,this.end.row-1),0)}else{return new d(this.start.row,0,this.end.row,0)}};this.toScreenRange=function(f){var e=f.documentToScreenPosition(this.start);var g=f.documentToScreenPosition(this.end);return new d(e.row,e.column,g.row,g.column)}}).call(d.prototype);d.fromPoints=function(f,e){return new d(f.row,f.column,e.row,e.column)};a.Range=d});ace.define("ace/mode/text",["require","exports","module","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour","ace/unicode"],function(e,c,f){var d=e("../tokenizer").Tokenizer;var b=e("./text_highlight_rules").TextHighlightRules;var i=e("./behaviour").Behaviour;var a=e("../unicode");var g=function(){this.$tokenizer=new d(new b().getRules());this.$behaviour=new i()};(function(){this.tokenRe=new RegExp("^["+a.packages.L+a.packages.Mn+a.packages.Mc+a.packages.Nd+a.packages.Pc+"\\$_]+","g");this.nonTokenRe=new RegExp("^(?:[^"+a.packages.L+a.packages.Mn+a.packages.Mc+a.packages.Nd+a.packages.Pc+"\\$_]|s])+","g");this.getTokenizer=function(){return this.$tokenizer};this.toggleCommentLines=function(l,m,k,j){};this.getNextLineIndent=function(l,j,k){return""};this.checkOutdent=function(l,j,k){return false};this.autoOutdent=function(j,k,l){};this.$getIndent=function(j){var k=j.match(/^(\s+)/);if(k){return k[1]}return""};this.createWorker=function(j){return null};this.highlightSelection=function(o){var q=o.session;if(!q.$selectionOccurrences){q.$selectionOccurrences=[]}if(q.$selectionOccurrences.length){this.clearSelectionHighlight(o)}var r=o.getSelectionRange();if(r.isEmpty()||r.isMultiLine()){return}var m=r.start.column-1;var s=r.end.column+1;var u=q.getLine(r.start.row);var p=u.length;var n=u.substring(Math.max(m,0),Math.min(s,p));if((m>=0&&/^[\w\d]/.test(n))||(s<=p&&/[\w\d]$/.test(n))){return}n=u.substring(r.start.column,r.end.column);if(!/^[\w\d]+$/.test(n)){return}var t=o.getCursorPosition();var l={wrap:true,wholeWord:true,caseSensitive:true,needle:n};var k=o.$search.getOptions();o.$search.set(l);var j=o.$search.findAll(q);j.forEach(function(w){if(!w.contains(t.row,t.column)){var v=q.addMarker(w,"ace_selected_word","text");q.$selectionOccurrences.push(v)}});o.$search.set(k)};this.clearSelectionHighlight=function(j){if(!j.session.$selectionOccurrences){return}j.session.$selectionOccurrences.forEach(function(k){j.session.removeMarker(k)});j.session.$selectionOccurrences=[]};this.createModeDelegates=function(k){if(!this.$embeds){return}this.$modes={};for(var l=0;l<this.$embeds.length;l++){if(k[this.$embeds[l]]){this.$modes[this.$embeds[l]]=new k[this.$embeds[l]]()}}var j=["toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction"];for(var l=0;l<j.length;l++){(function(n){var o=j[l];var m=n[o];n[j[l]]=function(){return this.$delegator(o,arguments,m)}}(this))}};this.$delegator=function(q,l,k){var o=l[0];for(var n=0;n<this.$embeds.length;n++){if(!this.$modes[this.$embeds[n]]){continue}var m=o.split(this.$embeds[n]);if(!m[0]&&m[1]){l[0]=m[1];var p=this.$modes[this.$embeds[n]];return p[q].apply(p,l)}}var j=k.apply(this,l);return k?j:undefined};this.transformAction=function(o,n,l,p,q){if(this.$behaviour){var m=this.$behaviour.getBehaviours();for(var k in m){if(m[k][n]){var j=m[k][n].apply(this,arguments);if(j){return j}}}}}}).call(g.prototype);c.Mode=g});ace.define("ace/tokenizer",["require","exports","module"],function(c,a,d){var b=function(o,k){k=k?"g"+k:"g";this.rules=o;this.regExps={};this.matchMappings={};for(var n in this.rules){var l=this.rules[n];var f=l;var j=[];var p=0;var e=this.matchMappings[n]={};for(var g=0;g<f.length;g++){var q=new RegExp("(?:("+f[g].regex+")|(.))").exec("a").length-2;var m=f[g].regex.replace(/\\([0-9]+)/g,function(i,r){return"\\"+(parseInt(r,10)+p+1)});e[p]={rule:g,len:q};p+=q;j.push(m)}this.regExps[n]=new RegExp("(?:("+j.join(")|(")+")|(.))",k)}};(function(){this.getLineTokens=function(u,k){var g=k;var f=this.rules[g];var e=this.matchMappings[g];var t=this.regExps[g];t.lastIndex=0;var n,q=[];var o=0;var j={type:null,value:""};while(n=t.exec(u)){var p="text";var r=null;var s=[n[0]];for(var l=0;l<n.length-2;l++){if(n[l+1]!==undefined){r=f[e[l].rule];if(e[l].len>1){s=n.slice(l+2,l+1+e[l].len)}if(typeof r.token=="function"){p=r.token.apply(this,s)}else{p=r.token}var m=r.next;if(m&&m!==g){g=m;f=this.rules[g];e=this.matchMappings[g];o=t.lastIndex;t=this.regExps[g];t.lastIndex=o}break}}if(s[0]){if(typeof p=="string"){s=[s.join("")];p=[p]}for(var l=0;l<s.length;l++){if((!r||r.merge||p[l]==="text")&&j.type===p[l]){j.value+=s[l]}else{if(j.type){q.push(j)}j={type:p[l],value:s[l]}}}}if(o==u.length){break}o=t.lastIndex}if(j.type){q.push(j)}return{tokens:q,state:g}}}).call(b.prototype);a.Tokenizer=b});ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/lang"],function(c,b,d){var e=c("../lib/lang");var a=function(){this.$rules={"start":[{token:"empty_line",regex:"^$"},{token:"text",regex:".+"}]}};(function(){this.addRules=function(m,k){for(var g in m){var j=m[g];for(var f=0;f<j.length;f++){var l=j[f];if(l.next){l.next=k+l.next}else{l.next=k+g}}this.$rules[k+g]=j}};this.getRules=function(){return this.$rules};this.embedRules=function(n,k,m,f){var l=new n().getRules();if(f){for(var j=0;j<f.length;j++){f[j]=k+f[j]}}else{f=[];for(var g in l){f.push(k+g)}}this.addRules(l,k);for(var j=0;j<f.length;j++){Array.prototype.unshift.apply(this.$rules[f[j]],e.deepCopy(m))}if(!this.$embeds){this.$embeds=[]}this.$embeds.push(k)};this.getEmbeds=function(){return this.$embeds}}).call(a.prototype);b.TextHighlightRules=a});ace.define("ace/mode/behaviour",["require","exports","module"],function(b,a,c){var d=function(){this.$behaviours={}};(function(){this.add=function(e,f,g){switch(undefined){case this.$behaviours:this.$behaviours={};case this.$behaviours[e]:this.$behaviours[e]={}}this.$behaviours[e][f]=g};this.addBehaviours=function(f){for(var e in f){for(var g in f[e]){this.add(e,g,f[e][g])}}};this.remove=function(e){if(this.$behaviours&&this.$behaviours[e]){delete this.$behaviours[e]}};this.inherit=function(g,e){if(typeof g==="function"){var f=new g().getBehaviours(e)}else{var f=g.getBehaviours(e)}this.addBehaviours(f)};this.getBehaviours=function(g){if(!g){return this.$behaviours}else{var e={};for(var f=0;f<g.length;f++){if(this.$behaviours[g[f]]){e[g[f]]=this.$behaviours[g[f]]}}return e}}}).call(d.prototype);a.Behaviour=d});ace.define("ace/unicode",["require","exports","module"],function(c,b,d){b.packages={};a({L:"0041-005A0061-007A00AA00B500BA00C0-00D600D8-00F600F8-02C102C6-02D102E0-02E402EC02EE0370-037403760377037A-037D03860388-038A038C038E-03A103A3-03F503F7-0481048A-05250531-055605590561-058705D0-05EA05F0-05F20621-064A066E066F0671-06D306D506E506E606EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA07F407F507FA0800-0815081A082408280904-0939093D09500958-0961097109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E460E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EC60EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10A0-10C510D0-10FA10FC1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317D717DC1820-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541AA71B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C7D1CE9-1CEC1CEE-1CF11D00-1DBF1E00-1F151F18-1F1D1F20-1F451F48-1F4D1F50-1F571F591F5B1F5D1F5F-1F7D1F80-1FB41FB6-1FBC1FBE1FC2-1FC41FC6-1FCC1FD0-1FD31FD6-1FDB1FE0-1FEC1FF2-1FF41FF6-1FFC2071207F2090-209421022107210A-211321152119-211D212421262128212A-212D212F-2139213C-213F2145-2149214E218321842C00-2C2E2C30-2C5E2C60-2CE42CEB-2CEE2D00-2D252D30-2D652D6F2D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE2E2F300530063031-3035303B303C3041-3096309D-309F30A1-30FA30FC-30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A48CA4D0-A4FDA500-A60CA610-A61FA62AA62BA640-A65FA662-A66EA67F-A697A6A0-A6E5A717-A71FA722-A788A78BA78CA7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2A9CFAA00-AA28AA40-AA42AA44-AA4BAA60-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADB-AADDABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB00-FB06FB13-FB17FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF21-FF3AFF41-FF5AFF66-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",Ll:"0061-007A00AA00B500BA00DF-00F600F8-00FF01010103010501070109010B010D010F01110113011501170119011B011D011F01210123012501270129012B012D012F01310133013501370138013A013C013E014001420144014601480149014B014D014F01510153015501570159015B015D015F01610163016501670169016B016D016F0171017301750177017A017C017E-0180018301850188018C018D019201950199-019B019E01A101A301A501A801AA01AB01AD01B001B401B601B901BA01BD-01BF01C601C901CC01CE01D001D201D401D601D801DA01DC01DD01DF01E101E301E501E701E901EB01ED01EF01F001F301F501F901FB01FD01FF02010203020502070209020B020D020F02110213021502170219021B021D021F02210223022502270229022B022D022F02310233-0239023C023F0240024202470249024B024D024F-02930295-02AF037103730377037B-037D039003AC-03CE03D003D103D5-03D703D903DB03DD03DF03E103E303E503E703E903EB03ED03EF-03F303F503F803FB03FC0430-045F04610463046504670469046B046D046F04710473047504770479047B047D047F0481048B048D048F04910493049504970499049B049D049F04A104A304A504A704A904AB04AD04AF04B104B304B504B704B904BB04BD04BF04C204C404C604C804CA04CC04CE04CF04D104D304D504D704D904DB04DD04DF04E104E304E504E704E904EB04ED04EF04F104F304F504F704F904FB04FD04FF05010503050505070509050B050D050F05110513051505170519051B051D051F0521052305250561-05871D00-1D2B1D62-1D771D79-1D9A1E011E031E051E071E091E0B1E0D1E0F1E111E131E151E171E191E1B1E1D1E1F1E211E231E251E271E291E2B1E2D1E2F1E311E331E351E371E391E3B1E3D1E3F1E411E431E451E471E491E4B1E4D1E4F1E511E531E551E571E591E5B1E5D1E5F1E611E631E651E671E691E6B1E6D1E6F1E711E731E751E771E791E7B1E7D1E7F1E811E831E851E871E891E8B1E8D1E8F1E911E931E95-1E9D1E9F1EA11EA31EA51EA71EA91EAB1EAD1EAF1EB11EB31EB51EB71EB91EBB1EBD1EBF1EC11EC31EC51EC71EC91ECB1ECD1ECF1ED11ED31ED51ED71ED91EDB1EDD1EDF1EE11EE31EE51EE71EE91EEB1EED1EEF1EF11EF31EF51EF71EF91EFB1EFD1EFF-1F071F10-1F151F20-1F271F30-1F371F40-1F451F50-1F571F60-1F671F70-1F7D1F80-1F871F90-1F971FA0-1FA71FB0-1FB41FB61FB71FBE1FC2-1FC41FC61FC71FD0-1FD31FD61FD71FE0-1FE71FF2-1FF41FF61FF7210A210E210F2113212F21342139213C213D2146-2149214E21842C30-2C5E2C612C652C662C682C6A2C6C2C712C732C742C76-2C7C2C812C832C852C872C892C8B2C8D2C8F2C912C932C952C972C992C9B2C9D2C9F2CA12CA32CA52CA72CA92CAB2CAD2CAF2CB12CB32CB52CB72CB92CBB2CBD2CBF2CC12CC32CC52CC72CC92CCB2CCD2CCF2CD12CD32CD52CD72CD92CDB2CDD2CDF2CE12CE32CE42CEC2CEE2D00-2D25A641A643A645A647A649A64BA64DA64FA651A653A655A657A659A65BA65DA65FA663A665A667A669A66BA66DA681A683A685A687A689A68BA68DA68FA691A693A695A697A723A725A727A729A72BA72DA72F-A731A733A735A737A739A73BA73DA73FA741A743A745A747A749A74BA74DA74FA751A753A755A757A759A75BA75DA75FA761A763A765A767A769A76BA76DA76FA771-A778A77AA77CA77FA781A783A785A787A78CFB00-FB06FB13-FB17FF41-FF5A",Lu:"0041-005A00C0-00D600D8-00DE01000102010401060108010A010C010E01100112011401160118011A011C011E01200122012401260128012A012C012E01300132013401360139013B013D013F0141014301450147014A014C014E01500152015401560158015A015C015E01600162016401660168016A016C016E017001720174017601780179017B017D018101820184018601870189-018B018E-0191019301940196-0198019C019D019F01A001A201A401A601A701A901AC01AE01AF01B1-01B301B501B701B801BC01C401C701CA01CD01CF01D101D301D501D701D901DB01DE01E001E201E401E601E801EA01EC01EE01F101F401F6-01F801FA01FC01FE02000202020402060208020A020C020E02100212021402160218021A021C021E02200222022402260228022A022C022E02300232023A023B023D023E02410243-02460248024A024C024E03700372037603860388-038A038C038E038F0391-03A103A3-03AB03CF03D2-03D403D803DA03DC03DE03E003E203E403E603E803EA03EC03EE03F403F703F903FA03FD-042F04600462046404660468046A046C046E04700472047404760478047A047C047E0480048A048C048E04900492049404960498049A049C049E04A004A204A404A604A804AA04AC04AE04B004B204B404B604B804BA04BC04BE04C004C104C304C504C704C904CB04CD04D004D204D404D604D804DA04DC04DE04E004E204E404E604E804EA04EC04EE04F004F204F404F604F804FA04FC04FE05000502050405060508050A050C050E05100512051405160518051A051C051E0520052205240531-055610A0-10C51E001E021E041E061E081E0A1E0C1E0E1E101E121E141E161E181E1A1E1C1E1E1E201E221E241E261E281E2A1E2C1E2E1E301E321E341E361E381E3A1E3C1E3E1E401E421E441E461E481E4A1E4C1E4E1E501E521E541E561E581E5A1E5C1E5E1E601E621E641E661E681E6A1E6C1E6E1E701E721E741E761E781E7A1E7C1E7E1E801E821E841E861E881E8A1E8C1E8E1E901E921E941E9E1EA01EA21EA41EA61EA81EAA1EAC1EAE1EB01EB21EB41EB61EB81EBA1EBC1EBE1EC01EC21EC41EC61EC81ECA1ECC1ECE1ED01ED21ED41ED61ED81EDA1EDC1EDE1EE01EE21EE41EE61EE81EEA1EEC1EEE1EF01EF21EF41EF61EF81EFA1EFC1EFE1F08-1F0F1F18-1F1D1F28-1F2F1F38-1F3F1F48-1F4D1F591F5B1F5D1F5F1F68-1F6F1FB8-1FBB1FC8-1FCB1FD8-1FDB1FE8-1FEC1FF8-1FFB21022107210B-210D2110-211221152119-211D212421262128212A-212D2130-2133213E213F214521832C00-2C2E2C602C62-2C642C672C692C6B2C6D-2C702C722C752C7E-2C802C822C842C862C882C8A2C8C2C8E2C902C922C942C962C982C9A2C9C2C9E2CA02CA22CA42CA62CA82CAA2CAC2CAE2CB02CB22CB42CB62CB82CBA2CBC2CBE2CC02CC22CC42CC62CC82CCA2CCC2CCE2CD02CD22CD42CD62CD82CDA2CDC2CDE2CE02CE22CEB2CEDA640A642A644A646A648A64AA64CA64EA650A652A654A656A658A65AA65CA65EA662A664A666A668A66AA66CA680A682A684A686A688A68AA68CA68EA690A692A694A696A722A724A726A728A72AA72CA72EA732A734A736A738A73AA73CA73EA740A742A744A746A748A74AA74CA74EA750A752A754A756A758A75AA75CA75EA760A762A764A766A768A76AA76CA76EA779A77BA77DA77EA780A782A784A786A78BFF21-FF3A",Lt:"01C501C801CB01F21F88-1F8F1F98-1F9F1FA8-1FAF1FBC1FCC1FFC",Lm:"02B0-02C102C6-02D102E0-02E402EC02EE0374037A0559064006E506E607F407F507FA081A0824082809710E460EC610FC17D718431AA71C78-1C7D1D2C-1D611D781D9B-1DBF2071207F2090-20942C7D2D6F2E2F30053031-3035303B309D309E30FC-30FEA015A4F8-A4FDA60CA67FA717-A71FA770A788A9CFAA70AADDFF70FF9EFF9F",Lo:"01BB01C0-01C3029405D0-05EA05F0-05F20621-063F0641-064A066E066F0671-06D306D506EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA0800-08150904-0939093D09500958-096109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E450E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10D0-10FA1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317DC1820-18421844-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C771CE9-1CEC1CEE-1CF12135-21382D30-2D652D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE3006303C3041-3096309F30A1-30FA30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A014A016-A48CA4D0-A4F7A500-A60BA610-A61FA62AA62BA66EA6A0-A6E5A7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2AA00-AA28AA40-AA42AA44-AA4BAA60-AA6FAA71-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADBAADCABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF66-FF6FFF71-FF9DFFA0-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",M:"0300-036F0483-04890591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DE-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0903093C093E-094E0951-0955096209630981-098309BC09BE-09C409C709C809CB-09CD09D709E209E30A01-0A030A3C0A3E-0A420A470A480A4B-0A4D0A510A700A710A750A81-0A830ABC0ABE-0AC50AC7-0AC90ACB-0ACD0AE20AE30B01-0B030B3C0B3E-0B440B470B480B4B-0B4D0B560B570B620B630B820BBE-0BC20BC6-0BC80BCA-0BCD0BD70C01-0C030C3E-0C440C46-0C480C4A-0C4D0C550C560C620C630C820C830CBC0CBE-0CC40CC6-0CC80CCA-0CCD0CD50CD60CE20CE30D020D030D3E-0D440D46-0D480D4A-0D4D0D570D620D630D820D830DCA0DCF-0DD40DD60DD8-0DDF0DF20DF30E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F3E0F3F0F71-0F840F860F870F90-0F970F99-0FBC0FC6102B-103E1056-1059105E-10601062-10641067-106D1071-10741082-108D108F109A-109D135F1712-17141732-1734175217531772177317B6-17D317DD180B-180D18A91920-192B1930-193B19B0-19C019C819C91A17-1A1B1A55-1A5E1A60-1A7C1A7F1B00-1B041B34-1B441B6B-1B731B80-1B821BA1-1BAA1C24-1C371CD0-1CD21CD4-1CE81CED1CF21DC0-1DE61DFD-1DFF20D0-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66F-A672A67CA67DA6F0A6F1A802A806A80BA823-A827A880A881A8B4-A8C4A8E0-A8F1A926-A92DA947-A953A980-A983A9B3-A9C0AA29-AA36AA43AA4CAA4DAA7BAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE3-ABEAABECABEDFB1EFE00-FE0FFE20-FE26",Mn:"0300-036F0483-04870591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DF-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0902093C0941-0948094D0951-095509620963098109BC09C1-09C409CD09E209E30A010A020A3C0A410A420A470A480A4B-0A4D0A510A700A710A750A810A820ABC0AC1-0AC50AC70AC80ACD0AE20AE30B010B3C0B3F0B41-0B440B4D0B560B620B630B820BC00BCD0C3E-0C400C46-0C480C4A-0C4D0C550C560C620C630CBC0CBF0CC60CCC0CCD0CE20CE30D41-0D440D4D0D620D630DCA0DD2-0DD40DD60E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F71-0F7E0F80-0F840F860F870F90-0F970F99-0FBC0FC6102D-10301032-10371039103A103D103E10581059105E-10601071-1074108210851086108D109D135F1712-17141732-1734175217531772177317B7-17BD17C617C9-17D317DD180B-180D18A91920-19221927192819321939-193B1A171A181A561A58-1A5E1A601A621A65-1A6C1A73-1A7C1A7F1B00-1B031B341B36-1B3A1B3C1B421B6B-1B731B801B811BA2-1BA51BA81BA91C2C-1C331C361C371CD0-1CD21CD4-1CE01CE2-1CE81CED1DC0-1DE61DFD-1DFF20D0-20DC20E120E5-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66FA67CA67DA6F0A6F1A802A806A80BA825A826A8C4A8E0-A8F1A926-A92DA947-A951A980-A982A9B3A9B6-A9B9A9BCAA29-AA2EAA31AA32AA35AA36AA43AA4CAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE5ABE8ABEDFB1EFE00-FE0FFE20-FE26",Mc:"0903093E-09400949-094C094E0982098309BE-09C009C709C809CB09CC09D70A030A3E-0A400A830ABE-0AC00AC90ACB0ACC0B020B030B3E0B400B470B480B4B0B4C0B570BBE0BBF0BC10BC20BC6-0BC80BCA-0BCC0BD70C01-0C030C41-0C440C820C830CBE0CC0-0CC40CC70CC80CCA0CCB0CD50CD60D020D030D3E-0D400D46-0D480D4A-0D4C0D570D820D830DCF-0DD10DD8-0DDF0DF20DF30F3E0F3F0F7F102B102C10311038103B103C105610571062-10641067-106D108310841087-108C108F109A-109C17B617BE-17C517C717C81923-19261929-192B193019311933-193819B0-19C019C819C91A19-1A1B1A551A571A611A631A641A6D-1A721B041B351B3B1B3D-1B411B431B441B821BA11BA61BA71BAA1C24-1C2B1C341C351CE11CF2A823A824A827A880A881A8B4-A8C3A952A953A983A9B4A9B5A9BAA9BBA9BD-A9C0AA2FAA30AA33AA34AA4DAA7BABE3ABE4ABE6ABE7ABE9ABEAABEC",Me:"0488048906DE20DD-20E020E2-20E4A670-A672",N:"0030-003900B200B300B900BC-00BE0660-066906F0-06F907C0-07C90966-096F09E6-09EF09F4-09F90A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BF20C66-0C6F0C78-0C7E0CE6-0CEF0D66-0D750E50-0E590ED0-0ED90F20-0F331040-10491090-10991369-137C16EE-16F017E0-17E917F0-17F91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C5920702074-20792080-20892150-21822185-21892460-249B24EA-24FF2776-27932CFD30073021-30293038-303A3192-31953220-32293251-325F3280-328932B1-32BFA620-A629A6E6-A6EFA830-A835A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nd:"0030-00390660-066906F0-06F907C0-07C90966-096F09E6-09EF0A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BEF0C66-0C6F0CE6-0CEF0D66-0D6F0E50-0E590ED0-0ED90F20-0F291040-10491090-109917E0-17E91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C59A620-A629A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nl:"16EE-16F02160-21822185-218830073021-30293038-303AA6E6-A6EF",No:"00B200B300B900BC-00BE09F4-09F90BF0-0BF20C78-0C7E0D70-0D750F2A-0F331369-137C17F0-17F920702074-20792080-20892150-215F21892460-249B24EA-24FF2776-27932CFD3192-31953220-32293251-325F3280-328932B1-32BFA830-A835",P:"0021-00230025-002A002C-002F003A003B003F0040005B-005D005F007B007D00A100AB00B700BB00BF037E0387055A-055F0589058A05BE05C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F3A-0F3D0F850FD0-0FD4104A-104F10FB1361-13681400166D166E169B169C16EB-16ED1735173617D4-17D617D8-17DA1800-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD32010-20272030-20432045-20512053-205E207D207E208D208E2329232A2768-277527C527C627E6-27EF2983-299829D8-29DB29FC29FD2CF9-2CFC2CFE2CFF2E00-2E2E2E302E313001-30033008-30113014-301F3030303D30A030FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFD3EFD3FFE10-FE19FE30-FE52FE54-FE61FE63FE68FE6AFE6BFF01-FF03FF05-FF0AFF0C-FF0FFF1AFF1BFF1FFF20FF3B-FF3DFF3FFF5BFF5DFF5F-FF65",Pd:"002D058A05BE140018062010-20152E172E1A301C303030A0FE31FE32FE58FE63FF0D",Ps:"0028005B007B0F3A0F3C169B201A201E2045207D208D23292768276A276C276E27702772277427C527E627E827EA27EC27EE2983298529872989298B298D298F299129932995299729D829DA29FC2E222E242E262E283008300A300C300E3010301430163018301A301DFD3EFE17FE35FE37FE39FE3BFE3DFE3FFE41FE43FE47FE59FE5BFE5DFF08FF3BFF5BFF5FFF62",Pe:"0029005D007D0F3B0F3D169C2046207E208E232A2769276B276D276F27712773277527C627E727E927EB27ED27EF298429862988298A298C298E2990299229942996299829D929DB29FD2E232E252E272E293009300B300D300F3011301530173019301B301E301FFD3FFE18FE36FE38FE3AFE3CFE3EFE40FE42FE44FE48FE5AFE5CFE5EFF09FF3DFF5DFF60FF63",Pi:"00AB2018201B201C201F20392E022E042E092E0C2E1C2E20",Pf:"00BB2019201D203A2E032E052E0A2E0D2E1D2E21",Pc:"005F203F20402054FE33FE34FE4D-FE4FFF3F",Po:"0021-00230025-0027002A002C002E002F003A003B003F0040005C00A100B700BF037E0387055A-055F058905C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F850FD0-0FD4104A-104F10FB1361-1368166D166E16EB-16ED1735173617D4-17D617D8-17DA1800-18051807-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD3201620172020-20272030-2038203B-203E2041-20432047-205120532055-205E2CF9-2CFC2CFE2CFF2E002E012E06-2E082E0B2E0E-2E162E182E192E1B2E1E2E1F2E2A-2E2E2E302E313001-3003303D30FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFE10-FE16FE19FE30FE45FE46FE49-FE4CFE50-FE52FE54-FE57FE5F-FE61FE68FE6AFE6BFF01-FF03FF05-FF07FF0AFF0CFF0EFF0FFF1AFF1BFF1FFF20FF3CFF61FF64FF65",S:"0024002B003C-003E005E0060007C007E00A2-00A900AC00AE-00B100B400B600B800D700F702C2-02C502D2-02DF02E5-02EB02ED02EF-02FF03750384038503F604820606-0608060B060E060F06E906FD06FE07F609F209F309FA09FB0AF10B700BF3-0BFA0C7F0CF10CF20D790E3F0F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-139917DB194019E0-19FF1B61-1B6A1B74-1B7C1FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE20442052207A-207C208A-208C20A0-20B8210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B2140-2144214A-214D214F2190-2328232B-23E82400-24262440-244A249C-24E92500-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE27C0-27C427C7-27CA27CC27D0-27E527F0-29822999-29D729DC-29FB29FE-2B4C2B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F309B309C319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A700-A716A720A721A789A78AA828-A82BA836-A839AA77-AA79FB29FDFCFDFDFE62FE64-FE66FE69FF04FF0BFF1C-FF1EFF3EFF40FF5CFF5EFFE0-FFE6FFE8-FFEEFFFCFFFD",Sm:"002B003C-003E007C007E00AC00B100D700F703F60606-060820442052207A-207C208A-208C2140-2144214B2190-2194219A219B21A021A321A621AE21CE21CF21D221D421F4-22FF2308-230B23202321237C239B-23B323DC-23E125B725C125F8-25FF266F27C0-27C427C7-27CA27CC27D0-27E527F0-27FF2900-29822999-29D729DC-29FB29FE-2AFF2B30-2B442B47-2B4CFB29FE62FE64-FE66FF0BFF1C-FF1EFF5CFF5EFFE2FFE9-FFEC",Sc:"002400A2-00A5060B09F209F309FB0AF10BF90E3F17DB20A0-20B8A838FDFCFE69FF04FFE0FFE1FFE5FFE6",Sk:"005E006000A800AF00B400B802C2-02C502D2-02DF02E5-02EB02ED02EF-02FF0375038403851FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE309B309CA700-A716A720A721A789A78AFF3EFF40FFE3",So:"00A600A700A900AE00B000B60482060E060F06E906FD06FE07F609FA0B700BF3-0BF80BFA0C7F0CF10CF20D790F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-1399194019E0-19FF1B61-1B6A1B74-1B7C210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B214A214C214D214F2195-2199219C-219F21A121A221A421A521A7-21AD21AF-21CD21D021D121D321D5-21F32300-2307230C-231F2322-2328232B-237B237D-239A23B4-23DB23E2-23E82400-24262440-244A249C-24E92500-25B625B8-25C025C2-25F72600-266E2670-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE2800-28FF2B00-2B2F2B452B462B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A828-A82BA836A837A839AA77-AA79FDFDFFE4FFE8FFEDFFEEFFFCFFFD",Z:"002000A01680180E2000-200A20282029202F205F3000",Zs:"002000A01680180E2000-200A202F205F3000",Zl:"2028",Zp:"2029",C:"0000-001F007F-009F00AD03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-0605061C061D0620065F06DD070E070F074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17B417B517DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF200B-200F202A-202E2060-206F20722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-F8FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFD-FF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFFBFFFEFFFF",Cc:"0000-001F007F-009F",Cf:"00AD0600-060306DD070F17B417B5200B-200F202A-202E2060-2064206A-206FFEFFFFF9-FFFB",Co:"E000-F8FF",Cs:"D800-DFFF",Cn:"03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-05FF06040605061C061D0620065F070E074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF2065-206920722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-D7FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFDFEFEFF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFF8FFFEFFFF"});function a(g){var f=/\w{4}/g;for(var e in g){b.packages[e]=g[e].replace(f,"\\u$&")}}});ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/range","ace/anchor"],function(d,c,e){var g=d("./lib/oop");var f=d("./lib/event_emitter").EventEmitter;var i=d("./range").Range;var a=d("./anchor").Anchor;var b=function(j){this.$lines=[];if(Array.isArray(j)){this.insertLines(0,j)}else{if(j.length==0){this.$lines=[""]}else{this.insert({row:0,column:0},j)}}};(function(){g.implement(this,f);this.setValue=function(k){var j=this.getLength();this.remove(new i(0,0,j,this.getLine(j-1).length));this.insert({row:0,column:0},k)};this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())};this.createAnchor=function(k,j){return new a(this,k,j)};if("aaa".split(/a/).length==0){this.$split=function(j){return j.replace(/\r\n|\r/g,"\n").split("\n")}}else{this.$split=function(j){return j.split(/\r\n|\r|\n/)}}this.$detectNewLine=function(k){var j=k.match(/^.*?(\r\n|\r|\n)/m);if(j){this.$autoNewLine=j[1]}else{this.$autoNewLine="\n"}};this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\r\n";case"unix":return"\n";case"auto":return this.$autoNewLine}};this.$autoNewLine="\n";this.$newLineMode="auto";this.setNewLineMode=function(j){if(this.$newLineMode===j){return}this.$newLineMode=j};this.getNewLineMode=function(){return this.$newLineMode};this.isNewLine=function(j){return(j=="\r\n"||j=="\r"||j=="\n")};this.getLine=function(j){return this.$lines[j]||""};this.getLines=function(k,j){return this.$lines.slice(k,j+1)};this.getAllLines=function(){return this.getLines(0,this.getLength())};this.getLength=function(){return this.$lines.length};this.getTextRange=function(k){if(k.start.row==k.end.row){return this.$lines[k.start.row].substring(k.start.column,k.end.column)}else{var j=[];j.push(this.$lines[k.start.row].substring(k.start.column));j.push.apply(j,this.getLines(k.start.row+1,k.end.row-1));j.push(this.$lines[k.end.row].substring(0,k.end.column));return j.join(this.getNewLineCharacter())}};this.$clipPosition=function(j){var k=this.getLength();if(j.row>=k){j.row=Math.max(0,k-1);j.column=this.getLine(k-1).length}return j};this.insert=function(j,n){if(n.length==0){return j}j=this.$clipPosition(j);if(this.getLength()<=1){this.$detectNewLine(n)}var l=this.$split(n);var m=l.splice(0,1)[0];var k=l.length==0?null:l.splice(l.length-1,1)[0];j=this.insertInLine(j,m);if(k!==null){j=this.insertNewLine(j);j=this.insertLines(j.row,l);j=this.insertInLine(j,k||"")}return j};this.insertLines=function(m,j){if(j.length==0){return{row:m,column:0}}var l=[m,0];l.push.apply(l,j);this.$lines.splice.apply(this.$lines,l);var k=new i(m,0,m+j.length,0);var n={action:"insertLines",range:k,lines:j};this._emit("change",{data:n});return k.end};this.insertNewLine=function(j){j=this.$clipPosition(j);var l=this.$lines[j.row]||"";this.$lines[j.row]=l.substring(0,j.column);this.$lines.splice(j.row+1,0,l.substring(j.column,l.length));var k={row:j.row+1,column:0};var m={action:"insertText",range:i.fromPoints(j,k),text:this.getNewLineCharacter()};this._emit("change",{data:m});return k};this.insertInLine=function(j,m){if(m.length==0){return j}var l=this.$lines[j.row]||"";this.$lines[j.row]=l.substring(0,j.column)+m+l.substring(j.column);var k={row:j.row,column:j.column+m.length};var n={action:"insertText",range:i.fromPoints(j,k),text:m};this._emit("change",{data:n});return k};this.remove=function(k){k.start=this.$clipPosition(k.start);k.end=this.$clipPosition(k.end);if(k.isEmpty()){return k.start}var n=k.start.row;var l=k.end.row;if(k.isMultiLine()){var m=k.start.column==0?n:n+1;var j=l-1;if(k.end.column>0){this.removeInLine(l,0,k.end.column)}if(j>=m){this.removeLines(m,j)}if(m!=n){this.removeInLine(n,k.start.column,this.getLine(n).length);this.removeNewLine(k.start.row)}}else{this.removeInLine(n,k.start.column,k.end.column)}return k.start};this.removeInLine=function(n,l,q){if(l==q){return}var k=new i(n,l,n,q);var j=this.getLine(n);var m=j.substring(l,q);var p=j.substring(0,l)+j.substring(q,j.length);this.$lines.splice(n,1,p);var o={action:"removeText",range:k,text:m};this._emit("change",{data:o});return k.start};this.removeLines=function(m,k){var j=new i(m,0,k+1,0);var l=this.$lines.splice(m,k-m+1);var n={action:"removeLines",range:j,nl:this.getNewLineCharacter(),lines:l};this._emit("change",{data:n});return l};this.removeNewLine=function(n){var m=this.getLine(n);var j=this.getLine(n+1);var l=new i(n,m.length,n+1,0);var k=m+j;this.$lines.splice(n,2,k);var o={action:"removeText",range:l,text:this.getNewLineCharacter()};this._emit("change",{data:o})};this.replace=function(k,l){if(l.length==0&&k.isEmpty()){return k.start}if(l==this.getTextRange(k)){return k.end}this.remove(k);if(l){var j=this.insert(k.start,l)}else{j=k.start}return j};this.applyDeltas=function(l){for(var k=0;k<l.length;k++){var m=l[k];var j=i.fromPoints(m.range.start,m.range.end);if(m.action=="insertLines"){this.insertLines(j.start.row,m.lines)}else{if(m.action=="insertText"){this.insert(j.start,m.text)}else{if(m.action=="removeLines"){this.removeLines(j.start.row,j.end.row-1)}else{if(m.action=="removeText"){this.remove(j)}}}}}};this.revertDeltas=function(l){for(var k=l.length-1;k>=0;k--){var m=l[k];var j=i.fromPoints(m.range.start,m.range.end);if(m.action=="insertLines"){this.removeLines(j.start.row,j.end.row-1)}else{if(m.action=="insertText"){this.remove(j)}else{if(m.action=="removeLines"){this.insertLines(j.start.row,m.lines)}else{if(m.action=="removeText"){this.insert(j.start,m.text)}}}}}}}).call(b.prototype);c.Document=b});ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(c,b,d){var f=c("./lib/oop");var e=c("./lib/event_emitter").EventEmitter;var a=b.Anchor=function(i,j,g){this.document=i;if(typeof g=="undefined"){this.setPosition(j.row,j.column)}else{this.setPosition(j,g)}this.$onChange=this.onChange.bind(this);i.on("change",this.$onChange)};(function(){f.implement(this,e);this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)};this.getDocument=function(){return this.document};this.onChange=function(j){var l=j.data;var g=l.range;if(g.start.row==g.end.row&&g.start.row!=this.row){return}if(g.start.row>this.row){return}if(g.start.row==this.row&&g.start.column>this.column){return}var k=this.row;var i=this.column;if(l.action==="insertText"){if(g.start.row===k&&g.start.column<=i){if(g.start.row===g.end.row){i+=g.end.column-g.start.column}else{i-=g.start.column;k+=g.end.row-g.start.row}}else{if(g.start.row!==g.end.row&&g.start.row<k){k+=g.end.row-g.start.row}}}else{if(l.action==="insertLines"){if(g.start.row<=k){k+=g.end.row-g.start.row}}else{if(l.action=="removeText"){if(g.start.row==k&&g.start.column<i){if(g.end.column>=i){i=g.start.column}else{i=Math.max(0,i-(g.end.column-g.start.column))}}else{if(g.start.row!==g.end.row&&g.start.row<k){if(g.end.row==k){i=Math.max(0,i-g.end.column)+g.start.column}k-=(g.end.row-g.start.row)}else{if(g.end.row==k){k-=g.end.row-g.start.row;i=Math.max(0,i-g.end.column)+g.start.column}}}}else{if(l.action=="removeLines"){if(g.start.row<=k){if(g.end.row<=k){k-=g.end.row-g.start.row}else{k=g.start.row;i=0}}}}}}this.setPosition(k,i,true)};this.setPosition=function(k,j,g){var l;if(g){l={row:k,column:j}}else{l=this.$clipPositionToDocument(k,j)}if(this.row==l.row&&this.column==l.column){return}var i={row:this.row,column:this.column};this.row=l.row;this.column=l.column;this._emit("change",{old:i,value:l})};this.detach=function(){this.document.removeEventListener("change",this.$onChange)};this.$clipPositionToDocument=function(i,g){var j={};if(i>=this.document.getLength()){j.row=Math.max(0,this.document.getLength()-1);j.column=this.document.getLine(j.row).length}else{if(i<0){j.row=0;j.column=0}else{j.row=i;j.column=Math.min(this.document.getLine(j.row).length,Math.max(0,g))}}if(g<0){j.column=0}return j}}).call(a.prototype)});ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(c,b,d){var f=c("./lib/oop");var e=c("./lib/event_emitter").EventEmitter;var a=function(j,i){this.running=false;this.lines=[];this.currentLine=0;this.tokenizer=j;var g=this;this.$worker=function(){if(!g.running){return}var n=new Date();var o=g.currentLine;var m=g.doc;var l=0;var k=m.getLength();while(g.currentLine<k){g.lines[g.currentLine]=g.$tokenizeRows(g.currentLine,g.currentLine)[0];g.currentLine++;l+=1;if((l%5==0)&&(new Date()-n)>20){g.fireUpdateEvent(o,g.currentLine-1);g.running=setTimeout(g.$worker,20);return}}g.running=false;g.fireUpdateEvent(o,k-1)}};(function(){f.implement(this,e);this.setTokenizer=function(g){this.tokenizer=g;this.lines=[];this.start(0)};this.setDocument=function(g){this.doc=g;this.lines=[];this.stop()};this.fireUpdateEvent=function(j,g){var i={first:j,last:g};this._emit("update",{data:i})};this.start=function(g){this.currentLine=Math.min(g||0,this.currentLine,this.doc.getLength());this.lines.splice(this.currentLine,this.lines.length);this.stop();this.running=setTimeout(this.$worker,700)};this.stop=function(){if(this.running){clearTimeout(this.running)}this.running=false};this.getTokens=function(i,g){return this.$tokenizeRows(i,g)};this.getState=function(g){return this.$tokenizeRows(g,g)[0].state};this.$tokenizeRows=function(o,j){if(!this.doc||isNaN(o)||isNaN(j)){return[{"state":"start","tokens":[]}]}var l=[];var k="start";var i=false;if(o>0&&this.lines[o-1]){k=this.lines[o-1].state;i=true}else{if(o==0){k="start";i=true}else{if(this.lines.length>0){k=this.lines[this.lines.length-1].state}}}var g=this.doc.getLines(o,j);for(var n=o;n<=j;n++){if(!this.lines[n]){var m=this.tokenizer.getLineTokens(g[n-o]||"",k);var k=m.state;l.push(m);if(i){this.lines[n]=m}}else{var m=this.lines[n];k=m.state;l.push(m)}}return l}}).call(a.prototype);b.BackgroundTokenizer=a});ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator"],function(d,c,e){var g=d("../range").Range;var i=d("./fold_line").FoldLine;var a=d("./fold").Fold;var f=d("../token_iterator").TokenIterator;function b(){this.getFoldAt=function(p,m,l){var o=this.getFoldLine(p);if(!o){return null}var n=o.folds;for(var k=0;k<n.length;k++){var j=n[k];if(j.range.contains(p,m)){if(l==1&&j.range.isEnd(p,m)){continue}else{if(l==-1&&j.range.isStart(p,m)){continue}}return j}}};this.getFoldsInRange=function(q){q=q.clone();var l=q.start;var n=q.end;var m=this.$foldData;var k=[];l.column+=1;n.column-=1;for(var p=0;p<m.length;p++){var s=m[p].range.compareRange(q);if(s==2){continue}else{if(s==-2){break}}var t=m[p].folds;for(var o=0;o<t.length;o++){var r=t[o];s=r.range.compareRange(q);if(s==-2){break}else{if(s==2){continue}else{if(s==42){break}}}k.push(r)}}return k};this.getAllFolds=function(){var o=[];var m=this.$foldData;function n(j){o.push(j);if(!j.subFolds){return}for(var p=0;p<j.subFolds.length;p++){n(j.subFolds[p])}}for(var l=0;l<m.length;l++){for(var k=0;k<m[l].folds.length;k++){n(m[l].folds[k])}}return o};this.getFoldStringAt=function(r,k,j,q){q=q||this.getFoldLine(r);if(!q){return null}var m={end:{column:0}};var o,n;for(var l=0;l<q.folds.length;l++){n=q.folds[l];var p=n.range.compareEnd(r,k);if(p==-1){o=this.getLine(n.start.row).substring(m.end.column,n.start.column);break}else{if(p===0){return null}}m=n}if(!o){o=this.getLine(n.start.row).substring(m.end.column)}if(j==-1){return o.substring(0,k-m.end.column)}else{if(j==1){return o.substring(k-m.end.column)}else{return o}}};this.getFoldLine=function(j,k){var m=this.$foldData;var l=0;if(k){l=m.indexOf(k)}if(l==-1){l=0}for(l;l<m.length;l++){var n=m[l];if(n.start.row<=j&&n.end.row>=j){return n}else{if(n.end.row>j){return null}}}return null};this.getNextFoldLine=function(j,k){var m=this.$foldData;var l=0;if(k){l=m.indexOf(k)}if(l==-1){l=0}for(l;l<m.length;l++){var n=m[l];if(n.end.row>=j){return n}}return null};this.getFoldedRowCount=function(p,n){var m=this.$foldData,k=n-p+1;for(var l=0;l<m.length;l++){var o=m[l],j=o.end.row,q=o.start.row;if(j>=n){if(q<n){if(q>=p){k-=n-q}else{k=0}}break}else{if(j>=p){if(q>=p){k-=j-q}else{k-=j-p+1}}}}return k};this.$addFoldLine=function(j){this.$foldData.push(j);this.$foldData.sort(function(l,k){return l.start.row-k.start.row});return j};this.addFold=function(t,n){var j=this.$foldData;var r=false;var q;if(t instanceof a){q=t}else{q=new a(n,t)}this.$clipRangeToDocument(q.range);var w=q.start.row;var k=q.start.column;var l=q.end.row;var p=q.end.column;if(q.placeholder.length<2){throw"Placeholder has to be at least 2 characters"}if(w==l&&p-k<2){throw"The range has to be at least 2 characters width"}var o=this.getFoldAt(w,k,1);var v=this.getFoldAt(l,p,-1);if(o&&v==o){return o.addSubFold(q)}if((o&&!o.range.isStart(w,k))||(v&&!v.range.isEnd(l,p))){throw"A fold can't intersect already existing fold"+q.range+o.range}var u=this.getFoldsInRange(q.range);if(u.length>0){this.removeFolds(u);q.subFolds=u}for(var m=0;m<j.length;m++){var s=j[m];if(l==s.start.row){s.addFold(q);r=true;break}else{if(w==s.end.row){s.addFold(q);r=true;if(!q.sameRow){var x=j[m+1];if(x&&x.start.row==l){s.merge(x);break}}break}else{if(l<=s.start.row){break}}}}if(!r){s=this.$addFoldLine(new i(this.$foldData,q))}if(this.$useWrapMode){this.$updateWrapData(s.start.row,s.start.row)}this.$modified=true;this._emit("changeFold",{data:q});return q};this.addFolds=function(j){j.forEach(function(k){this.addFold(k)},this)};this.removeFold=function(m){var p=m.foldLine;var l=p.start.row;var k=p.end.row;var n=this.$foldData;var o=p.folds;if(o.length==1){n.splice(n.indexOf(p),1)}else{if(p.range.isEnd(m.end.row,m.end.column)){o.pop();p.end.row=o[o.length-1].end.row;p.end.column=o[o.length-1].end.column}else{if(p.range.isStart(m.start.row,m.start.column)){o.shift();p.start.row=o[0].start.row;p.start.column=o[0].start.column}else{if(m.sameRow){o.splice(o.indexOf(m),1)}else{var j=p.split(m.start.row,m.start.column);o=j.folds;o.shift();j.start.row=o[0].start.row;j.start.column=o[0].start.column}}}}if(this.$useWrapMode){this.$updateWrapData(l,k)}this.$modified=true;this._emit("changeFold",{data:m})};this.removeFolds=function(l){var j=[];for(var k=0;k<l.length;k++){j.push(l[k])}j.forEach(function(m){this.removeFold(m)},this);this.$modified=true};this.expandFold=function(j){this.removeFold(j);j.subFolds.forEach(function(k){this.addFold(k)},this);j.subFolds=[]};this.expandFolds=function(j){j.forEach(function(k){this.expandFold(k)},this)};this.unfold=function(j,l){var k,m;if(j==null){k=new g(0,0,this.getLength(),0)}else{if(typeof j=="number"){k=new g(j,0,j,this.getLine(j).length)}else{if("row" in j){k=g.fromPoints(j,j)}else{k=j}}}m=this.getFoldsInRange(k);if(l){this.removeFolds(m)}else{while(m.length){this.expandFolds(m);m=this.getFoldsInRange(k)}}};this.isRowFolded=function(j,k){return !!this.getFoldLine(j,k)};this.getRowFoldEnd=function(j,k){var l=this.getFoldLine(j,k);return(l?l.end.row:j)};this.getFoldDisplayLine=function(o,k,p,j,m){if(j==null){j=o.start.row;m=0}if(k==null){k=o.end.row;p=this.getLine(k).length}var n=this.doc;var l="";o.walk(function(t,s,r,q){if(s<j){return}else{if(s==j){if(r<m){return}q=Math.max(m,q)}}if(t){l+=t}else{l+=n.getLine(s).substring(q,r)}}.bind(this),k,p);return l};this.getDisplayLine=function(n,o,k,l){var m=this.getFoldLine(n);if(!m){var j;j=this.doc.getLine(n);return j.substring(l||0,o||j.length)}else{return this.getFoldDisplayLine(m,n,o,k,l)}};this.$cloneFoldData=function(){var j=[];j=this.$foldData.map(function(l){var k=l.folds.map(function(m){return m.clone()});return new i(j,k)});return j};this.toggleFold=function(l){var m=this.selection;var j=m.getRange();var k;var q;if(j.isEmpty()){var p=j.start;k=this.getFoldAt(p.row,p.column);if(k){this.expandFold(k);return}else{if(q=this.findMatchingBracket(p)){if(j.comparePoint(q)==1){j.end=q}else{j.start=q;j.start.column++;j.end.column--}}else{if(q=this.findMatchingBracket({row:p.row,column:p.column+1})){if(j.comparePoint(q)==1){j.end=q}else{j.start=q}j.start.column++}else{j=this.getCommentFoldRange(p.row,p.column)||j}}}}else{var n=this.getFoldsInRange(j);if(l&&n.length){this.expandFolds(n);return}else{if(n.length==1){k=n[0]}}}if(!k){k=this.getFoldAt(j.start.row,j.start.column)}if(k&&k.range.toString()==j.toString()){this.expandFold(k);return}var o="...";if(!j.isMultiLine()){o=this.getTextRange(j);if(o.length<4){return}o=o.trim().substring(0,2)+".."}this.addFold(o,j)};this.getCommentFoldRange=function(o,n){var m=new f(this,o,n);var k=m.getCurrentToken();if(k&&/^comment|string/.test(k.type)){var j=new g();var l=new RegExp(k.type.replace(/\..*/,"\\."));do{k=m.stepBackward()}while(k&&l.test(k.type));m.stepForward();j.start.row=m.getCurrentTokenRow();j.start.column=m.getCurrentTokenColumn()+2;m=new f(this,o,n);do{k=m.stepForward()}while(k&&l.test(k.type));k=m.stepBackward();j.end.row=m.getCurrentTokenRow();j.end.column=m.getCurrentTokenColumn()+k.value.length;return j}};this.foldAll=function(l,k){var m=this.foldWidgets;k=k||this.getLength();for(var o=l||0;o<k;o++){if(m[o]==null){m[o]=this.getFoldWidget(o)}if(m[o]!="start"){continue}var j=this.getFoldWidgetRange(o);if(j&&j.end.row<k){try{this.addFold("...",j)}catch(n){}}}};this.$foldStyles={"manual":1,"markbegin":1,"markbeginend":1};this.$foldStyle="markbegin";this.setFoldStyle=function(j){if(!this.$foldStyles[j]){throw new Error("invalid fold style: "+j+"["+Object.keys(this.$foldStyles).join(", ")+"]")}if(this.$foldStyle==j){return}this.$foldStyle=j;if(j=="manual"){this.unfold()}var k=this.$foldMode;this.$setFolding(null);this.$setFolding(k)};this.$setFolding=function(j){if(this.$foldMode==j){return}this.$foldMode=j;this.removeListener("change",this.$updateFoldWidgets);this._emit("changeAnnotation");if(!j||this.$foldStyle=="manual"){this.foldWidgets=null;return}this.foldWidgets=[];this.getFoldWidget=j.getFoldWidget.bind(j,this,this.$foldStyle);this.getFoldWidgetRange=j.getFoldWidgetRange.bind(j,this,this.$foldStyle);this.$updateFoldWidgets=this.updateFoldWidgets.bind(this);this.on("change",this.$updateFoldWidgets)};this.onFoldWidgetClick=function(q,p){var n=this.getFoldWidget(q);var j=this.getLine(q);var m=p.shiftKey;var o=m||p.ctrlKey||p.altKey||p.metaKey;var l;if(n=="end"){l=this.getFoldAt(q,0,-1)}else{l=this.getFoldAt(q,j.length,1)}if(l){if(o){this.removeFold(l)}else{this.expandFold(l)}return}var k=this.getFoldWidgetRange(q);if(k){if(!k.isMultiLine()){l=this.getFoldAt(k.start.row,k.start.column,1);if(l&&k.isEequal(l.range)){this.removeFold(l);return}}if(!m){this.addFold("...",k)}if(o){this.foldAll(k.start.row+1,k.end.row)}}else{if(o){this.foldAll(q+1,this.getLength())}p.target.className+=" invalid"}};this.updateFoldWidgets=function(m){var o=m.data;var k=o.range;var n=k.start.row;var j=k.end.row-n;if(j===0){this.foldWidgets[n]=null}else{if(o.action=="removeText"||o.action=="removeLines"){this.foldWidgets.splice(n,j+1,null)}else{var l=Array(j+1);l.unshift(n,1);this.foldWidgets.splice.apply(this.foldWidgets,l)}}}}c.Folding=b});ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(b,a,c){var d=b("../range").Range;function e(f,i){this.foldData=f;if(Array.isArray(i)){this.folds=i}else{i=this.folds=[i]}var g=i[i.length-1];this.range=new d(i[0].start.row,i[0].start.column,g.end.row,g.end.column);this.start=this.range.start;this.end=this.range.end;this.folds.forEach(function(j){j.setFoldLine(this)},this)}(function(){this.shiftRow=function(f){this.start.row+=f;this.end.row+=f;this.folds.forEach(function(g){g.start.row+=f;g.end.row+=f})};this.addFold=function(f){if(f.sameRow){if(f.start.row<this.startRow||f.endRow>this.endRow){throw"Can't add a fold to this FoldLine as it has no connection"}this.folds.push(f);this.folds.sort(function(i,g){return -i.range.compareEnd(g.start.row,g.start.column)});if(this.range.compareEnd(f.start.row,f.start.column)>0){this.end.row=f.end.row;this.end.column=f.end.column}else{if(this.range.compareStart(f.end.row,f.end.column)<0){this.start.row=f.start.row;this.start.column=f.start.column}}}else{if(f.start.row==this.end.row){this.folds.push(f);this.end.row=f.end.row;this.end.column=f.end.column}else{if(f.end.row==this.start.row){this.folds.unshift(f);this.start.row=f.start.row;this.start.column=f.start.column}else{throw"Trying to add fold to FoldRow that doesn't have a matching row"}}}f.foldLine=this};this.containsRow=function(f){return f>=this.start.row&&f<=this.end.row};this.walk=function(q,g,m){var f=0,p=this.folds,n,k,o,l=true;if(g==null){g=this.end.row;m=this.end.column}for(var j=0;j<p.length;j++){n=p[j];k=n.range.compareStart(g,m);if(k==-1){q(null,g,m,f,l);return}o=q(null,n.start.row,n.start.column,f,l);o=!o&&q(n.placeholder,n.start.row,n.start.column,f);if(o||k==0){return}l=!n.sameRow;f=n.end.column}q(null,g,m,f,l)};this.getNextFoldTo=function(l,j){var f,k;for(var g=0;g<this.folds.length;g++){f=this.folds[g];k=f.range.compareEnd(l,j);if(k==-1){return{fold:f,kind:"after"}}else{if(k==0){return{fold:f,kind:"inside"}}}}return null};this.addRemoveChars=function(n,l,f){var j=this.getNextFoldTo(n,l),g,m;if(j){g=j.fold;if(j.kind=="inside"&&g.start.column!=l&&g.start.row!=n){throw"Moving characters inside of a fold should never be reached"}else{if(g.start.row==n){m=this.folds;var k=m.indexOf(g);if(k==0){this.start.column+=f}for(k;k<m.length;k++){g=m[k];g.start.column+=f;if(!g.sameRow){return}g.end.column+=f}this.end.column+=f}}}};this.split=function(o,m){var j=this.getNextFoldTo(o,m).fold,n=this.folds;var l=this.foldData;if(!j){return null}var k=n.indexOf(j);var g=n[k-1];this.end.row=g.end.row;this.end.column=g.end.column;n=n.splice(k,n.length-k);var f=new e(l,n);l.splice(l.indexOf(this)+1,0,f);return f};this.merge=function(j){var k=j.folds;for(var g=0;g<k.length;g++){this.addFold(k[g])}var f=this.foldData;f.splice(f.indexOf(j),1)};this.toString=function(){var f=[this.range.toString()+": ["];this.folds.forEach(function(g){f.push("  "+g.toString())});f.push("]");return f.join("\n")};this.idxToPosition=function(f){var k=0;var g;for(var j=0;j<this.folds.length;j++){var g=this.folds[j];f-=g.start.column-k;if(f<0){return{row:g.start.row,column:g.start.column+f}}f-=g.placeholder.length;if(f<0){return g.start}k=g.end.column}return{row:this.end.row,column:this.end.column+f}}}).call(e.prototype);a.FoldLine=e});ace.define("ace/edit_session/fold",["require","exports","module"],function(c,b,d){var a=b.Fold=function(e,f){this.foldLine=null;this.placeholder=f;this.range=e;this.start=e.start;this.end=e.end;this.sameRow=e.start.row==e.end.row;this.subFolds=[]};(function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()};this.setFoldLine=function(e){this.foldLine=e;this.subFolds.forEach(function(f){f.setFoldLine(e)})};this.clone=function(){var e=this.range.clone();var f=new a(e,this.placeholder);this.subFolds.forEach(function(g){f.subFolds.push(g.clone())});return f};this.addSubFold=function(l){if(this.range.isEequal(l)){return this}if(!this.range.containsRange(l)){throw"A fold can't intersect already existing fold"+l.range+this.range}var p=l.range.start.row,e=l.range.start.column;for(var k=0,n=-1;k<this.subFolds.length;k++){n=this.subFolds[k].range.compare(p,e);if(n!=1){break}}var o=this.subFolds[k];if(n==0){return o.addSubFold(l)}var p=l.range.end.row,e=l.range.end.column;for(var f=k,n=-1;f<this.subFolds.length;f++){n=this.subFolds[f].range.compare(p,e);if(n!=1){break}}var g=this.subFolds[f];if(n==0){throw"A fold can't intersect already existing fold"+l.range+this.range}var m=this.subFolds.splice(k,f-k,l);l.setFoldLine(this.foldLine);return l}}).call(a.prototype)});ace.define("ace/token_iterator",["require","exports","module"],function(b,a,c){var d=function(g,f,i){this.$session=g;this.$row=f;this.$rowTokens=g.getTokens(f,f)[0].tokens;var e=g.getTokenAt(f,i);this.$tokenIndex=e?e.index:-1};(function(){this.stepBackward=function(){this.$tokenIndex-=1;while(this.$tokenIndex<0){this.$row-=1;if(this.$row<0){this.$row=0;return null}this.$rowTokens=this.$session.getTokens(this.$row,this.$row)[0].tokens;this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]};this.stepForward=function(){var e=this.$session.getLength();this.$tokenIndex+=1;while(this.$tokenIndex>=this.$rowTokens.length){this.$row+=1;if(this.$row>=e){this.$row=e-1;return null}this.$rowTokens=this.$session.getTokens(this.$row,this.$row)[0].tokens;this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]};this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]};this.getCurrentTokenRow=function(){return this.$row};this.getCurrentTokenColumn=function(){var f=this.$rowTokens;var e=this.$tokenIndex;var g=f[e].start;if(g!==undefined){return g}g=0;while(e>0){e-=1;g+=f[e].value.length}return g}}).call(d.prototype);a.TokenIterator=d});ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator"],function(c,b,d){var e=c("../token_iterator").TokenIterator;function a(){this.findMatchingBracket=function(f){if(f.column==0){return null}var i=this.getLine(f.row).charAt(f.column-1);if(i==""){return null}var g=i.match(/([\(\[\{])|([\)\]\}])/);if(!g){return null}if(g[1]){return this.$findClosingBracket(g[1],f)}else{return this.$findOpeningBracket(g[2],f)}};this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{"};this.$findOpeningBracket=function(f,m){var j=this.$brackets[f];var k=1;var l=new e(this,m.row,m.column);var g=l.getCurrentToken();if(!g){return null}var p=new RegExp("(\\.?"+g.type.replace(".","|").replace("rparen","lparen|rparen")+")+");var n=m.column-l.getCurrentTokenColumn()-2;var o=g.value;while(true){while(n>=0){var i=o.charAt(n);if(i==j){k-=1;if(k==0){return{row:l.getCurrentTokenRow(),column:n+l.getCurrentTokenColumn()}}}else{if(i==f){k+=1}}n-=1}do{g=l.stepBackward()}while(g&&!p.test(g.type));if(g==null){break}o=g.value;n=o.length-1}return null};this.$findClosingBracket=function(f,m){var g=this.$brackets[f];var k=1;var l=new e(this,m.row,m.column);var i=l.getCurrentToken();if(!i){return null}var q=new RegExp("(\\.?"+i.type.replace(".","|").replace("lparen","lparen|rparen")+")+");var n=m.column-l.getCurrentTokenColumn();while(true){var o=i.value;var p=o.length;while(n<p){var j=o.charAt(n);if(j==g){k-=1;if(k==0){return{row:l.getCurrentTokenRow(),column:n+l.getCurrentTokenColumn()}}}else{if(j==f){k+=1}}n+=1}do{i=l.stepForward()}while(i&&!q.test(i.type));if(i==null){break}n=0}return null}}b.BracketMatch=a});ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(c,a,d){var g=c("./lib/lang");var e=c("./lib/oop");var f=c("./range").Range;var b=function(){this.$options={needle:"",backwards:false,wrap:false,caseSensitive:false,wholeWord:false,scope:b.ALL,regExp:false}};b.ALL=1;b.SELECTION=2;(function(){this.set=function(i){e.mixin(this.$options,i);return this};this.getOptions=function(){return g.copyObject(this.$options)};this.find=function(k){if(!this.$options.needle){return null}if(this.$options.backwards){var j=this.$backwardMatchIterator(k)}else{j=this.$forwardMatchIterator(k)}var i=null;j.forEach(function(l){i=l;return true});return i};this.findAll=function(m){var j=this.$options;if(!j.needle){return[]}if(j.backwards){var l=this.$backwardMatchIterator(m)}else{l=this.$forwardMatchIterator(m)}var k=!j.start&&j.wrap&&j.scope==b.ALL;if(k){j.start={row:0,column:0}}var i=[];l.forEach(function(n){i.push(n)});if(k){j.start=null}return i};this.replace=function(i,l){var k=this.$assembleRegExp();var j=k.exec(i);if(j&&j[0].length==i.length){if(this.$options.regExp){return i.replace(k,l)}else{return l}}else{return null}};this.$forwardMatchIterator=function(k){var j=this.$assembleRegExp();var i=this;return{forEach:function(l){i.$forwardLineIterator(k).forEach(function(m,s,r){if(s){m=m.substring(s)}var q=[];m.replace(j,function(u){var t=arguments[arguments.length-2];q.push({str:u,offset:s+t});return u});for(var p=0;p<q.length;p++){var o=q[p];var n=i.$rangeFromMatch(r,o.offset,o.str.length);if(l(n)){return true}}})}}};this.$backwardMatchIterator=function(k){var j=this.$assembleRegExp();var i=this;return{forEach:function(l){i.$backwardLineIterator(k).forEach(function(m,s,r){if(s){m=m.substring(s)}var q=[];m.replace(j,function(u,t){q.push({str:u,offset:s+t});return u});for(var p=q.length-1;p>=0;p--){var o=q[p];var n=i.$rangeFromMatch(r,o.offset,o.str.length);if(l(n)){return true}}})}}};this.$rangeFromMatch=function(k,i,j){return new f(k,i,k,i+j)};this.$assembleRegExp=function(){if(this.$options.regExp){var k=this.$options.needle}else{k=g.escapeRegExp(this.$options.needle)}if(this.$options.wholeWord){k="\\b"+k+"\\b"}var i="g";if(!this.$options.caseSensitive){i+="i"}var j=new RegExp(k,i);return j};this.$forwardLineIterator=function(p){var o=this.$options.scope==b.SELECTION;var m=this.$options.range||p.getSelection().getRange();var j=this.$options.start||m[o?"start":"end"];var l=o?m.start.row:0;var n=o?m.start.column:0;var r=o?m.end.row:p.getLength()-1;var k=this.$options.wrap;var i=false;function q(t){var s=p.getLine(t);if(o&&t==m.end.row){s=s.substring(0,m.end.column)}if(i&&t==j.row){s=s.substring(0,j.column)}return s}return{forEach:function(w){var v=j.row;var s=q(v);var u=j.column;var t=false;i=false;while(!w(s,u,v)){if(t){return}v++;u=0;if(v>r){if(k){v=l;u=n;i=true}else{return}}if(v==j.row){t=true}s=q(v)}}}};this.$backwardLineIterator=function(n){var j=this.$options.scope==b.SELECTION;var i=this.$options.range||n.getSelection().getRange();var p=this.$options.start||i[j?"end":"start"];var o=j?i.start.row:0;var m=j?i.start.column:0;var l=j?i.end.row:n.getLength()-1;var k=this.$options.wrap;return{forEach:function(v){var u=p.row;var q=n.getLine(u).substring(0,p.column);var t=0;var r=false;var s=false;while(!v(q,t,u)){if(r){return}u--;t=0;if(u<o){if(k){u=l;s=true}else{return}}if(u==p.row){r=true}q=n.getLine(u);if(j){if(u==o){t=m}else{if(u==l){q=q.substring(0,i.end.column)}}}if(s&&u==p.row){t=p.column}}}}}}).call(b.prototype);a.Search=b});ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/keys"],function(c,a,d){var b=c("../lib/keys");var e=function(g,f){if(typeof g!=="string"){throw new TypeError("'platform' argument must be either 'mac' or 'win'")}this.platform=g;this.commands={};this.commmandKeyBinding={};if(f){f.forEach(this.addCommand,this)}};(function(){this.addCommand=function(j){if(this.commands[j.name]){this.removeCommand(j)}this.commands[j.name]=j;if(j.bindKey){this._buildKeyHash(j)}};this.removeCommand=function(n){var j=(typeof n==="string"?n:n.name);n=this.commands[j];delete this.commands[j];var l=this.commmandKeyBinding;for(var m in l){for(var k in l[m]){if(l[m][k]==n){delete l[m][k]}}}};this.addCommands=function(j){Object.keys(j).forEach(function(k){var l=j[k];if(typeof l==="string"){return this.bindKey(l,k)}if(typeof l==="function"){l={exec:l}}if(!l.name){l.name=k}this.addCommand(l)},this)};this.removeCommands=function(j){Object.keys(j).forEach(function(k){this.removeCommand(j[k])},this)};this.bindKey=function(j,l){if(!j){return}var k=this.commmandKeyBinding;j.split("|").forEach(function(m){var o=i(m,l);var n=o.hashId;(k[n]||(k[n]={}))[o.key]=l})};this.bindKeys=function(j){Object.keys(j).forEach(function(k){this.bindKey(k,j[k])},this)};this._buildKeyHash=function(l){var k=l.bindKey;if(!k){return}var j=typeof k=="string"?k:k[this.platform];this.bindKey(j,l)};function i(p,r,k){var n;var o=0;var q=g(p);for(var m=0,j=q.length;m<j;m++){if(b.KEY_MODS[q[m]]){o=o|b.KEY_MODS[q[m]]}else{n=q[m]||"-"}}return{key:n,hashId:o}}function g(j,k){return(j.toLowerCase().trim().split(new RegExp("[\\s ]*\\-[\\s ]*","g"),999))}this.findKeyCommand=function f(k,l){if(typeof l=="number"){l=b.keyCodeToString(l)}var j=this.commmandKeyBinding;return j[k]&&j[k][l.toLowerCase()]};this.exec=function(l,k,j){if(typeof l==="string"){l=this.commands[l]}if(!l){return false}if(k&&k.$readOnly&&!l.readOnly){return false}l.exec(k,j||{});return true};this.toggleRecording=function(){if(this.$inReplay){return}if(this.recording){this.macro.pop();this.exec=this.normal_exec;if(!this.macro.length){this.macro=this.oldMacro}return this.recording=false}this.oldMacro=this.macro;this.macro=[];this.normal_exec=this.exec;this.exec=function(l,k,j){this.macro.push([l,j]);return this.normal_exec(l,k,j)};return this.recording=true};this.replay=function(j){if(this.$inReplay||!this.macro){return}if(this.recording){return this.toggleRecording()}try{this.$inReplay=true;this.macro.forEach(function(k){if(typeof k=="string"){this.exec(k,j)}else{this.exec(k[0],j,k[1])}},this)}finally{this.$inReplay=false}};this.trimMacro=function(j){return j.map(function(k){if(typeof k[0]!="string"){k[0]=k[0].name}if(!k[1]){k=k[0]}return k})}}).call(e.prototype);a.CommandManager=e});ace.define("ace/undomanager",["require","exports","module"],function(b,a,c){var d=function(){this.reset()};(function(){this.execute=function(e){var f=e.args[0];this.$doc=e.args[1];this.$undoStack.push(f);this.$redoStack=[]};this.undo=function(e){var g=this.$undoStack.pop();var f=null;if(g){f=this.$doc.undoChanges(g,e);this.$redoStack.push(g)}return f};this.redo=function(e){var g=this.$redoStack.pop();var f=null;if(g){f=this.$doc.redoChanges(g,e);this.$undoStack.push(g)}return f};this.reset=function(){this.$undoStack=[];this.$redoStack=[]};this.hasUndo=function(){return this.$undoStack.length>0};this.hasRedo=function(){return this.$redoStack.length>0}}).call(d.prototype);a.UndoManager=d});ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/useragent","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/renderloop","ace/lib/event_emitter","text!ace/css/editor.css"],function(g,j,c){var l=g("./lib/oop");var i=g("./lib/dom");var b=g("./lib/event");var d=g("./lib/useragent");var p=g("./layer/gutter").Gutter;var n=g("./layer/marker").Marker;var f=g("./layer/text").Text;var o=g("./layer/cursor").Cursor;var e=g("./scrollbar").ScrollBar;var m=g("./renderloop").RenderLoop;var q=g("./lib/event_emitter").EventEmitter;var k=g("text!./css/editor.css");i.importCssString(k,"ace_editor");var a=function(s,u){var r=this;this.container=s;i.addCssClass(s,"ace_editor");this.setTheme(u);this.$gutter=i.createElement("div");this.$gutter.className="ace_gutter";this.container.appendChild(this.$gutter);this.scroller=i.createElement("div");this.scroller.className="ace_scroller";this.container.appendChild(this.scroller);this.content=i.createElement("div");this.content.className="ace_content";this.scroller.appendChild(this.content);this.$gutterLayer=new p(this.$gutter);this.$gutterLayer.on("changeGutterWidth",this.onResize.bind(this,true));this.$markerBack=new n(this.content);var t=this.$textLayer=new f(this.content);this.canvas=t.element;this.$markerFront=new n(this.content);this.characterWidth=t.getCharacterWidth();this.lineHeight=t.getLineHeight();this.$cursorLayer=new o(this.content);this.$cursorPadding=8;this.$horizScroll=true;this.$horizScrollAlwaysVisible=true;this.scrollBar=new e(s);this.scrollBar.addEventListener("scroll",function(v){r.session.setScrollTop(v.data)});this.scrollTop=0;this.scrollLeft=0;b.addListener(this.scroller,"scroll",function(){r.session.setScrollLeft(r.scroller.scrollLeft)});this.cursorPos={row:0,column:0};this.$textLayer.addEventListener("changeCharacterSize",function(){r.characterWidth=t.getCharacterWidth();r.lineHeight=t.getLineHeight();r.$updatePrintMargin();r.onResize(true);r.$loop.schedule(r.CHANGE_FULL)});this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0};this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:1,characterWidth:1,minHeight:1,maxHeight:1,offset:0,height:1};this.$loop=new m(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView);this.$loop.schedule(this.CHANGE_FULL);this.setPadding(4);this.$updatePrintMargin()};(function(){this.showGutter=true;this.CHANGE_CURSOR=1;this.CHANGE_MARKER=2;this.CHANGE_GUTTER=4;this.CHANGE_SCROLL=8;this.CHANGE_LINES=16;this.CHANGE_TEXT=32;this.CHANGE_SIZE=64;this.CHANGE_MARKER_BACK=128;this.CHANGE_MARKER_FRONT=256;this.CHANGE_FULL=512;this.CHANGE_H_SCROLL=1024;l.implement(this,q);this.setSession=function(t){this.session=t;this.$cursorLayer.setSession(t);this.$markerBack.setSession(t);this.$markerFront.setSession(t);this.$gutterLayer.setSession(t);this.$textLayer.setSession(t);this.$loop.schedule(this.CHANGE_FULL)};this.updateLines=function(u,t){if(t===undefined){t=Infinity}if(!this.$changedLines){this.$changedLines={firstRow:u,lastRow:t}}else{if(this.$changedLines.firstRow>u){this.$changedLines.firstRow=u}if(this.$changedLines.lastRow<t){this.$changedLines.lastRow=t}}this.$loop.schedule(this.CHANGE_LINES)};this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)};this.updateFull=function(){this.$loop.schedule(this.CHANGE_FULL)};this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()};this.onResize=function(y){var x=this.CHANGE_SIZE;var v=this.$size;var t=i.getInnerHeight(this.container);if(y||v.height!=t){v.height=t;this.scroller.style.height=t+"px";v.scrollerHeight=this.scroller.clientHeight;this.scrollBar.setHeight(v.scrollerHeight);if(this.session){this.session.setScrollTop(this.getScrollTop());x=x|this.CHANGE_FULL}}var w=i.getInnerWidth(this.container);if(y||v.width!=w){v.width=w;var u=this.showGutter?this.$gutter.offsetWidth:0;this.scroller.style.left=u+"px";v.scrollerWidth=Math.max(0,w-u-this.scrollBar.getWidth());this.scroller.style.width=v.scrollerWidth+"px";if(this.session.getUseWrapMode()&&this.adjustWrapLimit()||y){x=x|this.CHANGE_FULL}}this.$loop.schedule(x)};this.adjustWrapLimit=function(){var u=this.$size.scrollerWidth-this.$padding*2;var t=Math.floor(u/this.characterWidth);return this.session.adjustWrapLimit(t)};this.setShowInvisibles=function(t){if(this.$textLayer.setShowInvisibles(t)){this.$loop.schedule(this.CHANGE_TEXT)}};this.getShowInvisibles=function(){return this.$textLayer.showInvisibles};this.$showPrintMargin=true;this.setShowPrintMargin=function(t){this.$showPrintMargin=t;this.$updatePrintMargin()};this.getShowPrintMargin=function(){return this.$showPrintMargin};this.$printMarginColumn=80;this.setPrintMarginColumn=function(t){this.$printMarginColumn=t;this.$updatePrintMargin()};this.getPrintMarginColumn=function(){return this.$printMarginColumn};this.getShowGutter=function(){return this.showGutter};this.setShowGutter=function(t){if(this.showGutter===t){return}this.$gutter.style.display=t?"block":"none";this.showGutter=t;this.onResize(true)};this.$updatePrintMargin=function(){var u;if(!this.$showPrintMargin&&!this.$printMarginEl){return}if(!this.$printMarginEl){u=i.createElement("div");u.className="ace_print_margin_layer";this.$printMarginEl=i.createElement("div");this.$printMarginEl.className="ace_print_margin";u.appendChild(this.$printMarginEl);this.content.insertBefore(u,this.$textLayer.element)}var t=this.$printMarginEl.style;t.left=((this.characterWidth*this.$printMarginColumn)+this.$padding)+"px";t.visibility=this.$showPrintMargin?"visible":"hidden"};this.getContainerElement=function(){return this.container};this.getMouseEventTarget=function(){return this.content};this.getTextAreaContainer=function(){return this.container};this.moveTextAreaToCursor=function(t){if(d.isIE){return}if(this.layerConfig.lastRow===0){return}var w=this.$cursorLayer.getPixelPosition();if(!w){return}var u=this.content.getBoundingClientRect();var v=this.layerConfig.offset;t.style.left=(u.left+w.left)+"px";t.style.top=(u.top+w.top-this.scrollTop+v)+"px"};this.getFirstVisibleRow=function(){return this.layerConfig.firstRow};this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(this.layerConfig.offset===0?0:1)};this.getLastFullyVisibleRow=function(){var t=Math.floor((this.layerConfig.height+this.layerConfig.offset)/this.layerConfig.lineHeight);return this.layerConfig.firstRow-1+t};this.getLastVisibleRow=function(){return this.layerConfig.lastRow};this.$padding=null;this.setPadding=function(t){this.$padding=t;this.$textLayer.setPadding(t);this.$cursorLayer.setPadding(t);this.$markerFront.setPadding(t);this.$markerBack.setPadding(t);this.$loop.schedule(this.CHANGE_FULL);this.$updatePrintMargin()};this.getHScrollBarAlwaysVisible=function(){return this.$horizScrollAlwaysVisible};this.setHScrollBarAlwaysVisible=function(t){if(this.$horizScrollAlwaysVisible!=t){this.$horizScrollAlwaysVisible=t;if(!this.$horizScrollAlwaysVisible||!this.$horizScroll){this.$loop.schedule(this.CHANGE_SCROLL)}}};this.$updateScrollBar=function(){this.scrollBar.setInnerHeight(this.layerConfig.maxHeight);this.scrollBar.setScrollTop(this.scrollTop)};this.$renderChanges=function(t){if(!t||!this.session){return}if(t&this.CHANGE_FULL||t&this.CHANGE_SIZE||t&this.CHANGE_TEXT||t&this.CHANGE_LINES||t&this.CHANGE_SCROLL){this.$computeLayerConfig()}if(t&this.CHANGE_FULL){this.$textLayer.update(this.layerConfig);if(this.showGutter){this.$gutterLayer.update(this.layerConfig)}this.$markerBack.update(this.layerConfig);this.$markerFront.update(this.layerConfig);this.$cursorLayer.update(this.layerConfig);this.$updateScrollBar();return}if(t&this.CHANGE_SCROLL){if(t&this.CHANGE_TEXT||t&this.CHANGE_LINES){this.$textLayer.update(this.layerConfig)}else{this.$textLayer.scrollLines(this.layerConfig)}if(this.showGutter){this.$gutterLayer.update(this.layerConfig)}this.$markerBack.update(this.layerConfig);this.$markerFront.update(this.layerConfig);this.$cursorLayer.update(this.layerConfig);this.$updateScrollBar();return}if(t&this.CHANGE_TEXT){this.$textLayer.update(this.layerConfig);if(this.showGutter){this.$gutterLayer.update(this.layerConfig)}}else{if(t&this.CHANGE_LINES){this.$updateLines();this.$updateScrollBar();if(this.showGutter){this.$gutterLayer.update(this.layerConfig)}}else{if(t&this.CHANGE_GUTTER){if(this.showGutter){this.$gutterLayer.update(this.layerConfig)}}}}if(t&this.CHANGE_CURSOR){this.$cursorLayer.update(this.layerConfig)}if(t&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)){this.$markerFront.update(this.layerConfig)}if(t&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)){this.$markerBack.update(this.layerConfig)}if(t&this.CHANGE_SIZE){this.$updateScrollBar()}if(t&this.CHANGE_H_SCROLL){this.scroller.scrollLeft=this.scrollLeft}};this.$computeLayerConfig=function(){var x=this.session;var v=this.scrollTop%this.lineHeight;var D=this.$size.scrollerHeight+this.lineHeight;var y=this.$getLongestLine();var E=this.$horizScrollAlwaysVisible||this.$size.scrollerWidth-y<0;var t=this.$horizScroll!==E;this.$horizScroll=E;if(t){this.scroller.style.overflowX=E?"scroll":"hidden"}var C=this.session.getScreenLength()*this.lineHeight;this.session.setScrollTop(Math.max(0,Math.min(this.scrollTop,C-this.$size.scrollerHeight)));var F=Math.ceil(D/this.lineHeight)-1;var u=Math.max(0,Math.round((this.scrollTop-v)/this.lineHeight));var G=u+F;var B,w;var A={lineHeight:this.lineHeight};u=x.screenToDocumentRow(u,0);var z=x.getFoldLine(u);if(z){u=z.start.row}B=x.documentToScreenRow(u,0);w=x.getRowHeight(A,u);G=Math.min(x.screenToDocumentRow(G,0),x.getLength()-1);D=this.$size.scrollerHeight+x.getRowHeight(A,G)+w;v=this.scrollTop-B*this.lineHeight;this.layerConfig={width:y,padding:this.$padding,firstRow:u,firstRowScreen:B,lastRow:G,lineHeight:this.lineHeight,characterWidth:this.characterWidth,minHeight:D,maxHeight:C,offset:v,height:this.$size.scrollerHeight};this.$gutterLayer.element.style.marginTop=(-v)+"px";this.content.style.marginTop=(-v)+"px";this.content.style.width=y+2*this.$padding+"px";this.content.style.height=D+"px";if(t){this.onResize(true)}};this.$updateLines=function(){var v=this.$changedLines.firstRow;var u=this.$changedLines.lastRow;this.$changedLines=null;var t=this.layerConfig;if(t.width!=this.$getLongestLine()){return this.$textLayer.update(t)}if(v>t.lastRow+1){return}if(u<t.firstRow){return}if(u===Infinity){if(this.showGutter){this.$gutterLayer.update(t)}this.$textLayer.update(t);return}this.$textLayer.updateLines(t,v,u)};this.$getLongestLine=function(){var t=this.session.getScreenWidth();if(this.$textLayer.showInvisibles){t+=1}return Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(t*this.characterWidth))};this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(true));this.$loop.schedule(this.CHANGE_MARKER_FRONT)};this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers());this.$loop.schedule(this.CHANGE_MARKER_BACK)};this.addGutterDecoration=function(u,t){this.$gutterLayer.addGutterDecoration(u,t);this.$loop.schedule(this.CHANGE_GUTTER)};this.removeGutterDecoration=function(u,t){this.$gutterLayer.removeGutterDecoration(u,t);this.$loop.schedule(this.CHANGE_GUTTER)};this.setBreakpoints=function(t){this.$gutterLayer.setBreakpoints(t);this.$loop.schedule(this.CHANGE_GUTTER)};this.setAnnotations=function(t){this.$gutterLayer.setAnnotations(t);this.$loop.schedule(this.CHANGE_GUTTER)};this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)};this.hideCursor=function(){this.$cursorLayer.hideCursor()};this.showCursor=function(){this.$cursorLayer.showCursor()};this.scrollCursorIntoView=function(){if(this.$size.scrollerHeight===0){return}var w=this.$cursorLayer.getPixelPosition();var u=w.left;var t=w.top;if(this.scrollTop>t){this.session.setScrollTop(t)}if(this.scrollTop+this.$size.scrollerHeight<t+this.lineHeight){this.session.setScrollTop(t+this.lineHeight-this.$size.scrollerHeight)}var v=this.scrollLeft;if(v>u){if(u<this.$padding+2*this.layerConfig.characterWidth){u=0}this.session.setScrollLeft(u)}if(v+this.$size.scrollerWidth<u+this.characterWidth){this.session.setScrollLeft(Math.round(u+this.characterWidth-this.$size.scrollerWidth))}};this.getScrollTop=function(){return this.session.getScrollTop()};this.getScrollLeft=function(){return this.session.getScrollTop()};this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight};this.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)};this.scrollToRow=function(t){this.session.setScrollTop(t*this.lineHeight)};this.scrollToLine=function(u,t){var w=this.$cursorLayer.getPixelPosition({row:u,column:0});var v=w.top;if(t){v-=this.$size.scrollerHeight/2}this.session.setScrollTop(v)};this.scrollToY=function(t){if(this.scrollTop!==t){this.$loop.schedule(this.CHANGE_SCROLL);this.scrollTop=t}};this.scrollToX=function(t){if(t<=this.$padding){t=0}if(this.scrollLeft!==t){this.$loop.schedule(this.CHANGE_H_SCROLL);this.scrollLeft=t}};this.scrollBy=function(u,t){t&&this.session.setScrollTop(this.session.getScrollTop()+t);u&&this.session.setScrollLeft(this.session.getScrollLeft()+u)};this.isScrollableBy=function(u,t){if(t<0&&this.session.getScrollTop()>0){return true}if(t>0&&this.session.getScrollTop()+this.$size.scrollerHeight<this.layerConfig.maxHeight){return true}};this.screenToTextCoordinates=function(w,v){var u=this.scroller.getBoundingClientRect();var t=Math.round((w+this.scrollLeft-u.left-this.$padding-i.getPageScrollLeft())/this.characterWidth);var x=Math.floor((v+this.scrollTop-u.top-i.getPageScrollTop())/this.lineHeight);return this.session.screenToDocumentPosition(x,Math.max(t,0))};this.textToScreenCoordinates=function(w,v){var u=this.scroller.getBoundingClientRect();var A=this.session.documentToScreenPosition(w,v);var t=this.$padding+Math.round(A.column*this.characterWidth);var z=A.row*this.lineHeight;return{pageX:u.left+t-this.scrollLeft,pageY:u.top+z-this.scrollTop}};this.visualizeFocus=function(){i.addCssClass(this.container,"ace_focus")};this.visualizeBlur=function(){i.removeCssClass(this.container,"ace_focus")};this.showComposition=function(t){if(!this.$composition){this.$composition=i.createElement("div");this.$composition.className="ace_composition";this.content.appendChild(this.$composition)}this.$composition.innerHTML="&#160;";var v=this.$cursorLayer.getPixelPosition();var u=this.$composition.style;u.top=v.top+"px";u.left=(v.left+this.$padding)+"px";u.height=this.lineHeight+"px";this.hideCursor()};this.setCompositionText=function(t){i.setInnerText(this.$composition,t)};this.hideComposition=function(){this.showCursor();if(!this.$composition){return}var t=this.$composition.style;t.top="-10000px";t.left="-10000px"};this.setTheme=function(u){var t=this;this.$themeValue=u;if(!u||typeof u=="string"){u=u||"ace/theme/textmate";g([u],function(w){v(w)})}else{v(u)}function v(w){i.importCssString(w.cssText,w.cssClass,t.container.ownerDocument);if(t.$theme){i.removeCssClass(t.container,t.$theme)}t.$theme=w?w.cssClass:null;if(t.$theme){i.addCssClass(t.container,t.$theme)}if(w&&w.isDark){i.addCssClass(t.container,"ace_dark")}else{i.removeCssClass(t.container,"ace_dark")}if(t.$size){t.$size.width=0;t.onResize()}}};this.getTheme=function(){return this.$themeValue};this.setStyle=function s(t){i.addCssClass(this.container,t)};this.unsetStyle=function r(t){i.removeCssClass(this.container,t)};this.destroy=function(){this.$textLayer.destroy();this.$cursorLayer.destroy()}}).call(a.prototype);j.VirtualRenderer=a});ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event_emitter"],function(b,a,c){var g=b("../lib/dom");var f=b("../lib/oop");var e=b("../lib/event_emitter").EventEmitter;var d=function(i){this.element=g.createElement("div");this.element.className="ace_layer ace_gutter-layer";i.appendChild(this.element);this.setShowFoldWidgets(this.$showFoldWidgets);this.gutterWidth=0;this.$breakpoints=[];this.$annotations=[];this.$decorations=[]};(function(){f.implement(this,e);this.setSession=function(i){this.session=i};this.addGutterDecoration=function(j,i){if(!this.$decorations[j]){this.$decorations[j]=""}this.$decorations[j]+=" ace_"+i};this.removeGutterDecoration=function(j,i){this.$decorations[j]=this.$decorations[j].replace(" ace_"+i,"")};this.setBreakpoints=function(i){this.$breakpoints=i.concat()};this.setAnnotations=function(p){this.$annotations=[];for(var q in p){if(p.hasOwnProperty(q)){var n=p[q];if(!n){continue}var o=this.$annotations[q]={text:[]};for(var l=0;l<n.length;l++){var j=n[l];var k=j.text.replace(/"/g,"&quot;").replace(/'/g,"&#8217;").replace(/</,"&lt;");if(o.text.indexOf(k)===-1){o.text.push(k)}var m=j.type;if(m=="error"){o.className="ace_error"}else{if(m=="warning"&&o.className!="ace_error"){o.className="ace_warning"}else{if(m=="info"&&(!o.className)){o.className="ace_info"}}}}}}};this.update=function(k){this.$config=k;var t={className:"",text:[]};var q=[];var n=k.firstRow;var u=k.lastRow;var r=this.session.getNextFoldLine(n);var o=r?r.start.row:Infinity;var l=this.$showFoldWidgets&&this.session.foldWidgets;while(true){if(n>o){n=r.end.row+1;r=this.session.getNextFoldLine(n,r);o=r?r.start.row:Infinity}if(n>u){break}var m=this.$annotations[n]||t;q.push("<div class='ace_gutter-cell",this.$decorations[n]||"",this.$breakpoints[n]?" ace_breakpoint ":" ",m.className,"' title='",m.text.join("\n"),"' style='height:",k.lineHeight,"px;'>",(n+1));if(l){var s=l[n];if(s==null){s=l[n]=this.session.getFoldWidget(n)}if(s){q.push("<span class='ace_fold-widget ",s,s=="start"&&n==o&&n<r.end.row?" closed":" open","'></span>")}}var p=this.session.getRowLength(n)-1;while(p--){q.push("</div><div class='ace_gutter-cell' style='height:",k.lineHeight,"px'>\xA6")}q.push("</div>");n++}this.element=g.setInnerHtml(this.element,q.join(""));this.element.style.height=k.minHeight+"px";var j=this.element.offsetWidth;if(j!==this.gutterWidth){this.gutterWidth=j;this._emit("changeGutterWidth",j)}};this.$showFoldWidgets=true;this.setShowFoldWidgets=function(i){if(i){g.addCssClass(this.element,"ace_folding-enabled")}else{g.removeCssClass(this.element,"ace_folding-enabled")}this.$showFoldWidgets=i};this.getShowFoldWidgets=function(){return this.$showFoldWidgets}}).call(d.prototype);a.Gutter=d});ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(c,b,d){var e=c("../range").Range;var f=c("../lib/dom");var a=function(g){this.element=f.createElement("div");this.element.className="ace_layer ace_marker-layer";g.appendChild(this.element)};(function(){this.$padding=0;this.setPadding=function(g){this.$padding=g};this.setSession=function(g){this.session=g};this.setMarkers=function(g){this.markers=g};this.update=function(j){var j=j||this.config;if(!j){return}this.config=j;var l=[];for(var k in this.markers){var g=this.markers[k];var i=g.range.clipRows(j.firstRow,j.lastRow);if(i.isEmpty()){continue}i=i.toScreenRange(this.session);if(g.renderer){var n=this.$getTop(i.start.row,j);var m=Math.round(this.$padding+i.start.column*j.characterWidth);g.renderer(l,i,m,n,j)}else{if(i.isMultiLine()){if(g.type=="text"){this.drawTextMarker(l,i,g.clazz,j)}else{this.drawMultiLineMarker(l,i,g.clazz,j,g.type)}}else{this.drawSingleLineMarker(l,i,g.clazz,j,null,g.type)}}}this.element=f.setInnerHtml(this.element,l.join(""))};this.$getTop=function(i,g){return(i-g.firstRowScreen)*g.lineHeight};this.drawTextMarker=function(k,i,j,g){var m=i.start.row;var l=new e(m,i.start.column,m,this.session.getScreenLastRowColumn(m));this.drawSingleLineMarker(k,l,j,g,1,"text");m=i.end.row;l=new e(m,0,m,i.end.column);this.drawSingleLineMarker(k,l,j,g,0,"text");for(m=i.start.row+1;m<i.end.row;m++){l.start.row=m;l.end.row=m;l.end.column=this.session.getScreenLastRowColumn(m);this.drawSingleLineMarker(k,l,j,g,1,"text")}};this.drawMultiLineMarker=function(i,l,m,q,n){var p=n==="background"?0:this.$padding;var j=q.width+2*this.$padding-p;var r=q.lineHeight;var g=Math.round(j-(l.start.column*q.characterWidth));var o=this.$getTop(l.start.row,q);var k=Math.round(p+l.start.column*q.characterWidth);i.push("<div class='",m,"' style='","height:",r,"px;","width:",g,"px;","top:",o,"px;","left:",k,"px;'></div>");o=this.$getTop(l.end.row,q);g=Math.round(l.end.column*q.characterWidth);i.push("<div class='",m,"' style='","height:",r,"px;","width:",g,"px;","top:",o,"px;","left:",p,"px;'></div>");r=(l.end.row-l.start.row-1)*q.lineHeight;if(r<0){return}o=this.$getTop(l.start.row+1,q);i.push("<div class='",m,"' style='","height:",r,"px;","width:",j,"px;","top:",o,"px;","left:",p,"px;'></div>")};this.drawSingleLineMarker=function(i,k,m,q,l,n){var p=n==="background"?0:this.$padding;var r=q.lineHeight;if(n==="background"){var g=q.width}else{g=Math.round((k.end.column+(l||0)-k.start.column)*q.characterWidth)}var o=this.$getTop(k.start.row,q);var j=Math.round(p+k.start.column*q.characterWidth);i.push("<div class='",m,"' style='","height:",r,"px;","width:",g,"px;","top:",o,"px;","left:",j,"px;'></div>")}}).call(a.prototype);b.Marker=a});ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/lib/event_emitter"],function(e,g,b){var i=e("../lib/oop");var f=e("../lib/dom");var a=e("../lib/lang");var c=e("../lib/useragent");var j=e("../lib/event_emitter").EventEmitter;var d=function(k){this.element=f.createElement("div");this.element.className="ace_layer ace_text-layer";k.appendChild(this.element);this.$characterSize=this.$measureSizes()||{width:0,height:0};this.$pollSizeChanges()};(function(){i.implement(this,j);this.EOF_CHAR="\xB6";this.EOL_CHAR="\xAC";this.TAB_CHAR="\u2192";this.SPACE_CHAR="\xB7";this.$padding=0;this.setPadding=function(k){this.$padding=k;this.element.style.padding="0 "+k+"px"};this.getLineHeight=function(){return this.$characterSize.height||1};this.getCharacterWidth=function(){return this.$characterSize.width||1};this.checkForSizeChanges=function(){var k=this.$measureSizes();if(k&&(this.$characterSize.width!==k.width||this.$characterSize.height!==k.height)){this.$characterSize=k;this._emit("changeCharacterSize",{data:k})}};this.$pollSizeChanges=function(){var k=this;this.$pollSizeChangesTimer=setInterval(function(){k.checkForSizeChanges()},500)};this.$fontStyles={fontFamily:1,fontSize:1,fontWeight:1,fontStyle:1,lineHeight:1};this.$measureSizes=function(){var r=1000;if(!this.$measureNode){var p=this.$measureNode=f.createElement("div");var o=p.style;o.width=o.height="auto";o.left=o.top=(-r*40)+"px";o.visibility="hidden";o.position="absolute";o.overflow="visible";o.whiteSpace="nowrap";p.innerHTML=a.stringRepeat("Xy",r);if(this.element.ownerDocument.body){this.element.ownerDocument.body.appendChild(p)}else{var k=this.element.parentNode;while(!f.hasCssClass(k,"ace_editor")){k=k.parentNode}k.appendChild(p)}}var o=this.$measureNode.style;var l=f.computedStyle(this.element);for(var q in this.$fontStyles){o[q]=l[q]}var m={height:this.$measureNode.offsetHeight,width:this.$measureNode.offsetWidth/(r*2)};if(m.width==0&&m.height==0){return null}return m};this.setSession=function(k){this.session=k};this.showInvisibles=false;this.setShowInvisibles=function(k){if(this.showInvisibles==k){return false}this.showInvisibles=k;return true};this.$tabStrings=[];this.$computeTabString=function(){var m=this.session.getTabSize();var k=this.$tabStrings=[0];for(var l=1;l<m+1;l++){if(this.showInvisibles){k.push("<span class='ace_invisible'>"+this.TAB_CHAR+new Array(l).join("&#160;")+"</span>")}else{k.push(new Array(l+1).join("&#160;"))}}};this.updateLines=function(l,n,w){this.$computeTabString();if(this.config.lastRow!=l.lastRow||this.config.firstRow!=l.firstRow){this.scrollLines(l)}this.config=l;var q=Math.max(n,l.firstRow);var t=Math.min(w,l.lastRow);var u=this.element.childNodes;var k=0;for(var v=l.firstRow;v<q;v++){var s=this.session.getFoldLine(v);if(s){if(s.containsRow(q)){q=s.start.row;break}else{v=s.end.row}}k++}for(var o=q;o<=t;o++){var m=u[k++];if(!m){continue}var p=[];var r=this.session.getTokens(o,o);this.$renderLine(p,o,r[0].tokens,!this.$useLineGroups());m=f.setInnerHtml(m,p.join(""));o=this.session.getRowFoldEnd(o)}};this.scrollLines=function(m){this.$computeTabString();var k=this.config;this.config=m;if(!k||k.lastRow<m.firstRow){return this.update(m)}if(m.lastRow<k.firstRow){return this.update(m)}var n=this.element;if(k.firstRow<m.firstRow){for(var o=this.session.getFoldedRowCount(k.firstRow,m.firstRow-1);o>0;o--){n.removeChild(n.firstChild)}}if(k.lastRow>m.lastRow){for(var o=this.session.getFoldedRowCount(m.lastRow+1,k.lastRow);o>0;o--){n.removeChild(n.lastChild)}}if(m.firstRow<k.firstRow){var l=this.$renderLinesFragment(m,m.firstRow,k.firstRow-1);if(n.firstChild){n.insertBefore(l,n.firstChild)}else{n.appendChild(l)}}if(m.lastRow>k.lastRow){var l=this.$renderLinesFragment(m,k.lastRow+1,m.lastRow);n.appendChild(l)}};this.$renderLinesFragment=function(l,m,u){var p=this.element.ownerDocument.createDocumentFragment(),t=m,q=this.session.getNextFoldLine(t),n=q?q.start.row:Infinity;while(true){if(t>n){t=q.end.row+1;q=this.session.getNextFoldLine(t,q);n=q?q.start.row:Infinity}if(t>u){break}var k=f.createElement("div");var o=[];var r=this.session.getTokens(t,t);if(r.length==1){this.$renderLine(o,t,r[0].tokens,false)}k.innerHTML=o.join("");if(this.$useLineGroups()){k.className="ace_line_group";p.appendChild(k)}else{var s=k.childNodes;while(s.length){p.appendChild(s[0])}}t++}return p};this.update=function(m){this.$computeTabString();this.config=m;var n=[];var r=m.firstRow,o=m.lastRow;var q=r,l=this.session.getNextFoldLine(q),k=l?l.start.row:Infinity;while(true){if(q>k){q=l.end.row+1;l=this.session.getNextFoldLine(q,l);k=l?l.start.row:Infinity}if(q>o){break}if(this.$useLineGroups()){n.push("<div class='ace_line_group'>")}var p=this.session.getTokens(q,q);if(p.length==1){this.$renderLine(n,q,p[0].tokens,false)}if(this.$useLineGroups()){n.push("</div>")}q++}this.element=f.setInnerHtml(this.element,n.join(""))};this.$textToken={"text":true,"rparen":true,"lparen":true};this.$renderToken=function(m,q,p,s){var t=this;var k=/\t|&|<|( +)|([\v\f \u00a0\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u200b\u2028\u2029\u3000])|[\u1100-\u115F]|[\u11A3-\u11A7]|[\u11FA-\u11FF]|[\u2329-\u232A]|[\u2E80-\u2E99]|[\u2E9B-\u2EF3]|[\u2F00-\u2FD5]|[\u2FF0-\u2FFB]|[\u3000-\u303E]|[\u3041-\u3096]|[\u3099-\u30FF]|[\u3105-\u312D]|[\u3131-\u318E]|[\u3190-\u31BA]|[\u31C0-\u31E3]|[\u31F0-\u321E]|[\u3220-\u3247]|[\u3250-\u32FE]|[\u3300-\u4DBF]|[\u4E00-\uA48C]|[\uA490-\uA4C6]|[\uA960-\uA97C]|[\uAC00-\uD7A3]|[\uD7B0-\uD7C6]|[\uD7CB-\uD7FB]|[\uF900-\uFAFF]|[\uFE10-\uFE19]|[\uFE30-\uFE52]|[\uFE54-\uFE66]|[\uFE68-\uFE6B]|[\uFF01-\uFF60]|[\uFFE0-\uFFE6]/g;var r=function(B,w,v,x,u){if(B.charCodeAt(0)==32){return new Array(B.length+1).join("&#160;")}else{if(B=="\t"){var z=t.session.getScreenTabSize(q+x);q+=z-1;return t.$tabStrings[z]}else{if(B=="&"){if(c.isOldGecko){return"&"}else{return"&amp;"}}else{if(B=="<"){return"&lt;"}else{if(B=="\u3000"){var A=t.showInvisibles?"ace_cjk ace_invisible":"ace_cjk";var y=t.showInvisibles?t.SPACE_CHAR:"";q+=1;return"<span class='"+A+"' style='width:"+(t.config.characterWidth*2)+"px'>"+y+"</span>"}else{if(B.match(/[\v\f \u00a0\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u200b\u2028\u2029\u3000]/)){if(t.showInvisibles){var y=new Array(B.length+1).join(t.SPACE_CHAR);return"<span class='ace_invisible'>"+y+"</span>"}else{return"&#160;"}}else{q+=1;return"<span class='ace_cjk' style='width:"+(t.config.characterWidth*2)+"px'>"+B+"</span>"}}}}}}};var n=s.replace(k,r);if(!this.$textToken[p.type]){var o="ace_"+p.type.replace(/\./g," ace_");var l="";if(p.type=="fold"){l=" style='width:"+(p.value.length*this.config.characterWidth)+"px;' "}m.push("<span class='",o,"'",l,">",n,"</span>")}else{m.push(n)}return q+s.length};this.$renderLineCore=function(k,w,q,u,l){var r=0;var s=0;var m;var p=0;var v=this;if(!u||u.length==0){m=Number.MAX_VALUE}else{m=u[0]}if(!l){k.push("<div class='ace_line' style='height:",this.config.lineHeight,"px","'>")}for(var o=0;o<q.length;o++){var n=q[o];var t=n.value;if(r+t.length<m){p=v.$renderToken(k,p,n,t);r+=t.length}else{while(r+t.length>=m){p=v.$renderToken(k,p,n,t.substring(0,m-r));t=t.substring(m-r);r=m;if(!l){k.push("</div>","<div class='ace_line' style='height:",this.config.lineHeight,"px","'>")}s++;p=0;m=u[s]||Number.MAX_VALUE}if(t.length!=0){r+=t.length;p=v.$renderToken(k,p,n,t)}}}if(this.showInvisibles){if(w!==this.session.getLength()-1){k.push("<span class='ace_invisible'>"+this.EOL_CHAR+"</span>")}else{k.push("<span class='ace_invisible'>"+this.EOF_CHAR+"</span>")}}if(!l){k.push("</div>")}};this.$renderLine=function(l,o,n,k){if(!this.session.isRowFolded(o)){var m=this.session.getRowSplitData(o);this.$renderLineCore(l,o,n,m,k)}else{this.$renderFoldLine(l,o,n,k)}};this.$renderFoldLine=function(k,s,o,l){var p=this.session,q=p.getFoldLine(s),n=[];function m(w,y,x){var t=0,u=0;while((u+w[t].value.length)<y){u+=w[t].value.length;t++;if(t==w.length){return}}if(u!=y){var v=w[t].value.substring(y-u);if(v.length>(x-y)){v=v.substring(0,x-y)}n.push({type:w[t].type,value:v});u=y+v.length;t+=1}while(u<x){var v=w[t].value;if(v.length+u>x){v=v.substring(0,x-u)}n.push({type:w[t].type,value:v});u+=v.length;t+=1}}q.walk(function(x,w,v,u,t){if(x){n.push({type:"fold",value:x})}else{if(t){o=this.session.getTokens(w,w)[0].tokens}if(o.length!=0){m(o,u,v)}}}.bind(this),q.end.row,this.session.getLine(q.end.row).length);var r=this.session.$useWrapMode?this.session.$wrapData[s]:null;this.$renderLineCore(k,s,n,r,l)};this.$useLineGroups=function(){return this.session.getUseWrapMode()};this.destroy=function(){clearInterval(this.$pollSizeChangesTimer);if(this.$measureNode){this.$measureNode.parentNode.removeChild(this.$measureNode)}delete this.$measureNode}}).call(d.prototype);g.Text=d});ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(b,a,c){var e=b("../lib/dom");var d=function(f){this.element=e.createElement("div");this.element.className="ace_layer ace_cursor-layer";f.appendChild(this.element);this.cursor=e.createElement("div");this.cursor.className="ace_cursor ace_hidden";this.element.appendChild(this.cursor);this.isVisible=false};(function(){this.$padding=0;this.setPadding=function(f){this.$padding=f};this.setSession=function(f){this.session=f};this.hideCursor=function(){this.isVisible=false;e.addCssClass(this.cursor,"ace_hidden");clearInterval(this.blinkId)};this.showCursor=function(){this.isVisible=true;e.removeCssClass(this.cursor,"ace_hidden");this.cursor.style.visibility="visible";this.restartTimer()};this.restartTimer=function(){clearInterval(this.blinkId);if(!this.isVisible){return}var f=this.cursor;this.blinkId=setInterval(function(){f.style.visibility="hidden";setTimeout(function(){f.style.visibility="visible"},400)},1000)};this.getPixelPosition=function(f,g){if(!this.config||!this.session){return{left:0,top:0}}if(!f){f=this.session.selection.getCursor()}var k=this.session.documentToScreenPosition(f);var i=Math.round(this.$padding+k.column*this.config.characterWidth);var j=(k.row-(g?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:i,top:j}};this.update=function(g){this.config=g;this.pixelPos=this.getPixelPosition(null,true);this.cursor.style.left=this.pixelPos.left+"px";this.cursor.style.top=this.pixelPos.top+"px";this.cursor.style.width=g.characterWidth+"px";this.cursor.style.height=g.lineHeight+"px";var f=this.session.getOverwrite();if(f!=this.overwrite){this.overwrite=f;if(f){e.addCssClass(this.cursor,"ace_overwrite")}else{e.removeCssClass(this.cursor,"ace_overwrite")}}this.restartTimer()};this.destroy=function(){clearInterval(this.blinkId)}}).call(d.prototype);a.Cursor=d});ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(b,a,c){var g=b("./lib/oop");var i=b("./lib/dom");var f=b("./lib/event");var e=b("./lib/event_emitter").EventEmitter;var d=function(j){this.element=i.createElement("div");this.element.className="ace_sb";this.inner=i.createElement("div");this.element.appendChild(this.inner);j.appendChild(this.element);this.width=i.scrollbarWidth(j.ownerDocument);this.element.style.width=(this.width||15)+5+"px";f.addListener(this.element,"scroll",this.onScroll.bind(this))};(function(){g.implement(this,e);this.onScroll=function(){this._emit("scroll",{data:this.element.scrollTop})};this.getWidth=function(){return this.width};this.setHeight=function(j){this.element.style.height=j+"px"};this.setInnerHeight=function(j){this.inner.style.height=j+"px"};this.setScrollTop=function(j){this.element.scrollTop=j}}).call(d.prototype);a.ScrollBar=d});ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],function(b,a,c){var d=b("./lib/event");var e=function(g,f){this.onRender=g;this.pending=false;this.changes=0;this.window=f||window};(function(){this.schedule=function(g){this.changes=this.changes|g;if(!this.pending){this.pending=true;var f=this;d.nextTick(function(){f.pending=false;var i;while(i=f.changes){f.changes=0;f.onRender(i)}},this.window)}}}).call(e.prototype);a.RenderLoop=e});ace.define("text!ace/css/editor.css",[],"@import url(//fonts.googleapis.com/css?family=Droid+Sans+Mono);\n"+"\n"+"\n"+".ace_editor {\n"+"    position: absolute;\n"+"    overflow: hidden;\n"+"    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', 'Droid Sans Mono', 'Courier New', monospace;\n"+"    font-size: 12px;\n"+"}\n"+"\n"+".ace_scroller {\n"+"    position: absolute;\n"+"    overflow-x: scroll;\n"+"    overflow-y: hidden;\n"+"}\n"+"\n"+".ace_content {\n"+"    position: absolute;\n"+"    box-sizing: border-box;\n"+"    -moz-box-sizing: border-box;\n"+"    -webkit-box-sizing: border-box;\n"+"    cursor: text;\n"+"}\n"+"\n"+"/* setting pointer-events: auto; on node under the mouse, which changes during scroll,\n"+"  will break mouse wheel scrolling in Safari */\n"+".ace_content * {\n"+"     pointer-events: none;\n"+"}\n"+"\n"+".ace_composition {\n"+"    position: absolute;\n"+"    background: #555;\n"+"    color: #DDD;\n"+"    z-index: 4;\n"+"}\n"+"\n"+".ace_gutter .ace_layer {\n"+"    position: relative;\n"+"    min-width: 54px;\n"+"    text-align: right;\n"+"}\n"+"\n"+".ace_gutter {\n"+"    position: absolute;\n"+"    overflow : hidden;\n"+"    height: 100%;\n"+"    width: auto;\n"+"    cursor: default;\n"+"}\n"+"\n"+".ace_gutter-cell {\n"+"    padding-left: 19px;\n"+"    padding-right: 6px;\n"+"}\n"+"\n"+".ace_gutter-cell.ace_error {\n"+'    background-image: url("data:image/gif,GIF89a%10%00%10%00%D5%00%00%F5or%F5%87%88%F5nr%F4ns%EBmq%F5z%7F%DDJT%DEKS%DFOW%F1Yc%F2ah%CE(7%CE)8%D18E%DD%40M%F2KZ%EBU%60%F4%60m%DCir%C8%16(%C8%19*%CE%255%F1%3FR%F1%3FS%E6%AB%B5%CA%5DI%CEn%5E%F7%A2%9A%C9G%3E%E0a%5B%F7%89%85%F5yy%F6%82%80%ED%82%80%FF%BF%BF%E3%C4%C4%FF%FF%FF%FF%FF%FF%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00!%F9%04%01%00%00%25%00%2C%00%00%00%00%10%00%10%00%00%06p%C0%92pH%2C%1A%8F%C8%D2H%93%E1d4%23%E4%88%D3%09mB%1DN%B48%F5%90%40%60%92G%5B%94%20%3E%22%D2%87%24%FA%20%24%C5%06A%00%20%B1%07%02B%A38%89X.v%17%82%11%13q%10%0Fi%24%0F%8B%10%7BD%12%0Ei%09%92%09%0EpD%18%15%24%0A%9Ci%05%0C%18F%18%0B%07%04%01%04%06%A0H%18%12%0D%14%0D%12%A1I%B3%B4%B5IA%00%3B");\n'+"    background-repeat: no-repeat;\n"+"    background-position: 2px center;\n"+"}\n"+"\n"+".ace_gutter-cell.ace_warning {\n"+'    background-image: url("data:image/gif,GIF89a%10%00%10%00%D5%00%00%FF%DBr%FF%DE%81%FF%E2%8D%FF%E2%8F%FF%E4%96%FF%E3%97%FF%E5%9D%FF%E6%9E%FF%EE%C1%FF%C8Z%FF%CDk%FF%D0s%FF%D4%81%FF%D5%82%FF%D5%83%FF%DC%97%FF%DE%9D%FF%E7%B8%FF%CCl%7BQ%13%80U%15%82W%16%81U%16%89%5B%18%87%5B%18%8C%5E%1A%94d%1D%C5%83-%C9%87%2F%C6%84.%C6%85.%CD%8B2%C9%871%CB%8A3%CD%8B5%DC%98%3F%DF%9BB%E0%9CC%E1%A5U%CB%871%CF%8B5%D1%8D6%DB%97%40%DF%9AB%DD%99B%E3%B0p%E7%CC%AE%FF%FF%FF%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00!%F9%04%01%00%00%2F%00%2C%00%00%00%00%10%00%10%00%00%06a%C0%97pH%2C%1A%8FH%A1%ABTr%25%87%2B%04%82%F4%7C%B9X%91%08%CB%99%1C!%26%13%84*iJ9(%15G%CA%84%14%01%1A%97%0C%03%80%3A%9A%3E%81%84%3E%11%08%B1%8B%20%02%12%0F%18%1A%0F%0A%03\'F%1C%04%0B%10%16%18%10%0B%05%1CF%1D-%06%07%9A%9A-%1EG%1B%A0%A1%A0U%A4%A5%A6BA%00%3B");\n'+"    background-repeat: no-repeat;\n"+"    background-position: 2px center;\n"+"}\n"+"\n"+".ace_gutter-cell.ace_info {\n"+'    background-image: url("data:image/gif;base64,R0lGODlhEAAQAMQAAAAAAEFBQVJSUl5eXmRkZGtra39/f4WFhYmJiZGRkaampry8vMPDw8zMzNXV1dzc3OTk5Orq6vDw8P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAkAABQALAAAAAAQABAAAAUuICWOZGmeaBml5XGwFCQSBGyXRSAwtqQIiRuiwIM5BoYVbEFIyGCQoeJGrVptIQA7");\n'+"    background-repeat: no-repeat;\n"+"    background-position: 2px center;\n"+"}\n"+"\n"+".ace_editor .ace_sb {\n"+"    position: absolute;\n"+"    overflow-x: hidden;\n"+"    overflow-y: scroll;\n"+"    right: 0;\n"+"}\n"+"\n"+".ace_editor .ace_sb div {\n"+"    position: absolute;\n"+"    width: 1px;\n"+"    left: 0;\n"+"}\n"+"\n"+".ace_editor .ace_print_margin_layer {\n"+"    z-index: 0;\n"+"    position: absolute;\n"+"    overflow: hidden;\n"+"    margin: 0;\n"+"    left: 0;\n"+"    height: 100%;\n"+"    width: 100%;\n"+"}\n"+"\n"+".ace_editor .ace_print_margin {\n"+"    position: absolute;\n"+"    height: 100%;\n"+"}\n"+"\n"+".ace_editor textarea {\n"+"    position: fixed;\n"+"    z-index: 0;\n"+"    width: 10px;\n"+"    height: 30px;\n"+"    opacity: 0;\n"+"    background: transparent;\n"+"    appearance: none;\n"+"    -moz-appearance: none;\n"+"    border: none;\n"+"    resize: none;\n"+"    outline: none;\n"+"    overflow: hidden;\n"+"}\n"+"\n"+".ace_layer {\n"+"    z-index: 1;\n"+"    position: absolute;\n"+"    overflow: hidden;\n"+"    white-space: nowrap;\n"+"    height: 100%;\n"+"    width: 100%;\n"+"    box-sizing: border-box;\n"+"    -moz-box-sizing: border-box;\n"+"    -webkit-box-sizing: border-box;\n"+"}\n"+"\n"+".ace_text-layer {\n"+"    color: black;\n"+"}\n"+"\n"+".ace_cjk {\n"+"    display: inline-block;\n"+"    text-align: center;\n"+"}\n"+"\n"+".ace_cursor-layer {\n"+"    z-index: 4;\n"+"}\n"+"\n"+".ace_cursor {\n"+"    z-index: 4;\n"+"    position: absolute;\n"+"}\n"+"\n"+".ace_cursor.ace_hidden {\n"+"    opacity: 0.2;\n"+"}\n"+"\n"+".ace_line {\n"+"    white-space: nowrap;\n"+"}\n"+"\n"+".ace_marker-layer .ace_step {\n"+"    position: absolute;\n"+"    z-index: 3;\n"+"}\n"+"\n"+".ace_marker-layer .ace_selection {\n"+"    position: absolute;\n"+"    z-index: 4;\n"+"}\n"+"\n"+".ace_marker-layer .ace_bracket {\n"+"    position: absolute;\n"+"    z-index: 5;\n"+"}\n"+"\n"+".ace_marker-layer .ace_active_line {\n"+"    position: absolute;\n"+"    z-index: 2;\n"+"}\n"+"\n"+".ace_marker-layer .ace_selected_word {\n"+"    position: absolute;\n"+"    z-index: 6;\n"+"    box-sizing: border-box;\n"+"    -moz-box-sizing: border-box;\n"+"    -webkit-box-sizing: border-box;\n"+"}\n"+"\n"+".ace_line .ace_fold {\n"+"    box-sizing: border-box;\n"+"    -moz-box-sizing: border-box;\n"+"    -webkit-box-sizing: border-box;\n"+"    \n"+"    display: inline-block;\n"+"    height: 11px;\n"+"    margin-top: -2px;\n"+"    vertical-align: middle;\n"+"\n"+"    background-image: \n"+"        url(\"data:image/png,%89PNG%0D%0A%1A%0A%00%00%00%0DIHDR%00%00%00%11%00%00%00%09%08%06%00%00%00%D4%E8%C7%0C%00%00%03%1EiCCPICC%20Profile%00%00x%01%85T%DFk%D3P%14%FE%DAe%9D%B0%E1%8B%3Ag%11%09%3Eh%91ndStC%9C%B6kW%BA%CDZ%EA6%B7!H%9B%A6m%5C%9A%C6%24%ED~%B0%07%D9%8Bo%3A%C5w%F1%07%3E%F9%07%0C%D9%83o%7B%92%0D%C6%14a%F8%AC%88%22L%F6%22%B3%9E%9B4M'S%03%B9%F7%BB%DF%F9%EE9'%E7%E4%5E%A0%F9qZ%D3%14%2F%0F%14USO%C5%C2%FC%C4%E4%14%DF%F2%01%5E%1CC%2B%FChM%8B%86%16J%26G%40%0F%D3%B2y%EF%B3%F3%0E%1E%C6lt%EEo%DF%AB%FEc%D5%9A%95%0C%11%F0%1C%20%BE%945%C4%22%E1Y%A0i%5C%D4t%13%E0%D6%89%EF%9D15%C2%CDLsX%A7%04%09%1Fg8oc%81%E1%8C%8D%23%96f45%40%9A%09%C2%07%C5B%3AK%B8%408%98i%E0%F3%0D%D8%CE%81%14%E4'%26%A9%92.%8B%3C%ABER%2F%E5dE%B2%0C%F6%F0%1Fs%83%F2_%B0%A8%94%E9%9B%AD%E7%10%8Dm%9A%19N%D1%7C%8A%DE%1F9%7Dp%8C%E6%00%D5%C1%3F_%18%BDA%B8%9DpX6%E3%A35~B%CD%24%AE%11%26%BD%E7%EEti%98%EDe%9A%97Y)%12%25%1C%24%BCbT%AE3li%E6%0B%03%89%9A%E6%D3%ED%F4P%92%B0%9F4%BF43Y%F3%E3%EDP%95%04%EB1%C5%F5%F6KF%F4%BA%BD%D7%DB%91%93%07%E35%3E%A7)%D6%7F%40%FE%BD%F7%F5r%8A%E5y%92%F0%EB%B4%1E%8D%D5%F4%5B%92%3AV%DB%DB%E4%CD%A6%23%C3%C4wQ%3F%03HB%82%8E%1Cd(%E0%91B%0Ca%9Ac%C4%AA%F8L%16%19%22J%A4%D2itTy%B28%D6%3B(%93%96%ED%1CGx%C9_%0E%B8%5E%16%F5%5B%B2%B8%F6%E0%FB%9E%DD%25%D7%8E%BC%15%85%C5%B7%A3%D8Q%ED%B5%81%E9%BA%B2%13%9A%1B%7Fua%A5%A3n%E17%B9%E5%9B%1Bm%AB%0B%08Q%FE%8A%E5%B1H%5Ee%CAO%82Q%D7u6%E6%90S%97%FCu%0B%CF2%94%EE%25v%12X%0C%BA%AC%F0%5E%F8*l%0AO%85%17%C2%97%BF%D4%C8%CE%DE%AD%11%CB%80q%2C%3E%AB%9ES%CD%C6%EC%25%D2L%D2%EBd%B8%BF%8A%F5B%C6%18%F9%901CZ%9D%BE%24M%9C%8A9%F2%DAP%0B'%06w%82%EB%E6%E2%5C%2F%D7%07%9E%BB%CC%5D%E1%FA%B9%08%AD.r%23%8E%C2%17%F5E%7C!%F0%BE3%BE%3E_%B7o%88a%A7%DB%BE%D3d%EB%A31Z%EB%BB%D3%91%BA%A2%B1z%94%8F%DB'%F6%3D%8E%AA%13%19%B2%B1%BE%B1~V%08%2B%B4%A2cjJ%B3tO%00%03%25mN%97%F3%05%93%EF%11%84%0B%7C%88%AE-%89%8F%ABbW%90O%2B%0Ao%99%0C%5E%97%0CI%AFH%D9.%B0%3B%8F%ED%03%B6S%D6%5D%E6i_s9%F3*p%E9%1B%FD%C3%EB.7U%06%5E%19%C0%D1s.%17%A03u%E4%09%B0%7C%5E%2C%EB%15%DB%1F%3C%9E%B7%80%91%3B%DBc%AD%3Dma%BA%8B%3EV%AB%DBt.%5B%1E%01%BB%0F%AB%D5%9F%CF%AA%D5%DD%E7%E4%7F%0Bx%A3%FC%06%A9%23%0A%D6%C2%A1_2%00%00%00%09pHYs%00%00%0B%13%00%00%0B%13%01%00%9A%9C%18%00%00%00%B5IDAT(%15%A5%91%3D%0E%02!%10%85ac%E1%05%D6%CE%D6%C6%CE%D2%E8%ED%CD%DE%C0%C6%D6N.%E0V%F8%3D%9Ca%891XH%C2%BE%D9y%3F%90!%E6%9C%C3%BFk%E5%011%C6-%F5%C8N%04%DF%BD%FF%89%DFt%83DN%60%3E%F3%AB%A0%DE%1A%5Dg%BE%10Q%97%1B%40%9C%A8o%10%8F%5E%828%B4%1B%60%87%F6%02%26%85%1Ch%1E%C1%2B%5Bk%FF%86%EE%B7j%09%9A%DA%9B%ACe%A3%F9%EC%DA!9%B4%D5%A6%81%86%86%98%CC%3C%5B%40%FA%81%B3%E9%CB%23%94%C16Azo%05%D4%E1%C1%95a%3B%8A'%A0%E8%CC%17%22%85%1D%BA%00%A2%FA%DC%0A%94%D1%D1%8D%8B%3A%84%17B%C7%60%1A%25Z%FC%8D%00%00%00%00IEND%AEB%60%82\"),\n"+"        url(\"data:image/png,%89PNG%0D%0A%1A%0A%00%00%00%0DIHDR%00%00%00%05%00%00%007%08%06%00%00%00%C4%DD%80C%00%00%03%1EiCCPICC%20Profile%00%00x%01%85T%DFk%D3P%14%FE%DAe%9D%B0%E1%8B%3Ag%11%09%3Eh%91ndStC%9C%B6kW%BA%CDZ%EA6%B7!H%9B%A6m%5C%9A%C6%24%ED~%B0%07%D9%8Bo%3A%C5w%F1%07%3E%F9%07%0C%D9%83o%7B%92%0D%C6%14a%F8%AC%88%22L%F6%22%B3%9E%9B4M'S%03%B9%F7%BB%DF%F9%EE9'%E7%E4%5E%A0%F9qZ%D3%14%2F%0F%14USO%C5%C2%FC%C4%E4%14%DF%F2%01%5E%1CC%2B%FChM%8B%86%16J%26G%40%0F%D3%B2y%EF%B3%F3%0E%1E%C6lt%EEo%DF%AB%FEc%D5%9A%95%0C%11%F0%1C%20%BE%945%C4%22%E1Y%A0i%5C%D4t%13%E0%D6%89%EF%9D15%C2%CDLsX%A7%04%09%1Fg8oc%81%E1%8C%8D%23%96f45%40%9A%09%C2%07%C5B%3AK%B8%408%98i%E0%F3%0D%D8%CE%81%14%E4'%26%A9%92.%8B%3C%ABER%2F%E5dE%B2%0C%F6%F0%1Fs%83%F2_%B0%A8%94%E9%9B%AD%E7%10%8Dm%9A%19N%D1%7C%8A%DE%1F9%7Dp%8C%E6%00%D5%C1%3F_%18%BDA%B8%9DpX6%E3%A35~B%CD%24%AE%11%26%BD%E7%EEti%98%EDe%9A%97Y)%12%25%1C%24%BCbT%AE3li%E6%0B%03%89%9A%E6%D3%ED%F4P%92%B0%9F4%BF43Y%F3%E3%EDP%95%04%EB1%C5%F5%F6KF%F4%BA%BD%D7%DB%91%93%07%E35%3E%A7)%D6%7F%40%FE%BD%F7%F5r%8A%E5y%92%F0%EB%B4%1E%8D%D5%F4%5B%92%3AV%DB%DB%E4%CD%A6%23%C3%C4wQ%3F%03HB%82%8E%1Cd(%E0%91B%0Ca%9Ac%C4%AA%F8L%16%19%22J%A4%D2itTy%B28%D6%3B(%93%96%ED%1CGx%C9_%0E%B8%5E%16%F5%5B%B2%B8%F6%E0%FB%9E%DD%25%D7%8E%BC%15%85%C5%B7%A3%D8Q%ED%B5%81%E9%BA%B2%13%9A%1B%7Fua%A5%A3n%E17%B9%E5%9B%1Bm%AB%0B%08Q%FE%8A%E5%B1H%5Ee%CAO%82Q%D7u6%E6%90S%97%FCu%0B%CF2%94%EE%25v%12X%0C%BA%AC%F0%5E%F8*l%0AO%85%17%C2%97%BF%D4%C8%CE%DE%AD%11%CB%80q%2C%3E%AB%9ES%CD%C6%EC%25%D2L%D2%EBd%B8%BF%8A%F5B%C6%18%F9%901CZ%9D%BE%24M%9C%8A9%F2%DAP%0B'%06w%82%EB%E6%E2%5C%2F%D7%07%9E%BB%CC%5D%E1%FA%B9%08%AD.r%23%8E%C2%17%F5E%7C!%F0%BE3%BE%3E_%B7o%88a%A7%DB%BE%D3d%EB%A31Z%EB%BB%D3%91%BA%A2%B1z%94%8F%DB'%F6%3D%8E%AA%13%19%B2%B1%BE%B1~V%08%2B%B4%A2cjJ%B3tO%00%03%25mN%97%F3%05%93%EF%11%84%0B%7C%88%AE-%89%8F%ABbW%90O%2B%0Ao%99%0C%5E%97%0CI%AFH%D9.%B0%3B%8F%ED%03%B6S%D6%5D%E6i_s9%F3*p%E9%1B%FD%C3%EB.7U%06%5E%19%C0%D1s.%17%A03u%E4%09%B0%7C%5E%2C%EB%15%DB%1F%3C%9E%B7%80%91%3B%DBc%AD%3Dma%BA%8B%3EV%AB%DBt.%5B%1E%01%BB%0F%AB%D5%9F%CF%AA%D5%DD%E7%E4%7F%0Bx%A3%FC%06%A9%23%0A%D6%C2%A1_2%00%00%00%09pHYs%00%00%0B%13%00%00%0B%13%01%00%9A%9C%18%00%00%00%3AIDAT8%11c%FC%FF%FF%7F%18%03%1A%60%01%F2%3F%A0%891%80%04%FF%11-%F8%17%9BJ%E2%05%B1ZD%81v%26t%E7%80%F8%A3%82h%A12%1A%20%A3%01%02%0F%01%BA%25%06%00%19%C0%0D%AEF%D5%3ES%00%00%00%00IEND%AEB%60%82\");\n"+"    background-repeat: no-repeat, repeat-x;\n"+"    background-position: center center, top left;\n"+"    color: transparent;\n"+"\n"+"    border: 1px solid black;\n"+"    -moz-border-radius: 2px;\n"+"    -webkit-border-radius: 2px;\n"+"    border-radius: 2px;\n"+"    \n"+"    cursor: pointer;\n"+"    pointer-events: auto;\n"+"}\n"+"\n"+".ace_dark .ace_fold {\n"+"}\n"+"\n"+".ace_fold:hover{\n"+"    background-image: \n"+"        url(\"data:image/png,%89PNG%0D%0A%1A%0A%00%00%00%0DIHDR%00%00%00%11%00%00%00%09%08%06%00%00%00%D4%E8%C7%0C%00%00%03%1EiCCPICC%20Profile%00%00x%01%85T%DFk%D3P%14%FE%DAe%9D%B0%E1%8B%3Ag%11%09%3Eh%91ndStC%9C%B6kW%BA%CDZ%EA6%B7!H%9B%A6m%5C%9A%C6%24%ED~%B0%07%D9%8Bo%3A%C5w%F1%07%3E%F9%07%0C%D9%83o%7B%92%0D%C6%14a%F8%AC%88%22L%F6%22%B3%9E%9B4M'S%03%B9%F7%BB%DF%F9%EE9'%E7%E4%5E%A0%F9qZ%D3%14%2F%0F%14USO%C5%C2%FC%C4%E4%14%DF%F2%01%5E%1CC%2B%FChM%8B%86%16J%26G%40%0F%D3%B2y%EF%B3%F3%0E%1E%C6lt%EEo%DF%AB%FEc%D5%9A%95%0C%11%F0%1C%20%BE%945%C4%22%E1Y%A0i%5C%D4t%13%E0%D6%89%EF%9D15%C2%CDLsX%A7%04%09%1Fg8oc%81%E1%8C%8D%23%96f45%40%9A%09%C2%07%C5B%3AK%B8%408%98i%E0%F3%0D%D8%CE%81%14%E4'%26%A9%92.%8B%3C%ABER%2F%E5dE%B2%0C%F6%F0%1Fs%83%F2_%B0%A8%94%E9%9B%AD%E7%10%8Dm%9A%19N%D1%7C%8A%DE%1F9%7Dp%8C%E6%00%D5%C1%3F_%18%BDA%B8%9DpX6%E3%A35~B%CD%24%AE%11%26%BD%E7%EEti%98%EDe%9A%97Y)%12%25%1C%24%BCbT%AE3li%E6%0B%03%89%9A%E6%D3%ED%F4P%92%B0%9F4%BF43Y%F3%E3%EDP%95%04%EB1%C5%F5%F6KF%F4%BA%BD%D7%DB%91%93%07%E35%3E%A7)%D6%7F%40%FE%BD%F7%F5r%8A%E5y%92%F0%EB%B4%1E%8D%D5%F4%5B%92%3AV%DB%DB%E4%CD%A6%23%C3%C4wQ%3F%03HB%82%8E%1Cd(%E0%91B%0Ca%9Ac%C4%AA%F8L%16%19%22J%A4%D2itTy%B28%D6%3B(%93%96%ED%1CGx%C9_%0E%B8%5E%16%F5%5B%B2%B8%F6%E0%FB%9E%DD%25%D7%8E%BC%15%85%C5%B7%A3%D8Q%ED%B5%81%E9%BA%B2%13%9A%1B%7Fua%A5%A3n%E17%B9%E5%9B%1Bm%AB%0B%08Q%FE%8A%E5%B1H%5Ee%CAO%82Q%D7u6%E6%90S%97%FCu%0B%CF2%94%EE%25v%12X%0C%BA%AC%F0%5E%F8*l%0AO%85%17%C2%97%BF%D4%C8%CE%DE%AD%11%CB%80q%2C%3E%AB%9ES%CD%C6%EC%25%D2L%D2%EBd%B8%BF%8A%F5B%C6%18%F9%901CZ%9D%BE%24M%9C%8A9%F2%DAP%0B'%06w%82%EB%E6%E2%5C%2F%D7%07%9E%BB%CC%5D%E1%FA%B9%08%AD.r%23%8E%C2%17%F5E%7C!%F0%BE3%BE%3E_%B7o%88a%A7%DB%BE%D3d%EB%A31Z%EB%BB%D3%91%BA%A2%B1z%94%8F%DB'%F6%3D%8E%AA%13%19%B2%B1%BE%B1~V%08%2B%B4%A2cjJ%B3tO%00%03%25mN%97%F3%05%93%EF%11%84%0B%7C%88%AE-%89%8F%ABbW%90O%2B%0Ao%99%0C%5E%97%0CI%AFH%D9.%B0%3B%8F%ED%03%B6S%D6%5D%E6i_s9%F3*p%E9%1B%FD%C3%EB.7U%06%5E%19%C0%D1s.%17%A03u%E4%09%B0%7C%5E%2C%EB%15%DB%1F%3C%9E%B7%80%91%3B%DBc%AD%3Dma%BA%8B%3EV%AB%DBt.%5B%1E%01%BB%0F%AB%D5%9F%CF%AA%D5%DD%E7%E4%7F%0Bx%A3%FC%06%A9%23%0A%D6%C2%A1_2%00%00%00%09pHYs%00%00%0B%13%00%00%0B%13%01%00%9A%9C%18%00%00%00%B5IDAT(%15%A5%91%3D%0E%02!%10%85ac%E1%05%D6%CE%D6%C6%CE%D2%E8%ED%CD%DE%C0%C6%D6N.%E0V%F8%3D%9Ca%891XH%C2%BE%D9y%3F%90!%E6%9C%C3%BFk%E5%011%C6-%F5%C8N%04%DF%BD%FF%89%DFt%83DN%60%3E%F3%AB%A0%DE%1A%5Dg%BE%10Q%97%1B%40%9C%A8o%10%8F%5E%828%B4%1B%60%87%F6%02%26%85%1Ch%1E%C1%2B%5Bk%FF%86%EE%B7j%09%9A%DA%9B%ACe%A3%F9%EC%DA!9%B4%D5%A6%81%86%86%98%CC%3C%5B%40%FA%81%B3%E9%CB%23%94%C16Azo%05%D4%E1%C1%95a%3B%8A'%A0%E8%CC%17%22%85%1D%BA%00%A2%FA%DC%0A%94%D1%D1%8D%8B%3A%84%17B%C7%60%1A%25Z%FC%8D%00%00%00%00IEND%AEB%60%82\"),\n"+"        url(\"data:image/png,%89PNG%0D%0A%1A%0A%00%00%00%0DIHDR%00%00%00%05%00%00%007%08%06%00%00%00%C4%DD%80C%00%00%03%1EiCCPICC%20Profile%00%00x%01%85T%DFk%D3P%14%FE%DAe%9D%B0%E1%8B%3Ag%11%09%3Eh%91ndStC%9C%B6kW%BA%CDZ%EA6%B7!H%9B%A6m%5C%9A%C6%24%ED~%B0%07%D9%8Bo%3A%C5w%F1%07%3E%F9%07%0C%D9%83o%7B%92%0D%C6%14a%F8%AC%88%22L%F6%22%B3%9E%9B4M'S%03%B9%F7%BB%DF%F9%EE9'%E7%E4%5E%A0%F9qZ%D3%14%2F%0F%14USO%C5%C2%FC%C4%E4%14%DF%F2%01%5E%1CC%2B%FChM%8B%86%16J%26G%40%0F%D3%B2y%EF%B3%F3%0E%1E%C6lt%EEo%DF%AB%FEc%D5%9A%95%0C%11%F0%1C%20%BE%945%C4%22%E1Y%A0i%5C%D4t%13%E0%D6%89%EF%9D15%C2%CDLsX%A7%04%09%1Fg8oc%81%E1%8C%8D%23%96f45%40%9A%09%C2%07%C5B%3AK%B8%408%98i%E0%F3%0D%D8%CE%81%14%E4'%26%A9%92.%8B%3C%ABER%2F%E5dE%B2%0C%F6%F0%1Fs%83%F2_%B0%A8%94%E9%9B%AD%E7%10%8Dm%9A%19N%D1%7C%8A%DE%1F9%7Dp%8C%E6%00%D5%C1%3F_%18%BDA%B8%9DpX6%E3%A35~B%CD%24%AE%11%26%BD%E7%EEti%98%EDe%9A%97Y)%12%25%1C%24%BCbT%AE3li%E6%0B%03%89%9A%E6%D3%ED%F4P%92%B0%9F4%BF43Y%F3%E3%EDP%95%04%EB1%C5%F5%F6KF%F4%BA%BD%D7%DB%91%93%07%E35%3E%A7)%D6%7F%40%FE%BD%F7%F5r%8A%E5y%92%F0%EB%B4%1E%8D%D5%F4%5B%92%3AV%DB%DB%E4%CD%A6%23%C3%C4wQ%3F%03HB%82%8E%1Cd(%E0%91B%0Ca%9Ac%C4%AA%F8L%16%19%22J%A4%D2itTy%B28%D6%3B(%93%96%ED%1CGx%C9_%0E%B8%5E%16%F5%5B%B2%B8%F6%E0%FB%9E%DD%25%D7%8E%BC%15%85%C5%B7%A3%D8Q%ED%B5%81%E9%BA%B2%13%9A%1B%7Fua%A5%A3n%E17%B9%E5%9B%1Bm%AB%0B%08Q%FE%8A%E5%B1H%5Ee%CAO%82Q%D7u6%E6%90S%97%FCu%0B%CF2%94%EE%25v%12X%0C%BA%AC%F0%5E%F8*l%0AO%85%17%C2%97%BF%D4%C8%CE%DE%AD%11%CB%80q%2C%3E%AB%9ES%CD%C6%EC%25%D2L%D2%EBd%B8%BF%8A%F5B%C6%18%F9%901CZ%9D%BE%24M%9C%8A9%F2%DAP%0B'%06w%82%EB%E6%E2%5C%2F%D7%07%9E%BB%CC%5D%E1%FA%B9%08%AD.r%23%8E%C2%17%F5E%7C!%F0%BE3%BE%3E_%B7o%88a%A7%DB%BE%D3d%EB%A31Z%EB%BB%D3%91%BA%A2%B1z%94%8F%DB'%F6%3D%8E%AA%13%19%B2%B1%BE%B1~V%08%2B%B4%A2cjJ%B3tO%00%03%25mN%97%F3%05%93%EF%11%84%0B%7C%88%AE-%89%8F%ABbW%90O%2B%0Ao%99%0C%5E%97%0CI%AFH%D9.%B0%3B%8F%ED%03%B6S%D6%5D%E6i_s9%F3*p%E9%1B%FD%C3%EB.7U%06%5E%19%C0%D1s.%17%A03u%E4%09%B0%7C%5E%2C%EB%15%DB%1F%3C%9E%B7%80%91%3B%DBc%AD%3Dma%BA%8B%3EV%AB%DBt.%5B%1E%01%BB%0F%AB%D5%9F%CF%AA%D5%DD%E7%E4%7F%0Bx%A3%FC%06%A9%23%0A%D6%C2%A1_2%00%00%00%09pHYs%00%00%0B%13%00%00%0B%13%01%00%9A%9C%18%00%00%003IDAT8%11c%FC%FF%FF%7F%3E%03%1A%60%01%F2%3F%A3%891%80%04%FFQ%26%F8w%C0%B43%A1%DB%0C%E2%8F%0A%A2%85%CAh%80%8C%06%08%3C%04%E8%96%18%00%A3S%0D%CD%CF%D8%C1%9D%00%00%00%00IEND%AEB%60%82\");\n"+"    background-repeat: no-repeat, repeat-x;\n"+"    background-position: center center, top left;\n"+"}\n"+"\n"+".ace_dragging .ace_content {\n"+"    cursor: move;\n"+"}\n"+"\n"+".ace_folding-enabled .ace_gutter-cell {\n"+"    padding-right: 13px;\n"+"}\n"+"\n"+".ace_fold-widget {\n"+"    box-sizing: border-box;\n"+"    -moz-box-sizing: border-box;\n"+"    -webkit-box-sizing: border-box;\n"+"\n"+"    margin: 0 -12px 1px 1px;\n"+"    display: inline-block;\n"+"    height: 14px;\n"+"    width: 11px;\n"+"    vertical-align: text-bottom;\n"+"    \n"+'    background-image: url("data:image/png,%89PNG%0D%0A%1A%0A%00%00%00%0DIHDR%00%00%00%05%00%00%00%05%08%06%00%00%00%8Do%26%E5%00%00%004IDATx%DAe%8A%B1%0D%000%0C%C2%F2%2CK%96%BC%D0%8F9%81%88H%E9%D0%0E%96%C0%10%92%3E%02%80%5E%82%E4%A9*-%EEsw%C8%CC%11%EE%96w%D8%DC%E9*Eh%0C%151(%00%00%00%00IEND%AEB%60%82");\n'+"    background-repeat: no-repeat;\n"+"    background-position: center 5px;\n"+"\n"+"    border-radius: 3px;\n"+"}\n"+"\n"+".ace_fold-widget.end {\n"+'    background-image: url("data:image/png,%89PNG%0D%0A%1A%0A%00%00%00%0DIHDR%00%00%00%05%00%00%00%05%08%06%00%00%00%8Do%26%E5%00%00%004IDATx%DAm%C7%C1%09%000%08C%D1%8C%ECE%C8E(%8E%EC%02)%1EZJ%F1%C1\'%04%07I%E1%E5%EE%CAL%F5%A2%99%99%22%E2%D6%1FU%B5%FE0%D9x%A7%26Wz5%0E%D5%00%00%00%00IEND%AEB%60%82");\n'+"}\n"+"\n"+".ace_fold-widget.closed {\n"+'    background-image: url("data:image/png,%89PNG%0D%0A%1A%0A%00%00%00%0DIHDR%00%00%00%03%00%00%00%06%08%06%00%00%00%06%E5%24%0C%00%00%009IDATx%DA5%CA%C1%09%000%08%03%C0%AC*(%3E%04%C1%0D%BA%B1%23%A4Uh%E0%20%81%C0%CC%F8%82%81%AA%A2%AArGfr%88%08%11%11%1C%DD%7D%E0%EE%5B%F6%F6%CB%B8%05Q%2F%E9tai%D9%00%00%00%00IEND%AEB%60%82");\n'+"}\n"+"\n"+".ace_fold-widget:hover {\n"+"    border: 1px solid rgba(0, 0, 0, 0.3);\n"+"    background-color: rgba(255, 255, 255, 0.2);\n"+"    -moz-box-shadow:inset 0 1px 1px rgba(255, 255, 255, 0.7);\n"+"    -moz-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);\n"+"    -webkit-box-shadow:inset 0 1px 1px rgba(255, 255, 255, 0.7);\n"+"    -webkit-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);\n"+"    box-shadow:inset 0 1px 1px rgba(255, 255, 255, 0.7);\n"+"    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);\n"+"    background-position: center 4px;\n"+"}\n"+"\n"+".ace_fold-widget:active {\n"+"    border: 1px solid rgba(0, 0, 0, 0.4);\n"+"    background-color: rgba(0, 0, 0, 0.05);\n"+"    -moz-box-shadow:inset 0 1px 1px rgba(255, 255, 255);\n"+"    -moz-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);\n"+"    -webkit-box-shadow:inset 0 1px 1px rgba(255, 255, 255);\n"+"    -webkit-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);\n"+"    box-shadow:inset 0 1px 1px rgba(255, 255, 255);\n"+"    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);\n"+"}\n"+"\n"+".ace_fold-widget.invalid {\n"+"    background-color: #FFB4B4;\n"+"    border-color: #DE5555;\n"+"}\n"+"");ace.define("ace/theme/textmate",["require","exports","module","ace/lib/dom"],function(b,a,c){a.isDark=false;a.cssClass="ace-tm";a.cssText=".ace-tm .ace_editor {  border: 2px solid rgb(159, 159, 159);}.ace-tm .ace_editor.ace_focus {  border: 2px solid #327fbd;}.ace-tm .ace_gutter {  background: #e8e8e8;  color: #333;}.ace-tm .ace_print_margin {  width: 1px;  background: #e8e8e8;}.ace-tm .ace_fold {    background-color: #0000A2;}.ace-tm .ace_text-layer {  cursor: text;}.ace-tm .ace_cursor {  border-left: 2px solid black;}.ace-tm .ace_cursor.ace_overwrite {  border-left: 0px;  border-bottom: 1px solid black;}        .ace-tm .ace_line .ace_invisible {  color: rgb(191, 191, 191);}.ace-tm .ace_line .ace_keyword {  color: blue;}.ace-tm .ace_line .ace_constant.ace_buildin {  color: rgb(88, 72, 246);}.ace-tm .ace_line .ace_constant.ace_language {  color: rgb(88, 92, 246);}.ace-tm .ace_line .ace_constant.ace_library {  color: rgb(6, 150, 14);}.ace-tm .ace_line .ace_invalid {  background-color: rgb(153, 0, 0);  color: white;}.ace-tm .ace_line .ace_support.ace_function {  color: rgb(60, 76, 114);}.ace-tm .ace_line .ace_support.ace_constant {  color: rgb(6, 150, 14);}.ace-tm .ace_line .ace_support.ace_type,.ace-tm .ace_line .ace_support.ace_class {  color: rgb(109, 121, 222);}.ace-tm .ace_line .ace_keyword.ace_operator {  color: rgb(104, 118, 135);}.ace-tm .ace_line .ace_string {  color: rgb(3, 106, 7);}.ace-tm .ace_line .ace_comment {  color: rgb(76, 136, 107);}.ace-tm .ace_line .ace_comment.ace_doc {  color: rgb(0, 102, 255);}.ace-tm .ace_line .ace_comment.ace_doc.ace_tag {  color: rgb(128, 159, 191);}.ace-tm .ace_line .ace_constant.ace_numeric {  color: rgb(0, 0, 205);}.ace-tm .ace_line .ace_variable {  color: rgb(49, 132, 149);}.ace-tm .ace_line .ace_xml_pe {  color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {  color: #0000A2;}.ace-tm .ace_markup.ace_markupine {    text-decoration:underline;}.ace-tm .ace_markup.ace_heading {  color: rgb(12, 7, 255);}.ace-tm .ace_markup.ace_list {  color:rgb(185, 6, 144);}.ace-tm .ace_marker-layer .ace_selection {  background: rgb(181, 213, 255);}.ace-tm .ace_marker-layer .ace_step {  background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {  background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {  margin: -1px 0 0 -1px;  border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active_line {  background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_marker-layer .ace_selected_word {  background: rgb(250, 250, 255);  border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_meta.ace_tag {  color:rgb(28, 2, 255);}.ace-tm .ace_string.ace_regex {  color: rgb(255, 0, 0)}";var d=b("../lib/dom");d.importCssString(a.cssText,a.cssClass)});(function(){ace.require(["ace/ace"],function(b){if(!window.ace){window.ace={}}for(var c in b){if(b.hasOwnProperty(c)){ace[c]=b[c]}}})})();ace.define("ace/mode/textile",["require","exports","module","ace/lib/oop","ace/mode/text","ace/tokenizer","ace/mode/textile_highlight_rules","ace/mode/matching_brace_outdent"],function(r,q,p){var o=r("../lib/oop"),n=r("./text").Mode,m=r("../tokenizer").Tokenizer,l=r("./textile_highlight_rules").TextileHighlightRules,k=r("./matching_brace_outdent").MatchingBraceOutdent,j=function(){this.$tokenizer=new m((new l).getRules()),this.$outdent=new k};o.inherits(j,n),function(){this.getNextLineIndent=function(e,d,f){return e=="intag"?f:""},this.checkOutdent=function(e,d,f){return this.$outdent.checkOutdent(d,f)},this.autoOutdent=function(e,d,f){this.$outdent.autoOutdent(d,f)}}.call(j.prototype),q.Mode=j}),ace.define("ace/mode/textile_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(i,g,m){var l=i("../lib/oop"),k=i("./text_highlight_rules").TextHighlightRules,j=function(){this.$rules={start:[{token:function(b){return b.match(/^h\d$/)?"markup.heading."+b.charAt(1):"markup.heading"},regex:"h1|h2|h3|h4|h5|h6|bq|p|bc|pre",next:"blocktag"},{token:"keyword",regex:"[\\*]+|[#]+"},{token:"text",regex:".+"}],blocktag:[{token:"keyword",regex:"\\. ",next:"start"},{token:"keyword",regex:"\\(",next:"blocktagproperties"}],blocktagproperties:[{token:"keyword",regex:"\\)",next:"blocktag"},{token:"string",regex:"[a-zA-Z0-9\\-_]+"},{token:"keyword",regex:"#"}]}};l.inherits(j,k),g.TextileHighlightRules=j}),ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(g,f,k){var j=g("../range").Range,i=function(){};((function(){this.checkOutdent=function(d,c){return/^\s+$/.test(d)?/^\s*\}/.test(c):!1},this.autoOutdent=function(l,d){var q=l.getLine(d),p=q.match(/^(\s*\})/);if(!p){return 0}var o=p[1].length,n=l.findMatchingBracket({row:d,column:o});if(!n||n.row==d){return 0}var m=this.$getIndent(l.getLine(n.row));l.replace(new j(d,0,d,o-1),m)},this.$getIndent=function(d){var c=d.match(/^(\s+)/);return c?c[1]:""}})).call(i.prototype),f.MatchingBraceOutdent=i}),function(){ace.require(["ace/ace"],function(d){window.ace||(window.ace={});for(var c in d){d.hasOwnProperty(c)&&(ace[c]=d[c])}})}();ace.define("ace/mode/php",["require","exports","module","ace/lib/oop","ace/mode/text","ace/tokenizer","ace/mode/php_highlight_rules","ace/mode/matching_brace_outdent","ace/range","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle"],function(x,w,v){var u=x("../lib/oop"),t=x("./text").Mode,s=x("../tokenizer").Tokenizer,r=x("./php_highlight_rules").PhpHighlightRules,q=x("./matching_brace_outdent").MatchingBraceOutdent,p=x("../range").Range,o=x("./behaviour/cstyle").CstyleBehaviour,n=x("./folding/cstyle").FoldMode,m=function(){this.$tokenizer=new s((new r).getRules()),this.$outdent=new q,this.$behaviour=new o,this.foldingRules=new n};u.inherits(m,t),function(){this.toggleCommentLines=function(F,E,D,C){var B=!0,A=/^(\s*)#/;for(var z=D;z<=C;z++){if(!A.test(E.getLine(z))){B=!1;break}}if(B){var y=new p(0,0,0,0);for(var z=D;z<=C;z++){var l=E.getLine(z),i=l.match(A);y.start.row=z,y.end.row=z,y.end.column=i[0].length,E.replace(y,i[1])}}else{E.indentRows(D,C,"#")}},this.getNextLineIndent=function(j,i,A){var z=this.$getIndent(i),y=this.$tokenizer.getLineTokens(i,j),l=y.tokens;if(l.length&&l[l.length-1].type=="comment"){return z}if(j=="start"){var k=i.match(/^.*[\{\(\[\:]\s*$/);k&&(z+=A)}return z},this.checkOutdent=function(e,d,f){return this.$outdent.checkOutdent(d,f)},this.autoOutdent=function(e,d,f){this.$outdent.autoOutdent(d,f)}}.call(m.prototype),w.Mode=m}),ace.define("ace/mode/php_highlight_rules",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/mode/doc_comment_highlight_rules","ace/mode/text_highlight_rules"],function(j,i,p){var o=j("../lib/oop"),n=j("../lib/lang"),m=j("./doc_comment_highlight_rules").DocCommentHighlightRules,l=j("./text_highlight_rules").TextHighlightRules,k=function(){var w=new m,v=n.arrayToMap("abs|acos|acosh|addcslashes|addslashes|aggregate|aggregate_info|aggregate_methods|aggregate_methods_by_list|aggregate_methods_by_regexp|aggregate_properties|aggregate_properties_by_list|aggregate_properties_by_regexp|aggregation_info|amqpconnection|amqpexchange|amqpqueue|apache_child_terminate|apache_get_modules|apache_get_version|apache_getenv|apache_lookup_uri|apache_note|apache_request_headers|apache_reset_timeout|apache_response_headers|apache_setenv|apc_add|apc_bin_dump|apc_bin_dumpfile|apc_bin_load|apc_bin_loadfile|apc_cache_info|apc_cas|apc_clear_cache|apc_compile_file|apc_dec|apc_define_constants|apc_delete|apc_delete_file|apc_exists|apc_fetch|apc_inc|apc_load_constants|apc_sma_info|apc_store|apciterator|apd_breakpoint|apd_callstack|apd_clunk|apd_continue|apd_croak|apd_dump_function_table|apd_dump_persistent_resources|apd_dump_regular_resources|apd_echo|apd_get_active_symbols|apd_set_pprof_trace|apd_set_session|apd_set_session_trace|apd_set_session_trace_socket|appenditerator|array|array_change_key_case|array_chunk|array_combine|array_count_values|array_diff|array_diff_assoc|array_diff_key|array_diff_uassoc|array_diff_ukey|array_fill|array_fill_keys|array_filter|array_flip|array_intersect|array_intersect_assoc|array_intersect_key|array_intersect_uassoc|array_intersect_ukey|array_key_exists|array_keys|array_map|array_merge|array_merge_recursive|array_multisort|array_pad|array_pop|array_product|array_push|array_rand|array_reduce|array_replace|array_replace_recursive|array_reverse|array_search|array_shift|array_slice|array_splice|array_sum|array_udiff|array_udiff_assoc|array_udiff_uassoc|array_uintersect|array_uintersect_assoc|array_uintersect_uassoc|array_unique|array_unshift|array_values|array_walk|array_walk_recursive|arrayaccess|arrayiterator|arrayobject|arsort|asin|asinh|asort|assert|assert_options|atan|atan2|atanh|audioproperties|badfunctioncallexception|badmethodcallexception|base64_decode|base64_encode|base_convert|basename|bbcode_add_element|bbcode_add_smiley|bbcode_create|bbcode_destroy|bbcode_parse|bbcode_set_arg_parser|bbcode_set_flags|bcadd|bccomp|bcdiv|bcmod|bcmul|bcompiler_load|bcompiler_load_exe|bcompiler_parse_class|bcompiler_read|bcompiler_write_class|bcompiler_write_constant|bcompiler_write_exe_footer|bcompiler_write_file|bcompiler_write_footer|bcompiler_write_function|bcompiler_write_functions_from_file|bcompiler_write_header|bcompiler_write_included_filename|bcpow|bcpowmod|bcscale|bcsqrt|bcsub|bin2hex|bind_textdomain_codeset|bindec|bindtextdomain|bson_decode|bson_encode|bumpValue|bzclose|bzcompress|bzdecompress|bzerrno|bzerror|bzerrstr|bzflush|bzopen|bzread|bzwrite|cachingiterator|cairo|cairo_create|cairo_font_face_get_type|cairo_font_face_status|cairo_font_options_create|cairo_font_options_equal|cairo_font_options_get_antialias|cairo_font_options_get_hint_metrics|cairo_font_options_get_hint_style|cairo_font_options_get_subpixel_order|cairo_font_options_hash|cairo_font_options_merge|cairo_font_options_set_antialias|cairo_font_options_set_hint_metrics|cairo_font_options_set_hint_style|cairo_font_options_set_subpixel_order|cairo_font_options_status|cairo_format_stride_for_width|cairo_image_surface_create|cairo_image_surface_create_for_data|cairo_image_surface_create_from_png|cairo_image_surface_get_data|cairo_image_surface_get_format|cairo_image_surface_get_height|cairo_image_surface_get_stride|cairo_image_surface_get_width|cairo_matrix_create_scale|cairo_matrix_create_translate|cairo_matrix_invert|cairo_matrix_multiply|cairo_matrix_rotate|cairo_matrix_transform_distance|cairo_matrix_transform_point|cairo_matrix_translate|cairo_pattern_add_color_stop_rgb|cairo_pattern_add_color_stop_rgba|cairo_pattern_create_for_surface|cairo_pattern_create_linear|cairo_pattern_create_radial|cairo_pattern_create_rgb|cairo_pattern_create_rgba|cairo_pattern_get_color_stop_count|cairo_pattern_get_color_stop_rgba|cairo_pattern_get_extend|cairo_pattern_get_filter|cairo_pattern_get_linear_points|cairo_pattern_get_matrix|cairo_pattern_get_radial_circles|cairo_pattern_get_rgba|cairo_pattern_get_surface|cairo_pattern_get_type|cairo_pattern_set_extend|cairo_pattern_set_filter|cairo_pattern_set_matrix|cairo_pattern_status|cairo_pdf_surface_create|cairo_pdf_surface_set_size|cairo_ps_get_levels|cairo_ps_level_to_string|cairo_ps_surface_create|cairo_ps_surface_dsc_begin_page_setup|cairo_ps_surface_dsc_begin_setup|cairo_ps_surface_dsc_comment|cairo_ps_surface_get_eps|cairo_ps_surface_restrict_to_level|cairo_ps_surface_set_eps|cairo_ps_surface_set_size|cairo_scaled_font_create|cairo_scaled_font_extents|cairo_scaled_font_get_ctm|cairo_scaled_font_get_font_face|cairo_scaled_font_get_font_matrix|cairo_scaled_font_get_font_options|cairo_scaled_font_get_scale_matrix|cairo_scaled_font_get_type|cairo_scaled_font_glyph_extents|cairo_scaled_font_status|cairo_scaled_font_text_extents|cairo_surface_copy_page|cairo_surface_create_similar|cairo_surface_finish|cairo_surface_flush|cairo_surface_get_content|cairo_surface_get_device_offset|cairo_surface_get_font_options|cairo_surface_get_type|cairo_surface_mark_dirty|cairo_surface_mark_dirty_rectangle|cairo_surface_set_device_offset|cairo_surface_set_fallback_resolution|cairo_surface_show_page|cairo_surface_status|cairo_surface_write_to_png|cairo_svg_surface_create|cairo_svg_surface_restrict_to_version|cairo_svg_version_to_string|cairoantialias|cairocontent|cairocontext|cairoexception|cairoextend|cairofillrule|cairofilter|cairofontface|cairofontoptions|cairofontslant|cairofonttype|cairofontweight|cairoformat|cairogradientpattern|cairohintmetrics|cairohintstyle|cairoimagesurface|cairolineargradient|cairolinecap|cairolinejoin|cairomatrix|cairooperator|cairopath|cairopattern|cairopatterntype|cairopdfsurface|cairopslevel|cairopssurface|cairoradialgradient|cairoscaledfont|cairosolidpattern|cairostatus|cairosubpixelorder|cairosurface|cairosurfacepattern|cairosurfacetype|cairosvgsurface|cairosvgversion|cairotoyfontface|cal_days_in_month|cal_from_jd|cal_info|cal_to_jd|calcul_hmac|calculhmac|call_user_func|call_user_func_array|call_user_method|call_user_method_array|callbackfilteriterator|ceil|chdb|chdb_create|chdir|checkdate|checkdnsrr|chgrp|chmod|chop|chown|chr|chroot|chunk_split|class_alias|class_exists|class_implements|class_parents|classkit_import|classkit_method_add|classkit_method_copy|classkit_method_redefine|classkit_method_remove|classkit_method_rename|clearstatcache|clone|closedir|closelog|collator|com|com_addref|com_create_guid|com_event_sink|com_get|com_get_active_object|com_invoke|com_isenum|com_load|com_load_typelib|com_message_pump|com_print_typeinfo|com_propget|com_propput|com_propset|com_release|com_set|compact|connection_aborted|connection_status|connection_timeout|constant|construct|construct|construct|convert_cyr_string|convert_uudecode|convert_uuencode|copy|cos|cosh|count|count_chars|countable|counter_bump|counter_bump_value|counter_create|counter_get|counter_get_meta|counter_get_named|counter_get_value|counter_reset|counter_reset_value|crack_check|crack_closedict|crack_getlastmessage|crack_opendict|crc32|create_function|crypt|ctype_alnum|ctype_alpha|ctype_cntrl|ctype_digit|ctype_graph|ctype_lower|ctype_print|ctype_punct|ctype_space|ctype_upper|ctype_xdigit|cubrid_affected_rows|cubrid_bind|cubrid_client_encoding|cubrid_close|cubrid_close_prepare|cubrid_close_request|cubrid_col_get|cubrid_col_size|cubrid_column_names|cubrid_column_types|cubrid_commit|cubrid_connect|cubrid_connect_with_url|cubrid_current_oid|cubrid_data_seek|cubrid_db_name|cubrid_disconnect|cubrid_drop|cubrid_errno|cubrid_error|cubrid_error_code|cubrid_error_code_facility|cubrid_error_msg|cubrid_execute|cubrid_fetch|cubrid_fetch_array|cubrid_fetch_assoc|cubrid_fetch_field|cubrid_fetch_lengths|cubrid_fetch_object|cubrid_fetch_row|cubrid_field_flags|cubrid_field_len|cubrid_field_name|cubrid_field_seek|cubrid_field_table|cubrid_field_type|cubrid_free_result|cubrid_get|cubrid_get_autocommit|cubrid_get_charset|cubrid_get_class_name|cubrid_get_client_info|cubrid_get_db_parameter|cubrid_get_server_info|cubrid_insert_id|cubrid_is_instance|cubrid_list_dbs|cubrid_load_from_glo|cubrid_lob_close|cubrid_lob_export|cubrid_lob_get|cubrid_lob_send|cubrid_lob_size|cubrid_lock_read|cubrid_lock_write|cubrid_move_cursor|cubrid_new_glo|cubrid_next_result|cubrid_num_cols|cubrid_num_fields|cubrid_num_rows|cubrid_ping|cubrid_prepare|cubrid_put|cubrid_query|cubrid_real_escape_string|cubrid_result|cubrid_rollback|cubrid_save_to_glo|cubrid_schema|cubrid_send_glo|cubrid_seq_drop|cubrid_seq_insert|cubrid_seq_put|cubrid_set_add|cubrid_set_autocommit|cubrid_set_db_parameter|cubrid_set_drop|cubrid_unbuffered_query|cubrid_version|curl_close|curl_copy_handle|curl_errno|curl_error|curl_exec|curl_getinfo|curl_init|curl_multi_add_handle|curl_multi_close|curl_multi_exec|curl_multi_getcontent|curl_multi_info_read|curl_multi_init|curl_multi_remove_handle|curl_multi_select|curl_setopt|curl_setopt_array|curl_version|current|cyrus_authenticate|cyrus_bind|cyrus_close|cyrus_connect|cyrus_query|cyrus_unbind|date|date_add|date_create|date_create_from_format|date_date_set|date_default_timezone_get|date_default_timezone_set|date_diff|date_format|date_get_last_errors|date_interval_create_from_date_string|date_interval_format|date_isodate_set|date_modify|date_offset_get|date_parse|date_parse_from_format|date_sub|date_sun_info|date_sunrise|date_sunset|date_time_set|date_timestamp_get|date_timestamp_set|date_timezone_get|date_timezone_set|dateinterval|dateperiod|datetime|datetimezone|db2_autocommit|db2_bind_param|db2_client_info|db2_close|db2_column_privileges|db2_columns|db2_commit|db2_conn_error|db2_conn_errormsg|db2_connect|db2_cursor_type|db2_escape_string|db2_exec|db2_execute|db2_fetch_array|db2_fetch_assoc|db2_fetch_both|db2_fetch_object|db2_fetch_row|db2_field_display_size|db2_field_name|db2_field_num|db2_field_precision|db2_field_scale|db2_field_type|db2_field_width|db2_foreign_keys|db2_free_result|db2_free_stmt|db2_get_option|db2_last_insert_id|db2_lob_read|db2_next_result|db2_num_fields|db2_num_rows|db2_pclose|db2_pconnect|db2_prepare|db2_primary_keys|db2_procedure_columns|db2_procedures|db2_result|db2_rollback|db2_server_info|db2_set_option|db2_special_columns|db2_statistics|db2_stmt_error|db2_stmt_errormsg|db2_table_privileges|db2_tables|dba_close|dba_delete|dba_exists|dba_fetch|dba_firstkey|dba_handlers|dba_insert|dba_key_split|dba_list|dba_nextkey|dba_open|dba_optimize|dba_popen|dba_replace|dba_sync|dbase_add_record|dbase_close|dbase_create|dbase_delete_record|dbase_get_header_info|dbase_get_record|dbase_get_record_with_names|dbase_numfields|dbase_numrecords|dbase_open|dbase_pack|dbase_replace_record|dbplus_add|dbplus_aql|dbplus_chdir|dbplus_close|dbplus_curr|dbplus_errcode|dbplus_errno|dbplus_find|dbplus_first|dbplus_flush|dbplus_freealllocks|dbplus_freelock|dbplus_freerlocks|dbplus_getlock|dbplus_getunique|dbplus_info|dbplus_last|dbplus_lockrel|dbplus_next|dbplus_open|dbplus_prev|dbplus_rchperm|dbplus_rcreate|dbplus_rcrtexact|dbplus_rcrtlike|dbplus_resolve|dbplus_restorepos|dbplus_rkeys|dbplus_ropen|dbplus_rquery|dbplus_rrename|dbplus_rsecindex|dbplus_runlink|dbplus_rzap|dbplus_savepos|dbplus_setindex|dbplus_setindexbynumber|dbplus_sql|dbplus_tcl|dbplus_tremove|dbplus_undo|dbplus_undoprepare|dbplus_unlockrel|dbplus_unselect|dbplus_update|dbplus_xlockrel|dbplus_xunlockrel|dbx_close|dbx_compare|dbx_connect|dbx_error|dbx_escape_string|dbx_fetch_row|dbx_query|dbx_sort|dcgettext|dcngettext|deaggregate|debug_backtrace|debug_print_backtrace|debug_zval_dump|decbin|dechex|decoct|define|define_syslog_variables|defined|deg2rad|delete|dgettext|die|dio_close|dio_fcntl|dio_open|dio_read|dio_seek|dio_stat|dio_tcsetattr|dio_truncate|dio_write|dir|directoryiterator|dirname|disk_free_space|disk_total_space|diskfreespace|dl|dngettext|dns_check_record|dns_get_mx|dns_get_record|dom_import_simplexml|domainexception|domattr|domattribute_name|domattribute_set_value|domattribute_specified|domattribute_value|domcharacterdata|domcomment|domdocument|domdocument_add_root|domdocument_create_attribute|domdocument_create_cdata_section|domdocument_create_comment|domdocument_create_element|domdocument_create_element_ns|domdocument_create_entity_reference|domdocument_create_processing_instruction|domdocument_create_text_node|domdocument_doctype|domdocument_document_element|domdocument_dump_file|domdocument_dump_mem|domdocument_get_element_by_id|domdocument_get_elements_by_tagname|domdocument_html_dump_mem|domdocument_xinclude|domdocumentfragment|domdocumenttype|domdocumenttype_entities|domdocumenttype_internal_subset|domdocumenttype_name|domdocumenttype_notations|domdocumenttype_public_id|domdocumenttype_system_id|domelement|domelement_get_attribute|domelement_get_attribute_node|domelement_get_elements_by_tagname|domelement_has_attribute|domelement_remove_attribute|domelement_set_attribute|domelement_set_attribute_node|domelement_tagname|domentity|domentityreference|domexception|domimplementation|domnamednodemap|domnode|domnode_add_namespace|domnode_append_child|domnode_append_sibling|domnode_attributes|domnode_child_nodes|domnode_clone_node|domnode_dump_node|domnode_first_child|domnode_get_content|domnode_has_attributes|domnode_has_child_nodes|domnode_insert_before|domnode_is_blank_node|domnode_last_child|domnode_next_sibling|domnode_node_name|domnode_node_type|domnode_node_value|domnode_owner_document|domnode_parent_node|domnode_prefix|domnode_previous_sibling|domnode_remove_child|domnode_replace_child|domnode_replace_node|domnode_set_content|domnode_set_name|domnode_set_namespace|domnode_unlink_node|domnodelist|domnotation|domprocessinginstruction|domprocessinginstruction_data|domprocessinginstruction_target|domtext|domxml_new_doc|domxml_open_file|domxml_open_mem|domxml_version|domxml_xmltree|domxml_xslt_stylesheet|domxml_xslt_stylesheet_doc|domxml_xslt_stylesheet_file|domxml_xslt_version|domxpath|domxsltstylesheet_process|domxsltstylesheet_result_dump_file|domxsltstylesheet_result_dump_mem|dotnet|dotnet_load|doubleval|each|easter_date|easter_days|echo|empty|emptyiterator|enchant_broker_describe|enchant_broker_dict_exists|enchant_broker_free|enchant_broker_free_dict|enchant_broker_get_error|enchant_broker_init|enchant_broker_list_dicts|enchant_broker_request_dict|enchant_broker_request_pwl_dict|enchant_broker_set_ordering|enchant_dict_add_to_personal|enchant_dict_add_to_session|enchant_dict_check|enchant_dict_describe|enchant_dict_get_error|enchant_dict_is_in_session|enchant_dict_quick_check|enchant_dict_store_replacement|enchant_dict_suggest|end|ereg|ereg_replace|eregi|eregi_replace|error_get_last|error_log|error_reporting|errorexception|escapeshellarg|escapeshellcmd|eval|event_add|event_base_free|event_base_loop|event_base_loopbreak|event_base_loopexit|event_base_new|event_base_priority_init|event_base_set|event_buffer_base_set|event_buffer_disable|event_buffer_enable|event_buffer_fd_set|event_buffer_free|event_buffer_new|event_buffer_priority_set|event_buffer_read|event_buffer_set_callback|event_buffer_timeout_set|event_buffer_watermark_set|event_buffer_write|event_del|event_free|event_new|event_set|exception|exec|exif_imagetype|exif_read_data|exif_tagname|exif_thumbnail|exit|exp|expect_expectl|expect_popen|explode|expm1|export|export|extension_loaded|extract|ezmlm_hash|fam_cancel_monitor|fam_close|fam_monitor_collection|fam_monitor_directory|fam_monitor_file|fam_next_event|fam_open|fam_pending|fam_resume_monitor|fam_suspend_monitor|fbsql_affected_rows|fbsql_autocommit|fbsql_blob_size|fbsql_change_user|fbsql_clob_size|fbsql_close|fbsql_commit|fbsql_connect|fbsql_create_blob|fbsql_create_clob|fbsql_create_db|fbsql_data_seek|fbsql_database|fbsql_database_password|fbsql_db_query|fbsql_db_status|fbsql_drop_db|fbsql_errno|fbsql_error|fbsql_fetch_array|fbsql_fetch_assoc|fbsql_fetch_field|fbsql_fetch_lengths|fbsql_fetch_object|fbsql_fetch_row|fbsql_field_flags|fbsql_field_len|fbsql_field_name|fbsql_field_seek|fbsql_field_table|fbsql_field_type|fbsql_free_result|fbsql_get_autostart_info|fbsql_hostname|fbsql_insert_id|fbsql_list_dbs|fbsql_list_fields|fbsql_list_tables|fbsql_next_result|fbsql_num_fields|fbsql_num_rows|fbsql_password|fbsql_pconnect|fbsql_query|fbsql_read_blob|fbsql_read_clob|fbsql_result|fbsql_rollback|fbsql_rows_fetched|fbsql_select_db|fbsql_set_characterset|fbsql_set_lob_mode|fbsql_set_password|fbsql_set_transaction|fbsql_start_db|fbsql_stop_db|fbsql_table_name|fbsql_tablename|fbsql_username|fbsql_warnings|fclose|fdf_add_doc_javascript|fdf_add_template|fdf_close|fdf_create|fdf_enum_values|fdf_errno|fdf_error|fdf_get_ap|fdf_get_attachment|fdf_get_encoding|fdf_get_file|fdf_get_flags|fdf_get_opt|fdf_get_status|fdf_get_value|fdf_get_version|fdf_header|fdf_next_field_name|fdf_open|fdf_open_string|fdf_remove_item|fdf_save|fdf_save_string|fdf_set_ap|fdf_set_encoding|fdf_set_file|fdf_set_flags|fdf_set_javascript_action|fdf_set_on_import_javascript|fdf_set_opt|fdf_set_status|fdf_set_submit_form_action|fdf_set_target_frame|fdf_set_value|fdf_set_version|feof|fflush|fgetc|fgetcsv|fgets|fgetss|file|file_exists|file_get_contents|file_put_contents|fileatime|filectime|filegroup|fileinode|filemtime|fileowner|fileperms|filepro|filepro_fieldcount|filepro_fieldname|filepro_fieldtype|filepro_fieldwidth|filepro_retrieve|filepro_rowcount|filesize|filesystemiterator|filetype|filter_has_var|filter_id|filter_input|filter_input_array|filter_list|filter_var|filter_var_array|filteriterator|finfo_buffer|finfo_close|finfo_file|finfo_open|finfo_set_flags|floatval|flock|floor|flush|fmod|fnmatch|fopen|forward_static_call|forward_static_call_array|fpassthru|fprintf|fputcsv|fputs|fread|frenchtojd|fribidi_log2vis|fscanf|fseek|fsockopen|fstat|ftell|ftok|ftp_alloc|ftp_cdup|ftp_chdir|ftp_chmod|ftp_close|ftp_connect|ftp_delete|ftp_exec|ftp_fget|ftp_fput|ftp_get|ftp_get_option|ftp_login|ftp_mdtm|ftp_mkdir|ftp_nb_continue|ftp_nb_fget|ftp_nb_fput|ftp_nb_get|ftp_nb_put|ftp_nlist|ftp_pasv|ftp_put|ftp_pwd|ftp_quit|ftp_raw|ftp_rawlist|ftp_rename|ftp_rmdir|ftp_set_option|ftp_site|ftp_size|ftp_ssl_connect|ftp_systype|ftruncate|func_get_arg|func_get_args|func_num_args|function_exists|fwrite|gc_collect_cycles|gc_disable|gc_enable|gc_enabled|gd_info|gearmanclient|gearmanjob|gearmantask|gearmanworker|geoip_continent_code_by_name|geoip_country_code3_by_name|geoip_country_code_by_name|geoip_country_name_by_name|geoip_database_info|geoip_db_avail|geoip_db_filename|geoip_db_get_all_info|geoip_id_by_name|geoip_isp_by_name|geoip_org_by_name|geoip_record_by_name|geoip_region_by_name|geoip_region_name_by_code|geoip_time_zone_by_country_and_region|getMeta|getNamed|getValue|get_browser|get_called_class|get_cfg_var|get_class|get_class_methods|get_class_vars|get_current_user|get_declared_classes|get_declared_interfaces|get_defined_constants|get_defined_functions|get_defined_vars|get_extension_funcs|get_headers|get_html_translation_table|get_include_path|get_included_files|get_loaded_extensions|get_magic_quotes_gpc|get_magic_quotes_runtime|get_meta_tags|get_object_vars|get_parent_class|get_required_files|get_resource_type|getallheaders|getconstant|getconstants|getconstructor|getcwd|getdate|getdefaultproperties|getdoccomment|getendline|getenv|getextension|getextensionname|getfilename|gethostbyaddr|gethostbyname|gethostbynamel|gethostname|getimagesize|getinterfacenames|getinterfaces|getlastmod|getmethod|getmethods|getmodifiers|getmxrr|getmygid|getmyinode|getmypid|getmyuid|getname|getnamespacename|getopt|getparentclass|getproperties|getproperty|getprotobyname|getprotobynumber|getrandmax|getrusage|getservbyname|getservbyport|getshortname|getstartline|getstaticproperties|getstaticpropertyvalue|gettext|gettimeofday|gettype|glob|globiterator|gmagick|gmagickdraw|gmagickpixel|gmdate|gmmktime|gmp_abs|gmp_add|gmp_and|gmp_clrbit|gmp_cmp|gmp_com|gmp_div|gmp_div_q|gmp_div_qr|gmp_div_r|gmp_divexact|gmp_fact|gmp_gcd|gmp_gcdext|gmp_hamdist|gmp_init|gmp_intval|gmp_invert|gmp_jacobi|gmp_legendre|gmp_mod|gmp_mul|gmp_neg|gmp_nextprime|gmp_or|gmp_perfect_square|gmp_popcount|gmp_pow|gmp_powm|gmp_prob_prime|gmp_random|gmp_scan0|gmp_scan1|gmp_setbit|gmp_sign|gmp_sqrt|gmp_sqrtrem|gmp_strval|gmp_sub|gmp_testbit|gmp_xor|gmstrftime|gnupg_adddecryptkey|gnupg_addencryptkey|gnupg_addsignkey|gnupg_cleardecryptkeys|gnupg_clearencryptkeys|gnupg_clearsignkeys|gnupg_decrypt|gnupg_decryptverify|gnupg_encrypt|gnupg_encryptsign|gnupg_export|gnupg_geterror|gnupg_getprotocol|gnupg_import|gnupg_init|gnupg_keyinfo|gnupg_setarmor|gnupg_seterrormode|gnupg_setsignmode|gnupg_sign|gnupg_verify|gopher_parsedir|grapheme_extract|grapheme_stripos|grapheme_stristr|grapheme_strlen|grapheme_strpos|grapheme_strripos|grapheme_strrpos|grapheme_strstr|grapheme_substr|gregoriantojd|gupnp_context_get_host_ip|gupnp_context_get_port|gupnp_context_get_subscription_timeout|gupnp_context_host_path|gupnp_context_new|gupnp_context_set_subscription_timeout|gupnp_context_timeout_add|gupnp_context_unhost_path|gupnp_control_point_browse_start|gupnp_control_point_browse_stop|gupnp_control_point_callback_set|gupnp_control_point_new|gupnp_device_action_callback_set|gupnp_device_info_get|gupnp_device_info_get_service|gupnp_root_device_get_available|gupnp_root_device_get_relative_location|gupnp_root_device_new|gupnp_root_device_set_available|gupnp_root_device_start|gupnp_root_device_stop|gupnp_service_action_get|gupnp_service_action_return|gupnp_service_action_return_error|gupnp_service_action_set|gupnp_service_freeze_notify|gupnp_service_info_get|gupnp_service_info_get_introspection|gupnp_service_introspection_get_state_variable|gupnp_service_notify|gupnp_service_proxy_action_get|gupnp_service_proxy_action_set|gupnp_service_proxy_add_notify|gupnp_service_proxy_callback_set|gupnp_service_proxy_get_subscribed|gupnp_service_proxy_remove_notify|gupnp_service_proxy_set_subscribed|gupnp_service_thaw_notify|gzclose|gzcompress|gzdecode|gzdeflate|gzencode|gzeof|gzfile|gzgetc|gzgets|gzgetss|gzinflate|gzopen|gzpassthru|gzputs|gzread|gzrewind|gzseek|gztell|gzuncompress|gzwrite|halt_compiler|haruannotation|haruannotation_setborderstyle|haruannotation_sethighlightmode|haruannotation_seticon|haruannotation_setopened|harudestination|harudestination_setfit|harudestination_setfitb|harudestination_setfitbh|harudestination_setfitbv|harudestination_setfith|harudestination_setfitr|harudestination_setfitv|harudestination_setxyz|harudoc|harudoc_addpage|harudoc_addpagelabel|harudoc_construct|harudoc_createoutline|harudoc_getcurrentencoder|harudoc_getcurrentpage|harudoc_getencoder|harudoc_getfont|harudoc_getinfoattr|harudoc_getpagelayout|harudoc_getpagemode|harudoc_getstreamsize|harudoc_insertpage|harudoc_loadjpeg|harudoc_loadpng|harudoc_loadraw|harudoc_loadttc|harudoc_loadttf|harudoc_loadtype1|harudoc_output|harudoc_readfromstream|harudoc_reseterror|harudoc_resetstream|harudoc_save|harudoc_savetostream|harudoc_setcompressionmode|harudoc_setcurrentencoder|harudoc_setencryptionmode|harudoc_setinfoattr|harudoc_setinfodateattr|harudoc_setopenaction|harudoc_setpagelayout|harudoc_setpagemode|harudoc_setpagesconfiguration|harudoc_setpassword|harudoc_setpermission|harudoc_usecnsencodings|harudoc_usecnsfonts|harudoc_usecntencodings|harudoc_usecntfonts|harudoc_usejpencodings|harudoc_usejpfonts|harudoc_usekrencodings|harudoc_usekrfonts|haruencoder|haruencoder_getbytetype|haruencoder_gettype|haruencoder_getunicode|haruencoder_getwritingmode|haruexception|harufont|harufont_getascent|harufont_getcapheight|harufont_getdescent|harufont_getencodingname|harufont_getfontname|harufont_gettextwidth|harufont_getunicodewidth|harufont_getxheight|harufont_measuretext|haruimage|haruimage_getbitspercomponent|haruimage_getcolorspace|haruimage_getheight|haruimage_getsize|haruimage_getwidth|haruimage_setcolormask|haruimage_setmaskimage|haruoutline|haruoutline_setdestination|haruoutline_setopened|harupage|harupage_arc|harupage_begintext|harupage_circle|harupage_closepath|harupage_concat|harupage_createdestination|harupage_createlinkannotation|harupage_createtextannotation|harupage_createurlannotation|harupage_curveto|harupage_curveto2|harupage_curveto3|harupage_drawimage|harupage_ellipse|harupage_endpath|harupage_endtext|harupage_eofill|harupage_eofillstroke|harupage_fill|harupage_fillstroke|harupage_getcharspace|harupage_getcmykfill|harupage_getcmykstroke|harupage_getcurrentfont|harupage_getcurrentfontsize|harupage_getcurrentpos|harupage_getcurrenttextpos|harupage_getdash|harupage_getfillingcolorspace|harupage_getflatness|harupage_getgmode|harupage_getgrayfill|harupage_getgraystroke|harupage_getheight|harupage_gethorizontalscaling|harupage_getlinecap|harupage_getlinejoin|harupage_getlinewidth|harupage_getmiterlimit|harupage_getrgbfill|harupage_getrgbstroke|harupage_getstrokingcolorspace|harupage_gettextleading|harupage_gettextmatrix|harupage_gettextrenderingmode|harupage_gettextrise|harupage_gettextwidth|harupage_gettransmatrix|harupage_getwidth|harupage_getwordspace|harupage_lineto|harupage_measuretext|harupage_movetextpos|harupage_moveto|harupage_movetonextline|harupage_rectangle|harupage_setcharspace|harupage_setcmykfill|harupage_setcmykstroke|harupage_setdash|harupage_setflatness|harupage_setfontandsize|harupage_setgrayfill|harupage_setgraystroke|harupage_setheight|harupage_sethorizontalscaling|harupage_setlinecap|harupage_setlinejoin|harupage_setlinewidth|harupage_setmiterlimit|harupage_setrgbfill|harupage_setrgbstroke|harupage_setrotate|harupage_setsize|harupage_setslideshow|harupage_settextleading|harupage_settextmatrix|harupage_settextrenderingmode|harupage_settextrise|harupage_setwidth|harupage_setwordspace|harupage_showtext|harupage_showtextnextline|harupage_stroke|harupage_textout|harupage_textrect|hasconstant|hash|hash_algos|hash_copy|hash_file|hash_final|hash_hmac|hash_hmac_file|hash_init|hash_update|hash_update_file|hash_update_stream|hasmethod|hasproperty|header|header_register_callback|header_remove|headers_list|headers_sent|hebrev|hebrevc|hex2bin|hexdec|highlight_file|highlight_string|html_entity_decode|htmlentities|htmlspecialchars|htmlspecialchars_decode|http_build_cookie|http_build_query|http_build_str|http_build_url|http_cache_etag|http_cache_last_modified|http_chunked_decode|http_date|http_deflate|http_get|http_get_request_body|http_get_request_body_stream|http_get_request_headers|http_head|http_inflate|http_match_etag|http_match_modified|http_match_request_header|http_negotiate_charset|http_negotiate_content_type|http_negotiate_language|http_parse_cookie|http_parse_headers|http_parse_message|http_parse_params|http_persistent_handles_clean|http_persistent_handles_count|http_persistent_handles_ident|http_post_data|http_post_fields|http_put_data|http_put_file|http_put_stream|http_redirect|http_request|http_request_body_encode|http_request_method_exists|http_request_method_name|http_request_method_register|http_request_method_unregister|http_response_code|http_send_content_disposition|http_send_content_type|http_send_data|http_send_file|http_send_last_modified|http_send_status|http_send_stream|http_support|http_throttle|httpdeflatestream|httpdeflatestream_construct|httpdeflatestream_factory|httpdeflatestream_finish|httpdeflatestream_flush|httpdeflatestream_update|httpinflatestream|httpinflatestream_construct|httpinflatestream_factory|httpinflatestream_finish|httpinflatestream_flush|httpinflatestream_update|httpmessage|httpmessage_addheaders|httpmessage_construct|httpmessage_detach|httpmessage_factory|httpmessage_fromenv|httpmessage_fromstring|httpmessage_getbody|httpmessage_getheader|httpmessage_getheaders|httpmessage_gethttpversion|httpmessage_getparentmessage|httpmessage_getrequestmethod|httpmessage_getrequesturl|httpmessage_getresponsecode|httpmessage_getresponsestatus|httpmessage_gettype|httpmessage_guesscontenttype|httpmessage_prepend|httpmessage_reverse|httpmessage_send|httpmessage_setbody|httpmessage_setheaders|httpmessage_sethttpversion|httpmessage_setrequestmethod|httpmessage_setrequesturl|httpmessage_setresponsecode|httpmessage_setresponsestatus|httpmessage_settype|httpmessage_tomessagetypeobject|httpmessage_tostring|httpquerystring|httpquerystring_construct|httpquerystring_get|httpquerystring_mod|httpquerystring_set|httpquerystring_singleton|httpquerystring_toarray|httpquerystring_tostring|httpquerystring_xlate|httprequest|httprequest_addcookies|httprequest_addheaders|httprequest_addpostfields|httprequest_addpostfile|httprequest_addputdata|httprequest_addquerydata|httprequest_addrawpostdata|httprequest_addssloptions|httprequest_clearhistory|httprequest_construct|httprequest_enablecookies|httprequest_getcontenttype|httprequest_getcookies|httprequest_getheaders|httprequest_gethistory|httprequest_getmethod|httprequest_getoptions|httprequest_getpostfields|httprequest_getpostfiles|httprequest_getputdata|httprequest_getputfile|httprequest_getquerydata|httprequest_getrawpostdata|httprequest_getrawrequestmessage|httprequest_getrawresponsemessage|httprequest_getrequestmessage|httprequest_getresponsebody|httprequest_getresponsecode|httprequest_getresponsecookies|httprequest_getresponsedata|httprequest_getresponseheader|httprequest_getresponseinfo|httprequest_getresponsemessage|httprequest_getresponsestatus|httprequest_getssloptions|httprequest_geturl|httprequest_resetcookies|httprequest_send|httprequest_setcontenttype|httprequest_setcookies|httprequest_setheaders|httprequest_setmethod|httprequest_setoptions|httprequest_setpostfields|httprequest_setpostfiles|httprequest_setputdata|httprequest_setputfile|httprequest_setquerydata|httprequest_setrawpostdata|httprequest_setssloptions|httprequest_seturl|httprequestpool|httprequestpool_attach|httprequestpool_construct|httprequestpool_destruct|httprequestpool_detach|httprequestpool_getattachedrequests|httprequestpool_getfinishedrequests|httprequestpool_reset|httprequestpool_send|httprequestpool_socketperform|httprequestpool_socketselect|httpresponse|httpresponse_capture|httpresponse_getbuffersize|httpresponse_getcache|httpresponse_getcachecontrol|httpresponse_getcontentdisposition|httpresponse_getcontenttype|httpresponse_getdata|httpresponse_getetag|httpresponse_getfile|httpresponse_getgzip|httpresponse_getheader|httpresponse_getlastmodified|httpresponse_getrequestbody|httpresponse_getrequestbodystream|httpresponse_getrequestheaders|httpresponse_getstream|httpresponse_getthrottledelay|httpresponse_guesscontenttype|httpresponse_redirect|httpresponse_send|httpresponse_setbuffersize|httpresponse_setcache|httpresponse_setcachecontrol|httpresponse_setcontentdisposition|httpresponse_setcontenttype|httpresponse_setdata|httpresponse_setetag|httpresponse_setfile|httpresponse_setgzip|httpresponse_setheader|httpresponse_setlastmodified|httpresponse_setstream|httpresponse_setthrottledelay|httpresponse_status|hw_array2objrec|hw_changeobject|hw_children|hw_childrenobj|hw_close|hw_connect|hw_connection_info|hw_cp|hw_deleteobject|hw_docbyanchor|hw_docbyanchorobj|hw_document_attributes|hw_document_bodytag|hw_document_content|hw_document_setcontent|hw_document_size|hw_dummy|hw_edittext|hw_error|hw_errormsg|hw_free_document|hw_getanchors|hw_getanchorsobj|hw_getandlock|hw_getchildcoll|hw_getchildcollobj|hw_getchilddoccoll|hw_getchilddoccollobj|hw_getobject|hw_getobjectbyquery|hw_getobjectbyquerycoll|hw_getobjectbyquerycollobj|hw_getobjectbyqueryobj|hw_getparents|hw_getparentsobj|hw_getrellink|hw_getremote|hw_getremotechildren|hw_getsrcbydestobj|hw_gettext|hw_getusername|hw_identify|hw_incollections|hw_info|hw_inscoll|hw_insdoc|hw_insertanchors|hw_insertdocument|hw_insertobject|hw_mapid|hw_modifyobject|hw_mv|hw_new_document|hw_objrec2array|hw_output_document|hw_pconnect|hw_pipedocument|hw_root|hw_setlinkroot|hw_stat|hw_unlock|hw_who|hwapi_attribute|hwapi_attribute_key|hwapi_attribute_langdepvalue|hwapi_attribute_value|hwapi_attribute_values|hwapi_checkin|hwapi_checkout|hwapi_children|hwapi_content|hwapi_content_mimetype|hwapi_content_read|hwapi_copy|hwapi_dbstat|hwapi_dcstat|hwapi_dstanchors|hwapi_dstofsrcanchor|hwapi_error_count|hwapi_error_reason|hwapi_find|hwapi_ftstat|hwapi_hgcsp|hwapi_hwstat|hwapi_identify|hwapi_info|hwapi_insert|hwapi_insertanchor|hwapi_insertcollection|hwapi_insertdocument|hwapi_link|hwapi_lock|hwapi_move|hwapi_new_content|hwapi_object|hwapi_object_assign|hwapi_object_attreditable|hwapi_object_count|hwapi_object_insert|hwapi_object_new|hwapi_object_remove|hwapi_object_title|hwapi_object_value|hwapi_objectbyanchor|hwapi_parents|hwapi_reason_description|hwapi_reason_type|hwapi_remove|hwapi_replace|hwapi_setcommittedversion|hwapi_srcanchors|hwapi_srcsofdst|hwapi_unlock|hwapi_user|hwapi_userlist|hypot|ibase_add_user|ibase_affected_rows|ibase_backup|ibase_blob_add|ibase_blob_cancel|ibase_blob_close|ibase_blob_create|ibase_blob_echo|ibase_blob_get|ibase_blob_import|ibase_blob_info|ibase_blob_open|ibase_close|ibase_commit|ibase_commit_ret|ibase_connect|ibase_db_info|ibase_delete_user|ibase_drop_db|ibase_errcode|ibase_errmsg|ibase_execute|ibase_fetch_assoc|ibase_fetch_object|ibase_fetch_row|ibase_field_info|ibase_free_event_handler|ibase_free_query|ibase_free_result|ibase_gen_id|ibase_maintain_db|ibase_modify_user|ibase_name_result|ibase_num_fields|ibase_num_params|ibase_param_info|ibase_pconnect|ibase_prepare|ibase_query|ibase_restore|ibase_rollback|ibase_rollback_ret|ibase_server_info|ibase_service_attach|ibase_service_detach|ibase_set_event_handler|ibase_timefmt|ibase_trans|ibase_wait_event|iconv|iconv_get_encoding|iconv_mime_decode|iconv_mime_decode_headers|iconv_mime_encode|iconv_set_encoding|iconv_strlen|iconv_strpos|iconv_strrpos|iconv_substr|id3_get_frame_long_name|id3_get_frame_short_name|id3_get_genre_id|id3_get_genre_list|id3_get_genre_name|id3_get_tag|id3_get_version|id3_remove_tag|id3_set_tag|id3v2attachedpictureframe|id3v2frame|id3v2tag|idate|idn_to_ascii|idn_to_unicode|idn_to_utf8|ifx_affected_rows|ifx_blobinfile_mode|ifx_byteasvarchar|ifx_close|ifx_connect|ifx_copy_blob|ifx_create_blob|ifx_create_char|ifx_do|ifx_error|ifx_errormsg|ifx_fetch_row|ifx_fieldproperties|ifx_fieldtypes|ifx_free_blob|ifx_free_char|ifx_free_result|ifx_get_blob|ifx_get_char|ifx_getsqlca|ifx_htmltbl_result|ifx_nullformat|ifx_num_fields|ifx_num_rows|ifx_pconnect|ifx_prepare|ifx_query|ifx_textasvarchar|ifx_update_blob|ifx_update_char|ifxus_close_slob|ifxus_create_slob|ifxus_free_slob|ifxus_open_slob|ifxus_read_slob|ifxus_seek_slob|ifxus_tell_slob|ifxus_write_slob|ignore_user_abort|iis_add_server|iis_get_dir_security|iis_get_script_map|iis_get_server_by_comment|iis_get_server_by_path|iis_get_server_rights|iis_get_service_state|iis_remove_server|iis_set_app_settings|iis_set_dir_security|iis_set_script_map|iis_set_server_rights|iis_start_server|iis_start_service|iis_stop_server|iis_stop_service|image2wbmp|image_type_to_extension|image_type_to_mime_type|imagealphablending|imageantialias|imagearc|imagechar|imagecharup|imagecolorallocate|imagecolorallocatealpha|imagecolorat|imagecolorclosest|imagecolorclosestalpha|imagecolorclosesthwb|imagecolordeallocate|imagecolorexact|imagecolorexactalpha|imagecolormatch|imagecolorresolve|imagecolorresolvealpha|imagecolorset|imagecolorsforindex|imagecolorstotal|imagecolortransparent|imageconvolution|imagecopy|imagecopymerge|imagecopymergegray|imagecopyresampled|imagecopyresized|imagecreate|imagecreatefromgd|imagecreatefromgd2|imagecreatefromgd2part|imagecreatefromgif|imagecreatefromjpeg|imagecreatefrompng|imagecreatefromstring|imagecreatefromwbmp|imagecreatefromxbm|imagecreatefromxpm|imagecreatetruecolor|imagedashedline|imagedestroy|imageellipse|imagefill|imagefilledarc|imagefilledellipse|imagefilledpolygon|imagefilledrectangle|imagefilltoborder|imagefilter|imagefontheight|imagefontwidth|imageftbbox|imagefttext|imagegammacorrect|imagegd|imagegd2|imagegif|imagegrabscreen|imagegrabwindow|imageinterlace|imageistruecolor|imagejpeg|imagelayereffect|imageline|imageloadfont|imagepalettecopy|imagepng|imagepolygon|imagepsbbox|imagepsencodefont|imagepsextendfont|imagepsfreefont|imagepsloadfont|imagepsslantfont|imagepstext|imagerectangle|imagerotate|imagesavealpha|imagesetbrush|imagesetpixel|imagesetstyle|imagesetthickness|imagesettile|imagestring|imagestringup|imagesx|imagesy|imagetruecolortopalette|imagettfbbox|imagettftext|imagetypes|imagewbmp|imagexbm|imagick|imagick_adaptiveblurimage|imagick_adaptiveresizeimage|imagick_adaptivesharpenimage|imagick_adaptivethresholdimage|imagick_addimage|imagick_addnoiseimage|imagick_affinetransformimage|imagick_animateimages|imagick_annotateimage|imagick_appendimages|imagick_averageimages|imagick_blackthresholdimage|imagick_blurimage|imagick_borderimage|imagick_charcoalimage|imagick_chopimage|imagick_clear|imagick_clipimage|imagick_clippathimage|imagick_clone|imagick_clutimage|imagick_coalesceimages|imagick_colorfloodfillimage|imagick_colorizeimage|imagick_combineimages|imagick_commentimage|imagick_compareimagechannels|imagick_compareimagelayers|imagick_compareimages|imagick_compositeimage|imagick_construct|imagick_contrastimage|imagick_contraststretchimage|imagick_convolveimage|imagick_cropimage|imagick_cropthumbnailimage|imagick_current|imagick_cyclecolormapimage|imagick_decipherimage|imagick_deconstructimages|imagick_deleteimageartifact|imagick_despeckleimage|imagick_destroy|imagick_displayimage|imagick_displayimages|imagick_distortimage|imagick_drawimage|imagick_edgeimage|imagick_embossimage|imagick_encipherimage|imagick_enhanceimage|imagick_equalizeimage|imagick_evaluateimage|imagick_extentimage|imagick_flattenimages|imagick_flipimage|imagick_floodfillpaintimage|imagick_flopimage|imagick_frameimage|imagick_fximage|imagick_gammaimage|imagick_gaussianblurimage|imagick_getcolorspace|imagick_getcompression|imagick_getcompressionquality|imagick_getcopyright|imagick_getfilename|imagick_getfont|imagick_getformat|imagick_getgravity|imagick_gethomeurl|imagick_getimage|imagick_getimagealphachannel|imagick_getimageartifact|imagick_getimagebackgroundcolor|imagick_getimageblob|imagick_getimageblueprimary|imagick_getimagebordercolor|imagick_getimagechanneldepth|imagick_getimagechanneldistortion|imagick_getimagechanneldistortions|imagick_getimagechannelextrema|imagick_getimagechannelmean|imagick_getimagechannelrange|imagick_getimagechannelstatistics|imagick_getimageclipmask|imagick_getimagecolormapcolor|imagick_getimagecolors|imagick_getimagecolorspace|imagick_getimagecompose|imagick_getimagecompression|imagick_getimagecompressionquality|imagick_getimagedelay|imagick_getimagedepth|imagick_getimagedispose|imagick_getimagedistortion|imagick_getimageextrema|imagick_getimagefilename|imagick_getimageformat|imagick_getimagegamma|imagick_getimagegeometry|imagick_getimagegravity|imagick_getimagegreenprimary|imagick_getimageheight|imagick_getimagehistogram|imagick_getimageindex|imagick_getimageinterlacescheme|imagick_getimageinterpolatemethod|imagick_getimageiterations|imagick_getimagelength|imagick_getimagemagicklicense|imagick_getimagematte|imagick_getimagemattecolor|imagick_getimageorientation|imagick_getimagepage|imagick_getimagepixelcolor|imagick_getimageprofile|imagick_getimageprofiles|imagick_getimageproperties|imagick_getimageproperty|imagick_getimageredprimary|imagick_getimageregion|imagick_getimagerenderingintent|imagick_getimageresolution|imagick_getimagesblob|imagick_getimagescene|imagick_getimagesignature|imagick_getimagesize|imagick_getimagetickspersecond|imagick_getimagetotalinkdensity|imagick_getimagetype|imagick_getimageunits|imagick_getimagevirtualpixelmethod|imagick_getimagewhitepoint|imagick_getimagewidth|imagick_getinterlacescheme|imagick_getiteratorindex|imagick_getnumberimages|imagick_getoption|imagick_getpackagename|imagick_getpage|imagick_getpixeliterator|imagick_getpixelregioniterator|imagick_getpointsize|imagick_getquantumdepth|imagick_getquantumrange|imagick_getreleasedate|imagick_getresource|imagick_getresourcelimit|imagick_getsamplingfactors|imagick_getsize|imagick_getsizeoffset|imagick_getversion|imagick_hasnextimage|imagick_haspreviousimage|imagick_identifyimage|imagick_implodeimage|imagick_labelimage|imagick_levelimage|imagick_linearstretchimage|imagick_liquidrescaleimage|imagick_magnifyimage|imagick_mapimage|imagick_mattefloodfillimage|imagick_medianfilterimage|imagick_mergeimagelayers|imagick_minifyimage|imagick_modulateimage|imagick_montageimage|imagick_morphimages|imagick_mosaicimages|imagick_motionblurimage|imagick_negateimage|imagick_newimage|imagick_newpseudoimage|imagick_nextimage|imagick_normalizeimage|imagick_oilpaintimage|imagick_opaquepaintimage|imagick_optimizeimagelayers|imagick_orderedposterizeimage|imagick_paintfloodfillimage|imagick_paintopaqueimage|imagick_painttransparentimage|imagick_pingimage|imagick_pingimageblob|imagick_pingimagefile|imagick_polaroidimage|imagick_posterizeimage|imagick_previewimages|imagick_previousimage|imagick_profileimage|imagick_quantizeimage|imagick_quantizeimages|imagick_queryfontmetrics|imagick_queryfonts|imagick_queryformats|imagick_radialblurimage|imagick_raiseimage|imagick_randomthresholdimage|imagick_readimage|imagick_readimageblob|imagick_readimagefile|imagick_recolorimage|imagick_reducenoiseimage|imagick_removeimage|imagick_removeimageprofile|imagick_render|imagick_resampleimage|imagick_resetimagepage|imagick_resizeimage|imagick_rollimage|imagick_rotateimage|imagick_roundcorners|imagick_sampleimage|imagick_scaleimage|imagick_separateimagechannel|imagick_sepiatoneimage|imagick_setbackgroundcolor|imagick_setcolorspace|imagick_setcompression|imagick_setcompressionquality|imagick_setfilename|imagick_setfirstiterator|imagick_setfont|imagick_setformat|imagick_setgravity|imagick_setimage|imagick_setimagealphachannel|imagick_setimageartifact|imagick_setimagebackgroundcolor|imagick_setimagebias|imagick_setimageblueprimary|imagick_setimagebordercolor|imagick_setimagechanneldepth|imagick_setimageclipmask|imagick_setimagecolormapcolor|imagick_setimagecolorspace|imagick_setimagecompose|imagick_setimagecompression|imagick_setimagecompressionquality|imagick_setimagedelay|imagick_setimagedepth|imagick_setimagedispose|imagick_setimageextent|imagick_setimagefilename|imagick_setimageformat|imagick_setimagegamma|imagick_setimagegravity|imagick_setimagegreenprimary|imagick_setimageindex|imagick_setimageinterlacescheme|imagick_setimageinterpolatemethod|imagick_setimageiterations|imagick_setimagematte|imagick_setimagemattecolor|imagick_setimageopacity|imagick_setimageorientation|imagick_setimagepage|imagick_setimageprofile|imagick_setimageproperty|imagick_setimageredprimary|imagick_setimagerenderingintent|imagick_setimageresolution|imagick_setimagescene|imagick_setimagetickspersecond|imagick_setimagetype|imagick_setimageunits|imagick_setimagevirtualpixelmethod|imagick_setimagewhitepoint|imagick_setinterlacescheme|imagick_setiteratorindex|imagick_setlastiterator|imagick_setoption|imagick_setpage|imagick_setpointsize|imagick_setresolution|imagick_setresourcelimit|imagick_setsamplingfactors|imagick_setsize|imagick_setsizeoffset|imagick_settype|imagick_shadeimage|imagick_shadowimage|imagick_sharpenimage|imagick_shaveimage|imagick_shearimage|imagick_sigmoidalcontrastimage|imagick_sketchimage|imagick_solarizeimage|imagick_spliceimage|imagick_spreadimage|imagick_steganoimage|imagick_stereoimage|imagick_stripimage|imagick_swirlimage|imagick_textureimage|imagick_thresholdimage|imagick_thumbnailimage|imagick_tintimage|imagick_transformimage|imagick_transparentpaintimage|imagick_transposeimage|imagick_transverseimage|imagick_trimimage|imagick_uniqueimagecolors|imagick_unsharpmaskimage|imagick_valid|imagick_vignetteimage|imagick_waveimage|imagick_whitethresholdimage|imagick_writeimage|imagick_writeimagefile|imagick_writeimages|imagick_writeimagesfile|imagickdraw|imagickdraw_affine|imagickdraw_annotation|imagickdraw_arc|imagickdraw_bezier|imagickdraw_circle|imagickdraw_clear|imagickdraw_clone|imagickdraw_color|imagickdraw_comment|imagickdraw_composite|imagickdraw_construct|imagickdraw_destroy|imagickdraw_ellipse|imagickdraw_getclippath|imagickdraw_getcliprule|imagickdraw_getclipunits|imagickdraw_getfillcolor|imagickdraw_getfillopacity|imagickdraw_getfillrule|imagickdraw_getfont|imagickdraw_getfontfamily|imagickdraw_getfontsize|imagickdraw_getfontstyle|imagickdraw_getfontweight|imagickdraw_getgravity|imagickdraw_getstrokeantialias|imagickdraw_getstrokecolor|imagickdraw_getstrokedasharray|imagickdraw_getstrokedashoffset|imagickdraw_getstrokelinecap|imagickdraw_getstrokelinejoin|imagickdraw_getstrokemiterlimit|imagickdraw_getstrokeopacity|imagickdraw_getstrokewidth|imagickdraw_gettextalignment|imagickdraw_gettextantialias|imagickdraw_gettextdecoration|imagickdraw_gettextencoding|imagickdraw_gettextundercolor|imagickdraw_getvectorgraphics|imagickdraw_line|imagickdraw_matte|imagickdraw_pathclose|imagickdraw_pathcurvetoabsolute|imagickdraw_pathcurvetoquadraticbezierabsolute|imagickdraw_pathcurvetoquadraticbezierrelative|imagickdraw_pathcurvetoquadraticbeziersmoothabsolute|imagickdraw_pathcurvetoquadraticbeziersmoothrelative|imagickdraw_pathcurvetorelative|imagickdraw_pathcurvetosmoothabsolute|imagickdraw_pathcurvetosmoothrelative|imagickdraw_pathellipticarcabsolute|imagickdraw_pathellipticarcrelative|imagickdraw_pathfinish|imagickdraw_pathlinetoabsolute|imagickdraw_pathlinetohorizontalabsolute|imagickdraw_pathlinetohorizontalrelative|imagickdraw_pathlinetorelative|imagickdraw_pathlinetoverticalabsolute|imagickdraw_pathlinetoverticalrelative|imagickdraw_pathmovetoabsolute|imagickdraw_pathmovetorelative|imagickdraw_pathstart|imagickdraw_point|imagickdraw_polygon|imagickdraw_polyline|imagickdraw_pop|imagickdraw_popclippath|imagickdraw_popdefs|imagickdraw_poppattern|imagickdraw_push|imagickdraw_pushclippath|imagickdraw_pushdefs|imagickdraw_pushpattern|imagickdraw_rectangle|imagickdraw_render|imagickdraw_rotate|imagickdraw_roundrectangle|imagickdraw_scale|imagickdraw_setclippath|imagickdraw_setcliprule|imagickdraw_setclipunits|imagickdraw_setfillalpha|imagickdraw_setfillcolor|imagickdraw_setfillopacity|imagickdraw_setfillpatternurl|imagickdraw_setfillrule|imagickdraw_setfont|imagickdraw_setfontfamily|imagickdraw_setfontsize|imagickdraw_setfontstretch|imagickdraw_setfontstyle|imagickdraw_setfontweight|imagickdraw_setgravity|imagickdraw_setstrokealpha|imagickdraw_setstrokeantialias|imagickdraw_setstrokecolor|imagickdraw_setstrokedasharray|imagickdraw_setstrokedashoffset|imagickdraw_setstrokelinecap|imagickdraw_setstrokelinejoin|imagickdraw_setstrokemiterlimit|imagickdraw_setstrokeopacity|imagickdraw_setstrokepatternurl|imagickdraw_setstrokewidth|imagickdraw_settextalignment|imagickdraw_settextantialias|imagickdraw_settextdecoration|imagickdraw_settextencoding|imagickdraw_settextundercolor|imagickdraw_setvectorgraphics|imagickdraw_setviewbox|imagickdraw_skewx|imagickdraw_skewy|imagickdraw_translate|imagickpixel|imagickpixel_clear|imagickpixel_construct|imagickpixel_destroy|imagickpixel_getcolor|imagickpixel_getcolorasstring|imagickpixel_getcolorcount|imagickpixel_getcolorvalue|imagickpixel_gethsl|imagickpixel_issimilar|imagickpixel_setcolor|imagickpixel_setcolorvalue|imagickpixel_sethsl|imagickpixeliterator|imagickpixeliterator_clear|imagickpixeliterator_construct|imagickpixeliterator_destroy|imagickpixeliterator_getcurrentiteratorrow|imagickpixeliterator_getiteratorrow|imagickpixeliterator_getnextiteratorrow|imagickpixeliterator_getpreviousiteratorrow|imagickpixeliterator_newpixeliterator|imagickpixeliterator_newpixelregioniterator|imagickpixeliterator_resetiterator|imagickpixeliterator_setiteratorfirstrow|imagickpixeliterator_setiteratorlastrow|imagickpixeliterator_setiteratorrow|imagickpixeliterator_synciterator|imap_8bit|imap_alerts|imap_append|imap_base64|imap_binary|imap_body|imap_bodystruct|imap_check|imap_clearflag_full|imap_close|imap_create|imap_createmailbox|imap_delete|imap_deletemailbox|imap_errors|imap_expunge|imap_fetch_overview|imap_fetchbody|imap_fetchheader|imap_fetchmime|imap_fetchstructure|imap_fetchtext|imap_gc|imap_get_quota|imap_get_quotaroot|imap_getacl|imap_getmailboxes|imap_getsubscribed|imap_header|imap_headerinfo|imap_headers|imap_last_error|imap_list|imap_listmailbox|imap_listscan|imap_listsubscribed|imap_lsub|imap_mail|imap_mail_compose|imap_mail_copy|imap_mail_move|imap_mailboxmsginfo|imap_mime_header_decode|imap_msgno|imap_num_msg|imap_num_recent|imap_open|imap_ping|imap_qprint|imap_rename|imap_renamemailbox|imap_reopen|imap_rfc822_parse_adrlist|imap_rfc822_parse_headers|imap_rfc822_write_address|imap_savebody|imap_scan|imap_scanmailbox|imap_search|imap_set_quota|imap_setacl|imap_setflag_full|imap_sort|imap_status|imap_subscribe|imap_thread|imap_timeout|imap_uid|imap_undelete|imap_unsubscribe|imap_utf7_decode|imap_utf7_encode|imap_utf8|implementsinterface|implode|import_request_variables|in_array|include|include_once|inclued_get_data|inet_ntop|inet_pton|infiniteiterator|ingres_autocommit|ingres_autocommit_state|ingres_charset|ingres_close|ingres_commit|ingres_connect|ingres_cursor|ingres_errno|ingres_error|ingres_errsqlstate|ingres_escape_string|ingres_execute|ingres_fetch_array|ingres_fetch_assoc|ingres_fetch_object|ingres_fetch_proc_return|ingres_fetch_row|ingres_field_length|ingres_field_name|ingres_field_nullable|ingres_field_precision|ingres_field_scale|ingres_field_type|ingres_free_result|ingres_next_error|ingres_num_fields|ingres_num_rows|ingres_pconnect|ingres_prepare|ingres_query|ingres_result_seek|ingres_rollback|ingres_set_environment|ingres_unbuffered_query|ini_alter|ini_get|ini_get_all|ini_restore|ini_set|innamespace|inotify_add_watch|inotify_init|inotify_queue_len|inotify_read|inotify_rm_watch|interface_exists|intl_error_name|intl_get_error_code|intl_get_error_message|intl_is_failure|intldateformatter|intval|invalidargumentexception|invoke|invokeargs|ip2long|iptcembed|iptcparse|is_a|is_array|is_bool|is_callable|is_dir|is_double|is_executable|is_file|is_finite|is_float|is_infinite|is_int|is_integer|is_link|is_long|is_nan|is_null|is_numeric|is_object|is_readable|is_real|is_resource|is_scalar|is_soap_fault|is_string|is_subclass_of|is_uploaded_file|is_writable|is_writeable|isabstract|iscloneable|isdisabled|isfinal|isinstance|isinstantiable|isinterface|isinternal|isiterateable|isset|issubclassof|isuserdefined|iterator|iterator_apply|iterator_count|iterator_to_array|iteratoraggregate|iteratoriterator|java_last_exception_clear|java_last_exception_get|jddayofweek|jdmonthname|jdtofrench|jdtogregorian|jdtojewish|jdtojulian|jdtounix|jewishtojd|join|jpeg2wbmp|json_decode|json_encode|json_last_error|jsonserializable|judy|judy_type|judy_version|juliantojd|kadm5_chpass_principal|kadm5_create_principal|kadm5_delete_principal|kadm5_destroy|kadm5_flush|kadm5_get_policies|kadm5_get_principal|kadm5_get_principals|kadm5_init_with_password|kadm5_modify_principal|key|krsort|ksort|lcfirst|lcg_value|lchgrp|lchown|ldap_8859_to_t61|ldap_add|ldap_bind|ldap_close|ldap_compare|ldap_connect|ldap_count_entries|ldap_delete|ldap_dn2ufn|ldap_err2str|ldap_errno|ldap_error|ldap_explode_dn|ldap_first_attribute|ldap_first_entry|ldap_first_reference|ldap_free_result|ldap_get_attributes|ldap_get_dn|ldap_get_entries|ldap_get_option|ldap_get_values|ldap_get_values_len|ldap_list|ldap_mod_add|ldap_mod_del|ldap_mod_replace|ldap_modify|ldap_next_attribute|ldap_next_entry|ldap_next_reference|ldap_parse_reference|ldap_parse_result|ldap_read|ldap_rename|ldap_sasl_bind|ldap_search|ldap_set_option|ldap_set_rebind_proc|ldap_sort|ldap_start_tls|ldap_t61_to_8859|ldap_unbind|lengthexception|levenshtein|libxml_clear_errors|libxml_disable_entity_loader|libxml_get_errors|libxml_get_last_error|libxml_set_streams_context|libxml_use_internal_errors|libxmlerror|limititerator|link|linkinfo|list|locale|localeconv|localtime|log|log10|log1p|logicexception|long2ip|lstat|ltrim|lzf_compress|lzf_decompress|lzf_optimized_for|m_checkstatus|m_completeauthorizations|m_connect|m_connectionerror|m_deletetrans|m_destroyconn|m_destroyengine|m_getcell|m_getcellbynum|m_getcommadelimited|m_getheader|m_initconn|m_initengine|m_iscommadelimited|m_maxconntimeout|m_monitor|m_numcolumns|m_numrows|m_parsecommadelimited|m_responsekeys|m_responseparam|m_returnstatus|m_setblocking|m_setdropfile|m_setip|m_setssl|m_setssl_cafile|m_setssl_files|m_settimeout|m_sslcert_gen_hash|m_transactionssent|m_transinqueue|m_transkeyval|m_transnew|m_transsend|m_uwait|m_validateidentifier|m_verifyconnection|m_verifysslcert|magic_quotes_runtime|mail|mailparse_determine_best_xfer_encoding|mailparse_msg_create|mailparse_msg_extract_part|mailparse_msg_extract_part_file|mailparse_msg_extract_whole_part_file|mailparse_msg_free|mailparse_msg_get_part|mailparse_msg_get_part_data|mailparse_msg_get_structure|mailparse_msg_parse|mailparse_msg_parse_file|mailparse_rfc822_parse_addresses|mailparse_stream_encode|mailparse_uudecode_all|main|max|maxdb_affected_rows|maxdb_autocommit|maxdb_bind_param|maxdb_bind_result|maxdb_change_user|maxdb_character_set_name|maxdb_client_encoding|maxdb_close|maxdb_close_long_data|maxdb_commit|maxdb_connect|maxdb_connect_errno|maxdb_connect_error|maxdb_data_seek|maxdb_debug|maxdb_disable_reads_from_master|maxdb_disable_rpl_parse|maxdb_dump_debug_info|maxdb_embedded_connect|maxdb_enable_reads_from_master|maxdb_enable_rpl_parse|maxdb_errno|maxdb_error|maxdb_escape_string|maxdb_execute|maxdb_fetch|maxdb_fetch_array|maxdb_fetch_assoc|maxdb_fetch_field|maxdb_fetch_field_direct|maxdb_fetch_fields|maxdb_fetch_lengths|maxdb_fetch_object|maxdb_fetch_row|maxdb_field_count|maxdb_field_seek|maxdb_field_tell|maxdb_free_result|maxdb_get_client_info|maxdb_get_client_version|maxdb_get_host_info|maxdb_get_metadata|maxdb_get_proto_info|maxdb_get_server_info|maxdb_get_server_version|maxdb_info|maxdb_init|maxdb_insert_id|maxdb_kill|maxdb_master_query|maxdb_more_results|maxdb_multi_query|maxdb_next_result|maxdb_num_fields|maxdb_num_rows|maxdb_options|maxdb_param_count|maxdb_ping|maxdb_prepare|maxdb_query|maxdb_real_connect|maxdb_real_escape_string|maxdb_real_query|maxdb_report|maxdb_rollback|maxdb_rpl_parse_enabled|maxdb_rpl_probe|maxdb_rpl_query_type|maxdb_select_db|maxdb_send_long_data|maxdb_send_query|maxdb_server_end|maxdb_server_init|maxdb_set_opt|maxdb_sqlstate|maxdb_ssl_set|maxdb_stat|maxdb_stmt_affected_rows|maxdb_stmt_bind_param|maxdb_stmt_bind_result|maxdb_stmt_close|maxdb_stmt_close_long_data|maxdb_stmt_data_seek|maxdb_stmt_errno|maxdb_stmt_error|maxdb_stmt_execute|maxdb_stmt_fetch|maxdb_stmt_free_result|maxdb_stmt_init|maxdb_stmt_num_rows|maxdb_stmt_param_count|maxdb_stmt_prepare|maxdb_stmt_reset|maxdb_stmt_result_metadata|maxdb_stmt_send_long_data|maxdb_stmt_sqlstate|maxdb_stmt_store_result|maxdb_store_result|maxdb_thread_id|maxdb_thread_safe|maxdb_use_result|maxdb_warning_count|mb_check_encoding|mb_convert_case|mb_convert_encoding|mb_convert_kana|mb_convert_variables|mb_decode_mimeheader|mb_decode_numericentity|mb_detect_encoding|mb_detect_order|mb_encode_mimeheader|mb_encode_numericentity|mb_encoding_aliases|mb_ereg|mb_ereg_match|mb_ereg_replace|mb_ereg_search|mb_ereg_search_getpos|mb_ereg_search_getregs|mb_ereg_search_init|mb_ereg_search_pos|mb_ereg_search_regs|mb_ereg_search_setpos|mb_eregi|mb_eregi_replace|mb_get_info|mb_http_input|mb_http_output|mb_internal_encoding|mb_language|mb_list_encodings|mb_output_handler|mb_parse_str|mb_preferred_mime_name|mb_regex_encoding|mb_regex_set_options|mb_send_mail|mb_split|mb_strcut|mb_strimwidth|mb_stripos|mb_stristr|mb_strlen|mb_strpos|mb_strrchr|mb_strrichr|mb_strripos|mb_strrpos|mb_strstr|mb_strtolower|mb_strtoupper|mb_strwidth|mb_substitute_character|mb_substr|mb_substr_count|mcrypt_cbc|mcrypt_cfb|mcrypt_create_iv|mcrypt_decrypt|mcrypt_ecb|mcrypt_enc_get_algorithms_name|mcrypt_enc_get_block_size|mcrypt_enc_get_iv_size|mcrypt_enc_get_key_size|mcrypt_enc_get_modes_name|mcrypt_enc_get_supported_key_sizes|mcrypt_enc_is_block_algorithm|mcrypt_enc_is_block_algorithm_mode|mcrypt_enc_is_block_mode|mcrypt_enc_self_test|mcrypt_encrypt|mcrypt_generic|mcrypt_generic_deinit|mcrypt_generic_end|mcrypt_generic_init|mcrypt_get_block_size|mcrypt_get_cipher_name|mcrypt_get_iv_size|mcrypt_get_key_size|mcrypt_list_algorithms|mcrypt_list_modes|mcrypt_module_close|mcrypt_module_get_algo_block_size|mcrypt_module_get_algo_key_size|mcrypt_module_get_supported_key_sizes|mcrypt_module_is_block_algorithm|mcrypt_module_is_block_algorithm_mode|mcrypt_module_is_block_mode|mcrypt_module_open|mcrypt_module_self_test|mcrypt_ofb|md5|md5_file|mdecrypt_generic|memcache|memcache_debug|memcached|memory_get_peak_usage|memory_get_usage|messageformatter|metaphone|method_exists|mhash|mhash_count|mhash_get_block_size|mhash_get_hash_name|mhash_keygen_s2k|microtime|mime_content_type|min|ming_keypress|ming_setcubicthreshold|ming_setscale|ming_setswfcompression|ming_useconstants|ming_useswfversion|mkdir|mktime|money_format|mongo|mongobindata|mongocode|mongocollection|mongoconnectionexception|mongocursor|mongocursorexception|mongocursortimeoutexception|mongodate|mongodb|mongodbref|mongoexception|mongogridfs|mongogridfscursor|mongogridfsexception|mongogridfsfile|mongoid|mongoint32|mongoint64|mongomaxkey|mongominkey|mongoregex|mongotimestamp|move_uploaded_file|mpegfile|mqseries_back|mqseries_begin|mqseries_close|mqseries_cmit|mqseries_conn|mqseries_connx|mqseries_disc|mqseries_get|mqseries_inq|mqseries_open|mqseries_put|mqseries_put1|mqseries_set|mqseries_strerror|msession_connect|msession_count|msession_create|msession_destroy|msession_disconnect|msession_find|msession_get|msession_get_array|msession_get_data|msession_inc|msession_list|msession_listvar|msession_lock|msession_plugin|msession_randstr|msession_set|msession_set_array|msession_set_data|msession_timeout|msession_uniq|msession_unlock|msg_get_queue|msg_queue_exists|msg_receive|msg_remove_queue|msg_send|msg_set_queue|msg_stat_queue|msql|msql_affected_rows|msql_close|msql_connect|msql_create_db|msql_createdb|msql_data_seek|msql_db_query|msql_dbname|msql_drop_db|msql_error|msql_fetch_array|msql_fetch_field|msql_fetch_object|msql_fetch_row|msql_field_flags|msql_field_len|msql_field_name|msql_field_seek|msql_field_table|msql_field_type|msql_fieldflags|msql_fieldlen|msql_fieldname|msql_fieldtable|msql_fieldtype|msql_free_result|msql_list_dbs|msql_list_fields|msql_list_tables|msql_num_fields|msql_num_rows|msql_numfields|msql_numrows|msql_pconnect|msql_query|msql_regcase|msql_result|msql_select_db|msql_tablename|mssql_bind|mssql_close|mssql_connect|mssql_data_seek|mssql_execute|mssql_fetch_array|mssql_fetch_assoc|mssql_fetch_batch|mssql_fetch_field|mssql_fetch_object|mssql_fetch_row|mssql_field_length|mssql_field_name|mssql_field_seek|mssql_field_type|mssql_free_result|mssql_free_statement|mssql_get_last_message|mssql_guid_string|mssql_init|mssql_min_error_severity|mssql_min_message_severity|mssql_next_result|mssql_num_fields|mssql_num_rows|mssql_pconnect|mssql_query|mssql_result|mssql_rows_affected|mssql_select_db|mt_getrandmax|mt_rand|mt_srand|multipleiterator|mysql_affected_rows|mysql_client_encoding|mysql_close|mysql_connect|mysql_create_db|mysql_data_seek|mysql_db_name|mysql_db_query|mysql_drop_db|mysql_errno|mysql_error|mysql_escape_string|mysql_fetch_array|mysql_fetch_assoc|mysql_fetch_field|mysql_fetch_lengths|mysql_fetch_object|mysql_fetch_row|mysql_field_flags|mysql_field_len|mysql_field_name|mysql_field_seek|mysql_field_table|mysql_field_type|mysql_free_result|mysql_get_client_info|mysql_get_host_info|mysql_get_proto_info|mysql_get_server_info|mysql_info|mysql_insert_id|mysql_list_dbs|mysql_list_fields|mysql_list_processes|mysql_list_tables|mysql_num_fields|mysql_num_rows|mysql_pconnect|mysql_ping|mysql_query|mysql_real_escape_string|mysql_result|mysql_select_db|mysql_set_charset|mysql_stat|mysql_tablename|mysql_thread_id|mysql_unbuffered_query|mysqli|mysqli_bind_param|mysqli_bind_result|mysqli_client_encoding|mysqli_connect|mysqli_disable_reads_from_master|mysqli_disable_rpl_parse|mysqli_driver|mysqli_enable_reads_from_master|mysqli_enable_rpl_parse|mysqli_escape_string|mysqli_execute|mysqli_fetch|mysqli_get_metadata|mysqli_master_query|mysqli_param_count|mysqli_report|mysqli_result|mysqli_rpl_parse_enabled|mysqli_rpl_probe|mysqli_rpl_query_type|mysqli_send_long_data|mysqli_send_query|mysqli_set_opt|mysqli_slave_query|mysqli_stmt|mysqli_warning|mysqlnd_ms_get_stats|mysqlnd_ms_query_is_select|mysqlnd_ms_set_user_pick_server|mysqlnd_qc_change_handler|mysqlnd_qc_clear_cache|mysqlnd_qc_get_cache_info|mysqlnd_qc_get_core_stats|mysqlnd_qc_get_handler|mysqlnd_qc_get_query_trace_log|mysqlnd_qc_set_user_handlers|natcasesort|natsort|ncurses_addch|ncurses_addchnstr|ncurses_addchstr|ncurses_addnstr|ncurses_addstr|ncurses_assume_default_colors|ncurses_attroff|ncurses_attron|ncurses_attrset|ncurses_baudrate|ncurses_beep|ncurses_bkgd|ncurses_bkgdset|ncurses_border|ncurses_bottom_panel|ncurses_can_change_color|ncurses_cbreak|ncurses_clear|ncurses_clrtobot|ncurses_clrtoeol|ncurses_color_content|ncurses_color_set|ncurses_curs_set|ncurses_def_prog_mode|ncurses_def_shell_mode|ncurses_define_key|ncurses_del_panel|ncurses_delay_output|ncurses_delch|ncurses_deleteln|ncurses_delwin|ncurses_doupdate|ncurses_echo|ncurses_echochar|ncurses_end|ncurses_erase|ncurses_erasechar|ncurses_filter|ncurses_flash|ncurses_flushinp|ncurses_getch|ncurses_getmaxyx|ncurses_getmouse|ncurses_getyx|ncurses_halfdelay|ncurses_has_colors|ncurses_has_ic|ncurses_has_il|ncurses_has_key|ncurses_hide_panel|ncurses_hline|ncurses_inch|ncurses_init|ncurses_init_color|ncurses_init_pair|ncurses_insch|ncurses_insdelln|ncurses_insertln|ncurses_insstr|ncurses_instr|ncurses_isendwin|ncurses_keyok|ncurses_keypad|ncurses_killchar|ncurses_longname|ncurses_meta|ncurses_mouse_trafo|ncurses_mouseinterval|ncurses_mousemask|ncurses_move|ncurses_move_panel|ncurses_mvaddch|ncurses_mvaddchnstr|ncurses_mvaddchstr|ncurses_mvaddnstr|ncurses_mvaddstr|ncurses_mvcur|ncurses_mvdelch|ncurses_mvgetch|ncurses_mvhline|ncurses_mvinch|ncurses_mvvline|ncurses_mvwaddstr|ncurses_napms|ncurses_new_panel|ncurses_newpad|ncurses_newwin|ncurses_nl|ncurses_nocbreak|ncurses_noecho|ncurses_nonl|ncurses_noqiflush|ncurses_noraw|ncurses_pair_content|ncurses_panel_above|ncurses_panel_below|ncurses_panel_window|ncurses_pnoutrefresh|ncurses_prefresh|ncurses_putp|ncurses_qiflush|ncurses_raw|ncurses_refresh|ncurses_replace_panel|ncurses_reset_prog_mode|ncurses_reset_shell_mode|ncurses_resetty|ncurses_savetty|ncurses_scr_dump|ncurses_scr_init|ncurses_scr_restore|ncurses_scr_set|ncurses_scrl|ncurses_show_panel|ncurses_slk_attr|ncurses_slk_attroff|ncurses_slk_attron|ncurses_slk_attrset|ncurses_slk_clear|ncurses_slk_color|ncurses_slk_init|ncurses_slk_noutrefresh|ncurses_slk_refresh|ncurses_slk_restore|ncurses_slk_set|ncurses_slk_touch|ncurses_standend|ncurses_standout|ncurses_start_color|ncurses_termattrs|ncurses_termname|ncurses_timeout|ncurses_top_panel|ncurses_typeahead|ncurses_ungetch|ncurses_ungetmouse|ncurses_update_panels|ncurses_use_default_colors|ncurses_use_env|ncurses_use_extended_names|ncurses_vidattr|ncurses_vline|ncurses_waddch|ncurses_waddstr|ncurses_wattroff|ncurses_wattron|ncurses_wattrset|ncurses_wborder|ncurses_wclear|ncurses_wcolor_set|ncurses_werase|ncurses_wgetch|ncurses_whline|ncurses_wmouse_trafo|ncurses_wmove|ncurses_wnoutrefresh|ncurses_wrefresh|ncurses_wstandend|ncurses_wstandout|ncurses_wvline|newinstance|newinstanceargs|newt_bell|newt_button|newt_button_bar|newt_centered_window|newt_checkbox|newt_checkbox_get_value|newt_checkbox_set_flags|newt_checkbox_set_value|newt_checkbox_tree|newt_checkbox_tree_add_item|newt_checkbox_tree_find_item|newt_checkbox_tree_get_current|newt_checkbox_tree_get_entry_value|newt_checkbox_tree_get_multi_selection|newt_checkbox_tree_get_selection|newt_checkbox_tree_multi|newt_checkbox_tree_set_current|newt_checkbox_tree_set_entry|newt_checkbox_tree_set_entry_value|newt_checkbox_tree_set_width|newt_clear_key_buffer|newt_cls|newt_compact_button|newt_component_add_callback|newt_component_takes_focus|newt_create_grid|newt_cursor_off|newt_cursor_on|newt_delay|newt_draw_form|newt_draw_root_text|newt_entry|newt_entry_get_value|newt_entry_set|newt_entry_set_filter|newt_entry_set_flags|newt_finished|newt_form|newt_form_add_component|newt_form_add_components|newt_form_add_hot_key|newt_form_destroy|newt_form_get_current|newt_form_run|newt_form_set_background|newt_form_set_height|newt_form_set_size|newt_form_set_timer|newt_form_set_width|newt_form_watch_fd|newt_get_screen_size|newt_grid_add_components_to_form|newt_grid_basic_window|newt_grid_free|newt_grid_get_size|newt_grid_h_close_stacked|newt_grid_h_stacked|newt_grid_place|newt_grid_set_field|newt_grid_simple_window|newt_grid_v_close_stacked|newt_grid_v_stacked|newt_grid_wrapped_window|newt_grid_wrapped_window_at|newt_init|newt_label|newt_label_set_text|newt_listbox|newt_listbox_append_entry|newt_listbox_clear|newt_listbox_clear_selection|newt_listbox_delete_entry|newt_listbox_get_current|newt_listbox_get_selection|newt_listbox_insert_entry|newt_listbox_item_count|newt_listbox_select_item|newt_listbox_set_current|newt_listbox_set_current_by_key|newt_listbox_set_data|newt_listbox_set_entry|newt_listbox_set_width|newt_listitem|newt_listitem_get_data|newt_listitem_set|newt_open_window|newt_pop_help_line|newt_pop_window|newt_push_help_line|newt_radio_get_current|newt_radiobutton|newt_redraw_help_line|newt_reflow_text|newt_refresh|newt_resize_screen|newt_resume|newt_run_form|newt_scale|newt_scale_set|newt_scrollbar_set|newt_set_help_callback|newt_set_suspend_callback|newt_suspend|newt_textbox|newt_textbox_get_num_lines|newt_textbox_reflowed|newt_textbox_set_height|newt_textbox_set_text|newt_vertical_scrollbar|newt_wait_for_key|newt_win_choice|newt_win_entries|newt_win_menu|newt_win_message|newt_win_messagev|newt_win_ternary|next|ngettext|nl2br|nl_langinfo|norewinditerator|normalizer|notes_body|notes_copy_db|notes_create_db|notes_create_note|notes_drop_db|notes_find_note|notes_header_info|notes_list_msgs|notes_mark_read|notes_mark_unread|notes_nav_create|notes_search|notes_unread|notes_version|nsapi_request_headers|nsapi_response_headers|nsapi_virtual|nthmac|number_format|numberformatter|oauth|oauth_get_sbs|oauth_urlencode|oauthexception|oauthprovider|ob_clean|ob_deflatehandler|ob_end_clean|ob_end_flush|ob_etaghandler|ob_flush|ob_get_clean|ob_get_contents|ob_get_flush|ob_get_length|ob_get_level|ob_get_status|ob_gzhandler|ob_iconv_handler|ob_implicit_flush|ob_inflatehandler|ob_list_handlers|ob_start|ob_tidyhandler|oci_bind_array_by_name|oci_bind_by_name|oci_cancel|oci_client_version|oci_close|oci_collection_append|oci_collection_assign|oci_collection_element_assign|oci_collection_element_get|oci_collection_free|oci_collection_max|oci_collection_size|oci_collection_trim|oci_commit|oci_connect|oci_define_by_name|oci_error|oci_execute|oci_fetch|oci_fetch_all|oci_fetch_array|oci_fetch_assoc|oci_fetch_object|oci_fetch_row|oci_field_is_null|oci_field_name|oci_field_precision|oci_field_scale|oci_field_size|oci_field_type|oci_field_type_raw|oci_free_statement|oci_internal_debug|oci_lob_append|oci_lob_close|oci_lob_copy|oci_lob_eof|oci_lob_erase|oci_lob_export|oci_lob_flush|oci_lob_free|oci_lob_getbuffering|oci_lob_import|oci_lob_is_equal|oci_lob_load|oci_lob_read|oci_lob_rewind|oci_lob_save|oci_lob_savefile|oci_lob_seek|oci_lob_setbuffering|oci_lob_size|oci_lob_tell|oci_lob_truncate|oci_lob_write|oci_lob_writetemporary|oci_lob_writetofile|oci_new_collection|oci_new_connect|oci_new_cursor|oci_new_descriptor|oci_num_fields|oci_num_rows|oci_parse|oci_password_change|oci_pconnect|oci_result|oci_rollback|oci_server_version|oci_set_action|oci_set_client_identifier|oci_set_client_info|oci_set_edition|oci_set_module_name|oci_set_prefetch|oci_statement_type|ocibindbyname|ocicancel|ocicloselob|ocicollappend|ocicollassign|ocicollassignelem|ocicollgetelem|ocicollmax|ocicollsize|ocicolltrim|ocicolumnisnull|ocicolumnname|ocicolumnprecision|ocicolumnscale|ocicolumnsize|ocicolumntype|ocicolumntyperaw|ocicommit|ocidefinebyname|ocierror|ociexecute|ocifetch|ocifetchinto|ocifetchstatement|ocifreecollection|ocifreecursor|ocifreedesc|ocifreestatement|ociinternaldebug|ociloadlob|ocilogoff|ocilogon|ocinewcollection|ocinewcursor|ocinewdescriptor|ocinlogon|ocinumcols|ociparse|ociplogon|ociresult|ocirollback|ocirowcount|ocisavelob|ocisavelobfile|ociserverversion|ocisetprefetch|ocistatementtype|ociwritelobtofile|ociwritetemporarylob|octdec|odbc_autocommit|odbc_binmode|odbc_close|odbc_close_all|odbc_columnprivileges|odbc_columns|odbc_commit|odbc_connect|odbc_cursor|odbc_data_source|odbc_do|odbc_error|odbc_errormsg|odbc_exec|odbc_execute|odbc_fetch_array|odbc_fetch_into|odbc_fetch_object|odbc_fetch_row|odbc_field_len|odbc_field_name|odbc_field_num|odbc_field_precision|odbc_field_scale|odbc_field_type|odbc_foreignkeys|odbc_free_result|odbc_gettypeinfo|odbc_longreadlen|odbc_next_result|odbc_num_fields|odbc_num_rows|odbc_pconnect|odbc_prepare|odbc_primarykeys|odbc_procedurecolumns|odbc_procedures|odbc_result|odbc_result_all|odbc_rollback|odbc_setoption|odbc_specialcolumns|odbc_statistics|odbc_tableprivileges|odbc_tables|openal_buffer_create|openal_buffer_data|openal_buffer_destroy|openal_buffer_get|openal_buffer_loadwav|openal_context_create|openal_context_current|openal_context_destroy|openal_context_process|openal_context_suspend|openal_device_close|openal_device_open|openal_listener_get|openal_listener_set|openal_source_create|openal_source_destroy|openal_source_get|openal_source_pause|openal_source_play|openal_source_rewind|openal_source_set|openal_source_stop|openal_stream|opendir|openlog|openssl_cipher_iv_length|openssl_csr_export|openssl_csr_export_to_file|openssl_csr_get_public_key|openssl_csr_get_subject|openssl_csr_new|openssl_csr_sign|openssl_decrypt|openssl_dh_compute_key|openssl_digest|openssl_encrypt|openssl_error_string|openssl_free_key|openssl_get_cipher_methods|openssl_get_md_methods|openssl_get_privatekey|openssl_get_publickey|openssl_open|openssl_pkcs12_export|openssl_pkcs12_export_to_file|openssl_pkcs12_read|openssl_pkcs7_decrypt|openssl_pkcs7_encrypt|openssl_pkcs7_sign|openssl_pkcs7_verify|openssl_pkey_export|openssl_pkey_export_to_file|openssl_pkey_free|openssl_pkey_get_details|openssl_pkey_get_private|openssl_pkey_get_public|openssl_pkey_new|openssl_private_decrypt|openssl_private_encrypt|openssl_public_decrypt|openssl_public_encrypt|openssl_random_pseudo_bytes|openssl_seal|openssl_sign|openssl_verify|openssl_x509_check_private_key|openssl_x509_checkpurpose|openssl_x509_export|openssl_x509_export_to_file|openssl_x509_free|openssl_x509_parse|openssl_x509_read|ord|outeriterator|outofboundsexception|outofrangeexception|output_add_rewrite_var|output_reset_rewrite_vars|overflowexception|overload|override_function|ovrimos_close|ovrimos_commit|ovrimos_connect|ovrimos_cursor|ovrimos_exec|ovrimos_execute|ovrimos_fetch_into|ovrimos_fetch_row|ovrimos_field_len|ovrimos_field_name|ovrimos_field_num|ovrimos_field_type|ovrimos_free_result|ovrimos_longreadlen|ovrimos_num_fields|ovrimos_num_rows|ovrimos_prepare|ovrimos_result|ovrimos_result_all|ovrimos_rollback|pack|parentiterator|parse_ini_file|parse_ini_string|parse_str|parse_url|parsekit_compile_file|parsekit_compile_string|parsekit_func_arginfo|passthru|pathinfo|pclose|pcntl_alarm|pcntl_exec|pcntl_fork|pcntl_getpriority|pcntl_setpriority|pcntl_signal|pcntl_signal_dispatch|pcntl_sigprocmask|pcntl_sigtimedwait|pcntl_sigwaitinfo|pcntl_wait|pcntl_waitpid|pcntl_wexitstatus|pcntl_wifexited|pcntl_wifsignaled|pcntl_wifstopped|pcntl_wstopsig|pcntl_wtermsig|pdf_activate_item|pdf_add_annotation|pdf_add_bookmark|pdf_add_launchlink|pdf_add_locallink|pdf_add_nameddest|pdf_add_note|pdf_add_outline|pdf_add_pdflink|pdf_add_table_cell|pdf_add_textflow|pdf_add_thumbnail|pdf_add_weblink|pdf_arc|pdf_arcn|pdf_attach_file|pdf_begin_document|pdf_begin_font|pdf_begin_glyph|pdf_begin_item|pdf_begin_layer|pdf_begin_page|pdf_begin_page_ext|pdf_begin_pattern|pdf_begin_template|pdf_begin_template_ext|pdf_circle|pdf_clip|pdf_close|pdf_close_image|pdf_close_pdi|pdf_close_pdi_page|pdf_closepath|pdf_closepath_fill_stroke|pdf_closepath_stroke|pdf_concat|pdf_continue_text|pdf_create_3dview|pdf_create_action|pdf_create_annotation|pdf_create_bookmark|pdf_create_field|pdf_create_fieldgroup|pdf_create_gstate|pdf_create_pvf|pdf_create_textflow|pdf_curveto|pdf_define_layer|pdf_delete|pdf_delete_pvf|pdf_delete_table|pdf_delete_textflow|pdf_encoding_set_char|pdf_end_document|pdf_end_font|pdf_end_glyph|pdf_end_item|pdf_end_layer|pdf_end_page|pdf_end_page_ext|pdf_end_pattern|pdf_end_template|pdf_endpath|pdf_fill|pdf_fill_imageblock|pdf_fill_pdfblock|pdf_fill_stroke|pdf_fill_textblock|pdf_findfont|pdf_fit_image|pdf_fit_pdi_page|pdf_fit_table|pdf_fit_textflow|pdf_fit_textline|pdf_get_apiname|pdf_get_buffer|pdf_get_errmsg|pdf_get_errnum|pdf_get_font|pdf_get_fontname|pdf_get_fontsize|pdf_get_image_height|pdf_get_image_width|pdf_get_majorversion|pdf_get_minorversion|pdf_get_parameter|pdf_get_pdi_parameter|pdf_get_pdi_value|pdf_get_value|pdf_info_font|pdf_info_matchbox|pdf_info_table|pdf_info_textflow|pdf_info_textline|pdf_initgraphics|pdf_lineto|pdf_load_3ddata|pdf_load_font|pdf_load_iccprofile|pdf_load_image|pdf_makespotcolor|pdf_moveto|pdf_new|pdf_open_ccitt|pdf_open_file|pdf_open_gif|pdf_open_image|pdf_open_image_file|pdf_open_jpeg|pdf_open_memory_image|pdf_open_pdi|pdf_open_pdi_document|pdf_open_pdi_page|pdf_open_tiff|pdf_pcos_get_number|pdf_pcos_get_stream|pdf_pcos_get_string|pdf_place_image|pdf_place_pdi_page|pdf_process_pdi|pdf_rect|pdf_restore|pdf_resume_page|pdf_rotate|pdf_save|pdf_scale|pdf_set_border_color|pdf_set_border_dash|pdf_set_border_style|pdf_set_char_spacing|pdf_set_duration|pdf_set_gstate|pdf_set_horiz_scaling|pdf_set_info|pdf_set_info_author|pdf_set_info_creator|pdf_set_info_keywords|pdf_set_info_subject|pdf_set_info_title|pdf_set_layer_dependency|pdf_set_leading|pdf_set_parameter|pdf_set_text_matrix|pdf_set_text_pos|pdf_set_text_rendering|pdf_set_text_rise|pdf_set_value|pdf_set_word_spacing|pdf_setcolor|pdf_setdash|pdf_setdashpattern|pdf_setflat|pdf_setfont|pdf_setgray|pdf_setgray_fill|pdf_setgray_stroke|pdf_setlinecap|pdf_setlinejoin|pdf_setlinewidth|pdf_setmatrix|pdf_setmiterlimit|pdf_setpolydash|pdf_setrgbcolor|pdf_setrgbcolor_fill|pdf_setrgbcolor_stroke|pdf_shading|pdf_shading_pattern|pdf_shfill|pdf_show|pdf_show_boxed|pdf_show_xy|pdf_skew|pdf_stringwidth|pdf_stroke|pdf_suspend_page|pdf_translate|pdf_utf16_to_utf8|pdf_utf32_to_utf16|pdf_utf8_to_utf16|pdo|pdo_cubrid_schema|pdo_pgsqllobcreate|pdo_pgsqllobopen|pdo_pgsqllobunlink|pdo_sqlitecreateaggregate|pdo_sqlitecreatefunction|pdoexception|pdostatement|pfsockopen|pg_affected_rows|pg_cancel_query|pg_client_encoding|pg_close|pg_connect|pg_connection_busy|pg_connection_reset|pg_connection_status|pg_convert|pg_copy_from|pg_copy_to|pg_dbname|pg_delete|pg_end_copy|pg_escape_bytea|pg_escape_string|pg_execute|pg_fetch_all|pg_fetch_all_columns|pg_fetch_array|pg_fetch_assoc|pg_fetch_object|pg_fetch_result|pg_fetch_row|pg_field_is_null|pg_field_name|pg_field_num|pg_field_prtlen|pg_field_size|pg_field_table|pg_field_type|pg_field_type_oid|pg_free_result|pg_get_notify|pg_get_pid|pg_get_result|pg_host|pg_insert|pg_last_error|pg_last_notice|pg_last_oid|pg_lo_close|pg_lo_create|pg_lo_export|pg_lo_import|pg_lo_open|pg_lo_read|pg_lo_read_all|pg_lo_seek|pg_lo_tell|pg_lo_unlink|pg_lo_write|pg_meta_data|pg_num_fields|pg_num_rows|pg_options|pg_parameter_status|pg_pconnect|pg_ping|pg_port|pg_prepare|pg_put_line|pg_query|pg_query_params|pg_result_error|pg_result_error_field|pg_result_seek|pg_result_status|pg_select|pg_send_execute|pg_send_prepare|pg_send_query|pg_send_query_params|pg_set_client_encoding|pg_set_error_verbosity|pg_trace|pg_transaction_status|pg_tty|pg_unescape_bytea|pg_untrace|pg_update|pg_version|php_check_syntax|php_ini_loaded_file|php_ini_scanned_files|php_logo_guid|php_sapi_name|php_strip_whitespace|php_uname|phpcredits|phpinfo|phpversion|pi|png2wbmp|popen|pos|posix_access|posix_ctermid|posix_errno|posix_get_last_error|posix_getcwd|posix_getegid|posix_geteuid|posix_getgid|posix_getgrgid|posix_getgrnam|posix_getgroups|posix_getlogin|posix_getpgid|posix_getpgrp|posix_getpid|posix_getppid|posix_getpwnam|posix_getpwuid|posix_getrlimit|posix_getsid|posix_getuid|posix_initgroups|posix_isatty|posix_kill|posix_mkfifo|posix_mknod|posix_setegid|posix_seteuid|posix_setgid|posix_setpgid|posix_setsid|posix_setuid|posix_strerror|posix_times|posix_ttyname|posix_uname|pow|preg_filter|preg_grep|preg_last_error|preg_match|preg_match_all|preg_quote|preg_replace|preg_replace_callback|preg_split|prev|print|print_r|printer_abort|printer_close|printer_create_brush|printer_create_dc|printer_create_font|printer_create_pen|printer_delete_brush|printer_delete_dc|printer_delete_font|printer_delete_pen|printer_draw_bmp|printer_draw_chord|printer_draw_elipse|printer_draw_line|printer_draw_pie|printer_draw_rectangle|printer_draw_roundrect|printer_draw_text|printer_end_doc|printer_end_page|printer_get_option|printer_list|printer_logical_fontheight|printer_open|printer_select_brush|printer_select_font|printer_select_pen|printer_set_option|printer_start_doc|printer_start_page|printer_write|printf|proc_close|proc_get_status|proc_nice|proc_open|proc_terminate|property_exists|ps_add_bookmark|ps_add_launchlink|ps_add_locallink|ps_add_note|ps_add_pdflink|ps_add_weblink|ps_arc|ps_arcn|ps_begin_page|ps_begin_pattern|ps_begin_template|ps_circle|ps_clip|ps_close|ps_close_image|ps_closepath|ps_closepath_stroke|ps_continue_text|ps_curveto|ps_delete|ps_end_page|ps_end_pattern|ps_end_template|ps_fill|ps_fill_stroke|ps_findfont|ps_get_buffer|ps_get_parameter|ps_get_value|ps_hyphenate|ps_include_file|ps_lineto|ps_makespotcolor|ps_moveto|ps_new|ps_open_file|ps_open_image|ps_open_image_file|ps_open_memory_image|ps_place_image|ps_rect|ps_restore|ps_rotate|ps_save|ps_scale|ps_set_border_color|ps_set_border_dash|ps_set_border_style|ps_set_info|ps_set_parameter|ps_set_text_pos|ps_set_value|ps_setcolor|ps_setdash|ps_setflat|ps_setfont|ps_setgray|ps_setlinecap|ps_setlinejoin|ps_setlinewidth|ps_setmiterlimit|ps_setoverprintmode|ps_setpolydash|ps_shading|ps_shading_pattern|ps_shfill|ps_show|ps_show2|ps_show_boxed|ps_show_xy|ps_show_xy2|ps_string_geometry|ps_stringwidth|ps_stroke|ps_symbol|ps_symbol_name|ps_symbol_width|ps_translate|pspell_add_to_personal|pspell_add_to_session|pspell_check|pspell_clear_session|pspell_config_create|pspell_config_data_dir|pspell_config_dict_dir|pspell_config_ignore|pspell_config_mode|pspell_config_personal|pspell_config_repl|pspell_config_runtogether|pspell_config_save_repl|pspell_new|pspell_new_config|pspell_new_personal|pspell_save_wordlist|pspell_store_replacement|pspell_suggest|putenv|px_close|px_create_fp|px_date2string|px_delete|px_delete_record|px_get_field|px_get_info|px_get_parameter|px_get_record|px_get_schema|px_get_value|px_insert_record|px_new|px_numfields|px_numrecords|px_open_fp|px_put_record|px_retrieve_record|px_set_blob_file|px_set_parameter|px_set_tablename|px_set_targetencoding|px_set_value|px_timestamp2string|px_update_record|qdom_error|qdom_tree|quoted_printable_decode|quoted_printable_encode|quotemeta|rad2deg|radius_acct_open|radius_add_server|radius_auth_open|radius_close|radius_config|radius_create_request|radius_cvt_addr|radius_cvt_int|radius_cvt_string|radius_demangle|radius_demangle_mppe_key|radius_get_attr|radius_get_vendor_attr|radius_put_addr|radius_put_attr|radius_put_int|radius_put_string|radius_put_vendor_addr|radius_put_vendor_attr|radius_put_vendor_int|radius_put_vendor_string|radius_request_authenticator|radius_send_request|radius_server_secret|radius_strerror|rand|range|rangeexception|rar_wrapper_cache_stats|rararchive|rarentry|rarexception|rawurldecode|rawurlencode|read_exif_data|readdir|readfile|readgzfile|readline|readline_add_history|readline_callback_handler_install|readline_callback_handler_remove|readline_callback_read_char|readline_clear_history|readline_completion_function|readline_info|readline_list_history|readline_on_new_line|readline_read_history|readline_redisplay|readline_write_history|readlink|realpath|realpath_cache_get|realpath_cache_size|recode|recode_file|recode_string|recursivearrayiterator|recursivecachingiterator|recursivecallbackfilteriterator|recursivedirectoryiterator|recursivefilteriterator|recursiveiterator|recursiveiteratoriterator|recursiveregexiterator|recursivetreeiterator|reflection|reflectionclass|reflectionexception|reflectionextension|reflectionfunction|reflectionfunctionabstract|reflectionmethod|reflectionobject|reflectionparameter|reflectionproperty|reflector|regexiterator|register_shutdown_function|register_tick_function|rename|rename_function|require|require_once|reset|resetValue|resourcebundle|restore_error_handler|restore_exception_handler|restore_include_path|return|rewind|rewinddir|rmdir|round|rpm_close|rpm_get_tag|rpm_is_valid|rpm_open|rpm_version|rrd_create|rrd_error|rrd_fetch|rrd_first|rrd_graph|rrd_info|rrd_last|rrd_lastupdate|rrd_restore|rrd_tune|rrd_update|rrd_xport|rrdcreator|rrdgraph|rrdupdater|rsort|rtrim|runkit_class_adopt|runkit_class_emancipate|runkit_constant_add|runkit_constant_redefine|runkit_constant_remove|runkit_function_add|runkit_function_copy|runkit_function_redefine|runkit_function_remove|runkit_function_rename|runkit_import|runkit_lint|runkit_lint_file|runkit_method_add|runkit_method_copy|runkit_method_redefine|runkit_method_remove|runkit_method_rename|runkit_return_value_used|runkit_sandbox_output_handler|runkit_superglobals|runtimeexception|samconnection_commit|samconnection_connect|samconnection_constructor|samconnection_disconnect|samconnection_errno|samconnection_error|samconnection_isconnected|samconnection_peek|samconnection_peekall|samconnection_receive|samconnection_remove|samconnection_rollback|samconnection_send|samconnection_setDebug|samconnection_subscribe|samconnection_unsubscribe|sammessage_body|sammessage_constructor|sammessage_header|sca_createdataobject|sca_getservice|sca_localproxy_createdataobject|sca_soapproxy_createdataobject|scandir|sdo_das_changesummary_beginlogging|sdo_das_changesummary_endlogging|sdo_das_changesummary_getchangeddataobjects|sdo_das_changesummary_getchangetype|sdo_das_changesummary_getoldcontainer|sdo_das_changesummary_getoldvalues|sdo_das_changesummary_islogging|sdo_das_datafactory_addpropertytotype|sdo_das_datafactory_addtype|sdo_das_datafactory_getdatafactory|sdo_das_dataobject_getchangesummary|sdo_das_relational_applychanges|sdo_das_relational_construct|sdo_das_relational_createrootdataobject|sdo_das_relational_executepreparedquery|sdo_das_relational_executequery|sdo_das_setting_getlistindex|sdo_das_setting_getpropertyindex|sdo_das_setting_getpropertyname|sdo_das_setting_getvalue|sdo_das_setting_isset|sdo_das_xml_addtypes|sdo_das_xml_create|sdo_das_xml_createdataobject|sdo_das_xml_createdocument|sdo_das_xml_document_getrootdataobject|sdo_das_xml_document_getrootelementname|sdo_das_xml_document_getrootelementuri|sdo_das_xml_document_setencoding|sdo_das_xml_document_setxmldeclaration|sdo_das_xml_document_setxmlversion|sdo_das_xml_loadfile|sdo_das_xml_loadstring|sdo_das_xml_savefile|sdo_das_xml_savestring|sdo_datafactory_create|sdo_dataobject_clear|sdo_dataobject_createdataobject|sdo_dataobject_getcontainer|sdo_dataobject_getsequence|sdo_dataobject_gettypename|sdo_dataobject_gettypenamespaceuri|sdo_exception_getcause|sdo_list_insert|sdo_model_property_getcontainingtype|sdo_model_property_getdefault|sdo_model_property_getname|sdo_model_property_gettype|sdo_model_property_iscontainment|sdo_model_property_ismany|sdo_model_reflectiondataobject_construct|sdo_model_reflectiondataobject_export|sdo_model_reflectiondataobject_getcontainmentproperty|sdo_model_reflectiondataobject_getinstanceproperties|sdo_model_reflectiondataobject_gettype|sdo_model_type_getbasetype|sdo_model_type_getname|sdo_model_type_getnamespaceuri|sdo_model_type_getproperties|sdo_model_type_getproperty|sdo_model_type_isabstracttype|sdo_model_type_isdatatype|sdo_model_type_isinstance|sdo_model_type_isopentype|sdo_model_type_issequencedtype|sdo_sequence_getproperty|sdo_sequence_insert|sdo_sequence_move|seekableiterator|sem_acquire|sem_get|sem_release|sem_remove|serializable|serialize|session_cache_expire|session_cache_limiter|session_commit|session_decode|session_destroy|session_encode|session_get_cookie_params|session_id|session_is_registered|session_module_name|session_name|session_pgsql_add_error|session_pgsql_get_error|session_pgsql_get_field|session_pgsql_reset|session_pgsql_set_field|session_pgsql_status|session_regenerate_id|session_register|session_save_path|session_set_cookie_params|session_set_save_handler|session_start|session_unregister|session_unset|session_write_close|setCounterClass|set_error_handler|set_exception_handler|set_file_buffer|set_include_path|set_magic_quotes_runtime|set_socket_blocking|set_time_limit|setcookie|setlocale|setproctitle|setrawcookie|setstaticpropertyvalue|setthreadtitle|settype|sha1|sha1_file|shell_exec|shm_attach|shm_detach|shm_get_var|shm_has_var|shm_put_var|shm_remove|shm_remove_var|shmop_close|shmop_delete|shmop_open|shmop_read|shmop_size|shmop_write|show_source|shuffle|signeurlpaiement|similar_text|simplexml_import_dom|simplexml_load_file|simplexml_load_string|simplexmlelement|simplexmliterator|sin|sinh|sizeof|sleep|snmp|snmp2_get|snmp2_getnext|snmp2_real_walk|snmp2_set|snmp2_walk|snmp3_get|snmp3_getnext|snmp3_real_walk|snmp3_set|snmp3_walk|snmp_get_quick_print|snmp_get_valueretrieval|snmp_read_mib|snmp_set_enum_print|snmp_set_oid_numeric_print|snmp_set_oid_output_format|snmp_set_quick_print|snmp_set_valueretrieval|snmpget|snmpgetnext|snmprealwalk|snmpset|snmpwalk|snmpwalkoid|soapclient|soapfault|soapheader|soapparam|soapserver|soapvar|socket_accept|socket_bind|socket_clear_error|socket_close|socket_connect|socket_create|socket_create_listen|socket_create_pair|socket_get_option|socket_get_status|socket_getpeername|socket_getsockname|socket_last_error|socket_listen|socket_read|socket_recv|socket_recvfrom|socket_select|socket_send|socket_sendto|socket_set_block|socket_set_blocking|socket_set_nonblock|socket_set_option|socket_set_timeout|socket_shutdown|socket_strerror|socket_write|solr_get_version|solrclient|solrclientexception|solrdocument|solrdocumentfield|solrexception|solrgenericresponse|solrillegalargumentexception|solrillegaloperationexception|solrinputdocument|solrmodifiableparams|solrobject|solrparams|solrpingresponse|solrquery|solrqueryresponse|solrresponse|solrupdateresponse|solrutils|sort|soundex|sphinxclient|spl_autoload|spl_autoload_call|spl_autoload_extensions|spl_autoload_functions|spl_autoload_register|spl_autoload_unregister|spl_classes|spl_object_hash|splbool|spldoublylinkedlist|splenum|splfileinfo|splfileobject|splfixedarray|splfloat|splheap|splint|split|spliti|splmaxheap|splminheap|splobjectstorage|splobserver|splpriorityqueue|splqueue|splstack|splstring|splsubject|spltempfileobject|spoofchecker|sprintf|sql_regcase|sqlite3|sqlite3result|sqlite3stmt|sqlite_array_query|sqlite_busy_timeout|sqlite_changes|sqlite_close|sqlite_column|sqlite_create_aggregate|sqlite_create_function|sqlite_current|sqlite_error_string|sqlite_escape_string|sqlite_exec|sqlite_factory|sqlite_fetch_all|sqlite_fetch_array|sqlite_fetch_column_types|sqlite_fetch_object|sqlite_fetch_single|sqlite_fetch_string|sqlite_field_name|sqlite_has_more|sqlite_has_prev|sqlite_key|sqlite_last_error|sqlite_last_insert_rowid|sqlite_libencoding|sqlite_libversion|sqlite_next|sqlite_num_fields|sqlite_num_rows|sqlite_open|sqlite_popen|sqlite_prev|sqlite_query|sqlite_rewind|sqlite_seek|sqlite_single_query|sqlite_udf_decode_binary|sqlite_udf_encode_binary|sqlite_unbuffered_query|sqlite_valid|sqrt|srand|sscanf|ssdeep_fuzzy_compare|ssdeep_fuzzy_hash|ssdeep_fuzzy_hash_filename|ssh2_auth_hostbased_file|ssh2_auth_none|ssh2_auth_password|ssh2_auth_pubkey_file|ssh2_connect|ssh2_exec|ssh2_fetch_stream|ssh2_fingerprint|ssh2_methods_negotiated|ssh2_publickey_add|ssh2_publickey_init|ssh2_publickey_list|ssh2_publickey_remove|ssh2_scp_recv|ssh2_scp_send|ssh2_sftp|ssh2_sftp_lstat|ssh2_sftp_mkdir|ssh2_sftp_readlink|ssh2_sftp_realpath|ssh2_sftp_rename|ssh2_sftp_rmdir|ssh2_sftp_stat|ssh2_sftp_symlink|ssh2_sftp_unlink|ssh2_shell|ssh2_tunnel|stat|stats_absolute_deviation|stats_cdf_beta|stats_cdf_binomial|stats_cdf_cauchy|stats_cdf_chisquare|stats_cdf_exponential|stats_cdf_f|stats_cdf_gamma|stats_cdf_laplace|stats_cdf_logistic|stats_cdf_negative_binomial|stats_cdf_noncentral_chisquare|stats_cdf_noncentral_f|stats_cdf_poisson|stats_cdf_t|stats_cdf_uniform|stats_cdf_weibull|stats_covariance|stats_den_uniform|stats_dens_beta|stats_dens_cauchy|stats_dens_chisquare|stats_dens_exponential|stats_dens_f|stats_dens_gamma|stats_dens_laplace|stats_dens_logistic|stats_dens_negative_binomial|stats_dens_normal|stats_dens_pmf_binomial|stats_dens_pmf_hypergeometric|stats_dens_pmf_poisson|stats_dens_t|stats_dens_weibull|stats_harmonic_mean|stats_kurtosis|stats_rand_gen_beta|stats_rand_gen_chisquare|stats_rand_gen_exponential|stats_rand_gen_f|stats_rand_gen_funiform|stats_rand_gen_gamma|stats_rand_gen_ibinomial|stats_rand_gen_ibinomial_negative|stats_rand_gen_int|stats_rand_gen_ipoisson|stats_rand_gen_iuniform|stats_rand_gen_noncenral_chisquare|stats_rand_gen_noncentral_f|stats_rand_gen_noncentral_t|stats_rand_gen_normal|stats_rand_gen_t|stats_rand_get_seeds|stats_rand_phrase_to_seeds|stats_rand_ranf|stats_rand_setall|stats_skew|stats_standard_deviation|stats_stat_binomial_coef|stats_stat_correlation|stats_stat_gennch|stats_stat_independent_t|stats_stat_innerproduct|stats_stat_noncentral_t|stats_stat_paired_t|stats_stat_percentile|stats_stat_powersum|stats_variance|stomp|stomp_connect_error|stomp_version|stompexception|stompframe|str_getcsv|str_ireplace|str_pad|str_repeat|str_replace|str_rot13|str_shuffle|str_split|str_word_count|strcasecmp|strchr|strcmp|strcoll|strcspn|stream_bucket_append|stream_bucket_make_writeable|stream_bucket_new|stream_bucket_prepend|stream_context_create|stream_context_get_default|stream_context_get_options|stream_context_get_params|stream_context_set_default|stream_context_set_option|stream_context_set_params|stream_copy_to_stream|stream_encoding|stream_filter_append|stream_filter_prepend|stream_filter_register|stream_filter_remove|stream_get_contents|stream_get_filters|stream_get_line|stream_get_meta_data|stream_get_transports|stream_get_wrappers|stream_is_local|stream_notification_callback|stream_register_wrapper|stream_resolve_include_path|stream_select|stream_set_blocking|stream_set_read_buffer|stream_set_timeout|stream_set_write_buffer|stream_socket_accept|stream_socket_client|stream_socket_enable_crypto|stream_socket_get_name|stream_socket_pair|stream_socket_recvfrom|stream_socket_sendto|stream_socket_server|stream_socket_shutdown|stream_supports_lock|stream_wrapper_register|stream_wrapper_restore|stream_wrapper_unregister|streamwrapper|strftime|strip_tags|stripcslashes|stripos|stripslashes|stristr|strlen|strnatcasecmp|strnatcmp|strncasecmp|strncmp|strpbrk|strpos|strptime|strrchr|strrev|strripos|strrpos|strspn|strstr|strtok|strtolower|strtotime|strtoupper|strtr|strval|substr|substr_compare|substr_count|substr_replace|svm|svmmodel|svn_add|svn_auth_get_parameter|svn_auth_set_parameter|svn_blame|svn_cat|svn_checkout|svn_cleanup|svn_client_version|svn_commit|svn_delete|svn_diff|svn_export|svn_fs_abort_txn|svn_fs_apply_text|svn_fs_begin_txn2|svn_fs_change_node_prop|svn_fs_check_path|svn_fs_contents_changed|svn_fs_copy|svn_fs_delete|svn_fs_dir_entries|svn_fs_file_contents|svn_fs_file_length|svn_fs_is_dir|svn_fs_is_file|svn_fs_make_dir|svn_fs_make_file|svn_fs_node_created_rev|svn_fs_node_prop|svn_fs_props_changed|svn_fs_revision_prop|svn_fs_revision_root|svn_fs_txn_root|svn_fs_youngest_rev|svn_import|svn_log|svn_ls|svn_mkdir|svn_repos_create|svn_repos_fs|svn_repos_fs_begin_txn_for_commit|svn_repos_fs_commit_txn|svn_repos_hotcopy|svn_repos_open|svn_repos_recover|svn_revert|svn_status|svn_update|swf_actiongeturl|swf_actiongotoframe|swf_actiongotolabel|swf_actionnextframe|swf_actionplay|swf_actionprevframe|swf_actionsettarget|swf_actionstop|swf_actiontogglequality|swf_actionwaitforframe|swf_addbuttonrecord|swf_addcolor|swf_closefile|swf_definebitmap|swf_definefont|swf_defineline|swf_definepoly|swf_definerect|swf_definetext|swf_endbutton|swf_enddoaction|swf_endshape|swf_endsymbol|swf_fontsize|swf_fontslant|swf_fonttracking|swf_getbitmapinfo|swf_getfontinfo|swf_getframe|swf_labelframe|swf_lookat|swf_modifyobject|swf_mulcolor|swf_nextid|swf_oncondition|swf_openfile|swf_ortho|swf_ortho2|swf_perspective|swf_placeobject|swf_polarview|swf_popmatrix|swf_posround|swf_pushmatrix|swf_removeobject|swf_rotate|swf_scale|swf_setfont|swf_setframe|swf_shapearc|swf_shapecurveto|swf_shapecurveto3|swf_shapefillbitmapclip|swf_shapefillbitmaptile|swf_shapefilloff|swf_shapefillsolid|swf_shapelinesolid|swf_shapelineto|swf_shapemoveto|swf_showframe|swf_startbutton|swf_startdoaction|swf_startshape|swf_startsymbol|swf_textwidth|swf_translate|swf_viewport|swfaction|swfbitmap|swfbutton|swfdisplayitem|swffill|swffont|swffontchar|swfgradient|swfmorph|swfmovie|swfprebuiltclip|swfshape|swfsound|swfsoundinstance|swfsprite|swftext|swftextfield|swfvideostream|swish_construct|swish_getmetalist|swish_getpropertylist|swish_prepare|swish_query|swishresult_getmetalist|swishresult_stem|swishresults_getparsedwords|swishresults_getremovedstopwords|swishresults_nextresult|swishresults_seekresult|swishsearch_execute|swishsearch_resetlimit|swishsearch_setlimit|swishsearch_setphrasedelimiter|swishsearch_setsort|swishsearch_setstructure|sybase_affected_rows|sybase_close|sybase_connect|sybase_data_seek|sybase_deadlock_retry_count|sybase_fetch_array|sybase_fetch_assoc|sybase_fetch_field|sybase_fetch_object|sybase_fetch_row|sybase_field_seek|sybase_free_result|sybase_get_last_message|sybase_min_client_severity|sybase_min_error_severity|sybase_min_message_severity|sybase_min_server_severity|sybase_num_fields|sybase_num_rows|sybase_pconnect|sybase_query|sybase_result|sybase_select_db|sybase_set_message_handler|sybase_unbuffered_query|symlink|sys_get_temp_dir|sys_getloadavg|syslog|system|tag|tan|tanh|tcpwrap_check|tempnam|textdomain|tidy|tidy_access_count|tidy_config_count|tidy_diagnose|tidy_error_count|tidy_get_error_buffer|tidy_get_output|tidy_load_config|tidy_reset_config|tidy_save_config|tidy_set_encoding|tidy_setopt|tidy_warning_count|tidynode|time|time_nanosleep|time_sleep_until|timezone_abbreviations_list|timezone_identifiers_list|timezone_location_get|timezone_name_from_abbr|timezone_name_get|timezone_offset_get|timezone_open|timezone_transitions_get|timezone_version_get|tmpfile|token_get_all|token_name|tokyotyrant|tokyotyrantquery|tokyotyranttable|tostring|tostring|touch|transliterator|traversable|trigger_error|trim|uasort|ucfirst|ucwords|udm_add_search_limit|udm_alloc_agent|udm_alloc_agent_array|udm_api_version|udm_cat_list|udm_cat_path|udm_check_charset|udm_check_stored|udm_clear_search_limits|udm_close_stored|udm_crc32|udm_errno|udm_error|udm_find|udm_free_agent|udm_free_ispell_data|udm_free_res|udm_get_doc_count|udm_get_res_field|udm_get_res_param|udm_hash32|udm_load_ispell_data|udm_open_stored|udm_set_agent_param|uksort|umask|underflowexception|unexpectedvalueexception|uniqid|unixtojd|unlink|unpack|unregister_tick_function|unserialize|unset|urldecode|urlencode|use_soap_error_handler|user_error|usleep|usort|utf8_decode|utf8_encode|v8js|v8jsexception|var_dump|var_export|variant|variant_abs|variant_add|variant_and|variant_cast|variant_cat|variant_cmp|variant_date_from_timestamp|variant_date_to_timestamp|variant_div|variant_eqv|variant_fix|variant_get_type|variant_idiv|variant_imp|variant_int|variant_mod|variant_mul|variant_neg|variant_not|variant_or|variant_pow|variant_round|variant_set|variant_set_type|variant_sub|variant_xor|version_compare|vfprintf|virtual|vpopmail_add_alias_domain|vpopmail_add_alias_domain_ex|vpopmail_add_domain|vpopmail_add_domain_ex|vpopmail_add_user|vpopmail_alias_add|vpopmail_alias_del|vpopmail_alias_del_domain|vpopmail_alias_get|vpopmail_alias_get_all|vpopmail_auth_user|vpopmail_del_domain|vpopmail_del_domain_ex|vpopmail_del_user|vpopmail_error|vpopmail_passwd|vpopmail_set_user_quota|vprintf|vsprintf|w32api_deftype|w32api_init_dtype|w32api_invoke_function|w32api_register_function|w32api_set_call_method|wddx_add_vars|wddx_deserialize|wddx_packet_end|wddx_packet_start|wddx_serialize_value|wddx_serialize_vars|win32_continue_service|win32_create_service|win32_delete_service|win32_get_last_control_message|win32_pause_service|win32_ps_list_procs|win32_ps_stat_mem|win32_ps_stat_proc|win32_query_service_status|win32_set_service_status|win32_start_service|win32_start_service_ctrl_dispatcher|win32_stop_service|wincache_fcache_fileinfo|wincache_fcache_meminfo|wincache_lock|wincache_ocache_fileinfo|wincache_ocache_meminfo|wincache_refresh_if_changed|wincache_rplist_fileinfo|wincache_rplist_meminfo|wincache_scache_info|wincache_scache_meminfo|wincache_ucache_add|wincache_ucache_cas|wincache_ucache_clear|wincache_ucache_dec|wincache_ucache_delete|wincache_ucache_exists|wincache_ucache_get|wincache_ucache_inc|wincache_ucache_info|wincache_ucache_meminfo|wincache_ucache_set|wincache_unlock|wordwrap|xattr_get|xattr_list|xattr_remove|xattr_set|xattr_supported|xdiff_file_bdiff|xdiff_file_bdiff_size|xdiff_file_bpatch|xdiff_file_diff|xdiff_file_diff_binary|xdiff_file_merge3|xdiff_file_patch|xdiff_file_patch_binary|xdiff_file_rabdiff|xdiff_string_bdiff|xdiff_string_bdiff_size|xdiff_string_bpatch|xdiff_string_diff|xdiff_string_diff_binary|xdiff_string_merge3|xdiff_string_patch|xdiff_string_patch_binary|xdiff_string_rabdiff|xhprof_disable|xhprof_enable|xhprof_sample_disable|xhprof_sample_enable|xml_error_string|xml_get_current_byte_index|xml_get_current_column_number|xml_get_current_line_number|xml_get_error_code|xml_parse|xml_parse_into_struct|xml_parser_create|xml_parser_create_ns|xml_parser_free|xml_parser_get_option|xml_parser_set_option|xml_set_character_data_handler|xml_set_default_handler|xml_set_element_handler|xml_set_end_namespace_decl_handler|xml_set_external_entity_ref_handler|xml_set_notation_decl_handler|xml_set_object|xml_set_processing_instruction_handler|xml_set_start_namespace_decl_handler|xml_set_unparsed_entity_decl_handler|xmlreader|xmlrpc_decode|xmlrpc_decode_request|xmlrpc_encode|xmlrpc_encode_request|xmlrpc_get_type|xmlrpc_is_fault|xmlrpc_parse_method_descriptions|xmlrpc_server_add_introspection_data|xmlrpc_server_call_method|xmlrpc_server_create|xmlrpc_server_destroy|xmlrpc_server_register_introspection_callback|xmlrpc_server_register_method|xmlrpc_set_type|xmlwriter_end_attribute|xmlwriter_end_cdata|xmlwriter_end_comment|xmlwriter_end_document|xmlwriter_end_dtd|xmlwriter_end_dtd_attlist|xmlwriter_end_dtd_element|xmlwriter_end_dtd_entity|xmlwriter_end_element|xmlwriter_end_pi|xmlwriter_flush|xmlwriter_full_end_element|xmlwriter_open_memory|xmlwriter_open_uri|xmlwriter_output_memory|xmlwriter_set_indent|xmlwriter_set_indent_string|xmlwriter_start_attribute|xmlwriter_start_attribute_ns|xmlwriter_start_cdata|xmlwriter_start_comment|xmlwriter_start_document|xmlwriter_start_dtd|xmlwriter_start_dtd_attlist|xmlwriter_start_dtd_element|xmlwriter_start_dtd_entity|xmlwriter_start_element|xmlwriter_start_element_ns|xmlwriter_start_pi|xmlwriter_text|xmlwriter_write_attribute|xmlwriter_write_attribute_ns|xmlwriter_write_cdata|xmlwriter_write_comment|xmlwriter_write_dtd|xmlwriter_write_dtd_attlist|xmlwriter_write_dtd_element|xmlwriter_write_dtd_entity|xmlwriter_write_element|xmlwriter_write_element_ns|xmlwriter_write_pi|xmlwriter_write_raw|xpath_eval|xpath_eval_expression|xpath_new_context|xpath_register_ns|xpath_register_ns_auto|xptr_eval|xptr_new_context|xslt_backend_info|xslt_backend_name|xslt_backend_version|xslt_create|xslt_errno|xslt_error|xslt_free|xslt_getopt|xslt_process|xslt_set_base|xslt_set_encoding|xslt_set_error_handler|xslt_set_log|xslt_set_object|xslt_set_sax_handler|xslt_set_sax_handlers|xslt_set_scheme_handler|xslt_set_scheme_handlers|xslt_setopt|xsltprocessor|yaml_emit|yaml_emit_file|yaml_parse|yaml_parse_file|yaml_parse_url|yaz_addinfo|yaz_ccl_conf|yaz_ccl_parse|yaz_close|yaz_connect|yaz_database|yaz_element|yaz_errno|yaz_error|yaz_es|yaz_es_result|yaz_get_option|yaz_hits|yaz_itemorder|yaz_present|yaz_range|yaz_record|yaz_scan|yaz_scan_result|yaz_schema|yaz_search|yaz_set_option|yaz_sort|yaz_syntax|yaz_wait|yp_all|yp_cat|yp_err_string|yp_errno|yp_first|yp_get_default_domain|yp_master|yp_match|yp_next|yp_order|zend_logo_guid|zend_thread_id|zend_version|zip_close|zip_entry_close|zip_entry_compressedsize|zip_entry_compressionmethod|zip_entry_filesize|zip_entry_name|zip_entry_open|zip_entry_read|zip_open|zip_read|ziparchive|ziparchive_addemptydir|ziparchive_addfile|ziparchive_addfromstring|ziparchive_close|ziparchive_deleteindex|ziparchive_deletename|ziparchive_extractto|ziparchive_getarchivecomment|ziparchive_getcommentindex|ziparchive_getcommentname|ziparchive_getfromindex|ziparchive_getfromname|ziparchive_getnameindex|ziparchive_getstatusstring|ziparchive_getstream|ziparchive_locatename|ziparchive_open|ziparchive_renameindex|ziparchive_renamename|ziparchive_setCommentName|ziparchive_setarchivecomment|ziparchive_setcommentindex|ziparchive_statindex|ziparchive_statname|ziparchive_unchangeall|ziparchive_unchangearchive|ziparchive_unchangeindex|ziparchive_unchangename|zlib_get_coding_type".split("|")),u=n.arrayToMap("abstract|and|array|as|break|case|catch|class|clone|const|continue|declare|default|do|else|elseif|enddeclare|endfor|endforeach|endif|endswitch|endwhile|extends|final|for|foreach|function|global|goto|if|implements|interface|instanceof|namespace|new|or|private|protected|public|static|switch|throw|try|use|var|while|xor".split("|")),t=n.arrayToMap("die|echo|empty|exit|eval|include|include_once|isset|list|require|require_once|return|print|unset".split("|")),s=n.arrayToMap("true|false|null|__CLASS__|__DIR__|__FILE__|__LINE__|__METHOD__|__FUNCTION__|__NAMESPACE__".split("|")),r=n.arrayToMap("$GLOBALS|$_SERVER|$_GET|$_POST|$_FILES|$_REQUEST|$_SESSION|$_ENV|$_COOKIE|$php_errormsg|$HTTP_RAW_POST_DATA|$http_response_header|$argc|$argv".split("|")),q=n.arrayToMap("key_exists|cairo_matrix_create_scale|cairo_matrix_create_translate|call_user_method|call_user_method_array|com_addref|com_get|com_invoke|com_isenum|com_load|com_release|com_set|connection_timeout|cubrid_load_from_glo|cubrid_new_glo|cubrid_save_to_glo|cubrid_send_glo|define_syslog_variables|dl|ereg|ereg_replace|eregi|eregi_replace|hw_documentattributes|hw_documentbodytag|hw_documentsize|hw_outputdocument|imagedashedline|maxdb_bind_param|maxdb_bind_result|maxdb_client_encoding|maxdb_close_long_data|maxdb_execute|maxdb_fetch|maxdb_get_metadata|maxdb_param_count|maxdb_send_long_data|mcrypt_ecb|mcrypt_generic_end|mime_content_type|mysql_createdb|mysql_dbname|mysql_db_query|mysql_drop_db|mysql_dropdb|mysql_escape_string|mysql_fieldflags|mysql_fieldflags|mysql_fieldname|mysql_fieldtable|mysql_fieldtype|mysql_freeresult|mysql_listdbs|mysql_list_fields|mysql_listfields|mysql_list_tables|mysql_listtables|mysql_numfields|mysql_numrows|mysql_selectdb|mysql_tablename|mysqli_bind_param|mysqli_bind_result|mysqli_disable_reads_from_master|mysqli_disable_rpl_parse|mysqli_enable_reads_from_master|mysqli_enable_rpl_parse|mysqli_execute|mysqli_fetch|mysqli_get_metadata|mysqli_master_query|mysqli_param_count|mysqli_rpl_parse_enabled|mysqli_rpl_probe|mysqli_rpl_query_type|mysqli_send_long_data|mysqli_send_query|mysqli_slave_query|ocibindbyname|ocicancel|ocicloselob|ocicollappend|ocicollassign|ocicollassignelem|ocicollgetelem|ocicollmax|ocicollsize|ocicolltrim|ocicolumnisnull|ocicolumnname|ocicolumnprecision|ocicolumnscale|ocicolumnsize|ocicolumntype|ocicolumntyperaw|ocicommit|ocidefinebyname|ocierror|ociexecute|ocifetch|ocifetchinto|ocifetchstatement|ocifreecollection|ocifreecursor|ocifreedesc|ocifreestatement|ociinternaldebug|ociloadlob|ocilogoff|ocilogon|ocinewcollection|ocinewcursor|ocinewdescriptor|ocinlogon|ocinumcols|ociparse|ociplogon|ociresult|ocirollback|ocirowcount|ocisavelob|ocisavelobfile|ociserverversion|ocisetprefetch|ocistatementtype|ociwritelobtofile|ociwritetemporarylob|PDF_add_annotation|PDF_add_bookmark|PDF_add_launchlink|PDF_add_locallink|PDF_add_note|PDF_add_outline|PDF_add_pdflink|PDF_add_weblink|PDF_attach_file|PDF_begin_page|PDF_begin_template|PDF_close_pdi|PDF_close|PDF_findfont|PDF_get_font|PDF_get_fontname|PDF_get_fontsize|PDF_get_image_height|PDF_get_image_width|PDF_get_majorversion|PDF_get_minorversion|PDF_get_pdi_parameter|PDF_get_pdi_value|PDF_open_ccitt|PDF_open_file|PDF_open_gif|PDF_open_image_file|PDF_open_image|PDF_open_jpeg|PDF_open_pdi|PDF_open_tiff|PDF_place_image|PDF_place_pdi_page|PDF_set_border_color|PDF_set_border_dash|PDF_set_border_style|PDF_set_char_spacing|PDF_set_duration|PDF_set_horiz_scaling|PDF_set_info_author|PDF_set_info_creator|PDF_set_info_keywords|PDF_set_info_subject|PDF_set_info_title|PDF_set_leading|PDF_set_text_matrix|PDF_set_text_rendering|PDF_set_text_rise|PDF_set_word_spacing|PDF_setgray_fill|PDF_setgray_stroke|PDF_setgray|PDF_setpolydash|PDF_setrgbcolor_fill|PDF_setrgbcolor_stroke|PDF_setrgbcolor|PDF_show_boxed|php_check_syntax|px_set_tablename|px_set_targetencoding|runkit_sandbox_output_handler|session_is_registered|session_register|session_unregisterset_magic_quotes_runtime|magic_quotes_runtime|set_socket_blocking|socket_set_blocking|set_socket_timeout|socket_set_timeout|split|spliti|sql_regcase".split("|")),f=n.arrayToMap("cfunction|old_function".split("|")),e=n.arrayToMap([]);this.$rules={start:[{token:"support.php_tag",regex:"<\\?(?:php|\\=)"},{token:"support.php_tag",regex:"\\?>"},{token:"comment",regex:"<\\!--",next:"htmlcomment"},{token:"meta.tag",regex:"<style",next:"css"},{token:"meta.tag",regex:"<\\/?[-_a-zA-Z0-9:]+",next:"htmltag"},{token:"meta.tag",regex:"<!DOCTYPE.*?>"},{token:"comment",regex:"\\/\\/.*$"},{token:"comment",regex:"#.*$"},w.getStartRule("doc-start"),{token:"comment",regex:"\\/\\*",next:"comment"},{token:"string.regexp",regex:"[/](?:(?:\\[(?:\\\\]|[^\\]])+\\])|(?:\\\\/|[^\\]/]))*[/][gimy]*\\s*(?=[).,;]|$)"},{token:"string",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]'},{token:"string",regex:'["].*\\\\$',next:"qqstring"},{token:"string",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"string",regex:"['].*\\\\$",next:"qstring"},{token:"constant.numeric",regex:"0[xX][0-9a-fA-F]+\\b"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"constant.language",regex:"\\b(?:DEFAULT_INCLUDE_PATH|E_(?:ALL|CO(?:MPILE_(?:ERROR|WARNING)|RE_(?:ERROR|WARNING))|ERROR|NOTICE|PARSE|STRICT|USER_(?:ERROR|NOTICE|WARNING)|WARNING)|P(?:EAR_(?:EXTENSION_DIR|INSTALL_DIR)|HP_(?:BINDIR|CONFIG_FILE_(?:PATH|SCAN_DIR)|DATADIR|E(?:OL|XTENSION_DIR)|INT_(?:MAX|SIZE)|L(?:IBDIR|OCALSTATEDIR)|O(?:S|UTPUT_HANDLER_(?:CONT|END|START))|PREFIX|S(?:API|HLIB_SUFFIX|YSCONFDIR)|VERSION))|__COMPILER_HALT_OFFSET__)\\b"},{token:"constant.language",regex:"\\b(?:A(?:B(?:DAY_(?:1|2|3|4|5|6|7)|MON_(?:1(?:0|1|2|)|2|3|4|5|6|7|8|9))|LT_DIGITS|M_STR|SSERT_(?:ACTIVE|BAIL|CALLBACK|QUIET_EVAL|WARNING))|C(?:ASE_(?:LOWER|UPPER)|HAR_MAX|O(?:DESET|NNECTION_(?:ABORTED|NORMAL|TIMEOUT)|UNT_(?:NORMAL|RECURSIVE))|R(?:EDITS_(?:ALL|DOCS|FULLPAGE|G(?:ENERAL|ROUP)|MODULES|QA|SAPI)|NCYSTR|YPT_(?:BLOWFISH|EXT_DES|MD5|S(?:ALT_LENGTH|TD_DES)))|URRENCY_SYMBOL)|D(?:AY_(?:1|2|3|4|5|6|7)|ECIMAL_POINT|IRECTORY_SEPARATOR|_(?:FMT|T_FMT))|E(?:NT_(?:COMPAT|NOQUOTES|QUOTES)|RA(?:_(?:D_(?:FMT|T_FMT)|T_FMT|YEAR)|)|XTR_(?:IF_EXISTS|OVERWRITE|PREFIX_(?:ALL|I(?:F_EXISTS|NVALID)|SAME)|SKIP))|FRAC_DIGITS|GROUPING|HTML_(?:ENTITIES|SPECIALCHARS)|IN(?:FO_(?:ALL|C(?:ONFIGURATION|REDITS)|ENVIRONMENT|GENERAL|LICENSE|MODULES|VARIABLES)|I_(?:ALL|PERDIR|SYSTEM|USER)|T_(?:CURR_SYMBOL|FRAC_DIGITS))|L(?:C_(?:ALL|C(?:OLLATE|TYPE)|M(?:ESSAGES|ONETARY)|NUMERIC|TIME)|O(?:CK_(?:EX|NB|SH|UN)|G_(?:A(?:LERT|UTH(?:PRIV|))|C(?:ONS|R(?:IT|ON))|D(?:AEMON|EBUG)|E(?:MERG|RR)|INFO|KERN|L(?:OCAL(?:0|1|2|3|4|5|6|7)|PR)|MAIL|N(?:DELAY|EWS|O(?:TICE|WAIT))|ODELAY|P(?:ERROR|ID)|SYSLOG|U(?:SER|UCP)|WARNING)))|M(?:ON_(?:1(?:0|1|2|)|2|3|4|5|6|7|8|9|DECIMAL_POINT|GROUPING|THOUSANDS_SEP)|_(?:1_PI|2_(?:PI|SQRTPI)|E|L(?:N(?:10|2)|OG(?:10E|2E))|PI(?:_(?:2|4)|)|SQRT(?:1_2|2)))|N(?:EGATIVE_SIGN|O(?:EXPR|STR)|_(?:CS_PRECEDES|S(?:EP_BY_SPACE|IGN_POSN)))|P(?:ATH(?:INFO_(?:BASENAME|DIRNAME|EXTENSION)|_SEPARATOR)|M_STR|OSITIVE_SIGN|_(?:CS_PRECEDES|S(?:EP_BY_SPACE|IGN_POSN)))|RADIXCHAR|S(?:EEK_(?:CUR|END|SET)|ORT_(?:ASC|DESC|NUMERIC|REGULAR|STRING)|TR_PAD_(?:BOTH|LEFT|RIGHT))|T(?:HOUS(?:ANDS_SEP|EP)|_FMT(?:_AMPM|))|YES(?:EXPR|STR)|STD(?:IN|OUT|ERR))\\b"},{token:function(b){return u.hasOwnProperty(b)?"keyword":s.hasOwnProperty(b)?"constant.language":r.hasOwnProperty(b)?"variable.language":e.hasOwnProperty(b)?"invalid.illegal":v.hasOwnProperty(b)?"support.function":b=="debugger"?"invalid.deprecated":b.match(/^(\$[a-zA-Z][a-zA-Z0-9_]*|self|parent)$/)?"variable":"identifier"},regex:"[a-zA-Z_$][a-zA-Z0-9_$]*\\b"},{token:"keyword.operator",regex:"!|\\$|%|&|\\*|\\-\\-|\\-|\\+\\+|\\+|~|===|==|=|!=|!==|<=|>=|<<=|>>=|>>>=|<>|<|>|!|&&|\\|\\||\\?\\:|\\*=|%=|\\+=|\\-=|&=|\\^=|\\b(?:in|instanceof|new|delete|typeof|void)"},{token:"lparen",regex:"[[({]"},{token:"rparen",regex:"[\\])}]"},{token:"text",regex:"\\s+"}],comment:[{token:"comment",regex:".*?\\*\\/",next:"start"},{token:"comment",regex:".+"}],qqstring:[{token:"string",regex:'(?:(?:\\\\.)|(?:[^"\\\\]))*?"',next:"start"},{token:"string",regex:".+"}],qstring:[{token:"string",regex:"(?:(?:\\\\.)|(?:[^'\\\\]))*?'",next:"start"},{token:"string",regex:".+"}],htmlcomment:[{token:"comment",regex:".*?-->",next:"start"},{token:"comment",regex:".+"}],htmltag:[{token:"meta.tag",regex:">",next:"start"},{token:"text",regex:"[-_a-zA-Z0-9:]+"},{token:"text",regex:"\\s+"},{token:"string",regex:'".*?"'},{token:"string",regex:"'.*?'"}],css:[{token:"meta.tag",regex:"</style>",next:"htmltag"},{token:"meta.tag",regex:">"},{token:"text",regex:"(?:media|type|href)"},{token:"string",regex:'=".*?"'},{token:"paren.lparen",regex:"{",next:"cssdeclaration"},{token:"keyword",regex:"#[A-Za-z0-9-_.]+"},{token:"variable",regex:"\\.[A-Za-z0-9-_.]+"},{token:"constant",regex:"[A-Za-z0-9]+"}],cssdeclaration:[{token:"support.type",regex:"[-a-zA-Z]+",next:"cssvalue"},{token:"paren.rparen",regex:"}",next:"css"}],cssvalue:[{token:"text",regex:":"},{token:"constant",regex:"#[0-9a-zA-Z]+"},{token:"text",regex:"[-_0-9a-zA-Z\"' ,%]+"},{token:"text",regex:";",next:"cssdeclaration"}]},this.embedRules(m,"doc-",[(new m).getEndRule("start")])};o.inherits(k,l),i.PhpHighlightRules=k}),ace.define("ace/mode/doc_comment_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(i,g,m){var l=i("../lib/oop"),k=i("./text_highlight_rules").TextHighlightRules,j=function(){this.$rules={start:[{token:"comment.doc.tag",regex:"@[\\w\\d_]+"},{token:"comment.doc",merge:!0,regex:"\\s+"},{token:"comment.doc",merge:!0,regex:"TODO"},{token:"comment.doc",merge:!0,regex:"[^@\\*]+"},{token:"comment.doc",merge:!0,regex:"."}]}};l.inherits(j,k),function(){this.getStartRule=function(b){return{token:"comment.doc",merge:!0,regex:"\\/\\*(?=\\*)",next:b}},this.getEndRule=function(b){return{token:"comment.doc",merge:!0,regex:"\\*\\/",next:b}}}.call(j.prototype),g.DocCommentHighlightRules=j}),ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(g,f,k){var j=g("../range").Range,i=function(){};((function(){this.checkOutdent=function(d,c){return/^\s+$/.test(d)?/^\s*\}/.test(c):!1},this.autoOutdent=function(l,d){var q=l.getLine(d),p=q.match(/^(\s*\})/);if(!p){return 0}var o=p[1].length,n=l.findMatchingBracket({row:d,column:o});if(!n||n.row==d){return 0}var m=this.$getIndent(l.getLine(n.row));l.replace(new j(d,0,d,o-1),m)},this.$getIndent=function(d){var c=d.match(/^(\s+)/);return c?c[1]:""}})).call(i.prototype),f.MatchingBraceOutdent=i}),ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour"],function(i,g,m){var l=i("../../lib/oop"),k=i("../behaviour").Behaviour,j=function(){this.add("braces","insertion",function(B,A,z,y,x){if(x=="{"){var w=z.getSelectionRange(),v=y.doc.getTextRange(w);return v!==""?{text:"{"+v+"}",selection:!1}:{text:"{}",selection:[1,1]}}if(x=="}"){var u=z.getCursorPosition(),t=y.doc.getLine(u.row),s=t.substring(u.column,u.column+1);if(s=="}"){var r=y.$findOpeningBracket("}",{column:u.column+1,row:u.row});if(r!==null){return{text:"",selection:[1,1]}}}}else{if(x=="\n"){var u=z.getCursorPosition(),t=y.doc.getLine(u.row),s=t.substring(u.column,u.column+1);if(s=="}"){var q=y.findMatchingBracket({row:u.row,column:u.column+1});if(!q){return null}var p=this.getNextLineIndent(B,t.substring(0,t.length-1),y.getTabString()),o=this.$getIndent(y.doc.getLine(q.row));return{text:"\n"+p+"\n"+o,selection:[1,p.length,1,p.length]}}}}}),this.add("braces","deletion",function(o,n,u,t,s){var r=t.doc.getTextRange(s);if(!s.isMultiLine()&&r=="{"){var q=t.doc.getLine(s.start.row),p=q.substring(s.end.column,s.end.column+1);if(p=="}"){return s.end.column++,s}}}),this.add("parens","insertion",function(x,w,v,u,t){if(t=="("){var s=v.getSelectionRange(),r=u.doc.getTextRange(s);return r!==""?{text:"("+r+")",selection:!1}:{text:"()",selection:[1,1]}}if(t==")"){var q=v.getCursorPosition(),p=u.doc.getLine(q.row),o=p.substring(q.column,q.column+1);if(o==")"){var n=u.$findOpeningBracket(")",{column:q.column+1,row:q.row});if(n!==null){return{text:"",selection:[1,1]}}}}}),this.add("parens","deletion",function(o,n,u,t,s){var r=t.doc.getTextRange(s);if(!s.isMultiLine()&&r=="("){var q=t.doc.getLine(s.start.row),p=q.substring(s.start.column+1,s.start.column+2);if(p==")"){return s.end.column++,s}}}),this.add("string_dquotes","insertion",function(F,E,D,C,B){if(B=='"'){var A=D.getSelectionRange(),z=C.doc.getTextRange(A);if(z!==""){return{text:'"'+z+'"',selection:!1}}var y=D.getCursorPosition(),x=C.doc.getLine(y.row),w=x.substring(y.column-1,y.column);if(w=="\\"){return null}var v=C.getTokens(A.start.row,A.start.row)[0].tokens,u=0,t,s=-1;for(var r=0;r<v.length;r++){t=v[r],t.type=="string"?s=-1:s<0&&(s=t.value.indexOf('"'));if(t.value.length+u>A.start.column){break}u+=v[r].value.length}if(!t||s<0&&t.type!=="comment"&&(t.type!=="string"||A.start.column!==t.value.length+u-1&&t.value.lastIndexOf('"')===t.value.length-1)){return{text:'""',selection:[1,1]}}if(t&&t.type==="string"){var q=x.substring(y.column,y.column+1);if(q=='"'){return{text:"",selection:[1,1]}}}}}),this.add("string_dquotes","deletion",function(o,n,u,t,s){var r=t.doc.getTextRange(s);if(!s.isMultiLine()&&r=='"'){var q=t.doc.getLine(s.start.row),p=q.substring(s.start.column+1,s.start.column+2);if(p=='"'){return s.end.column++,s}}})};l.inherits(j,k),g.CstyleBehaviour=j}),ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],function(j,i,o){var n=j("../../lib/oop"),m=j("../../range").Range,l=j("./fold_mode").FoldMode,k=i.FoldMode=function(){};n.inherits(k,l),function(){this.foldingStartMarker=/(\{|\[)[^\}\]]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{]*(\}|\])|^[\s\*]*(\*\/)/,this.getFoldWidgetRange=function(w,v,u){var t=w.getLine(u),s=t.match(this.foldingStartMarker);if(s){var r=s.index;if(s[1]){return this.openingBracketBlock(w,s[1],u,r)}var q=w.getCommentFoldRange(u,r+s[0].length);return q.end.column-=2,q}if(v!=="markbeginend"){return}var s=t.match(this.foldingStopMarker);if(s){var r=s.index+s[0].length;if(s[2]){var q=w.getCommentFoldRange(u,r);return q.end.column-=2,q}var p={row:u,column:r},e=w.$findOpeningBracket(s[1],p);if(!e){return}return e.column++,p.column--,m.fromPoints(e,p)}}}.call(k.prototype)}),ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(g,f,k){var j=g("../../range").Range,i=f.FoldMode=function(){};((function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(l,e,n){var m=l.getLine(n);return this.foldingStartMarker.test(m)?"start":e=="markbeginend"&&this.foldingStopMarker&&this.foldingStopMarker.test(m)?"end":""},this.getFoldWidgetRange=function(e,d,l){return null},this.indentationBlock=function(x,w,v){var u=/^\s*/,t=w,s=w,r=x.getLine(w),q=v||r.length,p=r.match(u)[0].length,o=x.getLength();while(++w<o){r=x.getLine(w);var n=r.match(u)[0].length;if(n==r.length){continue}if(n<=p){break}s=w}if(s>t){var d=x.getLine(s).length;return new j(t,q,s,d)}},this.openingBracketBlock=function(l,d,q,p){var o={row:q,column:p+1},n=l.$findClosingBracket(d,o);if(!n){return}var m=l.foldWidgets[n.row];return m==null&&(m=this.getFoldWidget(l,n.row)),m=="start"&&(n.row--,n.column=l.getLine(n.row).length),j.fromPoints(o,n)}})).call(i.prototype)}),function(){ace.require(["ace/ace"],function(d){window.ace||(window.ace={});for(var c in d){d.hasOwnProperty(c)&&(ace[c]=d[c])}})}();ace.define("ace/mode/javascript",["require","exports","module","ace/lib/oop","ace/mode/text","ace/tokenizer","ace/mode/javascript_highlight_rules","ace/mode/matching_brace_outdent","ace/range","ace/worker/worker_client","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle"],function(z,y,x){var w=z("../lib/oop"),v=z("./text").Mode,u=z("../tokenizer").Tokenizer,t=z("./javascript_highlight_rules").JavaScriptHighlightRules,s=z("./matching_brace_outdent").MatchingBraceOutdent,r=z("../range").Range,q=z("../worker/worker_client").WorkerClient,p=z("./behaviour/cstyle").CstyleBehaviour,o=z("./folding/cstyle").FoldMode,n=function(){this.$tokenizer=new u((new t).getRules()),this.$outdent=new s,this.$behaviour=new p,this.foldingRules=new o};w.inherits(n,v),function(){this.toggleCommentLines=function(G,F,E,D){var C=!0,B=/^(\s*)\/\//;for(var A=E;A<=D;A++){if(!B.test(F.getLine(A))){C=!1;break}}if(C){var m=new r(0,0,0,0);for(var A=E;A<=D;A++){var l=F.getLine(A),i=l.match(B);m.start.row=A,m.end.row=A,m.end.column=i[0].length,F.replace(m,i[1])}}else{F.indentRows(E,D,"//")}},this.getNextLineIndent=function(j,i,C){var B=this.$getIndent(i),A=this.$tokenizer.getLineTokens(i,j),m=A.tokens,l=A.state;if(m.length&&m[m.length-1].type=="comment"){return B}if(j=="start"||j=="regex_allowed"){var k=i.match(/^.*(?:\bcase\b.*\:|[\{\(\[])\s*$/);k&&(B+=C)}else{if(j=="doc-start"){if(l=="start"||j=="regex_allowed"){return""}var k=i.match(/^\s*(\/?)\*/);k&&(k[1]&&(B+=" "),B+="* ")}}return B},this.checkOutdent=function(e,d,f){return this.$outdent.checkOutdent(d,f)},this.autoOutdent=function(e,d,f){this.$outdent.autoOutdent(d,f)},this.createWorker=function(d){var c=new q(["ace"],"worker-javascript.js","ace/mode/javascript_worker","JavaScriptWorker");return c.attachToDocument(d.getDocument()),c.on("jslint",function(a){var i=[];for(var g=0;g<a.data.length;g++){var f=a.data[g];f&&i.push({row:f.line-1,column:f.character-1,text:f.reason,type:"warning",lint:f})}d.setAnnotations(i)}),c.on("narcissus",function(a){d.setAnnotations([a.data])}),c.on("terminate",function(){d.clearAnnotations()}),c}}.call(n.prototype),y.Mode=n}),ace.define("ace/mode/javascript_highlight_rules",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/unicode","ace/mode/doc_comment_highlight_rules","ace/mode/text_highlight_rules"],function(r,q,p){var o=r("../lib/oop"),n=r("../lib/lang"),m=r("../unicode"),l=r("./doc_comment_highlight_rules").DocCommentHighlightRules,k=r("./text_highlight_rules").TextHighlightRules,j=function(){var f=n.arrayToMap("Array|Boolean|Date|Function|Iterator|Number|Object|RegExp|String|Proxy|Namespace|QName|XML|XMLList|ArrayBuffer|Float32Array|Float64Array|Int16Array|Int32Array|Int8Array|Uint16Array|Uint32Array|Uint8Array|Uint8ClampedArray|Error|EvalError|InternalError|RangeError|ReferenceError|StopIteration|SyntaxError|TypeError|URIError|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|eval|isFinite|isNaN|parseFloat|parseInt|JSON|Math|this|arguments|prototype|window|document".split("|")),e=n.arrayToMap("break|case|catch|continue|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|let|var|while|with|const|yield|import|get|set".split("|")),w="case|do|else|finally|in|instanceof|return|throw|try|typeof|yield",v=n.arrayToMap("__parent__|__count__|escape|unescape|with|__proto__".split("|")),u=n.arrayToMap("const|let|var|function".split("|")),t=n.arrayToMap("null|Infinity|NaN|undefined".split("|")),s=n.arrayToMap("class|enum|extends|super|export|implements|private|public|interface|package|protected|static".split("|")),g="["+m.packages.L+"\\$_]["+m.packages.L+m.packages.Mn+m.packages.Mc+m.packages.Nd+m.packages.Pc+"\\$_]*\\b";this.$rules={start:[{token:"comment",regex:"\\/\\/.*$"},(new l).getStartRule("doc-start"),{token:"comment",merge:!0,regex:"\\/\\*",next:"comment"},{token:"string",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]'},{token:"string",merge:!0,regex:'["].*\\\\$',next:"qqstring"},{token:"string",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"string",merge:!0,regex:"['].*\\\\$",next:"qstring"},{token:"constant.numeric",regex:"0[xX][0-9a-fA-F]+\\b"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:["keyword.definition","text","entity.name.function"],regex:"(function)(\\s+)("+g+")"},{token:"constant.language.boolean",regex:"(?:true|false)\\b"},{token:"keyword",regex:"(?:"+w+")\\b",next:"regex_allowed"},{token:function(a){return f.hasOwnProperty(a)?"variable.language":v.hasOwnProperty(a)?"invalid.deprecated":u.hasOwnProperty(a)?"keyword.definition":e.hasOwnProperty(a)?"keyword":t.hasOwnProperty(a)?"constant.language":s.hasOwnProperty(a)?"invalid.illegal":a=="debugger"?"invalid.deprecated":"identifier"},regex:g},{token:"keyword.operator",regex:"!|\\$|%|&|\\*|\\-\\-|\\-|\\+\\+|\\+|~|===|==|=|!=|!==|<=|>=|<<=|>>=|>>>=|<>|<|>|!|&&|\\|\\||\\?\\:|\\*=|%=|\\+=|\\-=|&=|\\^=|\\b(?:in|instanceof|new|delete|typeof|void)",next:"regex_allowed"},{token:"punctuation.operator",regex:"\\?|\\:|\\,|\\;|\\.",next:"regex_allowed"},{token:"paren.lparen",regex:"[[({]",next:"regex_allowed"},{token:"paren.rparen",regex:"[\\])}]"},{token:"keyword.operator",regex:"\\/=?",next:"regex_allowed"},{token:"comment",regex:"^#!.*$"},{token:"text",regex:"\\s+"}],regex_allowed:[{token:"comment",merge:!0,regex:"\\/\\*",next:"comment_regex_allowed"},{token:"comment",regex:"\\/\\/.*$"},{token:"string.regexp",regex:"\\/",next:"regex",merge:!0},{token:"text",regex:"\\s+"},{token:"empty",regex:"",next:"start"}],regex:[{token:"regexp.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)",next:"regex"},{token:"string.regexp",regex:"/\\w*",next:"start",merge:!0},{token:"string.regexp",regex:"[^\\\\/\\[]+",next:"regex",merge:!0},{token:"string.regexp.charachterclass",regex:"\\[",next:"regex_character_class",merge:!0},{token:"empty",regex:"",next:"start"}],regex_character_class:[{token:"regexp.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)",next:"regex_character_class"},{token:"string.regexp.charachterclass",regex:"]",next:"regex",merge:!0},{token:"string.regexp.charachterclass",regex:"[^\\\\\\]]+",next:"regex_character_class",merge:!0},{token:"empty",regex:"",next:"start"}],comment_regex_allowed:[{token:"comment",regex:".*?\\*\\/",merge:!0,next:"regex_allowed"},{token:"comment",merge:!0,regex:".+"}],comment:[{token:"comment",regex:".*?\\*\\/",merge:!0,next:"start"},{token:"comment",merge:!0,regex:".+"}],qqstring:[{token:"string",regex:'(?:(?:\\\\.)|(?:[^"\\\\]))*?"',next:"start"},{token:"string",merge:!0,regex:".+"}],qstring:[{token:"string",regex:"(?:(?:\\\\.)|(?:[^'\\\\]))*?'",next:"start"},{token:"string",merge:!0,regex:".+"}]},this.embedRules(l,"doc-",[(new l).getEndRule("start")])};o.inherits(j,k),q.JavaScriptHighlightRules=j}),ace.define("ace/mode/doc_comment_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(i,g,m){var l=i("../lib/oop"),k=i("./text_highlight_rules").TextHighlightRules,j=function(){this.$rules={start:[{token:"comment.doc.tag",regex:"@[\\w\\d_]+"},{token:"comment.doc",merge:!0,regex:"\\s+"},{token:"comment.doc",merge:!0,regex:"TODO"},{token:"comment.doc",merge:!0,regex:"[^@\\*]+"},{token:"comment.doc",merge:!0,regex:"."}]}};l.inherits(j,k),function(){this.getStartRule=function(b){return{token:"comment.doc",merge:!0,regex:"\\/\\*(?=\\*)",next:b}},this.getEndRule=function(b){return{token:"comment.doc",merge:!0,regex:"\\*\\/",next:b}}}.call(j.prototype),g.DocCommentHighlightRules=j}),ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(g,f,k){var j=g("../range").Range,i=function(){};((function(){this.checkOutdent=function(d,c){return/^\s+$/.test(d)?/^\s*\}/.test(c):!1},this.autoOutdent=function(l,d){var q=l.getLine(d),p=q.match(/^(\s*\})/);if(!p){return 0}var o=p[1].length,n=l.findMatchingBracket({row:d,column:o});if(!n||n.row==d){return 0}var m=this.$getIndent(l.getLine(n.row));l.replace(new j(d,0,d,o-1),m)},this.$getIndent=function(d){var c=d.match(/^(\s+)/);return c?c[1]:""}})).call(i.prototype),f.MatchingBraceOutdent=i}),ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(i,g,m){var l=i("../lib/oop"),k=i("../lib/event_emitter").EventEmitter,j=function(v,u,t,s){this.changeListener=this.changeListener.bind(this);if(m.packaged){var r=this.$guessBasePath();this.$worker=new Worker(r+u)}else{var q=this.$normalizePath(i.nameToUrl("ace/worker/worker",null,"_"));this.$worker=new Worker(q);var p={};for(var o=0;o<v.length;o++){var n=v[o],c=this.$normalizePath(i.nameToUrl(n,null,"_").replace(/.js$/,""));p[n]=c}}this.$worker.postMessage({init:!0,tlns:p,module:t,classname:s}),this.callbackId=1,this.callbacks={};var a=this;this.$worker.onerror=function(b){throw window.console&&console.log&&console.log(b),b},this.$worker.onmessage=function(e){var d=e.data;switch(d.type){case"log":window.console&&console.log&&console.log(d.data);break;case"event":a._emit(d.name,{data:d.data});break;case"call":var f=a.callbacks[d.id];f&&(f(d.data),delete a.callbacks[d.id])}}};((function(){l.implement(this,k),this.$normalizePath=function(b){return b=b.replace(/^[a-z]+:\/\/[^\/]+\//,""),b=location.protocol+"//"+location.host+(b.charAt(0)=="/"?"":location.pathname.replace(/\/[^\/]*$/,""))+"/"+b.replace(/^[\/]+/,""),b},this.$guessBasePath=function(){if(i.aceBaseUrl){return i.aceBaseUrl}var a=document.getElementsByTagName("script");for(var r=0;r<a.length;r++){var q=a[r],p=q.getAttribute("data-ace-base");if(p){return p.replace(/\/*$/,"/")}var o=q.src||q.getAttribute("src");if(!o){continue}var n=o.match(/^(?:(.*\/)ace\.js|(.*\/)ace(-uncompressed)?(-noconflict)?\.js)(?:\?|$)/);if(n){return n[1]||n[2]}}return""},this.terminate=function(){this._emit("terminate",{}),this.$worker.terminate(),this.$worker=null,this.$doc.removeEventListener("change",this.changeListener),this.$doc=null},this.send=function(d,c){this.$worker.postMessage({command:d,args:c})},this.call=function(f,e,o){if(o){var n=this.callbackId++;this.callbacks[n]=o,e.push(n)}this.send(f,e)},this.emit=function(e,d){try{this.$worker.postMessage({event:e,data:{data:d.data}})}catch(f){}},this.attachToDocument=function(b){this.$doc&&this.terminate(),this.$doc=b,this.call("setValue",[b.getValue()]),b.on("change",this.changeListener)},this.changeListener=function(b){b.range={start:b.data.range.start,end:b.data.range.end},this.emit("change",b)}})).call(j.prototype),g.WorkerClient=j}),ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour"],function(i,g,m){var l=i("../../lib/oop"),k=i("../behaviour").Behaviour,j=function(){this.add("braces","insertion",function(B,A,z,y,x){if(x=="{"){var w=z.getSelectionRange(),v=y.doc.getTextRange(w);return v!==""?{text:"{"+v+"}",selection:!1}:{text:"{}",selection:[1,1]}}if(x=="}"){var u=z.getCursorPosition(),t=y.doc.getLine(u.row),s=t.substring(u.column,u.column+1);if(s=="}"){var r=y.$findOpeningBracket("}",{column:u.column+1,row:u.row});if(r!==null){return{text:"",selection:[1,1]}}}}else{if(x=="\n"){var u=z.getCursorPosition(),t=y.doc.getLine(u.row),s=t.substring(u.column,u.column+1);if(s=="}"){var q=y.findMatchingBracket({row:u.row,column:u.column+1});if(!q){return null}var p=this.getNextLineIndent(B,t.substring(0,t.length-1),y.getTabString()),o=this.$getIndent(y.doc.getLine(q.row));return{text:"\n"+p+"\n"+o,selection:[1,p.length,1,p.length]}}}}}),this.add("braces","deletion",function(o,n,u,t,s){var r=t.doc.getTextRange(s);if(!s.isMultiLine()&&r=="{"){var q=t.doc.getLine(s.start.row),p=q.substring(s.end.column,s.end.column+1);if(p=="}"){return s.end.column++,s}}}),this.add("parens","insertion",function(x,w,v,u,t){if(t=="("){var s=v.getSelectionRange(),r=u.doc.getTextRange(s);return r!==""?{text:"("+r+")",selection:!1}:{text:"()",selection:[1,1]}}if(t==")"){var q=v.getCursorPosition(),p=u.doc.getLine(q.row),o=p.substring(q.column,q.column+1);if(o==")"){var n=u.$findOpeningBracket(")",{column:q.column+1,row:q.row});if(n!==null){return{text:"",selection:[1,1]}}}}}),this.add("parens","deletion",function(o,n,u,t,s){var r=t.doc.getTextRange(s);if(!s.isMultiLine()&&r=="("){var q=t.doc.getLine(s.start.row),p=q.substring(s.start.column+1,s.start.column+2);if(p==")"){return s.end.column++,s}}}),this.add("string_dquotes","insertion",function(F,E,D,C,B){if(B=='"'){var A=D.getSelectionRange(),z=C.doc.getTextRange(A);if(z!==""){return{text:'"'+z+'"',selection:!1}}var y=D.getCursorPosition(),x=C.doc.getLine(y.row),w=x.substring(y.column-1,y.column);if(w=="\\"){return null}var v=C.getTokens(A.start.row,A.start.row)[0].tokens,u=0,t,s=-1;for(var r=0;r<v.length;r++){t=v[r],t.type=="string"?s=-1:s<0&&(s=t.value.indexOf('"'));if(t.value.length+u>A.start.column){break}u+=v[r].value.length}if(!t||s<0&&t.type!=="comment"&&(t.type!=="string"||A.start.column!==t.value.length+u-1&&t.value.lastIndexOf('"')===t.value.length-1)){return{text:'""',selection:[1,1]}}if(t&&t.type==="string"){var q=x.substring(y.column,y.column+1);if(q=='"'){return{text:"",selection:[1,1]}}}}}),this.add("string_dquotes","deletion",function(o,n,u,t,s){var r=t.doc.getTextRange(s);if(!s.isMultiLine()&&r=='"'){var q=t.doc.getLine(s.start.row),p=q.substring(s.start.column+1,s.start.column+2);if(p=='"'){return s.end.column++,s}}})};l.inherits(j,k),g.CstyleBehaviour=j}),ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],function(j,i,o){var n=j("../../lib/oop"),m=j("../../range").Range,l=j("./fold_mode").FoldMode,k=i.FoldMode=function(){};n.inherits(k,l),function(){this.foldingStartMarker=/(\{|\[)[^\}\]]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{]*(\}|\])|^[\s\*]*(\*\/)/,this.getFoldWidgetRange=function(w,v,u){var t=w.getLine(u),s=t.match(this.foldingStartMarker);if(s){var r=s.index;if(s[1]){return this.openingBracketBlock(w,s[1],u,r)}var q=w.getCommentFoldRange(u,r+s[0].length);return q.end.column-=2,q}if(v!=="markbeginend"){return}var s=t.match(this.foldingStopMarker);if(s){var r=s.index+s[0].length;if(s[2]){var q=w.getCommentFoldRange(u,r);return q.end.column-=2,q}var p={row:u,column:r},e=w.$findOpeningBracket(s[1],p);if(!e){return}return e.column++,p.column--,m.fromPoints(e,p)}}}.call(k.prototype)}),ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(g,f,k){var j=g("../../range").Range,i=f.FoldMode=function(){};((function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(l,e,n){var m=l.getLine(n);return this.foldingStartMarker.test(m)?"start":e=="markbeginend"&&this.foldingStopMarker&&this.foldingStopMarker.test(m)?"end":""},this.getFoldWidgetRange=function(e,d,l){return null},this.indentationBlock=function(x,w,v){var u=/^\s*/,t=w,s=w,r=x.getLine(w),q=v||r.length,p=r.match(u)[0].length,o=x.getLength();while(++w<o){r=x.getLine(w);var n=r.match(u)[0].length;if(n==r.length){continue}if(n<=p){break}s=w}if(s>t){var d=x.getLine(s).length;return new j(t,q,s,d)}},this.openingBracketBlock=function(l,d,q,p){var o={row:q,column:p+1},n=l.$findClosingBracket(d,o);if(!n){return}var m=l.foldWidgets[n.row];return m==null&&(m=this.getFoldWidget(l,n.row)),m=="start"&&(n.row--,n.column=l.getLine(n.row).length),j.fromPoints(o,n)}})).call(i.prototype)}),function(){ace.require(["ace/ace"],function(d){window.ace||(window.ace={});for(var c in d){d.hasOwnProperty(c)&&(ace[c]=d[c])}})}();ace.define("ace/mode/xml",["require","exports","module","ace/lib/oop","ace/mode/text","ace/tokenizer","ace/mode/xml_highlight_rules","ace/mode/behaviour/xml","ace/mode/folding/xml"],function(t,s,r){var q=t("../lib/oop"),p=t("./text").Mode,o=t("../tokenizer").Tokenizer,n=t("./xml_highlight_rules").XmlHighlightRules,m=t("./behaviour/xml").XmlBehaviour,l=t("./folding/xml").FoldMode,k=function(){this.$tokenizer=new o((new n).getRules()),this.$behaviour=new m,this.foldingRules=new l};q.inherits(k,p),function(){this.getNextLineIndent=function(e,d,f){return this.$getIndent(d)}}.call(k.prototype),s.Mode=k}),ace.define("ace/mode/xml_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/xml_util","ace/mode/text_highlight_rules"],function(j,i,o){var n=j("../lib/oop"),m=j("./xml_util"),l=j("./text_highlight_rules").TextHighlightRules,k=function(){this.$rules={start:[{token:"text",regex:"<\\!\\[CDATA\\[",next:"cdata"},{token:"xml_pe",regex:"<\\?.*?\\?>"},{token:"comment",merge:!0,regex:"<\\!--",next:"comment"},{token:"meta.tag",regex:"<\\/?",next:"tag"},{token:"text",regex:"\\s+"},{token:"text",regex:"[^<]+"}],cdata:[{token:"text",regex:"\\]\\]>",next:"start"},{token:"text",regex:"\\s+"},{token:"text",regex:"(?:[^\\]]|\\](?!\\]>))+"}],comment:[{token:"comment",regex:".*?-->",next:"start"},{token:"comment",merge:!0,regex:".+"}]},m.tag(this.$rules,"tag","start")};n.inherits(k,l),i.XmlHighlightRules=k}),ace.define("ace/mode/xml_util",["require","exports","module","ace/lib/lang"],function(j,i,p){function l(b){return[{token:"string",regex:'".*?"'},{token:"string",merge:!0,regex:'["].*',next:b+"-qqstring"},{token:"string",regex:"'.*?'"},{token:"string",merge:!0,regex:"['].*",next:b+"-qstring"}]}function k(d,c){return[{token:"string",merge:!0,regex:".*?"+d,next:c},{token:"string",merge:!0,regex:".+"}]}"use strict";var o=j("../lib/lang"),n=o.arrayToMap("button|form|input|label|select|textarea".split("|")),m=o.arrayToMap("table|tbody|td|tfoot|th|tr".split("|"));i.tag=function(e,d,f){e[d]=[{token:"text",regex:"\\s+"},{token:function(b){return b==="a"?"meta.tag.anchor":b==="img"?"meta.tag.image":b==="script"?"meta.tag.script":b==="style"?"meta.tag.style":n.hasOwnProperty(b.toLowerCase())?"meta.tag.form":m.hasOwnProperty(b.toLowerCase())?"meta.tag.table":"meta.tag"},merge:!0,regex:"[-_a-zA-Z0-9:!]+",next:d+"embed-attribute-list"},{token:"empty",regex:"",next:d+"embed-attribute-list"}],e[d+"-qstring"]=k("'",d+"embed-attribute-list"),e[d+"-qqstring"]=k('"',d+"embed-attribute-list"),e[d+"embed-attribute-list"]=[{token:"meta.tag",merge:!0,regex:"/?>",next:f},{token:"keyword.operator",regex:"="},{token:"entity.other.attribute-name",regex:"[-_a-zA-Z0-9:]+"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"text",regex:"\\s+"}].concat(l(d))}}),ace.define("ace/mode/behaviour/xml",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/mode/behaviour/cstyle"],function(j,i,o){var n=j("../../lib/oop"),m=j("../behaviour").Behaviour,l=j("./cstyle").CstyleBehaviour,k=function(){this.inherit(l,["string_dquotes"]),this.add("brackets","insertion",function(B,A,z,y,x){if(x=="<"){var w=z.getSelectionRange(),v=y.doc.getTextRange(w);return v!==""?!1:{text:"<>",selection:[1,1]}}if(x==">"){var u=z.getCursorPosition(),t=y.doc.getLine(u.row),s=t.substring(u.column,u.column+1);if(s==">"){return{text:"",selection:[1,1]}}}else{if(x=="\n"){var u=z.getCursorPosition(),t=y.doc.getLine(u.row),r=t.substring(u.column,u.column+2);if(r=="</"){var q=this.$getIndent(y.doc.getLine(u.row))+y.getTabString(),p=this.$getIndent(y.doc.getLine(u.row));return{text:"\n"+q+"\n"+p,selection:[1,q.length,1,q.length]}}}}})};n.inherits(k,m),i.XmlBehaviour=k}),ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour"],function(i,g,m){var l=i("../../lib/oop"),k=i("../behaviour").Behaviour,j=function(){this.add("braces","insertion",function(B,A,z,y,x){if(x=="{"){var w=z.getSelectionRange(),v=y.doc.getTextRange(w);return v!==""?{text:"{"+v+"}",selection:!1}:{text:"{}",selection:[1,1]}}if(x=="}"){var u=z.getCursorPosition(),t=y.doc.getLine(u.row),s=t.substring(u.column,u.column+1);if(s=="}"){var r=y.$findOpeningBracket("}",{column:u.column+1,row:u.row});if(r!==null){return{text:"",selection:[1,1]}}}}else{if(x=="\n"){var u=z.getCursorPosition(),t=y.doc.getLine(u.row),s=t.substring(u.column,u.column+1);if(s=="}"){var q=y.findMatchingBracket({row:u.row,column:u.column+1});if(!q){return null}var p=this.getNextLineIndent(B,t.substring(0,t.length-1),y.getTabString()),o=this.$getIndent(y.doc.getLine(q.row));return{text:"\n"+p+"\n"+o,selection:[1,p.length,1,p.length]}}}}}),this.add("braces","deletion",function(o,n,u,t,s){var r=t.doc.getTextRange(s);if(!s.isMultiLine()&&r=="{"){var q=t.doc.getLine(s.start.row),p=q.substring(s.end.column,s.end.column+1);if(p=="}"){return s.end.column++,s}}}),this.add("parens","insertion",function(x,w,v,u,t){if(t=="("){var s=v.getSelectionRange(),r=u.doc.getTextRange(s);return r!==""?{text:"("+r+")",selection:!1}:{text:"()",selection:[1,1]}}if(t==")"){var q=v.getCursorPosition(),p=u.doc.getLine(q.row),o=p.substring(q.column,q.column+1);if(o==")"){var n=u.$findOpeningBracket(")",{column:q.column+1,row:q.row});if(n!==null){return{text:"",selection:[1,1]}}}}}),this.add("parens","deletion",function(o,n,u,t,s){var r=t.doc.getTextRange(s);if(!s.isMultiLine()&&r=="("){var q=t.doc.getLine(s.start.row),p=q.substring(s.start.column+1,s.start.column+2);if(p==")"){return s.end.column++,s}}}),this.add("string_dquotes","insertion",function(F,E,D,C,B){if(B=='"'){var A=D.getSelectionRange(),z=C.doc.getTextRange(A);if(z!==""){return{text:'"'+z+'"',selection:!1}}var y=D.getCursorPosition(),x=C.doc.getLine(y.row),w=x.substring(y.column-1,y.column);if(w=="\\"){return null}var v=C.getTokens(A.start.row,A.start.row)[0].tokens,u=0,t,s=-1;for(var r=0;r<v.length;r++){t=v[r],t.type=="string"?s=-1:s<0&&(s=t.value.indexOf('"'));if(t.value.length+u>A.start.column){break}u+=v[r].value.length}if(!t||s<0&&t.type!=="comment"&&(t.type!=="string"||A.start.column!==t.value.length+u-1&&t.value.lastIndexOf('"')===t.value.length-1)){return{text:'""',selection:[1,1]}}if(t&&t.type==="string"){var q=x.substring(y.column,y.column+1);if(q=='"'){return{text:"",selection:[1,1]}}}}}),this.add("string_dquotes","deletion",function(o,n,u,t,s){var r=t.doc.getTextRange(s);if(!s.isMultiLine()&&r=='"'){var q=t.doc.getLine(s.start.row),p=q.substring(s.start.column+1,s.start.column+2);if(p=='"'){return s.end.column++,s}}})};l.inherits(j,k),g.CstyleBehaviour=j}),ace.define("ace/mode/folding/xml",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/range","ace/mode/folding/fold_mode","ace/token_iterator"],function(r,q,p){var o=r("../../lib/oop"),n=r("../../lib/lang"),m=r("../../range").Range,l=r("./fold_mode").FoldMode,k=r("../../token_iterator").TokenIterator,j=q.FoldMode=function(b){l.call(this),this.voidElements=b||{}};o.inherits(j,l),function(){this.getFoldWidget=function(f,e,i){var g=this._getFirstTagInLine(f,i);return g.closing?e=="markbeginend"?"end":"":!g.tagName||this.voidElements[g.tagName.toLowerCase()]?"":g.selfClosing?"":g.value.indexOf("/"+g.tagName)!==-1?"":"start"},this._getFirstTagInLine=function(i,e){var v=i.getTokens(e,e)[0].tokens,u="";for(var t=0;t<v.length;t++){var s=v[t];s.type.indexOf("meta.tag")===0?u+=s.value:u+=n.stringRepeat(" ",s.value.length)}return this._parseTag(u)},this.tagRe=/^(\s*)(<?(\/?)([-_a-zA-Z0-9:!]*)\s*(\/?)>?)/,this._parseTag=function(e){var d=this.tagRe.exec(e),f=this.tagRe.lastIndex||0;return this.tagRe.lastIndex=0,{value:e,match:d?d[2]:"",closing:d?!!d[3]:!1,selfClosing:d?!!d[5]||d[2]=="/>":!1,tagName:d?d[4]:"",column:d[1]?f+d[1].length:f}},this._readTagForward=function(g){var f=g.getCurrentToken();if(!f){return null}var t="",s;do{if(f.type.indexOf("meta.tag")===0){if(!s){var s={row:g.getCurrentTokenRow(),column:g.getCurrentTokenColumn()}}t+=f.value;if(t.indexOf(">")!==-1){var i=this._parseTag(t);return i.start=s,i.end={row:g.getCurrentTokenRow(),column:g.getCurrentTokenColumn()+f.value.length},g.stepForward(),i}}}while(f=g.stepForward());return null},this._readTagBackward=function(g){var f=g.getCurrentToken();if(!f){return null}var t="",s;do{if(f.type.indexOf("meta.tag")===0){s||(s={row:g.getCurrentTokenRow(),column:g.getCurrentTokenColumn()+f.value.length}),t=f.value+t;if(t.indexOf("<")!==-1){var i=this._parseTag(t);return i.end=s,i.start={row:g.getCurrentTokenRow(),column:g.getCurrentTokenColumn()},g.stepBackward(),i}}}while(f=g.stepBackward());return null},this._pop=function(e,d){while(e.length){var f=e[e.length-1];if(!d||f.tagName==d.tagName){return e.pop()}if(this.voidElements[d.tagName]){return}if(this.voidElements[f.tagName]){e.pop();continue}return null}},this.getFoldWidgetRange=function(A,z,y){var x=this._getFirstTagInLine(A,y);if(!x.match){return null}var w=x.closing||x.selfClosing,v=[],u;if(!w){var t=new k(A,y,x.column),s={row:y,column:x.column+x.tagName.length+2};while(u=this._readTagForward(t)){if(u.selfClosing){if(!v.length){return u.start.column+=u.tagName.length+2,u.end.column-=2,m.fromPoints(u.start,u.end)}continue}if(u.closing){this._pop(v,u);if(v.length==0){return m.fromPoints(s,u.start)}}else{v.push(u)}}}else{var t=new k(A,y,x.column+x.match.length),f={row:y,column:x.column};while(u=this._readTagBackward(t)){if(u.selfClosing){if(!v.length){return u.start.column+=u.tagName.length+2,u.end.column-=2,m.fromPoints(u.start,u.end)}continue}if(!u.closing){this._pop(v,u);if(v.length==0){return u.start.column+=u.tagName.length+2,m.fromPoints(u.start,f)}}else{v.push(u)}}}}}.call(j.prototype)}),ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(g,f,k){var j=g("../../range").Range,i=f.FoldMode=function(){};((function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(l,e,n){var m=l.getLine(n);return this.foldingStartMarker.test(m)?"start":e=="markbeginend"&&this.foldingStopMarker&&this.foldingStopMarker.test(m)?"end":""},this.getFoldWidgetRange=function(e,d,l){return null},this.indentationBlock=function(x,w,v){var u=/^\s*/,t=w,s=w,r=x.getLine(w),q=v||r.length,p=r.match(u)[0].length,o=x.getLength();while(++w<o){r=x.getLine(w);var n=r.match(u)[0].length;if(n==r.length){continue}if(n<=p){break}s=w}if(s>t){var d=x.getLine(s).length;return new j(t,q,s,d)}},this.openingBracketBlock=function(l,d,q,p){var o={row:q,column:p+1},n=l.$findClosingBracket(d,o);if(!n){return}var m=l.foldWidgets[n.row];return m==null&&(m=this.getFoldWidget(l,n.row)),m=="start"&&(n.row--,n.column=l.getLine(n.row).length),j.fromPoints(o,n)}})).call(i.prototype)}),function(){ace.require(["ace/ace"],function(d){window.ace||(window.ace={});for(var c in d){d.hasOwnProperty(c)&&(ace[c]=d[c])}})}();ace.define("ace/mode/css",["require","exports","module","ace/lib/oop","ace/mode/text","ace/tokenizer","ace/mode/css_highlight_rules","ace/mode/matching_brace_outdent","ace/worker/worker_client","ace/mode/folding/cstyle"],function(v,u,t){var s=v("../lib/oop"),r=v("./text").Mode,q=v("../tokenizer").Tokenizer,p=v("./css_highlight_rules").CssHighlightRules,o=v("./matching_brace_outdent").MatchingBraceOutdent,n=v("../worker/worker_client").WorkerClient,m=v("./folding/cstyle").FoldMode,l=function(){this.$tokenizer=new q((new p).getRules(),"i"),this.$outdent=new o,this.foldingRules=new m};s.inherits(l,r),function(){this.foldingRules="cStyle",this.getNextLineIndent=function(i,g,x){var w=this.$getIndent(g),k=this.$tokenizer.getLineTokens(g,i).tokens;if(k.length&&k[k.length-1].type=="comment"){return w}var j=g.match(/^.*\{\s*$/);return j&&(w+=x),w},this.checkOutdent=function(e,d,f){return this.$outdent.checkOutdent(d,f)},this.autoOutdent=function(e,d,f){this.$outdent.autoOutdent(d,f)},this.createWorker=function(d){var c=new n(["ace"],"worker-css.js","ace/mode/css_worker","Worker");return c.attachToDocument(d.getDocument()),c.on("csslint",function(a){var e=[];a.data.forEach(function(b){e.push({row:b.line-1,column:b.col-1,text:b.message,type:b.type,lint:b})}),d.setAnnotations(e)}),c}}.call(l.prototype),u.Mode=l}),ace.define("ace/mode/css_highlight_rules",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/mode/text_highlight_rules"],function(j,i,o){var n=j("../lib/oop"),m=j("../lib/lang"),l=j("./text_highlight_rules").TextHighlightRules,k=function(){var z=m.arrayToMap("-moz-appearance|-moz-box-sizing|-webkit-box-sizing|-moz-outline-radius|-moz-transform|-webkit-transform|appearance|azimuth|background-attachment|background-color|background-image|background-origin|background-position|background-repeat|background|border-bottom-color|border-bottom-style|border-bottom-width|border-bottom|border-collapse|border-color|border-left-color|border-left-style|border-left-width|border-left|border-right-color|border-right-style|border-right-width|border-right|border-spacing|border-style|border-top-color|border-top-style|border-top-width|border-top|border-width|border|bottom|box-sizing|caption-side|clear|clip|color|content|counter-increment|counter-reset|cue-after|cue-before|cue|cursor|direction|display|elevation|empty-cells|float|font-family|font-size-adjust|font-size|font-stretch|font-style|font-variant|font-weight|font|height|left|letter-spacing|line-height|list-style-image|list-style-position|list-style-type|list-style|margin-bottom|margin-left|margin-right|margin-top|marker-offset|margin|marks|max-height|max-width|min-height|min-width|-moz-border-radius|opacity|orphans|outline-color|outline-offset|outline-radius|outline-style|outline-width|outline|overflow|overflow-x|overflow-y|padding-bottom|padding-left|padding-right|padding-top|padding|page-break-after|page-break-before|page-break-inside|page|pause-after|pause-before|pause|pitch-range|pitch|play-during|pointer-events|position|quotes|resize|richness|right|size|speak-header|speak-numeral|speak-punctuation|speech-rate|speak|stress|table-layout|text-align|text-decoration|text-indent|text-shadow|text-transform|top|transform|unicode-bidi|vertical-align|visibility|voice-family|volume|white-space|widows|width|word-spacing|z-index".split("|")),y=m.arrayToMap("rgb|rgba|url|attr|counter|counters".split("|")),x=m.arrayToMap("absolute|all-scroll|always|armenian|auto|baseline|below|bidi-override|block|bold|bolder|border-box|both|bottom|break-all|break-word|capitalize|center|char|circle|cjk-ideographic|col-resize|collapse|content-box|crosshair|dashed|decimal-leading-zero|decimal|default|disabled|disc|distribute-all-lines|distribute-letter|distribute-space|distribute|dotted|double|e-resize|ellipsis|fixed|georgian|groove|hand|hebrew|help|hidden|hiragana-iroha|hiragana|horizontal|ideograph-alpha|ideograph-numeric|ideograph-parenthesis|ideograph-space|inactive|inherit|inline-block|inline|inset|inside|inter-ideograph|inter-word|italic|justify|katakana-iroha|katakana|keep-all|left|lighter|line-edge|line-through|line|list-item|loose|lower-alpha|lower-greek|lower-latin|lower-roman|lowercase|lr-tb|ltr|medium|middle|move|n-resize|ne-resize|newspaper|no-drop|no-repeat|nw-resize|none|normal|not-allowed|nowrap|oblique|outset|outside|overline|pointer|progress|relative|repeat-x|repeat-y|repeat|right|ridge|row-resize|rtl|s-resize|scroll|se-resize|separate|small-caps|solid|square|static|strict|super|sw-resize|table-footer-group|table-header-group|tb-rl|text-bottom|text-top|text|thick|thin|top|transparent|underline|upper-alpha|upper-latin|upper-roman|uppercase|vertical-ideographic|vertical-text|visible|w-resize|wait|whitespace|zero".split("|")),w=m.arrayToMap("aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow".split("|")),v="\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))",u=[{token:"comment",merge:!0,regex:"\\/\\*",next:"ruleset_comment"},{token:"string",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]'},{token:"string",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"constant.numeric",regex:v+"(?:em|ex|px|cm|mm|in|pt|pc|deg|rad|grad|ms|s|hz|khz|%)"},{token:"constant.numeric",regex:"#[a-f0-9]{6}"},{token:"constant.numeric",regex:"#[a-f0-9]{3}"},{token:function(a){return z.hasOwnProperty(a.toLowerCase())?"support.type":y.hasOwnProperty(a.toLowerCase())?"support.function":x.hasOwnProperty(a.toLowerCase())?"support.constant":w.hasOwnProperty(a.toLowerCase())?"support.constant.color":"text"},regex:"\\-?[a-zA-Z_][a-zA-Z0-9_\\-]*"}],t=m.copyArray(u);t.unshift({token:"paren.rparen",regex:"\\}",next:"start"});var s=m.copyArray(u);s.unshift({token:"paren.rparen",regex:"\\}",next:"media"});var r=[{token:"comment",merge:!0,regex:".+"}],q=m.copyArray(r);q.unshift({token:"comment",regex:".*?\\*\\/",next:"start"});var p=m.copyArray(r);p.unshift({token:"comment",regex:".*?\\*\\/",next:"media"});var e=m.copyArray(r);e.unshift({token:"comment",regex:".*?\\*\\/",next:"ruleset"}),this.$rules={start:[{token:"comment",merge:!0,regex:"\\/\\*",next:"comment"},{token:"paren.lparen",regex:"\\{",next:"ruleset"},{token:"string",regex:"@.*?{",next:"media"},{token:"keyword",regex:"#[a-z0-9-_]+"},{token:"variable",regex:"\\.[a-z0-9-_]+"},{token:"string",regex:":[a-z0-9-_]+"},{token:"constant",regex:"[a-z0-9-_]+"}],media:[{token:"comment",merge:!0,regex:"\\/\\*",next:"media_comment"},{token:"paren.lparen",regex:"\\{",next:"media_ruleset"},{token:"string",regex:"\\}",next:"start"},{token:"keyword",regex:"#[a-z0-9-_]+"},{token:"variable",regex:"\\.[a-z0-9-_]+"},{token:"string",regex:":[a-z0-9-_]+"},{token:"constant",regex:"[a-z0-9-_]+"}],comment:q,ruleset:t,ruleset_comment:e,media_ruleset:s,media_comment:p}};n.inherits(k,l),i.CssHighlightRules=k}),ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(g,f,k){var j=g("../range").Range,i=function(){};((function(){this.checkOutdent=function(d,c){return/^\s+$/.test(d)?/^\s*\}/.test(c):!1},this.autoOutdent=function(l,d){var q=l.getLine(d),p=q.match(/^(\s*\})/);if(!p){return 0}var o=p[1].length,n=l.findMatchingBracket({row:d,column:o});if(!n||n.row==d){return 0}var m=this.$getIndent(l.getLine(n.row));l.replace(new j(d,0,d,o-1),m)},this.$getIndent=function(d){var c=d.match(/^(\s+)/);return c?c[1]:""}})).call(i.prototype),f.MatchingBraceOutdent=i}),ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(i,g,m){var l=i("../lib/oop"),k=i("../lib/event_emitter").EventEmitter,j=function(v,u,t,s){this.changeListener=this.changeListener.bind(this);if(m.packaged){var r=this.$guessBasePath();this.$worker=new Worker(r+u)}else{var q=this.$normalizePath(i.nameToUrl("ace/worker/worker",null,"_"));this.$worker=new Worker(q);var p={};for(var o=0;o<v.length;o++){var n=v[o],c=this.$normalizePath(i.nameToUrl(n,null,"_").replace(/.js$/,""));p[n]=c}}this.$worker.postMessage({init:!0,tlns:p,module:t,classname:s}),this.callbackId=1,this.callbacks={};var a=this;this.$worker.onerror=function(b){throw window.console&&console.log&&console.log(b),b},this.$worker.onmessage=function(e){var d=e.data;switch(d.type){case"log":window.console&&console.log&&console.log(d.data);break;case"event":a._emit(d.name,{data:d.data});break;case"call":var f=a.callbacks[d.id];f&&(f(d.data),delete a.callbacks[d.id])}}};((function(){l.implement(this,k),this.$normalizePath=function(b){return b=b.replace(/^[a-z]+:\/\/[^\/]+\//,""),b=location.protocol+"//"+location.host+(b.charAt(0)=="/"?"":location.pathname.replace(/\/[^\/]*$/,""))+"/"+b.replace(/^[\/]+/,""),b},this.$guessBasePath=function(){if(i.aceBaseUrl){return i.aceBaseUrl}var a=document.getElementsByTagName("script");for(var r=0;r<a.length;r++){var q=a[r],p=q.getAttribute("data-ace-base");if(p){return p.replace(/\/*$/,"/")}var o=q.src||q.getAttribute("src");if(!o){continue}var n=o.match(/^(?:(.*\/)ace\.js|(.*\/)ace(-uncompressed)?(-noconflict)?\.js)(?:\?|$)/);if(n){return n[1]||n[2]}}return""},this.terminate=function(){this._emit("terminate",{}),this.$worker.terminate(),this.$worker=null,this.$doc.removeEventListener("change",this.changeListener),this.$doc=null},this.send=function(d,c){this.$worker.postMessage({command:d,args:c})},this.call=function(f,e,o){if(o){var n=this.callbackId++;this.callbacks[n]=o,e.push(n)}this.send(f,e)},this.emit=function(e,d){try{this.$worker.postMessage({event:e,data:{data:d.data}})}catch(f){}},this.attachToDocument=function(b){this.$doc&&this.terminate(),this.$doc=b,this.call("setValue",[b.getValue()]),b.on("change",this.changeListener)},this.changeListener=function(b){b.range={start:b.data.range.start,end:b.data.range.end},this.emit("change",b)}})).call(j.prototype),g.WorkerClient=j}),ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],function(j,i,o){var n=j("../../lib/oop"),m=j("../../range").Range,l=j("./fold_mode").FoldMode,k=i.FoldMode=function(){};n.inherits(k,l),function(){this.foldingStartMarker=/(\{|\[)[^\}\]]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{]*(\}|\])|^[\s\*]*(\*\/)/,this.getFoldWidgetRange=function(w,v,u){var t=w.getLine(u),s=t.match(this.foldingStartMarker);if(s){var r=s.index;if(s[1]){return this.openingBracketBlock(w,s[1],u,r)}var q=w.getCommentFoldRange(u,r+s[0].length);return q.end.column-=2,q}if(v!=="markbeginend"){return}var s=t.match(this.foldingStopMarker);if(s){var r=s.index+s[0].length;if(s[2]){var q=w.getCommentFoldRange(u,r);return q.end.column-=2,q}var p={row:u,column:r},e=w.$findOpeningBracket(s[1],p);if(!e){return}return e.column++,p.column--,m.fromPoints(e,p)}}}.call(k.prototype)}),ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(g,f,k){var j=g("../../range").Range,i=f.FoldMode=function(){};((function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(l,e,n){var m=l.getLine(n);return this.foldingStartMarker.test(m)?"start":e=="markbeginend"&&this.foldingStopMarker&&this.foldingStopMarker.test(m)?"end":""},this.getFoldWidgetRange=function(e,d,l){return null},this.indentationBlock=function(x,w,v){var u=/^\s*/,t=w,s=w,r=x.getLine(w),q=v||r.length,p=r.match(u)[0].length,o=x.getLength();while(++w<o){r=x.getLine(w);var n=r.match(u)[0].length;if(n==r.length){continue}if(n<=p){break}s=w}if(s>t){var d=x.getLine(s).length;return new j(t,q,s,d)}},this.openingBracketBlock=function(l,d,q,p){var o={row:q,column:p+1},n=l.$findClosingBracket(d,o);if(!n){return}var m=l.foldWidgets[n.row];return m==null&&(m=this.getFoldWidget(l,n.row)),m=="start"&&(n.row--,n.column=l.getLine(n.row).length),j.fromPoints(o,n)}})).call(i.prototype)}),function(){ace.require(["ace/ace"],function(d){window.ace||(window.ace={});for(var c in d){d.hasOwnProperty(c)&&(ace[c]=d[c])}})}();ace.define("ace/mode/html",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/javascript","ace/mode/css","ace/tokenizer","ace/mode/html_highlight_rules","ace/mode/behaviour/xml","ace/mode/folding/html"],function(x,w,v){var u=x("../lib/oop"),t=x("./text").Mode,s=x("./javascript").Mode,r=x("./css").Mode,q=x("../tokenizer").Tokenizer,p=x("./html_highlight_rules").HtmlHighlightRules,o=x("./behaviour/xml").XmlBehaviour,n=x("./folding/html").FoldMode,m=function(){var b=new p;this.$tokenizer=new q(b.getRules()),this.$behaviour=new o,this.$embeds=b.getEmbeds(),this.createModeDelegates({"js-":s,"css-":r}),this.foldingRules=new n};u.inherits(m,t),function(){this.toggleCommentLines=function(f,e,i,g){return 0},this.getNextLineIndent=function(e,d,f){return this.$getIndent(d)},this.checkOutdent=function(e,d,f){return !1}}.call(m.prototype),w.Mode=m}),ace.define("ace/mode/javascript",["require","exports","module","ace/lib/oop","ace/mode/text","ace/tokenizer","ace/mode/javascript_highlight_rules","ace/mode/matching_brace_outdent","ace/range","ace/worker/worker_client","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle"],function(z,y,x){var w=z("../lib/oop"),v=z("./text").Mode,u=z("../tokenizer").Tokenizer,t=z("./javascript_highlight_rules").JavaScriptHighlightRules,s=z("./matching_brace_outdent").MatchingBraceOutdent,r=z("../range").Range,q=z("../worker/worker_client").WorkerClient,p=z("./behaviour/cstyle").CstyleBehaviour,o=z("./folding/cstyle").FoldMode,n=function(){this.$tokenizer=new u((new t).getRules()),this.$outdent=new s,this.$behaviour=new p,this.foldingRules=new o};w.inherits(n,v),function(){this.toggleCommentLines=function(G,F,E,D){var C=!0,B=/^(\s*)\/\//;for(var A=E;A<=D;A++){if(!B.test(F.getLine(A))){C=!1;break}}if(C){var m=new r(0,0,0,0);for(var A=E;A<=D;A++){var l=F.getLine(A),i=l.match(B);m.start.row=A,m.end.row=A,m.end.column=i[0].length,F.replace(m,i[1])}}else{F.indentRows(E,D,"//")}},this.getNextLineIndent=function(j,i,C){var B=this.$getIndent(i),A=this.$tokenizer.getLineTokens(i,j),m=A.tokens,l=A.state;if(m.length&&m[m.length-1].type=="comment"){return B}if(j=="start"||j=="regex_allowed"){var k=i.match(/^.*(?:\bcase\b.*\:|[\{\(\[])\s*$/);k&&(B+=C)}else{if(j=="doc-start"){if(l=="start"||j=="regex_allowed"){return""}var k=i.match(/^\s*(\/?)\*/);k&&(k[1]&&(B+=" "),B+="* ")}}return B},this.checkOutdent=function(e,d,f){return this.$outdent.checkOutdent(d,f)},this.autoOutdent=function(e,d,f){this.$outdent.autoOutdent(d,f)},this.createWorker=function(d){var c=new q(["ace"],"worker-javascript.js","ace/mode/javascript_worker","JavaScriptWorker");return c.attachToDocument(d.getDocument()),c.on("jslint",function(a){var i=[];for(var g=0;g<a.data.length;g++){var f=a.data[g];f&&i.push({row:f.line-1,column:f.character-1,text:f.reason,type:"warning",lint:f})}d.setAnnotations(i)}),c.on("narcissus",function(a){d.setAnnotations([a.data])}),c.on("terminate",function(){d.clearAnnotations()}),c}}.call(n.prototype),y.Mode=n}),ace.define("ace/mode/javascript_highlight_rules",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/unicode","ace/mode/doc_comment_highlight_rules","ace/mode/text_highlight_rules"],function(r,q,p){var o=r("../lib/oop"),n=r("../lib/lang"),m=r("../unicode"),l=r("./doc_comment_highlight_rules").DocCommentHighlightRules,k=r("./text_highlight_rules").TextHighlightRules,j=function(){var f=n.arrayToMap("Array|Boolean|Date|Function|Iterator|Number|Object|RegExp|String|Proxy|Namespace|QName|XML|XMLList|ArrayBuffer|Float32Array|Float64Array|Int16Array|Int32Array|Int8Array|Uint16Array|Uint32Array|Uint8Array|Uint8ClampedArray|Error|EvalError|InternalError|RangeError|ReferenceError|StopIteration|SyntaxError|TypeError|URIError|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|eval|isFinite|isNaN|parseFloat|parseInt|JSON|Math|this|arguments|prototype|window|document".split("|")),e=n.arrayToMap("break|case|catch|continue|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|let|var|while|with|const|yield|import|get|set".split("|")),w="case|do|else|finally|in|instanceof|return|throw|try|typeof|yield",v=n.arrayToMap("__parent__|__count__|escape|unescape|with|__proto__".split("|")),u=n.arrayToMap("const|let|var|function".split("|")),t=n.arrayToMap("null|Infinity|NaN|undefined".split("|")),s=n.arrayToMap("class|enum|extends|super|export|implements|private|public|interface|package|protected|static".split("|")),g="["+m.packages.L+"\\$_]["+m.packages.L+m.packages.Mn+m.packages.Mc+m.packages.Nd+m.packages.Pc+"\\$_]*\\b";this.$rules={start:[{token:"comment",regex:"\\/\\/.*$"},(new l).getStartRule("doc-start"),{token:"comment",merge:!0,regex:"\\/\\*",next:"comment"},{token:"string",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]'},{token:"string",merge:!0,regex:'["].*\\\\$',next:"qqstring"},{token:"string",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"string",merge:!0,regex:"['].*\\\\$",next:"qstring"},{token:"constant.numeric",regex:"0[xX][0-9a-fA-F]+\\b"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:["keyword.definition","text","entity.name.function"],regex:"(function)(\\s+)("+g+")"},{token:"constant.language.boolean",regex:"(?:true|false)\\b"},{token:"keyword",regex:"(?:"+w+")\\b",next:"regex_allowed"},{token:function(a){return f.hasOwnProperty(a)?"variable.language":v.hasOwnProperty(a)?"invalid.deprecated":u.hasOwnProperty(a)?"keyword.definition":e.hasOwnProperty(a)?"keyword":t.hasOwnProperty(a)?"constant.language":s.hasOwnProperty(a)?"invalid.illegal":a=="debugger"?"invalid.deprecated":"identifier"},regex:g},{token:"keyword.operator",regex:"!|\\$|%|&|\\*|\\-\\-|\\-|\\+\\+|\\+|~|===|==|=|!=|!==|<=|>=|<<=|>>=|>>>=|<>|<|>|!|&&|\\|\\||\\?\\:|\\*=|%=|\\+=|\\-=|&=|\\^=|\\b(?:in|instanceof|new|delete|typeof|void)",next:"regex_allowed"},{token:"punctuation.operator",regex:"\\?|\\:|\\,|\\;|\\.",next:"regex_allowed"},{token:"paren.lparen",regex:"[[({]",next:"regex_allowed"},{token:"paren.rparen",regex:"[\\])}]"},{token:"keyword.operator",regex:"\\/=?",next:"regex_allowed"},{token:"comment",regex:"^#!.*$"},{token:"text",regex:"\\s+"}],regex_allowed:[{token:"comment",merge:!0,regex:"\\/\\*",next:"comment_regex_allowed"},{token:"comment",regex:"\\/\\/.*$"},{token:"string.regexp",regex:"\\/",next:"regex",merge:!0},{token:"text",regex:"\\s+"},{token:"empty",regex:"",next:"start"}],regex:[{token:"regexp.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)",next:"regex"},{token:"string.regexp",regex:"/\\w*",next:"start",merge:!0},{token:"string.regexp",regex:"[^\\\\/\\[]+",next:"regex",merge:!0},{token:"string.regexp.charachterclass",regex:"\\[",next:"regex_character_class",merge:!0},{token:"empty",regex:"",next:"start"}],regex_character_class:[{token:"regexp.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)",next:"regex_character_class"},{token:"string.regexp.charachterclass",regex:"]",next:"regex",merge:!0},{token:"string.regexp.charachterclass",regex:"[^\\\\\\]]+",next:"regex_character_class",merge:!0},{token:"empty",regex:"",next:"start"}],comment_regex_allowed:[{token:"comment",regex:".*?\\*\\/",merge:!0,next:"regex_allowed"},{token:"comment",merge:!0,regex:".+"}],comment:[{token:"comment",regex:".*?\\*\\/",merge:!0,next:"start"},{token:"comment",merge:!0,regex:".+"}],qqstring:[{token:"string",regex:'(?:(?:\\\\.)|(?:[^"\\\\]))*?"',next:"start"},{token:"string",merge:!0,regex:".+"}],qstring:[{token:"string",regex:"(?:(?:\\\\.)|(?:[^'\\\\]))*?'",next:"start"},{token:"string",merge:!0,regex:".+"}]},this.embedRules(l,"doc-",[(new l).getEndRule("start")])};o.inherits(j,k),q.JavaScriptHighlightRules=j}),ace.define("ace/mode/doc_comment_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(i,g,m){var l=i("../lib/oop"),k=i("./text_highlight_rules").TextHighlightRules,j=function(){this.$rules={start:[{token:"comment.doc.tag",regex:"@[\\w\\d_]+"},{token:"comment.doc",merge:!0,regex:"\\s+"},{token:"comment.doc",merge:!0,regex:"TODO"},{token:"comment.doc",merge:!0,regex:"[^@\\*]+"},{token:"comment.doc",merge:!0,regex:"."}]}};l.inherits(j,k),function(){this.getStartRule=function(b){return{token:"comment.doc",merge:!0,regex:"\\/\\*(?=\\*)",next:b}},this.getEndRule=function(b){return{token:"comment.doc",merge:!0,regex:"\\*\\/",next:b}}}.call(j.prototype),g.DocCommentHighlightRules=j}),ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(g,f,k){var j=g("../range").Range,i=function(){};((function(){this.checkOutdent=function(d,c){return/^\s+$/.test(d)?/^\s*\}/.test(c):!1},this.autoOutdent=function(l,d){var q=l.getLine(d),p=q.match(/^(\s*\})/);if(!p){return 0}var o=p[1].length,n=l.findMatchingBracket({row:d,column:o});if(!n||n.row==d){return 0}var m=this.$getIndent(l.getLine(n.row));l.replace(new j(d,0,d,o-1),m)},this.$getIndent=function(d){var c=d.match(/^(\s+)/);return c?c[1]:""}})).call(i.prototype),f.MatchingBraceOutdent=i}),ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(i,g,m){var l=i("../lib/oop"),k=i("../lib/event_emitter").EventEmitter,j=function(v,u,t,s){this.changeListener=this.changeListener.bind(this);if(m.packaged){var r=this.$guessBasePath();this.$worker=new Worker(r+u)}else{var q=this.$normalizePath(i.nameToUrl("ace/worker/worker",null,"_"));this.$worker=new Worker(q);var p={};for(var o=0;o<v.length;o++){var n=v[o],c=this.$normalizePath(i.nameToUrl(n,null,"_").replace(/.js$/,""));p[n]=c}}this.$worker.postMessage({init:!0,tlns:p,module:t,classname:s}),this.callbackId=1,this.callbacks={};var a=this;this.$worker.onerror=function(b){throw window.console&&console.log&&console.log(b),b},this.$worker.onmessage=function(e){var d=e.data;switch(d.type){case"log":window.console&&console.log&&console.log(d.data);break;case"event":a._emit(d.name,{data:d.data});break;case"call":var f=a.callbacks[d.id];f&&(f(d.data),delete a.callbacks[d.id])}}};((function(){l.implement(this,k),this.$normalizePath=function(b){return b=b.replace(/^[a-z]+:\/\/[^\/]+\//,""),b=location.protocol+"//"+location.host+(b.charAt(0)=="/"?"":location.pathname.replace(/\/[^\/]*$/,""))+"/"+b.replace(/^[\/]+/,""),b},this.$guessBasePath=function(){if(i.aceBaseUrl){return i.aceBaseUrl}var a=document.getElementsByTagName("script");for(var r=0;r<a.length;r++){var q=a[r],p=q.getAttribute("data-ace-base");if(p){return p.replace(/\/*$/,"/")}var o=q.src||q.getAttribute("src");if(!o){continue}var n=o.match(/^(?:(.*\/)ace\.js|(.*\/)ace(-uncompressed)?(-noconflict)?\.js)(?:\?|$)/);if(n){return n[1]||n[2]}}return""},this.terminate=function(){this._emit("terminate",{}),this.$worker.terminate(),this.$worker=null,this.$doc.removeEventListener("change",this.changeListener),this.$doc=null},this.send=function(d,c){this.$worker.postMessage({command:d,args:c})},this.call=function(f,e,o){if(o){var n=this.callbackId++;this.callbacks[n]=o,e.push(n)}this.send(f,e)},this.emit=function(e,d){try{this.$worker.postMessage({event:e,data:{data:d.data}})}catch(f){}},this.attachToDocument=function(b){this.$doc&&this.terminate(),this.$doc=b,this.call("setValue",[b.getValue()]),b.on("change",this.changeListener)},this.changeListener=function(b){b.range={start:b.data.range.start,end:b.data.range.end},this.emit("change",b)}})).call(j.prototype),g.WorkerClient=j}),ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour"],function(i,g,m){var l=i("../../lib/oop"),k=i("../behaviour").Behaviour,j=function(){this.add("braces","insertion",function(B,A,z,y,x){if(x=="{"){var w=z.getSelectionRange(),v=y.doc.getTextRange(w);return v!==""?{text:"{"+v+"}",selection:!1}:{text:"{}",selection:[1,1]}}if(x=="}"){var u=z.getCursorPosition(),t=y.doc.getLine(u.row),s=t.substring(u.column,u.column+1);if(s=="}"){var r=y.$findOpeningBracket("}",{column:u.column+1,row:u.row});if(r!==null){return{text:"",selection:[1,1]}}}}else{if(x=="\n"){var u=z.getCursorPosition(),t=y.doc.getLine(u.row),s=t.substring(u.column,u.column+1);if(s=="}"){var q=y.findMatchingBracket({row:u.row,column:u.column+1});if(!q){return null}var p=this.getNextLineIndent(B,t.substring(0,t.length-1),y.getTabString()),o=this.$getIndent(y.doc.getLine(q.row));return{text:"\n"+p+"\n"+o,selection:[1,p.length,1,p.length]}}}}}),this.add("braces","deletion",function(o,n,u,t,s){var r=t.doc.getTextRange(s);if(!s.isMultiLine()&&r=="{"){var q=t.doc.getLine(s.start.row),p=q.substring(s.end.column,s.end.column+1);if(p=="}"){return s.end.column++,s}}}),this.add("parens","insertion",function(x,w,v,u,t){if(t=="("){var s=v.getSelectionRange(),r=u.doc.getTextRange(s);return r!==""?{text:"("+r+")",selection:!1}:{text:"()",selection:[1,1]}}if(t==")"){var q=v.getCursorPosition(),p=u.doc.getLine(q.row),o=p.substring(q.column,q.column+1);if(o==")"){var n=u.$findOpeningBracket(")",{column:q.column+1,row:q.row});if(n!==null){return{text:"",selection:[1,1]}}}}}),this.add("parens","deletion",function(o,n,u,t,s){var r=t.doc.getTextRange(s);if(!s.isMultiLine()&&r=="("){var q=t.doc.getLine(s.start.row),p=q.substring(s.start.column+1,s.start.column+2);if(p==")"){return s.end.column++,s}}}),this.add("string_dquotes","insertion",function(F,E,D,C,B){if(B=='"'){var A=D.getSelectionRange(),z=C.doc.getTextRange(A);if(z!==""){return{text:'"'+z+'"',selection:!1}}var y=D.getCursorPosition(),x=C.doc.getLine(y.row),w=x.substring(y.column-1,y.column);if(w=="\\"){return null}var v=C.getTokens(A.start.row,A.start.row)[0].tokens,u=0,t,s=-1;for(var r=0;r<v.length;r++){t=v[r],t.type=="string"?s=-1:s<0&&(s=t.value.indexOf('"'));if(t.value.length+u>A.start.column){break}u+=v[r].value.length}if(!t||s<0&&t.type!=="comment"&&(t.type!=="string"||A.start.column!==t.value.length+u-1&&t.value.lastIndexOf('"')===t.value.length-1)){return{text:'""',selection:[1,1]}}if(t&&t.type==="string"){var q=x.substring(y.column,y.column+1);if(q=='"'){return{text:"",selection:[1,1]}}}}}),this.add("string_dquotes","deletion",function(o,n,u,t,s){var r=t.doc.getTextRange(s);if(!s.isMultiLine()&&r=='"'){var q=t.doc.getLine(s.start.row),p=q.substring(s.start.column+1,s.start.column+2);if(p=='"'){return s.end.column++,s}}})};l.inherits(j,k),g.CstyleBehaviour=j}),ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],function(j,i,o){var n=j("../../lib/oop"),m=j("../../range").Range,l=j("./fold_mode").FoldMode,k=i.FoldMode=function(){};n.inherits(k,l),function(){this.foldingStartMarker=/(\{|\[)[^\}\]]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{]*(\}|\])|^[\s\*]*(\*\/)/,this.getFoldWidgetRange=function(w,v,u){var t=w.getLine(u),s=t.match(this.foldingStartMarker);if(s){var r=s.index;if(s[1]){return this.openingBracketBlock(w,s[1],u,r)}var q=w.getCommentFoldRange(u,r+s[0].length);return q.end.column-=2,q}if(v!=="markbeginend"){return}var s=t.match(this.foldingStopMarker);if(s){var r=s.index+s[0].length;if(s[2]){var q=w.getCommentFoldRange(u,r);return q.end.column-=2,q}var p={row:u,column:r},e=w.$findOpeningBracket(s[1],p);if(!e){return}return e.column++,p.column--,m.fromPoints(e,p)}}}.call(k.prototype)}),ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(g,f,k){var j=g("../../range").Range,i=f.FoldMode=function(){};((function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(l,e,n){var m=l.getLine(n);return this.foldingStartMarker.test(m)?"start":e=="markbeginend"&&this.foldingStopMarker&&this.foldingStopMarker.test(m)?"end":""},this.getFoldWidgetRange=function(e,d,l){return null},this.indentationBlock=function(x,w,v){var u=/^\s*/,t=w,s=w,r=x.getLine(w),q=v||r.length,p=r.match(u)[0].length,o=x.getLength();while(++w<o){r=x.getLine(w);var n=r.match(u)[0].length;if(n==r.length){continue}if(n<=p){break}s=w}if(s>t){var d=x.getLine(s).length;return new j(t,q,s,d)}},this.openingBracketBlock=function(l,d,q,p){var o={row:q,column:p+1},n=l.$findClosingBracket(d,o);if(!n){return}var m=l.foldWidgets[n.row];return m==null&&(m=this.getFoldWidget(l,n.row)),m=="start"&&(n.row--,n.column=l.getLine(n.row).length),j.fromPoints(o,n)}})).call(i.prototype)}),ace.define("ace/mode/css",["require","exports","module","ace/lib/oop","ace/mode/text","ace/tokenizer","ace/mode/css_highlight_rules","ace/mode/matching_brace_outdent","ace/worker/worker_client","ace/mode/folding/cstyle"],function(v,u,t){var s=v("../lib/oop"),r=v("./text").Mode,q=v("../tokenizer").Tokenizer,p=v("./css_highlight_rules").CssHighlightRules,o=v("./matching_brace_outdent").MatchingBraceOutdent,n=v("../worker/worker_client").WorkerClient,m=v("./folding/cstyle").FoldMode,l=function(){this.$tokenizer=new q((new p).getRules(),"i"),this.$outdent=new o,this.foldingRules=new m};s.inherits(l,r),function(){this.foldingRules="cStyle",this.getNextLineIndent=function(i,g,x){var w=this.$getIndent(g),k=this.$tokenizer.getLineTokens(g,i).tokens;if(k.length&&k[k.length-1].type=="comment"){return w}var j=g.match(/^.*\{\s*$/);return j&&(w+=x),w},this.checkOutdent=function(e,d,f){return this.$outdent.checkOutdent(d,f)},this.autoOutdent=function(e,d,f){this.$outdent.autoOutdent(d,f)},this.createWorker=function(d){var c=new n(["ace"],"worker-css.js","ace/mode/css_worker","Worker");return c.attachToDocument(d.getDocument()),c.on("csslint",function(a){var e=[];a.data.forEach(function(b){e.push({row:b.line-1,column:b.col-1,text:b.message,type:b.type,lint:b})}),d.setAnnotations(e)}),c}}.call(l.prototype),u.Mode=l}),ace.define("ace/mode/css_highlight_rules",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/mode/text_highlight_rules"],function(j,i,o){var n=j("../lib/oop"),m=j("../lib/lang"),l=j("./text_highlight_rules").TextHighlightRules,k=function(){var z=m.arrayToMap("-moz-appearance|-moz-box-sizing|-webkit-box-sizing|-moz-outline-radius|-moz-transform|-webkit-transform|appearance|azimuth|background-attachment|background-color|background-image|background-origin|background-position|background-repeat|background|border-bottom-color|border-bottom-style|border-bottom-width|border-bottom|border-collapse|border-color|border-left-color|border-left-style|border-left-width|border-left|border-right-color|border-right-style|border-right-width|border-right|border-spacing|border-style|border-top-color|border-top-style|border-top-width|border-top|border-width|border|bottom|box-sizing|caption-side|clear|clip|color|content|counter-increment|counter-reset|cue-after|cue-before|cue|cursor|direction|display|elevation|empty-cells|float|font-family|font-size-adjust|font-size|font-stretch|font-style|font-variant|font-weight|font|height|left|letter-spacing|line-height|list-style-image|list-style-position|list-style-type|list-style|margin-bottom|margin-left|margin-right|margin-top|marker-offset|margin|marks|max-height|max-width|min-height|min-width|-moz-border-radius|opacity|orphans|outline-color|outline-offset|outline-radius|outline-style|outline-width|outline|overflow|overflow-x|overflow-y|padding-bottom|padding-left|padding-right|padding-top|padding|page-break-after|page-break-before|page-break-inside|page|pause-after|pause-before|pause|pitch-range|pitch|play-during|pointer-events|position|quotes|resize|richness|right|size|speak-header|speak-numeral|speak-punctuation|speech-rate|speak|stress|table-layout|text-align|text-decoration|text-indent|text-shadow|text-transform|top|transform|unicode-bidi|vertical-align|visibility|voice-family|volume|white-space|widows|width|word-spacing|z-index".split("|")),y=m.arrayToMap("rgb|rgba|url|attr|counter|counters".split("|")),x=m.arrayToMap("absolute|all-scroll|always|armenian|auto|baseline|below|bidi-override|block|bold|bolder|border-box|both|bottom|break-all|break-word|capitalize|center|char|circle|cjk-ideographic|col-resize|collapse|content-box|crosshair|dashed|decimal-leading-zero|decimal|default|disabled|disc|distribute-all-lines|distribute-letter|distribute-space|distribute|dotted|double|e-resize|ellipsis|fixed|georgian|groove|hand|hebrew|help|hidden|hiragana-iroha|hiragana|horizontal|ideograph-alpha|ideograph-numeric|ideograph-parenthesis|ideograph-space|inactive|inherit|inline-block|inline|inset|inside|inter-ideograph|inter-word|italic|justify|katakana-iroha|katakana|keep-all|left|lighter|line-edge|line-through|line|list-item|loose|lower-alpha|lower-greek|lower-latin|lower-roman|lowercase|lr-tb|ltr|medium|middle|move|n-resize|ne-resize|newspaper|no-drop|no-repeat|nw-resize|none|normal|not-allowed|nowrap|oblique|outset|outside|overline|pointer|progress|relative|repeat-x|repeat-y|repeat|right|ridge|row-resize|rtl|s-resize|scroll|se-resize|separate|small-caps|solid|square|static|strict|super|sw-resize|table-footer-group|table-header-group|tb-rl|text-bottom|text-top|text|thick|thin|top|transparent|underline|upper-alpha|upper-latin|upper-roman|uppercase|vertical-ideographic|vertical-text|visible|w-resize|wait|whitespace|zero".split("|")),w=m.arrayToMap("aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow".split("|")),v="\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))",u=[{token:"comment",merge:!0,regex:"\\/\\*",next:"ruleset_comment"},{token:"string",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]'},{token:"string",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"constant.numeric",regex:v+"(?:em|ex|px|cm|mm|in|pt|pc|deg|rad|grad|ms|s|hz|khz|%)"},{token:"constant.numeric",regex:"#[a-f0-9]{6}"},{token:"constant.numeric",regex:"#[a-f0-9]{3}"},{token:function(a){return z.hasOwnProperty(a.toLowerCase())?"support.type":y.hasOwnProperty(a.toLowerCase())?"support.function":x.hasOwnProperty(a.toLowerCase())?"support.constant":w.hasOwnProperty(a.toLowerCase())?"support.constant.color":"text"},regex:"\\-?[a-zA-Z_][a-zA-Z0-9_\\-]*"}],t=m.copyArray(u);t.unshift({token:"paren.rparen",regex:"\\}",next:"start"});var s=m.copyArray(u);s.unshift({token:"paren.rparen",regex:"\\}",next:"media"});var r=[{token:"comment",merge:!0,regex:".+"}],q=m.copyArray(r);q.unshift({token:"comment",regex:".*?\\*\\/",next:"start"});var p=m.copyArray(r);p.unshift({token:"comment",regex:".*?\\*\\/",next:"media"});var e=m.copyArray(r);e.unshift({token:"comment",regex:".*?\\*\\/",next:"ruleset"}),this.$rules={start:[{token:"comment",merge:!0,regex:"\\/\\*",next:"comment"},{token:"paren.lparen",regex:"\\{",next:"ruleset"},{token:"string",regex:"@.*?{",next:"media"},{token:"keyword",regex:"#[a-z0-9-_]+"},{token:"variable",regex:"\\.[a-z0-9-_]+"},{token:"string",regex:":[a-z0-9-_]+"},{token:"constant",regex:"[a-z0-9-_]+"}],media:[{token:"comment",merge:!0,regex:"\\/\\*",next:"media_comment"},{token:"paren.lparen",regex:"\\{",next:"media_ruleset"},{token:"string",regex:"\\}",next:"start"},{token:"keyword",regex:"#[a-z0-9-_]+"},{token:"variable",regex:"\\.[a-z0-9-_]+"},{token:"string",regex:":[a-z0-9-_]+"},{token:"constant",regex:"[a-z0-9-_]+"}],comment:q,ruleset:t,ruleset_comment:e,media_ruleset:s,media_comment:p}};n.inherits(k,l),i.CssHighlightRules=k}),ace.define("ace/mode/html_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/css_highlight_rules","ace/mode/javascript_highlight_rules","ace/mode/xml_util","ace/mode/text_highlight_rules"],function(r,q,p){var o=r("../lib/oop"),n=r("./css_highlight_rules").CssHighlightRules,m=r("./javascript_highlight_rules").JavaScriptHighlightRules,l=r("./xml_util"),k=r("./text_highlight_rules").TextHighlightRules,j=function(){this.$rules={start:[{token:"text",merge:!0,regex:"<\\!\\[CDATA\\[",next:"cdata"},{token:"xml_pe",regex:"<\\?.*?\\?>"},{token:"comment",merge:!0,regex:"<\\!--",next:"comment"},{token:"meta.tag",regex:"<(?=s*script\\b)",next:"script"},{token:"meta.tag",regex:"<(?=s*style\\b)",next:"css"},{token:"meta.tag",regex:"<\\/?",next:"tag"},{token:"text",regex:"\\s+"},{token:"text",regex:"[^<]+"}],cdata:[{token:"text",regex:"\\]\\]>",next:"start"},{token:"text",merge:!0,regex:"\\s+"},{token:"text",merge:!0,regex:".+"}],comment:[{token:"comment",regex:".*?-->",next:"start"},{token:"comment",merge:!0,regex:".+"}]},l.tag(this.$rules,"tag","start"),l.tag(this.$rules,"css","css-start"),l.tag(this.$rules,"script","js-start"),this.embedRules(m,"js-",[{token:"comment",regex:"\\/\\/.*(?=<\\/script>)",next:"tag"},{token:"meta.tag",regex:"<\\/(?=script)",next:"tag"}]),this.embedRules(n,"css-",[{token:"meta.tag",regex:"<\\/(?=style)",next:"tag"}])};o.inherits(j,k),q.HtmlHighlightRules=j}),ace.define("ace/mode/xml_util",["require","exports","module","ace/lib/lang"],function(j,i,p){function l(b){return[{token:"string",regex:'".*?"'},{token:"string",merge:!0,regex:'["].*',next:b+"-qqstring"},{token:"string",regex:"'.*?'"},{token:"string",merge:!0,regex:"['].*",next:b+"-qstring"}]}function k(d,c){return[{token:"string",merge:!0,regex:".*?"+d,next:c},{token:"string",merge:!0,regex:".+"}]}"use strict";var o=j("../lib/lang"),n=o.arrayToMap("button|form|input|label|select|textarea".split("|")),m=o.arrayToMap("table|tbody|td|tfoot|th|tr".split("|"));i.tag=function(e,d,f){e[d]=[{token:"text",regex:"\\s+"},{token:function(b){return b==="a"?"meta.tag.anchor":b==="img"?"meta.tag.image":b==="script"?"meta.tag.script":b==="style"?"meta.tag.style":n.hasOwnProperty(b.toLowerCase())?"meta.tag.form":m.hasOwnProperty(b.toLowerCase())?"meta.tag.table":"meta.tag"},merge:!0,regex:"[-_a-zA-Z0-9:!]+",next:d+"embed-attribute-list"},{token:"empty",regex:"",next:d+"embed-attribute-list"}],e[d+"-qstring"]=k("'",d+"embed-attribute-list"),e[d+"-qqstring"]=k('"',d+"embed-attribute-list"),e[d+"embed-attribute-list"]=[{token:"meta.tag",merge:!0,regex:"/?>",next:f},{token:"keyword.operator",regex:"="},{token:"entity.other.attribute-name",regex:"[-_a-zA-Z0-9:]+"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"text",regex:"\\s+"}].concat(l(d))}}),ace.define("ace/mode/behaviour/xml",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/mode/behaviour/cstyle"],function(j,i,o){var n=j("../../lib/oop"),m=j("../behaviour").Behaviour,l=j("./cstyle").CstyleBehaviour,k=function(){this.inherit(l,["string_dquotes"]),this.add("brackets","insertion",function(B,A,z,y,x){if(x=="<"){var w=z.getSelectionRange(),v=y.doc.getTextRange(w);return v!==""?!1:{text:"<>",selection:[1,1]}}if(x==">"){var u=z.getCursorPosition(),t=y.doc.getLine(u.row),s=t.substring(u.column,u.column+1);if(s==">"){return{text:"",selection:[1,1]}}}else{if(x=="\n"){var u=z.getCursorPosition(),t=y.doc.getLine(u.row),r=t.substring(u.column,u.column+2);if(r=="</"){var q=this.$getIndent(y.doc.getLine(u.row))+y.getTabString(),p=this.$getIndent(y.doc.getLine(u.row));return{text:"\n"+q+"\n"+p,selection:[1,q.length,1,q.length]}}}}})};n.inherits(k,m),i.XmlBehaviour=k}),ace.define("ace/mode/folding/html",["require","exports","module","ace/lib/oop","ace/mode/folding/mixed","ace/mode/folding/xml","ace/mode/folding/cstyle"],function(j,i,p){var o=j("../../lib/oop"),n=j("./mixed").FoldMode,m=j("./xml").FoldMode,l=j("./cstyle").FoldMode,k=i.FoldMode=function(){n.call(this,new m({area:1,base:1,br:1,col:1,command:1,embed:1,hr:1,img:1,input:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1,li:1,dt:1,dd:1,p:1,rt:1,rp:1,optgroup:1,option:1,colgroup:1,td:1,th:1}),{"js-":new l,"css-":new l})};o.inherits(k,n)}),ace.define("ace/mode/folding/mixed",["require","exports","module","ace/lib/oop","ace/mode/folding/fold_mode"],function(i,g,m){var l=i("../../lib/oop"),k=i("./fold_mode").FoldMode,j=g.FoldMode=function(d,c){this.defaultMode=d,this.subModes=c};l.inherits(j,k),function(){this.$getMode=function(d){for(var c in this.subModes){if(d.indexOf(c)===0){return this.subModes[c]}}return null},this.$tryMode=function(n,f,q,p){var o=this.$getMode(n);return o?o.getFoldWidget(f,q,p):""},this.getFoldWidget=function(e,d,f){return this.$tryMode(e.getState(f-1),e,d,f)||this.$tryMode(e.getState(f),e,d,f)||this.defaultMode.getFoldWidget(e,d,f)},this.getFoldWidgetRange=function(f,e,o){var n=this.$getMode(f.getState(o-1));if(!n||!n.getFoldWidget(f,e,o)){n=this.$getMode(f.getState(o))}if(!n||!n.getFoldWidget(f,e,o)){n=this.defaultMode}return n.getFoldWidgetRange(f,e,o)}}.call(j.prototype)}),ace.define("ace/mode/folding/xml",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/range","ace/mode/folding/fold_mode","ace/token_iterator"],function(r,q,p){var o=r("../../lib/oop"),n=r("../../lib/lang"),m=r("../../range").Range,l=r("./fold_mode").FoldMode,k=r("../../token_iterator").TokenIterator,j=q.FoldMode=function(b){l.call(this),this.voidElements=b||{}};o.inherits(j,l),function(){this.getFoldWidget=function(f,e,i){var g=this._getFirstTagInLine(f,i);return g.closing?e=="markbeginend"?"end":"":!g.tagName||this.voidElements[g.tagName.toLowerCase()]?"":g.selfClosing?"":g.value.indexOf("/"+g.tagName)!==-1?"":"start"},this._getFirstTagInLine=function(i,e){var v=i.getTokens(e,e)[0].tokens,u="";for(var t=0;t<v.length;t++){var s=v[t];s.type.indexOf("meta.tag")===0?u+=s.value:u+=n.stringRepeat(" ",s.value.length)}return this._parseTag(u)},this.tagRe=/^(\s*)(<?(\/?)([-_a-zA-Z0-9:!]*)\s*(\/?)>?)/,this._parseTag=function(e){var d=this.tagRe.exec(e),f=this.tagRe.lastIndex||0;return this.tagRe.lastIndex=0,{value:e,match:d?d[2]:"",closing:d?!!d[3]:!1,selfClosing:d?!!d[5]||d[2]=="/>":!1,tagName:d?d[4]:"",column:d[1]?f+d[1].length:f}},this._readTagForward=function(g){var f=g.getCurrentToken();if(!f){return null}var t="",s;do{if(f.type.indexOf("meta.tag")===0){if(!s){var s={row:g.getCurrentTokenRow(),column:g.getCurrentTokenColumn()}}t+=f.value;if(t.indexOf(">")!==-1){var i=this._parseTag(t);return i.start=s,i.end={row:g.getCurrentTokenRow(),column:g.getCurrentTokenColumn()+f.value.length},g.stepForward(),i}}}while(f=g.stepForward());return null},this._readTagBackward=function(g){var f=g.getCurrentToken();if(!f){return null}var t="",s;do{if(f.type.indexOf("meta.tag")===0){s||(s={row:g.getCurrentTokenRow(),column:g.getCurrentTokenColumn()+f.value.length}),t=f.value+t;if(t.indexOf("<")!==-1){var i=this._parseTag(t);return i.end=s,i.start={row:g.getCurrentTokenRow(),column:g.getCurrentTokenColumn()},g.stepBackward(),i}}}while(f=g.stepBackward());return null},this._pop=function(e,d){while(e.length){var f=e[e.length-1];if(!d||f.tagName==d.tagName){return e.pop()}if(this.voidElements[d.tagName]){return}if(this.voidElements[f.tagName]){e.pop();continue}return null}},this.getFoldWidgetRange=function(A,z,y){var x=this._getFirstTagInLine(A,y);if(!x.match){return null}var w=x.closing||x.selfClosing,v=[],u;if(!w){var t=new k(A,y,x.column),s={row:y,column:x.column+x.tagName.length+2};while(u=this._readTagForward(t)){if(u.selfClosing){if(!v.length){return u.start.column+=u.tagName.length+2,u.end.column-=2,m.fromPoints(u.start,u.end)}continue}if(u.closing){this._pop(v,u);if(v.length==0){return m.fromPoints(s,u.start)}}else{v.push(u)}}}else{var t=new k(A,y,x.column+x.match.length),f={row:y,column:x.column};while(u=this._readTagBackward(t)){if(u.selfClosing){if(!v.length){return u.start.column+=u.tagName.length+2,u.end.column-=2,m.fromPoints(u.start,u.end)}continue}if(!u.closing){this._pop(v,u);if(v.length==0){return u.start.column+=u.tagName.length+2,m.fromPoints(u.start,f)}}else{v.push(u)}}}}}.call(j.prototype)}),function(){ace.require(["ace/ace"],function(d){window.ace||(window.ace={});for(var c in d){d.hasOwnProperty(c)&&(ace[c]=d[c])}})}();ace.define("ace/mode/json",["require","exports","module","ace/lib/oop","ace/mode/text","ace/tokenizer","ace/mode/json_highlight_rules","ace/mode/matching_brace_outdent","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle"],function(v,u,t){var s=v("../lib/oop"),r=v("./text").Mode,q=v("../tokenizer").Tokenizer,p=v("./json_highlight_rules").JsonHighlightRules,o=v("./matching_brace_outdent").MatchingBraceOutdent,n=v("./behaviour/cstyle").CstyleBehaviour,m=v("./folding/cstyle").FoldMode,l=function(){this.$tokenizer=new q((new p).getRules()),this.$outdent=new o,this.$behaviour=new n,this.foldingRules=new m};s.inherits(l,r),function(){this.getNextLineIndent=function(g,f,k){var j=this.$getIndent(f);if(g=="start"){var i=f.match(/^.*[\{\(\[]\s*$/);i&&(j+=k)}return j},this.checkOutdent=function(e,d,f){return this.$outdent.checkOutdent(d,f)},this.autoOutdent=function(e,d,f){this.$outdent.autoOutdent(d,f)}}.call(l.prototype),u.Mode=l}),ace.define("ace/mode/json_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(i,g,m){var l=i("../lib/oop"),k=i("./text_highlight_rules").TextHighlightRules,j=function(){this.$rules={start:[{token:"string",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]'},{token:"constant.numeric",regex:"0[xX][0-9a-fA-F]+\\b"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"constant.language.boolean",regex:"(?:true|false)\\b"},{token:"invalid.illegal",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"invalid.illegal",regex:"\\/\\/.*$"},{token:"paren.lparen",regex:"[[({]"},{token:"paren.rparen",regex:"[\\])}]"},{token:"text",regex:"\\s+"}]}};l.inherits(j,k),g.JsonHighlightRules=j}),ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(g,f,k){var j=g("../range").Range,i=function(){};((function(){this.checkOutdent=function(d,c){return/^\s+$/.test(d)?/^\s*\}/.test(c):!1},this.autoOutdent=function(l,d){var q=l.getLine(d),p=q.match(/^(\s*\})/);if(!p){return 0}var o=p[1].length,n=l.findMatchingBracket({row:d,column:o});if(!n||n.row==d){return 0}var m=this.$getIndent(l.getLine(n.row));l.replace(new j(d,0,d,o-1),m)},this.$getIndent=function(d){var c=d.match(/^(\s+)/);return c?c[1]:""}})).call(i.prototype),f.MatchingBraceOutdent=i}),ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour"],function(i,g,m){var l=i("../../lib/oop"),k=i("../behaviour").Behaviour,j=function(){this.add("braces","insertion",function(B,A,z,y,x){if(x=="{"){var w=z.getSelectionRange(),v=y.doc.getTextRange(w);return v!==""?{text:"{"+v+"}",selection:!1}:{text:"{}",selection:[1,1]}}if(x=="}"){var u=z.getCursorPosition(),t=y.doc.getLine(u.row),s=t.substring(u.column,u.column+1);if(s=="}"){var r=y.$findOpeningBracket("}",{column:u.column+1,row:u.row});if(r!==null){return{text:"",selection:[1,1]}}}}else{if(x=="\n"){var u=z.getCursorPosition(),t=y.doc.getLine(u.row),s=t.substring(u.column,u.column+1);if(s=="}"){var q=y.findMatchingBracket({row:u.row,column:u.column+1});if(!q){return null}var p=this.getNextLineIndent(B,t.substring(0,t.length-1),y.getTabString()),o=this.$getIndent(y.doc.getLine(q.row));return{text:"\n"+p+"\n"+o,selection:[1,p.length,1,p.length]}}}}}),this.add("braces","deletion",function(o,n,u,t,s){var r=t.doc.getTextRange(s);if(!s.isMultiLine()&&r=="{"){var q=t.doc.getLine(s.start.row),p=q.substring(s.end.column,s.end.column+1);if(p=="}"){return s.end.column++,s}}}),this.add("parens","insertion",function(x,w,v,u,t){if(t=="("){var s=v.getSelectionRange(),r=u.doc.getTextRange(s);return r!==""?{text:"("+r+")",selection:!1}:{text:"()",selection:[1,1]}}if(t==")"){var q=v.getCursorPosition(),p=u.doc.getLine(q.row),o=p.substring(q.column,q.column+1);if(o==")"){var n=u.$findOpeningBracket(")",{column:q.column+1,row:q.row});if(n!==null){return{text:"",selection:[1,1]}}}}}),this.add("parens","deletion",function(o,n,u,t,s){var r=t.doc.getTextRange(s);if(!s.isMultiLine()&&r=="("){var q=t.doc.getLine(s.start.row),p=q.substring(s.start.column+1,s.start.column+2);if(p==")"){return s.end.column++,s}}}),this.add("string_dquotes","insertion",function(F,E,D,C,B){if(B=='"'){var A=D.getSelectionRange(),z=C.doc.getTextRange(A);if(z!==""){return{text:'"'+z+'"',selection:!1}}var y=D.getCursorPosition(),x=C.doc.getLine(y.row),w=x.substring(y.column-1,y.column);if(w=="\\"){return null}var v=C.getTokens(A.start.row,A.start.row)[0].tokens,u=0,t,s=-1;for(var r=0;r<v.length;r++){t=v[r],t.type=="string"?s=-1:s<0&&(s=t.value.indexOf('"'));if(t.value.length+u>A.start.column){break}u+=v[r].value.length}if(!t||s<0&&t.type!=="comment"&&(t.type!=="string"||A.start.column!==t.value.length+u-1&&t.value.lastIndexOf('"')===t.value.length-1)){return{text:'""',selection:[1,1]}}if(t&&t.type==="string"){var q=x.substring(y.column,y.column+1);if(q=='"'){return{text:"",selection:[1,1]}}}}}),this.add("string_dquotes","deletion",function(o,n,u,t,s){var r=t.doc.getTextRange(s);if(!s.isMultiLine()&&r=='"'){var q=t.doc.getLine(s.start.row),p=q.substring(s.start.column+1,s.start.column+2);if(p=='"'){return s.end.column++,s}}})};l.inherits(j,k),g.CstyleBehaviour=j}),ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],function(j,i,o){var n=j("../../lib/oop"),m=j("../../range").Range,l=j("./fold_mode").FoldMode,k=i.FoldMode=function(){};n.inherits(k,l),function(){this.foldingStartMarker=/(\{|\[)[^\}\]]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{]*(\}|\])|^[\s\*]*(\*\/)/,this.getFoldWidgetRange=function(w,v,u){var t=w.getLine(u),s=t.match(this.foldingStartMarker);if(s){var r=s.index;if(s[1]){return this.openingBracketBlock(w,s[1],u,r)}var q=w.getCommentFoldRange(u,r+s[0].length);return q.end.column-=2,q}if(v!=="markbeginend"){return}var s=t.match(this.foldingStopMarker);if(s){var r=s.index+s[0].length;if(s[2]){var q=w.getCommentFoldRange(u,r);return q.end.column-=2,q}var p={row:u,column:r},e=w.$findOpeningBracket(s[1],p);if(!e){return}return e.column++,p.column--,m.fromPoints(e,p)}}}.call(k.prototype)}),ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(g,f,k){var j=g("../../range").Range,i=f.FoldMode=function(){};((function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(l,e,n){var m=l.getLine(n);return this.foldingStartMarker.test(m)?"start":e=="markbeginend"&&this.foldingStopMarker&&this.foldingStopMarker.test(m)?"end":""},this.getFoldWidgetRange=function(e,d,l){return null},this.indentationBlock=function(x,w,v){var u=/^\s*/,t=w,s=w,r=x.getLine(w),q=v||r.length,p=r.match(u)[0].length,o=x.getLength();while(++w<o){r=x.getLine(w);var n=r.match(u)[0].length;if(n==r.length){continue}if(n<=p){break}s=w}if(s>t){var d=x.getLine(s).length;return new j(t,q,s,d)}},this.openingBracketBlock=function(l,d,q,p){var o={row:q,column:p+1},n=l.$findClosingBracket(d,o);if(!n){return}var m=l.foldWidgets[n.row];return m==null&&(m=this.getFoldWidget(l,n.row)),m=="start"&&(n.row--,n.column=l.getLine(n.row).length),j.fromPoints(o,n)}})).call(i.prototype)}),function(){ace.require(["ace/ace"],function(d){window.ace||(window.ace={});for(var c in d){d.hasOwnProperty(c)&&(ace[c]=d[c])}})}();ace.define("ace/mode/sql",["require","exports","module","ace/lib/oop","ace/mode/text","ace/tokenizer","ace/mode/sql_highlight_rules","ace/range"],function(r,q,p){var o=r("../lib/oop"),n=r("./text").Mode,m=r("../tokenizer").Tokenizer,l=r("./sql_highlight_rules").SqlHighlightRules,k=r("../range").Range,j=function(){this.$tokenizer=new m((new l).getRules())};o.inherits(j,n),function(){this.toggleCommentLines=function(C,B,A,z){var y=!0,x=[],w=/^(\s*)--/;for(var v=A;v<=z;v++){if(!w.test(B.getLine(v))){y=!1;break}}if(y){var u=new k(0,0,0,0);for(var v=A;v<=z;v++){var t=B.getLine(v),s=t.match(w);u.start.row=v,u.end.row=v,u.end.column=s[0].length,B.replace(u,s[1])}}else{B.indentRows(A,z,"--")}}}.call(j.prototype),q.Mode=j}),ace.define("ace/mode/sql_highlight_rules",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/mode/text_highlight_rules"],function(j,i,o){var n=j("../lib/oop"),m=j("../lib/lang"),l=j("./text_highlight_rules").TextHighlightRules,k=function(){var e=m.arrayToMap("select|from|where|and|or|group|by|order|limit|offset|having|as|case|when|else|end|type|left|right|join|on|outer|desc|asc".split("|")),d=m.arrayToMap("true|false|null".split("|")),f=m.arrayToMap("count|min|max|avg|sum|rank|now|coalesce".split("|"));this.$rules={start:[{token:"comment",regex:"--.*$"},{token:"string",regex:'".*"'},{token:"string",regex:"'.*'"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:function(a){return a=a.toLowerCase(),e.hasOwnProperty(a)?"keyword":d.hasOwnProperty(a)?"constant.language":f.hasOwnProperty(a)?"support.function":"identifier"},regex:"[a-zA-Z_$][a-zA-Z0-9_$]*\\b"},{token:"keyword.operator",regex:"\\+|\\-|\\/|\\/\\/|%|<@>|@>|<@|&|\\^|~|<|>|<=|=>|==|!=|<>|="},{token:"lparen.paren",regex:"[\\(]"},{token:"paren.rparen",regex:"[\\)]"},{token:"text",regex:"\\s+"}]}};n.inherits(k,l),i.SqlHighlightRules=k}),function(){ace.require(["ace/ace"],function(d){window.ace||(window.ace={});for(var c in d){d.hasOwnProperty(c)&&(ace[c]=d[c])}})}();ace.define("ace/mode/markdown",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/javascript","ace/mode/xml","ace/mode/html","ace/tokenizer","ace/mode/markdown_highlight_rules"],function(v,u,t){var s=v("../lib/oop"),r=v("./text").Mode,q=v("./javascript").Mode,p=v("./xml").Mode,o=v("./html").Mode,n=v("../tokenizer").Tokenizer,m=v("./markdown_highlight_rules").MarkdownHighlightRules,l=function(){var b=new m;this.$tokenizer=new n(b.getRules()),this.$embeds=b.getEmbeds(),this.createModeDelegates({"js-":q,"xml-":p,"html-":o})};s.inherits(l,r),function(){this.getNextLineIndent=function(f,e,i){if(f=="listblock"){var g=/^((?:.+)?)([-+*][ ]+)/.exec(e);return g?(new Array(g[1].length+1)).join(" ")+g[2]:""}return this.$getIndent(e)}}.call(l.prototype),u.Mode=l}),ace.define("ace/mode/javascript",["require","exports","module","ace/lib/oop","ace/mode/text","ace/tokenizer","ace/mode/javascript_highlight_rules","ace/mode/matching_brace_outdent","ace/range","ace/worker/worker_client","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle"],function(z,y,x){var w=z("../lib/oop"),v=z("./text").Mode,u=z("../tokenizer").Tokenizer,t=z("./javascript_highlight_rules").JavaScriptHighlightRules,s=z("./matching_brace_outdent").MatchingBraceOutdent,r=z("../range").Range,q=z("../worker/worker_client").WorkerClient,p=z("./behaviour/cstyle").CstyleBehaviour,o=z("./folding/cstyle").FoldMode,n=function(){this.$tokenizer=new u((new t).getRules()),this.$outdent=new s,this.$behaviour=new p,this.foldingRules=new o};w.inherits(n,v),function(){this.toggleCommentLines=function(G,F,E,D){var C=!0,B=/^(\s*)\/\//;for(var A=E;A<=D;A++){if(!B.test(F.getLine(A))){C=!1;break}}if(C){var m=new r(0,0,0,0);for(var A=E;A<=D;A++){var l=F.getLine(A),i=l.match(B);m.start.row=A,m.end.row=A,m.end.column=i[0].length,F.replace(m,i[1])}}else{F.indentRows(E,D,"//")}},this.getNextLineIndent=function(j,i,C){var B=this.$getIndent(i),A=this.$tokenizer.getLineTokens(i,j),m=A.tokens,l=A.state;if(m.length&&m[m.length-1].type=="comment"){return B}if(j=="start"||j=="regex_allowed"){var k=i.match(/^.*(?:\bcase\b.*\:|[\{\(\[])\s*$/);k&&(B+=C)}else{if(j=="doc-start"){if(l=="start"||j=="regex_allowed"){return""}var k=i.match(/^\s*(\/?)\*/);k&&(k[1]&&(B+=" "),B+="* ")}}return B},this.checkOutdent=function(e,d,f){return this.$outdent.checkOutdent(d,f)},this.autoOutdent=function(e,d,f){this.$outdent.autoOutdent(d,f)},this.createWorker=function(d){var c=new q(["ace"],"worker-javascript.js","ace/mode/javascript_worker","JavaScriptWorker");return c.attachToDocument(d.getDocument()),c.on("jslint",function(a){var i=[];for(var g=0;g<a.data.length;g++){var f=a.data[g];f&&i.push({row:f.line-1,column:f.character-1,text:f.reason,type:"warning",lint:f})}d.setAnnotations(i)}),c.on("narcissus",function(a){d.setAnnotations([a.data])}),c.on("terminate",function(){d.clearAnnotations()}),c}}.call(n.prototype),y.Mode=n}),ace.define("ace/mode/javascript_highlight_rules",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/unicode","ace/mode/doc_comment_highlight_rules","ace/mode/text_highlight_rules"],function(r,q,p){var o=r("../lib/oop"),n=r("../lib/lang"),m=r("../unicode"),l=r("./doc_comment_highlight_rules").DocCommentHighlightRules,k=r("./text_highlight_rules").TextHighlightRules,j=function(){var f=n.arrayToMap("Array|Boolean|Date|Function|Iterator|Number|Object|RegExp|String|Proxy|Namespace|QName|XML|XMLList|ArrayBuffer|Float32Array|Float64Array|Int16Array|Int32Array|Int8Array|Uint16Array|Uint32Array|Uint8Array|Uint8ClampedArray|Error|EvalError|InternalError|RangeError|ReferenceError|StopIteration|SyntaxError|TypeError|URIError|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|eval|isFinite|isNaN|parseFloat|parseInt|JSON|Math|this|arguments|prototype|window|document".split("|")),e=n.arrayToMap("break|case|catch|continue|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|let|var|while|with|const|yield|import|get|set".split("|")),w="case|do|else|finally|in|instanceof|return|throw|try|typeof|yield",v=n.arrayToMap("__parent__|__count__|escape|unescape|with|__proto__".split("|")),u=n.arrayToMap("const|let|var|function".split("|")),t=n.arrayToMap("null|Infinity|NaN|undefined".split("|")),s=n.arrayToMap("class|enum|extends|super|export|implements|private|public|interface|package|protected|static".split("|")),g="["+m.packages.L+"\\$_]["+m.packages.L+m.packages.Mn+m.packages.Mc+m.packages.Nd+m.packages.Pc+"\\$_]*\\b";this.$rules={start:[{token:"comment",regex:"\\/\\/.*$"},(new l).getStartRule("doc-start"),{token:"comment",merge:!0,regex:"\\/\\*",next:"comment"},{token:"string",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]'},{token:"string",merge:!0,regex:'["].*\\\\$',next:"qqstring"},{token:"string",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"string",merge:!0,regex:"['].*\\\\$",next:"qstring"},{token:"constant.numeric",regex:"0[xX][0-9a-fA-F]+\\b"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:["keyword.definition","text","entity.name.function"],regex:"(function)(\\s+)("+g+")"},{token:"constant.language.boolean",regex:"(?:true|false)\\b"},{token:"keyword",regex:"(?:"+w+")\\b",next:"regex_allowed"},{token:function(a){return f.hasOwnProperty(a)?"variable.language":v.hasOwnProperty(a)?"invalid.deprecated":u.hasOwnProperty(a)?"keyword.definition":e.hasOwnProperty(a)?"keyword":t.hasOwnProperty(a)?"constant.language":s.hasOwnProperty(a)?"invalid.illegal":a=="debugger"?"invalid.deprecated":"identifier"},regex:g},{token:"keyword.operator",regex:"!|\\$|%|&|\\*|\\-\\-|\\-|\\+\\+|\\+|~|===|==|=|!=|!==|<=|>=|<<=|>>=|>>>=|<>|<|>|!|&&|\\|\\||\\?\\:|\\*=|%=|\\+=|\\-=|&=|\\^=|\\b(?:in|instanceof|new|delete|typeof|void)",next:"regex_allowed"},{token:"punctuation.operator",regex:"\\?|\\:|\\,|\\;|\\.",next:"regex_allowed"},{token:"paren.lparen",regex:"[[({]",next:"regex_allowed"},{token:"paren.rparen",regex:"[\\])}]"},{token:"keyword.operator",regex:"\\/=?",next:"regex_allowed"},{token:"comment",regex:"^#!.*$"},{token:"text",regex:"\\s+"}],regex_allowed:[{token:"comment",merge:!0,regex:"\\/\\*",next:"comment_regex_allowed"},{token:"comment",regex:"\\/\\/.*$"},{token:"string.regexp",regex:"\\/",next:"regex",merge:!0},{token:"text",regex:"\\s+"},{token:"empty",regex:"",next:"start"}],regex:[{token:"regexp.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)",next:"regex"},{token:"string.regexp",regex:"/\\w*",next:"start",merge:!0},{token:"string.regexp",regex:"[^\\\\/\\[]+",next:"regex",merge:!0},{token:"string.regexp.charachterclass",regex:"\\[",next:"regex_character_class",merge:!0},{token:"empty",regex:"",next:"start"}],regex_character_class:[{token:"regexp.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)",next:"regex_character_class"},{token:"string.regexp.charachterclass",regex:"]",next:"regex",merge:!0},{token:"string.regexp.charachterclass",regex:"[^\\\\\\]]+",next:"regex_character_class",merge:!0},{token:"empty",regex:"",next:"start"}],comment_regex_allowed:[{token:"comment",regex:".*?\\*\\/",merge:!0,next:"regex_allowed"},{token:"comment",merge:!0,regex:".+"}],comment:[{token:"comment",regex:".*?\\*\\/",merge:!0,next:"start"},{token:"comment",merge:!0,regex:".+"}],qqstring:[{token:"string",regex:'(?:(?:\\\\.)|(?:[^"\\\\]))*?"',next:"start"},{token:"string",merge:!0,regex:".+"}],qstring:[{token:"string",regex:"(?:(?:\\\\.)|(?:[^'\\\\]))*?'",next:"start"},{token:"string",merge:!0,regex:".+"}]},this.embedRules(l,"doc-",[(new l).getEndRule("start")])};o.inherits(j,k),q.JavaScriptHighlightRules=j}),ace.define("ace/mode/doc_comment_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(i,g,m){var l=i("../lib/oop"),k=i("./text_highlight_rules").TextHighlightRules,j=function(){this.$rules={start:[{token:"comment.doc.tag",regex:"@[\\w\\d_]+"},{token:"comment.doc",merge:!0,regex:"\\s+"},{token:"comment.doc",merge:!0,regex:"TODO"},{token:"comment.doc",merge:!0,regex:"[^@\\*]+"},{token:"comment.doc",merge:!0,regex:"."}]}};l.inherits(j,k),function(){this.getStartRule=function(b){return{token:"comment.doc",merge:!0,regex:"\\/\\*(?=\\*)",next:b}},this.getEndRule=function(b){return{token:"comment.doc",merge:!0,regex:"\\*\\/",next:b}}}.call(j.prototype),g.DocCommentHighlightRules=j}),ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(g,f,k){var j=g("../range").Range,i=function(){};((function(){this.checkOutdent=function(d,c){return/^\s+$/.test(d)?/^\s*\}/.test(c):!1},this.autoOutdent=function(l,d){var q=l.getLine(d),p=q.match(/^(\s*\})/);if(!p){return 0}var o=p[1].length,n=l.findMatchingBracket({row:d,column:o});if(!n||n.row==d){return 0}var m=this.$getIndent(l.getLine(n.row));l.replace(new j(d,0,d,o-1),m)},this.$getIndent=function(d){var c=d.match(/^(\s+)/);return c?c[1]:""}})).call(i.prototype),f.MatchingBraceOutdent=i}),ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(i,g,m){var l=i("../lib/oop"),k=i("../lib/event_emitter").EventEmitter,j=function(v,u,t,s){this.changeListener=this.changeListener.bind(this);if(m.packaged){var r=this.$guessBasePath();this.$worker=new Worker(r+u)}else{var q=this.$normalizePath(i.nameToUrl("ace/worker/worker",null,"_"));this.$worker=new Worker(q);var p={};for(var o=0;o<v.length;o++){var n=v[o],c=this.$normalizePath(i.nameToUrl(n,null,"_").replace(/.js$/,""));p[n]=c}}this.$worker.postMessage({init:!0,tlns:p,module:t,classname:s}),this.callbackId=1,this.callbacks={};var a=this;this.$worker.onerror=function(b){throw window.console&&console.log&&console.log(b),b},this.$worker.onmessage=function(e){var d=e.data;switch(d.type){case"log":window.console&&console.log&&console.log(d.data);break;case"event":a._emit(d.name,{data:d.data});break;case"call":var f=a.callbacks[d.id];f&&(f(d.data),delete a.callbacks[d.id])}}};((function(){l.implement(this,k),this.$normalizePath=function(b){return b=b.replace(/^[a-z]+:\/\/[^\/]+\//,""),b=location.protocol+"//"+location.host+(b.charAt(0)=="/"?"":location.pathname.replace(/\/[^\/]*$/,""))+"/"+b.replace(/^[\/]+/,""),b},this.$guessBasePath=function(){if(i.aceBaseUrl){return i.aceBaseUrl}var a=document.getElementsByTagName("script");for(var r=0;r<a.length;r++){var q=a[r],p=q.getAttribute("data-ace-base");if(p){return p.replace(/\/*$/,"/")}var o=q.src||q.getAttribute("src");if(!o){continue}var n=o.match(/^(?:(.*\/)ace\.js|(.*\/)ace(-uncompressed)?(-noconflict)?\.js)(?:\?|$)/);if(n){return n[1]||n[2]}}return""},this.terminate=function(){this._emit("terminate",{}),this.$worker.terminate(),this.$worker=null,this.$doc.removeEventListener("change",this.changeListener),this.$doc=null},this.send=function(d,c){this.$worker.postMessage({command:d,args:c})},this.call=function(f,e,o){if(o){var n=this.callbackId++;this.callbacks[n]=o,e.push(n)}this.send(f,e)},this.emit=function(e,d){try{this.$worker.postMessage({event:e,data:{data:d.data}})}catch(f){}},this.attachToDocument=function(b){this.$doc&&this.terminate(),this.$doc=b,this.call("setValue",[b.getValue()]),b.on("change",this.changeListener)},this.changeListener=function(b){b.range={start:b.data.range.start,end:b.data.range.end},this.emit("change",b)}})).call(j.prototype),g.WorkerClient=j}),ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour"],function(i,g,m){var l=i("../../lib/oop"),k=i("../behaviour").Behaviour,j=function(){this.add("braces","insertion",function(B,A,z,y,x){if(x=="{"){var w=z.getSelectionRange(),v=y.doc.getTextRange(w);return v!==""?{text:"{"+v+"}",selection:!1}:{text:"{}",selection:[1,1]}}if(x=="}"){var u=z.getCursorPosition(),t=y.doc.getLine(u.row),s=t.substring(u.column,u.column+1);if(s=="}"){var r=y.$findOpeningBracket("}",{column:u.column+1,row:u.row});if(r!==null){return{text:"",selection:[1,1]}}}}else{if(x=="\n"){var u=z.getCursorPosition(),t=y.doc.getLine(u.row),s=t.substring(u.column,u.column+1);if(s=="}"){var q=y.findMatchingBracket({row:u.row,column:u.column+1});if(!q){return null}var p=this.getNextLineIndent(B,t.substring(0,t.length-1),y.getTabString()),o=this.$getIndent(y.doc.getLine(q.row));return{text:"\n"+p+"\n"+o,selection:[1,p.length,1,p.length]}}}}}),this.add("braces","deletion",function(o,n,u,t,s){var r=t.doc.getTextRange(s);if(!s.isMultiLine()&&r=="{"){var q=t.doc.getLine(s.start.row),p=q.substring(s.end.column,s.end.column+1);if(p=="}"){return s.end.column++,s}}}),this.add("parens","insertion",function(x,w,v,u,t){if(t=="("){var s=v.getSelectionRange(),r=u.doc.getTextRange(s);return r!==""?{text:"("+r+")",selection:!1}:{text:"()",selection:[1,1]}}if(t==")"){var q=v.getCursorPosition(),p=u.doc.getLine(q.row),o=p.substring(q.column,q.column+1);if(o==")"){var n=u.$findOpeningBracket(")",{column:q.column+1,row:q.row});if(n!==null){return{text:"",selection:[1,1]}}}}}),this.add("parens","deletion",function(o,n,u,t,s){var r=t.doc.getTextRange(s);if(!s.isMultiLine()&&r=="("){var q=t.doc.getLine(s.start.row),p=q.substring(s.start.column+1,s.start.column+2);if(p==")"){return s.end.column++,s}}}),this.add("string_dquotes","insertion",function(F,E,D,C,B){if(B=='"'){var A=D.getSelectionRange(),z=C.doc.getTextRange(A);if(z!==""){return{text:'"'+z+'"',selection:!1}}var y=D.getCursorPosition(),x=C.doc.getLine(y.row),w=x.substring(y.column-1,y.column);if(w=="\\"){return null}var v=C.getTokens(A.start.row,A.start.row)[0].tokens,u=0,t,s=-1;for(var r=0;r<v.length;r++){t=v[r],t.type=="string"?s=-1:s<0&&(s=t.value.indexOf('"'));if(t.value.length+u>A.start.column){break}u+=v[r].value.length}if(!t||s<0&&t.type!=="comment"&&(t.type!=="string"||A.start.column!==t.value.length+u-1&&t.value.lastIndexOf('"')===t.value.length-1)){return{text:'""',selection:[1,1]}}if(t&&t.type==="string"){var q=x.substring(y.column,y.column+1);if(q=='"'){return{text:"",selection:[1,1]}}}}}),this.add("string_dquotes","deletion",function(o,n,u,t,s){var r=t.doc.getTextRange(s);if(!s.isMultiLine()&&r=='"'){var q=t.doc.getLine(s.start.row),p=q.substring(s.start.column+1,s.start.column+2);if(p=='"'){return s.end.column++,s}}})};l.inherits(j,k),g.CstyleBehaviour=j}),ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],function(j,i,o){var n=j("../../lib/oop"),m=j("../../range").Range,l=j("./fold_mode").FoldMode,k=i.FoldMode=function(){};n.inherits(k,l),function(){this.foldingStartMarker=/(\{|\[)[^\}\]]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{]*(\}|\])|^[\s\*]*(\*\/)/,this.getFoldWidgetRange=function(w,v,u){var t=w.getLine(u),s=t.match(this.foldingStartMarker);if(s){var r=s.index;if(s[1]){return this.openingBracketBlock(w,s[1],u,r)}var q=w.getCommentFoldRange(u,r+s[0].length);return q.end.column-=2,q}if(v!=="markbeginend"){return}var s=t.match(this.foldingStopMarker);if(s){var r=s.index+s[0].length;if(s[2]){var q=w.getCommentFoldRange(u,r);return q.end.column-=2,q}var p={row:u,column:r},e=w.$findOpeningBracket(s[1],p);if(!e){return}return e.column++,p.column--,m.fromPoints(e,p)}}}.call(k.prototype)}),ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(g,f,k){var j=g("../../range").Range,i=f.FoldMode=function(){};((function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(l,e,n){var m=l.getLine(n);return this.foldingStartMarker.test(m)?"start":e=="markbeginend"&&this.foldingStopMarker&&this.foldingStopMarker.test(m)?"end":""},this.getFoldWidgetRange=function(e,d,l){return null},this.indentationBlock=function(x,w,v){var u=/^\s*/,t=w,s=w,r=x.getLine(w),q=v||r.length,p=r.match(u)[0].length,o=x.getLength();while(++w<o){r=x.getLine(w);var n=r.match(u)[0].length;if(n==r.length){continue}if(n<=p){break}s=w}if(s>t){var d=x.getLine(s).length;return new j(t,q,s,d)}},this.openingBracketBlock=function(l,d,q,p){var o={row:q,column:p+1},n=l.$findClosingBracket(d,o);if(!n){return}var m=l.foldWidgets[n.row];return m==null&&(m=this.getFoldWidget(l,n.row)),m=="start"&&(n.row--,n.column=l.getLine(n.row).length),j.fromPoints(o,n)}})).call(i.prototype)}),ace.define("ace/mode/xml",["require","exports","module","ace/lib/oop","ace/mode/text","ace/tokenizer","ace/mode/xml_highlight_rules","ace/mode/behaviour/xml","ace/mode/folding/xml"],function(t,s,r){var q=t("../lib/oop"),p=t("./text").Mode,o=t("../tokenizer").Tokenizer,n=t("./xml_highlight_rules").XmlHighlightRules,m=t("./behaviour/xml").XmlBehaviour,l=t("./folding/xml").FoldMode,k=function(){this.$tokenizer=new o((new n).getRules()),this.$behaviour=new m,this.foldingRules=new l};q.inherits(k,p),function(){this.getNextLineIndent=function(e,d,f){return this.$getIndent(d)}}.call(k.prototype),s.Mode=k}),ace.define("ace/mode/xml_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/xml_util","ace/mode/text_highlight_rules"],function(j,i,o){var n=j("../lib/oop"),m=j("./xml_util"),l=j("./text_highlight_rules").TextHighlightRules,k=function(){this.$rules={start:[{token:"text",regex:"<\\!\\[CDATA\\[",next:"cdata"},{token:"xml_pe",regex:"<\\?.*?\\?>"},{token:"comment",merge:!0,regex:"<\\!--",next:"comment"},{token:"meta.tag",regex:"<\\/?",next:"tag"},{token:"text",regex:"\\s+"},{token:"text",regex:"[^<]+"}],cdata:[{token:"text",regex:"\\]\\]>",next:"start"},{token:"text",regex:"\\s+"},{token:"text",regex:"(?:[^\\]]|\\](?!\\]>))+"}],comment:[{token:"comment",regex:".*?-->",next:"start"},{token:"comment",merge:!0,regex:".+"}]},m.tag(this.$rules,"tag","start")};n.inherits(k,l),i.XmlHighlightRules=k}),ace.define("ace/mode/xml_util",["require","exports","module","ace/lib/lang"],function(j,i,p){function l(b){return[{token:"string",regex:'".*?"'},{token:"string",merge:!0,regex:'["].*',next:b+"-qqstring"},{token:"string",regex:"'.*?'"},{token:"string",merge:!0,regex:"['].*",next:b+"-qstring"}]}function k(d,c){return[{token:"string",merge:!0,regex:".*?"+d,next:c},{token:"string",merge:!0,regex:".+"}]}"use strict";var o=j("../lib/lang"),n=o.arrayToMap("button|form|input|label|select|textarea".split("|")),m=o.arrayToMap("table|tbody|td|tfoot|th|tr".split("|"));i.tag=function(e,d,f){e[d]=[{token:"text",regex:"\\s+"},{token:function(b){return b==="a"?"meta.tag.anchor":b==="img"?"meta.tag.image":b==="script"?"meta.tag.script":b==="style"?"meta.tag.style":n.hasOwnProperty(b.toLowerCase())?"meta.tag.form":m.hasOwnProperty(b.toLowerCase())?"meta.tag.table":"meta.tag"},merge:!0,regex:"[-_a-zA-Z0-9:!]+",next:d+"embed-attribute-list"},{token:"empty",regex:"",next:d+"embed-attribute-list"}],e[d+"-qstring"]=k("'",d+"embed-attribute-list"),e[d+"-qqstring"]=k('"',d+"embed-attribute-list"),e[d+"embed-attribute-list"]=[{token:"meta.tag",merge:!0,regex:"/?>",next:f},{token:"keyword.operator",regex:"="},{token:"entity.other.attribute-name",regex:"[-_a-zA-Z0-9:]+"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"text",regex:"\\s+"}].concat(l(d))}}),ace.define("ace/mode/behaviour/xml",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/mode/behaviour/cstyle"],function(j,i,o){var n=j("../../lib/oop"),m=j("../behaviour").Behaviour,l=j("./cstyle").CstyleBehaviour,k=function(){this.inherit(l,["string_dquotes"]),this.add("brackets","insertion",function(B,A,z,y,x){if(x=="<"){var w=z.getSelectionRange(),v=y.doc.getTextRange(w);return v!==""?!1:{text:"<>",selection:[1,1]}}if(x==">"){var u=z.getCursorPosition(),t=y.doc.getLine(u.row),s=t.substring(u.column,u.column+1);if(s==">"){return{text:"",selection:[1,1]}}}else{if(x=="\n"){var u=z.getCursorPosition(),t=y.doc.getLine(u.row),r=t.substring(u.column,u.column+2);if(r=="</"){var q=this.$getIndent(y.doc.getLine(u.row))+y.getTabString(),p=this.$getIndent(y.doc.getLine(u.row));return{text:"\n"+q+"\n"+p,selection:[1,q.length,1,q.length]}}}}})};n.inherits(k,m),i.XmlBehaviour=k}),ace.define("ace/mode/folding/xml",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/range","ace/mode/folding/fold_mode","ace/token_iterator"],function(r,q,p){var o=r("../../lib/oop"),n=r("../../lib/lang"),m=r("../../range").Range,l=r("./fold_mode").FoldMode,k=r("../../token_iterator").TokenIterator,j=q.FoldMode=function(b){l.call(this),this.voidElements=b||{}};o.inherits(j,l),function(){this.getFoldWidget=function(f,e,i){var g=this._getFirstTagInLine(f,i);return g.closing?e=="markbeginend"?"end":"":!g.tagName||this.voidElements[g.tagName.toLowerCase()]?"":g.selfClosing?"":g.value.indexOf("/"+g.tagName)!==-1?"":"start"},this._getFirstTagInLine=function(i,e){var v=i.getTokens(e,e)[0].tokens,u="";for(var t=0;t<v.length;t++){var s=v[t];s.type.indexOf("meta.tag")===0?u+=s.value:u+=n.stringRepeat(" ",s.value.length)}return this._parseTag(u)},this.tagRe=/^(\s*)(<?(\/?)([-_a-zA-Z0-9:!]*)\s*(\/?)>?)/,this._parseTag=function(e){var d=this.tagRe.exec(e),f=this.tagRe.lastIndex||0;return this.tagRe.lastIndex=0,{value:e,match:d?d[2]:"",closing:d?!!d[3]:!1,selfClosing:d?!!d[5]||d[2]=="/>":!1,tagName:d?d[4]:"",column:d[1]?f+d[1].length:f}},this._readTagForward=function(g){var f=g.getCurrentToken();if(!f){return null}var t="",s;do{if(f.type.indexOf("meta.tag")===0){if(!s){var s={row:g.getCurrentTokenRow(),column:g.getCurrentTokenColumn()}}t+=f.value;if(t.indexOf(">")!==-1){var i=this._parseTag(t);return i.start=s,i.end={row:g.getCurrentTokenRow(),column:g.getCurrentTokenColumn()+f.value.length},g.stepForward(),i}}}while(f=g.stepForward());return null},this._readTagBackward=function(g){var f=g.getCurrentToken();if(!f){return null}var t="",s;do{if(f.type.indexOf("meta.tag")===0){s||(s={row:g.getCurrentTokenRow(),column:g.getCurrentTokenColumn()+f.value.length}),t=f.value+t;if(t.indexOf("<")!==-1){var i=this._parseTag(t);return i.end=s,i.start={row:g.getCurrentTokenRow(),column:g.getCurrentTokenColumn()},g.stepBackward(),i}}}while(f=g.stepBackward());return null},this._pop=function(e,d){while(e.length){var f=e[e.length-1];if(!d||f.tagName==d.tagName){return e.pop()}if(this.voidElements[d.tagName]){return}if(this.voidElements[f.tagName]){e.pop();continue}return null}},this.getFoldWidgetRange=function(A,z,y){var x=this._getFirstTagInLine(A,y);if(!x.match){return null}var w=x.closing||x.selfClosing,v=[],u;if(!w){var t=new k(A,y,x.column),s={row:y,column:x.column+x.tagName.length+2};while(u=this._readTagForward(t)){if(u.selfClosing){if(!v.length){return u.start.column+=u.tagName.length+2,u.end.column-=2,m.fromPoints(u.start,u.end)}continue}if(u.closing){this._pop(v,u);if(v.length==0){return m.fromPoints(s,u.start)}}else{v.push(u)}}}else{var t=new k(A,y,x.column+x.match.length),f={row:y,column:x.column};while(u=this._readTagBackward(t)){if(u.selfClosing){if(!v.length){return u.start.column+=u.tagName.length+2,u.end.column-=2,m.fromPoints(u.start,u.end)}continue}if(!u.closing){this._pop(v,u);if(v.length==0){return u.start.column+=u.tagName.length+2,m.fromPoints(u.start,f)}}else{v.push(u)}}}}}.call(j.prototype)}),ace.define("ace/mode/html",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/javascript","ace/mode/css","ace/tokenizer","ace/mode/html_highlight_rules","ace/mode/behaviour/xml","ace/mode/folding/html"],function(x,w,v){var u=x("../lib/oop"),t=x("./text").Mode,s=x("./javascript").Mode,r=x("./css").Mode,q=x("../tokenizer").Tokenizer,p=x("./html_highlight_rules").HtmlHighlightRules,o=x("./behaviour/xml").XmlBehaviour,n=x("./folding/html").FoldMode,m=function(){var b=new p;this.$tokenizer=new q(b.getRules()),this.$behaviour=new o,this.$embeds=b.getEmbeds(),this.createModeDelegates({"js-":s,"css-":r}),this.foldingRules=new n};u.inherits(m,t),function(){this.toggleCommentLines=function(f,e,i,g){return 0},this.getNextLineIndent=function(e,d,f){return this.$getIndent(d)},this.checkOutdent=function(e,d,f){return !1}}.call(m.prototype),w.Mode=m}),ace.define("ace/mode/css",["require","exports","module","ace/lib/oop","ace/mode/text","ace/tokenizer","ace/mode/css_highlight_rules","ace/mode/matching_brace_outdent","ace/worker/worker_client","ace/mode/folding/cstyle"],function(v,u,t){var s=v("../lib/oop"),r=v("./text").Mode,q=v("../tokenizer").Tokenizer,p=v("./css_highlight_rules").CssHighlightRules,o=v("./matching_brace_outdent").MatchingBraceOutdent,n=v("../worker/worker_client").WorkerClient,m=v("./folding/cstyle").FoldMode,l=function(){this.$tokenizer=new q((new p).getRules(),"i"),this.$outdent=new o,this.foldingRules=new m};s.inherits(l,r),function(){this.foldingRules="cStyle",this.getNextLineIndent=function(i,g,x){var w=this.$getIndent(g),k=this.$tokenizer.getLineTokens(g,i).tokens;if(k.length&&k[k.length-1].type=="comment"){return w}var j=g.match(/^.*\{\s*$/);return j&&(w+=x),w},this.checkOutdent=function(e,d,f){return this.$outdent.checkOutdent(d,f)},this.autoOutdent=function(e,d,f){this.$outdent.autoOutdent(d,f)},this.createWorker=function(d){var c=new n(["ace"],"worker-css.js","ace/mode/css_worker","Worker");return c.attachToDocument(d.getDocument()),c.on("csslint",function(a){var e=[];a.data.forEach(function(b){e.push({row:b.line-1,column:b.col-1,text:b.message,type:b.type,lint:b})}),d.setAnnotations(e)}),c}}.call(l.prototype),u.Mode=l}),ace.define("ace/mode/css_highlight_rules",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/mode/text_highlight_rules"],function(j,i,o){var n=j("../lib/oop"),m=j("../lib/lang"),l=j("./text_highlight_rules").TextHighlightRules,k=function(){var z=m.arrayToMap("-moz-appearance|-moz-box-sizing|-webkit-box-sizing|-moz-outline-radius|-moz-transform|-webkit-transform|appearance|azimuth|background-attachment|background-color|background-image|background-origin|background-position|background-repeat|background|border-bottom-color|border-bottom-style|border-bottom-width|border-bottom|border-collapse|border-color|border-left-color|border-left-style|border-left-width|border-left|border-right-color|border-right-style|border-right-width|border-right|border-spacing|border-style|border-top-color|border-top-style|border-top-width|border-top|border-width|border|bottom|box-sizing|caption-side|clear|clip|color|content|counter-increment|counter-reset|cue-after|cue-before|cue|cursor|direction|display|elevation|empty-cells|float|font-family|font-size-adjust|font-size|font-stretch|font-style|font-variant|font-weight|font|height|left|letter-spacing|line-height|list-style-image|list-style-position|list-style-type|list-style|margin-bottom|margin-left|margin-right|margin-top|marker-offset|margin|marks|max-height|max-width|min-height|min-width|-moz-border-radius|opacity|orphans|outline-color|outline-offset|outline-radius|outline-style|outline-width|outline|overflow|overflow-x|overflow-y|padding-bottom|padding-left|padding-right|padding-top|padding|page-break-after|page-break-before|page-break-inside|page|pause-after|pause-before|pause|pitch-range|pitch|play-during|pointer-events|position|quotes|resize|richness|right|size|speak-header|speak-numeral|speak-punctuation|speech-rate|speak|stress|table-layout|text-align|text-decoration|text-indent|text-shadow|text-transform|top|transform|unicode-bidi|vertical-align|visibility|voice-family|volume|white-space|widows|width|word-spacing|z-index".split("|")),y=m.arrayToMap("rgb|rgba|url|attr|counter|counters".split("|")),x=m.arrayToMap("absolute|all-scroll|always|armenian|auto|baseline|below|bidi-override|block|bold|bolder|border-box|both|bottom|break-all|break-word|capitalize|center|char|circle|cjk-ideographic|col-resize|collapse|content-box|crosshair|dashed|decimal-leading-zero|decimal|default|disabled|disc|distribute-all-lines|distribute-letter|distribute-space|distribute|dotted|double|e-resize|ellipsis|fixed|georgian|groove|hand|hebrew|help|hidden|hiragana-iroha|hiragana|horizontal|ideograph-alpha|ideograph-numeric|ideograph-parenthesis|ideograph-space|inactive|inherit|inline-block|inline|inset|inside|inter-ideograph|inter-word|italic|justify|katakana-iroha|katakana|keep-all|left|lighter|line-edge|line-through|line|list-item|loose|lower-alpha|lower-greek|lower-latin|lower-roman|lowercase|lr-tb|ltr|medium|middle|move|n-resize|ne-resize|newspaper|no-drop|no-repeat|nw-resize|none|normal|not-allowed|nowrap|oblique|outset|outside|overline|pointer|progress|relative|repeat-x|repeat-y|repeat|right|ridge|row-resize|rtl|s-resize|scroll|se-resize|separate|small-caps|solid|square|static|strict|super|sw-resize|table-footer-group|table-header-group|tb-rl|text-bottom|text-top|text|thick|thin|top|transparent|underline|upper-alpha|upper-latin|upper-roman|uppercase|vertical-ideographic|vertical-text|visible|w-resize|wait|whitespace|zero".split("|")),w=m.arrayToMap("aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow".split("|")),v="\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))",u=[{token:"comment",merge:!0,regex:"\\/\\*",next:"ruleset_comment"},{token:"string",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]'},{token:"string",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"constant.numeric",regex:v+"(?:em|ex|px|cm|mm|in|pt|pc|deg|rad|grad|ms|s|hz|khz|%)"},{token:"constant.numeric",regex:"#[a-f0-9]{6}"},{token:"constant.numeric",regex:"#[a-f0-9]{3}"},{token:function(a){return z.hasOwnProperty(a.toLowerCase())?"support.type":y.hasOwnProperty(a.toLowerCase())?"support.function":x.hasOwnProperty(a.toLowerCase())?"support.constant":w.hasOwnProperty(a.toLowerCase())?"support.constant.color":"text"},regex:"\\-?[a-zA-Z_][a-zA-Z0-9_\\-]*"}],t=m.copyArray(u);t.unshift({token:"paren.rparen",regex:"\\}",next:"start"});var s=m.copyArray(u);s.unshift({token:"paren.rparen",regex:"\\}",next:"media"});var r=[{token:"comment",merge:!0,regex:".+"}],q=m.copyArray(r);q.unshift({token:"comment",regex:".*?\\*\\/",next:"start"});var p=m.copyArray(r);p.unshift({token:"comment",regex:".*?\\*\\/",next:"media"});var e=m.copyArray(r);e.unshift({token:"comment",regex:".*?\\*\\/",next:"ruleset"}),this.$rules={start:[{token:"comment",merge:!0,regex:"\\/\\*",next:"comment"},{token:"paren.lparen",regex:"\\{",next:"ruleset"},{token:"string",regex:"@.*?{",next:"media"},{token:"keyword",regex:"#[a-z0-9-_]+"},{token:"variable",regex:"\\.[a-z0-9-_]+"},{token:"string",regex:":[a-z0-9-_]+"},{token:"constant",regex:"[a-z0-9-_]+"}],media:[{token:"comment",merge:!0,regex:"\\/\\*",next:"media_comment"},{token:"paren.lparen",regex:"\\{",next:"media_ruleset"},{token:"string",regex:"\\}",next:"start"},{token:"keyword",regex:"#[a-z0-9-_]+"},{token:"variable",regex:"\\.[a-z0-9-_]+"},{token:"string",regex:":[a-z0-9-_]+"},{token:"constant",regex:"[a-z0-9-_]+"}],comment:q,ruleset:t,ruleset_comment:e,media_ruleset:s,media_comment:p}};n.inherits(k,l),i.CssHighlightRules=k}),ace.define("ace/mode/html_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/css_highlight_rules","ace/mode/javascript_highlight_rules","ace/mode/xml_util","ace/mode/text_highlight_rules"],function(r,q,p){var o=r("../lib/oop"),n=r("./css_highlight_rules").CssHighlightRules,m=r("./javascript_highlight_rules").JavaScriptHighlightRules,l=r("./xml_util"),k=r("./text_highlight_rules").TextHighlightRules,j=function(){this.$rules={start:[{token:"text",merge:!0,regex:"<\\!\\[CDATA\\[",next:"cdata"},{token:"xml_pe",regex:"<\\?.*?\\?>"},{token:"comment",merge:!0,regex:"<\\!--",next:"comment"},{token:"meta.tag",regex:"<(?=s*script\\b)",next:"script"},{token:"meta.tag",regex:"<(?=s*style\\b)",next:"css"},{token:"meta.tag",regex:"<\\/?",next:"tag"},{token:"text",regex:"\\s+"},{token:"text",regex:"[^<]+"}],cdata:[{token:"text",regex:"\\]\\]>",next:"start"},{token:"text",merge:!0,regex:"\\s+"},{token:"text",merge:!0,regex:".+"}],comment:[{token:"comment",regex:".*?-->",next:"start"},{token:"comment",merge:!0,regex:".+"}]},l.tag(this.$rules,"tag","start"),l.tag(this.$rules,"css","css-start"),l.tag(this.$rules,"script","js-start"),this.embedRules(m,"js-",[{token:"comment",regex:"\\/\\/.*(?=<\\/script>)",next:"tag"},{token:"meta.tag",regex:"<\\/(?=script)",next:"tag"}]),this.embedRules(n,"css-",[{token:"meta.tag",regex:"<\\/(?=style)",next:"tag"}])};o.inherits(j,k),q.HtmlHighlightRules=j}),ace.define("ace/mode/folding/html",["require","exports","module","ace/lib/oop","ace/mode/folding/mixed","ace/mode/folding/xml","ace/mode/folding/cstyle"],function(j,i,p){var o=j("../../lib/oop"),n=j("./mixed").FoldMode,m=j("./xml").FoldMode,l=j("./cstyle").FoldMode,k=i.FoldMode=function(){n.call(this,new m({area:1,base:1,br:1,col:1,command:1,embed:1,hr:1,img:1,input:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1,li:1,dt:1,dd:1,p:1,rt:1,rp:1,optgroup:1,option:1,colgroup:1,td:1,th:1}),{"js-":new l,"css-":new l})};o.inherits(k,n)}),ace.define("ace/mode/folding/mixed",["require","exports","module","ace/lib/oop","ace/mode/folding/fold_mode"],function(i,g,m){var l=i("../../lib/oop"),k=i("./fold_mode").FoldMode,j=g.FoldMode=function(d,c){this.defaultMode=d,this.subModes=c};l.inherits(j,k),function(){this.$getMode=function(d){for(var c in this.subModes){if(d.indexOf(c)===0){return this.subModes[c]}}return null},this.$tryMode=function(n,f,q,p){var o=this.$getMode(n);return o?o.getFoldWidget(f,q,p):""},this.getFoldWidget=function(e,d,f){return this.$tryMode(e.getState(f-1),e,d,f)||this.$tryMode(e.getState(f),e,d,f)||this.defaultMode.getFoldWidget(e,d,f)},this.getFoldWidgetRange=function(f,e,o){var n=this.$getMode(f.getState(o-1));if(!n||!n.getFoldWidget(f,e,o)){n=this.$getMode(f.getState(o))}if(!n||!n.getFoldWidget(f,e,o)){n=this.defaultMode}return n.getFoldWidgetRange(f,e,o)}}.call(j.prototype)}),ace.define("ace/mode/markdown_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules","ace/mode/javascript_highlight_rules","ace/mode/xml_highlight_rules","ace/mode/html_highlight_rules","ace/mode/css_highlight_rules"],function(v,u,t){function m(d,c){return{token:"support.function",regex:"^```"+d+"\\s*$",next:c+"start"}}"use strict";var s=v("../lib/oop"),r=v("./text_highlight_rules").TextHighlightRules,q=v("./javascript_highlight_rules").JavaScriptHighlightRules,p=v("./xml_highlight_rules").XmlHighlightRules,o=v("./html_highlight_rules").HtmlHighlightRules,n=v("./css_highlight_rules").CssHighlightRules,l=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{token:"support.function",regex:"(`+)([^\\r]*?[^`])(\\1)"},{token:"support.function",regex:"^[ ]{4}.+"},{token:"markup.heading.1",regex:"^=+(?=\\s*$)"},{token:"markup.heading.1",regex:"^\\-+(?=\\s*$)"},{token:function(b){return"markup.heading."+b.length},regex:"^#{1,6}"},m("javascript","js-"),m("xml","xml-"),m("html","html-"),m("css","css-"),{token:"support.function",regex:"^```[a-zA-Z]+\\s*$",next:"githubblock"},{token:"string",regex:"^>[ ].+$",next:"blockquote"},{token:["text","constant","text","url","string","text"],regex:'^([ ]{0,3}\\[)([^\\]]+)(\\]:\\s*)([^ ]+)(\\s*(?:["][^"]+["])?\\s*)$'},{token:["text","string","text","constant","text"],regex:"(\\[)((?:[[^\\]]*\\]|[^\\[\\]])*)(\\][ ]?(?:\\n[ ]*)?\\[)(.*?)(\\])"},{token:["text","string","text","markup.underline","string","text"],regex:'(\\[)(\\[[^\\]]*\\]|[^\\[\\]]*)(\\]\\([ \\t]*)(<?(?:(?:[^\\(]*?\\([^\\)]*?\\)\\S*?)|(?:.*?))>?)((?:[ \t]*"(?:.*?)"[ \\t]*)?)(\\))'},{token:"constant",regex:"^[ ]{0,2}(?:[ ]?\\*[ ]?){3,}\\s*$"},{token:"constant",regex:"^[ ]{0,2}(?:[ ]?\\-[ ]?){3,}\\s*$"},{token:"constant",regex:"^[ ]{0,2}(?:[ ]?\\_[ ]?){3,}\\s*$"},{token:"markup.list",regex:"^\\s{0,3}(?:[*+-]|\\d+\\.)\\s+",next:"listblock"},{token:"string",regex:"([*]{2}|[_]{2}(?=\\S))([^\\r]*?\\S[*_]*)(\\1)"},{token:"string",regex:"([*]|[_](?=\\S))([^\\r]*?\\S[*_]*)(\\1)"},{token:["text","url","text"],regex:"(<)((?:https?|ftp|dict):[^'\">\\s]+|(?:mailto:)?[-.\\w]+\\@[-a-z0-9]+(?:\\.[-a-z0-9]+)*\\.[a-z]+)(>)"},{token:"text",regex:"[^\\*_%$`\\[#<>]+"}],listblock:[{token:"empty_line",regex:"^$",next:"start"},{token:"markup.list",regex:".+"}],blockquote:[{token:"empty_line",regex:"^\\s*$",next:"start"},{token:"string",regex:".+"}],githubblock:[{token:"support.function",regex:"^```",next:"start"},{token:"support.function",regex:".+"}]},this.embedRules(q,"js-",[{token:"support.function",regex:"^```",next:"start"}]),this.embedRules(o,"html-",[{token:"support.function",regex:"^```",next:"start"}]),this.embedRules(n,"css-",[{token:"support.function",regex:"^```",next:"start"}]),this.embedRules(p,"xml-",[{token:"support.function",regex:"^```",next:"start"}])};s.inherits(l,r),u.MarkdownHighlightRules=l}),function(){ace.require(["ace/ace"],function(d){window.ace||(window.ace={});for(var c in d){d.hasOwnProperty(c)&&(ace[c]=d[c])}})}();ace.define("ace/theme/twilight",["require","exports","module"],function(f,e,i){e.isDark=!0,e.cssClass="ace-twilight",e.cssText=".ace-twilight .ace_editor {  border: 2px solid rgb(159, 159, 159);}.ace-twilight .ace_editor.ace_focus {  border: 2px solid #327fbd;}.ace-twilight .ace_gutter {  background: #e8e8e8;  color: #333;}.ace-twilight .ace_print_margin {  width: 1px;  background: #e8e8e8;}.ace-twilight .ace_scroller {  background-color: #141414;}.ace-twilight .ace_text-layer {  cursor: text;  color: #F8F8F8;}.ace-twilight .ace_cursor {  border-left: 2px solid #A7A7A7;}.ace-twilight .ace_cursor.ace_overwrite {  border-left: 0px;  border-bottom: 1px solid #A7A7A7;} .ace-twilight .ace_marker-layer .ace_selection {  background: rgba(221, 240, 255, 0.20);}.ace-twilight .ace_marker-layer .ace_step {  background: rgb(198, 219, 174);}.ace-twilight .ace_marker-layer .ace_bracket {  margin: -1px 0 0 -1px;  border: 1px solid rgba(255, 255, 255, 0.25);}.ace-twilight .ace_marker-layer .ace_active_line {  background: rgba(255, 255, 255, 0.031);}.ace-twilight .ace_marker-layer .ace_selected_word {  border: 1px solid rgba(221, 240, 255, 0.20);}       .ace-twilight .ace_invisible {  color: rgba(255, 255, 255, 0.25);}.ace-twilight .ace_keyword {  color:#CDA869;}.ace-twilight .ace_constant {  color:#CF6A4C;}.ace-twilight .ace_invalid.ace_illegal {  color:#F8F8F8;background-color:rgba(86, 45, 86, 0.75);}.ace-twilight .ace_invalid.ace_deprecated {  text-decoration:underline;font-style:italic;color:#D2A8A1;}.ace-twilight .ace_support {  color:#9B859D;}.ace-twilight .ace_fold {    background-color: #AC885B;    border-color: #F8F8F8;}.ace-twilight .ace_support.ace_function {  color:#DAD085;}.ace-twilight .ace_string {  color:#8F9D6A;}.ace-twilight .ace_string.ace_regexp {  color:#E9C062;}.ace-twilight .ace_comment {  font-style:italic;color:#5F5A60;}.ace-twilight .ace_variable {  color:#7587A6;}.ace-twilight .ace_xml_pe {  color:#494949;}.ace-twilight .ace_meta.ace_tag {  color:#AC885B;}.ace-twilight .ace_entity.ace_name.ace_function {  color:#AC885B;}.ace-twilight .ace_markup.ace_underline {    text-decoration:underline;}.ace-twilight .ace_markup.ace_heading {  color:#CF6A4C;}.ace-twilight .ace_markup.ace_list {  color:#F9EE98;}";var g=f("../lib/dom");g.importCssString(e.cssText,e.cssClass)}),function(){ace.require(["ace/ace"],function(d){window.ace||(window.ace={});for(var c in d){d.hasOwnProperty(c)&&(ace[c]=d[c])}})}();Ext.ux.AceComponent=Ext.extend(Ext.BoxComponent,{theme:"twilight",mode:"textile",fileUrl:afStudioWSUrls.getFilecontentUrl,file:null,fileParam:"file",loadingText:"loading...",loadingParams:{},afterRender:function(){Ext.ux.AceComponent.superclass.afterRender.call(this);this.initAce.defer(10,this)},onResize:function(d,b,a,c){if(this.editor){this.editor.resize()}},setFileUrl:function(a){this.fileUrl=a},setFile:function(a,b){this.file=a;if(b==true){this.loadFile(this.file)}},setCode:function(a){this.editor.getSession().setValue(a)},getCode:function(){return this.editor.getSession().getValue()},setMode:function(b){var a=(Ext.ux.AceComponent.modes.indexOf(b)!=-1)?ace.require("ace/mode/"+b).Mode:ace.require("ace/mode/textile").Mode;this.editor.getSession().setMode(new a())},setTheme:function(a){if(Ext.ux.AceComponent.themes.indexOf(a)!=-1){this.editor.setTheme("ace/theme/"+a)}},maskEditor:function(){this.el.mask(this.loadingText?this.loadingText:null)},unmaskEditor:function(){var a=this.el;if(a.isMasked()){a.unmask()}},loadFile:function(a){var b=Ext.apply({},this.loadingParams);b[this.fileParam]=a;this.maskEditor();Ext.Ajax.request({url:this.fileUrl,method:"GET",params:b,scope:this,success:function(d,e){this.unmaskEditor();var g=Ext.decode(d.responseText);if(g.success){this.file=a;if(g.data==null){this.setCode("");return}this.setMode(this.getModeByFileExtension(a));this.setCode(g.data)}else{this.setCode("");var f=String.format('File "{0}" loading failure. <br/> {1}',a,g.message?g.message:""),c="Ace editor";Ext.Msg.alert(c,f)}},failure:function(d,e){this.unmaskEditor();var f=String.format('File "{0}" loading failure. <br/> status code: {1} <br /> Message: {2}',a,xhr.status,xhr.statusText||"(none)"),c="Ace editor";Ext.Msg.alert(c,f)}})},initAce:function(){var a=ace.edit(this.el.dom);this.editor=a;this.setTheme(this.theme);if(!this.file){this.setMode(this.mode)}if(this.code&&!this.file){this.setCode(this.code)}if(this.file){this.loadFile(this.file)}},getModeByFileExtension:function(a){var b=/\.(\w+)$/.exec(a);b=b?b[1]:null;var c="textile";switch(b){case"php":case"phtml":c="php";break;case"js":c="javascript";break;case"css":c="css";break;case"html":case"htm":c="html";break;case"json":c="json";break;case"md":c="markdown";break;case"xml":c="xml";break;case"sql":c="sql";break}return c}});Ext.ux.AceComponent.modes=["textile","php","javascript","xml","css","html","json","markdown","sql"];Ext.ux.AceComponent.themes=["twilight"];Ext.reg("ace",Ext.ux.AceComponent);Ext.ns("Ext.ux.form");Ext.ux.form.FileUploadField=Ext.extend(Ext.form.TextField,{buttonText:"Browse...",buttonOnly:false,buttonOffset:3,readOnly:true,autoSize:Ext.emptyFn,initComponent:function(){Ext.ux.form.FileUploadField.superclass.initComponent.call(this);this.addEvents("fileselected")},onRender:function(c,a){Ext.ux.form.FileUploadField.superclass.onRender.call(this,c,a);this.wrap=this.el.wrap({cls:"x-form-field-wrap x-form-file-wrap"});this.el.addClass("x-form-file-text");this.el.dom.removeAttribute("name");this.createFileInput();var b=Ext.applyIf(this.buttonCfg||{},{text:this.buttonText});this.button=new Ext.Button(Ext.apply(b,{renderTo:this.wrap,cls:"x-form-file-btn"+(b.iconCls?" x-btn-icon":"")}));if(this.buttonOnly){this.el.hide();this.wrap.setWidth(this.button.getEl().getWidth())}this.bindListeners();this.resizeEl=this.positionEl=this.wrap},bindListeners:function(){this.fileInput.on({scope:this,mouseenter:function(){this.button.addClass(["x-btn-over","x-btn-focus"])},mouseleave:function(){this.button.removeClass(["x-btn-over","x-btn-focus","x-btn-click"])},mousedown:function(){this.button.addClass("x-btn-click")},mouseup:function(){this.button.removeClass(["x-btn-over","x-btn-focus","x-btn-click"])},change:function(){var a=this.fileInput.dom.value;this.setValue(a);this.fireEvent("fileselected",this,a)}})},createFileInput:function(){this.fileInput=this.wrap.createChild({id:this.getFileInputId(),name:this.name||this.getId(),cls:"x-form-file",tag:"input",type:"file",size:1})},reset:function(){if(this.rendered){this.fileInput.remove();this.createFileInput();this.bindListeners()}Ext.ux.form.FileUploadField.superclass.reset.call(this)},getFileInputId:function(){return this.id+"-file"},onResize:function(a,b){Ext.ux.form.FileUploadField.superclass.onResize.call(this,a,b);this.wrap.setWidth(a);if(!this.buttonOnly){var a=this.wrap.getWidth()-this.button.getEl().getWidth()-this.buttonOffset;this.el.setWidth(a)}},onDestroy:function(){Ext.ux.form.FileUploadField.superclass.onDestroy.call(this);Ext.destroy(this.fileInput,this.button,this.wrap)},onDisable:function(){Ext.ux.form.FileUploadField.superclass.onDisable.call(this);this.doDisable(true)},onEnable:function(){Ext.ux.form.FileUploadField.superclass.onEnable.call(this);this.doDisable(false)},doDisable:function(a){this.fileInput.dom.disabled=a;this.button.setDisabled(a)},preFocus:Ext.emptyFn,alignErrorIcon:function(){this.errorIcon.alignTo(this.wrap,"tl-tr",[2,0])}});Ext.reg("fileuploadfield",Ext.ux.form.FileUploadField);Ext.form.FileUploadField=Ext.ux.form.FileUploadField;
/*
 * Ext JS Library 3.4.0
 * Copyright(c) 2006-2011 Sencha Inc.
 * licensing@sencha.com
 * http://www.sencha.com/license
 */
Ext.namespace("Ext.ux");Ext.ux.StartMenu=Ext.extend(Ext.menu.Menu,{initComponent:function(a){Ext.ux.StartMenu.superclass.initComponent.call(this,a);var b=this.toolItems;this.toolItems=new Ext.util.MixedCollection();if(b){this.addTool.apply(this,b)}},onRender:function(g,f){Ext.ux.StartMenu.superclass.onRender.call(this,g,f);var a=this.el.addClass("ux-start-menu");var d=a.createChild({tag:"div",cls:"x-window-header x-unselectable x-panel-icon"});this.header=d;this.headerIcon=d.createChild({tag:"image",cls:"x-window-header-icon",src:this.icon?this.icon:Ext.BLANK_IMAGE_URL});var e=d.createChild({tag:"span",cls:"x-window-header-text"});var o=d.wrap({cls:"ux-start-menu-tl"});var k=d.wrap({cls:"ux-start-menu-tr"});var b=d.wrap({cls:"ux-start-menu-tc"});this.menuBWrap=a.createChild({tag:"div",cls:"x-window-body x-border-layout-ct ux-start-menu-body"});var c=this.menuBWrap.wrap({cls:"ux-start-menu-ml"});var l=this.menuBWrap.wrap({cls:"x-window-mc ux-start-menu-bwrap"});this.menuPanel=this.menuBWrap.createChild({tag:"div",cls:"x-panel x-border-panel ux-start-menu-apps-panel"});this.toolsPanel=this.menuBWrap.createChild({tag:"div",cls:"x-panel x-border-panel ux-start-menu-tools-panel"});var j=c.wrap({cls:"x-window-bwrap"});var i=j.createChild({tag:"div",cls:"ux-start-menu-bc"});this.bl=i.wrap({cls:"ux-start-menu-bl x-panel-nofooter"});var n=i.wrap({cls:"ux-start-menu-br"});this.ul.appendTo(this.menuPanel);var m=this.toolsPanel.createChild({tag:"ul",cls:"x-menu-list"});this.mon(m,"click",this.onClick,this);this.mon(m,"mouseover",this.onMouseOver,this);this.mon(m,"mouseout",this.onMouseOut,this);this.items.each(function(p){p.parentMenu=this},this);this.toolItems.each(function(q){var p=document.createElement("li");p.className="x-menu-list-item";m.dom.appendChild(p);q.render(p);q.parentMenu=this},this);this.toolsUl=m;this.menuBWrap.setStyle("position","relative");this.menuPanel.setStyle({padding:"2px",position:"absolute",overflow:"auto"});this.toolsPanel.setStyle({padding:"2px 4px 2px 2px",position:"absolute",overflow:"auto"});this.setTitle(this.title,this.iconCls);this.menuBWrap.setHeight(this.height-(this.header.getHeight()+this.bl.getHeight()))},findTargetItem:function(b){var a=b.getTarget(".x-menu-list-item",this.ul,true);if(a&&a.menuItemId){if(this.items.get(a.menuItemId)){return this.items.get(a.menuItemId)}else{return this.toolItems.get(a.menuItemId)}}},show:function(b,e,a){this.parentMenu=a;if(!this.el){this.render()}this.fireEvent("beforeshow",this);this.showAt(this.el.getAlignToXY(b,e||this.defaultAlign),a,false);var d=100;var c=this.menuBWrap.getBox();this.menuPanel.setWidth(c.width-d);this.menuPanel.setHeight(c.height);this.toolsPanel.setWidth(d);this.toolsPanel.setX(c.x+c.width-d);this.toolsPanel.setHeight(c.height)},addTool:function(){var c=arguments,b=c.length,f;for(var d=0;d<b;d++){var e=c[d];if(e.render){f=this.addToolItem(e)}else{if(typeof e=="string"){if(e=="separator"||e=="-"){f=this.addToolSeparator()}else{f=this.addText(e)}}else{if(e.tagName||e.el){f=this.addElement(e)}else{if(typeof e=="object"){f=this.addToolMenuItem(e)}}}}}return f},addToolSeparator:function(){return this.addToolItem(new Ext.menu.Separator({itemCls:"ux-toolmenu-sep"}))},addToolMenuItem:function(a){if(!(a instanceof Ext.menu.Item)){if(typeof a.checked=="boolean"){a=new Ext.menu.CheckItem(a)}else{a=new Ext.menu.Item(a)}}return this.addToolItem(a)},addToolItem:function(b){this.toolItems.add(b);if(this.toolsUl){var a=this.toolsUl.createChild({tag:"li",cls:"x-menu-list-item"});b.render(a);b.parentMenu=this}return b},insertToolItem:function(b,d){this.toolItems.insert(b,d);if(this.toolsUl){var c=this.toolsUl.down("li:nth-child("+b+")"),a=this.toolsUl.createChild({tag:"li",cls:"x-menu-list-item"},c?c:null);d.render(a);d.parentMenu=this}return d},adjustMenuHeight:function(){this.menuBWrap.setHeight(this.height-(this.header.getHeight()+this.bl.getHeight()));var a=this.menuBWrap.getBox();this.menuPanel.setHeight(a.height);this.toolsPanel.setHeight(a.height)},setTitle:function(b,a){b=b?Ext.util.Format.trim(b):"";this.header.child("span").update(b);this.title=b;if(Ext.isDefined(a)){this.setTitleIconCls(a)}return this},setTitleIconCls:function(a){this.header.replaceClass(this.iconCls,a);this.iconCls=a;return this},setTitleIcon:function(a){this.icon=a?a:Ext.BLANK_IMAGE_URL;this.headerIcon.set({src:this.icon})}});Ext.namespace("afStudio.common");afStudio.common.ModelsComboBox=Ext.extend(Ext.form.ComboBox,{url:afStudioWSUrls.modelListUrl,autoLoad:true,valueField:"text",displayField:"text",typeAhead:true,emptyText:"Select model...",blankText:"Model is required",msgTarget:"qtip",mode:"local",forceSelection:true,fieldLabel:"Model",initComponent:function(){var b=[this.valueField,this.displayField];var a={cmd:"get"};this.store=new Ext.data.JsonStore({url:this.url,autoLoad:this.autoLoad,baseParams:a,idProperty:this.valueField,fields:b,sortInfo:{field:this.displayField,direction:"ASC"}});afStudio.common.ModelsComboBox.superclass.initComponent.apply(this,arguments)}});Ext.reg("common.modelscombo",afStudio.common.ModelsComboBox);Ext.namespace("afStudio.common");afStudio.common.WidgetLocation=Ext.extend(Ext.ux.form.GroupingComboBox,{url:afStudioWSUrls.moduleGroupedUrl,autoLoad:true,groupField:"group",typeField:"type",valueField:"value",displayField:"text",allowBlank:false,emptyText:"Please select widget location...",blankText:"Widget location is required",msgTarget:"qtip",mode:"local",forceSelection:true,fieldLabel:"Widget Location",loadingText:"Please wait...",invalidText:'Location module accepts only alphanumeric symbols and "_", beginning from alphanumeric.',validator:function(a){return/^([A-Za-z\d]\w*)?$/im.test(a)?true:""},initComponent:function(){var b=[this.valueField,this.displayField,this.groupField,this.typeField];var a={};if(Ext.isDefined(this.locationType)){a.type=this.locationType}this.store=new Ext.data.JsonStore({url:this.url,autoLoad:this.autoLoad,baseParams:a,root:"data",idProperty:this.valueField,fields:b,sortInfo:{field:this.typeField?this.typeField:this.groupField,direction:"ASC"}});afStudio.common.WidgetLocation.superclass.initComponent.call(this)},getValue:function(){var c=afStudio.common.WidgetLocation.superclass.getValue.call(this),e=null;if(!Ext.isEmpty(c)&&this.store.getById(c)){var a=this.store.getById(c),b=a.get(this.groupField),d=a.get(this.typeField);e={"module":c,"place":b,"placeType":d}}else{if(!Ext.isEmpty(c)){e=c}}return e}});Ext.reg("common.widgetlocation",afStudio.common.WidgetLocation);Ext.namespace("afStudio.common");afStudio.common.ModelsTree=Ext.extend(Ext.tree.TreePanel,{url:afStudioWSUrls.modelListUrl,_beforeInitComponent:function(){var e=this;var c=new Ext.tree.AsyncTreeNode({path:"root",text:"ModelRoot",draggable:false});var d=[{id:"refresh",handler:Ext.util.Functions.createDelegate(e.refreshModels,e)}];var b=new Ext.tree.TreeLoader({url:this.modelsUrl||this.url,baseParams:{cmd:"get"}});var a=new Ext.tree.TreeSorter(this,{dir:"asc"});return{title:"Models",iconCls:"icon-databases",loader:b,treeSorter:a,autoScroll:true,root:c,rootVisible:false,tools:d}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.common.ModelsTree.superclass.initComponent.apply(this,arguments);this._afterInitComponent()},_afterInitComponent:function(){var a=this;a.addEvents("modelsload")},onRender:function(){var a=this;afStudio.common.ModelsTree.superclass.onRender.apply(this,arguments);a.on({scope:a,dblclick:a.onModelDbClick});a.loader.on({scope:a,beforeload:a.onLoaderBeforeLoad,load:a.onLoaderLoad,loadexception:a.onLoaderLoadException});a.el.on("contextmenu",function(){return false},null,{stopEvent:true});a.root.expand()},maskModelsTree:function(a){this.body.mask(a?a:"loading...","x-mask-loading")},unmaskModelsTree:function(){this.body.unmask()},selectModel:function(a){this.selectPath(a.getPath())},findModelByName:function(a){return this.getRootNode().findChild("text",a)},reloadModels:function(a){if(Ext.isFunction(a)){this.getRootNode().reload(a)}else{this.getRootNode().reload()}},refreshModels:function(d,b,c,a){this.reloadModels()},getSchema:function(a){return a.attributes.schema||undefined},getModel:function(a){return a.text},onModelClick:function(a,b){},onModelDbClick:Ext.emptyFn,onLoaderBeforeLoad:function(a,b,c){this.maskModelsTree()},onLoaderLoad:function(a,c,b){this.unmaskModelsTree();this.fireEvent("modelsload",a,b)},onLoaderLoadException:function(a,c,b){this.unmaskModelsTree()}});Ext.reg("afStudio.common.modelsTree",afStudio.common.ModelsTree);Ext.namespace("afStudio.common");afStudio.common.ModelFieldsGrid=Ext.extend(Ext.grid.GridPanel,{url:afStudioWSUrls.modelListUrl,autoLoadData:false,multiSelect:false,loadMask:true,border:false,autoScroll:true,autoExpandColumn:"name",_beforeInitComponent:function(){var c=this;var b=new Ext.data.JsonStore({url:c.url,autoLoad:c.autoLoadData,baseParams:{xaction:"read"},root:"data",idProperty:"id",fields:["id","name","type","size","required"]});var a=[{header:"Name",id:"name",sortable:true,dataIndex:"name"},{header:"Type",width:110,sortable:true,align:"center",dataIndex:"type"},{header:"Size",width:44,sortable:true,align:"right",dataIndex:"size"}];var d=null;if(c.multiSelect===true){d=new Ext.grid.CheckboxSelectionModel();a.unshift(d)}else{d=new Ext.grid.RowSelectionModel({singleSelect:true})}return{store:b,selModel:d,columns:a}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.common.ModelFieldsGrid.superclass.initComponent.call(this)}});Ext.reg("common.mfieldsgrid",afStudio.common.ModelFieldsGrid);afStudio.CreateProjectWizard=Ext.extend(Ext.Window,{initComponent:function(){this.initForm1();this.initForm2();this.initForm3();this.initForm4();var a={title:"Your new Project",width:493,closable:true,draggable:true,plain:true,modal:true,resizable:false,bodyBorder:false,border:false,items:[this.form1,this.form2,this.form3,this.form4],buttons:[{text:"Previous",handler:this.previous,scope:this,hidden:true},{text:"Next",handler:this.next,scope:this},{text:"Save Project",handler:this.save,scope:this,hidden:true}],buttonAlign:"right",listeners:{show:function(){for(var b in this.dataview.store.data.items){if(this.dataview.store.data.items[b].json&&afTemplateConfig.template.current==this.dataview.store.data.items[b].json[1].toLowerCase()){this.dataview.selectRange(b,b)}}}}};Ext.apply(this,Ext.apply(this.initialConfig,a));afStudio.CreateProjectWizard.superclass.initComponent.apply(this,arguments)},initForm1:function(){_self=this;var a=[{xtype:"displayfield",name:"infor",hideLabel:true,anchor:"100%",value:'<div  class="guide_header"> <div class="date_cover"> <div>01</div> </div> <h2>This wizard will help guide you through a few steps to setup your new AppFlower Project.</h2> </div> <br> Please choose your project name.',style:"margin-bottom: 15px;"},{xtype:"textfield",enableKeyEvents:true,fieldLabel:"Project name<font color=red>*</font>",anchor:"96%",name:"name",allowBlank:false,vtype:"uniqueNode",listeners:{keyup:function(c,b){var d=c.getValue()}}}];this.form1=new Ext.FormPanel({url:"",defaultType:"textfield",width:480,labelWidth:70,frame:true,title:false,defaults:{allowBlank:false,anchor:"95%"},items:a})},initForm2:function(){_self=this;this.initDataview();var a=[{xtype:"displayfield",name:"infor",hideLabel:true,anchor:"100%",value:'<div  class="guide_header"> <div class="date_cover"> <div>02</div> </div> <h2>Please select how your want your application theme to look like by selecting one of the templates below.</h2> </div>',style:"margin-bottom: 15px;"},this.dataview];this.form2=new Ext.FormPanel({url:"",defaultType:"textfield",width:480,labelWidth:70,frame:true,title:false,hidden:true,defaults:{allowBlank:false,anchor:"95%"},items:a})},initDataview:function(){var b=[["desktoptemplate","Desktop","template_desktop.png"],["viewporttemplate","Viewport","template_viewport.png"]];var a=new Ext.data.SimpleStore({fields:[{name:"id"},{name:"name"},{name:"img"}],sortInfo:{field:"name",direction:"ASC"}});a.loadData(b);this.dataview=new Ext.DataView({itemSelector:"div.thumb-wrap",style:"overflow:auto",multiSelect:true,store:a,tpl:new Ext.XTemplate('<tpl for=".">','<div class="thumb-wrap" id="{id}">','<div class="thumb"><img src="appFlowerStudioPlugin/images/{img}"></div>',"<span>{name}</span></div>","</tpl>")})},initForm3:function(){var a=[{xtype:"displayfield",name:"infor",hideLabel:true,anchor:"100%",value:'<div  class="guide_header"> <div class="date_cover"> <div>03</div> </div> <h2>Please add your first user for this new project.</h2> </div>',style:"margin-bottom: 15px;"},{xtype:"panel",layout:"column",border:false,bodyBorder:false,defaults:{border:false,bodyBorder:false},items:[{xtype:"panel",columnWidth:0.5,layout:"form",style:"margin-right: 5px;",items:[{xtype:"textfield",name:"first_name",fieldLabel:"First Name<font color=red>*</font>",value:afStudioUser.first_name,allowBlank:false,anchor:"92%"}]},{xtype:"panel",layout:"form",columnWidth:0.5,items:[{xtype:"textfield",name:"last_name",fieldLabel:"Last Name<font color=red>*</font>",value:afStudioUser.last_name,allowBlank:false,anchor:"92%"}]},{xtype:"panel",columnWidth:0.5,layout:"form",style:"margin-right: 5px;",items:[{xtype:"textfield",name:"username",fieldLabel:"Username<font color=red>*</font>",value:afStudioUser.username,allowBlank:false,vtype:"username",anchor:"92%"}]},{xtype:"panel",layout:"form",columnWidth:0.5,items:[{xtype:"textfield",name:"email",fieldLabel:"Email<font color=red>*</font>",vtype:"email",value:afStudioUser.email,allowBlank:false,anchor:"92%"}]},{xtype:"panel",columnWidth:0.5,layout:"form",style:"margin-right: 5px;",items:[{xtype:"textfield",name:"password",inputType:"password",fieldLabel:"Password<font color=red>*</font>",allowBlank:false,anchor:"92%"}]},{xtype:"panel",layout:"form",columnWidth:0.5,items:[{xtype:"textfield",name:"repassword",inputType:"password",fieldLabel:"Retype Password<font color=red>*</font>",allowBlank:false,vtype:"checkPassword",anchor:"92%"}]}]}];this.form3=new Ext.FormPanel({url:"",defaultType:"textfield",width:480,labelWidth:70,frame:true,title:false,hidden:true,defaults:{allowBlank:false,anchor:"100%"},items:a})},initForm4:function(){var a=[{xtype:"displayfield",name:"infor",hideLabel:true,anchor:"100%",style:"margin-bottom: 15px;"}];this.form4=new Ext.FormPanel({url:"",defaultType:"textfield",width:480,labelWidth:70,frame:true,title:false,hidden:true,defaults:{allowBlank:false,anchor:"95%"},items:a})},currentItem:0,next:function(){if(this.items.get(this.currentItem).getForm().isValid()){if(this.currentItem==2){var a=this.form1.getForm().findField("name").getValue();var b='<div  class="guide_header">    <div class="date_cover">        <div>04</div>    </div>    <h2>To connect to your new project from your browser,        you need to ensure your web server is configured to serve the new web project.    </h2></div><br><p>In Apache, this is usually done with the usage of Virtual Hosts.<br /> This can be configured in your Apache Configuration file.<br />This way, you\'ll have direct access to your new project, from your browser.<br />For more instructions on how to configure your apache virtual host - please refer to <a href="http://www.appflower.com/cms/learningcenter" target="_blank">online documentation</a>.</p>';b+="<br /><p><i><b>Create Project Wizard</b> will try to set up Apache virtual host automatically for you.</i></p>";this.form4.getForm().findField("infor").update(b)}this.nextForm()}},nextForm:function(){this.items.get(this.currentItem).hide();this.currentItem++;this.items.get(this.currentItem).show();this.setWindowTitle()},previous:function(){this.items.get(this.currentItem).hide();this.currentItem--;this.items.get(this.currentItem).show();this.setWindowTitle()},save:function(){var c=this;var a=new Ext.LoadMask(this.getEl(),{msg:"<b>Creating new project</b> <br>Please wait..",removeMask:true});a.show();var b=this.form1.getForm().findField("name").getValue();Ext.Ajax.request({url:Ext.urlAppend(afStudioWSUrls.project,Ext.urlEncode({cmd:"saveWizard"})),params:{name:b,template:this.dataview.getSelectedRecords()[0].get("name").toLowerCase(),userForm:Ext.encode(this.form3.getForm().getValues()),},success:function(d,e){var f=Ext.decode(d.responseText);if(f.success){afStudio.Msg.info(f.message)}else{afStudio.Msg.error(f.message)}afStudio.updateConsole(f.console);a.hide();c.close()}})},setWindowTitle:function(){switch(this.currentItem){case 0:this.setTitle("Create New Project");this.buttons[0].hide();break;case 1:this.setTitle("Select Project's Template");this.buttons[1].show();this.buttons[2].hide();break;case 2:this.setTitle("Create Your New Studio User");this.buttons[1].show();this.buttons[2].hide();break;case 3:this.setTitle("Setup A Virtual Host");this.buttons[1].hide();this.buttons[2].show();break}this.center()}});afStudio.databaseConnectionSettings=Ext.extend(Ext.Window,{form:null,initComponent:function(){this.createForm();var a={title:"Database Connection Settings",width:463,autoHeight:true,closable:true,draggable:true,plain:true,modal:true,resizable:false,bodyBorder:false,border:false,items:this.form,buttons:[{text:"Save",handler:this.saveDatabaseSettings,scope:this},{text:"Cancel",handler:this.cancel,scope:this}],buttonAlign:"center"};Ext.apply(this,Ext.apply(this.initialConfig,a));afStudio.databaseConnectionSettings.superclass.initComponent.apply(this,arguments);this.show()},createForm:function(){this.form=new Ext.FormPanel({url:window.afStudioWSUrls.getConfigureDatabaseUrl(),defaultType:"textfield",width:450,frame:true,labelWidth:100,title:false,items:[{xtype:"textfield",fieldLabel:"Database",anchor:"96%",name:"database",allowBlank:false},{xtype:"panel",layout:"column",items:[{xtype:"panel",columnWidth:1,layout:"form",style:"margin-right: 5px;",items:[{xtype:"textfield",fieldLabel:"Host",name:"host",anchor:"92%",allowBlank:false}]},{xtype:"panel",width:100,layout:"form",labelWidth:35,items:[{xtype:"textfield",fieldLabel:"Port",name:"port",anchor:"82%",allowBlank:false}]}]},{xtype:"textfield",fieldLabel:"Username",anchor:"96%",name:"username",allowBlank:false},{xtype:"textfield",fieldLabel:"Password",anchor:"96%",name:"password",allowBlank:false},{xtype:"checkbox",hideLabel:true,boxLabel:"Persistent",name:"persistent"},{xtype:"checkbox",hideLabel:true,boxLabel:"Pooling",name:"pooling"}]});this.form.getForm().load({url:window.afStudioWSUrls.getLoadDatabaseConnectionSettingsUrl(),failure:function(a,b){Ext.Msg.alert("Load failed","Error while getting data")}})},saveDatabaseSettings:function(){var a=this.form.getForm();if(a.isValid()){a.submit({failure:function(b,c){if(c.result){if(c.result.message){Ext.Msg.alert("Failure",c.result.message,function(){if(c.result.redirect){window.location.href=c.result.redirect}})}}},success:function(b,c){if(c.result){if(c.result.message){Ext.Msg.alert("Success",c.result.message,function(){if(c.result.redirect){window.location.href=c.result.redirect}})}}}})}},cancel:function(){this.close()}});afStudio.Help=Ext.extend(Ext.Window,{form:null,initComponent:function(){var a={title:"Help",width:990,height:600,closable:true,draggable:true,maximizable:true,plain:true,modal:true,bodyBorder:false,border:false,html:String.format('<iframe style="height: 100%; width: 100%;" frameborder=0 src="{0}" id="help-iframe" />',afStudioWSUrls.helpUrl),buttons:[{text:"Cancel",scope:this,handler:this.cancel}],buttonAlign:"center"};Ext.apply(this,Ext.apply(this.initialConfig,a));afStudio.Help.superclass.initComponent.apply(this,arguments);this._initEvents()},_initEvents:function(){this.on("show",function(a){Ext.get("help-iframe").on("load",function(){a.body.unmask()});(function(){a.body.mask("Loading, please Wait...","x-mask-loading")}).defer(100)})},cancel:function(){this.close()}});afStudio.Welcome=Ext.extend(Ext.Window,{initComponent:function(){var a={title:"Welcome to AppFlower Studio",width:810,height:520,closable:true,draggable:true,plain:true,modal:true,resizable:false,bodyBorder:false,border:false,html:'<div id="welcome-box" />',buttonAlign:"left",buttons:[{xtype:"checkbox",boxLabel:"Show this window when Studio opens",checked:true,handler:function(b,d){if(d){Ext.util.Cookies.set("appFlowerStudioDontShowWelcomePopup","")}else{Ext.util.Cookies.set("appFlowerStudioDontShowWelcomePopup","true",new Date("12/22/2099"))}}}]};Ext.apply(this,Ext.apply(this.initialConfig,a));afStudio.Welcome.superclass.initComponent.apply(this,arguments);this.updateWelcomeData()},updateWelcomeData:function(){afStudio.xhr.executeAction({url:afStudioWSUrls.welcomeWinUrl,showNoteOnSuccess:false,mask:{cnt:this},scope:this,run:function(a){if(this.isVisible()){Ext.get("welcome-box").update(a.data);jQuery("a[rel^='prettyPhoto']").prettyPhoto();setTimeout(function(){jQuery("#studio_video_tours ul").jScrollPane()},500)}}})}});afStudio.Settings=Ext.extend(Ext.Window,{dbForm:null,tabPanel:null,projectForm:null,initComponent:function(){this.initTabPanel();var a={title:"Settings",width:463,height:250,closable:true,draggable:true,plain:true,modal:true,resizable:false,bodyBorder:false,border:false,layout:"fit",items:this.tabPanel,buttons:[{text:"Save",handler:this.save,scope:this},{text:"Cancel",handler:this.cancel,scope:this}],buttonAlign:"center"};Ext.apply(this,Ext.apply(this.initialConfig,a));afStudio.Settings.superclass.initComponent.apply(this,arguments)},initTabPanel:function(){this.createTabsUI();this.tabPanel=new Ext.TabPanel({activeTab:0,items:[{xtype:"panel",title:"Project",formName:"projectForm",items:this.projectForm},{xtype:"panel",title:"Database",formName:"dbForm",items:this.dbForm}]})},createTabsUI:function(){this.projectForm=new Ext.FormPanel({url:afStudioWSUrls.configureProjectUrl+"?type=save",bodyStyle:"padding: 5px;",labelWidth:140,border:false,bodyBorder:false,listeners:{"render":function(a){a.getForm().load({url:afStudioWSUrls.configureProjectUrl,failure:function(b,c){Ext.Msg.alert("Load failed","Error while getting data")}})},scope:this},items:[{xtype:"textfield",name:"name",fieldLabel:"Project Name",anchor:"95%",allowBlank:false},{xtype:"displayfield",name:"display_url",fieldLabel:"Url",anchor:"95%",style:"font-weight:bold;"},{xtype:"displayfield",name:"path",fieldLabel:"Path to Project",anchor:"95%",style:"font-weight:bold;"},{xtype:"label",html:"Description:",style:"font: 12px tahoma,arial,helvetica,sans-serif;"},{xtype:"textarea",hideLabel:true,anchor:"100%",name:"description",height:57,style:"margin-top: 5px;"},{xtype:"checkbox",hideLabel:true,boxLabel:"Auto-Deploy on Save",name:"autodeploy"}]});this.dbForm=new Ext.FormPanel({url:window.afStudioWSUrls.getConfigureDatabaseUrl(),defaultType:"textfield",width:450,bodyStyle:"padding: 5px;",border:false,bodyBorder:false,labelWidth:100,title:false,listeners:{"render":function(a){a.getForm().load({url:window.afStudioWSUrls.getLoadDatabaseConnectionSettingsUrl(),failure:function(b,c){Ext.Msg.alert("Load failed","Error while getting data")}})},scope:this},items:[{xtype:"textfield",fieldLabel:"Database",anchor:"96%",name:"database",allowBlank:false,vtype:"database"},{xtype:"panel",layout:"column",border:false,bodyBorder:false,defaults:{border:false,bodyBorder:false},items:[{xtype:"panel",columnWidth:1,layout:"form",style:"margin-right: 5px;",items:[{xtype:"textfield",fieldLabel:"Host",name:"host",anchor:"92%",allowBlank:false,vtype:"host"}]},{xtype:"panel",width:100,layout:"form",labelWidth:35,items:[{xtype:"textfield",fieldLabel:"Port",name:"port",anchor:"82%",allowBlank:true,vtype:"port"}]}]},{xtype:"textfield",fieldLabel:"Username",anchor:"96%",name:"username",allowBlank:false,vtype:"alphanum"},{xtype:"textfield",fieldLabel:"Password",anchor:"96%",name:"password",allowBlank:false,vtype:"alphanum"},{xtype:"checkbox",hideLabel:true,boxLabel:"Persistent",name:"persistent"},{xtype:"checkbox",hideLabel:true,boxLabel:"Pooling",name:"pooling"}]})},save:function(){var a=this.tabPanel.getActiveTab();switch(a.formName){case"projectForm":var b=this.projectForm.getForm();break;case"dbForm":var b=this.dbForm.getForm();break}if(b.isValid()){b.submit({failure:function(c,d){if(d.result){if(d.result.message){Ext.Msg.alert("Failure",d.result.message,function(){if(d.result.redirect){window.location.href=d.result.redirect}})}}},success:function(c,d){if(d.result){if(d.result.message){Ext.Msg.alert("Success",d.result.message,function(){if(d.result.redirect){window.location.href=d.result.redirect}})}}}})}},cancel:function(){this.close()}});Ext.apply(Ext.form.VTypes,{uniqueNode:function(a,b){return true},uniqueNodeText:"Path to Project already exist! Please choose another Project Name!",checkPassword:function(a,b){if(b.ownerCt.ownerCt.ownerCt.getForm().findField("password").getValue()!=a){return false}return true},checkPasswordText:"Retype Password value does not match Password value",database:function(a,b){return/^[a-zA-Z0-9_\-]+$/.test(a)},databaseText:"Database should only contain letters, numbers, _, -",databaseMask:/[a-z0-9_\-]/i,host:function(a,b){return/^[a-zA-Z0-9_\-\.]+$/.test(a)},hostText:"Host should only contain letters, numbers, dots, _, -",hostMask:/[a-z0-9_\-\.]/i,port:function(a,b){return/^[0-9]+$/.test(a)},portText:"Port should only contain numbers",portMask:/[0-9]/i,username:function(a,b){return/^[a-zA-Z0-9_\-\.]+$/.test(a)},usernameText:"Username should only contain letters, numbers, dots, _, -",usernameMask:/[a-z0-9_\-\.]/i});Ext.namespace("afStudio.error");afStudio.error.ApsError=Ext.extend(Ext.Error,{name:"afStudio.error.ApsError"});Ext.namespace("afStudio.notification");afStudio.notification.NotificationMgr={positions:[],heights:[]};afStudio.notification.NotificationWindow=Ext.extend(Ext.Window,{initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,{closeAction:"close",plain:false,shadow:false,draggable:false,bodyStyle:"text-align: left; padding: 10px;",resizable:false}));if(this.autoDestroy){this.task=new Ext.util.DelayedTask(this.close,this)}else{this.closable=true}afStudio.notification.NotificationWindow.superclass.initComponent.call(this)},setMessage:function(a){this.body.update(a)},afterShow:function(){afStudio.notification.NotificationWindow.superclass.afterShow.call(this);this.on("move",function(){afStudio.notification.NotificationMgr.positions.remove(this.pos);if(this.autoDestroy){this.task.cancel()}},this);if(this.autoDestroy){this.task.delay(this.hideDelay||5000)}},animShow:function(){var a=afStudio.notification.NotificationMgr,b=0;this.pos=0;while(a.positions.indexOf(this.pos)>-1){b+=a.heights[this.pos];this.pos++}a.positions.push(this.pos);a.heights[this.pos]=this.getSize().height+10;this.el.alignTo(this.animateTarget||document,"br-br",[-5,-5-(b)]);this.el.slideIn("b",{duration:0.7,callback:this.afterShow,scope:this})},animHide:function(){afStudio.notification.NotificationMgr.positions.remove(this.pos);if(this.el){this.el.ghost("b",{duration:1,remove:false})}},onDestroy:function(){afStudio.notification.NotificationMgr.positions.remove(this.pos);afStudio.notification.NotificationWindow.superclass.onDestroy.call(this)}});afStudio.notification.MessageBox=function(){var a=function(b){b=Ext.apply({width:340,animateTarget:Ext.getBody(),autoScroll:true,autoDestroy:false,notificationType:"INFO"},b||{});var c=new afStudio.notification.NotificationWindow(b);switch(c.notificationType){case"ERROR":c.iconCls="icon-notification-error";c.bodyStyle+="background-color: #fddcdc;";break;case"WARNING":c.iconCls="icon-notification-warning";c.bodyStyle+="background-color: #fefcc7;";break;case"INFO":c.iconCls="icon-notification-info";c.bodyStyle+="background-color: #fff;";break}c.bodyStyle+="padding-bottom: 20px;";c.show();return c};return{DURATION:10000,INFO:"INFO",WARNING:"WARNING",ERROR:"ERROR",notify:function(d,f,e,c){c=c||{};var b=a(Ext.apply(c,{notificationType:d,title:f,html:e}));if(d!=this.ERROR){b.close.defer(this.DURATION,b)}},info:function(){var c,b;if(arguments.length==1){c="Notification";b=arguments[0]}else{c=arguments[0];b=arguments[1]}this.notify(this.INFO,c,b)},warning:function(){var c,b;if(arguments.length==1){c="Warning";b=arguments[0]}else{c=arguments[0];b=arguments[1]}this.notify(this.WARNING,c,b)},error:function(){var c,b;if(arguments.length==1){c="Error";b=arguments[0]}else{c=arguments[0];b=arguments[1]}this.notify(this.ERROR,c,b)}}}();afStudio.Msg=afStudio.notification.MessageBox;Ext.namespace("afStudio.cli");afStudio.cli.CommandLine=Ext.extend(Ext.Panel,{autoScroll:true,bodyStyle:"background-color: black; font-family: monospace; font-size: 11px; color: #88ff88;",constructor:function(a){Ext.apply(this,a);afStudio.cli.CommandLine.superclass.constructor.call(this,a)},afterRender:function(){afStudio.cli.CommandLine.superclass.afterRender.call(this);this.cliWrapper=this.ownerCt;this.on({scope:this,afterrender:this.onCliAfterRender})},maskCli:function(a){this.el.mask(a?a:"loading...")},unmaskCli:function(){this.el.unmask()},scrollCliDown:function(a){a=a?a:1000000;this.body.scroll("bottom",a,true)},onCliAfterRender:Ext.emptyFn,loadCli:Ext.emptyFn,refreshCli:function(){this.loadCli()},setCli:Ext.emptyFn,updateCli:Ext.emptyFn,clearCli:Ext.emptyFn,executeAction:function(a){var b=this;this.maskCli(a.loadingMessage?a.loadingMessage:false);Ext.Ajax.request({url:a.url,params:a.params,scope:a.scope?a.scope:b,success:function(g,e){this.unmaskCli();var d=Ext.decode(g.responseText);if(d.success){Ext.util.Functions.createDelegate(a.run,this,[d],false)()}else{if(Ext.isFunction(a.error)){Ext.util.Functions.createDelegate(a.error,this,[d],false)()}var f=d.content||d.message||"Operation was successfully processed!",c=this.cliWrapper.title||"";afStudio.Msg.error(c,f)}},failure:function(f,d){this.unmaskCli();if(Ext.isFunction(a.error)){Ext.util.Functions.createDelegate(a.error,this,[f],false)()}var e=String.format("Status code: {0}, message: {1}",f.status,f.statusText),c=String.format("Server Error {0}",this.cliWrapper.title||"");afStudio.Msg.error(c,e)}})},commandFixPermissions:Ext.emptyFn,commandDisplayVersion:Ext.emptyFn,commandAutoGenerateWidgets:Ext.emptyFn,commandClearCache:Ext.emptyFn,commandBuildSQL:Ext.emptyFn,commandInsertSQL:Ext.emptyFn,commandBuildClasses:Ext.emptyFn,commandSQLDiff:Ext.emptyFn,commandCheckModelIntegrity:Ext.emptyFn,commandCheckWidgetIntegrity:Ext.emptyFn,commandSecurityScan:Ext.emptyFn});Ext.namespace("afStudio.cli");afStudio.cli.AuditLog=Ext.extend(afStudio.cli.CommandLine,{baseUrl:afStudioWSUrls.notificationUrl,notificationOffset:0,_beforeInitComponent:function(){var a=this;return{html:""}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.cli.AuditLog.superclass.initComponent.apply(this,arguments)},loadCli:function(){this.executeAction({url:this.baseUrl,params:{cmd:"get",offset:this.notificationOffset},run:function(a){this.notificationOffset=a.data.offset;this.updateCli(a.data.notifications)}})},updateCli:function(a){if(Ext.isString(a)&&a){this.body.dom.innerHTML+=a;this.scrollCliDown()}}});Ext.reg("afStudio.cli.auditLog",afStudio.cli.AuditLog);Ext.namespace("afStudio.cli");afStudio.cli.Console=Ext.extend(afStudio.cli.CommandLine,{baseUrl:afStudioWSUrls.getConsoleUrl(),consoleCommands:afStudioConsoleCommands,_beforeInitComponent:function(){var b=this;var a=new Ext.Toolbar({items:["Enter command:",{xtype:"tbspacer",width:5},{xtype:"textfield",itemId:"cml",width:300,enableKeyEvents:true},{xtype:"tbspacer",width:10},{xtype:"tbbutton",text:"Commands",menu:[{text:"App",menu:{xtype:"menu",items:[{text:"Fix permissions",handler:function(){b.commandFixPermissions()}},{text:"Display Version",handler:function(){b.commandDisplayVersion()}}]}},{text:"Cache",menu:{xtype:"menu",items:[{text:"Clear Cache",handler:function(){b.commandClearCache()}}]}},{text:"Model",menu:{xtype:"menu",items:[{text:"Build SQL",handler:function(){b.commandBuildSQL()}},{text:"Insert SQL",handler:function(){b.commandInsertSQL()}},{text:"Build Classes",handler:function(){b.commandBuildClasses()}},{text:"SQL Diff",handler:function(){b.commandSQLDiff()}}]}},{text:"Test & Benchmarking",menu:{xtype:"menu",items:[{text:"Check Widget Integrity",handler:function(){b.commandCheckWidgetIntegrity()}}]}}]},{xtype:"tbspacer",width:10},{xtype:"tbtext",text:"<b>cmds:</b> "+b.consoleCommands}]});this.consoleCmdLine=a.getComponent("cml");return{tbar:a,html:""}},commandFixPermissions:function(){var a=this;this.executeAction({url:a.baseUrl,params:{command:"symfony project:permissions; symfony afs:fix-perms"},run:function(b){this.updateCli(b.console)}})},commandDisplayVersion:function(){var a=this;this.executeAction({url:a.baseUrl,params:{command:"symfony afs:version"},run:function(b){this.updateCli(b.console)}})},commandAutoGenerateWidgets:function(){var a=this;this.executeAction({url:a.baseUrl,params:{command:"symfony afs:generate-widget-all"},run:function(b){this.updateCli(b.console)}})},commandClearCache:function(){var a=this;this.executeAction({url:a.baseUrl,params:{command:"symfony cc; symfony appflower:validator-cache frontend cache"},run:function(b){this.updateCli(b.console)}})},commandBuildSQL:function(){var a=this;this.executeAction({url:a.baseUrl,params:{command:"symfony propel:build-sql"},run:function(b){this.updateCli(b.console)}})},commandInsertSQL:function(){var a=this;this.executeAction({url:a.baseUrl,params:{command:"symfony propel:insert-sql --no-confirmation"},run:function(b){this.updateCli(b.console)}})},commandBuildClasses:function(){var a=this;this.executeAction({url:a.baseUrl,params:{command:"symfony propel:build-model"},run:function(b){this.updateCli(b.console)}})},commandSQLDiff:function(){var a=this;this.executeAction({url:a.baseUrl,params:{command:"symfony propel:diff"},run:function(b){this.updateCli(b.console)}})},commandCheckModelIntegrity:function(){var a=this;this.executeAction({url:a.baseUrl,params:{command:"symfony afs:integrity"},run:function(b){this.updateCli(b.console)}})},commandCheckWidgetIntegrity:function(){var a=this;this.executeAction({url:a.baseUrl,params:{command:"symfony appflower:list-files ext verbose"},run:function(b){this.updateCli(b.console)}})},commandSecurityScan:function(){var a=this;this.executeAction({url:a.baseUrl,params:{command:"symfony appflower:security-scan frontend"},run:function(b){this.updateCli(b.console)}})},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.cli.Console.superclass.initComponent.apply(this,arguments);this._afterInitComponent()},_afterInitComponent:function(){this.consoleCmdLine.on("keyup",this.onConsoleCmdLineKeyUp,this)},onCliAfterRender:function(){this.loadCli()},loadCli:function(){var a=this;this.executeAction({url:a.baseUrl,params:{command:"start"},run:function(b){this.updateCli(b.console)}})},refreshCli:function(){this.scrollCliDown()},setCli:function(a){this.body.dom.innerHTML=a;this.scrollCliDown()},updateCli:function(a){if(Ext.isString(a)&&a){this.body.dom.innerHTML+=a;this.scrollCliDown()}},clearCli:function(){this.setCli("")},onConsoleCmdLineKeyUp:function(f,c){var d=this,b=f.getValue(),a=c?c.getKey():Ext.EventObject.getKey();if(a==Ext.EventObject.ENTER){f.setValue("");if(b=="clear"){this.clearCli()}else{this.executeAction({url:d.baseUrl,params:{command:b},loadingMessage:String.format('Executing command "{0}"...',b),run:function(e){this.updateCli(e.console)}})}}}});Ext.reg("afStudio.cli.console",afStudio.cli.Console);Ext.namespace("afStudio.cli");afStudio.cli.Debug=Ext.extend(afStudio.cli.CommandLine,{baseUrl:afStudioWSUrls.getDebugUrl(),_beforeInitComponent:function(){var d=this;var b=new Ext.data.JsonStore({autoLoad:false,url:d.baseUrl,storeId:"cli-debug",root:"data",totalProperty:"total",fields:["text"]});var a=new Ext.XTemplate('<tpl for=".">','<div class="thumb-wrap">',"{text}",'<div class="x-clear"></div>',"</div>","</tpl>");this.debugDataView=new Ext.DataView({store:b,tpl:a,autoHeight:true,forceFit:true});var c=new Ext.PagingToolbar({store:b,pageSize:1,displayInfo:true});return{tbar:{id:"debug-toolbar",items:[]},bbar:c,items:[this.debugDataView]}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.cli.Debug.superclass.initComponent.apply(this,arguments)},loadCli:function(){var d=this,a=this.debugDataView.getStore(),c=this.getTopToolbar(),b=this.getBottomToolbar();this.executeAction({url:d.baseUrl,params:{command:"main"},run:function(f){a.loadData(f);a.setBaseParam("file_name",null);a.setBaseParam("command",null);b.moveLast();this.scrollCliDown();c.removeAll();var e=f.files.length;if(e>0){Ext.each(f.files,function(i,g){c.addButton({itemId:i,text:i});c.getComponent(i).on({click:d.onFileClick.createDelegate(d)});if(g!=e-1){c.add("-")}})}c.doLayout()}})},onFileClick:function(c,a){var f=this,b=this.debugDataView.getStore(),d=this.getBottomToolbar();this.maskCli();b.baseParams.file_name=c.itemId;b.baseParams.command="file";b.load({params:{start:0,limit:1}});this.unmaskCli();d.moveLast()}});Ext.reg("afStudio.cli.debug",afStudio.cli.Debug);Ext.namespace("afStudio.cli");afStudio.cli.WindowWrapper=Ext.extend(Ext.Window,{width:1007,height:600,closable:true,closeAction:"hide",draggable:true,plain:true,modal:true,maximizable:true,border:false,bodyBorder:false,layout:"fit",closeWindow:function(){if(this.closeAction=="hide"){this.hide()}else{this.close()}},constructor:function(a){Ext.apply(this,a);afStudio.cli.WindowWrapper.superclass.constructor.call(this,a)},initComponent:function(){afStudio.cli.WindowWrapper.superclass.initComponent.apply(this,arguments);var a=this;this.on({beforeshow:function(){var b=this.items.itemAt(0);b.refreshCli()}})}});Ext.ns("afStudio.cli");afStudio.cli.CommandLineMgr=function(){var c=new afStudio.cli.Console();var a=new afStudio.cli.WindowWrapper({title:"Console",iconCls:"icon-console",items:c});var d=new afStudio.cli.WindowWrapper({title:"Debug",iconCls:"icon-debug",items:new afStudio.cli.Debug()});var b=new afStudio.cli.WindowWrapper({title:"Notifications",iconCls:"icon-debug-auditlog",items:new afStudio.cli.AuditLog()});return{init:function(){a.show().closeWindow()},showConsole:function(){a.show()},showAuditLog:function(){b.show()},showDebug:function(){d.show()},updateConsole:function(e){c.updateCli(e)},setConsole:function(e){c.setCli(e)}}}();afStudio.Cli=afStudio.cli.CommandLineMgr;Ext.ns("afStudio.navigation");afStudio.navigation.BaseTreeEditor=Ext.extend(Ext.tree.TreeEditor,{beforeNodeClick:Ext.emptyFn});afStudio.navigation.BaseItemTreePanel=Ext.extend(Ext.tree.TreePanel,{animate:true,autoScroll:true,editorFieldInvalid:'The value in this node is invalid! <br /> accepts only alphanumeric symbols and "_", beginning from alphanumeric.',leafNodeCfg:{},branchNodeCfg:{},constructor:function(b){var c=this;var a=new Ext.tree.TreeNode({path:"root",text:c.title||"root",draggable:false});Ext.applyIf(b,{root:a,rootVisible:false,tools:[{id:"refresh",handler:c.loadRootNode,scope:this}]});afStudio.navigation.BaseItemTreePanel.superclass.constructor.call(this,b)},initComponent:function(){var a=this;this.treeSorter=new Ext.tree.TreeSorter(this,{folderSort:true,dir:"asc"});this.treeEditor=new afStudio.navigation.BaseTreeEditor(this,{cancelOnEsc:true,completeOnEnter:true,ignoreNoChange:true});afStudio.navigation.BaseItemTreePanel.superclass.initComponent.apply(this,arguments)},initEvents:function(){afStudio.navigation.BaseItemTreePanel.superclass.initEvents.apply(this,arguments);var a=this;a.loader.on({scope:a,beforeload:a.onLoaderBeforeLoad,load:a.onLoaderLoad,loadexception:a.onLoaderLoadException});a.treeEditor.on({scope:a,beforecomplete:a.onEditorBeforeComplete,complete:a.onEditorComplete,canceledit:a.onEditorCancelEdit});a.on({scope:a,contextmenu:a.onNodeContextMenu,click:a.onNodeClick,dblclick:a.onNodeDblClick,activate:{fn:a.onItemActivate,single:true}});a.treeKeyMap=new Ext.KeyMap(this.el,[{key:Ext.EventObject.ENTER,fn:function(){var c=this.getSelectionModel(),b=c.getSelectedNode();if(b.isLeaf()){this.runNode(b)}else{if(b.isExpandable()){b.isExpanded()?b.collapse():b.expand()}}},scope:this}])},maskItemTree:function(){this.body.mask("Loading, please Wait...","x-mask-loading")},unmaskItemTree:function(){this.body.unmask()},getNodeAttribute:function(c,b,a){return c.attributes[b]?c.attributes[b]:(a?a:null)},getParentNodeAttribute:function(c,b,a){return this.getNodeAttribute(c.parentNode,b,a)},expandParentNodes:function(a){if(!Ext.isEmpty(a.parentNode)){this.expandParentNodes(a.parentNode)}a.expand()},selectNode:function(a){this.selectPath(a.getPath())},selectChildNodeByText:function(b,c){var e=this,d=this.getSelectionModel();this.expandParentNodes(b);var a;if(b&&!b.isLeaf()){a=b.findChild("text",c,false);a?d.select(a):null}return a},loadRootNode:function(c){var b=this,a=this.loader;Ext.isFunction(c)?a.load(this.root,c,b):a.load(this.root)},initialItemState:function(){var b=this.getRootNode(),d=this.getSelectionModel();if(!b.isExpanded()){b.expand()}if(b.firstChild&&!b.firstChild.isLeaf()){b.firstChild.expand(false,true,function(f){d.select(f);f.ui.getEl().focus()});var e=b.childNodes,c,a=e.length;for(c=1;c<a;c++){e[c].expand()}}},onItemActivate:function(){this.loadRootNode(this.initialItemState)},refreshNode:function(b,a,d){var c=this;this.loadRootNode(function(){var f=this.getRootNode(),e=Ext.isString(b)?f.findChild("text",b,true):f,g;if(e){g=this.selectChildNodeByText(e,a)}if(Ext.isFunction(d)){Ext.util.Functions.createDelegate(d,c,[g])()}})},onLoaderBeforeLoad:function(a,b,c){this.maskItemTree()},onLoaderLoad:function(a,b,c){this.unmaskItemTree()},onLoaderLoadException:function(a,b,c){this.unmaskItemTree()},onNodeClick:Ext.emptyFn,onNodeDblClick:Ext.emptyFn,onNodeContextMenu:Ext.emptyFn,isValidNodeName:function(b,a){return/^[A-Za-z\d]\w*$/im.test(a)?true:false},onEditorBeforeComplete:function(b,d,a){var c=b.editNode;if(!this.isValidNodeName(c,d)){b.field.markInvalid(this.editorFieldInvalid);return false}},onEditorComplete:function(b,d,a){var c=b.editNode;if(this.getNodeAttribute(c,"NEW_NODE")){c.setText(d);this.addNodeController(c)}else{if(d!=a){this.renameNodeController(c,d,a)}}},onEditorCancelEdit:function(b,d,a){var c=b.editNode;if(this.getNodeAttribute(c,"NEW_NODE")){c.remove()}},addNodeController:Ext.emptyFn,renameNodeController:Ext.emptyFn,runNode:Ext.emptyFn,addLeafNode:function(b){var a=Ext.apply({},this.leafNodeCfg);a.NEW_NODE=true;this.addNode(b,a)},addBranchNode:function(b,c){var a=Ext.apply({},this.branchNodeCfg);a.NEW_NODE=true;if(c&&Ext.isObject(c)){Ext.apply(a,c)}this.addNode(b,a)},addNode:function(b,a){var d=this.treeEditor,c;b.expand();c=b.appendChild(new Ext.tree.TreeNode(Ext.apply({},a)));this.selectNode(c);d.triggerEdit(c)},executeAction:function(a){Ext.apply(a,{scope:a.scope?a.scope:this,mask:{msg:a.loadingMessage,region:"center"}});afStudio.xhr.executeAction(a)}});afStudio.navigation.ModelItem=Ext.extend(afStudio.navigation.BaseItemTreePanel,{baseUrl:afStudioWSUrls.modelListUrl,leafNodeCfg:{text:"NewModel",iconCls:"icon-model",leaf:true},modelContextMenu:new Ext.menu.Menu({items:[{itemId:"edit-model",text:"Edit model",iconCls:"icon-models-edit"},{itemId:"rename-model",text:"Rename model",iconCls:"icon-edit"},{itemId:"delete-model",text:"Delete model",iconCls:"icon-models-delete"}],listeners:{itemclick:function(c){var b=c.parentMenu.contextNode,a=b.getOwnerTree();switch(c.itemId){case"delete-model":a.deleteNodeModel(b);break;case"edit-model":a.runNode(b);break;case"rename-model":a.treeEditor.triggerEdit(b);break}}}}),_beforeInitComponent:function(){var b=this;var a=new Ext.tree.TreeLoader({url:this.baseUrl,baseParams:{cmd:"get"}});return{title:"Models",loader:a,iconCls:"icon-databases",bbar:{items:["->",{text:"Add Model",iconCls:"icon-models-add",handler:b.onAddModelClick,scope:b}]}}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.navigation.ModelItem.superclass.initComponent.apply(this,arguments)},onAddModelClick:function(){var b=this,a=this.getRootNode();this.addLeafNode(a)},runNode:function(c){var d=this,a=this.getNodeAttribute(c,"text"),b=this.getNodeAttribute(c,"schema");this.executeAction({url:d.baseUrl,params:{xaction:"read",model:a,schema:b},showNoteOnSuccess:false,loadingMessage:String.format('Loading model "{0}"...',a),run:function(e){var f=new afStudio.models.ModelTab({_node:c,fieldsStructure:e,modelName:a,schemaName:b});afStudio.vp.addToWorkspace(f,true)}})},onNodeDblClick:function(a,b){this.runNode(a)},onNodeContextMenu:function(a,b){a.select();this.modelContextMenu.contextNode=a;this.modelContextMenu.showAt(b.getXY())},addNodeController:function(c){var d=this,a=this.getNodeAttribute(c,"text"),b=this.getNodeAttribute(c,"schema");this.executeAction({url:d.baseUrl,params:{cmd:"add",with_primary:true,model:a,schema:b},loadingMessage:String.format('"{0}" model creation...',a),logMessage:String.format('Models: model "{0}" was created',a),run:function(e){this.refreshNode(this.root,a,this.runNode)},error:function(e){c.remove()}})},renameNodeController:function(d,e,b){var f=this,a=this.getRootNode(),c=this.getNodeAttribute(d,"schema");this.executeAction({url:f.baseUrl,params:{cmd:"rename",model:b,renamedModel:e,schema:c},loadingMessage:String.format('Renaming model from "{0}" to {1} ...',b,e),logMessage:String.format('Models: model "{0}" was renamed to "{1}"',b,e),run:function(g){this.refreshNode(a,e,this.runNode)},error:function(g){d.setText(b)}})},deleteNodeModel:function(d){var f=this,a=this.getRootNode(),b=this.getNodeAttribute(d,"text"),c=this.getNodeAttribute(d,"schema"),e=String.format('Are you sure you want to delete model "{0}" ?',b);Ext.Msg.confirm("Models",e,function(g){if(g=="yes"){f.executeAction({url:f.baseUrl,params:{cmd:"delete",model:b,schema:c},loadingMessage:String.format('Model "{0}" deleting ...',b),logMessage:String.format('Models: model "{0}" was deleted',b),run:function(i){this.loadRootNode(function(){afStudio.vp.clearWorkspace()})}})}})}});Ext.reg("afStudio.navigation.modelItem",afStudio.navigation.ModelItem);afStudio.navigation.LayoutItem=Ext.extend(afStudio.navigation.BaseItemTreePanel,{baseUrl:"/appFlowerStudio/layout",layoutMetaUrl:"/afsLayoutBuilder/get",addNewPageUrl:"/afsLayoutBuilder/new",renamePageUrl:"/afsLayoutBuilder/rename",deletePageUrl:"/afsLayoutBuilder/delete",editorFieldInvalid:'Page name is invalid! <br /> accepts only alpha-numeric symbols and "_", begins from "_" or alpha.',leafNodeCfg:{text:"NewPage",iconCls:"icon-layout",type:"page",leaf:true},appContextMenu:new Ext.menu.Menu({items:[{itemId:"app-add-page",text:"Add Layout",iconCls:"icon-models-add"}],listeners:{itemclick:function(c){var b=c.parentMenu.contextNode,a=b.getOwnerTree();a.addLeafNode(b)}}}),pageContextMenu:new Ext.menu.Menu({items:[{itemId:"edit-page",text:"Edit Layout",iconCls:"icon-models-edit"},{itemId:"rename-page",text:"Rename Layout",iconCls:"icon-edit"},{itemId:"delete-page",text:"Delete Layout",iconCls:"icon-models-delete"},{itemId:"set_as_homepage",text:"Set Layout as Homepage",iconCls:"icon-models-set_as_homepage"}],listeners:{itemclick:function(c){var b=c.parentMenu.contextNode,a=b.getOwnerTree();switch(c.itemId){case"edit-page":a.runNode(b);break;case"rename-page":a.treeEditor.triggerEdit(b);break;case"delete-page":a.deletePage(b);break;case"set_as_homepage":a.setPageAsHomepage(b);break}}}}),_beforeInitComponent:function(){var a=this;var b=new Ext.tree.TreeLoader({url:this.baseUrl,baseParams:{cmd:"getList"}});return{title:"Layouts",loader:b,iconCls:"icon-layers",bbar:{items:["->",{text:"Add Layout",iconCls:"icon-layout-add",scope:a,handler:a.onAddPageClick}]}}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.navigation.LayoutItem.superclass.initComponent.apply(this,arguments)},onAddPageClick:function(){var b=this,a=this.getRootNode(),c=this.getSelectionModel().getSelectedNode();if(a.hasChildNodes()){if(!Ext.isEmpty(c)){if(c.isLeaf()){this.addLeafNode(c.parentNode)}else{this.addLeafNode(c)}}else{this.addLeafNode(a.firstChild)}}},runNode:function(b){var a=this,c=a.getNodeAttribute(b,"text"),d=a.getParentNodeAttribute(b,"text");afStudio.xhr.executeAction({url:a.layoutMetaUrl,params:{app:d,page:c},mask:String.format('Loading layout "{0}" metadata...',c),showNoteOnSuccess:false,run:function(e){afStudio.vp.addToWorkspace(new afStudio.layoutDesigner.DesignerPanel({layoutMeta:e.content,layoutApp:d,layoutPage:c}),true)}})},onNodeDblClick:function(a,b){if(this.getNodeAttribute(a,"type")=="page"){this.runNode(a)}},onNodeContextMenu:function(b,c){var a=this,d;b.select();switch(b.attributes.type){case"app":d=a.appContextMenu;break;case"page":d=a.pageContextMenu;break}if(d){d.contextNode=b;d.showAt(c.getXY())}},addNodeController:function(c){var b=this,a=this.getParentNodeAttribute(c,"text"),d=this.getNodeAttribute(c,"text");this.executeAction({url:b.addNewPageUrl,params:{app:a,page:d},loadingMessage:String.format('"{0}" page creation...',d),logMessage:String.format('Layout "{0}" was created',d),run:function(e){this.refreshNode(a,d,this.runNode)},error:function(e){c.remove()}})},renameNodeController:function(d,e,b){var c=this,a=this.getParentNodeAttribute(d,"text");this.executeAction({url:c.renamePageUrl,params:{app:a,page:b,name:e},loadingMessage:String.format('Renaming page from "{0}" to {1} ...',b,e),logMessage:String.format('Layout "{0}" was renamed to "{1}"',b,e),run:function(f){this.refreshNode(a,e,this.runNode)},error:function(f){d.setText(b)}})},deletePage:function(e){var d=this,c=this.getRootNode(),b=this.getParentNodeAttribute(e,"text"),a=this.getNodeAttribute(e,"text"),f=String.format('Are you sure you want to delete page "{0}"?',a);Ext.Msg.confirm("Layout Designer",f,function(g){if(g=="yes"){d.executeAction({url:d.deletePageUrl,params:{app:b,page:a},loadingMessage:String.format('"{0}" page deleting ...',a),logMessage:String.format('Layout "{0}" was deleted',a),run:function(i){this.loadRootNode(function(){this.selectChildNodeByText(c,b).expand();afStudio.vp.clearWorkspace()})}})}})},setPageAsHomepage:function(c){var b=afStudioWSUrls.pageSetAsHomepage,a=this.getNodeAttribute(c,"widgetUri");this.executeAction({url:b,params:{widgetUri:a},loadingMessage:String.format("Set {0} as homepage...",a),logMessage:String.format('Layout "{0}" was set as homepage.',a)})}});Ext.reg("afStudio.navigation.layoutItem",afStudio.navigation.LayoutItem);afStudio.navigation.WidgetItem=Ext.extend(afStudio.navigation.BaseItemTreePanel,{baseUrl:afStudioWSUrls.moduleListUrl,branchNodeCfg:{text:"NewModule",type:"module",allowChildren:true,iconCls:"icon-folder",children:[]},appContextMenu:new Ext.menu.Menu({items:[{itemId:"add-module",text:"Add module",iconCls:"icon-models-add"}],listeners:{itemclick:function(c){var b=c.parentMenu.contextNode,a=b.getOwnerTree();switch(c.itemId){case"add-module":a.onAddModule(b);break}}}}),moduleContextMenu:new Ext.menu.Menu({items:[{itemId:"rename-module",text:"Rename module",iconCls:"icon-edit"},{itemId:"delete-module",text:"Delete module",iconCls:"icon-models-delete"}],listeners:{itemclick:function(c){var b=c.parentMenu.contextNode,a=b.getOwnerTree();switch(c.itemId){case"rename-module":a.treeEditor.triggerEdit(b);break;case"delete-module":a.deleteNodeModule(b);break}}}}),xmlContextMenu:new Ext.menu.Menu({items:[{itemId:"edit-xml",text:"Edit Widget",iconCls:"icon-models-edit"},{itemId:"rename-xml",text:"Rename Widget",iconCls:"icon-edit"},{itemId:"delete-xml",text:"Delete Widget",iconCls:"icon-models-delete"},{itemId:"set_as_homepage-xml",text:"Set Widget as Homepage",iconCls:"icon-models-set_as_homepage"}],listeners:{itemclick:function(c){var b=c.parentMenu.contextNode,a=b.getOwnerTree();switch(c.itemId){case"delete-xml":a.deleteNodeXml(b);break;case"edit-xml":a.runNode(b);break;case"rename-xml":a.treeEditor.triggerEdit(b);break;case"set_as_homepage-xml":a.setWidgetAsHomepage(b);break}}}}),_beforeInitComponent:function(){var b=this;var a=new Ext.tree.TreeLoader({url:this.baseUrl});return{title:"Widgets",loader:a,iconCls:"icon-models",bbar:{items:["->",{text:"Add Widget",iconCls:"icon-widgets-add",handler:b.onAddWidget,scope:b},"-",{text:"Add Module",iconCls:"icon-models-add",handler:b.onAddModule,scope:b}]}}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.navigation.WidgetItem.superclass.initComponent.apply(this,arguments)},getNodeModule:function(b){var a;switch(b.attributes.type){case"app":a=false;break;case"module":a=b.text;break;case"xml":a=b.attributes.module;break}return a},getNodeApp:function(b){var a=this.getNodeAttribute(b,"type"),c;switch(a){case"app":c=this.getNodeAttribute(b,"text");break;case"module":case"xml":c=this.getNodeAttribute(b,"app");break}return c},getNodeActionPath:function(a){return this.getNodeAttribute(a,"actionPath")},getNodeSecurityPath:function(a){return this.getNodeAttribute(a,"securityPath")},onAddModule:function(b){this.appContextMenu;var a=this.getRootNode();if(!b.ownerTree){b=this.getSelectionModel().getSelectedNode();if(!b){b=a.firstChild}else{if(b.attributes.type!="app"){b=a.findChild("text",b.attributes.app)}}}this.addBranchNode(b,{app:this.getNodeApp(b)})},isValidNodeType:function(a){return["app","module","xml"].indexOf(a)!=-1},isValidNodeName:function(c,a){var b=this.getNodeAttribute(c,"type");if(["app","module"].indexOf(b)!=-1){return this.constructor.superclass.isValidNodeName.call(this,c,a)}else{return/^[^\d]\w*\.xml$/im.test(a)?true:false}},runNode:function(a){this.showWidgetDesignerForNode(a)},onNodeDblClick:function(a,b){if(this.getNodeAttribute(a,"type")=="xml"){this.runNode(a)}},onNodeContextMenu:function(b,c){var f=this,a=this.getNodeAttribute(b,"type");b.select();if(f.isValidNodeType(a)){var d=f[a+"ContextMenu"];d.contextNode=b;d.showAt(c.getXY())}},addNodeController:function(b){var c=this,a=this.getNodeAttribute(b,"type");if(c.isValidNodeType(a)){c["addNode"+a.ucfirst()](b)}},renameNodeController:function(c,d,a){var e=this,b=this.getNodeAttribute(c,"type");if(e.isValidNodeType(b)){e["renameNode"+b.ucfirst()](c,d,a)}},onAddWidget:function(){var a=this;var b=new afStudio.wd.WidgetsBuilder({placeType:"app",listeners:{widgetcreated:function(c){var d=String.format("/{0}/{1}/{2}",a.root.text,c.data.place,c.data.widgetUri);a.loadRootNode(function(){this.selectPath(d,"text",function(g,f){if(g){a.showWidgetDesignerForNode(f)}else{a.initialItemState();var e=Ext.copyTo({},c.data,"actionName, actionPath, securityPath, place, placeType");e.uri=c.data.widgetUri;afStudio.WD.showWidgetDesigner(e)}})})}}});b.show()},addNodeModule:function(b){var d=this,a=this.getNodeModule(b),c=this.getNodeApp(b);this.executeAction({url:afStudioWSUrls.moduleAddUrl,params:{type:"app",place:c,name:a},loadingMessage:String.format('"{0}" module creation...',a),logMessage:String.format('Widgets: module "{0}" was created',a),run:function(e){this.refreshNode(c,a)},error:function(e){b.remove()}})},renameNodeModule:function(c,d,b){var a={params:{type:"app",place:this.getNodeApp(c),name:b,renamed:d},url:afStudioWSUrls.moduleRenameUrl,node:c,refreshNode:this.getNodeApp(c),msg:"module"};this.renameNode(a,d,b)},renameNodeXml:function(e,f,c){var a=this.getNodeApp(e),d=this.getNodeModule(e);var b={params:{type:"app",place:a,moduleName:d,oldValue:c,newValue:f},url:afStudioWSUrls.widgetRenameUrl,node:e,refreshNode:a,msg:"widget"};this.renameNode(b,f,c)},renameNode:function(a,d,f){var e=this,b=a.refreshNode?a.refreshNode:this.getRootNode(),c=a.url?a.url:e.baseUrl;this.executeAction({url:c,params:a.params,loadingMessage:String.format('Renaming {0} from "{1}" to {2} ...',a.msg,f,d),logMessage:String.format('Widgets: {0} "{1}" was renamed to "{2}"',a.msg,f,d),run:function(g){this.refreshNode(b,d,function(){this.getRootNode().expandChildNodes()})},error:function(g){a.node.setText(f)}})},deleteNodeModule:function(b){var a={params:{type:"app",place:this.getNodeApp(b),name:this.getNodeModule(b)},url:afStudioWSUrls.moduleDeleteUrl,item:b.text,msg:"module"};this.deleteNode(a)},deleteNodeXml:function(d){var a=this.getNodeApp(d),b=this.getNodeModule(d);var c={params:{type:"app",place:a,moduleName:b,name:d.text},url:afStudioWSUrls.widgetDeleteUrl,item:d.text,msg:"widget"};this.deleteNode(c)},deleteNode:function(a){var d=this,c=String.format('Are you sure you want to delete {0} "{1}"?',a.msg,a.item),b=a.url?a.url:d.baseUrl;Ext.Msg.confirm("Plugins",c,function(e){if(e=="yes"){d.executeAction({url:b,params:a.params,loadingMessage:String.format('{0} "{1}" deleting ...',a.msg,a.item),logMessage:String.format('Widgets: {0} "{1}" was deleted',a.msg,a.item),run:function(f){this.loadRootNode(this.initialItemState);afStudio.vp.clearWorkspace()}})}})},showWidgetDesignerForNode:function(a){afStudio.WD.showWidgetDesigner({uri:this.getNodeAttribute(a,"widgetUri"),actionPath:this.getNodeActionPath(a),actionName:this.getNodeAttribute(a,"actionName"),securityPath:this.getNodeSecurityPath(a),placeType:"app",place:this.getNodeApp(a)})},setWidgetAsHomepage:function(c){var b=afStudioWSUrls.widgetSetAsHomepage,a=this.getNodeAttribute(c,"widgetUri");this.executeAction({url:b,params:{widgetUri:a},loadingMessage:String.format("Set {0} as homepage...",a),logMessage:String.format("Widget {0} was set as homepage.",a)})}});Ext.reg("afStudio.navigation.widgetItem",afStudio.navigation.WidgetItem);afStudio.navigation.PluginItem=Ext.extend(afStudio.navigation.BaseItemTreePanel,{baseUrl:afStudioWSUrls.pluginListUrl,branchNodeCfg:{text:"NewPlugin",type:"plugin",allowChildren:true,iconCls:"icon-folder",children:[]},pluginContextMenu:new Ext.menu.Menu({items:[{itemId:"add-module",text:"Add Module",iconCls:"icon-models-add"},{itemId:"rename-plugin",text:"Rename Plugin",iconCls:"icon-edit"},{itemId:"delete-plugin",text:"Delete Plugin",iconCls:"icon-models-delete"}],listeners:{itemclick:function(c){var b=c.parentMenu.contextNode,a=b.getOwnerTree();switch(c.itemId){case"delete-plugin":a.deleteNodePlugin(b);break;case"rename-plugin":a.treeEditor.triggerEdit(b);break;case"add-module":a.addBranchNode(b,{text:"NewModule",type:"module"});break}}}}),moduleContextMenu:new Ext.menu.Menu({items:[{itemId:"rename-module",text:"Rename Module",iconCls:"icon-edit"},{itemId:"delete-module",text:"Delete Module",iconCls:"icon-models-delete"}],listeners:{itemclick:function(c){var b=c.parentMenu.contextNode,a=b.getOwnerTree();switch(c.itemId){case"delete-module":a.deleteNodeModule(b);break;case"rename-module":a.treeEditor.triggerEdit(b);break}}}}),xmlContextMenu:new Ext.menu.Menu({items:[{itemId:"edit-plugin-xml",text:"Edit Widget",iconCls:"icon-models-edit"},{itemId:"rename-plugin-xml",text:"Rename Widget",iconCls:"icon-edit"},{itemId:"delete-plugin-xml",text:"Delete Widget",iconCls:"icon-models-delete"}],listeners:{itemclick:function(c){var b=c.parentMenu.contextNode,a=b.getOwnerTree();switch(c.itemId){case"delete-plugin-xml":a.deleteNodeXml(b);break;case"edit-plugin-xml":a.runNode(b);break;case"rename-plugin-xml":a.treeEditor.triggerEdit(b);break}}}}),_beforeInitComponent:function(){var b=this;var a=new Ext.tree.TreeLoader({url:this.baseUrl});return{title:"Plugins",loader:a,iconCls:"icon-af-plugin",bbar:{items:["->",{text:"Add Widget",iconCls:"icon-widgets-add",handler:b.onAddWidget,scope:b},{text:"Add plugin",iconCls:"icon-plugin-add",handler:b.onAddPluginClick,scope:b}]}}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.navigation.PluginItem.superclass.initComponent.apply(this,arguments)},onAddPluginClick:function(){var a=this.getRootNode();this.addBranchNode(a)},onAddWidget:function(){var b=this,a=afStudioWSUrls.modelListUrl;var c=new afStudio.wd.WidgetsBuilder({modelsUrl:a,fieldsUrl:a,placeType:"plugin",listeners:{widgetcreated:function(d){var e=String.format("/{0}/{1}/{2}.xml",b.root.text,d.data.place,d.data.widgetUri);b.loadRootNode(function(){this.selectPath(e,"text",function(i,g){if(i){b.showWidgetDesignerForNode(g)}else{b.initialItemState();var f=Ext.copyTo({},d.data,"actionName, actionPath, securityPath, place, placeType");f.uri=d.data.widgetUri;afStudio.WD.showWidgetDesigner(f)}})})}}});c.show()},isValidNodeType:function(a){return["plugin","module","xml"].indexOf(a)!=-1},isValidNodeName:function(c,a){var b=this.getNodeAttribute(c,"type");if(["plugin","module"].indexOf(b)!=-1){return this.constructor.superclass.isValidNodeName.call(this,c,a)}else{return/^[^\d]\w*\.xml$/im.test(a)?true:false}},runNode:function(a){this.showWidgetDesignerForNode(a)},onNodeDblClick:function(a,b){if(this.getNodeAttribute(a,"type")=="xml"){this.runNode(a)}},onNodeContextMenu:function(b,c){var f=this,a=this.getNodeAttribute(b,"type");b.select();if(f.isValidNodeType(a)){var d=f[a+"ContextMenu"];d.contextNode=b;d.showAt(c.getXY())}},addNodeController:function(b){var c=this,a=this.getNodeAttribute(b,"type");if(c.isValidNodeType(a)){c["addNode"+a.ucfirst()](b)}},renameNodeController:function(c,d,a){var e=this,b=this.getNodeAttribute(c,"type");if(e.isValidNodeType(b)){e["renameNode"+b.ucfirst()](c,d,a)}},addNodePlugin:function(c){var d=this,a=d.getRootNode(),b=this.getNodeAttribute(c,"text","");this.executeAction({url:afStudioWSUrls.pluginAddUrl,params:{name:b},loadingMessage:String.format('"{0}" plugin creation...',b),logMessage:String.format('Plugins: plugin "{0}" was created',b),run:function(e){this.refreshNode(a,b)},error:function(e){c.remove()}})},addNodeModule:function(c){var d=this,a=this.getNodeAttribute(c,"text"),b=this.getParentNodeAttribute(c,"text");this.executeAction({url:afStudioWSUrls.moduleAddUrl,params:{type:"plugin",place:b,name:a},loadingMessage:String.format('"{0}" module creation...',a),logMessage:String.format('Plugins: module "{0}" was created',a),run:function(e){this.refreshNode(b,a)},error:function(e){c.remove()}})},renameNodePlugin:function(c,d,b){var a={params:{newValue:d,oldValue:b},url:afStudioWSUrls.pluginRenameUrl,node:c,msg:"plugin"};this.renameNode(a,d,b)},renameNodeModule:function(c,d,b){var a={params:{type:"plugin",place:this.getParentNodeAttribute(c,"text"),name:b,renamed:d},url:afStudioWSUrls.moduleRenameUrl,node:c,refreshNode:this.getParentNodeAttribute(c,"text"),msg:"module"};this.renameNode(a,d,b)},renameNodeXml:function(d,f,b){var e=this.getParentNodeAttribute(d.parentNode,"text"),c=this.getParentNodeAttribute(d,"text");var a={params:{type:"plugin",place:e,moduleName:c,oldValue:b,newValue:f},url:afStudioWSUrls.widgetRenameUrl,node:d,refreshNode:e,msg:"widget"};this.renameNode(a,f,b)},renameNode:function(a,d,f){var e=this,b=a.refreshNode?a.refreshNode:e.getRootNode(),c=a.url?a.url:e.baseUrl;this.executeAction({url:c,params:a.params,loadingMessage:String.format('Renaming {0} from "{1}" to {2} ...',a.msg,f,d),logMessage:String.format('Plugins: {0} "{1}" was renamed to "{2}"',a.msg,f,d),run:function(g){this.refreshNode(b,d,function(){this.getRootNode().expandChildNodes()})},error:function(g){a.node.setText(f)}})},deleteNodePlugin:function(b){var a={params:{name:b.text},url:afStudioWSUrls.pluginDeleteUrl,item:b.text,msg:"plugin"};this.deleteNode(a)},deleteNodeModule:function(b){var a={params:{type:"plugin",place:b.parentNode.text,name:b.text},url:afStudioWSUrls.moduleDeleteUrl,item:b.text,msg:"module"};this.deleteNode(a)},deleteNodeXml:function(c){var d=this.getParentNodeAttribute(c.parentNode,"text"),a=this.getParentNodeAttribute(c,"text");var b={params:{type:"plugin",place:d,moduleName:a,name:c.text},url:afStudioWSUrls.widgetDeleteUrl,item:c.text,msg:"widget"};this.deleteNode(b)},deleteNode:function(a){var d=this,c=String.format('Are you sure you want to delete {0} "{1}"?',a.msg,a.item),b=a.url?a.url:d.baseUrl;Ext.Msg.confirm("Plugins",c,function(e){if(e=="yes"){d.executeAction({url:b,params:a.params,loadingMessage:String.format('{0} "{1}" deleting ...',a.msg,a.item),logMessage:String.format('Plugins: {0} "{1}" was deleted',a.msg,a.item),run:function(f){this.loadRootNode(this.initialItemState);afStudio.vp.clearWorkspace()}})}})},showWidgetDesignerForNode:function(a){var b=this.getParentNodeAttribute(a.parentNode,"text");afStudio.WD.showWidgetDesigner({uri:this.getNodeAttribute(a,"widgetUri"),actionPath:this.getNodeAttribute(a,"actionPath"),actionName:this.getNodeAttribute(a,"actionName"),securityPath:this.getNodeAttribute(a,"securityPath"),placeType:"plugin",place:b})}});Ext.reg("afStudio.navigation.pluginItem",afStudio.navigation.PluginItem);Ext.namespace("afStudio.viewport");afStudio.viewport.StudioToolbar=Ext.extend(Ext.Toolbar,{initComponent:function(){var a=this;var b={items:[{id:"mstudio",text:"Studio",iconCls:"icon-studio",menu:{ignoreParentClicks:true,items:[{text:"Project",iconCls:"icon-studio-project",listeners:{added:function(c){a.setProjectMenu(c)},activate:function(c){a.setProjectMenu(c)}}},{text:"Users",iconCls:"icon-users",hidden:(afStudioUser.is_admin)?false:true,handler:function(){(new afStudio.UsersList).show()}},{text:"Settings",iconCls:"icon-studio-settings",handler:function(){(new afStudio.Settings()).show()}},"-",{text:"Help",iconCls:"icon-studio-help",handler:function(c,d){(new afStudio.Help()).show()}}]}},{text:"Theme Designer",iconCls:"icon-theme",handler:function(){var c=new afStudio.theme.Designer();c.show()}},{text:"Tools",iconCls:"icon-tools",menu:{items:[{text:"Console",iconCls:"icon-tools-console",handler:function(){afStudio.Cli.showConsole()}},{text:"DB Query",iconCls:"icon-data",handler:function(c,d){(new afStudio.dbQuery.QueryWindow()).show()}},{text:"Code Browser",iconCls:"icon-code-editor",handler:function(c,d){afStudio.openCodeEditor()}}]}},{text:"Debug",iconCls:"icon-debug",menu:{items:[{text:"AuditLog",iconCls:"icon-debug-auditlog",handler:function(){afStudio.Cli.showAuditLog()}},{text:"Debug",iconCls:"icon-debug-run",handler:function(){afStudio.Cli.showDebug()}}]}},{text:"Run",iconCls:"icon-runs",menu:{items:[{text:"Run",iconCls:"icon-run-run",scope:a,handler:a.runProject}]}},{xtype:"tbfill"},{text:'<img src="/images/famfamfam/user_go.png" border="0">',handler:function(){window.location.href="/afsAuthorize/signout"},tooltip:{text:"Click to log out",title:"admin"}}]};Ext.apply(this,Ext.apply(this.initialConfig,b));afStudio.viewport.StudioToolbar.superclass.initComponent.apply(this,arguments)},setProjectMenu:function(b){var a=this;if(b.menu){b.menu.removeAll()}else{b.menu=new Ext.menu.Menu({ignoreParentClicks:true})}if(afStudioProjectsManagementEnabled){b.menu.addMenuItem({text:"Create new project",iconCls:"icon-studio-create-project",handler:function(d,f){afStudio.xhr.executeAction({url:Ext.urlAppend(afStudioWSUrls.project,Ext.urlEncode({cmd:"checkConfig"})),run:function(e,g){(new afStudio.CreateProjectWizard(e["dataset"])).show()}})}})}b.menu.addMenuItem({text:"Export project",iconCls:"icon-studio-export-project",menu:{ignoreParentClicks:true,items:[{text:"Sources",iconCls:"icon-studio-export-project-source",handler:function(){var d=Ext.urlAppend(afStudioWSUrls.exportUrl,Ext.urlEncode({type:"project"}));window.open(d,"export-win")}},{text:"DB",iconCls:"icon-studio-export-project-sql",menu:{items:[{text:"structure",iconCls:"icon-studio-export-project-sql",handler:function(d,g){var f=Ext.urlAppend(afStudioWSUrls.exportUrl,Ext.urlEncode({type:"db"}));window.open(f,"export-win")}},{text:"structure + data (for mysql)",iconCls:"icon-studio-export-project-sql",handler:function(d,g){var f=Ext.urlAppend(afStudioWSUrls.exportUrl,Ext.urlEncode({by_os:true,type:"db"}));window.open(f,"export-win")}}]}}]}});if(afStudioProjectsManagementEnabled){var c=afStudio.getRecentProjects();if(c.length>0){b.menu.addSeparator();b.menu.addMenuItem({text:"Recent projects",iconCls:"icon-studio-recent-projects",menu:a.getRecentProjectsMenu(c)})}}b.menu.doLayout()},getRecentProjectsMenu:function(a){recentProjectsMenu=new Ext.menu.Menu();for(key in a){if(a[key].url){recentProjectsMenu.add({text:a[key].text,href:a[key].url})}}return recentProjectsMenu},runProject:function(){var a=Ext.urlAppend(afStudioWSUrls.project,Ext.urlEncode({cmd:"run"}));afStudio.xhr.executeAction({url:a,mask:{msg:"Run command..."},showNoteOnSuccess:false,run:function(b){window.open(b.query,"runProject")}})}});Ext.reg("afStudio.viewport.studioToolbar",afStudio.viewport.StudioToolbar);Ext.namespace("afStudio.viewport");afStudio.viewport.StudioViewport=Ext.extend(Ext.Viewport,{_beforeInitComponent:function(){var b=new Ext.Panel({id:"north_panel",region:"north",height:32,border:false,bodyStyle:"background-color:#dfe8f6;",items:afStudio.tb});var a=new Ext.Panel({id:"center_panel",region:"center",layout:"fit",margins:{right:5},bodyStyle:"padding: 8px; background-image: url(/appFlowerStudioPlugin/images/bg/background_4.jpg); background-position: 50% 50%; background-repeat: no-repeat;"});var c=new afStudio.viewport.WestPanel();this.viewRegions={north:b,center:a,west:c};return{id:"studio-viewport",layout:"border",items:[b,c,a]}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.viewport.StudioViewport.superclass.initComponent.apply(this,arguments)},mask:function(a){var c=Ext.isString(a)?a:"Loading, please wait...",b;if(Ext.isObject(a)){c=a.msg?a.msg:c;b=a.region?a.region:undefined}if(["center","west","north","south"].indexOf(b)!=-1){this.viewRegions[b].body.mask(c,"x-mask-loading")}else{this.el.mask(c,"x-mask-loading")}},unmask:function(a){if(a&&["center","west","north","south"].indexOf(a)!=-1){this.viewRegions[a].body.unmask()}this.el.unmask()},addToWorkspace:function(a,c){var d=this.viewRegions.center;if(c===true){d.removeAll(true)}var b=d.add(a);d.doLayout();return b},clearWorkspace:function(){var a=this.viewRegions.center;a.removeAll(true)}});afStudio.viewport.WestPanel=Ext.extend(Ext.Panel,{initComponent:function(){var b=afStudioUser.name||"user";var c=afStudioUser.username||"user";var a={id:"west_panel",title:"Navigation",region:"west",split:true,layout:"accordion",layoutConfig:{animate:true},width:220,minWidth:220,collapsible:true,activeItem:"models",listeners:{afterlayout:{fn:function(){var d=this.layout.activeItem;d.fireEvent("activate",d)},single:true}},defaults:{border:false},items:[{id:"models",xtype:"afStudio.navigation.modelItem"},{id:"layoutdesigner",xtype:"afStudio.navigation.layoutItem"},{id:"widgets",xtype:"afStudio.navigation.widgetItem"},{id:"plugins",xtype:"afStudio.navigation.pluginItem"},{id:"profile",title:"My Profile",autoScroll:true,iconCls:"user",html:"<div id='westpanel_link'>"+"<div style='background-color:#f8f8f8; border:1px solid #ddd;font-size:11px;'>"+"<b>Welcome, "+b+"</b><br>"+"Username: "+c+"<br>"+"<a href='#'>[Edit My Profile]</a>"+"</div>"+"</div>"}]};Ext.apply(this,Ext.apply(this.initialConfig,a));afStudio.viewport.WestPanel.superclass.initComponent.apply(this,arguments);this._initEvents()},onEditProfileLinkClick:function(){(new afStudio.UserWindow({mode:"edit",username:afStudioUser.username})).show()},onProfilePanelShow:function(a){a.body.child("A").on("click",this.onEditProfileLinkClick,this)},_initEvents:function(){Ext.getCmp("profile").on("afterrender",this.onProfilePanelShow,this)}});afStudio.viewport.SouthPanel=Ext.extend(Ext.Panel,{_beforeInitComponent:function(){return{region:"south",layout:"fit",height:215,split:true,collapseMode:"mini",items:[]}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.viewport.SouthPanel.superclass.initComponent.apply(this,arguments)}});Ext.ns("afStudio.models");afStudio.models.TypeComboBox=Ext.extend(Ext.ux.form.GroupingComboBox,{_beforeInitComponent:function(){var b=this;var a=new Ext.data.SimpleStore({fields:["group","value","text"],data:[["TEXT","char","char"],["TEXT","varchar","varchar"],["TEXT","longvarchar","longvarchar"],["TEXT","clob","clob"],["NUMBERS","numeric","numeric"],["NUMBERS","decimal","decimal"],["NUMBERS","tinyint","tinyint"],["NUMBERS","smallint","smallint"],["NUMBERS","integer","integer"],["NUMBERS","bigint","bigint"],["NUMBERS","real","real"],["NUMBERS","float","float"],["NUMBERS","double","double"],["NUMBERS","boolean","boolean"],["BINRAY","binary","binary"],["BINRAY","varbinary","varbinary"],["BINRAY","longvarbinary","longvarbinary"],["BINRAY","blob","blob"],["TEMPORA DATE/TIME","date","date"],["TEMPORA DATE/TIME","time","time"],["TEMPORA DATE/TIME","timestamp","timestamp"],["TEMPORA DATE/TIME","integer","integer"]]});return{triggerAction:"all",forceSelection:true,groupField:"group",valueField:"value",displayField:"text",mode:"local",store:a}},initComponent:function(){Ext.apply(this,Ext.applyIf(this.initialConfig,this._beforeInitComponent()));afStudio.models.TypeComboBox.superclass.initComponent.apply(this,arguments)}});Ext.reg("afStudio.models.typeCombo",afStudio.models.TypeComboBox);Ext.ns("afStudio.models");afStudio.models.TypeBuilder=(function(){return{invalidFieldName:'Field name must contain only characters, digits or "_" and start from character or "_"',createEditor:function(b,c,a){var e=null;if(b){var d=b.indexOf("(");if(d!=-1){b=b.substring(0,d)}}switch(b){case"boolean":e=new Ext.grid.GridEditor(new Ext.form.ComboBox({typeAhead:true,triggerAction:"all",lazyRender:true,editable:false,mode:"local",valueField:"field",displayField:"field",store:[[true,"true"],[false,"false"]]}));break;case"char":case"varchar":case"longvarchar":case"timestamp":e=new Ext.grid.GridEditor(new Ext.form.TextField({maxLength:c?c:Number.MAX_VALUE}));break;case"bigint":case"numeric":case"decimal":case"integer":case"smallint":e=new Ext.grid.GridEditor(new Ext.form.NumberField({allowDecimals:false,maxLength:c?c:Number.MAX_VALUE}));break;case"tinyint":e=new Ext.grid.GridEditor(new Ext.form.NumberField({autoCreate:{tag:"input",type:"text",size:"20",autocomplete:"off",maxlength:3},maxValue:255,allowDecimals:false,maxLength:c?c:3}));break;case"real":case"float":case"double":e=new Ext.grid.GridEditor(new Ext.form.NumberField({decimalPrecision:6,maxLength:c?c:Number.MAX_VALUE}));break;case"date":e=new Ext.grid.GridEditor(new Ext.form.DateField());break;case"time":e=new Ext.grid.GridEditor(new Ext.form.TimeField());break;case"binary":case"varbinary":case"longvarbinary":case"blob":case"clob":e=new Ext.grid.GridEditor(new Ext.form.DisplayField());break}if(e){e.on("beforecomplete",function(i,g,f){if(b=="boolean"){a=a?true:false}g=!Ext.isEmpty(g)?g:a;i.setValue(g)})}return e?e:null},createRenderer:function(a){var b=null;switch(a){case"bigint":case"numeric":case"decimal":case"integer":case"smallint":b=function(c,d){d.attr='style="text-align:right;"';return Ext.util.Format.number(c,"0.0,/i")};break;case"date":b=function(d){var c=Date.parse(d);return !isNaN(c)?new Date(c).format("m/d/Y"):d};break;default:b=function(c){return c};break}return b}}})();Ext.ns("afStudio.models");afStudio.models.CreateWidgetWindow=Ext.extend(Ext.Window,{_beforeInitComponent:function(){var b=this;var a=new Ext.FormPanel({ref:"fieldForm",monitorValid:true,labelWidth:120,border:false,baseCls:"x-plain",style:"padding: 5px",defaults:{anchor:"100%",msgTarget:"qtip"},items:[{xtype:"checkboxgroup",ref:"widgetTypes",fieldLabel:"Widget Types",allowBlank:false,blankText:"At least one widget type must be selected",style:"margin: 0 2px 4px;",columns:1,defaults:{checked:true},items:[{boxLabel:"List",name:"list"},{boxLabel:"Edit",name:"edit"},{boxLabel:"Show",name:"show"}]},{xtype:"common.widgetlocation",ref:"widgetLocation",autoLoad:false,forceSelection:false,allowBlank:true},{xtype:"common.mfieldsgrid",ref:"fieldsGrid",title:"Fields",multiSelect:true,height:200,border:true},{xtype:"checkbox",ref:"refresh",fieldLabel:"Overwrite Existing",name:"refresh"}],buttons:[{text:"Create",iconCls:"icon-accept",formBind:true,scope:b,handler:this.createWidgets},{text:"Cancel",iconCls:"afs-icon-cancel",scope:b,handler:this.cancelCreation}]});return{title:"Create Widgets",iconCls:"icon-widgets-add",closeAction:"hide",modal:true,frame:true,width:600,autoHeight:true,resizable:false,items:[a]}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.models.EditFieldWindow.superclass.initComponent.apply(this,arguments)},onShow:function(){var b=this,a=this.fieldForm.fieldsGrid,c=a.getSelectionModel();a.store.loadData(b.fields);c.selectAll.defer(10,c);this.fieldForm.widgetLocation.store.reload()},closeWindow:function(){(this.closeAction=="hide")?this.hide():this.close()},getGenerateData:function(){var g={model:this.model},e=this.fieldForm;var b=e.fieldsGrid.getSelectionModel().getSelections();if(Ext.isEmpty(b)){afStudio.Msg.warning("Create Widgets","Must be selected at least one field");return null}else{var a=[];Ext.each(b,function(i,f){a[f]=i.data.name});g.fields=a.join(",")}if(e.widgetTypes.getValue().length>0){var d=[];Ext.each(e.widgetTypes.getValue(),function(j,f){d[f]=j.getName()});g.type=d.join(",")}var c=e.widgetLocation.getValue();if(Ext.isObject(c)){g.module_name=c.module;g.place_type=c.placeType;g.place=c.place}else{if(c!=null){g.module_name=c}}g.refresh=e.refresh.getValue();return g},createWidgets:function(){var a=this.getGenerateData();if(a==null){return}afStudio.xhr.executeAction({url:afStudioWSUrls.widgetGenerateUrl,params:a,mask:"Processing creation...",scope:this,run:function(c,e){var i=c.data,g=afStudio.vp.viewRegions.west,b=i.place_type=="plugin"?g.get("plugins"):g.get("widgets");var f=["",b.root.text,i.place,i.module,i.widgets[0]].join("/");g.getLayout().setActiveItem(b.id);b.loadRootNode(function(){var d=this;this.selectPath(f,"text",function(k,j){if(k){d.runNode(j)}})})}});this.closeWindow()},cancelCreation:function(){this.closeWindow()}});Ext.ns("afStudio.models");afStudio.models.ImportWindow=Ext.extend(Ext.Window,{layout:"fit",closeAction:"hide",modal:true,frame:true,width:600,height:400,resizable:false,_beforeInitComponent:function(){this.importTab=this.createWindowItems();return{title:"Import",iconCls:"icon-model-import",items:[this.importTab],buttons:[{text:"Cancel",iconCls:"afs-icon-cancel",scope:this,handler:this.cancelCreation}]}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.models.ImportWindow.superclass.initComponent.apply(this,arguments);this._afterInitComponent()},_afterInitComponent:function(){var a=this;this.importTab.fixtures.relayEvents(a,["importfixtures"]);this.importTab.uplfile.relayEvents(a,["importfile"]);a.on({scope:a,importfixtures:a.closeWindow,importfile:a.closeWindow})},onShow:function(){var a=this.importTab;a.fixtures.reloadFixtures()},createWindowItems:function(){var a=this;var b=new Ext.TabPanel({activeTab:0,border:false,defaults:{layout:"fit",padding:5},items:[{title:"Load Fixtures",items:[{xtype:"import.fixtures",ref:"../fixtures",border:false}]},{title:"Upload File",items:[{xtype:"import.uploadfile",ref:"../uplfile",model:a.model,border:false}]}]});return b},closeWindow:function(){(this.closeAction=="hide")?this.hide():this.close()},cancelCreation:function(){this.closeWindow()}});Ext.ns("afStudio.models");afStudio.models.FixturesForm=Ext.extend(Ext.Panel,{url:afStudioWSUrls.modelListUrl,layout:"form",autoLoadFixtures:false,_beforeInitComponent:function(){this.fixturesGrid=this.createFixtures();return{items:[this.fixturesGrid,{xtype:"checkbox",ref:"appendChbox",fieldLabel:"Append"}],buttons:[{text:"Import",itemId:"import",iconCls:"icon-accept",disabled:true,scope:this,handler:this.importFixtures}]}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.models.FixturesForm.superclass.initComponent.apply(this,arguments)},afterRender:function(){var a=this.fixturesGrid.getSelectionModel(),b=this.fixturesGrid.getStore();this.addEvents("importfixtures");a.on("selectionchange",function(){var c=this.getImportButton();a.hasSelection()?c.enable():c.disable()},this);if(this.autoLoadFixtures===true){b.load()}afStudio.models.FixturesForm.superclass.afterRender.call(this)},getImportButton:function(){var a=this.getFooterToolbar();return a.getComponent("import")},reloadFixtures:function(){this.fixturesGrid.store.reload()},createFixtures:function(){var c=this;var b=new Ext.data.JsonStore({url:c.url,baseParams:{cmd:"getFixtures"},root:"data",fields:["id","file"]});var d=new Ext.grid.CheckboxSelectionModel({singleSelect:false});var a=new Ext.grid.GridPanel({title:"Fixtures",store:b,sm:d,columns:[d,{header:"File",sortable:true,dataIndex:"file",id:"fixture"}],viewConfig:{emptyText:"There are no fixtures"},autoExpandColumn:"fixture",anchor:"100% 90%",autoScroll:true});return a},importFixtures:function(){var b=this.fixturesGrid.getSelectionModel(),d=b.getSelections(),a=this.appendChbox.getValue(),c=[];Ext.each(d,function(g,e){c.push(g.get("file"))});afStudio.xhr.executeAction({url:this.url,params:{cmd:"importData",remote_files:Ext.encode(c),append:a},scope:this,run:function(e,f){this.fireEvent("importfixtures",f.params.remote_files)}})}});Ext.reg("import.fixtures",afStudio.models.FixturesForm);Ext.ns("afStudio.models");afStudio.models.UploadForm=Ext.extend(Ext.FormPanel,{url:afStudioWSUrls.modelListUrl,fileTypeInvalidText:"Invalid file type. Must be one of *.csv *.xls *.ods *.yml types.",YML_TYPE:"yml",CSV_TYPE:"csv",XLS_TYPE:"xls",_beforeInitComponent:function(){var a=this;if(!this.fileTypes){this.fileTypes={yml:a.YML_TYPE,yaml:a.YML_TYPE,csv:a.CSV_TYPE,xlsx:a.XLS_TYPE,xls:a.XLS_TYPE,ods:a.XLS_TYPE}}return{fileUpload:true,monitorValid:true,items:[{xtype:"fileuploadfield",ref:"importFile",fieldLabel:"Import file",emptyText:"Select import file...",allowBlank:false,blankText:"File is required",width:400,name:"file"},{xtype:"displayfield",submitValue:false,html:"Supported files: CSV, XLS, ODS, YML"},{xtype:"checkbox",fieldLabel:"Append",name:"append"},{xtype:"container",ref:"extraFields",anchor:"100% 90%",style:"margin-top: 10px;",layout:"card",layoutConfig:{deferredRender:true},defaults:{layout:"form",border:false},items:[{itemId:a.CSV_TYPE,items:[{xtype:"checkbox",fieldLabel:"Use headers",name:"has_headers"},{xtype:"combo",store:[[",",","],[";",";"],[":",":"],["|","|"],["\t","horizontal tab (\\t)"]],mode:"local",triggerAction:"all",forceSelection:true,fieldLabel:"Delimeter",value:",",hiddenName:"delimeter",name:"delimeter"},{xtype:"combo",store:[["'","'"],['"','"']],mode:"local",triggerAction:"all",forceSelection:true,fieldLabel:"Enclosure",value:'"',hiddenName:"enclosure",name:"enclosure"},{xtype:"common.modelscombo",allowBlank:false,value:a.model,model:"model",hiddenName:"model"}]},{itemId:a.XLS_TYPE,items:[{xtype:"label",html:"<u>Supported spreadsheets</u>: <i>MS Excel 2007 (xlsx), MS Excel 5, 95, 2000 (xls), OpeOffice Cals (ods)</i>"},{xtype:"checkbox",fieldLabel:"Use headers",name:"has_headers"},{xtype:"checkbox",fieldLabel:"Import raw values",value:false,name:"raw"},{xtype:"textfield",fieldLabel:"Import selected worksheets",width:345,name:"worksheet",plugins:[Ext.ux.plugins.HelpText],helpType:"comment",helpText:"All worksheets will be imported unless is not specified the list separated<br /> by commas, i.e. sheetA, sheetB"},{xtype:"checkbox",fieldLabel:"Use worksheets as models",value:false,name:"worksheets_as_models"},{xtype:"common.modelscombo",allowBlank:false,value:a.model,model:"model",hiddenName:"model"}]}]}],buttons:[{text:"Import",itemId:"import",iconCls:"icon-accept",formBind:true,scope:this,handler:this.importData}]}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.models.UploadForm.superclass.initComponent.apply(this,arguments)},afterRender:function(){var c=this.importFile,a=this.extraFields,b=a.find("name","worksheets_as_models")[0];this.addEvents("importfile");c.on("fileselected",this.onFileSelected,this);b.on("check",function(e,f){var d=e.nextSibling();if(f){d.setDisabled(true);d.hide()}else{d.setDisabled(false);d.show()}});afStudio.models.UploadForm.superclass.afterRender.call(this)},onFileSelected:function(b,a){var c=this.getFileExtension(a);if(c==null||!this.fileTypes[c]){afStudio.Msg.warning("Import File",this.fileTypeInvalidText);b.reset();return}this.showExtraFields(this.fileTypes[c])},getFileExtension:function(a){if(!Ext.isString(a)){return null}var b=/\.(\w+)$/.exec(a);return b?b[1]:null},showExtraFields:function(c){var b=this.extraFields.getComponent(c),a=this.extraFields.layout;if(b){if(a.activeItem){this.switchFieldsBlock(a.activeItem,false)}this.extraFields.layout.setActiveItem(c);this.switchFieldsBlock(a.activeItem)}else{if(a.activeItem){this.switchFieldsBlock(a.activeItem,false);a.activeItem.hide();a.activeItem=null}}},switchFieldsBlock:function(c,b){b=!Ext.isDefined(b)?true:b;var a=c.findByType("field");Ext.each(a,function(d){d.setDisabled(!b);d.reset()})},getImportButton:function(){var a=this.getFooterToolbar();return a.getComponent("import")},importData:function(){var a=this.getForm();a.submit({url:this.url,params:{cmd:"importData"},scope:this,waitMsg:"Importing...",success:function(c,d){var b=d.result;if(b.success){this.fireEvent("importfile")}},failure:function(d,f){var b="Import File";if(f.failureType===Ext.form.Action.CONNECT_FAILURE){afStudio.Msg.error(b,String.format("Status: {0}: {1}",f.response.status,f.response.statusText))}if(f.failureType===Ext.form.Action.SERVER_INVALID){var c=Ext.util.Format.stripTags(f.response.responseText),i;try{i=Ext.decode(c).message;afStudio.Msg.warning(b,i)}catch(g){i=f.response.responseText;afStudio.Msg.error(b,i)}}}})}});Ext.reg("import.uploadfile",afStudio.models.UploadForm);Ext.ns("afStudio.models");afStudio.models.RelationPicker=Ext.extend(Ext.Window,{closePicker:function(){if(this.closeAction=="hide"){this.hide()}else{this.close()}},pickRelation:function(){var c=this,e=this.modelsTree.getSelectionModel().getSelectedNode(),b=this.fieldsGrid.getSelectionModel().getSelected(),a=this.modelsTree.getModel(e),d=b.get("name");this.closePicker();this.fireEvent("relationpicked",a+"."+d)},initialRelationPick:function(d){var c=this,a=d.split(".");var b=c.modelsTree.getRootNode();(function(){var e=c.modelsTree.findModelByName(a[0]);if(e){c.modelsTree.selectModel(e);c.fieldsGrid.show();c.loadModelFields(e,function(g){if(a[1]){for(var j=0,f=g.length;j<f;j++){if(g[j].get("name")==a[1]){c.fieldsGrid.getSelectionModel().selectRecords([g[j]],false);break}}}})}else{c.fieldsGrid.getStore().removeAll();c.modelsTree.getSelectionModel().clearSelections()}}).defer(500)},loadModelFields:function(b,d){var c=this.modelsTree.getSchema(b),a=this.modelsTree.getModel(b);this.fieldsGrid.getStore().load({params:{schema:c,model:a},callback:d||Ext.emptyFn})},onModelClick:function(a,b){this.fieldsGrid.show();this.loadModelFields(a)},onModelsLoad:function(a,b){this.fieldsGrid.getStore().removeAll();this.fieldsGrid.hide()},onFieldsSelectionChange:function(b){var a=this.getFooterToolbar().getComponent("pick-relation");b.hasSelection()?a.enable():a.disable()},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._initCmp()));afStudio.models.RelationPicker.superclass.initComponent.apply(this,arguments);this._initEvents()},_initCmp:function(){var b=this;var a=new afStudio.common.ModelFieldsGrid({ref:"../fieldsGrid",hidden:true});return{title:"Relation Picker",iconCls:"icon-table-relationship",modal:true,width:600,height:400,maximizable:true,plain:true,layout:"border",items:[{region:"west",layout:"fit",width:220,items:[{id:"models-picker",xtype:"afStudio.common.modelsTree",url:b.modelsUrl,border:false,ref:"../modelsTree"}]},{region:"center",layout:"fit",items:[a]}],buttons:[{itemId:"pick-relation",text:"ok",disabled:true,iconCls:"icon-accept",handler:Ext.util.Functions.createDelegate(b.pickRelation,b)}]}},_initEvents:function(){var b=this,d=this.modelsTree,a=this.fieldsGrid,c=a.getSelectionModel();b.addEvents("relationpicked");d.on({scope:this,click:this.onModelClick,modelsload:this.onModelsLoad});c.on({scope:this,selectionchange:this.onFieldsSelectionChange})}});Ext.ns("afStudio.models");N=afStudio.models;N.RelationCombo=Ext.extend(Ext.form.ComboBox,{_beforeInitComponent:function(){var b=this;var a=new Ext.data.JsonStore({url:b.relationUrl,baseParams:{xaction:"readrelation"},root:"data",fields:["id","value"]});return{maskRe:/[\w\.]/,triggerClass:"x-form-relation-trigger",typeAhead:true,lazyRender:true,queryParam:"query",mode:"remote",minChars:1,editable:true,forceSelection:true,store:a,valueField:"id",displayField:"value",hiddenName:"relation",name:"relation"}},initComponent:function(){Ext.apply(this,Ext.applyIf(this.initialConfig,this._beforeInitComponent()));afStudio.models.RelationCombo.superclass.initComponent.apply(this,arguments)},initEvents:function(){afStudio.models.RelationCombo.superclass.initEvents.apply(this,arguments);this.keyNav.down=function(a){if(!this.isExpanded()){}else{this.inKeyMode=true;this.selectNext()}return false};this.keyNav.enter=function(f){var d=this.getRawValue(),a=this.view.getSelectedIndexes()[0],b=this.store,c=b.getAt(a);if(d.indexOf(".")==-1){if(c){this.setRawValue(c.get(this.initialConfig.displayField)+".");this.doQuery(c.get(this.initialConfig.displayField)+".")}}else{this.onViewClick()}}},createRelationPicker:function(){var a=this;a.relationPicker=new afStudio.models.RelationPicker({modelsUrl:afStudioWSUrls.modelListUrl,fieldsUrl:afStudioWSUrls.modelListUrl,closable:true,closeAction:"hide",listeners:{relationpicked:function(c){if(a.fieldsGrid){var b=a.fieldsGrid.getSelectionModel().getSelectedCell();a.fieldsGrid.startEditing(b[0],b[1]);if(c){a.setValue(c)}a.fieldsGrid.stopEditing()}else{a.setValue(c)}}}})},onTriggerClick:function(b){if(this.readOnly||this.disabled){return}if(this.isExpanded()){this.collapse();this.el.focus()}if(!this.relationPicker){this.createRelationPicker()}if(this.fieldsGrid){this.fieldsGrid.stopEditing()}var a=this;this.relationPicker.show(null,function(){this.initialRelationPick(a.getRawValue()||a.getValue())})}});Ext.reg("relationcombo",N.RelationCombo);delete N;Ext.ns("afStudio.models");afStudio.models.FieldsGrid=Ext.extend(Ext.grid.EditorGridPanel,{saveModel:function(){var d=this,c=d.getStore(),b=c.proxy.url,a=c.getRange(),e=[],g=false;Ext.each(a,function(k,j){e.push(k.data)});if(!Ext.isEmpty(c.getModifiedRecords())){Ext.each(c.getModifiedRecords(),function(k,j){if(!g&&k.json&&k.data.name!=k.json.name){g=true}})}var f=function(l,j){var i=String.format('Altering "{0}" model...',l.model),k=String.format('"{0}" model structure was saved',l.model);afStudio.xhr.executeAction({url:b,params:{xaction:"alterModel",model:l.model,schema:l.schema,fields:Ext.encode(e)},scope:l,mask:{msg:i,region:"center"},logMessage:k,run:function(m,n){c.commitChanges();this.fireEvent("altermodel")},error:function(m,o,n){this.fireEvent(n?"altermodelfailure":"altermodelexception",m)}})};if(g){Ext.MessageBox.confirm("Confirm","Field name has been changed - all data for old field will be lost. Are you sure you want to do that?",function(i){if(i=="yes"){f(d,e)}})}else{f(d,e)}},insertAfterField:function(){var d=this,a=d.getSelectionModel().getSelectedCell(),c=a?a[0]+1:(d.store.getCount()>0?1:0);var b=new d.store.recordType({name:"",type:"integer",required:false,primaryString:false});d.stopEditing();d.store.insert(c,b);d.startEditing(c,a?a[1]:0)},insertBeforeField:function(){var d=this,a=d.getSelectionModel().getSelectedCell(),c=a?a[0]:0;var b=new d.store.recordType({name:"",type:"integer",required:false,primaryString:false});d.stopEditing();d.store.insert(c,b);d.startEditing(c,a?a[1]:0)},deleteField:function(){var c=this,a=c.getSelectionModel().getSelectedCell();if(a){var b=c.store.getAt(a[0]);c.store.remove(b)}},booleanEditorBuilder:function(){return{editor:new Ext.form.ComboBox({typeAhead:true,triggerAction:"all",lazyRender:true,editable:false,mode:"local",valueField:"field",displayField:"field",store:[[true,"true"],[false,"false"]]}),renderer:function(b,c,a){c.css+=" x-grid3-check-col-td";return'<div class="x-grid3-check-col'+(b?"-on":"")+'" />'}}},typeEditorBuilder:function(){return{editor:new afStudio.models.TypeComboBox({lazyRender:true})}},nameEditorBuilder:function(){var a=this,b=[];return{editor:new Ext.form.TextField({allowBlank:false,maskRe:/[\w]/,validator:function(c){return/^[^\d]\w*$/im.test(c)?true:afStudio.models.TypeBuilder.invalidFieldName}})}},loadModelData:function(a){this.getStore().loadData(a)},_beforeInitComponent:function(){var e=this;function a(g,i){return i.primaryKey?"primary":(i.index=="unique"?"unique":(i.index?"index":null))}function d(g,i){return(i.foreignModel&&i.foreignReference)?i.foreignModel+"."+i.foreignReference:null}var f=new Ext.data.JsonStore({url:afStudioWSUrls.modelListUrl,autoLoad:false,baseParams:{xaction:"read",model:e.model,schema:e.schema},storeId:"model-fields-st",root:"data",idProperty:"id",fields:[{name:"id"},{name:"key",mapping:"id",convert:a},{name:"relation",mapping:"id",convert:d},{name:"autoIncrement"},{name:"primaryKey"},{name:"index"},{name:"name"},{name:"type"},{name:"size"},{name:"primaryString",type:"boolean",defaultValue:false},{name:"required"},{name:"default"},{name:"foreignTable"},{name:"foreignModel"},{name:"foreignReference"},{name:"onDelete"}]});var c=new Ext.grid.ColumnModel({defaults:{sortable:true},columns:[{header:'<div class="model-pk-hd">&#160;</div>',width:25,dataIndex:"key",editor:new Ext.form.ComboBox({typeAhead:true,triggerAction:"all",lazyRender:true,editable:false,mode:"local",valueField:"field",displayField:"field",store:[["","None"],["primary","Primary"],["index","Index"],["unique","Unique"]]}),renderer:function(i){var g="";switch(i){case"primary":g='<div class="pk-cell">&#160;</div>';break;case"index":g='<div class="index-cell">&#160;</div>';break;case"unique":g='<div class="unique-cell">&#160;</div>';break}return g}},{header:"Name",width:100,dataIndex:"name",editor:e.nameEditorBuilder().editor},{header:"Type",width:100,dataIndex:"type",editor:e.typeEditorBuilder().editor},{header:"Size",width:50,dataIndex:"size",editor:new Ext.form.NumberField({allowDecimals:false,allowNegative:false})},{header:"Autoincrement",width:55,dataIndex:"autoIncrement",editor:e.booleanEditorBuilder().editor,renderer:e.booleanEditorBuilder().renderer},{header:"Default value",width:100,dataIndex:"default",editor:new Ext.form.TextField()},{header:"Relation",width:150,dataIndex:"relation",editor:new afStudio.models.RelationCombo({relationUrl:afStudioWSUrls.modelListUrl,fieldsGrid:e})},{header:"Required",width:50,dataIndex:"required",align:"center",editor:e.booleanEditorBuilder().editor,renderer:e.booleanEditorBuilder().renderer},{header:"On Delete",width:50,dataIndex:"onDelete",align:"center",editor:new Ext.form.ComboBox({typeAhead:true,triggerAction:"all",lazyRender:true,editable:false,mode:"local",valueField:"field",displayField:"field",value:"none",store:[["cascade","cascade"],["setnull","setnull"],["restrict","restrict"],["none","none"]]})},{header:"ObjectToString",width:60,dataIndex:"primaryString",align:"center",xtype:"templatecolumn",tpl:'<input type="radio" name="primaryString" <tpl if="primaryString">checked="checked"</tpl> />',listeners:{click:function(k,i,m,l){if(Ext.get(l.target).is("input[type=radio]")){var g=i.getStore(),j=g.getAt(m);g.each(function(n){n.set("primaryString",false)});j.set("primaryString",true);g.commitChanges()}}}}]});var b=new Ext.Toolbar({items:[{text:"Save",iconCls:"icon-model-save",scope:e,handler:e.saveModel},"-",{text:"Create Widget",iconCls:"icon-widgets-add",handler:function(i,j){var g=e.ownerCt.getCreateWidgetWindow();g.show()}},"-",{text:"Insert",iconCls:"icon-model-row-insert",menu:{items:[{text:"Insert after",scope:e,handler:e.insertAfterField},{text:"Insert before",scope:e,handler:e.insertBeforeField}]}},"-",{text:"Delete",iconCls:"icon-model-row-delete",scope:e,handler:e.deleteField},"->",{text:"Import",iconCls:"icon-model-import",scope:this,handler:function(i,j){var g=e.ownerCt.getImportWindow();g.show()}},{text:"Export",iconCls:"icon-model-export",scope:this,handler:function(g,i){e.ownerCt.getExportWindow()}}]});return{title:"Model Config",iconCls:"icon-table-gear",clicksToEdit:1,store:f,colModel:c,columnLines:true,loadMask:true,autoScroll:true,tbar:b,viewConfig:{forceFit:true},plugins:["cellEditorBuilder"]}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.models.FieldsGrid.superclass.initComponent.apply(this,arguments);this._afterInitComponent()},_afterInitComponent:function(){var c=this,b=c.getStore(),a=c.getColumnModel();c.addEvents("altermodel","altermodelexception","altermodelfailure");c.loadModelData(c._data)}});Ext.reg("afStudio.models.fieldsGrid",afStudio.models.FieldsGrid);Ext.ns("afStudio.models");afStudio.models.ModelStore=Ext.extend(Ext.data.Store,{autoSave:false,constructor:function(a){a=a||{};this.proxy=a.proxy;delete a.proxy;this.readerCfg=Ext.applyIf(a.readerCfg||{},{root:"data"});delete a.readerCfg;this.reader=new Ext.data.JsonReader(this.readerCfg);this.writerCfg=Ext.applyIf(a.writerCfg||{},{listful:true});delete a.writerCfg;this.writer=new Ext.data.JsonWriter(this.writerCfg),afStudio.models.ModelStore.superclass.constructor.call(this,a);this.initStoreEvents()},initStoreEvents:function(){this.on({scope:this,load:this.onLoad,beforewrite:this.onBeforewrite})},onLoad:function(c,b){var a=[new this.recordType()];this.add(a)},onBeforewrite:function(b,e,a,d){if(e==Ext.data.Api.actions.create){var c=[];Ext.each(a,function(g,f){var j=true;for(var i in g.data){j=false;break}if(j){c.push(f)}});Ext.each(c,function(f){a.splice(f,1)});if(Ext.isEmpty(a)){return false}}},save:function(){if(!this.writer){throw new Ext.data.Store.Error("writer-undefined")}var g=[],j,k,e,c={},d;if(this.removed.length){g.push(["destroy",this.removed])}var b=[].concat(this.getModifiedRecords());if(b.length){var f=[];for(d=0;d<b.length;d++){if(b[d].phantom===true){var a=b.splice(d,1).shift();d--;if(a.isValid()){f.push(a)}}else{if(!b[d].isValid()){b.splice(d,1);d--}}}if(f.length){g.push(["create",f])}if(b.length){g.push(["update",b])}}j=g.length;if(j){e=++this.batchCounter;for(d=0;d<j;++d){k=g[d];c[k[0]]=k[1]}if(this.fireEvent("beforesave",this,c)!==false){for(d=0;d<j;++d){k=g[d];this.doTransaction(k[0],k[1],e)}return e}}return -1}});Ext.ns("afStudio.models");Ext.override(Ext.form.Field,{initEvents:function(){this.mon(this.el,Ext.EventManager.getKeyEvent(),this.fireKey,this);this.mon(this.el,"focus",this.onFocus,this);this.mon(this.el,"blur",this.onBlur,this,this.inEditor?{buffer:10}:null)}});afStudio.models.modelGridView=Ext.extend(Ext.grid.GridView,{beforeColMenuShow:function(){var a=this.cm,c=a.getColumnCount();this.colMenu.removeAll();for(var b=0;b<c;b++){if(a.config[b].fixed!==true&&a.config[b].hideable!==false&&!a.config[b].uninit){this.colMenu.add(new Ext.menu.CheckItem({itemId:"col-"+a.getColumnId(b),text:a.getColumnHeader(b),checked:!a.isHidden(b),hideOnClick:false,disabled:a.config[b].hideable===false}))}}},afterRenderUI:function(){var a=this.grid;this.initElements();Ext.fly(this.innerHd).on("click",this.handleHdDown,this);this.mainHd.on({scope:this,mouseover:this.handleHdOver,mouseout:this.handleHdOut,mousemove:this.handleHdMove});this.scroller.on("scroll",this.syncScroll,this);if(a.enableColumnResize!==false){this.splitZone=new Ext.grid.GridView.SplitDragZone(a,this.mainHd.dom)}if(a.enableColumnMove){this.columnDrag=new Ext.grid.GridView.ColumnDragZone(a,this.innerHd);this.columnDrop=new Ext.grid.HeaderDropZone(a,this.mainHd.dom)}var b=a;if(b.enableHdMenu!==false){this.hmenu=new Ext.menu.Menu({id:b.id+"-hctx",show:function(d,e,c){this.parentMenu=c;if(!this.el){this.render()}this.fireEvent("beforeshow",this);this._el=d;this.showAt(this.el.getAlignToXY(d,e||this.defaultAlign),c,false)}});this.colMenu=new Ext.menu.Menu({id:b.id+"-hcols-menu"});this.colMenu.on("beforeshow",this.beforeColMenuShow,this);this.colMenu.on("itemclick",this.columnMenuClick,this);this.hmenu.add({itemId:"asc",text:this.sortAscText,cls:"xg-hmenu-sort-asc"},{itemId:"desc",text:this.sortDescText,cls:"xg-hmenu-sort-desc"},"-",{itemId:"addfb",text:"Add Field Before"},{itemId:"addfa",text:"Add Field After"},"-",{itemId:"dupb",text:"Duplicate Field"},{itemId:"editb",text:"Edit Field"},{itemId:"renameb",text:"Rename Field"},{itemId:"deletef",text:"Delete Field"},"-",{itemId:"columns",hideOnClick:false,text:this.columnsText,menu:this.colMenu,iconCls:"x-cols-icon"});this.hmenu.on("itemclick",this.handleHdMenuClick,this)}if(a.trackMouseOver){this.mainBody.on({scope:this,mouseover:this.onRowOver,mouseout:this.onRowOut})}if(a.enableDragDrop||a.enableDrag){this.dragZone=new Ext.grid.GridDragZone(a,{ddGroup:a.ddGroup||"GridDD"})}this.updateHeaderSortState()},columnMenuClick:function(c){var b=this.hdCtxIndex,a=this.cm,d=this.ds;b=a.getIndexById(c.itemId.substr(4));if(b!=-1){if(c.checked&&a.getColumnsBy(this.isHideableColumn,this).length<=2){this.onDenyColumnHide();return false}a.setHidden(b,c.checked)}return true},getUninitColumn:function(){for(var a=0;a<this.cm.config.length;a++){var b=this.cm.config[a];if(b.uninit){return a}}return 0},createDupheader:function(e){for(var c=1;c<=this.cm.config.length;c++){var d=e+c;var a=true;for(var b=0;b<this.cm.config.length;b++){if(d==this.cm.getColumnHeader(b)){a=false;break}}if(a){return d}}return e+(this.cm.config+1)},handleHdMenuClick:function(k){var f=this.hdCtxIndex,i=this.cm,b=this.ds;switch(k.itemId){case"asc":b.sort(i.getDataIndex(f),"ASC");break;case"desc":b.sort(i.getDataIndex(f),"DESC");break;case"addfa":var g=this.getUninitColumn();this.cm.config[g].uninit=false;this.cm.moveColumn(g,f+1);this.cm.setHidden(f+1,false);break;case"addfb":var g=this.getUninitColumn();this.cm.config[g].uninit=false;this.cm.moveColumn(g,f);this.cm.setHidden(f,false);break;case"dupb":var g=this.getUninitColumn();this.cm.config[g].uninit=false;this.cm.moveColumn(g,f+1);var c=this.cm.getColumnHeader(f);this.cm.setColumnHeader(f+1,this.createDupheader(c));this.cm.setHidden(f+1,false);break;case"renameb":var d=this.findHeaderCell(k.parentMenu._el);this.editHeadColumn(d.firstChild,f);break;case"editb":var a=i.config[f].fieldDefinition||{};if(!k.renameWindow){k.renameWindow=new afStudio.models.EditFieldWindow({gridView:this})}k.renameWindow.fieldDefinition=a;k.renameWindow.fieldIndex=f;k.renameWindow.show(k.el);break;case"deletef":var j=i.getColumnCount(true);if(j>2){i.setHidden(f,true);i.setColumnHeader(f,this.grid.defautHeaderTitle);i.setEditor(f,null);i.config[f].uninit=true;i.config[f].fieldDefinition.exists=false}break;case"ctext":var e=this.grid.createEditer();i.config[f].editor=e;break;case"ccheckbox":var e=this.grid.createEditer(new Ext.form.Checkbox());i.config[f].editor=e;break;case"cchoice":var e=this.grid.createEditer(new Ext.form.ComboBox({typeAhead:true,triggerAction:"all",lazyRender:true,mode:"local",valueField:"field",displayField:"field",store:new Ext.data.ArrayStore({fields:["field"],data:[]})}));e.on("beforestartedit",function(r,l,t){var m=r.field.store;var u=this.grid.store;m.removeAll();var n=[];for(var p=0;p<u.getCount();p++){var q=u.getAt(p);var t=q.get(i.getDataIndex(f));if(t==""||t==null){continue}var s=true;for(var o=0;o<n.length;o++){if(n[o][0]==t){s=false;break}}if(s){n.push([t])}}m.loadData(n);return true},this);i.config[f].editor=e;break;case"cdate":var e=this.grid.createEditer(new Ext.form.DateField());e.getValue=function(){var l=this.field.getValue();return l.format("m/d/Y")};i.config[f].editor=e;break;case"cpassword":var e=this.grid.createEditer(new Ext.form.TextField({inputType:"password"}));i.config[f].editor=e;i.config[f].renderer=function(l){return"XXXX"};break;case"cnumber":var e=this.grid.createEditer(new Ext.form.NumberField());i.config[f].align="right";i.config[f].editor=e;break;case"ccurrency":var e=this.grid.createEditer(new Ext.form.NumberField());i.config[f].editor=e;i.config[f].align="right";i.config[f].renderer=Ext.util.Format["usMoney"];break;case"ctime":var e=this.grid.createEditer(new Ext.form.TimeField());i.config[f].editor=e;break;case"cemail":var e=this.grid.createEditer(new Ext.form.TextField({vtype:"email"}));i.config[f].editor=e;break;case"cphonenumber":var e=this.grid.createEditer(new Ext.form.NumberField({maxLength:12}));i.config[f].editor=e;break;case"crate":var e=this.grid.createEditer(new Ext.form.SliderField({minValue:0,maxValue:5}));i.config[f].editor=e;break}return true},showNextColumn:function(b){var a=this.cm;if(b<=this.grid.maxColumns){a.setHidden(b+1,false);a.config[b+1].uninit=false}},headEditComplete:function(d,c,b){var e=d._index,a=this.cm;if(c!=b){a.setColumnHeader(e,c);var f=a.config[e].fieldDefinition;if(f){f.name=c;if(!f.exists){a.setEditor(e,afStudio.models.TypeBuilder.createEditor("varchar"));f.exists=true}}}},editHeadColumn:function(d,b){var a=new Ext.grid.GridEditor(new Ext.form.TextField({allowBlank:false,maskRe:/[\w]/,validator:function(f){return/^[^\d]\w*$/im.test(f)?true:afStudio.models.TypeBuilder.invalidFieldName}}));a._index=b;a.on({scope:this,complete:this.headEditComplete});a.startEdit(d,this.cm.getColumnHeader(b));var e=true;for(var c=b+1;c<this.grid.maxColumns;c++){if(!this.cm.isHidden(c)){e=false;break}}if(e){this.showNextColumn(b)}},handleHdDown:function(g,d){var f=this.findHeaderCell(d);if(!f){return}var c=this.getCellIndex(f);if(Ext.fly(d).hasClass("x-grid3-hd-btn")){g.stopEvent();Ext.fly(f).addClass("x-grid3-hd-menu-open");this.hdCtxIndex=c;var b=this.hmenu.items,a=this.cm;this.hmenu.on("hide",function(){Ext.fly(f).removeClass("x-grid3-hd-menu-open")},this,{single:true});this.hmenu.show(d,"tl-bl?")}else{this.editHeadColumn(f.firstChild,c)}}});afStudio.models.ExcelGridPanel=Ext.extend(Ext.grid.EditorGridPanel,{maxColumns:50,defautHeaderTitle:"NewField",autoScroll:true,columnLines:true,clicksToEdit:1,createEditer:function(a){var b=a?a:new Ext.form.TextField();return new Ext.grid.GridEditor(b)},beforeInit:function(){var c=[new Ext.grid.RowNumberer()],g=[];for(var e=0;e<this.maxColumns;e++){var f=true;if(e==0){f=false}c.push({header:this.defautHeaderTitle,dataIndex:"c"+e,width:80,hidden:f,uninit:f,editor:this.createEditer()});g.push({name:"c"+e})}var k=this.columns?new Ext.grid.ColumnModel(this.columns):new Ext.grid.ColumnModel(c);var j;if(this.store){j=this.store;if(this.store.getCount()==0){var d=this.store.recordType;this.store.add([new d()])}}else{j=new Ext.data.SimpleStore({fields:g,data:[[""]]})}var b=new Ext.grid.CellSelectionModel({onEditorKey:function(s,p){if(p.getKey()==p.TAB){this.handleKeyDown(p)}if(p.getKey()==p.ENTER){var n=this.grid,t=n.lastEdit,o=n.activeEditor,l=p.shiftKey,m,u,t,i,q;if(l){m=n.walkCells(t.row-1,t.col,-1,this.acceptsNav,this)}else{m=n.walkCells(t.row+1,t.col,1,this.acceptsNav,this)}if(m){i=m[0];q=m[1];if(n.isEditor&&n.editing){u=n.activeEditor;if(u&&u.field.triggerBlur){u.field.triggerBlur()}}n.startEditing(i,q)}}}});var a={store:j,cm:k,selModel:b,view:new afStudio.models.modelGridView()};Ext.apply(this,Ext.apply(this.initialConfig,a))},afterInit:function(){this.on({scope:this,afteredit:function(d){var f=d.row+1,a=d.column,c=this.store,b=c.getCount();if(b==f){c.add([new c.recordType()])}if(this.getColumnModel().getColumnCount(true)==(a+1)&&a<this.maxColumns){this.getView().showNextColumn(a)}}})},initComponent:function(){this.beforeInit();afStudio.models.ExcelGridPanel.superclass.initComponent.apply(this,arguments);this.afterInit()}});afStudio.models.ModelGrid=Ext.extend(afStudio.models.ExcelGridPanel,{recordsPerPage:25,createUninitColumn:function(b){var a=this.defautHeaderTitle;return{header:a,dataIndex:"c"+b,uninit:true,width:80,hidden:b==0?false:true,editor:afStudio.models.TypeBuilder.createEditor(),fieldDefinition:{name:a,type:"varchar",exists:false}}},beforeInit:function(){var f=this,g=f._data.data,a=["id"],b=!Ext.isEmpty(g),e=[new Ext.grid.RowNumberer()];if(g.length>0){Ext.each(g,function(m,k){var l={header:m.name,dataIndex:"c"+k,width:80,hidden:false,renderer:afStudio.models.TypeBuilder.createRenderer(m.type),fieldDefinition:Ext.apply(m,{exists:true})};if(!m.autoIncrement){l.editor=afStudio.models.TypeBuilder.createEditor(m.type,m.size,m["default"])}e.push(l);a.push({name:"c"+k})})}for(var d=e.length-1;d<=this.maxColumns;d++){e.push(this.createUninitColumn(d));a.push({name:"c"+d})}f.store=new afStudio.models.ModelStore({proxy:f.storeProxy,readerCfg:{fields:a,idProperty:"id"}});f.store.load({params:{start:0,limit:f.recordsPerPage}});f.columns=e;afStudio.models.ModelGrid.superclass.beforeInit.apply(this,arguments);var j=new Ext.PagingToolbar({store:f.store,displayInfo:true,displayMsg:"Displaying records {0} - {1} of {2}",pageSize:f.recordsPerPage});var c={iconCls:"icon-database-table",loadMask:true,viewConfig:{forceFit:true},tbar:[{text:"Save",iconCls:"icon-model-save",scope:this,handler:function(l,m){var k=this.getColumnModel(),i=[];Ext.iterate(k.config,function(o){if(o.id!="numberer"&&o.fieldDefinition.exists){i.push(o.fieldDefinition)}});if(i.length){var n=this.getTopToolbar();n.getComponent("insert").enable();n.getComponent("delete").enable()}afStudio.xhr.executeAction({url:afStudioWSUrls.modelListUrl,params:{xaction:"alterModel",model:f.model,schema:f.schema,fields:Ext.encode(i)},mask:{msg:String.format('Saving "{0}" model...',f.model),region:"center"},showNoteOnSuccess:false,logMessage:String.format('Model "{0}" was successfully saved.',f.model),scope:this,run:function(o){this.fireEvent("alterfield");this.getStore().save()}})}},"-",{text:"Create Widget",iconCls:"icon-widgets-add",handler:function(k,l){var i=f.ownerCt.getCreateWidgetWindow();i.show()}},"-",{text:"Insert",itemId:"insert",disabled:!b,iconCls:"icon-model-row-insert",menu:{items:[{text:"Insert after",scope:f,handler:f.insertAfterField},{text:"Insert before",scope:f,handler:f.insertBeforeField}]}},"-",{text:"Delete",itemId:"delete",disabled:!b,iconCls:"icon-model-row-delete",scope:this,handler:function(k,m){var i=this.getSelectionModel().getSelectedCell();if(i){var l=this.store.getAt(i[0]);this.store.remove(l)}}},"->",{text:"Import",iconCls:"icon-model-import",scope:this,handler:function(k,l){var i=f.ownerCt.getImportWindow();i.show()}},{text:"Export",iconCls:"icon-model-export",scope:this,handler:function(i,k){f.ownerCt.getExportWindow()}}],bbar:j};Ext.apply(this,Ext.apply(this.initialConfig,c))},afterInit:function(){afStudio.models.ModelGrid.superclass.afterInit.apply(this,arguments);this.addEvents("alterfield","alterfieldexception","alterfieldfailure","logmessage")},insertAfterField:function(c,i){var g=this,a=g.getSelectionModel().getSelectedCell(),f=a?a[0]+1:this.store.getCount();var d=new g.store.recordType({name:"",type:"varchar",size:"11",required:false});g.stopEditing();g.store.insert(f,d);g.startEditing(f,a?a[1]:0)},insertBeforeField:function(){var d=this,a=d.getSelectionModel().getSelectedCell(),c=a?a[0]:0;var b=new d.store.recordType({name:"",type:"varchar",size:"11",required:false});d.stopEditing();d.store.insert(c,b);d.startEditing(c,a?a[1]:0)}});Ext.reg("afStudio.models.modelGrid",afStudio.models.ModelGrid);Ext.ns("afStudio.models");afStudio.models.EditFieldWindow=Ext.extend(Ext.Window,{maskWindow:function(a){this.bwrap.mask(a?a:"loading...")},unmaskWindow:function(){this.bwrap.unmask()},updateFieldDefinition:function(c){var d=this,b=d.fieldIndex,a=d.gridView.cm;a.setColumnHeader(b,c.name);a.config[b].editor=afStudio.models.TypeBuilder.createEditor(c.type,Ext.util.Format.trim(c.size),c["default"]);a.config[b].renderer=afStudio.models.TypeBuilder.createRenderer(c.type);d.gridView.refresh();a.config[b].fieldDefinition.name=c["name"];a.config[b].fieldDefinition.type=c.type;a.config[b].fieldDefinition.size=Ext.util.Format.trim(c.size);a.config[b].fieldDefinition.required=c["required"];a.config[b].fieldDefinition["default"]=c["default"];a.config[b].fieldDefinition.autoIncrement=c["autoIncrement"];a.config[b].fieldDefinition.key=c["key"];a.config[b].fieldDefinition.relation=c["relation"];a.config[b].fieldDefinition.onDelete=c["onDelete"]},doFieldAction:function(g){var f=this,d=f.gridView.grid,b=d.model,e=d.schema,a,c;a=afStudioWSUrls.modelListUrl;c="alterModelUpdateField";afStudio.xhr.executeAction({url:a,params:{xaction:c,model:b,field:g.field,schema:e,fieldDef:Ext.encode(g.fieldData)},mask:{ctn:f},run:function(i,j){f.updateFieldDefinition(g.fieldData);Ext.isFunction(g.callback)?g.callback():null;d.fireEvent("alterfield")},error:function(i,k,j){d.fireEvent(j?"alterfieldfailure":"alterfieldexception",i)}})},updateModelField:function(c,a){var b=this;this.doFieldAction({field:c,fieldData:a,callback:Ext.util.Functions.createDelegate((function(){this.closeEditFieldWindow()}),b)})},createModelField:function(e){var d=this,c=d.fieldDefinition,b=d.fieldIndex,a=d.gridView.cm;this.doFieldAction({fieldData:e,callback:Ext.util.Functions.createDelegate((function(){a.config[b].fieldDefinition.exists=true;this.closeEditFieldWindow()}),d)})},closeEditFieldWindow:function(){if(this.closeAction=="hide"){this.hide()}else{this.close()}},saveUpdates:function(){var e=this,c=e.fieldDefinition,b=e.fieldIndex,a=e.gridView.cm,f=c.exists,d=e.fieldForm.getForm();if(d.isValid()){var g=d.getFieldValues();if(f){if(c.name!=g.name){Ext.MessageBox.confirm("Confirm","Field name has been changed - all data for old field will be lost. Are you sure you want to do that?",function(i){if(i=="yes"){e.updateModelField(c.name,g)}})}else{e.updateModelField(c.name,g)}}else{e.createModelField(g)}}},cancelEditing:function(){this.closeEditFieldWindow()},loadFieldData:function(){var d=this,b=d.fieldDefinition,e=d.gridView,c=d.fieldForm.getForm();c.loadRecord(new Ext.data.Record(b));if(b.foreignModel){c.findField("relation").setValue(b.foreignModel+"."+b.foreignReference)}var a;if(b.key){a=b.key}else{if(b.primaryKey||b.index||b.index){a=b.primaryKey?"primary":(b.index=="unique"?"unique":(b.index?"index":""))}}c.findField("key").setValue(a)},onShowEvent:function(){var c=this.fieldForm,b=c.getComponent("fields-tab");c.getForm().reset();var a=b.findByType("field");Ext.each(a,function(d){d.setValue("")});b.setActiveTab(0);this.loadFieldData()},_beforeInitComponent:function(){var b=this;var a=new Ext.FormPanel({ref:"fieldForm",baseCls:"x-plain",style:"padding: 5px",border:false,labelWidth:100,defaults:{width:230,msgTarget:"qtip"},items:[{xtype:"textfield",fieldLabel:"Name",allowBlank:false,maskRe:/[\w]/,validator:function(c){return/^[^\d]\w*$/im.test(c)?true:afStudio.models.TypeBuilder.invalidFieldName},name:"name"},{xtype:"afStudio.models.typeCombo",fieldLabel:"Type",allowBlank:false,name:"type"},{xtype:"numberfield",allowDecimals:false,allowNegative:false,fieldLabel:"Size",name:"size"},{xtype:"tabpanel",itemId:"fields-tab",width:336,height:100,style:"margin-top: 10px;",activeTab:0,defaults:{layout:"form",frame:true},items:[{title:"Attributes",defaults:{width:215},items:[{xtype:"checkbox",fieldLabel:"Required",name:"required"},{xtype:"textfield",fieldLabel:"Default value",name:"default"}]},{title:"Key",defaults:{width:215},items:[{xtype:"checkbox",fieldLabel:"Autoincrement",name:"autoIncrement"},{xtype:"combo",fieldLabel:"Key",typeAhead:true,triggerAction:"all",editable:false,mode:"local",valueField:"field",displayField:"field",store:[["","None"],["primary","Primary"],["index","Index"],["unique","Unique"]],hiddenName:"key",name:"key"}]},{title:"Relation",defaults:{width:215},items:[{xtype:"relationcombo",relationUrl:afStudioWSUrls.modelListUrl,listWidth:250,fieldLabel:"Relation",name:"relation"},{xtype:"combo",fieldLabel:"On Delete",typeAhead:true,triggerAction:"all",editable:false,mode:"local",valueField:"field",displayField:"field",store:[["cascade","cascade"],["setnull","setnull"],["restrict","restrict"],["none","none"]],hiddenName:"onDelete",name:"onDelete"}]}]},{xtype:"spacer",height:10}],buttons:[{text:"Save",iconCls:"icon-accept",scope:this,handler:this.saveUpdates},{text:"Cancel",iconCls:"afs-icon-cancel",scope:this,handler:this.cancelEditing}]});return{title:"Edit Field",modal:true,frame:true,width:360,autoHeight:true,resizable:false,closeAction:"hide",closable:false,items:[a]}},initComponent:function(){Ext.apply(this,Ext.applyIf(this.initialConfig,this._beforeInitComponent()));afStudio.models.EditFieldWindow.superclass.initComponent.apply(this,arguments);this._afterInitComponent()},_afterInitComponent:function(){var a=this;a.on({scope:this,show:this.onShowEvent})}});Ext.ns("afStudio.models");afStudio.models.DependencyCellEditorBuilder=Ext.extend(Ext.util.Observable,{defaultEditor:null,mainDataIndex:"type",dependencyDataIndex:"default",sizeDataIndex:"size",grid:null,init:function(a){this.grid=a;this.grid.on({scope:this,beforeedit:this.onGridBeforeEdit})},onGridBeforeEdit:function(c){var f=this,d=c.column,a=c.grid.getStore().getAt(c.row),i=c.grid.getColumnModel(),j=i.getDataIndex(d),g=a.get(f.mainDataIndex),k=a.get(f.sizeDataIndex),b;if(j==f.dependencyDataIndex){if(this.defaultEditor){i.config[d].editor=this.defaultEditor}b=afStudio.models.TypeBuilder.createEditor(g,k);this.defaultEditor=i.config[d].editor;i.config[d].editor=b?b:this.defaultEditor}}});Ext.preg("cellEditorBuilder",afStudio.models.DependencyCellEditorBuilder);Ext.ns("afStudio.models");afStudio.models.ModelTab=Ext.extend(Ext.TabPanel,{modelUrl:afStudioWSUrls.modelListUrl,alterModelAction:function(b){var a=this;afStudio.xhr.executeAction({url:a.modelUrl,params:{xaction:"read",model:a.modelName,schema:a.schemaName},mask:{region:"center",msg:"Updating "+a.modelName+" model..."},showNoteOnSuccess:false,run:function(c,d){a.fieldsStructure=c;b(c)}})},onAlterModel:function(){var a=this,b=a._modelData;a.alterModelAction(function(c){a.remove(b,true);a._modelData=a.createModelDataGrid(c);a.insert(0,a._modelData);a.doLayout()})},onAlterField:function(){var b=this._modelConfig,a=this._modelData;this.alterModelAction(function(c){b.loadModelData(c)})},createModelConfigGrid:function(a){var b=this;return new afStudio.models.FieldsGrid({itemId:"model-fields",_data:a,model:b.modelName,schema:b.schemaName})},createModelDataGrid:function(a){var b=this,c=b.modelName;return new afStudio.models.ModelGrid({itemId:"model-data",title:c,_data:a,model:b.modelName,schema:b.schemaName,storeProxy:new Ext.data.HttpProxy({api:{read:afStudioWSUrls.getModelGridDataReadUrl(c),create:afStudioWSUrls.getModelGridDataCreateUrl(c),update:afStudioWSUrls.getModelGridDataUpdateUrl(c),destroy:afStudioWSUrls.getModelGridDataDeleteUrl(c)}})})},getCreateWidgetWindow:function(){var a=this;if(!a.createWidgetWindow){a.createWidgetWindow=new afStudio.models.CreateWidgetWindow({model:a.modelName,fields:a.fieldsStructure})}a.createWidgetWindow.fields=a.fieldsStructure;return a.createWidgetWindow},getImportWindow:function(){var a=this;if(!a.importWindow){a.importWindow=new afStudio.models.ImportWindow({model:a.modelName})}return a.importWindow},getExportWindow:function(){var a=this;afStudio.xhr.executeAction({url:afStudioWSUrls.modelListUrl,params:{cmd:"exportData",model:a.modelName},scope:this})},_beforeInitComponent:function(){var c=this,a=c.fieldsStructure,d=c.modelName,b=c.schemaName;this._modelConfig=c.createModelConfigGrid(a);this._modelData=c.createModelDataGrid(a);return{activeTab:0,items:[c._modelData,c._modelConfig]}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.models.ModelTab.superclass.initComponent.apply(this,arguments);this._afterInitComponent()},_afterInitComponent:function(){var a=this,c=a._modelConfig,b=a._modelData;this.relayEvents(c,["altermodel"]);this.relayEvents(b,["alterfield"]);a.on({scope:a,altermodel:a.onAlterModel,alterfield:a.onAlterField})}});Ext.reg("afStudio.models.modelTab",afStudio.models.ModelTab);Ext.ns("afStudio.dbQuery");afStudio.dbQuery.QueryResultsGrid=Ext.extend(Ext.grid.GridPanel,{recordsPerPage:50,queryUrl:afStudioWSUrls.dbQueryQueryUrl,loadResultsData:function(a){this.getStore().loadData(a)},_beforeInitComponent:function(){var g=this,a=this.queryResult.meta||[],j=this.title||"Query Result",k,e=[],b=[],c;if(a.length>0){b=[new Ext.ux.grid.PagingRowNumberer({header:"Rec #",width:50})];for(var d=0,f=a.length;d<f;d++){b.push({header:a[d],dataIndex:a[d],width:80});e.push({name:a[d]})}}Ext.apply(g.queryParam,{query:g.queryResult.query});k=new Ext.data.JsonStore({url:g.queryUrl,root:"data",totalProperty:"total",baseParams:g.queryParam,fields:e});c=new Ext.PagingToolbar({store:k,displayInfo:true,displayMsg:"Displaying records {0} - {1} of {2}",pageSize:g.recordsPerPage});return{title:j,iconCls:"icon-database-table",loadMask:true,store:k,columns:b,columnLines:true,viewConfig:{forceFit:true,emptyText:"Empty data-set"},bbar:c}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.dbQuery.DataGrid.superclass.initComponent.apply(this,arguments);this._afterInitComponent()},_afterInitComponent:function(){var a=this;a.on({scope:a,afterrender:function(){a.loadResultsData(a.queryResult?a.queryResult:[])}})}});Ext.reg("afStudio.dbQuery.queryResultsGrid",afStudio.dbQuery.QueryResultsGrid);Ext.ns("afStudio.dbQuery");afStudio.dbQuery.QueryResultsTab=Ext.extend(Ext.TabPanel,{createQueryResult:function(b,d){var a={closable:true};a.title=b.query;if(b.success===false){var c=Ext.isArray(b.message)?b.message.join(", "):b.message;a.html=String.format("<div>Query: <i><b>{0}</b></i><br /><br />Error: {1}</div>",b.query,c)}else{if(b.data.length&&b.meta.length){d.query=b.query;Ext.apply(a,{xtype:"afStudio.dbQuery.queryResultsGrid",queryParam:d,queryResult:b})}else{var c=Ext.isArray(b.message)?b.message.join(", "):b.message;a.html=String.format("<div>Query: <i><b>{0}</b></i><br /><br />{1}</div>",b.query,c)}}return a},_beforeInitComponent:function(){var b=this,a=[];Ext.iterate(this.metaData.dataset,function(e,d){var c=b.createQueryResult(e,Ext.apply({},b.metaData.queryParam));a.push(c)});return{activeTab:0,enableTabScroll:true,items:a}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.dbQuery.QueryResultsTab.superclass.initComponent.apply(this,arguments);this._afterInitComponent()},_afterInitComponent:function(){}});Ext.reg("afStudio.dbQuery.queryResultsTab",afStudio.dbQuery.QueryResultsTab);Ext.ns("afStudio.dbQuery");afStudio.dbQuery.TableModelTab=Ext.extend(Ext.TabPanel,{modelUrl:afStudioWSUrls.modelListUrl,createStructureGrid:function(a){return new afStudio.dbQuery.StructureGrid({itemId:"structure-grid",storeDataUrl:this.modelUrl,metaData:a,model:this.modelName,schema:this.schemaName})},createDataGrid:function(a){return new afStudio.dbQuery.DataGrid({itemId:"data-grid",storeDataUrl:afStudioWSUrls.getModelGridDataReadUrl(this.modelName),metaData:a,model:this.modelName,schema:this.schemaName})},_beforeInitComponent:function(){var a=this;this._structureGrid=a.createStructureGrid(a.metaData);this._dataGrid=a.createDataGrid(a.metaData);return{activeTab:0,items:[a._dataGrid,a._structureGrid]}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.dbQuery.TableModelTab.superclass.initComponent.apply(this,arguments);this._afterInitComponent()},_afterInitComponent:function(){var c=this,b=c._modelConfig,a=c._modelData}});Ext.reg("afStudio.dbQuery.tableModelTab",afStudio.dbQuery.TableModelTab);Ext.ns("afStudio.dbQuery");afStudio.dbQuery.DataGrid=Ext.extend(Ext.grid.GridPanel,{recordsPerPage:50,_beforeInitComponent:function(){var g=this,a=g.metaData,c=["id"],b,f,e=[];if(a.length>0){e=[new Ext.ux.grid.PagingRowNumberer({header:"Rec #",width:50})];for(var d=0;d<a.length;d++){e.push({header:a[d].name,dataIndex:"c"+d,width:80,renderer:afStudio.models.TypeBuilder.createRenderer(a[d].type)});c.push({name:"c"+d})}}b=new Ext.data.JsonStore({url:g.storeDataUrl,root:"data",idProperty:"id",fields:c});f=new Ext.PagingToolbar({store:b,displayInfo:true,displayMsg:"Displaying records {0} - {1} of {2}",pageSize:g.recordsPerPage});return{title:"Data",iconCls:"icon-database-table",loadMask:true,store:b,columns:e,columnLines:true,viewConfig:{forceFit:true},bbar:f}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.dbQuery.DataGrid.superclass.initComponent.apply(this,arguments);this._afterInitComponent()},_afterInitComponent:function(){var a=this;this.on("afterrender",function(b){b.getStore().load({params:{start:0,limit:a.recordsPerPage}})})}});Ext.ns("afStudio.dbQuery");afStudio.dbQuery.StructureGrid=Ext.extend(Ext.grid.GridPanel,{loadModelData:function(a){this.getStore().loadData(a)},booleanRenderer:function(b,c,a){c.css+=" x-grid3-check-col-td";return'<div class="x-grid3-check-col'+(b?"-on":"")+'"> </div>'},_beforeInitComponent:function(){var e=this,b,c;function a(f,g){return g.primaryKey?"primary":(g.index=="unique"?"unique":(g.index?"index":null))}function d(f,g){return(g.foreignModel&&g.foreignReference)?g.foreignModel+"."+g.foreignReference:null}b=new Ext.data.JsonStore({url:e.storeDataUrl,autoLoad:false,baseParams:{xaction:"read",model:e.model,schema:e.schema},idProperty:"id",fields:[{name:"id"},{name:"key",mapping:"id",convert:a},{name:"relation",mapping:"id",convert:d},{name:"autoIncrement"},{name:"primaryKey"},{name:"index"},{name:"name"},{name:"type"},{name:"size"},{name:"required"},{name:"default"},{name:"foreignTable"},{name:"foreignModel"},{name:"foreignReference"},{name:"onDelete"}]});c=new Ext.grid.ColumnModel({defaults:{sortable:true},columns:[{header:'<div class="model-pk-hd">&#160;</div>',width:25,dataIndex:"key",renderer:function(l,g,f,m,j,i){var k="";switch(l){case"primary":k='<div class="pk-cell">&#160;</div>';break;case"index":k='<div class="index-cell">&#160;</div>';break;case"unique":k='<div class="unique-cell">&#160;</div>';break}return k}},{header:"Name",width:100,dataIndex:"name"},{header:"Type",width:100,dataIndex:"type"},{header:"Size",width:50,dataIndex:"size"},{header:"Autoincrement",width:55,dataIndex:"autoIncrement",renderer:e.booleanRenderer},{header:"Default value",width:100,dataIndex:"default"},{header:"Relation",width:150,sortable:true,dataIndex:"relation"},{header:"Required",width:50,sortable:true,dataIndex:"required",align:"center",renderer:e.booleanRenderer},{header:"On Delete",width:50,sortable:true,dataIndex:"onDelete",align:"center"}]});return{title:"Structure",iconCls:"icon-table-gear",store:b,colModel:c,columnLines:true,loadMask:true,autoScroll:true,viewConfig:{forceFit:true}}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.dbQuery.StructureGrid.superclass.initComponent.apply(this,arguments);this._afterInitComponent()},_afterInitComponent:function(){var c=this,b=c.getStore(),a=c.getColumnModel();c.loadModelData(c.metaData)}});Ext.reg("afStudio.dbQuery.structureGrid",afStudio.dbQuery.StructureGrid);Ext.ns("afStudio.dbQuery");afStudio.dbQuery.DBStructureTree=Ext.extend(Ext.tree.TreePanel,{structureUrl:afStudioWSUrls.dbQueryDatabaseListUrl,getCurrentConnection:function(){var a=this.getSelectionModel().getSelectedNode();return a?(a.hasChildNodes()?a.attributes.connection:a.parentNode.attributes.connection):null},maskTree:function(a){this.body.mask(a?a:"loading...")},unmaskTree:function(){this.body.unmask()},onBeforeLoad:function(a,b,c){this.maskTree.defer(10,this,["loading..."])},onLoad:function(a,b,c){this.unmaskTree()},onNodeClick:function(a,b){this.fireEvent("dbnodeclick",a,b,a.isLeaf()?"table":"database")},_beforeInitComponent:function(){var b=this;var a=new Ext.tree.AsyncTreeNode({id:"database",text:"Databases",expanded:true});return{layout:"fit",margins:"0 0 0 5",boxMinWidth:150,animate:true,autoScroll:true,containerScroll:true,rootVisible:false,root:a,dataUrl:b.structureUrl}},initComponent:function(){Ext.apply(this,Ext.applyIf(this.initialConfig,this._beforeInitComponent()));afStudio.dbQuery.DBStructureTree.superclass.initComponent.apply(this,arguments);this._afterInitComponent()},_afterInitComponent:function(){var c=this,a=c.getLoader();c.addEvents("dbnodeclick");var b=new Ext.tree.TreeSorter(c,{folderSort:true});c.on({click:c.onNodeClick,buffer:500,scope:c});a.on({beforeload:c.onBeforeLoad,load:c.onLoad,scope:c})}});Ext.reg("afStudio.dbQuery.dbStructureTree",afStudio.dbQuery.DBStructureTree);Ext.ns("afStudio.dbQuery");afStudio.dbQuery.ContentPanel=Ext.extend(Ext.Panel,{maskContent:function(a){this.body.mask(a?a:"loading","x-mask-loading");return this},unmaskContent:function(){this.body.unmask();return this},clearPanel:function(){this.removeAll(true);return this},createTableListGrid:function(a){return new Ext.grid.GridPanel({title:"Tables",autoScroll:true,columns:[{header:"Name"}],store:new Ext.data.JsonStore({fields:[{name:"text"}],data:a}),viewConfig:{forceFit:true}})},showQueryResult:function(c){var b=c.result.dataset,e=c.result.success,a={};this.maskContent();if(e){if(Ext.isArray(b)&&b.length>1){a=new afStudio.dbQuery.QueryResultsTab({metaData:{dataset:b,queryParam:c.queryParam}})}else{if(b[0].data.length&&b[0].meta.length){a=new afStudio.dbQuery.QueryResultsGrid({queryResult:b[0],queryParam:c.queryParam})}else{var d=Ext.isArray(b[0].message)?b[0].message.join(", "):b[0].message;a.html=String.format("<div>Query: <i><b>{0}</b></i><br /><br />{1}</div>",b[0].query,d)}}}else{var d="";Ext.iterate(b,function(f){d+=String.format("<div>Query: <i>{0}</i><br />Error: {1}</div> <hr />",f.query,f.message)});Ext.apply(a,{html:c.result.message+"<br /><br />"+d})}this.unmaskContent().clearPanel().add(a);this.doLayout()},showTableData:function(c){var d=this,a=c.model,b=c.schema;afStudio.xhr.executeAction({url:afStudioWSUrls.modelListUrl,params:{xaction:"read",model:a,schema:b},mask:{msg:"loading metadata...",ctn:d.body},run:function(f,g){var e=new afStudio.dbQuery.TableModelTab({metaData:f.data,modelName:a,schemaName:b});d.clearPanel().add(e);d.doLayout()},error:function(f,g){var e={html:String.format("<div>Error: {0}</div>",f.message)};d.clearPanel().add(e);d.doLayout()}})},showDatabaseTables:function(b){this.maskContent();var a=this.createTableListGrid(b);this.unmaskContent().clearPanel().add(a);this.doLayout()},_beforeInitComponent:function(){return{region:"center",margins:"0 5 0 0",layout:"fit",border:true,bodyBorder:true,hideBorders:true}},initComponent:function(){Ext.apply(this,Ext.applyIf(this.initialConfig,this._beforeInitComponent()));afStudio.dbQuery.ContentPanel.superclass.initComponent.apply(this,arguments);this._afterInitComponent()},_afterInitComponent:function(){var a=this;a.on({render:function(b){(function(){a.maskContent("Please select table...")}).defer(100)}})}});Ext.reg("afStudio.dbQuery.contentPanel",afStudio.dbQuery.ContentPanel);Ext.ns("afStudio.dbQuery");afStudio.dbQuery.QueryForm=Ext.extend(Ext.FormPanel,{queryUrl:afStudioWSUrls.dbQueryComplexQueryUrl,executeQuery:function(){var c=this,d=c.getForm(),e=c.queryTypeCmp.getValue(),a=this.dbQueryWindow.westPanel.getCurrentConnection(),b=Ext.apply(d.getFieldValues(),a);if(e=="sql"&&!a){afStudio.Msg.warning("Connection is not specified. <br /> Please select DataBase or DB's table.");return}c.dbQueryWindow.maskDbQuery();d.submit({clientValidation:true,url:c.queryUrl,params:{connection:a,start:0,limit:afStudio.dbQuery.QueryResultsGrid.prototype.recordsPerPage},success:function(f,g){c.dbQueryWindow.unmaskDbQuery();c.fireEvent("executequery",{result:g.result,queryParam:b})},failure:function(f,g){c.dbQueryWindow.unmaskDbQuery();switch(g.failureType){case Ext.form.Action.CLIENT_INVALID:afStudio.Msg.info("DBQuery","Query text is empty.");break;case Ext.form.Action.CONNECT_FAILURE:afStudio.Msg.error("DBQuery","Ajax communication failed");break;case Ext.form.Action.SERVER_INVALID:c.fireEvent("executequery",{result:g.result,queryParam:b});break}}})},_beforeInitComponent:function(){var a=this;return{region:"north",layout:"form",height:140,frame:true,iconCls:"icon-sql",margins:"0 5 5 5",title:"SQL",items:[{layout:"column",border:false,defaults:{border:false},items:[{layout:"form",columnWidth:1,style:"margin-right: 5px;",items:{xtype:"combo",ref:"../../queryTypeCmp",fieldLabel:"Query type",anchor:"100%",triggerAction:"all",value:"sql",hiddenName:"type",name:"type",store:[["sql","sql"],["propel","propel"]]}},{items:{xtype:"button",text:"Query",iconCls:"icon-accept",scope:a,handler:a.executeQuery}}]},{xtype:"textarea",ref:"queryText",enableKeyEvents:true,msgTarget:"qtip",allowBlank:false,blankText:"Query field is required",hideLabel:true,height:80,name:"query",anchor:"100% "}]}},initComponent:function(){Ext.apply(this,Ext.applyIf(this.initialConfig,this._beforeInitComponent()));afStudio.dbQuery.QueryForm.superclass.initComponent.apply(this,arguments);this._afterInitComponent()},_afterInitComponent:function(){var a=this;a.addEvents("executequery");this.queryText.on({scope:this,keydown:this.onQueryFieldKeyDown})},onQueryFieldKeyDown:function(a,b){if(b.ctrlKey&&b.getKey()==Ext.EventObject.ENTER){this.executeQuery()}}});Ext.reg("afStudio.dbQuery.queryForm",afStudio.dbQuery.QueryForm);Ext.ns("afStudio.dbQuery");afStudio.dbQuery.QueryWindow=Ext.extend(Ext.Window,{onExecuteQuery:function(a){this.centerPanel.showQueryResult(a)},onDBNodeClick:function(c,d,a){var b=this;switch(a){case"table":b.centerPanel.showTableData(c.attributes);break;case"database":b.centerPanel.showDatabaseTables(c.childNodes);break}},maskDbQuery:function(a){this.body.mask("Querying...","x-mask-loading")},unmaskDbQuery:function(){this.body.unmask()},cancelBtnPressed:function(){this.close()},_beforeInitComponent:function(){var a=this;a.westPanel=new afStudio.dbQuery.DBStructureTree({region:"west",split:true,width:250});a.northPanel=new afStudio.dbQuery.QueryForm({dbQueryWindow:a});a.centerPanel=new afStudio.dbQuery.ContentPanel();return{title:"Database Query",width:1007,height:600,closable:true,draggable:true,plain:true,modal:true,maximizable:true,bodyBorder:false,border:false,items:[a.northPanel,a.westPanel,a.centerPanel],layout:"border"}},initComponent:function(){Ext.apply(this,Ext.applyIf(this.initialConfig,this._beforeInitComponent()));afStudio.dbQuery.QueryWindow.superclass.initComponent.apply(this,arguments);this._afterInitComponent()},_afterInitComponent:function(){var a=this;a.relayEvents(a.westPanel,["dbnodeclick"]);a.relayEvents(a.northPanel,["executequery"]);a.on({scope:a,dbnodeclick:a.onDBNodeClick,executequery:a.onExecuteQuery})}});Ext.namespace("afStudio.layoutDesigner.view");afStudio.layoutDesigner.view.TabbedViewCloseMenuPlugin=Ext.extend(Ext.ux.TabCloseMenu,{renameTabText:"Rename Tab",createMenu:function(){if(!this.menu){var a=[{itemId:"close",text:this.closeTabText,scope:this,handler:this.onClose},{itemId:"rename",text:this.renameTabText,scope:this,handler:this.onRename}];if(this.showCloseAll){a.push("-")}a.push({itemId:"closeothers",text:this.closeOtherTabsText,scope:this,handler:this.onCloseOthers});if(this.showCloseAll){a.push({itemId:"closeall",text:this.closeAllTabsText,scope:this,handler:this.onCloseAll})}this.menu=new Ext.menu.Menu({items:a})}return this.menu},setActiveTabProperty:function(a){this.active=a},allTabsAreClosed:function(){if(this.tabs.items.getCount()==0){this.tabs.fireEvent("alltabswereclosed")}},confirmTabClosingDialog:function(a,c){var b=this;Ext.Msg.confirm("Layout Designer",a,function(d){if(d=="yes"){c()}})},pickTabsToClose:function(b){var d=this;var a=[];var c=[];this.tabs.items.each(function(e){if(e.closable){if(!b||e!=this.active){a.push(e);c.push(e.viewMeta.attributes.title)}}},this);return{tabs:a,meta:c}},onRename:function(){var a=this.active;if(!this.pickerWin){this.pickerWin=new afStudio.layoutDesigner.TabNamePickerWindow();this.pickerWin.on("tabnamepicked",this.renameTab,this)}this.pickerWin.show(a,function(){var b=this.pickerForm.tabNameField;b.setValue(a.title);b.focus(true,200)})},renameTab:function(b){var a=this.active;a.setTitle(b);a.fireEvent("viewtitlechange",a,b)},onClose:function(){var d=this,c=this.active,b;b='Are you sure you want to delete tab view "'+c.viewMeta.attributes.title+'"';function a(){var e=this.active;if(e.fireEvent("beforeclose",e)!==false){e.fireEvent("close",e);this.tabs.remove(e);this.allTabsAreClosed()}}this.confirmTabClosingDialog(b,Ext.util.Functions.createDelegate(a,d))},onCloseOthers:function(){var d=this,c;var b=this.pickTabsToClose(true);c="Are you sure you want to delete tab views? <br />"+b.meta.join(", ");function a(e){this.doClose(e)}this.confirmTabClosingDialog(c,Ext.util.Functions.createDelegate(a,d,[b.tabs]))},onCloseAll:function(){var d=this,c;var b=this.pickTabsToClose(false);c="Are you sure you want to delete all tab views and their components?";function a(e){this.doClose(e)}this.confirmTabClosingDialog(c,Ext.util.Functions.createDelegate(a,d,[b.tabs]))},doClose:function(b){var a=this.active;if(a.fireEvent("beforeclose",a,true,b)!==false){Ext.each(b,function(c){c.fireEvent("close",c);this.tabs.remove(c)},this)}this.allTabsAreClosed()}});Ext.preg("afStudio.layoutDesigner.view.tabbedViewCloseMenuPlugin",afStudio.layoutDesigner.view.TabbedViewCloseMenuPlugin);Ext.namespace("afStudio.layoutDesigner.view");afStudio.layoutDesigner.view.TabViewPanel=Ext.extend(Ext.TabPanel,{constructor:function(a){Ext.apply(a,{enableTabScroll:true,plugins:new afStudio.layoutDesigner.view.TabbedViewCloseMenuPlugin()});afStudio.layoutDesigner.view.TabViewPanel.superclass.constructor.call(this,a)},allTabsAreClosed:function(){if(this.items.getCount()==0){this.fireEvent("alltabswereclosed")}},onRender:function(b,a){afStudio.layoutDesigner.view.TabViewPanel.superclass.onRender.call(this,b,a);this.addEvents("alltabswereclosed")},initEvents:function(){afStudio.layoutDesigner.view.TabViewPanel.superclass.initEvents.call(this);this.strip.on("dblclick",this.onStripDblClick,this)},onStripMouseDown:function(b){if(b.button!==0){return}b.preventDefault();var a=this.findTargets(b);if(a.close){if(a.item.fireEvent("beforeclose",a.item)!==false){a.item.fireEvent("close",a.item);this.remove(a.item)}this.allTabsAreClosed();return}if(a.item&&a.item!=this.activeTab){this.setActiveTab(a.item)}},onStripDblClick:function(c){var b=this.plugins,a=this.findTargets(c);if(!Ext.isEmpty(a.item)){b.setActiveTabProperty(a.item);b.onRename()}}});Ext.namespace("afStudio.layoutDesigner.view");afStudio.layoutDesigner.view.ViewMessageBox=Ext.extend(Ext.Panel,{floating:true,style:"z-index: 10; text-align: center; font-size: 20px;",width:600,_beforeInitComponent:function(){var a=this;return{items:{ref:"messageHolder",xtype:"container",style:"padding: 20px",html:this.viewMessage}}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.layoutDesigner.view.ViewMessageBox.superclass.initComponent.apply(this,arguments)},initEvents:function(){afStudio.layoutDesigner.view.ViewMessageBox.superclass.initEvents.call(this);var a=this;a.on({scope:a,afterrender:a.onAfterRender});a.viewContainer.on("afterlayout",a.onContainerAfterLayout,a)},beforeDestroy:function(){afStudio.layoutDesigner.view.ViewMessageBox.superclass.beforeDestroy.call(this);var a=this;a.viewContainer.un("afterlayout",a.onContainerAfterLayout,a);a.viewContainer=a.viewMessage=null},updatePosition:function(){var b=this.viewContainer.getBox(),a=Ext.util.Format.round(b.width/2,0)-this.getWidth()/2,c=Ext.util.Format.round(b.height/2,0)-this.getHeight();this.setPosition(a,c)},onAfterRender:function(){this.updatePosition()},onContainerAfterLayout:function(){this.updatePosition()}});Ext.namespace("afStudio.layoutDesigner.view");afStudio.layoutDesigner.view.MetaDataProcessor=function(){return{isViewTabbed:function(a){return Ext.isDefined(a["i:tab"])?true:false},getContentViewMeta:function(b){var a,c;if(Ext.isArray(b["i:area"])){Ext.each(b["i:area"],function(d,e){if(d.attributes.type=="content"){a=d;c=e;return false}})}else{a=b["i:area"]}return{contentView:a,contentIdx:c}},changeContentViewMetaData:function(e,d){var b=this.getContentViewMeta(d),g=this.isViewTabbed(b.contentView),a=g?this.getTabbedViewComponents(b.contentView["i:tab"]):this.getNormalViewComponents(b.contentView["i:component"]);var i={};if(e=="tabbed"){var c=Ext.apply({title:d["i:title"]},b.contentView.attributes);delete c.type;i={"attributes":b.contentView.attributes,"i:tab":{"attributes":c}};if(!Ext.isEmpty(Ext.flatten(a))){i["i:tab"]["i:component"]=Ext.flatten(a)}}else{var f=Ext.apply({},b.contentView.attributes);f.layout=(f.layout>a.maxLayout)?f.layout:a.maxLayout;i={"attributes":f,"i:component":Ext.flatten(a.components)}}if(!Ext.isEmpty(b.contentIdx)){d["i:area"][b.contentIdx]=i}else{d["i:area"]=i}return d},getTabbedViewComponents:function(b){var c,a;if(Ext.isDefined(b)){c=[];if(Ext.isArray(b)){a=1;Ext.each(b,function(e,d){if(e["i:component"]){if(e.attributes.layout>a){a=e.attributes.layout}c.push(this.getNormalViewComponents(e["i:component"]))}},this)}else{if(b["i:component"]){a=b.attributes.layout;c.push(this.getNormalViewComponents(b["i:component"]))}}}return{components:c,maxLayout:a}},getNormalViewComponents:function(a){var b;if(Ext.isDefined(a)){b=[];if(Ext.isArray(a)){Ext.each(a,function(e,d){b.push(e)})}else{b.push(a)}}return b}}}();Ext.namespace("afStudio.layoutDesigner.view");afStudio.layoutDesigner.view.ViewFactory=function(){return{viewLayoutConfig:{1:[1],2:[0.5,0.5],3:[0.25,0.75],4:[0.75,0.25],5:[0.33,0.33,0.33],6:[0.5,0.25,0.25],7:[0.25,0.5,0.25],8:[0.25,0.25,0.25,0.25],9:[0.4,0.2,0.2,0.2]},getLayoutCfg:function(a){return this.viewLayoutConfig[a]},getLayoutColumnsNumber:function(a){return this.getLayoutCfg(a).length},getLayoutColumnMaxValue:function(a){return this.getLayoutColumnsNumber(a)-1},buildLayout:function(b){var a=[];if(Ext.isArray(b["i:area"])){Ext.each(b["i:area"],function(e,c,d){a.push(this.createView(e,c))},this)}else{a.push(this.createView(b["i:area"],0))}return a},createView:function(b,e){var d,c,a;switch(b.attributes.type){case"content":c={viewMetaPosition:e,region:"center"};break;case"sidebar":c={viewMetaPosition:e,region:"west",split:true,collapseMode:"mini",width:b.attributes.width?b.attributes.width:200};break;case"footer":c={viewMetaPosition:e,region:"south",split:true,collapseMode:"mini",height:130};break}c.viewMeta=b;a=afStudio.layoutDesigner.view.MetaDataProcessor.isViewTabbed(b)?new afStudio.layoutDesigner.view.TabbedView(c):new afStudio.layoutDesigner.view.NormalView(c);return a}}}();Ext.namespace("afStudio.layoutDesigner.view");afStudio.layoutDesigner.view.NormalView=Ext.extend(Ext.ux.Portal,{widgetMetaUrl:afStudioWSUrls.widgetUrl,viewMetaPosition:0,emptyViewMessage:"View has no widgets added yet, add you first widget to get started.",viewLayout:1,emptyView:true,setViewMessageBox:function(a){if(!Ext.isDefined(this.viewMessageBox)){this.viewMessageBox=new afStudio.layoutDesigner.view.ViewMessageBox({viewContainer:this.ownerCt,viewMessage:a})}return this.viewMessageBox},showEmptyViewMessage:function(){this.setViewMessageBox(this.emptyViewMessage);this.add(this.viewMessageBox)},getViewLayout:function(){return this.viewMeta.attributes.layout},getViewComponentsMetaData:function(){return this.viewMeta["i:component"]},getPage:function(){return this.findParentByType("afStudio.layoutDesigner.view.page",true)},constructor:function(a){if(!Ext.isDefined(a.viewMeta.attributes.layout)){a.viewMeta.attributes.layout=this.viewLayout}afStudio.layoutDesigner.view.NormalView.superclass.constructor.call(this,a)},_beforeInitComponent:function(){var b=this;var a=this.initView();return{items:a}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.layoutDesigner.view.NormalView.superclass.initComponent.apply(this,arguments);this._afterInitComponent()},_afterInitComponent:function(){var a=this;a.addEvents("viewtitlechange");a.on({afterrender:a.initViewComponents,beforeclose:a.onBeforeCloseView,close:a.onCloseView,viewtitlechange:a.onViewTitleChange,beforedrop:a.beforeComponentDrop,drop:a.dropComponent,scope:a})},initView:function(){var e=this,b=afStudio.layoutDesigner.view.ViewFactory,d=this.getViewLayout(),a=b.getLayoutCfg(d),c=[];Ext.each(a,function(f,g,j){c.push(e.createViewColumn(g,f))});return c},initViewComponents:function(){var d=this,c=this.getViewComponentsMetaData();if(!Ext.isEmpty(c)){this.emptyView=false;if(Ext.isArray(c)){Ext.each(c,function(e,k,j){var g=e.attributes.column||0,f=d.createViewComponent(e,null);d.items.itemAt(g).add(f)})}else{var b=c.attributes.column||0,a=d.createViewComponent(c,null);d.items.itemAt(b).add(a)}d.doLayout()}else{this.emptyView=true;this.showEmptyViewMessage()}},getComponentMetaIndex:function(d,g){var b=g?g:this.getViewComponentsMetaData();var c;for(var e=0,a=b.length;e<a;e++){var f=true;Ext.iterate(d.attributes,function(i,j){if(b[e]["attributes"][i]!=j){return(f=false)}});if(f){c=e;break}}return c},updateViewMetaData:function(b){var a=this.ownerCt;a.updateMetaData({meta:this.viewMeta,position:this.viewMetaPosition,callback:b})},deleteViewMetaData:function(){var a=this.ownerCt;var b=Ext.apply({},this.viewMeta);delete this.viewMeta;a.deleteViewMetaData({meta:b,position:this.viewMetaPosition})},addViewComponentMetaData:function(a){var b=this.viewMeta["i:component"];if(Ext.isArray(b)){b.push(a)}else{if(Ext.isDefined(b)){this.viewMeta["i:component"]=[b,a]}else{this.viewMeta["i:component"]=a}}this.updateViewMetaData()},deleteViewComponentMetaData:function(a){var c=this.viewMeta["i:component"];if(Ext.isArray(c)){var b=this.getComponentMetaIndex(a);if(Ext.isDefined(b)){c.splice(b,1)}if(c.length==0){delete this.viewMeta["i:component"]}}else{delete this.viewMeta["i:component"]}this.updateViewMetaData()},setLayoutMeta:function(g){var j=this.viewMeta["i:component"],c=afStudio.layoutDesigner.view.MetaDataProcessor,e=afStudio.layoutDesigner.view.ViewFactory,b=this.ownerCt,a=e.getLayoutColumnMaxValue(g);this.viewMeta.attributes.layout=g;if(Ext.isDefined(j)){if(Ext.isArray(j)){for(var d=0,f=j.length;d<f;d++){if(j[d]["attributes"]["column"]>=a){j[d]["attributes"]["column"]=a}}}else{if(j["attributes"]["column"]>=a){j["attributes"]["column"]=a}}}var l;if(b.viewMeta&&c.isViewTabbed(b.viewMeta)){var k=b.getActiveTab();l=b.items.indexOf(k)}this.updateViewMetaData(function(i){this.refreshPageLayout();if(l){i.layoutView.getContentView().setActiveTab(l)}})},addViewComponent:function(b,d){var a=this.createViewComponent(b,d);var c=0;b.attributes.column=c;this.addViewComponentMetaData(b);if(this.emptyView){this.remove(this.viewMessageBox,true);this.emptyView=false}this.items.itemAt(c).add(a);this.doLayout()},createViewColumn:function(b,a){return{itemId:"portal-column-"+b,columnWidth:a,style:"padding: 5px",defaults:{bodyCssClass:"layout-designer-widget"}}},createViewComponent:function(e,f,c){var d=this,i=e.attributes.name,b=e.attributes.module,a=d.getPage(),j=a.pageMeta["i:title"];var g=new Ext.ux.Portlet({componentMeta:e,frame:true,title:String.format("{0} / {1}",b,i),html:String.format("<br /><center>Widget {0} </center><br />",f||j),tools:[{id:"close",handler:Ext.util.Functions.createDelegate(d.removeWidget,d)}],buttons:[{text:"Preview",handler:Ext.util.Functions.createDelegate(d.previewWidget,d,[i,b,e])},{text:"Edit",handler:Ext.util.Functions.createDelegate(d.editWidget,d,[i,b,e])}],buttonAlign:"center"});return g},previewWidget:function(c,d,b){var a=b.attributes.module+"/"+b.attributes.name;afStudio.WD.previewWidget(a)},editWidget:function(b,c,a){afStudio.xhr.executeAction({url:this.widgetMetaUrl,params:{module_name:c,action_name:b},mask:{region:"center"},showNoteOnSuccess:false,run:function(e,f){var d=e.data;afStudio.WD.showWidgetDesigner({uri:d.widgetUri,actionPath:d.actionPath,actionName:d.actionName,securityPath:d.securityPath,placeType:d.placeType,place:d.place})}})},removeWidget:function(d,c,a){var b=a.componentMeta;this.deleteViewComponentMetaData(b);a.destroy()},onBeforeCloseView:Ext.emptyFn,onCloseView:function(a){this.deleteViewMetaData()},onViewTitleChange:function(a,b){this.viewMeta.attributes.title=b;this.updateViewMetaData()},beforeComponentDrop:Ext.emptyFn,getColumnMetaData:function(b){var c={component:[],index:[]},a=this.getViewComponentsMetaData();if(Ext.isArray(a)){Ext.iterate(a,function(f,d,e){if((f.attributes.column||0)==b){c.component.push(f);c.index.push(d)}})}else{if((a.attributes.column||0)==b){c.component.push(a);c.index.push(0)}}return c},dropComponent:function(d){var b=d.panel,i=b.componentMeta,g=d.position,c=d.columnIndex;var a=Ext.util.Functions.createDelegate(function(l){for(var k=0,j=l.index.length;k<j;k++){this.viewMeta["i:component"][l.index[k]]=l.component[k]}},this);i.attributes.column=d.columnIndex;var e=this.getColumnMetaData(c),f=this.getComponentMetaIndex(i,e.component);if(!Ext.isEmpty(e.component)){if(f>g){e.component.dragUp(f,g);a(e)}else{if(f<g){e.component.dragDown(f,g);a(e)}}}this.updateViewMetaData()}});Ext.reg("afStudio.layoutDesigner.view.normalView",afStudio.layoutDesigner.view.NormalView);Ext.namespace("afStudio.layoutDesigner.view");afStudio.layoutDesigner.view.Page=Ext.extend(Ext.Container,{layout:"border",_beforeInitComponent:function(){afStudio.vp.mask({msg:String.format('"{0}" view building...',this.pageMeta["i:title"]),region:"center"});var a=afStudio.layoutDesigner.view.ViewFactory.buildLayout(this.pageMeta);return{items:a}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.layoutDesigner.view.Page.superclass.initComponent.apply(this,arguments);this._afterInitComponent()},_afterInitComponent:function(){var a=this;afStudio.vp.unmask("center");a.on("afterrender",a.initPageView,a)},initPageView:function(){this.designPanel=this.ownerCt},refreshPageLayout:function(){var a=this.designPanel;a.updateLayoutView(new afStudio.layoutDesigner.view.Page({pageMeta:this.pageMeta}))},getPageMetaData:function(){return this.pageMeta},getContentView:function(){var a=this.find("region","center")[0];return Ext.isDefined(a)?a:null},getActiveContentView:function(){var c=this,a=c.getContentView(),b=afStudio.layoutDesigner.view.MetaDataProcessor;if(Ext.isEmpty(a)){throw new afStudio.error.ApsError("Content view is not defined! <br />[Class: afStudio.layoutDesigner.view.Page, method: getActiveContentView]")}if(b.isViewTabbed(a.viewMeta)){a=a.getActiveTab()}return a},addWidgetComponentToContentView:function(a){var b=this.getActiveContentView();b.addViewComponent({attributes:{name:a.widget,module:a.module}},a.widgetUri);this.doLayout()},setActiveContentViewLayout:function(b){var c=this,a=this.getActiveContentView();a.setLayoutMeta(b)},updateMetaData:function(b){var a=afStudio.layoutDesigner.view.MetaDataProcessor;if(Ext.isArray(this.pageMeta["i:area"])){this.pageMeta["i:area"][b.position]=b.meta}else{this.pageMeta["i:area"]=b.meta}if(Ext.isFunction(b.callback)){Ext.util.Functions.createDelegate(b.callback,this,[this.designPanel])()}}});Ext.reg("afStudio.layoutDesigner.view.page",afStudio.layoutDesigner.view.Page);Ext.namespace("afStudio.layoutDesigner.view");afStudio.layoutDesigner.view.TabbedView=Ext.extend(afStudio.layoutDesigner.view.TabViewPanel,{viewLayout:1,viewMetaPosition:0,getViewLayout:function(){return this.viewMeta.attributes.layout},getViewTabsMetaData:function(){return this.viewMeta["i:tab"]},addEmptyTabMetaData:function(){var a=this.getViewTabsMetaData();var b;if(Ext.isArray(a)){b=this.viewMeta["i:tab"].push({});b--}else{if(Ext.isDefined(a)){this.viewMeta["i:tab"]=[a,{}];b=1}else{this.viewMeta["i:tab"]=[{}];b=0}}return b},getViewTabMetaData:function(a){return this.getViewTabsMetaData()[a]},getViewTabComponentsMetaData:function(a){return this.getViewTabMetaData(a)["i:component"]},getViewTabLayout:function(b){var a=b.attributes.layout;return !Ext.isDefined(a)?this.getViewLayout():a},constructor:function(a){if(!Ext.isDefined(a.viewMeta.attributes.layout)){a.viewMeta.attributes.layout=this.viewLayout}afStudio.layoutDesigner.view.TabbedView.superclass.constructor.call(this,a)},_beforeInitComponent:function(){var b=this;var a=this.initView();return{activeTab:0,anchor:"100%",items:a}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.layoutDesigner.view.TabbedView.superclass.initComponent.apply(this,arguments);this._afterInitComponent()},_afterInitComponent:function(){var a=this;a.on({alltabswereclosed:a.onAllTabsWereClosed,scope:a})},initView:function(){var c=this,a=this.getViewTabsMetaData(),b=[];Ext.each(a,function(d,f,e){b.push(c.createTabView(d,f))});return b},createTabView:function(c,b){var e=this,d=c.attributes.title;c.attributes.layout=this.getViewTabLayout(c);var a=new afStudio.layoutDesigner.view.NormalView({title:d,viewMeta:c,viewMetaPosition:b,closable:true});return a},updateMetaData:function(b){var a=this.ownerCt;Ext.apply(this.getViewTabMetaData(b.position),b.meta);a.updateMetaData({meta:this.viewMeta,position:this.viewMetaPosition,callback:b.callback})},deleteViewMetaData:function(g){var c=this.ownerCt;if(Ext.isArray(this.viewMeta["i:tab"])){var d=this.viewMeta["i:tab"];for(var e=0,a=d.length;e<a;e++){var f=true;Ext.iterate(g.meta.attributes,function(i,j){if(d[e]["attributes"][i]!=j){f=false}});if(f){delete d[e];break}}var b=[];for(var e=0,a=d.length;e<a;e++){if(Ext.isDefined(d[e])){b.push(d[e])}}if(b.length>0){this.viewMeta["i:tab"]=b}else{delete this.viewMeta["i:tab"]}}else{delete this.viewMeta["i:tab"]}c.updateMetaData(Ext.apply(g,{meta:this.viewMeta}))},addTabViewComponent:function(c){var e=this;var d={"attributes":{layout:1,title:c}};var a=e.addEmptyTabMetaData();function b(f){this.refreshPageLayout();f.layoutView.getContentView().setActiveTab(a)}e.updateMetaData({position:a,meta:d,callback:b})},onAllTabsWereClosed:function(){var b=this.ownerCt;function a(c){this.refreshPageLayout()}Ext.util.Functions.createDelegate(a,b,[b.designPanel])()}});Ext.reg("afStudio.layoutDesigner.view.tabbedView",afStudio.layoutDesigner.view.TabbedView);Ext.namespace("afStudio.layoutDesigner");afStudio.layoutDesigner.WidgetSelectorTreeWindow=Ext.extend(Ext.Window,{widgetListUrl:"/afsLayoutBuilder/getWidgetList",closeWidgetSelectorTreeWindow:function(){if(this.closeAction=="hide"){this.hide()}else{this.close()}},selectWidget:function(){var a=this.selectorTree,d=a.getSelectionModel(),c=d.getSelectedNode();if(this.isNodeWidget(c)){var b={module:this.getNodeAttribute(c,"module"),widget:this.getNodeAttribute(c,"widget"),widgetUri:this.getNodeAttribute(c,"widgetUri")};this.closeWidgetSelectorTreeWindow();this.fireEvent("widgetselect",b)}},loadWidgetList:function(){var b=this.selectorTree.getLoader(),a=this.selectorTree.root;b.load(a,function(){this.expandChildNodes()})},onWidgetSelectorShow:function(){this.addWidgetBtn.disable();this.loadWidgetList()},_beforeInitComponent:function(){var b=this;var a=new Ext.tree.TreePanel({ref:"selectorTree",autoScroll:true,animate:true,containerScroll:true,anchor:"100%",border:false,dataUrl:b.widgetListUrl,root:{nodeType:"node",text:"WidgetList",draggable:false,id:"widget-list-root"},rootVisible:false});return{title:"Add Widget",closeAction:"hide",modal:true,frame:true,width:348,height:400,closable:true,resizable:false,layout:"fit",items:a,buttonAlign:"center",buttons:[{text:"Add Widget",ref:"../addWidgetBtn",disabled:true,handler:b.selectWidget,scope:b},{text:"Cancel",handler:b.closeWidgetSelectorTreeWindow,scope:b}]}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.layoutDesigner.WidgetSelectorTreeWindow.superclass.initComponent.apply(this,arguments);this._afterInitComponent()},_afterInitComponent:function(){var c=this,a=this.selectorTree,b=a.getLoader();c.addEvents("widgetselect");b.on({beforeload:function(d,e,f){e.getOwnerTree().body.mask("loading, please wait...","x-mask-loading")},load:function(d,e,f){e.getOwnerTree().body.unmask()},loadexception:function(d,e,f){e.getOwnerTree().body.unmask()}});a.on({click:c.onNodeClick,dblclick:c.onNodeDblClick,scope:c});c.on({"show":Ext.util.Functions.createDelegate(c.onWidgetSelectorShow,c)})},getNodeAttribute:function(c,b,a){return c.attributes[b]?c.attributes[b]:(a?a:null)},isNodeWidget:function(c){var b=this.getNodeAttribute(c,"type"),a=false;if(b=="xml"){a=true}return a},onNodeClick:function(a,b){if(this.isNodeWidget(a)){this.addWidgetBtn.enable()}else{this.addWidgetBtn.disable()}},onNodeDblClick:function(a,b){if(this.isNodeWidget(a)){this.selectWidget()}}});Ext.namespace("afStudio.layoutDesigner");afStudio.layoutDesigner.TabNamePickerWindow=Ext.extend(Ext.Window,{closePickerWindow:function(){if(this.closeAction=="hide"){this.hide()}else{this.close()}},pickTabName:function(){var b=this.pickerForm.getForm();if(b.isValid()){var a=this.pickerForm.tabNameField.getValue();this.closePickerWindow();this.fireEvent("tabnamepicked",a)}},onTabNamePickerShow:function(){var b=this,a=this.pickerForm;a.getForm().reset();a.tabNameField.focus(true,200)},onTabPickerFieldKeyPress:function(b,a){if(a.getKey()==a.ENTER){this.pickTabName()}},_beforeInitComponent:function(){var b=this;var a=new Ext.FormPanel({ref:"pickerForm",baseCls:"x-plain",anchor:"100%",border:false,defaults:{anchor:"100%",msgTarget:"qtip"},items:[{xtype:"textfield",ref:"tabNameField",allowBlank:false,blankText:"Tab title is required!",vtype:"alphanum",hideLabel:true,height:35,style:"font-size: 20px",enableKeyEvents:true,name:"tabNameField"}]});return{title:"Choose tab title",closeAction:"hide",modal:true,frame:true,width:200,height:100,closable:true,resizable:false,items:a,buttonAlign:"center",buttons:[{text:"Save",handler:b.pickTabName,scope:b},{text:"Cancel",handler:b.closePickerWindow,scope:b}]}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.layoutDesigner.TabNamePickerWindow.superclass.initComponent.apply(this,arguments);this._afterInitComponent()},_afterInitComponent:function(){var b=this,a=this.pickerForm.tabNameField;b.addEvents("tabnamepicked");a.on("keypress",b.onTabPickerFieldKeyPress,b);b.on({show:b.onTabNamePickerShow,scope:b})}});Ext.namespace("afStudio.layoutDesigner");afStudio.layoutDesigner.DesignerPanel=Ext.extend(Ext.Panel,{widgetMetaUrl:afStudioWSUrls.widgetUrl,saveLayoutUrl:afStudioWSUrls.layoutSaveUrl,pagePreviewWindow:null,executeAction:function(a){afStudio.xhr.executeAction({url:a.url,params:a.params,scope:a.scope?a.scope:this,mask:{msg:a.loadingMessage,region:"center"},showNoteOnSuccess:false,run:a.run})},isLayoutTabbed:function(){var a=this.layoutView.getContentView(),b=a.viewMeta;return this.isViewTabbed(b)},getFormatMenuItem:function(b){var a=this.getTopToolbar().getComponent("formatMenu").menu;return a.getComponent(b)},getFormatTypeMenuItem:function(a){var b=this.getFormatMenuItem("typeItem").menu;return b.getComponent(a)},getFormatLayoutMenuItem:function(a){var b=this.getFormatMenuItem("layoutItem").menu;return b.getComponent(a)},updateDesignerPanelControls:function(){var a=this.getFormatMenuItem("addNewTab");if(this.isLayoutTabbed()){this.getFormatTypeMenuItem("tabbedView").setChecked(true,true);a.enable()}else{this.getFormatTypeMenuItem("normalView").setChecked(true,true);a.disable()}},updateLayoutView:function(a){this.removeAll(true);this.layoutView=this.add(a);this.doLayout();this.updateDesignerPanelControls()},_beforeInitComponent:function(){var b=this;var a=new Ext.Toolbar({items:[{text:"Save",itemId:"saveLayoutBtn",iconCls:"icon-save"},"-",{text:"Add Widget",itemId:"addWidgetBtn",iconCls:"icon-add"},"-",{text:"Format",itemId:"formatMenu",iconCls:"icon-format",menu:{ignoreParentClicks:true,items:[{text:"Type",itemId:"typeItem",menu:{defaults:{xtype:"menucheckitem",group:"layoutType"},items:[{itemId:"normalView",type:"normal",text:"Normal"},{itemId:"tabbedView",type:"tabbed",text:"Tabbed"}]}},{text:"Columns",itemId:"layoutItem",menu:{items:[{xtype:"combo",itemId:"layoutStructure",triggerAction:"all",mode:"local",emptyText:"Select an item...",forceSelection:true,store:[[1,"1 - column 100%"],[2,"2 - columns 50/50"],[3,"3 - columns 25/75"],[4,"4 - columns 75/25"],[5,"5 - columns 33/33/33"],[6,"6 - columns - 50/25/25"],[7,"7 - columns 25/50/25"],[8,"8 - columns 25/25/25/25"],[9,"9 - columns - 40/20/20/20"]]}]}},{itemId:"addNewTab",text:"Add new Tab"}]}},"-",{text:"Preview",itemId:"previewPageBtn",iconCls:"icon-preview"}]});return{title:this.layoutPage||"Layout Designer",layout:"fit",tbar:a,items:{xtype:"afStudio.layoutDesigner.view.page",pageMeta:b.layoutMeta,ref:"layoutView"}}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.layoutDesigner.DesignerPanel.superclass.initComponent.apply(this,arguments);this._afterInitComponent()},_afterInitComponent:function(){var e=this,d=e.getTopToolbar(),c=d.getComponent("saveLayoutBtn"),b=d.getComponent("addWidgetBtn"),a=d.getComponent("previewPageBtn");e.addEvents("layouttypechanged");c.on("click",e.onSaveDesignerLayout,e);b.on("click",e.onClickNewWidget,e);a.on("click",e.onPreviewPage,e);e.getFormatLayoutMenuItem("layoutStructure").on({select:e.onSelectDesignerColumnsNumber,scope:e});e.getFormatMenuItem("typeItem").menu.on({itemclick:e.onLayoutTypeChanged,scope:e});e.getFormatMenuItem("addNewTab").on({click:e.onClickAddNewPagesTab,scope:e});e.on("afterrender",e.initDesignerPanel,e)},initDesignerPanel:function(){this.updateDesignerPanelControls()},onLayoutTypeChanged:function(d,g){var j=this,i=d.type,c=j.layoutView.getContentView().viewMeta,b=j.layoutView.pageMeta;var a=j.isViewTabbed(c);switch(i){case"normal":if(a){var f=j.changeContentViewMetaData("normal",b);j.updateLayoutView(new afStudio.layoutDesigner.view.Page({pageMeta:f}))}break;case"tabbed":if(!a){var f=j.changeContentViewMetaData("tabbed",b);j.updateLayoutView(new afStudio.layoutDesigner.view.Page({pageMeta:f}))}break}this.fireEvent("layouttypechanged",d.type);this.updateDesignerPanelControls()},onSelectDesignerColumnsNumber:function(e,a,c){var d=this.layoutView,b=e.getValue();d.setActiveContentViewLayout(b)},onClickAddNewPagesTab:function(){if(!this.tabNamePickerWindow){this.tabNamePickerWindow=new afStudio.layoutDesigner.TabNamePickerWindow();this.tabNamePickerWindow.on("tabnamepicked",this.onAddNewPagesTab,this)}this.tabNamePickerWindow.show()},onAddNewPagesTab:function(a){var b=this.layoutView.getContentView();b.addTabViewComponent(a)},onClickNewWidget:function(){if(!this.widgetSelectorWindow){this.widgetSelectorWindow=new afStudio.layoutDesigner.WidgetSelectorTreeWindow();this.widgetSelectorWindow.on("widgetselect",this.onAddWidget,this)}this.widgetSelectorWindow.show()},onAddWidget:function(a){var b=this.layoutView;b.addWidgetComponentToContentView(a)},onSaveDesignerLayout:function(){var b=this,a=b.layoutView.getPageMetaData();b.executeAction({url:b.saveLayoutUrl,params:{app:b.layoutApp,page:b.layoutPage,definition:Ext.encode(a)},scope:b,run:function(c){afStudio.Msg.info("Layout Designer",c.content);this.fireEvent("logmessage",this,"layout saved")},loadingMessage:"Saving..."})},onPreviewPage:function(){var a=String.format("/#/pages/{0}",this.layoutPage);this.pagePreviewWindow=window.open(a,"layoutDesignerPagePreview")},resizeItems:function(){var c=this;var b=c.columnsNumber;c.resizer=[];for(var a=0;a<b;a++){var d=new Ext.Resizable("portal-column-"+a,{width:200,minWidth:100,minHeight:50,listeners:{beforeresize:function(i,g){var f=Ext.fly(i.el);i._width=Ext.fly(f).getWidth()},resize:function(j,g,f,i){c.resizerHandler(j,g,f,i)}}});c.resizer.push(d)}},autoAdjust:function(){var d=Ext.DomQuery.select('div[class*="x-portlet"]',this.designerPortal.el);for(var c=0,a=d.length;c<a;c++){var e=Ext.getCmp(d[c].id);var b=e.ownerCt.getWidth();e.setWidth(b);Ext.get(d[c]).setWidth(b);e.doLayout();e.ownerCt.doLayout()}}});Ext.reg("afStudio.layoutDesigner.designerPanel",afStudio.layoutDesigner.DesignerPanel);Ext.apply(afStudio.layoutDesigner.DesignerPanel.prototype,afStudio.layoutDesigner.view.MetaDataProcessor);Ext.ns("afStudio.data.type");afStudio.data.type.Type=Ext.extend(Object,{type:null,union:null,editorField:null,invalidMessage:"The value is invalid",restrictions:null,convert:function(a){return null},validate:function(f){var e=afStudio.data.type.TypeRestrictions,b=this.restrictions;if(this.union){if(!this.validateUnion(f)&&!b){return this.invalidMessage}else{if(this.validateUnion(f)){return true}}}var d=true;for(var c in b){var a=e[c],g=b[c],d=a.validate(f,g);if(d!==true){d=false;break}}return d?true:this.invalidMessage},validateUnion:function(f){var b=this.union,d=afStudio.data.Types;if(!Ext.isArray(b)){throw String.format('Type.union: The union "{0}" is not an array.',b)}for(var c=0,a=b.length;c<a;c++){var e=Ext.isString(b[c])?d.getType(b[c]):b[c];if(e.validate(f)===true){return true}}return false},editor:function(g,j){j=Ext.isDefined(j)?Boolean(j):true;var g=g||{},b=this.restrictions?this.restrictions.enumeration:[],f;var a=function(i){if(i==""){return true}i=j?this.convert(i):i;return this.validate(i)}.createDelegate(this);g.validator=a;if(!Ext.isEmpty(b)){var k=[];for(var e=0,d=b.length;e<d;e++){k.push([b[e],b[e]])}f=new Ext.form.ComboBox(Ext.apply({editable:true,typeAhead:true,lazyRender:true,local:true,store:k,triggerAction:"all"},g))}else{var c=this.editorField;if(g.editorField){c=g.editorField;delete g.editorField}f=new c(g)}return f}});Ext.ns("afStudio.data.type");afStudio.data.type.Number=Ext.extend(afStudio.data.type.Type,{type:"number",editorField:Ext.form.NumberField,validate:function(a){if(Ext.isNumber(a)){return afStudio.data.type.Number.superclass.validate.call(this,a)}return this.invalidMessage}});afStudio.data.type.Auto=Ext.extend(afStudio.data.type.Type,{editorField:Ext.form.TextField,type:"auto",convert:function(a){return a}});afStudio.data.type.Boolean=Ext.extend(afStudio.data.type.Type,{type:"boolean",restrictions:{enumeration:[true,false]},convert:function(a){return a===true||a==="true"||a==1?true:false},validate:function(a){if(Ext.isBoolean(a)){return afStudio.data.type.Boolean.superclass.validate.call(this,a)}return this.invalidMessage},editor:function(a){a=Ext.apply(a||{},{editable:false,forceSelection:true});return afStudio.data.type.Boolean.superclass.editor.call(this,a)}});afStudio.data.type.Date=Ext.extend(afStudio.data.type.Type,{type:"date",editorField:Ext.form.DateField,convert:function(d){var b=["m/d/Y","n/j/Y","n/j/y","m/j/y","n/d/y","m/j/Y","n/d/Y","m-d-y","m-d-Y","m/d","m-d","md","mdy","mdY","d","Y-m-d","n-j","n/j"];if(!d){return null}if(Ext.isDate(d)){return d}var e;for(var f=0,a=b.length;f<a&&!e;f++){e=Date.parseDate(d,b[f])}if(e){return e}var c=Date.parse(d);return c?new Date(c):null},validate:function(a){if(Ext.isDate(a)){return afStudio.data.type.Date.superclass.validate.call(this,a)}return this.invalidMessage}});afStudio.data.type.Float=Ext.extend(afStudio.data.type.Number,{type:"float",convert:function(a){return(a!==undefined&&a!==null&&a!=="")?parseFloat(a,10):null}});afStudio.data.type.Integer=Ext.extend(afStudio.data.type.Number,{type:"integer",convert:function(a){return(a!==undefined&&a!==null&&a!=="")?parseInt(a,10):null},validate:function(b){var a=afStudio.data.type.Integer.superclass.validate.call(this,b);return((a===true)&&(b%1==0))?true:this.invalidMessage},editor:function(a){a=Ext.apply(a||{},{allowDecimals:false});return afStudio.data.type.Integer.superclass.editor.call(this,a)}});afStudio.data.type.String=Ext.extend(afStudio.data.type.Type,{editorField:Ext.form.TextField,type:"string",convert:function(a){return(a===undefined||a===null)?"":String(a)},validate:function(a){if(Ext.isString(a)||Ext.isString(this.convert(a))){return afStudio.data.type.String.superclass.validate.call(this,a)}return this.invalidMessage}});afStudio.data.type.VarType=Ext.extend(afStudio.data.type.String,{type:"varType",restrictions:{pattern:/^\{[\w-]+\}$/}});afStudio.data.type.PermissionType=Ext.extend(afStudio.data.type.String,{type:"permissionType",restrictions:{pattern:/^(\w+|\*)(\s*,\s*\w+)*$/}});afStudio.data.type.PositiveInteger=Ext.extend(afStudio.data.type.Integer,{type:"positiveInteger",invalidMessage:"The value must be >= 0",restrictions:{minInclusive:0},editor:function(a){a=Ext.apply(a||{},{allowNegative:false});return afStudio.data.type.PositiveInteger.superclass.editor.call(this,a)}});afStudio.data.type.InternalUriType=Ext.extend(afStudio.data.type.String,{type:"internalUriType",invalidMessage:"The value is not a valid internal URI",restrictions:{pattern:new RegExp("^/?[\\w]+?/[\\w]+?\\??[\\w=\\-&+%{}]*$")}});afStudio.data.type.AbsoluteUriType=Ext.extend(afStudio.data.type.String,{type:"absoluteUriType",restrictions:{pattern:/^\/?[\w/-]+\.[a-z]{1,4}$/}});afStudio.data.type.AnyURI=Ext.extend(afStudio.data.type.String,{type:"anyURI",restrictions:{pattern:RegExp("^((https?|ftp|file):/)?(/[\\w\\-.]+)*/?(\\?[\\w\\-.~%!$&'()*+,;=:@/?]*)?(\\#[\\w\\-.~%!$&'()*+,;=:@/?]*)?$")}});afStudio.data.type.CombinedUriType=Ext.extend(afStudio.data.type.String,{type:"combinedUriType",union:["internalUriType","varType","anyURI"]});afStudio.data.type.ViewType=Ext.extend(afStudio.data.type.String,{type:"viewType",union:["varType"],restrictions:{enumeration:["edit","list","show","layout","html","wizard","menu"]}});afStudio.data.type.ValueType=Ext.extend(afStudio.data.type.String,{type:"valueType",union:["varType"],restrictions:{enumeration:["orm","file","static"]}});afStudio.data.type.ValueStructureType=Ext.extend(afStudio.data.type.String,{type:"valueStructureType",union:["varType"],restrictions:{enumeration:["class & method","source","item"]}});afStudio.data.type.FetchType=Ext.extend(afStudio.data.type.String,{type:"fetchType",union:["varType"],restrictions:{enumeration:["static","instance"]}});afStudio.data.type.AlignType=Ext.extend(afStudio.data.type.String,{type:"alignType",union:["varType"],restrictions:{enumeration:["left","center","right"]}});afStudio.data.type.SortType=Ext.extend(afStudio.data.type.String,{type:"sortType",union:["varType"],restrictions:{enumeration:["ASC","DESC"]}});afStudio.data.type.HandlerType=Ext.extend(afStudio.data.type.String,{type:"handlerType",union:["varType"],restrictions:{enumeration:["beforedestroy","beforehide","beforerender","beforeshow","beforestaterestore","beforestatesave","blur","change","check","destroy","disable","enable","focus","hide","invalid","move","render","resize","show","specialkey","staterestore","statesave","valid","click","beforeselect","collapse","expand","keydown","keyup","keypress","select","autosize","beforequery","activate","initialize","beforepush","beforesync","push","mouseover","mouseout","mousedown","sync"]}});afStudio.data.type.DbNameType=Ext.extend(afStudio.data.type.String,{type:"dbNameType",restrictions:{pattern:/^\w+$/}});afStudio.data.type.ArrayType=Ext.extend(afStudio.data.type.String,{type:"arrayType",restrictions:{pattern:/^\[\w+\s*:\s*["'\.\w]+?(\s*,\s*\w+\s*:\s*["'\.\w]+?)*\]$/}});afStudio.data.type.StateType=Ext.extend(afStudio.data.type.String,{type:"stateType",union:["varType"],restrictions:{enumeration:["editable","readonly","disabled"]}});afStudio.data.type.InputType=Ext.extend(afStudio.data.type.String,{type:"inputType",union:["varType"],restrictions:{enumeration:["input","textarea","checkbox","radio","password","hidden","file","combo","multicombo","doublemulticombo","static","doubletree","datetime","color","date","include"]}});afStudio.data.type.MenuItemType=Ext.extend(afStudio.data.type.String,{type:"menuItemType",restrictions:{enumeration:["item","button"]}});Ext.ns("afStudio.data.type");afStudio.data.type.TypeRestrictions=(function(){return{length:{message:"length: The value's length must be {0}",validate:function(a,b){return a.length==b?true:String.format(this.message,b)}},minLength:{message:"minLength: The value's length must not be less than {0}",validate:function(a,b){return a.length>=b?true:String.format(this.message,b)}},maxLength:{message:"minLength: The value's length must not be more than {0}",validate:function(a,b){return a.length<=b?true:String.format(this.message,b)}},pattern:{message:"pattern: The value contains invalid characters",validate:function(a,b){if(!(b instanceof RegExp)){throw String.format('TypeRestrictions.pattern: The facet "{0}" is not a regular expression.',b)}return b.test(a)?true:this.message}},enumeration:{message:'enum: value "{0}" is not in enumeration list "{1}"',validate:function(a,b){if(!Ext.isArray(b)){throw String.format('TypeRestrictions.enumeration: The facet "{0}" is not an array.',b)}return b.indexOf(a)!=-1?true:String.format(this.message,a,b)}},minInclusive:{message:"minInclusive: value {0} must be greater than or equal to {1}",validate:function(a,b){if(!Ext.isNumber(b)){throw String.format('TypeRestrictions.minInclusive: The facet "{0}" is not a number.',b)}return a>=b?true:String.format(this.message,a,b)}},maxInclusive:{message:"maxInclusive: value {0} must be less than or equal to {1}",validate:function(a,b){if(!Ext.isNumber(b)){throw String.format('TypeRestrictions.maxInclusive: The facet "{0}" is not a number.',b)}return a<=b?true:String.format(this.message,a,b)}},minExclusive:{message:"minExclusive: value {0} must be greater than {1}",validate:function(a,b){if(!Ext.isNumber(b)){throw String.format('TypeRestrictions.minExclusive: The facet "{0}" is not a number.',b)}return a>b?true:String.format(this.message,a,b)}},maxExclusive:{message:"maxExclusive: value {0} must be less than {1}",validate:function(a,b){if(!Ext.isNumber(b)){throw String.format('TypeRestrictions.maxExclusive: The facet "{0}" is not a number.',b)}return a<b?true:String.format(this.message,a,b)}}}})();Ext.ns("afStudio.data");T=afStudio.data.type;afStudio.data.Types=(function(){return{getType:function(a){return this[a.toUpperCase()]},AUTO:new T.Auto,STRING:new T.String,INTEGER:new T.Integer,FLOAT:new T.Float,BOOLEAN:new T.Boolean,DATE:new T.Date,VARTYPE:new T.VarType,POSITIVEINTEGER:new T.PositiveInteger,PERMISSIONTYPE:new T.PermissionType,ANYURI:new T.AnyURI,INTERNALURITYPE:new T.InternalUriType,ABSOLUTEURITYPE:new T.AbsoluteUriType,COMBINEDURITYPE:new T.CombinedUriType,VIEWTYPE:new T.ViewType,VALUETYPE:new T.ValueType,VALUESTRUCTURETYPE:new T.ValueStructureType,FETCHTYPE:new T.FetchType,ALIGNTYPE:new T.AlignType,SORTTYPE:new T.SortType,HANDLERTYPE:new T.HandlerType,DBNAMETYPE:new T.DbNameType,ARRAYTYPE:new T.ArrayType,STATETYPE:new T.StateType,INPUTTYPE:new T.InputType,MENUITEMTYPE:new T.MenuItemType}})();afStudio.data.Types.INT=afStudio.data.Types.INTEGER;afStudio.data.Types.DOUBLE=afStudio.data.Types.FLOAT;afStudio.data.Types.TOKEN=afStudio.data.Types.STRING;afStudio.data.Types.QNAME=afStudio.data.Types.STRING;delete T;Ext.ns("afStudio.model.template");N=afStudio.model.template;N.ModelNode={TITLE:"i:title",DESCRIPTION:"i:description",MENU:"i:menu",CONFIRM:"i:confirm",FIELDS:"i:fields",FIELD:"i:field",COLUMN:"i:column",BUTTON:"i:button",LINK:"i:link",RADIO_GROUP:"i:radiogroup",IF:"i:if",ALTERNATE_DESCRIPTIONS:"i:alternateDescriptions",GROUPING:"i:grouping",SET:"i:set",REF:"i:ref",PARAMS:"i:params",PARAM:"i:param",DATA_SOURCE:"i:datasource",DATA_STORE:"i:datastore",ACTIONS:"i:actions",ACTION:"i:action",ROW_ACTIONS:"i:rowactions",MORE_ACTIONS:"i:moreactions",AREA:"i:area",WIDGET_CATEGORIES:"i:widgetCategories",EXTRA_HELP:"i:extrahelp",OPTIONS:"i:options",CLASS:"i:class",METHOD:"i:method",HANDLER:"i:handler",VALUE:"i:value",TOOLTIP:"i:tooltip",VALIDATOR:"i:validator",HELP:"i:help",TRIGGER:"i:trigger",WINDOW:"i:window",SOURCE:"i:source",ITEM:"i:item"};afStudio.ModelNode=N.ModelNode;delete N;Ext.ns("afStudio.model.template");N=afStudio.model.template;N.BaseTemplate=Ext.extend(Object,{structure:[],processStructure:function(a){Ext.iterate(this.structure,function(e,c){var b=e,d=false;if(Ext.isObject(e)){b=e.name;d=(e.required===true)?true:false}if(a.getImmediateModelNode(b)==null&&d){a.createNode(b)}})},extendStructure:function(b){var d=[];for(var c=0,a=b.length;c<a;c++){var e=b[c];d[c]=Ext.isObject(e)?Ext.apply({},e):e}this.structure=this.structure.concat(d)},getNodeIdx:function(b){var c=this.structure,a=Ext.each(c,function(e,d){return !(Ext.isObject(e)?e.name==b:e==b)});return Ext.isDefined(a)?a:null},setNode:function(d,b){var a=this.getNodeIdx(d);if(a!=null){var c=this.structure[a];if(!Ext.isObject(c)){c=this.structure[a]={name:c}}Ext.iterate(b,function(f,e){c[f]=e})}},removeNode:function(b){var a=this.getNodeIdx(b);if(a!=null){return this.structure.splice(a,1)}return null}});delete N;Ext.ns("afStudio.model.template");N=afStudio.model.template;N.WidgetTemplate=Ext.extend(N.BaseTemplate,{constructor:function(){afStudio.model.template.WidgetTemplate.superclass.constructor.call(this);this.extendStructure([{name:afStudio.ModelNode.TITLE,required:true},afStudio.ModelNode.CONFIRM,afStudio.ModelNode.ACTIONS])}});N.WidgetViewTemplate=Ext.extend(N.WidgetTemplate,{constructor:function(){afStudio.model.template.WidgetViewTemplate.superclass.constructor.call(this);this.extendStructure([{name:afStudio.ModelNode.DATA_SOURCE},{name:afStudio.ModelNode.FIELDS,required:true},afStudio.ModelNode.DESCRIPTION,afStudio.ModelNode.ALTERNATE_DESCRIPTIONS,afStudio.ModelNode.GROUPING])}});N.EditTemplate=Ext.extend(N.WidgetViewTemplate,{});N.ShowTemplate=Ext.extend(N.WidgetViewTemplate,{});N.ListTemplate=Ext.extend(N.WidgetViewTemplate,{constructor:function(){afStudio.model.template.ListTemplate.superclass.constructor.call(this);this.removeNode(afStudio.ModelNode.GROUPING);this.setNode(afStudio.ModelNode.TITLE,{required:false});this.extendStructure([afStudio.ModelNode.PARAMS,afStudio.ModelNode.ROW_ACTIONS,afStudio.ModelNode.MORE_ACTIONS])}});N.WizardTemplate=Ext.extend(N.WidgetTemplate,{constructor:function(){afStudio.model.template.WizardTemplate.superclass.constructor.call(this);this.extendStructure([afStudio.ModelNode.DATA_STORE,{name:afStudio.ModelNode.AREA,required:true},afStudio.ModelNode.WIDGET_CATEGORIES,afStudio.ModelNode.EXTRA_HELP])}});N.HtmlTemplate=Ext.extend(N.WidgetTemplate,{constructor:function(){afStudio.model.template.HtmlTemplate.superclass.constructor.call(this);this.extendStructure([{name:afStudio.ModelNode.PARAMS,required:true},afStudio.ModelNode.OPTIONS,afStudio.ModelNode.MORE_ACTIONS])}});delete N;Ext.ns("afStudio.model");Ext.ns("afStudio.model.widget");afStudio.model.Node=Ext.extend(Ext.util.Observable,{NODE_DATA:"data",pathSeparator:"/",nodeTypes:[],_content:{name:"_content",type:"string"},constructor:function(a){a=a||{};this.leaf=a.leaf;this.tag=this.tag||a.tag;this.modelType=a.modelType||null;this.id=this.id||a.id;if(!this.id){this.id=Ext.id(null,this.tag+"-")}this.initProperties(a.properties);this.initNodeTypes(a.nodeTypes);this[this.NODE_DATA]=this._content?new afStudio.model.Property(this._content):null;this.childNodes=[];this.parentNode=null;this.firstChild=null;this.lastChild=null;this.previousSibling=null;this.nextSibling=null;this.addEvents({"beforeModelNodeAppend":true,"modelNodeAppend":true,"beforeModelNodeRemove":true,"modelNodeRemove":true,"beforeModelNodeMove":true,"modelNodeMove":true,"beforeModelNodeInsert":true,"modelNodeInsert":true,"beforeModelPropertyChanged":true,"modelPropertyChanged":true,"beforeModelNodeCreated":true,"modelNodeCreated":true,"modelReconfigure":true});this.listeners=a.listeners;afStudio.model.Node.superclass.constructor.call(this);var b=a.definition||this.defaultDefinition;if(b){this.initNodeDefinition(b)}this.initEvents()},initProperties:function(a){var b=this,c=a||this.properties;this.properties=new Ext.util.MixedCollection(false,function(d){return d.name});Ext.iterate(c,function(d){b.properties.add(new afStudio.model.Property(d))})},initNodeTypes:function(a){var b=a||this.nodeTypes;if(!Ext.isArray(b)){throw new afStudio.model.error.NodeError("nodeTypes type")}this.nodeTypes=[];Ext.each(b,function(c){this.nodeTypes.push(c)},this)},initNodeDefinition:function(a){this.applyNodeDefinition(a,true)},applyNodeDefinition:function(b,a){var c=this;if(!Ext.isDefined(b)){return}a?this.suspendEvents():null;if(Ext.isObject(b)){var d=Ext.apply({},b);if(d.attributes){this.applyProperties(d.attributes);delete d.attributes}if(Ext.isDefined(d._content)){this.setNodeData(d._content);delete d._content}else{Ext.iterate(d,function(f,e){if(Ext.isArray(e)){Ext.iterate(e,function(g){c.createNode(f,g)})}else{c.createNode(f,e)}})}}else{this.setNodeData(b)}a?this.resumeEvents():null},initEvents:function(){var a=this;a.on({modelNodeCreated:a.onModelNodeCreated,beforeModelPropertyChanged:a.onBeforeModelPropertyChanged,modelPropertyChanged:a.onModelPropertyChanged,beforeModelNodeRemove:a.onBeforeModelNodeRemove})},fireEvent:function(b){if(Ext.data.Node.superclass.fireEvent.apply(this,arguments)===false){return false}var a=this.getOwnerTree();if(a){if(a.proxyNodeEvent.apply(a,arguments)===false){return false}}return true},isLeaf:function(){return this.leaf===true},setFirstChild:function(a){this.firstChild=a},setLastChild:function(a){this.lastChild=a},isLast:function(){return(!this.parentNode?true:this.parentNode.lastChild==this)},isFirst:function(){return(!this.parentNode?true:this.parentNode.firstChild==this)},isDirectRootChild:function(){var a=this.getRootNode();return a==this.parentNode},isSimilarNode:function(a){if(this==a){return false}return(this.tag==a.tag)},isRequired:function(){if(this.getDepth()==0){return true}var a=this.getStructuralData();return a?a.required:false},hasMany:function(){var a=this.getStructuralData();return a?a.hasMany:false},getTypeStructure:function(b){var a={name:null,required:false,hasMany:false,unique:null};if(Ext.isObject(b)){a.name=b.name;a.required=Ext.isBoolean(b.required)?b.required:false;a.hasMany=Ext.isBoolean(b.hasMany)?b.hasMany:false;a.unique=Ext.value(b.unique,null)}else{a.name=b}return a},getStructuralData:function(d){var d=this.parentNode||d;if(d){var e=this.tag,c=d.nodeTypes;var a=Ext.each(c,function(f){return !(e==(Ext.isObject(f)?f.name:f))});var b=Ext.isDefined(a)?c[a]:null;if(b){return this.getTypeStructure(b)}}return null},hasChildWithType:function(a){return this.findChildById(a,false,true)!=null?true:false},hasChildNodes:function(){return !this.isLeaf()&&this.childNodes.length>0},appendChild:function(e){var f=false;if(Ext.isArray(e)){f=e}else{if(arguments.length>1){f=arguments}}if(f){for(var d=0,a=f.length;d<a;d++){this.appendChild(f[d])}}else{if(this.fireEvent("beforeModelNodeAppend",this.ownerTree,this,e)===false){return false}var b=this.childNodes.length;var c=e.parentNode;if(c){if(e.fireEvent("beforeModelNodeMove",e.getOwnerTree(),e,c,this,b)===false){return false}c.removeChild(e)}b=this.childNodes.length;if(b===0){this.setFirstChild(e)}this.childNodes.push(e);e.parentNode=this;var g=this.childNodes[b-1];if(g){e.previousSibling=g;g.nextSibling=e}else{e.previousSibling=null}e.nextSibling=null;this.setLastChild(e);e.setOwnerTree(this.getOwnerTree());this.fireEvent("modelNodeAppend",this.ownerTree,this,e,b);if(c){e.fireEvent("modelNodeMove",this.ownerTree,e,c,this,b)}return e}},removeChild:function(c,b){var a=this.childNodes.indexOf(c);if(a==-1){return false}if(this.fireEvent("beforeModelNodeRemove",this.ownerTree,this,c)===false){return false}this.childNodes.splice(a,1);if(c.previousSibling){c.previousSibling.nextSibling=c.nextSibling}if(c.nextSibling){c.nextSibling.previousSibling=c.previousSibling}if(this.firstChild==c){this.setFirstChild(c.nextSibling)}if(this.lastChild==c){this.setLastChild(c.previousSibling)}this.fireEvent("modelNodeRemove",this.ownerTree,this,c,a);if(b){c.destroy(true)}else{c.clear()}return c},clear:function(a){this.setOwnerTree(null,a);this.parentNode=this.previousSibling=this.nextSibling=null;if(a){this.firstChild=this.lastChild=null}},destroy:function(a){if(a===true){this.purgeListeners();this.clear(true);Ext.each(this.childNodes,function(b){b.destroy(true)});this.childNodes=null}else{this.remove(true)}},insertBefore:function(d,a){if(!a){return this.appendChild(d)}if(d==a){return false}if(this.fireEvent("beforeModelNodeInsert",this.ownerTree,this,d,a)===false){return false}var b=this.childNodes.indexOf(a);var c=d.parentNode;var e=b;if(c==this&&this.childNodes.indexOf(d)<b){e--}if(c){if(d.fireEvent("beforeModelNodeMove",d.getOwnerTree(),d,c,this,b,a)===false){return false}c.removeChild(d)}if(e===0){this.setFirstChild(d)}this.childNodes.splice(e,0,d);d.parentNode=this;var f=this.childNodes[e-1];if(f){d.previousSibling=f;f.nextSibling=d}else{d.previousSibling=null}d.nextSibling=a;a.previousSibling=d;d.setOwnerTree(this.getOwnerTree());this.fireEvent("modelNodeInsert",this.ownerTree,this,d,a,e);if(c){d.fireEvent("modelNodeMove",this.ownerTree,d,c,this,e,a)}return d},remove:function(a){if(this.parentNode){this.parentNode.removeChild(this,a)}return this},removeAll:function(a){var c=this.childNodes,b;while((b=c[0])){this.removeChild(b,a)}return this},item:function(a){return this.childNodes[a]},replaceChild:function(a,c){var b=c?c.nextSibling:null;this.removeChild(c);this.insertBefore(a,b);return c},replaceChildPreserveContent:function(a,c){var b=[].concat(c.childNodes);this.replaceChild(a,c);a.appendChild(b);return c},indexOf:function(a){return this.childNodes.indexOf(a)},getOwnerTree:function(){if(!this.ownerTree){var a=this;while(a){if(a.ownerTree){this.ownerTree=a.ownerTree;break}a=a.parentNode}}return this.ownerTree},getDepth:function(){var b=0,a=this;while(a.parentNode){++b;a=a.parentNode}return b},setOwnerTree:function(a,b){if(a!=this.ownerTree){if(this.ownerTree){this.ownerTree.unregisterNode(this)}this.ownerTree=a;if(b!==true){Ext.each(this.childNodes,function(c){c.setOwnerTree(a)})}if(a){a.registerNode(this)}}},setId:function(b){if(b!==this.id){var a=this.ownerTree;if(a){a.unregisterNode(this)}this.id=b;if(a){a.registerNode(this)}this.onIdChange(b)}},onIdChange:Ext.emptyFn,getPath:function(c){c=c||"id";var e=this.parentNode,a=[this[c]];while(e){a.unshift(e[c]);e=e.parentNode}var d=this.getPathSeparator();return d+a.join(d)},getPathSeparator:function(){return this.getOwnerTree()?this.getOwnerTree().pathSeparator:this.pathSeparator},bubble:function(c,b,a){var d=this;while(d){if(c.apply(b||d,a||[d])===false){break}d=d.parentNode}},cascade:function(f,e,b){if(f.apply(e||this,b||[this])!==false){var d=this.childNodes;for(var c=0,a=d.length;c<a;c++){d[c].cascade(f,e,b)}}},eachChild:function(f,e,b){var d=this.childNodes;for(var c=0,a=d.length;c<a;c++){if(f.apply(e||d[c],b||[d[c]])===false){break}}},filterChildren:function(a){return this.filterChildrenBy(function(b){return b.tag==a})},filterChildrenBy:function(c,b){var a=[];this.eachChild(function(d){if(c.apply(b||d,[d])===true){a.push(d)}},b);return a},findChild:function(a,d,c,b){return this.findChildBy(function(){var e=this.getPropertyValue(d);return(this.tag==a)&&(e&&e==c)},null,b)},findChildById:function(c,a,b){return this.findChildBy(function(){return b?new RegExp("^"+c+"(?:-\\d+)?$","i").test(this.id):this.id==c},null,a)},findChildBy:function(g,f,b){var e=this.childNodes,a=e.length,d=0,j,c;for(;d<a;d++){j=e[d];if(g.call(f||j,j)===true){return j}else{if(b){c=j.findChildBy(g,f,b);if(c!=null){return c}}}}return null},sort:function(e,d){var c=this.childNodes;var a=c.length;if(a>0){var f=d?function(){return e.apply(d,arguments)}:e;c.sort(f);for(var b=0;b<a;b++){var g=c[b];g.previousSibling=c[b-1];g.nextSibling=c[b+1];if(b===0){this.setFirstChild(g)}if(b==a-1){this.setLastChild(g)}}}},contains:function(a){return a.isAncestor(this)},isAncestor:function(a){var b=this.parentNode;while(b){if(b==a){return true}b=b.parentNode}return false},getProperties:function(){return this.properties},getPropertiesHash:function(c){var b=this.getProperties(),a={};b.eachKey(function(d,e){if(!Ext.isEmpty(e.value)||(c&&!Ext.isEmpty(e.defaultValue))){a[d]=c?(Ext.isDefined(e.value)?e.value:e.defaultValue):e.value}});return a},getPropertiesRecordType:function(){var a=["model-id"].concat(this.properties.keys);return Ext.data.Record.create(a)},getPropertiesRecord:function(){var a=this.getPropertiesRecordType(),b=this.getPropertiesHash(true);b["model-id"]=this.id;return new a(b,this.id)},getPropertiesRecordData:function(){var a=this.getPropertiesHash(true);a["model-id"]=this.id;return a},getProperty:function(a){return this.properties.get(a)},getPropertyValue:function(b){var a=this.getProperty(b);return a?a.getValue():undefined},setProperty:function(d,a){var c=this.properties.get(d);if(!Ext.isDefined(c)){return null}var b=c.getValue();if(c.validate(a)&&this.fireEvent("beforeModelPropertyChanged",this,d,a,b)){c.setValue(a);this.fireEvent("modelPropertyChanged",this,d,a,b);if(c.reconfigure){this.reconfigure(c,d,a)}}return c},getNodeData:function(){return this[this.NODE_DATA]},getNodeDataValue:function(){var a=this.getNodeData();return a?a.getValue():undefined},setNodeData:function(c){var b=this.NODE_DATA;if(!this[b]){return}var a=this[b].getValue();if(this.fireEvent("beforeModelPropertyChanged",this,"_content",c,a)){this[b].setValue(c);this.fireEvent("modelPropertyChanged",this,"_content",c,a)}},applyProperties:function(b,a){if(!Ext.isObject(b)){throw new afStudio.model.error.PropertyError("incorrect-properties")}a?this.suspendEvents():null;Ext.iterate(b,function(d,c){if(this.setProperty(d,c)===null){var e=new afStudio.model.Property({name:d,value:c});this.properties.add(e)}},this);a?this.resumeEvents():null},getPropertiesSource:function(){var c=this.getProperties(),b={};c.eachKey(function(d,e){b[d]=e.getPropertyHash()});if(this.isNodeDataUsed()){var a=this.getNodeData();b["_content"]=a.getPropertyHash()}return b},isNodeDataUsed:function(){var a=this.getNodeData();return Ext.isEmpty(this.nodeTypes)&&a},getRootNode:function(){var a=this.parentNode;while(a&&a.parentNode){a=a.parentNode}return a},getModelType:function(){return this.modelType},getNodeConstructorByName:function(d){var a=this.getModelType(),c=String(d).trim(),b=[afStudio.model];if(a){if(["layout","menu"].indexOf(a)==-1){b.unshift(afStudio.model.widget)}}if(/^i:(\w+)/i.test(c)){c=c.replace(/^i:(\w+)/i,function(f,e){return e.ucfirst()})}Ext.iterate(b,function(e){if(Ext.isFunction(e[c])){c=e[c];return false}});return Ext.isFunction(c)?c:null},createNode:function(c,b){var d=null;if(Ext.isEmpty(c)){throw new afStudio.model.error.NodeError("node-undefined")}if(this.fireEvent("beforeModelNodeCreated",this.ownerTree,this,c)){var a=this.getNodeConstructorByName(c);a=a?a:afStudio.model.Node;d=new a({tag:c,modelType:this.getModelType(),definition:b});if(this.fireEvent("modelNodeCreated",this.ownerTree,this,d)){d=this.appendChild(d);d.onNodeCreate()}}return d},onNodeCreate:function(){},reconfigure:function(d,b,c){var a=d.reconfigure;if(Ext.isDefined(a[c])){this.nodeTypes.length=0;this.removeAll(true);Ext.each(a[c],function(e){this.nodeTypes.push(e)},this);this.fireEvent("modelReconfigure",this)}},getNodeValidationName:function(){return this.tag},validate:function(){var d=this.getProperties(),a=this.nodeTypes;var e={node:this.getNodeValidationName(),error:null,children:[]};var b=[];d.eachKey(function(f,g){if(!g.isValid()){var i={};i[f]=g.getErrors();b.push(i)}});if(this.isNodeDataUsed()){var c=this.getNodeData();if(!c.isValid()){b.push({"_content":c.getErrors()})}}Ext.each(a,function(g){var f=this.getTypeStructure(g);if(f.required&&!this.hasChildWithType(f.name)){var i={};i[f.name]=String.format("Required {0} <u>{1}</u> node",f.hasMany?"at least one":"",f.name);b.push(i)}},this);this.eachChild(function(f){var g=f.validate();if(g!==true){e.children.push(g)}});if(b.length>0||e.children.length>0){e.error=Ext.value(b,null);return e}return true},onModelNodeCreated:function(f,b,e){afStudio.Logger.info('@model "modelNodeCreated"',b,e);var g=e.tag,a=e.getStructuralData(b),d=true;var c;if(a){if(b.hasChildWithType(g)){if(!a.hasMany){d=false;c=String.format("<b>{0}</b> can contain only one <u>{1}</u> child node.",b.tag,g)}else{if(a.unique&&b.findChild(g,a.unique,e.getPropertyValue(a.unique))){d=false;c=String.format("<b>{0}</b> property <u>{1}</u> should be unique.",g,a.unique)}}}}else{d=false;c=String.format("<b>{0}</b> cannot contain <u>{1}</u> child node.",b.tag,g)}if(!d){afStudio.Msg.warning("Model",c)}return d},onBeforeModelPropertyChanged:function(b,d,c,a){return true},onModelPropertyChanged:function(b,d,c,a){return true},onBeforeModelNodeRemove:function(a,b,c){return true},toString:function(){var b=this;var a=new Ext.XTemplate('[model.Node: "{tag}", ID: "{id}", {NODE_DATA}: {[this.getData()]}]',{compiled:true,disableFormats:true,getData:function(){return b[b.NODE_DATA]?b[b.NODE_DATA].getValue():null}});return a.apply(this)}});Ext.ns("afStudio.model");afStudio.model.TypedNode=Ext.extend(afStudio.model.Node,{properties:[],constructor:function(a){a=a||{};this.applyType(a.modelType);afStudio.model.TypedNode.superclass.constructor.call(this,a)},applyType:function(b){var c=this[b+"Properties"];if(c){this.properties=this.properties.concat(c)}var a=this[b+"NodeTypes"];if(a){this.nodeTypes=this.nodeTypes.concat(a)}}});Ext.ns("afStudio.model");afStudio.model.Property=Ext.extend(Object,{required:false,readOnly:false,constructor:function(a){Ext.apply(this,a);var b=afStudio.data.Types;if(this.type){if(Ext.isString(this.type)){this.type=b.getType(this.type)||b.AUTO}}else{this.type=b.AUTO}},validate:function(a){return(!this.required&&Ext.isEmpty(a))?true:(this.type.validate(a)===true)},isValid:function(){var a=this.getValue();return this.required?(!Ext.isEmpty(a)&&this.type.validate(a)===true):true},getErrors:function(){var a=this.type.validate(this.value);if(this.required&&Ext.isEmpty(this.value)){a="This property is required."}return a===true?null:a},getValue:function(){return Ext.isDefined(this.value)?this.value:this.defaultValue},setValue:function(a){if(!this.validate(a)){return false}this.value=a},getPropertyHash:function(){var a=["name","value","type","required","readOnly","defaultValue"],c={};for(var b in this){if(!Ext.isFunction(this[b])&&a.indexOf(b)!==-1){c[b]=this[b]}}return c}});Ext.ns("afStudio.model.error");afStudio.model.error.NodeError=Ext.extend(Ext.Error,{name:"afStudio.model.NodeError",lang:{"node-undefined":"Model Node is not defined.","nodeTypes type":'The "nodeTypes" cfg/property type is not correct. Must be an Array.'}});Ext.ns("afStudio.model.error");afStudio.model.error.PropertyError=Ext.extend(Ext.Error,{name:"afStudio.model.PropertyError",lang:{"incorrect-properties":'The "properties" type is not correct, should be an object.'}});afStudio.model.Title=Ext.extend(afStudio.model.Node,{id:afStudio.ModelNode.TITLE,tag:afStudio.ModelNode.TITLE,_content:{name:"_content",required:true}});afStudio.model.AlternateDescriptions=Ext.extend(afStudio.model.Node,{id:afStudio.ModelNode.ALTERNATE_DESCRIPTIONS,tag:afStudio.ModelNode.ALTERNATE_DESCRIPTIONS,properties:[{name:"permissions",type:"permissionType",defaultValue:"*"}],nodeTypes:[{name:afStudio.ModelNode.DESCRIPTION,required:true,hasMany:true}]});afStudio.model.Params=Ext.extend(afStudio.model.Node,{id:afStudio.ModelNode.PARAMS,tag:afStudio.ModelNode.PARAMS,properties:[],nodeTypes:[{name:afStudio.ModelNode.PARAM,required:true,hasMany:true,unique:"name"}]});afStudio.model.Param=Ext.extend(afStudio.model.Node,{tag:afStudio.ModelNode.PARAM,_content:{name:"_content",required:true},defaultDefinition:{attributes:{name:"i:param"}},properties:[{name:"name",type:"token",required:true}]});afStudio.model.Description=Ext.extend(afStudio.model.Node,{tag:afStudio.ModelNode.DESCRIPTION,_content:{name:"_content",required:true},properties:[{name:"image",type:"token"},{name:"condition",type:"token"},{name:"permissions",type:"permissionType",defaultValue:"*"}]});afStudio.model.Root=Ext.extend(afStudio.model.Node,{id:"root",tag:"root",properties:[{name:"xmlns:i",readOnly:true},{name:"xmlns:xsi",readOnly:true},{name:"xsi:schemaLocation",readOnly:true},{name:"type",type:"viewType",required:true,readOnly:true}],constructor:function(a){afStudio.model.Root.superclass.constructor.call(this,a);this.modelType=this.getModelType();this.initStructure(a.structureTpl);this.processStructure()},initStructure:function(a){var b=this.getModelType();if(a){a=Ext.isFunction(a)?a:afStudio.model.template[a]}else{if(b){var c=b.ucfirst()+"Template";a=afStudio.model.template[c]}}this.strTpl=Ext.isFunction(a)?new a():undefined},processStructure:function(){if(!this.strTpl){return}this.suspendEvents();this.strTpl.processStructure(this);this.resumeEvents();this.nodeTypes=this.nodeTypes.concat(this.strTpl.structure)},getRootNode:function(){return this},getModelType:function(){return this.getPropertyValue("type")},getModelNode:function(a){return this.findChildById(a,true)},getImmediateModelNode:function(a){return this.findChildById(a,false,true)},isValid:function(){var a={children:[]};this.eachChild(function(b){var c=b.validate();if(c!==true){a.children.push(c)}});return a.children.length>0?a:true}});afStudio.model.widget.Link=Ext.extend(afStudio.model.Node,{tag:afStudio.ModelNode.LINK,_content:null,properties:[{name:"name",type:"QName",required:true},{name:"action",type:"combinedUriType",required:true},{name:"text",type:"token",required:true},{name:"type",type:"token",readOnly:true,defaultValue:"link"},{name:"permissions",type:"permissionType",defaultValue:"*"}]});afStudio.model.widget.Action=Ext.extend(afStudio.model.Node,{tag:afStudio.ModelNode.ACTION,_content:null,properties:[{name:"name",type:"token",required:true},{name:"url",type:"combinedUriType",required:true},{name:"condition",type:"token"},{name:"script",type:"token"},{name:"params",type:"token"},{name:"icon",type:"absoluteUriType"},{name:"iconCls",type:"token"},{name:"tooltip",type:"token"},{name:"text",type:"token"},{name:"style",type:"token"},{name:"post",type:"boolean",defaultValue:false},{name:"forceSelection",type:"boolean"},{name:"confirmMsg",type:"string"},{name:"confirm",type:"boolean"},{name:"updater",type:"boolean",defaultValue:false},{name:"popup",type:"boolean",defaultValue:false},{name:"popupSettings",type:"token"},{name:"permissions",type:"permissionType",defaultValue:"*"}],defaultDefinition:{attributes:{name:"i:action",url:"#"}},nodeTypes:[{name:afStudio.ModelNode.HANDLER,hasMany:true}],toString:function(){var a=new Ext.XTemplate('[model.Node: "{tag}", ID: "{id}", properties: {[this.toJson(values.properties.map)]}]',{compiled:true,disableFormats:true,toJson:function(b){return Ext.encode({"name":b.name.value,"url":b.url.value})}});return a.apply(this)}});afStudio.model.widget.Trigger=Ext.extend(afStudio.model.Node,{tag:afStudio.ModelNode.TRIGGER,_content:null,properties:[{name:"text",type:"token"},{name:"icon",type:"absoluteUriType",defaultValue:"/images/famfamfam/cancel.png"},{name:"permissions",type:"permissionType",defaultValue:"*"}]});afStudio.model.widget.BaseAction=Ext.extend(afStudio.model.Node,{properties:[{name:"permissions",type:"permissionType",defaultValue:"*"}],nodeTypes:[{name:afStudio.ModelNode.ACTION,required:true,hasMany:true,unique:"name"},{name:afStudio.ModelNode.IF,hasMany:true}]});afStudio.model.widget.Actions=Ext.extend(afStudio.model.widget.BaseAction,{id:afStudio.ModelNode.ACTIONS,tag:afStudio.ModelNode.ACTIONS});afStudio.model.widget.Rowactions=Ext.extend(afStudio.model.widget.BaseAction,{id:afStudio.ModelNode.ROW_ACTIONS,tag:afStudio.ModelNode.ROW_ACTIONS});afStudio.model.widget.Moreactions=Ext.extend(afStudio.model.widget.BaseAction,{id:afStudio.ModelNode.MORE_ACTIONS,tag:afStudio.ModelNode.MORE_ACTIONS});afStudio.model.widget.Button=Ext.extend(afStudio.model.Node,{tag:afStudio.ModelNode.BUTTON,properties:[{name:"name",type:"token",required:true},{name:"label",type:"token",required:true},{name:"action",type:"combinedUriType",required:true},{name:"icon",type:"absoluteUriType"},{name:"iconCls",type:"token"},{name:"state",type:"stateType",defaultValue:"editable"},{name:"style",type:"token"},{name:"updater",type:"boolean",defaultValue:false},{name:"permissions",type:"permissionType",defaultValue:"*"}],nodeTypes:[{name:afStudio.ModelNode.HANDLER,hasMany:true}],defaultDefinition:{attributes:{label:"Button"}}});afStudio.model.widget.Method=Ext.extend(afStudio.model.Node,{id:afStudio.ModelNode.METHOD,tag:afStudio.ModelNode.METHOD,properties:[{name:"name",type:"token",required:true},{name:"type",type:"fetchType",defaultValue:"static"}],defaultDefinition:{attributes:{name:"i:method"}},nodeTypes:[{name:afStudio.ModelNode.PARAM,hasMany:true,unique:"name"}]});afStudio.model.widget.Column=Ext.extend(afStudio.model.Node,{tag:afStudio.ModelNode.COLUMN,_content:null,properties:[{name:"name",type:"dbNameType",required:true},{name:"label",type:"token",required:true},{name:"qtip",type:"boolean",defaultValue:false},{name:"help",type:"token"},{name:"width",type:"positiveInteger"},{name:"editable",type:"boolean",defaultValue:false},{name:"sortable",type:"boolean",defaultValue:true},{name:"resizable",type:"boolean",defaultValue:true},{name:"style",type:"token"},{name:"groupField",type:"boolean"},{name:"sort",type:"sortType"},{name:"hidden",type:"boolean",defaultValue:false},{name:"hideable",type:"boolean",defaultValue:true},{name:"align",type:"alignType",defaultValue:"left"},{name:"filter",type:"arrayType"},{name:"permissions",type:"permissionType",defaultValue:"*"},{name:"link",type:"boolean",defaultValue:false}],defaultDefinition:{attributes:{name:"Column",label:"Column"}},toString:function(){var a=new Ext.XTemplate('[model.Node: "{tag}", ID: "{id}", properties: {[this.toJson(values.properties.map)]}]',{compiled:true,disableFormats:true,toJson:function(b){return Ext.encode({"name":b.name.value,"label":b.label.value})}});return a.apply(this)}});afStudio.model.widget.Item=Ext.extend(afStudio.model.Node,{tag:afStudio.ModelNode.ITEM,_content:{name:"_content",type:"string",required:true},properties:[{name:"value",type:"token",required:true}]});afStudio.model.widget.Handler=Ext.extend(afStudio.model.Node,{tag:afStudio.ModelNode.HANDLER,properties:[{name:"action",type:"token",required:true},{name:"type",type:"handlerType",defaultValue:"click"},{name:"is_script",type:"boolean",defaultValue:true}],defaultDefinition:{attributes:{action:"i:handler"}},nodeTypes:[{name:afStudio.ModelNode.PARAM,hasMany:true,unique:"name"}]});afStudio.model.Class=Ext.extend(afStudio.model.Node,{tag:afStudio.ModelNode.CLASS,_content:{name:"_content",required:true}});afStudio.model.widget.Fields=Ext.extend(afStudio.model.TypedNode,{id:afStudio.ModelNode.FIELDS,tag:afStudio.ModelNode.FIELDS,properties:[{name:"classic",type:"boolean",defaultValue:"false"},{name:"bodyStyle",type:"token"},{name:"redirect",type:"internalUriType"},{name:"remoteLoad",type:"boolean"},{name:"plugin",type:"token"}],listProperties:[{name:"action",type:"internalUriType",defaultValue:"n/a"},{name:"tree",type:"boolean",defaultValue:false},{name:"selectable",type:"boolean",defaultValue:true},{name:"exportable",type:"boolean",defaultValue:true},{name:"expandButton",type:"boolean"},{name:"select",type:"boolean",defaultValue:false},{name:"pager",type:"boolean",defaultValue:true},{name:"remoteSort",type:"boolean",defaultValue:false},{name:"iconCls",type:"token"},{name:"icon",type:"token",defaultValue:"/images/famfamfam/accept.png"},{name:"remoteFilter",type:"boolean"},{name:"pagerTemplate",type:"token"}],editProperties:[{name:"url",type:"internalUriType"},{name:"resetable",type:"boolean",defaultValue:true},{name:"resetlabel",type:"token",defaultValue:"Reset"},{name:"submitlabel",type:"token",defaultValue:"Submit"},{name:"multipart",type:"boolean",defaultValue:false},{name:"submit",type:"boolean",defaultValue:true},{name:"border",type:"boolean",defaultValue:true},{name:"labelWidth",type:"positiveInteger",defaultValue:75}],listNodeTypes:[{name:afStudio.ModelNode.COLUMN,required:true,hasMany:true,unique:"name"}],editNodeTypes:[{name:afStudio.ModelNode.FIELD,required:true,hasMany:true,unique:"name"},{name:afStudio.ModelNode.BUTTON,hasMany:true,unique:"name"},{name:afStudio.ModelNode.LINK,hasMany:true,unique:"name"},{name:afStudio.ModelNode.RADIO_GROUP,hasMany:true,unique:"name"},{name:afStudio.ModelNode.IF}],showNodeTypes:[{name:afStudio.ModelNode.FIELD,required:true,hasMany:true,unique:"name"},{name:afStudio.ModelNode.BUTTON,hasMany:true,unique:"name"},{name:afStudio.ModelNode.LINK,hasMany:true,unique:"name"},{name:afStudio.ModelNode.RADIO_GROUP,hasMany:true,unique:"name"},{name:afStudio.ModelNode.IF}],onBeforeModelNodeRemove:function(a,c,g){var f=afStudio.ModelNode;if(a&&g.tag==f.FIELD){var e=a.root,i=g.getPropertyValue("name"),b=e.getImmediateModelNode(f.GROUPING);if(b&&!Ext.isEmpty(i)){var d=b.findChild(f.REF,"to",i,true);if(d){d.remove(true)}}}return true}});afStudio.model.widget.Datasource=Ext.extend(afStudio.model.Node,{id:afStudio.ModelNode.DATA_SOURCE,tag:afStudio.ModelNode.DATA_SOURCE,properties:[{name:"type",type:"valueType",required:true},{name:"className",type:"token"},{name:"modelName",type:"token"},{name:"lister",type:"boolean",defaultValue:false},{name:"dataLoadedHandler",type:"token"}],nodeTypes:[{name:afStudio.ModelNode.CLASS,required:true},afStudio.ModelNode.METHOD]});afStudio.model.widget.Field=Ext.extend(afStudio.model.Node,{tag:afStudio.ModelNode.FIELD,properties:[{name:"name",type:"token",required:true},{name:"label",type:"token",required:true},{name:"type",type:"inputType",defaultValue:"input"},{name:"selected",type:"token"},{name:"state",type:"stateType",defaultValue:"editable"},{name:"value",type:"token"},{name:"style",type:"token"},{name:"width",type:"positiveInteger"},{name:"height",type:"positiveInteger"},{name:"checked",type:"boolean"},{name:"rich",type:"boolean",defaultValue:false},{name:"content",type:"token"},{name:"module",type:"token"},{name:"action",type:"token"},{name:"fromLegend",type:"token",defaultValue:"Options"},{name:"toLegend",type:"token",defaultValue:"Selected"},{name:"dateFormat",type:"token"},{name:"timeFormat",type:"token"},{name:"clear",type:"boolean",defaultValue:true},{name:"session",type:"boolean",defaultValue:false},{name:"disabled",type:"boolean",defaultValue:false},{name:"plugin",type:"token",defaultValue:"*"},{name:"url",type:"internalUriType"},{name:"vtype",type:"token"},{name:"minChars",type:"positiveInteger"},{name:"permissions",type:"permissionType",defaultValue:"*"}],defaultDefinition:{attributes:{name:"field",label:"field"}},nodeTypes:[{name:afStudio.ModelNode.VALUE},{name:afStudio.ModelNode.TOOLTIP},{name:afStudio.ModelNode.HELP},{name:afStudio.ModelNode.VALIDATOR,hasMany:true,unique:"name"},{name:afStudio.ModelNode.HANDLER,hasMany:true},{name:afStudio.ModelNode.TRIGGER},{name:afStudio.ModelNode.WINDOW},{name:afStudio.ModelNode.IF}],onModelPropertyChanged:function(f,c,i,b){var j=this.getOwnerTree();if(j&&c=="name"){var g=afStudio.ModelNode,a=j.root,e=a.getImmediateModelNode(g.GROUPING);if(e){var d=e.findChild(g.REF,"to",b,true);if(d){if(Ext.isEmpty(i)){afStudio.Msg.warning(String.format("Widget Designer - {0} node",g.FIELD),String.format('Field "{0}" is grouped and must have <b>name</b> property.',b));f.setProperty(c,b);return false}else{d.setProperty("to",i)}}}}return true}});afStudio.model.widget.Radiogroup=Ext.extend(afStudio.model.Node,{tag:afStudio.ModelNode.RADIO_GROUP,properties:[{name:"name",type:"token",required:true},{name:"label",type:"token",required:true},{name:"comment",type:"token"},{name:"help",type:"token"},{name:"permissions",type:"permissionType",defaultValue:"*"}],nodeTypes:[{name:afStudio.ModelNode.FIELD,required:true,hasMany:true,unique:"name"}]});afStudio.model.widget.Ref=Ext.extend(afStudio.model.TypedNode,{tag:afStudio.ModelNode.REF,_content:null,properties:[{name:"to",type:"QName",required:true},{name:"break",type:"boolean",defaultValue:false},{name:"group",type:"boolean",defaultValue:false},{name:"title",type:"token"},{name:"tip",type:"token"},{name:"json",type:"token"}],wizardProperties:[{name:"as",type:"token"}],onBeforeModelPropertyChanged:function(e,b,j){var k=this.getOwnerTree();if(k&&b=="to"){var i=afStudio.ModelNode,a=k.root,g=a.getImmediateModelNode(i.FIELDS),d=a.getImmediateModelNode(i.GROUPING);if(!Ext.isEmpty(j)){var f=g.filterChildrenBy(function(l){return l.tag==i.FIELD&&l.getPropertyValue("name")==j});if(Ext.isEmpty(f)){afStudio.Msg.warning(String.format("Widget Designer - {0} node",i.REF),String.format("Incorrect <u>to</u> property. <br/> Field with <u>name</u> = <b>{0}</b> does not exists.",j));return false}var c=d.findChild(i.REF,"to",j,true);if(c){afStudio.Msg.warning(String.format("Widget Designer - {0} node",i.REF),String.format("Field <b>{0}</b> is already associated with another ref node. <br /> Please use another field name.",j));return false}}}return true}});afStudio.model.widget.Set=Ext.extend(afStudio.model.Node,{tag:afStudio.ModelNode.SET,properties:[{name:"title",type:"token",required:true},{name:"tabtitle",type:"token"},{name:"columns",type:"positiveInteger",defaultValue:1},{name:"float",type:"boolean",defaultValue:false},{name:"collapsed",type:"boolean",defaultValue:false},{name:"tabHeight",type:"positiveInteger",defaultValue:225},{name:"iconCls",type:"token"},{name:"icon",type:"absoluteUriType"}],defaultDefinition:{attributes:{title:"Field-Set"}},nodeTypes:[{name:afStudio.ModelNode.REF,required:true,hasMany:true,unique:"to"}]});afStudio.model.widget.If=Ext.extend(afStudio.model.Node,{tag:afStudio.ModelNode.IF,_content:null,properties:[{name:"test",type:"token",required:true}],nodeCfg:{"i:fields":[{name:afStudio.ModelNode.FIELD,required:true,hasMany:true,unique:"name"},{name:afStudio.ModelNode.BUTTON,hasMany:true,unique:"name"},{name:afStudio.ModelNode.RADIO_GROUP,hasMany:true,unique:"name"}],"i:field":[{name:afStudio.ModelNode.VALUE},{name:afStudio.ModelNode.TOOLTIP},{name:afStudio.ModelNode.HELP},{name:afStudio.ModelNode.VALIDATOR,hasMany:true,unique:"name"},{name:afStudio.ModelNode.HANDLER,hasMany:true}],"i:actions":[{name:afStudio.ModelNode.ACTION,required:true,hasMany:true,unique:"name"}]},onNodeCreate:function(){var b=this,c=this.parentNode.tag,a=this.nodeCfg;Ext.iterate(a,function(e,d){if(e==c){b.nodeTypes.length=0;Ext.each(d,function(f){b.nodeTypes.push(f)});return false}});this.fireEvent("modelReconfigure",this)}});afStudio.model.widget.Source=Ext.extend(afStudio.model.Node,{tag:afStudio.ModelNode.SOURCE,_content:null,properties:[{name:"name",type:"token",required:true}]});afStudio.model.widget.Grouping=Ext.extend(afStudio.model.Node,{id:afStudio.ModelNode.GROUPING,tag:afStudio.ModelNode.GROUPING,properties:[{name:"title",type:"token",defaultValue:"Default"},{name:"isSetting",type:"boolean",defaultValue:false},{name:"collapsed",type:"boolean",defaultValue:false}],nodeTypes:[{name:afStudio.ModelNode.SET,required:true,hasMany:true}]});afStudio.model.widget.Confirm=Ext.extend(afStudio.model.Node,{id:afStudio.ModelNode.CONFIRM,tag:afStudio.ModelNode.CONFIRM,_content:null,properties:[{name:"url",type:"internalUriType",required:true},{name:"permissions",type:"permissionType",defaultValue:"*"},{name:"title",type:"token",defaultValue:"Confirmation"}]});afStudio.model.widget.Value=Ext.extend(afStudio.model.Node,{tag:afStudio.ModelNode.VALUE,properties:[{name:"type",type:"valueType",required:true},{name:"structure",type:"valueStructureType",defaultValue:"source",reconfigure:{"class & method":[{name:afStudio.ModelNode.CLASS,required:true},{name:afStudio.ModelNode.METHOD,required:true}],"source":[{name:afStudio.ModelNode.SOURCE,required:true}],"item":[{name:afStudio.ModelNode.ITEM,required:true,hasMany:true}]}},{name:"permissions",type:"permissionType",defaultValue:"*"}],defaultDefinition:{attributes:{type:"orm"}},nodeTypes:[{name:afStudio.ModelNode.SOURCE,required:true}],onNodeCreate:function(){var c=this,b=this.getProperty("structure"),a=b.reconfigure;Ext.iterate(a,function(e,d){var f=true;Ext.each(d,function(i){var g=c.getTypeStructure(i);if(g.required&&c.hasChildWithType(g.name)===false){return(f=false)}});if(f){b.setValue(e);c.nodeTypes.length=0;Ext.each(d,function(g){c.nodeTypes.push(g)});return false}})}});afStudio.model.widget.Window=Ext.extend(afStudio.model.Node,{tag:afStudio.ModelNode.WINDOW,_content:null,properties:[{name:"title",type:"token",required:true},{name:"component",type:"internalUriType",required:true},{name:"className",type:"token",required:true},{name:"methodName",type:"token",required:true},{name:"width",type:"positiveInteger",defaultValue:500},{name:"iconCls",type:"token"}]});afStudio.model.widget.Validator=Ext.extend(afStudio.model.Node,{tag:afStudio.ModelNode.VALIDATOR,properties:[{name:"name",type:"token",required:true},{name:"permissions",type:"permissionType",defaultValue:"*"}],nodeTypes:[{name:afStudio.ModelNode.PARAM,hasMany:true,unique:"name"}]});Ext.ns("afStudio.definition.error");afStudio.definition.error.DefinitionError=Ext.extend(Ext.Error,{name:"afStudio.definition.DefinitionError",lang:{"create-entity":"Entity was not created"}});Ext.ns("afStudio.definition");afStudio.definition.DataDefinition=Ext.extend(Ext.util.Observable,{data:null,constructor:function(a){a=a||{};this.data=a.data||null;this.addEvents("entityRemove","entityAdd");this.listeners=a.listeners;afStudio.definition.DataDefinition.superclass.constructor.call(this)},getEntity:Ext.emptyFn,removeEntity:Ext.emptyFn,addEntity:Ext.emptyFn,equal:function(a,b){},getData:function(){return this.out(this.data)},setData:function(a){this.data=a;return this},out:function(b,a){return this.cloneObj(b,a)},cloneObj:function(d,e){if(d===null||d===undefined){return d}var c=Object.prototype.toString.call(d);if(c==="[object Date]"){return new Date(d.getTime())}var b,f,a;if(c==="[object Array]"){b=d.length;f=[];while(b--){f[b]=this.cloneObj(d[b],e)}}else{if(c==="[object Object]"&&d.constructor===Object){f={};for(a in d){f[a]=this.cloneObj(d[a],e)}}}if(e===true&&Ext.isBoolean(d)){d=String(d)}return f||d}});Ext.ns("afStudio.definition");afStudio.definition.ViewDefinition=Ext.extend(afStudio.definition.DataDefinition,{getEntity:function(a){var b=this.getEntityObj(a).entity;return this.out(b)},getDataForSave:function(){var a=this.out(this.data,true);return a},setEntityAttribute:function(c,a,i){var e=this.getEntityObj(c),j=e.parent,b=e.key,d=e.idx,f=e.entity;var g=c.getProperty(a);if(a!="_content"&&Ext.isEmpty(i)){this.removeEntityAttribute(f,a);return}if(!Ext.isObject(f)){if(c.getProperties().length>0||c.nodeTypes.length>0){f=j[b]={_content:f}}}if(a=="_content"){if(Ext.isObject(f)){f._content=i}else{if(d!=null){j[b][d]=i}else{j[b]=i}}}else{if(!f.attributes){f.attributes={}}f.attributes[a]=i}},removeEntityAttribute:function(b,a){if(b.attributes){delete b.attributes[a];if(this.isEmptyEntityAttributes(b)){delete b.attributes}}},isEmptyEntityAttributes:function(a){for(var b in a.attributes){return false}return true},addEntity:function(c,e){var g=this.getEntityObj(c),a=g.parent,d=g.key,f=g.entity;var b=this.createEntity(e);this.addEntDefinition(f,e.tag,b)},insertBeforeEntity:function(g,b,e,i){var f=this.getEntityObj(e,i),j=f.parent,a=f.key,c=f.idx;if(!b.isSimilarNode(e)){this.addEntity(g,b);return}var d=this.createEntity(b);if(c!=null){j[a].splice(c,0,d)}},removeEntity:function(c,g){var f=this.getEntityObj(c,g),a=f.parent,b=f.key,e=f.idx,d=f.entity;if(e!=null){a[b].splice(e,1);Ext.isEmpty(a[b])?delete a[b]:null}else{delete a[b]}this.fireEvent("entityRemove",d)},createEntity:function(b){var e=b.getPropertiesHash(),f=b.getNodeData()?b.getNodeData().getValue():null,a=null;var d=true;for(var c in e){d=false;break}if(b.getProperties().length>0||b.nodeTypes.length>0){a={}}if(e&&!d){a={attributes:{}};Ext.apply(a.attributes,e)}if(f!=null){if(Ext.isObject(a)){a._content=f}else{a=f}}if(b.hasChildNodes()){a=!Ext.isObject(a)?{_content:a}:a;b.eachChild(function(i){var g=this.createEntity(i);this.addEntDefinition(a,i.tag,g)},this)}return a},getEntityObj:function(f,k){var e=f.getOwnerTree(),t=f.getPathSeparator(),s=f.getPath().split(t);s.splice(0,2);if(s.length==0){return{parent:null,entity:this.data,key:"root",idx:null}}var p,o,q=null;p=o=this.data;for(var j=0,g=s.length;j<g;j++){var d=s[j],c=d.replace(/-\d+$/,"");p=o;var m=o[c];if(Ext.isDefined(m)){if(Ext.isArray(m)){var b=e.getNodeById(d);if(!b){throw new Ext.Error(String.format('ViewDefinition. Model does not contain Node {0} with ID = "{1}"',f,d))}q=this.searchEntityIndex(o,c,b,(j==g-1)?k:null);if(q==null){throw new Ext.Error(String.format("ViewDefinition. Cannot get model node's entity, node: {0}, path: {1}",f,s))}o=m[q]}else{o=m}}else{o=null;break}}var a=(s[s.length-1]).replace(/-\d+$/,"");var r={parent:p,entity:o,key:a,idx:Ext.isArray(p[a])?q:null};return r},equal:function(a,c){var d=c.getPropertiesHash(),e=c.getNodeData()?c.getNodeData().getValue():null;var b=true;if(Ext.isObject(a)){Ext.iterate(a.attributes,function(g,f){return(!Ext.isEmpty(f)&&d[g]!==f)?(b=false):true});if(b&&Ext.isDefined(a._content)&&e!=a._content){b=false}}else{b=(a==e)}return b},searchEntityIndex:function(k,m,b,l){var j=k[m],f=b.parentNode,d=f.indexOf(b);d=Ext.isEmpty(l)?d:l;if(d==-1){return null}if(d>(j.length-1)){var e=0;Ext.iterate(k,function(n,i,p){if(["attributes","_content",m].indexOf(n)==-1){e+=!Ext.isArray(i)?1:i.length}});d-=e}var a;for(var c=0,g=j.length;c<g;c++){if(this.equal(j[c],b)&&d==c){a=c;break}}return Ext.isNumber(a)?a:null},addEntDefinition:function(c,a,b){var d=c[a];if(Ext.isDefined(d)){if(!Ext.isArray(d)){c[a]=[d]}c[a].push(b)}else{c[a]=b}}});Ext.ns("afStudio.controller.error");afStudio.controller.error.ControllerError=Ext.extend(Ext.Error,{name:"afStudio.controller.ControllerError",lang:{"widget-cfg-incorrect":"Widget configuration object is not correct.","init-view":"View initialization error.","view-constructor":"View constructor is not a Function."}});Ext.ns("afStudio.controller");afStudio.controller.BaseController=Ext.extend(Ext.util.Observable,{viewDefinition:null,pathSeparator:"/",root:null,ready:false,constructor:function(a){a=a||{};this.id=a.id||this.id;if(!this.id){this.id=Ext.id(null,"view-controller-")}if(a.url){if(Ext.isObject(a.url)){this.url=Ext.apply(Ext.isObject(this.url)?this.url:{},a.url)}else{this.url=a.url}}if(a.viewDefinition){this.viewDefinition=new afStudio.definition.ViewDefinition({data:a.viewDefinition})}else{this.viewDefinition=new afStudio.definition.ViewDefinition()}this.views=a.views||{};this.nodeHash={};this.addEvents("beforeModelNodeAppend","modelNodeAppend","beforeModelNodeRemove","modelNodeRemove","beforeModelNodeMove","modelNodeMove","beforeModelNodeInsert","modelNodeInsert","beforeModelPropertyChanged","modelPropertyChanged","beforeModelNodeCreated","modelNodeCreated","modelNodeSelect","modelReconfigure","ready","beforeLoadViewDefinition","loadViewDefinition","beforeSaveViewDefinition","saveViewDefinition");if(a.listeners){this.listeners=a.listeners}afStudio.controller.BaseController.superclass.constructor.call(this)},run:function(){if(!this.viewDefinition.getData()){this.loadViewDefinition()}else{this.initController()}},initController:function(){this.initModel();this.initView();this.ready=true;this.fireEvent("ready",this)},isReady:function(){return this.ready},getViewDefinition:function(){return this.viewDefinition},getUrl:function(b,c){var a=this.url;a=Ext.isObject(a)?a[b]:a;if(a){return c?Ext.urlAppend(a,Ext.urlEncode(c)):a}return null},getView:function(a){return this.views[a]},loadViewDefinition:function(c){var b=this,a=this.getUrl("read");c=Ext.isObject(c)?c:null;if(this.fireEvent("beforeLoadViewDefinition")){afStudio.xhr.executeAction({url:a,params:c,mask:{region:"center"},showNoteOnSuccess:false,scope:b,run:function(d,e){this.viewDefinition.setData(d.data);this.fireEvent("loadViewDefinition",this.viewDefinition);this.initController()}})}},saveView:function(a){this.saveViewDefinition(a)},saveViewDefinition:function(d){var c=this,b=this.getUrl("save"),a=this.viewDefinition.getDataForSave();d=Ext.apply(d||{},{data:Ext.util.JSON.encode(a),createNewWidget:false});if(this.fireEvent("beforeSaveViewDefinition",a)){afStudio.xhr.executeAction({url:b,params:d,mask:{msg:"Processing...",region:"center"},scope:c,run:function(e,f){this.fireEvent("saveViewDefinition",a)}})}},resolveRootNode:function(a){return null},initModel:function(){var c=this.viewDefinition.getData();var b=this.resolveRootNode(c);b=b?b:afStudio.model.Root;var a=new b({definition:c});this.registerModel(a);this.initModelEvents()},initView:function(){Ext.iterate(this.views,function(c,b,a){if(!Ext.isFunction(b.view)){throw new afStudio.controller.error.ControllerError("view-constructor")}this.registerView(c,b.view,b.cfg?b.cfg:{})},this)},initModelEvents:function(){var a=this;a.on({scope:a,modelNodeAppend:function(e,c,d,b){afStudio.Logger.info("@controller modelNodeAppend",c,d,b);this.viewDefinition.addEntity(c,d);afStudio.Logger.info("definition",this.viewDefinition.getData())},modelNodeInsert:function(e,c,d,b,f){afStudio.Logger.info("@controller modelNodeInsert",c,d,b);this.viewDefinition.insertBeforeEntity(c,d,b,f);afStudio.Logger.info("definition",this.viewDefinition.getData())},modelNodeRemove:function(d,b,c,e){afStudio.Logger.info("@controller modelNodeRemove",b,c);this.viewDefinition.removeEntity(c,e);afStudio.Logger.info("definition",this.viewDefinition.getData())},beforeModelPropertyChanged:function(c,d,b){afStudio.Logger.info("@controller beforeModelPropertyChanged",c,d,b);if(d!="structure"){this.viewDefinition.setEntityAttribute(c,d,b)}afStudio.Logger.info("definition",this.viewDefinition.getData())}})},proxyNodeEvent:function(){return this.fireEvent.apply(this,arguments)},getRootNode:function(){return this.root},registerModel:function(a){this.root=a;a.isRoot=true;a.setOwnerTree(this);return a},registerView:function(d,b,a){var c=this;a=Ext.apply(a||{},{controller:c});b=c.views[d]=new b(a);b.relayEvents(c,["modelNodeAppend","modelNodeInsert","modelNodeRemove","modelNodeMove","modelNodeSelect","modelPropertyChanged","modelReconfigure"])},validateModel:function(){return this.root.isValid()},getNodeById:function(a){return this.nodeHash[a]},registerNode:function(a){this.nodeHash[a.id]=a},unregisterNode:function(a){delete this.nodeHash[a.id]},selectModelNode:function(b,a){afStudio.Logger.info("@controller selectModelNode",b);b=Ext.isString(b)?this.getNodeById(b):b;if(!b){return}this.fireEvent("modelNodeSelect",b,a?a:undefined)},destroy:function(){Ext.iterate(this.views,function(b,a){Ext.destroy(a)});this.views=null;this.root=this.viewDefinition=this.nodeHash=null},toString:function(){return String.format("[Controller {0}]",this.id)}});afStudio.controller.ViewController=Ext.extend(afStudio.controller.BaseController,{url:{read:afStudioWSUrls.widgetGetDefinitionUrl,save:afStudioWSUrls.widgetSaveDefinitionUrl},constructor:function(a){a=a||{};afStudio.controller.ViewController.superclass.constructor.call(this,a);if(!a.widget&&!Ext.isObject(a.widget)){throw new afStudio.controller.error.ControllerError("widget-cfg-incorrect")}this.widget=a.widget;this.setupUrls();this.setupViews()},setupUrls:function(){this.url={read:this.getUrl("read",{uri:this.widget.uri}),save:this.getUrl("save",{uri:this.widget.uri})}},setupViews:function(){Ext.apply(this.views,{inspectorTree:{view:afStudio.view.inspector.InspectorTree,cfg:{border:false}},propertyGrid:{view:afStudio.view.property.PropertyGrid,cfg:{border:false}}})},getModelType:function(){var a=this.getRootNode();return a.getModelType()},getWidget:function(){return this.widget},loadViewDefinition:function(a){a=Ext.copyTo(a||{},this.widget,"place, placeType");afStudio.controller.ViewController.superclass.loadViewDefinition.apply(this,[a])},saveView:function(a){a=Ext.copyTo(a||{},this.widget,"uri, place, placeType");a.widgetType=this.getModelType();afStudio.controller.ViewController.superclass.saveView.apply(this,[a])}});Ext.ns("afStudio.view");afStudio.view.ModelMapper=(function(){return{NODE_ID_MAPPER:"_model_",NODE_VALUE_MAPPER:"value",getCmpByModel:function(b,c){var d=Ext.isString(b)?b:b.id,a=null;if(Ext.isDefined(c)){a=this.modelMapper[d+"#"+c]}if(Ext.isEmpty(a)){a=this.modelMapper[d]}if(a){return Ext.isFunction(a)?a():a}return null},getModelByCmp:function(c){var e=c[this.NODE_ID_MAPPER],b,d;var a=e.indexOf("#");if(a!=-1){d=e.substr(a+1);e=e.substring(0,a)}b=this.getModelNode(e);if(d){return[b,b.getPropertyValue(d)]}return b},mapCmpToModel:function(b,a){var c=Ext.isObject(b)?b.id:b;this.modelMapper[c]=a},unmapCmpFromModel:function(a){a=Ext.isString(a)?a:a.id;delete this.modelMapper[a]},createMapper:function(b){var a=Array.prototype.slice.call(arguments,1);return b.createDelegate(this,a)},dumpMapper:function(){afStudio.Logger.info("afStudio.view.ModelMapper",this.modelMapper);afStudio.Logger.info("----------dump-----------");Ext.iterate(this.modelMapper,function(b,a,c){afStudio.Logger.info("\t",b,a)});afStudio.Logger.info("-------------------------")}}})();Ext.ns("afStudio.view");afStudio.view.ModelReflector=(function(){return{EXEC_ADD:"add",EXEC_INSERT:"insert",EXEC_REMOVE:"remove",EXEC_UPDATE:"update",getExecutorToken:function(a){return a.replace(/^i:(\w+)/i,"$1").ucfirst()},correctExecutorLine:function(a,b,c,d){return a},getExecutor:function(c,d,e){var b=this.getExecutorToken(d.tag);b=this.correctExecutorLine(b,c,d,e);var a=String.format("execute{0}{1}{2}",c.ucfirst(),b,e?e.ucfirst():"");afStudio.Logger.info("@executor",a);return Ext.isFunction(this[a])?this[a].createDelegate(this):null}}})();Ext.ns("afStudio.view");afStudio.view.ModelInterface=(function(){return{getController:function(){return this.controller},getModelNodeByPath:function(e){var j=this.getController();var g=Ext.isArray(e)?e:e.split(j.pathSeparator),a=j.getRootNode(),f;for(var d=0,b=g.length;d<b;d++){f=a.findChildById(g[d]);f=!f?a.findChildById(g[d],false,true):f;if(!f){break}a=f}return f},getModelNode:function(a){var b=this.getController();if(Ext.isString(a)){a=(a.indexOf(b.pathSeparator)!=-1)?this.getModelNodeByPath(a):b.getNodeById(a)}return a},getModelNodeProperties:function(a){var a=this.getModelNode(a),b=a.getPropertiesHash(true);b[this.NODE_ID_MAPPER]=a.id;return b},getModelNodeProperty:function(a,b){var c=this.getModelNodeProperties(a);return c[b]},getModelNodeValue:function(b){var b=this.getModelNode(b),a={};a[this.NODE_VALUE_MAPPER]=b.getNodeDataValue();a[this.NODE_ID_MAPPER]=b.id;return a},getPropertyEditor:function(b,c,a){var a=a||{},d=b.getProperty(c);return d.type.editor(a)},isModelNodeExists:function(d,b){var e=this.getController(),a=e.getRootNode();d=!Ext.isString(d)?d.id:d;return e.getNodeById(d)?true:(b?(a.findChildById(d,true,true)!=null?true:false):false)},getModelChildrenProperties:function(e,j,f){if(this.isModelNodeExists(e)){var e=this.getModelNode(e),b=Ext.isString(j)?j:j.tag;var d;if(Ext.isDefined(f)){d=e.filterChildrenBy(function(l){if(l.tag!=b){return false}var k=l.getPropertiesHash(true),i=true;if(Ext.isArray(f)){Ext.each(f,function(m){return i=(Ext.isEmpty(k[m])?false:true)})}else{if(Ext.isObject(f)){Ext.iterate(f,function(n,m){return i=(k[n]!=m?false:true)})}else{if(Ext.isFunction(f)){if(f.apply(this,[k])===false){i=false}}}}return i})}else{d=e.filterChildren(b)}var g=[];for(var c=0,a=d.length;c<a;c++){g[c]=this.getModelNodeProperties(d[c])}return g}return[]},isModelStatus:function(e,b,c){if(this.isModelNodeExists(e)){e=this.getModelNode(e);if(Ext.isFunction(b)){return b.call(c||this,e)}else{var a=true;for(var f in b){var d=e.getPropertyValue(f);if(d!=b[f]){a=false;break}}return a}}return false}}})();Ext.ns("afStudio.view.inspector");afStudio.view.inspector.InspectorTree=Ext.extend(Ext.tree.TreePanel,{autoScroll:true,_beforeInitComponent:function(){var c=this.controller.getRootNode(),b=this.controller.widget;this.enableDD=true;this.root={expanded:true,modelNode:c,properties:{name:b?String.format("{0} ({1}-{2})",b.uri,b.place,b.placeType):""}};var a=this.loader;if(!a){a=new afStudio.view.inspector.InspectorLoader()}else{if(Ext.isObject(a)&&!a.load){a=new afStudio.view.inspector.InspectorLoader(a)}}this.loader=a},initComponent:function(){this._beforeInitComponent();afStudio.view.inspector.InspectorTree.superclass.initComponent.apply(this,arguments);this._afterInitComponent()},_afterInitComponent:function(){var a=this;this.treeSorter=new afStudio.view.inspector.InspectorSorter(this)},expandPathByModelNode:function(g,i){var e=g.getPath();if(Ext.isEmpty(e)){if(i){i(false,undefined)}return}var c=e.split(this.pathSeparator),b=this.root;if(b.modelNode.id!=c[1]){if(i){i(false,null)}return}var a=1;var d=function(){if(++a==c.length){if(i){i(true,b)}return}var f=b.findChildByAssociatedModel(c[a]);if(!f){if(i){i(false,b)}return}b=f;f.expand(false,false,d)};b.expand(false,false,d)},getCmpByModel:function(c){var a=this.getRootNode(),b;b=a.findChildBy(function(d){return d.modelNode==c},null,true);if(!b){this.expandPathByModelNode(c,function(d,e){if(d===true){b=e}})}return b},initEvents:function(){afStudio.view.inspector.InspectorTree.superclass.initEvents.apply(this,arguments);var a=this,b=a.getSelectionModel();a.on({scope:a,modelNodeInsert:a.onModelNodeInsert,modelNodeAppend:a.onModelNodeAppend,modelNodeRemove:a.onModelNodeRemove,modelNodeSelect:a.onModelNodeSelect,modelPropertyChanged:a.onModelPropertyChanged,modelReconfigure:a.onModelNodeReconfigure,contextmenu:a.onNodeContextMenu,nodedragover:a.onNodeDragOver,nodedrop:a.onNodeDrop});a.mon(b,{selectionchange:a.onNodeSelectionChange,scope:a})},onModelNodeSelect:function(c,b){if(b!=this){afStudio.Logger.info("@view [InspectorTree] onModelNodeSelect");var a=this.getCmpByModel(c);if(!a.isSelected()){this.selectPath(a.getPath())}}},onModelNodeAppend:function(e,c,d,b){afStudio.Logger.info('@view [InspectorTree] "modelNodeAppend"');var a=this.getCmpByModel(c);a.reload(function(){var f=this.getCmpByModel(d);f.select()},this)},onModelNodeInsert:function(e,c,d,b){afStudio.Logger.info('@view [InspectorTree] "modelNodeInsert"');var a=this.getCmpByModel(c);a.reload(function(){var f=this.getCmpByModel(d);f.select()},this)},onModelNodeRemove:function(d,b,c){afStudio.Logger.info('@view [InspectorTree] "modelNodeRemove"');var a=this.getCmpByModel(c);if(a){a.remove(true)}},onModelPropertyChanged:function(c,d,b){afStudio.Logger.info('@view [InspectorTree] "modelPropertyChanged"',c,d,b);var a=this.getCmpByModel(c);if(a.labelProperty==d){a.setText(Ext.value(b,"(none)"))}},onModelNodeReconfigure:function(b){afStudio.Logger.info('@view [InspectorTree] "reconfigure"',b);var a=this.getCmpByModel(b.parentNode?b.parentNode:b);a.reload(function(){var c=this.getCmpByModel(b);c.select()},this)},onNodeContextMenu:function(a,b){var c=a.contextMenu;a.select();if(c){c.contextNode=a;c.showAt(b.getXY())}},onNodeDragOver:function(f){var e=f.dropNode,d=f.point,c=f.target,b=e.modelNode,a=c.modelNode;if(d=="append"||(b.tag!=a.tag)||(b.parentNode!=a.parentNode)){return false}},onNodeDrop:function(d){var c=d.dropNode.modelNode,b=d.point,a=d.target.modelNode;if(b=="above"){a.parentNode.insertBefore(c,a)}else{if(b=="below"){a.parentNode.insertBefore(c,a.nextSibling)}}},onNodeSelectionChange:function(b,a){if(a){afStudio.Logger.info('@view [InspectorTree] "selectModelNode"',a.modelNode);this.controller.selectModelNode(a.modelNode,this)}}});afStudio.view.inspector.nodeType={};Ext.reg("inspector.inspectorTree",afStudio.view.inspector.InspectorTree);Ext.ns("afStudio.view.inspector");afStudio.view.inspector.InspectorLoader=Ext.extend(Ext.util.Observable,{clearOnLoad:true,uiProviders:{},constructor:function(a){Ext.apply(this,a);this.addEvents("beforeload","load");afStudio.view.inspector.InspectorLoader.superclass.constructor.call(this)},load:function(b,c,a){if(this.clearOnLoad){while(b.firstChild){b.removeChild(b.firstChild)}}this.processData(b,c,a||b);this.runCallback(c,a||b,[b])},getModelProperties:function(a){return a.getPropertiesHash()},processData:function(a){if(this.fireEvent("beforeload",this,a)!==false){var b=a.modelNode;if(b instanceof afStudio.model.Node){a.beginUpdate();Ext.each(b.childNodes,function(d){var e=d.nodeTypes.length>0?false:true;var c={modelNode:d,leaf:e,properties:this.getModelProperties(d)};var f=this.createNode(c);if(f){a.appendChild(f)}},this);a.endUpdate();this.fireEvent("load",this,a)}else{throw new afStudio.view.inspector.error.LoaderError("incorrect-model")}}},createNode:function(attr){if(this.baseAttrs){Ext.applyIf(attr,this.baseAttrs)}if(this.applyLoader!==false&&!attr.loader){attr.loader=this}if(Ext.isString(attr.uiProvider)){attr.uiProvider=this.uiProviders[attr.uiProvider]||eval(attr.uiProvider)}var nodeType=attr.modelNode.tag?this.resolveNodeType(attr.modelNode.tag):null;if(nodeType){return new nodeType(attr)}else{return attr.leaf?new afStudio.view.inspector.TreeNode(attr):new afStudio.view.inspector.ContainerNode(attr)}},resolveNodeType:function(b){var c=String(b).trim(),a=[afStudio.view.inspector.nodeType];c=/^i:(\w+)/i.test(c)?c.replace(/^i:(\w+)/i,function(e,d){return d.ucfirst()}):c.ucfirst();c+="Node";Ext.iterate(a,function(d){if(Ext.isFunction(d[c])){c=d[c];return false}});return Ext.isFunction(c)?c:null},runCallback:function(a,c,b){if(Ext.isFunction(a)){a.apply(c,b)}},destroy:function(){this.purgeListeners()}});Ext.ns("afStudio.view.inspector");afStudio.view.inspector.sorter={};S=afStudio.view.inspector.sorter;N=afStudio.ModelNode;S[N.TITLE]=1;S[N.CONFIRM]=4;S[N.PARAMS]=5;S[N.ROW_ACTIONS]=8;S[N.FIELDS]=12;S[N.ACTIONS]=16;S[N.MORE_ACTIONS]=20;S[N.DATA_SOURCE]=6;S[N.DATA_STORE]=6;S[N.GROUPING]=28;S[N.DESCRIPTION]=32;S[N.ALTERNATE_DESCRIPTIONS]=34;S[N.MENU]=2;S[N.SCRIPTS]=3;S[N.FIELD]=100;S[N.COLUMN]=100;S[N.BUTTON]=101;S[N.LINK]=102;S[N.RADIO_GROUP]=103;S[N.ACTION]=110;S[N.IF]=111;S[N.SET]=104;S[N.REF]=105;S[N.PARAM]=130;S[N.AREA]=10;S[N.EXTRA_HELP]=36;S[N.OPTIONS]=5;S[N.CLASS]=108;S[N.METHOD]=109;S[N.VALUE]=140;S[N.TOOLTIP]=142;S[N.HELP]=144;S[N.VALIDATOR]=146;S[N.HANDLER]=148;S[N.WINDOW]=150;S[N.TRIGGER]=152;delete N;delete S;afStudio.view.inspector.InspectorSorter=Ext.extend(Ext.tree.TreeSorter,{constructor:function(a,b){afStudio.view.inspector.InspectorSorter.superclass.constructor.apply(this,[a,b]);var c=this.sortType;this.sortFn=function(j,i){var e=j.modelNode,d=i.modelNode;var m=c(e.tag),l=c(d.tag);if(m<l){return -1}else{if(m>l){return 1}else{var k=e.parentNode,g=k.indexOf(e),f=k.indexOf(d);return g-f}}}},sortType:function(b){var a=afStudio.view.inspector.sorter[b];return Ext.isDefined(a)?a:500}});Ext.ns("afStudio.view.inspector.error");afStudio.view.inspector.error.LoaderError=Ext.extend(Ext.Error,{name:"afStudio.view.inspector.error.LoaderError",lang:{"incorrect-model":"Assosiated with tree node model is not correct."}});afStudio.view.inspector.TreeNode=function(a){a=a||{};if(a.modelNode){this.modelNode=a.modelNode;delete a.modelNode}this.properties=a.properties;delete a.properties;this.initNode(a);afStudio.view.inspector.TreeNode.superclass.constructor.call(this,a);this.resolveNodeText();this.initContextMenu()};afStudio.view.inspector.TreeNode.deleteNodeCxtText="Delete",afStudio.view.inspector.TreeNode.addNodeCxtText="Add",Ext.extend(afStudio.view.inspector.TreeNode,Ext.tree.TreeNode,{labelProperty:"name",contextMenu:new Ext.menu.Menu({items:[{itemId:"delete",text:afStudio.view.inspector.TreeNode.deleteNodeCxtText,iconCls:"afs-icon-delete"}],listeners:{itemclick:function(c){var b=c.parentMenu.contextNode,a=b.getOwnerTree();switch(c.itemId){case"delete":b.removeModelNode();break}}}}),initNode:function(a){},resolveNodeText:function(){var a=this.attributes,c=this.properties,b=this.labelProperty;if(Ext.isDefined(c[b])){this.text=a.text=c[b]}else{this.text=a.text=this.modelNode.tag}},initContextMenu:function(){var a=this.modelNode;if(a.isRequired()&&!a.hasMany()){this.contextMenu=null}},removeModelNode:function(){this.modelNode.remove(true)},findChildByAssociatedModel:function(b,a){return this.findChildBy(function(){return this.modelNode.id==(Ext.isString(b)?b:b.id)},null,a)}});afStudio.view.inspector.nodeType.node=afStudio.view.inspector.TreeNode;afStudio.view.inspector.ContainerNode=function(a){this.loaded=a&&a.loaded===true;this.loading=false;afStudio.view.inspector.ContainerNode.superclass.constructor.apply(this,arguments);this.addEvents("beforeload","load")};afStudio.view.inspector.ContainerNode.deleteAllNodeCxtText="Delete all children";Ext.extend(afStudio.view.inspector.ContainerNode,afStudio.view.inspector.TreeNode,{initContextMenu:function(){var g=afStudio.view.inspector;var e=this,f=this.modelNode,a=f.nodeTypes,i=g.TreeNode.addNodeCxtText,c=g.TreeNode.deleteNodeCxtText,d=g.ContainerNode.deleteAllNodeCxtText,j=[];Ext.iterate(a,function(m,k){var l=Ext.isObject(m)?m.name:m;j[k]={text:l,node:l,controll:"add"}});if(j.length>1){j=[{text:i,iconCls:"icon-add",menu:{items:j,listeners:{itemclick:function(k){switch(k.controll){case"add":e.addModelNode(k.node);break}}}}}]}else{j[0].itemId=j[0].controll;delete j[0].controll;j[0].text=String.format("{0} {1}",i,j[0].text);j[0].iconCls="icon-add"}if(!f.isRequired()||f.isRequired()&&f.hasMany()){j.push({itemId:"delete",text:c,iconCls:"afs-icon-delete"})}j.push({itemId:"deleteAllChildren",text:d,iconCls:"afs-icon-delete"});var b=new Ext.menu.Menu({ignoreParentClicks:true,items:j,listeners:{itemclick:function(l){var k=e;switch(l.itemId){case"add":k.addModelNode(l.node);break;case"deleteAllChildren":k.removeAllModelNodes();break;case"delete":k.removeAllModelNodes();k.removeModelNode();break}}}});this.contextMenu=b},addModelNode:function(a){var b=this.modelNode.createNode(a)},removeAllModelNodes:function(){this.modelNode.removeAll(true)},destroy:function(a){afStudio.view.inspector.ContainerNode.superclass.destroy.call(this,a);Ext.destroy(this.contextMenu)},expand:function(b,e,i,c){if(this.loading){var g;var d=function(){if(!this.loading){clearInterval(g);this.expand(b,e,i,c)}}.createDelegate(this);g=setInterval(d,200);return}if(!this.loaded){if(this.fireEvent("beforeload",this)===false){return}this.loading=true;this.ui.beforeLoad(this);var a=this.loader||this.attributes.loader||this.getOwnerTree().getLoader();if(a){a.load(this,this.loadComplete.createDelegate(this,[b,e,i,c]),this);return}}afStudio.view.inspector.ContainerNode.superclass.expand.call(this,b,e,i,c)},isLoading:function(){return this.loading},loadComplete:function(a,c,d,b){this.loading=false;this.loaded=true;this.ui.afterLoad(this);this.fireEvent("load",this);this.expand(a,c,d,b)},isLoaded:function(){return this.loaded},hasChildNodes:function(){if(!this.isLeaf()&&!this.loaded){return true}else{return afStudio.view.inspector.ContainerNode.superclass.hasChildNodes.call(this)}},reload:function(b,a){this.collapse(false,false);while(this.firstChild){this.removeChild(this.firstChild).destroy()}this.childrenRendered=false;this.loaded=false;if(this.isHiddenRoot()){this.expanded=false}this.expand(false,false,b,a)}});afStudio.view.inspector.nodeType.container=afStudio.view.inspector.ContainerNode;afStudio.view.inspector.FieldNode=Ext.extend(afStudio.view.inspector.ContainerNode,{initNode:function(a){a.iconCls="icon-field"}});afStudio.view.inspector.nodeType.FieldNode=afStudio.view.inspector.FieldNode;afStudio.view.inspector.RefNode=Ext.extend(afStudio.view.inspector.TreeNode,{labelProperty:"to"});afStudio.view.inspector.nodeType.RefNode=afStudio.view.inspector.RefNode;afStudio.view.inspector.SetNode=Ext.extend(afStudio.view.inspector.ContainerNode,{labelProperty:"title"});afStudio.view.inspector.nodeType.SetNode=afStudio.view.inspector.SetNode;afStudio.view.inspector.HandlerNode=Ext.extend(afStudio.view.inspector.ContainerNode,{labelProperty:"action"});afStudio.view.inspector.nodeType.HandlerNode=afStudio.view.inspector.HandlerNode;afStudio.view.inspector.ColumnNode=Ext.extend(afStudio.view.inspector.TreeNode,{initNode:function(a){a.iconCls="icon-field"}});afStudio.view.inspector.nodeType.ColumnNode=afStudio.view.inspector.ColumnNode;afStudio.view.inspector.MethodNode=Ext.extend(afStudio.view.inspector.ContainerNode,{labelProperty:"tag"});afStudio.view.inspector.nodeType.MethodNode=afStudio.view.inspector.MethodNode;afStudio.view.inspector.RootNode=Ext.extend(afStudio.view.inspector.ContainerNode,{initContextMenu:function(){var g=afStudio.view.inspector;var f=this,e=this.modelNode,a=e.nodeTypes,i=g.TreeNode.addNodeCxtText,c=g.TreeNode.deleteNodeCxtText,d=g.ContainerNode.deleteAllNodeCxtText,j=[];Ext.iterate(a,function(p,k){var o=p,m=false,l=false;if(Ext.isObject(p)){o=p.name;m=p.required==true?true:false;l=p.hasMany==true?true:false}if(!m||m&&l){j.push({text:o,node:o,controll:"add"})}});if(j.length>1){j=[{text:i,iconCls:"icon-add",menu:{items:j,listeners:{itemclick:function(k){switch(k.controll){case"add":f.addModelNode(k.node);break}}}}}]}else{j[0].itemId=j[0].controll;delete j[0].controll;j[0].text=String.format("{0} {1}",i,j[0].text);j[0].iconCls="icon-add"}var b=new Ext.menu.Menu({ignoreParentClicks:true,items:j,listeners:{itemclick:function(l){var k=f;switch(l.itemId){case"add":k.addModelNode(l.node);break}}}});this.contextMenu=b}});afStudio.view.inspector.nodeType.RootNode=afStudio.view.inspector.RootNode;Ext.ns("afStudio.view.property");afStudio.view.property.PropertyRecord=Ext.data.Record.create([{name:"name",type:"string"},"value","type",{name:"required",type:"boolean"},"defaultValue","readOnly"]);afStudio.view.property.PropertyStore=Ext.extend(Ext.grid.PropertyStore,{constructor:function(a,b){this.grid=a;this.store=new Ext.data.GroupingStore({recordType:afStudio.view.property.PropertyRecord,groupDir:"DESC",groupField:"required"});if(b){this.setSource(b)}Ext.util.Observable.constructor.call(this)},setSource:function(c){this.source=c;this.store.removeAll();var b=[];for(var a in c){if(this.isEditableProperty(c[a])){c[a].value=Ext.isDefined(c[a].value)?c[a].value:c[a].defaultValue;b.push(new afStudio.view.property.PropertyRecord(c[a],a))}}this.store.loadRecords({records:b},{},true)},isEditableProperty:function(b){var a=afStudio.data.Types,c=b.type;if(c){if(Ext.isString(c)&&a.getType(c)){return true}else{if(Ext.isObject(c)){return a.getType(c.type)?true:false}}}return false},setValue:function(c,b){var a=this.getRec(c);if(a){a.set("value",b);a.commit();this.source[c].value=b}}});Ext.ns("afStudio.view.property");afStudio.view.property.PropertyColumnModel=Ext.extend(Ext.grid.PropertyColumnModel,{requiredText:"Required",constructor:function(b,a){this.grid=b;Ext.grid.PropertyColumnModel.superclass.constructor.call(this,[{header:this.nameText,width:50,sortable:true,dataIndex:"name",id:"name",menuDisabled:true},{header:this.valueText,width:50,resizable:false,dataIndex:"value",id:"value",menuDisabled:true},{header:this.requiredText,resizable:false,dataIndex:"required",id:"required",menuDisabled:true,hidden:true}]);this.store=a;this.buildEditors();this.renderCellDelegate=this.renderCell.createDelegate(this);this.renderPropDelegate=this.renderProp.createDelegate(this)},buildEditors:function(){var c=afStudio.data.Types,f=Ext.grid,e={};for(var b in c){var d=c[b],a=d.type;if(Ext.isFunction(d)){continue}e[a]=new f.GridEditor(d.editor({style:"text-align: left;"}))}this.editors=e},getCellEditor:function(b,e){var d=this.store.getProperty(e),c=d.get("type"),a=c.type;if(d.get("readOnly")){return null}if(this.grid.customEditors[a]){return this.grid.customEditors[a]}if(this.editors[a]){return this.editors[a]}},renderProp:function(d,b,c){var a=afStudio.view.property.PropertyColumnModel.superclass.renderProp.apply(this,arguments);return c.get("required")?"<b>"+a+"</b>":a},renderCell:function(d,b,c){var a=this.grid.customRenderers[c.get("type")];if(a){return a.apply(this,arguments)}if(c.get("required")&&Ext.isEmpty(c.get("value"))){b.attr='style="background-color:#E6052A;"'}var e=d;if(Ext.isDate(d)){e=this.renderDate(d)}else{if(typeof d=="boolean"){e=this.renderBool(d)}}return Ext.util.Format.htmlEncode(e)}});Ext.ns("afStudio.view.property");afStudio.view.property.PropertyGrid=Ext.extend(Ext.grid.EditorGridPanel,{enableColumnMove:false,stripeRows:false,trackMouseOver:false,clicksToEdit:1,enableHdMenu:false,viewConfig:{forceFit:true},initComponent:function(){this.customRenderers=this.customRenderers||{};this.customEditors=this.customEditors||{};this.lastEditRow=null;var b=new afStudio.view.property.PropertyStore(this);this.propStore=b;var a=new afStudio.view.property.PropertyColumnModel(this,b);b.store.sort("name","ASC");this.cm=a;this.ds=b.store;this.view=new Ext.grid.GroupingView({forceFit:true,hideGroupedColumn:true,showGroupName:false,groupTextTpl:'{[values.gvalue == true ? "Mandatory" : "Optional"]}'});afStudio.view.property.PropertyGrid.superclass.initComponent.call(this,arguments)},initEvents:function(){afStudio.view.property.PropertyGrid.superclass.initEvents.call(this);var a=this;a.mon(a.selModel,{scope:a,beforecellselect:function(d,c,b){if(b===0){this.startEditing.defer(200,this,[c,1]);return false}}});a.mon(a.view,{scope:a,refresh:a.onViewRefresh});a.on({scope:a,modelNodeRemove:a.onModelNodeRemove,modelNodeSelect:a.onModelNodeSelect,modelPropertyChanged:a.onModelPropertyChanged})},onRender:function(){afStudio.view.property.PropertyGrid.superclass.onRender.apply(this,arguments);this.getGridEl().addClass("x-props-grid")},afterRender:function(){afStudio.view.property.PropertyGrid.superclass.afterRender.apply(this,arguments);if(this.source){this.setSource(this.source)}},onEditComplete:function(b,d,a){this.editing=false;this.lastActiveEditor=this.activeEditor;this.activeEditor=null;var c=b.record,i=this.colModel.getDataIndex(b.col);d=this.postEditValue(d,a,c,i);if(this.forceValidation===true||String(d)!==String(a)){var g=this.modelNode,f={grid:this,record:c,field:i,originalValue:a,value:d,row:b.row,column:b.col,modelNode:g,cancel:false};if(this.fireEvent("validateedit",f)!==false&&!f.cancel&&String(d)!==String(a)){if(c.id=="_content"){g.setNodeData(f.value)}else{g.setProperty(c.id,f.value)}delete f.cancel;this.fireEvent("afteredit",f)}}this.view.focusCell(b.row,b.col)},onModelNodeRemove:function(c,a,b){afStudio.Logger.info('@view [PropertyGrid] "modelNodeRemove"');if(this.modelNode==b){this.setSource({})}},onModelNodeSelect:function(b,a){afStudio.Logger.info('@view [PropertyGrid] "modelNodeSelect"');this.modelNode=b;this.setSource(b.getPropertiesSource())},onModelPropertyChanged:function(b,c,a){afStudio.Logger.info('@view [PropertyGrid] "modelPropertyChanged"');if(this.modelNode==b){this.setProperty(c,a);this.onViewRefresh(this.view)}},onViewRefresh:function(l){var b=this.getStore();for(var e=0,g=b.getCount();e<g;e++){var a=b.getAt(e),f=String.format("<b>{0}:</b> {1}",a.get("name"),a.get("value")),m=l.getRow(e),d=Ext.get(m).select(".x-grid3-cell-inner");for(var c=0,k=d.getCount();c<k;c++){Ext.QuickTips.register({target:d.item(c),text:f})}}},setSource:function(a){this.propStore.setSource(a)},hideMandatoryChecker:function(){var a=Ext.select('div[id$="gp-required-true-hd"]');if(a){a.setStyle({display:"none"})}},getSource:function(){return this.propStore.getSource()},setProperty:function(b,a){this.propStore.setValue(b,a)}});Ext.reg("property.propertyGrid",afStudio.view.property.PropertyGrid);Ext.ns("afStudio.view");afStudio.view.InspectorPalette=Ext.extend(Ext.Container,{layout:"fit",style:"border-top: 1px solid #99BBE8;",_beforeInitComponent:function(){var d=this.controller,a=d.getView("inspectorTree"),b=d.getView("propertyGrid");return{items:[{title:this.title,layout:"border",defaults:{layout:"fit",border:false},items:[{region:"center",ref:"../itCt",items:a},{region:"south",ref:"../pgCt",split:true,collapseMode:"mini",items:b}]}]}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.view.InspectorPalette.superclass.initComponent.apply(this,arguments);this._afterInitComponent()},_afterInitComponent:function(){this.on({scope:this,afterrender:function(){(function(){h=this.pgCt.ownerCt.getInnerHeight()/2;this.pgCt.setHeight(h);this.pgCt.ownerCt.doLayout()}).defer(100,this)}})}});Ext.ns("afStudio.view");afStudio.view.ModelErrorWindow=Ext.extend(Ext.Window,{layout:"fit",title:"&#160;",closeAction:"hide",frame:true,width:600,height:320,iconCls:"icon-notification-error",closable:false,resizable:true,_beforeInitComponent:function(){var a=this;this.tree=new Ext.ux.tree.TreeGrid({enableHdMenu:false,enableSort:false,root:new Ext.tree.AsyncTreeNode({children:[]}),loader:{baseAttrs:{expanded:true}},columns:[{header:"Node",dataIndex:"node",width:200},{header:"Errors",width:360,dataIndex:"error",tpl:new Ext.XTemplate('<tpl for=".">{[this.getError(values.error)]}</tpl>',{getError:function(c){var b="";if(c){Ext.each(c,function(d){Ext.iterate(d,function(f,e){b+=String.format("<b>{0}</b> : {1}",f,e)});b+="<br />"})}else{b="---"}return b}})}]});return{items:this.tree,buttonAlign:"center",buttons:[{text:"Close",scope:a,handler:a.closeWindow}]}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.view.ModelErrorWindow.superclass.initComponent.apply(this,arguments)},onShow:function(){var b=this.tree,a=b.getLoader(),c=b.getRootNode();c.attributes=this.modelErrors;a.load(c)},closeWindow:function(){if(this.closeAction=="hide"){this.hide()}else{this.close()}}});Ext.ns("afStudio.wd");afStudio.wd.ModelInterface=(function(){return{NODES:afStudio.ModelNode,getActions:function(){var a=this.NODES;return this.getModelChildrenProperties(a.ACTIONS,a.ACTION)},getMoreActions:function(){var a=this.NODES;return this.getModelChildrenProperties(a.MORE_ACTIONS,a.ACTION)}}})();Ext.applyIf(afStudio.wd.ModelInterface,afStudio.view.ModelInterface);Ext.ns("afStudio.wd");afStudio.wd.ModelMapper=(function(){return{}})();Ext.applyIf(afStudio.wd.ModelMapper,afStudio.view.ModelMapper);Ext.ns("afStudio.wd.list");afStudio.wd.list.ListModelInterface=(function(){return{getColumns:function(){var a=this.NODES;return this.getModelChildrenProperties(a.FIELDS,a.COLUMN)},getRowActions:function(){var a=this.NODES;return this.getModelChildrenProperties(a.ROW_ACTIONS,a.ACTION)}}})();Ext.apply(afStudio.wd.list.ListModelInterface,afStudio.wd.ModelInterface);Ext.ns("afStudio.wd.list");afStudio.wd.list.ListModelReflector=(function(){return{correctExecutorLine:function(a,b,c,d){if(["Action","Description"].indexOf(a)!=-1){var e=this.getExecutorToken(c.parentNode.tag);a=e+a}return a},executeAddTitle:function(a){this.setHeaderTitle(a);this.header.show();if(this.ownerCt&&Ext.isFunction(this.ownerCt.doLayout)){this.ownerCt.doLayout()}},executeRemoveTitle:function(b,a){this.unmapCmpFromModel(b);this.hideHeader()},executeUpdateTitle_content:function(c,b,d,a){b.setTitle(a.trim()?a:"&#160;")},executeAddRootDescription:function(b){var a=this.getTopToolbar().getComponent("desc");a.show()},executeRemoveRootDescription:function(c,b){var a=this.getTopToolbar().getComponent("desc");a.hide();this.doLayout()},executeUpdateRootDescription_content:function(c,b,d,a){var b=this.getTopToolbar().getComponent("desc");b.get(0).setText(a.trim()?a:"&#160;")},hasCheckboxSelModel:function(){return this.selModel instanceof Ext.grid.CheckboxSelectionModel},setSelModel:function(a){Ext.destroy(this.sm);this.selModel=a;this.selModel.init(this)},executeAddColumn:function(d,b,e){var a=this.getColumnModel(),c=this.getModelNodeProperties(d),f=this.createColumn(c);b=!e&&this.hasCheckboxSelModel()?++b:b;a.config.splice(b,0,f);a.setConfig(a.config)},executeRemoveColumn:function(c,d){var b=this.getColumnModel(),a=d[1];this.unmapCmpFromModel(c);b.config.splice(a,1);b.setConfig(b.config)},executeInsertColumn:function(d,b,c){var a=c[1];this.executeAddColumn(d,a,true)},executeUpdateColumnLabel:function(d,e,f,c){var b=this.getColumnModel(),a=e[1];b.setColumnHeader(a,c)},executeUpdateColumnHidden:function(d,e,f,c){var b=this.getColumnModel(),a=e[1];b.setHidden(a,c)},executeUpdateColumnHideable:function(d,e,f,c){var b=this.getColumnModel(),a=e[1];b.config[a].hideable=c;b.setConfig(b.config)},executeUpdateColumnResizable:function(d,e,f,c){var b=this.getColumnModel(),a=e[1];b.config[a].fixed=!c;b.setConfig(b.config)},executeUpdateColumnWidth:function(d,e,f,c){var b=this.getColumnModel(),a=e[1];b.config[a].width=c;b.setConfig(b.config)},executeUpdateFieldsSelect:function(f,e,g,b){var a=this.getColumnModel();if(b){var c=new Ext.grid.CheckboxSelectionModel();this.setSelModel(c);a.config.unshift(c);a.setConfig(a.config)}else{var d=new Ext.grid.RowSelectionModel();this.setSelModel(d);a.config.shift();a.setConfig(a.config)}},executeUpdateFieldsExportable:function(c,b,d,a){a?b.show():b.hide();this.updateActionBarVisibilityState()},executeUpdateFieldsSelectable:function(e,d,f,a){var c=d[0],b=d[1];a?(c.enable(),b.enable()):(c.disable(),b.disable());this.updateActionBarVisibilityState()},executeUpdateFieldsExpandButton:function(c,b,d,a){a?b.show():b.hide();this.updateActionBarVisibilityState()},executeUpdateFieldsPager:function(c,b,d,a){a?b.show():b.hide();this.doLayout()},executeAddRowactionsAction:function(e,b){var a=this.getColumnModel(),d=a.getColumnById("action-column"),c=this.getModelNodeProperties(e);if(!d){d=this.createRowActionColumn([c]);a.config.push(d);a.setConfig(a.config)}else{var f=this.createRowAction(c);d.items.splice(b,0,f);this.updateActionsColumnWidth()}this.view.refresh()},executeRemoveRowactionsAction:function(e,c){var b=this.getColumnModel(),d=b.getColumnById("action-column"),a=c[1];this.unmapCmpFromModel(e);d.items.splice(a,1);if(d.items.length==0){b.config.pop();b.setConfig(b.config)}else{this.updateActionsColumnWidth()}this.view.refresh()},executeInsertRowactionsAction:function(d,b,c){var a=c[1];this.executeAddRowactionsAction(d,a)},executeUpdateRowactionsActionName:function(e,d,f,b){var a=d[0],c=a.name;a.name=b;a.tooltip=(Ext.isEmpty(a.tooltip)||a.tooltip==c)?b:a.tooltip;a.altText=(Ext.isEmpty(a.altText)||a.altText==c)?b:a.altText;this.view.refresh()},executeUpdateRowactionsActionIconCls:function(c,b,d,a){b[0].iconCls=a;this.view.refresh()},executeUpdateRowactionsActionIcon:function(c,b,d,a){b[0].icon=a;this.view.refresh()},executeUpdateRowactionsActionText:function(c,b,d,a){b[0].altText=a?a:b[0].name;this.view.refresh()},executeUpdateRowactionsActionTooltip:function(c,b,d,a){b[0].tooltip=a?a:b[0].name;this.view.refresh()},removeAction:function(b,a){a.destroy();this.unmapCmpFromModel(b);this.updateActionBarVisibilityState()},setActionName:function(a,b){var c=a.name;a.name=b;if(Ext.isEmpty(a.text)||a.text==c){a.setText(b)}},setActionStyle:function(a,b){a.el.dom.removeAttribute("style","");a.el.applyStyles(b)},executeAddActionsAction:function(c,a){var d=this.getActionToolBar(),b=this.getModelNodeProperties(c),e=this.createAction(b);d.insertButton(a,e);this.updateActionBarVisibilityState()},executeRemoveActionsAction:function(b,a){this.removeAction(b,a[0])},executeInsertActionsAction:function(c,b,d){var a=d[1];this.executeAddActionsAction(c,a)},executeUpdateActionsActionName:function(c,b,d,a){this.setActionName(b[0],a)},executeUpdateActionsActionText:function(c,b,d,a){b[0].setText(a?a:b[0].name)},executeUpdateActionsActionIconCls:function(c,b,d,a){b[0].setIconClass(a)},executeUpdateActionsActionTooltip:function(c,b,d,a){b[0].setTooltip(a)},executeUpdateActionsActionIcon:function(c,b,d,a){b[0].setIcon(a)},executeUpdateActionsActionStyle:function(c,b,d,a){this.setActionStyle(b[0],a)},executeAddMoreactionsAction:function(d,b,f){var e=this.getActionToolBar(),a=e.getComponent("more").menu,c=this.getModelNodeProperties(d),g=this.createMoreAction(c);b=!f?b+3:b;a.insert(b,g);this.updateActionBarVisibilityState()},executeRemoveMoreactionsAction:function(b,a){this.removeAction(b,a[0])},executeInsertMoreactionsAction:function(c,b,d){var a=d[1];this.executeAddMoreactionsAction(c,a,true)},executeUpdateMoreactionsActionName:function(c,b,d,a){this.setActionName(b[0],a)},executeUpdateMoreactionsActionText:function(c,b,d,a){b[0].setText(a?a:b[0].name)},executeUpdateMoreactionsActionIconCls:function(c,b,d,a){b[0].setIconClass(a)},executeUpdateMoreactionsActionIcon:function(c,b,f,a){b[0].icon=a;try{b[0].el.child("img").set({src:a})}catch(d){}},executeUpdateMoreactionsActionStyle:function(c,b,f,a){b[0].style=a;try{this.setActionStyle(b[0],a)}catch(d){}}}})();Ext.applyIf(afStudio.wd.list.ListModelReflector,afStudio.view.ModelReflector);Ext.ns("afStudio.wd.list");afStudio.wd.list.ListGridView=Ext.extend(Ext.grid.GridView,{beforeColMenuShow:function(){var b=this.cm,d=b.getColumnCount(),a=this.colMenu,c;a.removeAll();for(c=0;c<d;c++){var e=b.config[c];if(e.hideable!==false&&e.xtype!="listactioncolumn"){a.add(new Ext.menu.CheckItem({text:b.getColumnHeader(c),itemId:"col-"+b.getColumnId(c),checked:!b.isHidden(c),disabled:b.config[c].hideable===false,hideOnClick:false}))}}},afterRenderUI:function(){var a=this.grid;this.initElements();Ext.fly(this.innerHd).on("click",this.handleHdDown,this);this.mainHd.on({scope:this,mouseover:this.handleHdOver,mouseout:this.handleHdOut,mousemove:this.handleHdMove});this.scroller.on("scroll",this.syncScroll,this);if(a.enableColumnResize!==false){this.splitZone=new Ext.grid.GridView.SplitDragZone(a,this.mainHd.dom)}if(a.enableColumnMove){this.columnDrag=new afStudio.wd.list.ListGridView.ColumnDragZone(a,this.innerHd);this.columnDrop=new Ext.grid.HeaderDropZone(a,this.mainHd.dom)}if(a.enableHdMenu!==false){this.hmenu=new Ext.menu.Menu({id:a.id+"-hctx",show:function(c,d,b){this.parentMenu=b;if(!this.el){this.render()}this.fireEvent("beforeshow",this);this._el=c;this.showAt(this.el.getAlignToXY(c,d||this.defaultAlign,this.defaultOffsets),b)}});this.colMenu=new Ext.menu.Menu({id:a.id+"-hcols-menu"});this.colMenu.on({scope:this,beforeshow:this.beforeColMenuShow,itemclick:this.handleColumnMenuClick});this.hmenu.add({itemId:"renameClm",text:"Rename Column"},{itemId:"deleteClm",text:"Delete Column"},"-",{itemId:"columns",text:this.columnsText,menu:this.colMenu,hideOnClick:false,iconCls:"x-cols-icon"});this.hmenu.on("itemclick",this.handleHdMenuClick,this)}if(a.trackMouseOver){this.mainBody.on({scope:this,mouseover:this.onRowOver,mouseout:this.onRowOut})}if(a.enableDragDrop||a.enableDrag){this.dragZone=new Ext.grid.GridDragZone(a,{ddGroup:a.ddGroup||"GridDD"})}this.updateHeaderSortState()},handleColumnMenuClick:function(c){var b=this.hdCtxIndex,a=this.cm,d=this.ds;b=a.getIndexById(c.itemId.substr(4));if(b!=-1){if(c.checked&&a.getColumnsBy(this.isHideableColumn,this).length<=1){this.onDenyColumnHide();return false}a.setHidden(b,c.checked)}return true},handleHdMenuClick:function(d){var b=this.hdCtxIndex,a=this.cm,f=this.ds,c=a.getDataIndex(b);switch(d.itemId){case"renameClm":var g=this.findHeaderCell(d.parentMenu._el);this.editHeader(g.firstChild,b);break;case"deleteClm":var e=a.config[b];this.grid.removeColumn(e);break}return true},editHeader:function(b,i){var a=this.grid,j=this.cm,c=j.config[i],f=j.getColumnHeader(i);var d=a.getModelByCmp(c),e=a.getPropertyEditor(d,"label"),g=new Ext.grid.GridEditor(e);g._node=d;g.on("complete",this.onHeaderEditComplete,this);g.startEdit(b,f)},onHeaderEditComplete:function(c,b,a){var d=c._node;if(b!=a){d.setProperty("label",b)}},handleHdDown:function(j,l){var k=this.cm,g=this.findHeaderCell(l),i=this.getCellIndex(g),d=this.hmenu,b=d.items,a=this.headerMenuOpenCls;if(Ext.fly(l).hasClass("x-grid3-hd-btn")){j.stopEvent();Ext.fly(g).addClass(a);this.hdCtxIndex=i;d.on("hide",function(){Ext.fly(g).removeClass(a)},this,{single:true});d.show(l,"tl-bl?")}else{if(i!==false){var c=this.cm.getColumnId(i);if(Ext.isDefined(c)){var f=this.cm.getColumnById(c);if(c=="checker"||f.xtype=="listactioncolumn"){return false}}this.editHeader(g.firstChild,i)}}}});afStudio.wd.list.ListGridView.ColumnDragZone=Ext.extend(Ext.grid.GridView.ColumnDragZone,{onBeforeDrag:function(f,g){var b=this.view.cm,c=this.view.findCellIndex(f.header),a=c!==false?b.getColumnId(c):null;if(Ext.isDefined(a)){var d=b.getColumnById(a);if(a=="checker"||d.xtype=="listactioncolumn"){return false}}return true},beforeDragDrop:function(i,g,j){var b=this.view.cm,f=this.getDragData(g),c=this.view.findCellIndex(f.header),a=c!==false?b.getColumnId(c):undefined;if(Ext.isDefined(a)){var d=b.getColumnById(a);if(a=="checker"||d.xtype=="listactioncolumn"){this.onInvalidDrop(i,g,j);return false}}return true}});Ext.ns("afStudio.wd.list");afStudio.wd.list.ActionColumn=Ext.extend(Ext.grid.ActionColumn,{constructor:function(b){afStudio.wd.list.ActionColumn.superclass.constructor.call(this,b);var f=this,c=b.items||(f.items=[f]),a=c.length,d,e;f.renderer=function(g,i){g=Ext.isFunction(b.renderer)?(b.renderer.apply(this,arguments)||""):"";i.css+=" x-action-col-cell";for(d=0,len=c.length;d<len;d++){e=c[d];g+='<img width="16" alt="'+e.altText+'" src="'+(e.icon?e.icon:(Ext.isEmpty(e.iconCls)?"":Ext.BLANK_IMAGE_URL))+'" class="x-action-col-icon x-action-col-'+String(d)+" "+(e.iconCls||"")+" "+(Ext.isFunction(e.getClass)?e.getClass.apply(e.scope||this.scope||this,arguments):"")+'"'+((e.tooltip)?' ext:qtip="'+e.tooltip+'"':"")+" />"}return g}}});Ext.apply(Ext.grid.Column.types,{listactioncolumn:afStudio.wd.list.ActionColumn});Ext.ns("afStudio.wd.list");afStudio.wd.list.ListView=Ext.extend(Ext.grid.GridPanel,{rowActionWidth:18,actionsColumnWidth:58,_beforeInitComponent:function(){var a=this;this.modelMapper={};var c=this.createColumns();var f=this.resolveSelectionModel();var b=new Ext.data.ArrayStore({idIndex:0,data:[[]],fields:[]});var e=this.createActions();var d=this.createDescription();return{header:true,store:b,selModel:f,columns:c,view:new afStudio.wd.list.ListGridView(),columnLines:true,autoScroll:true,tbar:{xtype:"container",defaults:{xtype:"toolbar"},items:[e,d]},bbar:{xtype:"paging",hidden:true,store:b,displayInfo:true}}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.wd.list.ListView.superclass.initComponent.apply(this,arguments);this._afterInitComponent()},_afterInitComponent:function(){var a=this;this.configureView()},afterRender:function(){afStudio.wd.list.ListView.superclass.afterRender.call(this);this.header.setVisibilityMode(Ext.Element.DISPLAY);if(!this.title){this.hideHeader()}},setHeaderTitle:function(b){var a=this.NODE_VALUE_MAPPER,c=this.getModelNodeValue(b);this.setTitle(c[a]?c[a]:"&#160;");this.mapCmpToModel(b.id,this)},hideHeader:function(){var a=this.getResizeEl().getHeight();this.header.hide();this.setHeight(a)},configureView:function(){var c=this.NODES,g=this.NODE_ID_MAPPER,n=this.NODE_VALUE_MAPPER,l=this.getActionToolBar(),m=l.getComponent("more").menu;var e=this.getModelNodeByPath(c.TITLE);if(e){this.setHeaderTitle(e)}var i=this.getModelNode(c.FIELDS);var d=m.getComponent("sel-all"),b=m.getComponent("desel-all"),f=m.getComponent("exports"),o=l.getComponent("expanded-view");this.mapCmpToModel(i.id+"#selectable",this.createMapper(function(){return[d,b]}));d[g]=b[g]=i.id+"#selectable";this.mapCmpToModel(i.id+"#exportable",f);f[g]=i.id+"#exportable";this.mapCmpToModel(i.id+"#expandButton",o);o[g]=i.id+"#expandButton";var j=this.getModelNodeProperties(c.FIELDS);j.selectable?(d.enable(),b.enable()):(d.disable(),b.disable());j.exportable?f.show():f.hide();j.expandButton?o.show():o.hide();this.updateActionBarVisibilityState();if(this.isModelStatus(c.FIELDS,{pager:true})){var k=this.getBottomToolbar();k.show();this.mapCmpToModel(i.id+"#pager",k)}},initEvents:function(){afStudio.wd.list.ListView.superclass.initEvents.call(this);var a=this;this.on({scope:a,contextmenu:function(b){b.preventDefault()},columnmove:a.onColumnMove,columnresize:a.onColumnResize,modelNodeAppend:a.onModelNodeAppend,modelNodeInsert:a.onModelNodeInsert,modelNodeRemove:a.onModelNodeRemove,modelPropertyChanged:a.onModelPropertyChanged})},onModelNodeAppend:function(d,b,c,a){afStudio.Logger.info("@view [ListView] modelNodeAppend");var e=this.getExecutor(this.EXEC_ADD,c);if(e){e(c,a)}},onModelNodeInsert:function(e,c,d,a){afStudio.Logger.info("@view [ListView] modelNodeInsert");var b=this.getCmpByModel(a),f=this.getExecutor(this.EXEC_INSERT,d);if(f){f(d,a,b)}},onModelNodeRemove:function(d,b,c){afStudio.Logger.info("@view [ListView] modelNodeRemove");var a=this.getCmpByModel(c),e=this.getExecutor(this.EXEC_REMOVE,c);if(e){e(c,a)}},onModelPropertyChanged:function(c,d,b){afStudio.Logger.info("@view [ListView] modelPropertyChanged");var a=this.getCmpByModel(c,d),e=this.getExecutor(this.EXEC_UPDATE,c,d);if(e){e(c,a,d,b)}},onColumnMove:function(i,c){var b=this.getColumnModel();if(i!=c){var f=b.config[c],e=this.getModelByCmp(f),d=e.parentNode;if(this.hasCheckboxSelModel()){i--;c--}var a=(i<c)?c+1:c;var g=d.item(a);d.insertBefore(e,g)}},onColumnResize:function(b,c){var a=this.getColumnModel(),d=this.getModelByCmp(a.config[b]);d.setProperty("width",c)},updateActionBarVisibilityState:function(){var b=this.getActionToolBar(),a=0;this.updateMoreActionVisibilityState();b.items.each(function(c){if(c.hidden){a++}});if(a>0&&((a+1)==b.items.getCount())){b.hide()}else{b.show()}this.doLayout()},updateMoreActionVisibilityState:function(){var e=this.getActionToolBar(),b=e.getComponent("more"),d=b.menu.getComponent("sel-all"),c=b.menu.getComponent("desel-all");if(d.disabled&&c.disabled){var a=2;b.menu.items.each(function(f){if(f.hidden){a++}});if(a==b.menu.items.getCount()){b.hide()}else{b.show()}}else{b.show()}},columnMapper:function(d){var c=this.NODE_ID_MAPPER,b=this.getColumnModel(),a=Ext.each(b.config,function(e){return !(e[c]==d)});return[b.config[a],a]},rowActionMapper:function(e){var c=this.NODE_ID_MAPPER,b=this.getColumnModel(),d=b.getColumnById("action-column"),a=Ext.each(d.items,function(f){return !(f[c]==e)});return[d.items[a],a]},actionMapper:function(d){var b=this.NODE_ID_MAPPER,c=this.getActionToolBar(),a;c.items.each(function(f,g,e){if(g>e-3){return false}if(f[b]==d){a=g;return false}});return[c.items.itemAt(a),a]},moreActionMapper:function(e){var c=this.NODE_ID_MAPPER,d=this.getActionToolBar(),b=d.getComponent("more").menu,a;b.items.each(function(f,g){if(g>2&&f[c]==e){a=g;return false}});return[b.items.itemAt(a),a]},resolveSelectionModel:function(){return this.isModelStatus(this.NODES.FIELDS,{"select":true})?new Ext.grid.CheckboxSelectionModel():new Ext.grid.RowSelectionModel()},createColumns:function(){var j=this,a=this.NODES,f=[];var e=this.resolveSelectionModel();if(e instanceof Ext.grid.CheckboxSelectionModel){f.push(e)}if(j.isModelNodeExists(a.COLUMN,true)){var d=j.getColumns();for(var k=0,g=d.length;k<g;k++){var m=this.createColumn(d[k]);f.push(m)}}var b=j.getRowActions();if(!Ext.isEmpty(j.getRowActions())){f.push(this.createRowActionColumn(b))}return f},createColumn:function(c){var a=c[this.NODE_ID_MAPPER];this.mapCmpToModel(a,this.createMapper(this.columnMapper,a));var b={id:a,header:c.label};Ext.copyTo(b,c,"width, hidden, hideable");b[this.NODE_ID_MAPPER]=a;return b},removeColumn:function(a){var b=this.getModelByCmp(a);b.remove(true)},createRowActionColumn:function(e){var b=this,d=this.rowActionWidth,c=this.actionsColumnWidth;var a={id:"action-column",xtype:"listactioncolumn",header:"Actions",menuDisabled:true,width:c,fixed:true,items:[]};Ext.iterate(e,function(i,f){var g=b.createRowAction(i);a.items.push(g)});a.width=(e.length*d)>c?(e.length*d):c;return a},updateActionsColumnWidth:function(){var b=this.getColumnModel(),d=b.getColumnById("action-column"),a=b.getIndexById("action-column"),e=d.items.length;var c=(e*this.rowActionWidth)>this.actionsColumnWidth?(e*this.rowActionWidth):this.actionsColumnWidth;b.setColumnWidth(a,c)},createRowAction:function(c){var a=c[this.NODE_ID_MAPPER];this.mapCmpToModel(a,this.createMapper(this.rowActionMapper,a));var b={name:c.name,iconCls:c.iconCls,icon:c.icon,altText:c.text?c.text:c.name,tooltip:c.tooltip?c.tooltip:c.name};b[this.NODE_ID_MAPPER]=a;return b},getActionToolBar:function(){return this.getTopToolbar().getComponent("actions")},createActions:function(){var e={itemId:"actions",items:["->",{itemId:"expanded-view",text:"Expanded View",iconCls:"icon-application-split"},{itemId:"more",text:"More Actions",menu:{items:[{itemId:"exports",text:"Exports",iconCls:"icon-database-save"},{itemId:"sel-all",text:"Select All"},{itemId:"desel-all",text:"Deselect All"}]}}]};var c=e.items[2];var a=this.getActions();if(!Ext.isEmpty(a)){var d=a.length;for(var b=d-1;b>=0;b--){e.items.unshift(this.createAction(a[b]))}}a=this.getMoreActions();if(!Ext.isEmpty(a)){Ext.iterate(a,function(f){c.menu.items.push(this.createMoreAction(f))},this)}return e},createActionObj:function(b){var c={name:b.name,text:b.text?b.text:b.name,iconCls:b.iconCls,icon:b.icon,tooltip:b.tooltip,style:b.style};c[this.NODE_ID_MAPPER]=b[this.NODE_ID_MAPPER];return c},createAction:function(b){var a=b[this.NODE_ID_MAPPER];this.mapCmpToModel(a,this.createMapper(this.actionMapper,a));return this.createActionObj(b)},createMoreAction:function(b){var a=b[this.NODE_ID_MAPPER];this.mapCmpToModel(a,this.createMapper(this.moreActionMapper,a));return this.createActionObj(b)},createDescription:function(){var e={itemId:"desc",hidden:true,items:{xtype:"tbtext",style:"white-space: normal;",text:""}};var c=this.NODE_VALUE_MAPPER,d=this.NODE_ID_MAPPER,b=this.NODES;var a=this.getModelNodeByPath(b.DESCRIPTION);if(a){var f=this.getModelNodeValue(a);if(f[c]){e.hidden=false;e.items.text=f[c]}this.mapCmpToModel(f[d],this.createMapper(function(){return this.getTopToolbar().getComponent("desc")}));e[d]=f[d]}return e},onDestroy:function(){afStudio.wd.list.ListView.superclass.onDestroy.call(this);this.modelMapper=null}});Ext.applyIf(afStudio.wd.list.ListView.prototype,afStudio.wd.ModelMapper);Ext.apply(afStudio.wd.list.ListView.prototype,afStudio.wd.list.ListModelInterface);Ext.apply(afStudio.wd.list.ListView.prototype,afStudio.wd.list.ListModelReflector);Ext.reg("wd.listView",afStudio.wd.list.ListView);Ext.ns("afStudio.wd.edit");afStudio.wd.edit.EditModelInterface=(function(){return{isGrouped:function(){var a=this.getModelNodeByPath(this.NODES.GROUPING);return a?true:false},getFields:function(a){return this.getModelChildrenProperties(this.NODES.FIELDS,this.NODES.FIELD,a)},getField:function(a,c){var b=this.getFields({name:a})[0];if(!b){return null}return c===true?this.getModelNode(b[this.NODE_ID_MAPPER]):b},getFieldsButtons:function(){return this.getModelChildrenProperties(this.NODES.FIELDS,this.NODES.BUTTON)},getFieldSets:function(a){return this.getModelChildrenProperties(this.NODES.GROUPING,this.NODES.SET,a)},getTabbedFieldSets:function(){return this.getFieldSets(["tabtitle"])},getPlainFieldSets:function(){return this.getFieldSets(function(a){return Ext.isEmpty(a.tabtitle)})},isSetTabbed:function(a){return this.isModelStatus(a,function(b){return Ext.isEmpty(b.getPropertyValue("tabtitle"))?false:true})},getRefsFromSet:function(a,b){return this.getModelChildrenProperties(a,this.NODES.REF,b)},getFieldsFromSet:function(b){var c=this.getRefsFromSet(b),a=[];Ext.each(c,function(e){var d=this.getFields({name:e.to});a.push({ref:e,field:d[0]})},this);return a},getFieldsFromDefaultSet:function(){var e=this.NODE_ID_MAPPER;var c=this.getFieldSets(),d=[],b=[];Ext.each(c,function(f){var g=this.getFieldsFromSet(f[e]);Ext.each(g,function(i){d.push(i.field.name)})},this);var a=this.getFields();Ext.each(a,function(g){if(d.indexOf(g.name)==-1){b.push(g)}});return b},getDefaultSetFieldIndex:function(b){var c=this.NODE_ID_MAPPER,a=this.getFieldsFromDefaultSet();var d=Ext.each(a,function(e){return e[c]==b[c]?false:true});return Ext.isDefined(d)?d:null},getRefByField:function(c,b){if(!Ext.isString(c)&&!(c instanceof afStudio.model.Node)){throw new Ext.Error('afStudio.wd.edit.EditModelInterface, getRefByField() parameter "fld" is not correct.'+'Accepts "String" as field name and "afStudio.model.Node" as field node')}var f=this.NODE_ID_MAPPER,a=Ext.isString(c)?c:c.getPropertyValue("name"),e=null;if(Ext.isEmpty(a)){return null}var d=this.getFieldSets();Ext.each(d,function(g){var i=this.getRefsFromSet(g[f],{to:a});if(!Ext.isEmpty(i)){e=(b===true)?this.getModelNode(i[0][f]):i[0];return false}},this);return e}}})();Ext.apply(afStudio.wd.edit.EditModelInterface,afStudio.wd.ModelInterface);Ext.ns("afStudio.wd.edit");afStudio.wd.edit.EditModelReflector=(function(){return{correctExecutorLine:function(a,b,c,d){if(["Field","Description"].indexOf(a)!=-1){var e=this.getExecutorToken(c.parentNode.tag);a=e+a}return a},removeComponent:function(b,a){a.destroy(true);this.unmapCmpFromModel(b)},executeAddRootDescription:function(){var a=this.getTopToolbar();a.show()},executeRemoveRootDescription:function(){var b=this.getTopToolbar(),a=b.getComponent("description");a.setText("&#160;");b.hide();this.doLayout()},executeUpdateRootDescription_content:function(d,c,e,a){var f=this.getTopToolbar(),b=f.getComponent("description");b.setText(a.trim()?a:"&#160;")},executeUpdateFieldsSubmitlabel:function(c,b,d,a){b.setText(a)},executeUpdateFieldsResetlabel:function(c,b,d,a){b.setText(a)},executeUpdateFieldsSubmit:function(c,b,d,a){if(a===false){b.sub.hide();b.res.hide()}else{b.sub.show();if(this.getModelByCmp(b.res)[1]){b.res.show()}}this.doLayout()},executeUpdateFieldsResetable:function(c,b,d,a){a?b.show():b.hide()},addButton:function(e,a,c){c=Ext.isDefined(c)?c:"button";var d=this.getFooterToolbar(),b=this.getModelNodeProperties(e),f=this.createButton(b,c);a=this.getButtonIndex(e,a,c);d.insertButton(a,f);this.doLayout()},removeButton:function(b,a){this.removeComponent(b,a)},insertButton:function(i,b,e,d,f){f=Ext.isDefined(f)?f:"button";var c=this.getFooterToolbar(),j=this.getModelNodeProperties(b),a=this.createButton(j,f),g=c.items.indexOf(d);c.insertButton(g,a);this.doLayout()},setButtonName:function(c,a){var b=c.name;c.name=a;if(Ext.isEmpty(c.text)||c.text==b){c.setText(a)}},setButtonText:function(b,a){b.setText(a?a:b.name)},executeAddButton:function(b,a){this.addButton(b,a)},executeRemoveButton:function(b,a){this.removeButton(b,a)},executeInsertButton:function(c,d,a,b){this.insertButton(c,d,a,b)},executeUpdateButtonLabel:function(c,b,d,a){this.setButtonText(b,a)},executeUpdateButtonName:function(c,b,d,a){this.setButtonName(b,a)},executeUpdateButtonIconCls:function(c,b,d,a){b.setIconClass(a)},executeUpdateButtonIcon:function(c,b,d,a){b.setIcon(a)},executeAddAction:function(b,a){this.addButton(b,a,"action")},executeRemoveAction:function(b,a){this.removeButton(b,a)},executeInsertAction:function(c,d,a,b){this.insertButton(c,d,a,b,"action")},executeUpdateActionName:function(c,b,d,a){this.setButtonName(b,a)},executeUpdateActionText:function(c,b,d,a){this.setButtonText(b,a)},executeUpdateActionIconCls:function(c,b,d,a){b.setIconClass(a)},executeUpdateActionIcon:function(c,b,d,a){b.setIcon(a)},executeUpdateActionTooltip:function(c,b,d,a){b.setTooltip(a)},executeUpdateFieldsLabelWidth:function(c,b,d,a){this.labelWidth=Ext.isEmpty(a)?100:a},setFieldContent:function(c,b,a){var d=this.getModelNodeProperty(c,"value");b.content=a;b.setValue(Ext.isEmpty(a)&&!Ext.isEmpty(d)?d:a)},setFieldValue:function(b,a){if(Ext.isEmpty(b.content)){b.setValue(a)}},relocateField:function(d,a){if(d.nextSibling){var e=d.parentNode,b=d.nextSibling,c=this.getCmpByModel(b);this.executeInsertFieldsField(e,d,b,c)}else{this.executeAddFieldsField(d,a)}},executeAddFieldsField:function(b,i){var j=this.getModelNodeProperties(b);if(this.isGrouped()){var d=this.getRefByField(b,true);if(d){var c=this.getCmpByModel(d),e=this.createField(j);c.add(e);c.doLayout()}else{var a=this.getDefaultSet();if(a){var e=this.createField(j);a.add(e);this.updateDefaultSetVisibility();a.doLayout()}else{a=this.createDefaultFieldSet([j]);var f=this.getTabbedSet();if(f){this.insert(this.items.indexOf(f),a)}else{this.add(a)}this.doLayout()}}}else{var e=this.createField(j),g=this.getFieldIndex(b,i);this.insert(g,e);this.doLayout()}},executeRemoveFieldsField:function(b,a){a.destroy()},executeInsertFieldsField:function(j,c,e,d){var k=this.getModelNodeProperties(c);if(this.isGrouped()){var b=this.getRefByField(c,true);if(b){var f=this.createField(k);d=this.getCmpByModel(b);d.add(f);d.doLayout()}else{var a=this.getDefaultSet();if(a){var f=this.createField(k);if(!c.isSimilarNode(e)){a.add(f)}else{var i=a.items.indexOf(d);if(i==-1){i=this.getDefaultSetInsertFieldIndex(j,e)}a.insert(i,f)}this.updateDefaultSetVisibility();a.doLayout()}else{a=this.createDefaultFieldSet([k]);var g=this.getTabbedSet();if(g){this.insert(this.items.indexOf(g),a)}else{this.add(a)}this.doLayout()}}}else{var f=this.createField(k);if(!c.isSimilarNode(e)){this.add(f)}else{var i=this.items.indexOf(d);this.insert(i,f)}this.doLayout()}},executeUpdateFieldsFieldType:function(e,d,f,b){if(this.isGrouped()){var g=this.getDefaultSet();if(g&&g.items.indexOf(d)!=-1){var a=g.items.indexOf(d);g.remove(d,true);this.relocateField(e,a)}else{var c=d.ownerCt;c.removeAll(true);this.executeAddFieldsField(e)}}else{var a=this.items.indexOf(d);this.remove(d,true);this.executeAddFieldsField(e,a)}},executeUpdateFieldsFieldLabel:function(c,b,d,a){if(b.label){b.label.update(!Ext.isEmpty(a)?(a+":"):a)}},executeUpdateFieldsFieldContent:function(c,b,d,a){this.setFieldContent(c,b,a)},executeUpdateFieldsFieldValue:function(c,b,d,a){this.setFieldValue(b,a)},executeUpdateFieldsFieldDisabled:function(c,b,d,a){a==true?b.disable():b.enable()},executeUpdateFieldsFieldHeight:function(c,b,d,a){b.setHeight(a);if(b.getXType()=="multiselect"){Ext.getCmp(b.el.child("fieldset").id).setHeight(a)}},executeUpdateFieldsFieldWidth:function(c,b,d,a){b.setWidth(a);if(b.getXType()=="multiselect"){Ext.getCmp(b.el.child("fieldset").id).setWidth(a)}},executeUpdateFieldsFieldStyle:function(d,c,e,a){var b=c.el.getStyles("width","height");c.el.dom.removeAttribute("style","");c.el.applyStyles(b).applyStyles(a)},executeUpdateFieldsFieldState:function(c,b,d,a){switch(a){case"editable":b.enable();b.setReadOnly(false);break;case"readonly":b.enable();b.setReadOnly(true);break;case"disabled":b.disable();break}},executeUpdateFieldsFieldChecked:function(c,b,d,a){if(["checkbox","radio"].indexOf(b.getXType())!=-1){b.setValue(a)}},executeUpdateFieldsFieldRich:function(c,b,d,a){if(b.getXType()=="textarea"){this.executeUpdateFieldsFieldType(c,b,d,a)}},executeUpdateFieldsFieldDateFormat:function(d,c,e,a){var b=c.getXType();if(["datefield","xdatetime"].indexOf(b)!=-1){if(b=="xdatetime"){c.df.format=a}else{c.format=a}}},executeUpdateFieldsFieldTimeFormat:function(c,b,d,a){if(b.getXType()=="xdatetime"){}},changeFieldSetTitle:function(a,b){a.setTitle(b?b:"&#160;")},executeAddGrouping:function(c,a){this.removeAll(true);var b=this.getFields(),d=this.createDefaultFieldSet(b);this.add(d);this.doLayout()},executeRemoveGrouping:function(c,b){var d=this.getModelNode(this.NODES.FIELDS),a=this.getFields();this.removeAll(true);Ext.each(a,function(i){var g=this.createField(i),j=this.getModelNode(i[this.NODE_ID_MAPPER]),f=d.indexOf(j),e=this.getFieldIndex(j,f);this.insert(e,g)},this);this.doLayout()},executeUpdateGroupingCollapsed:function(c,b,e,a){var d=this.getDefaultSet();a==true?d.collapse():d.expand()},executeUpdateGroupingTitle:function(c,b,e,a){var d=this.getDefaultSet();this.changeFieldSetTitle(d,a)},executeAddSet:function(e,b){var a=this.getModelNodeProperties(e),f=this.getTabbedSet();if(this.isSetTabbed(e)){if(f){var d=this.createTab(a);f.add(d);f.doLayout()}else{f=this.createTabPanel([a]);this.add(f);this.doLayout()}}else{if(f){var g=this.items.indexOf(f);b=this.getDefaultSet()?g-1:g}var c=this.createFieldSet(a);this.insert(b,c);this.doLayout()}},executeRemoveSet:function(c,b){var d=b.findByType("field"),f=this.getModelNode(this.NODES.FIELDS),a=[];Ext.each(d,function(i){var j=this.getModelNode(i[this.NODE_ID_MAPPER]),g=f.indexOf(j);a.push({field:j,pos:g})},this);if(this.isSetTabbed(c)){var e=this.getTabbedSet();b.ownerCt.destroy();if(e.items.getCount()==0){e.destroy()}}else{b.destroy()}Ext.each(a,function(g){this.relocateField(g.field,g.pos)},this)},executeInsertSet:function(g,a,d,c){var e=this.getTabbedSet(),f=this.getModelNodeProperties(a),i=this.getFieldSetInsertionIndex(g,a,d,c);if(this.isSetTabbed(a)){if(e){var b=this.createTab(f);e.insert(i,b);e.doLayout()}else{e=this.createTabPanel([f]);this.add(e);this.doLayout()}}else{var j=this.createFieldSet(f),i=this.getFieldSetInsertionIndex(g,a,d,c);this.insert(i,j);this.doLayout()}},relocateFieldSet:function(e){var d=e.parentNode,b=e.nextSibling;if(b){var c=this.getCmpByModel(b);this.executeInsertSet(d,e,b,c)}else{var a=d.indexOf(e);this.executeAddSet(e,a)}},executeUpdateSetTitle:function(c,b,d,a){this.changeFieldSetTitle(b,a)},executeUpdateSetCollapsed:function(c,b,d,a){a==true?b.collapse():b.expand()},executeUpdateSetFloat:function(c,b,d,a){this.isSetTabbed(c)?b.ownerCt.destroy():b.destroy();this.relocateFieldSet(c)},executeUpdateSetTabtitle:function(d,c,e,a,b){if(!Ext.isEmpty(a)){if(!Ext.isEmpty(b)){c.ownerCt.setTitle(a)}else{c.destroy();this.relocateFieldSet(d)}}else{if(Ext.isEmpty(this.getTabbedFieldSets())){var f=this.getTabbedSet();f.destroy()}else{c.ownerCt.destroy()}this.relocateFieldSet(d)}},createRefField:function(b){var c=null,a=b.getPropertyValue("to");if(a){c=this.getField(a);if(!Ext.isEmpty(c)){c=this.createField(c)}}return c},updateFloatingRefWidth:function(a){var b=a.items.getCount(),c=Ext.util.Format.round(1/b,2);a.items.each(function(e,d){e.columnWidth=c})},removeReferenceCmp:function(a,d,f){var f=Ext.isDefined(f)?f:a.getPropertyValue("break"),e=a.previousSibling,c=a.nextSibling,d=d?d:this.getCmpByModel(a),b=d.ownerCt;d.destroy();if(f&&c&&e&&!e.getPropertyValue("break")){this.relocateRefsUp(a,b)}else{this.updateFloatingRefWidth(b);b.doLayout()}},relocateRefsDown:function(i){var l=i.parentNode,n=this.getCmpByModel(l),e=l.getPropertyValue("float"),c=i.previousSibling,b=i.nextSibling;var d=b;while(d){this.getCmpByModel(d).destroy();if(d.getPropertyValue("break")){break}d=d.nextSibling}var m=this.getCmpByModel(c).ownerCt;this.updateFloatingRefWidth(m);var j=this.createRefWrapper(e);while(b){var g=this.createRefField(b),a=this.getModelNodeProperties(b);this.wrapField(j,g,a);if(b.getPropertyValue("break")){break}b=b.nextSibling}this.updateFloatingRefWidth(j);var k=n.items.indexOf(m)+1;n.insert(k,j);n.doLayout()},relocateRefsUp:function(g,k){var j=g.parentNode,l=this.getCmpByModel(j),c=g.previousSibling,b=g.nextSibling;var i=this.getCmpByModel(b).ownerCt,d=b;while(d){this.getCmpByModel(d).destroy();if(d.getPropertyValue("break")){break}d=d.nextSibling}i.destroy();while(b){var e=this.createRefField(b),a=this.getModelNodeProperties(b);this.wrapField(k,e,a);if(b.getPropertyValue("break")){break}b=b.nextSibling}this.updateFloatingRefWidth(k);l.doLayout()},insertRefNode:function(j,g){var l=j.parentNode,m=this.getCmpByModel(l),i=l.getPropertyValue("float"),c=j.previousSibling,b=j.nextSibling,d=this.getModelNodeProperties(j),e=this.createRefField(j);var k=this,f=function(n){if(!i&&m.items.getCount()!=0){var o=m.items.itemAt(0);k.wrapField(o,e,d,1,n);o.doLayout()}else{var o=k.createRefWrapper(i);k.wrapField(o,e,d);m.insert(n,o);m.doLayout()}},a=function(p,r,q){var n=k.getCmpByModel(p),o=n.ownerCt;if(Ext.isEmpty(r)){r=o.items.indexOf(n);r=Ext.isDefined(q)?r+q:r}k.wrapField(o,e,d,null,r);k.updateFloatingRefWidth(o);o.doLayout()};if(i){if(c){if(c.getPropertyValue("break")){if(d["break"]||!b){g=m.items.indexOf(this.getCmpByModel(c).ownerCt)+1;f(g)}else{a(b,0)}}else{if(d["break"]){a(c,null,1);if(b){this.relocateRefsDown(j)}}else{a(c,null,1)}}}else{if(d["break"]||!b){f(0)}else{a(b)}}}else{f(g)}},executeAddRef:function(b,a){this.insertRefNode(b,a)},executeInsertRef:function(a,d,b,c){this.insertRefNode(d,a.indexOf(d))},executeRemoveRef:function(g,j){var e=this.getModelNodeProperties(g),c=this.getModelNodeProperty(g,"to"),m=this.getModelNode(this.NODES.FIELDS),b=g.previousSibling,a=g.nextSibling,k=g.parentNode,n=this.getCmpByModel(k),l=j.ownerCt;if(!j.nextSibling()&&!j.previousSibling()){l.destroy()}else{this.removeReferenceCmp(g,j)}if(!Ext.isEmpty(c)&&this.getField(c)){var d=this.getField(c)[this.NODE_ID_MAPPER],f=this.getModelNode(d),i=this.getDefaultSetInsertFieldIndex(m,f);this.relocateField(f,i)}},executeUpdateRefTo:function(e,d,f,a,b){var c;if(Ext.isEmpty(a)){c=this.getField(b,true);if(c){this.relocateField(c)}return}c=this.getField(a,true);if(this.getField(b,true)){this.relocateField(this.getField(b,true))}this.relocateField(c)},executeUpdateRefBreak:function(e,d,f,a,c){var b=e.parentNode;if(b.getPropertyValue("float")===true){if(a===true){this.removeReferenceCmp(e,d,c);this.insertRefNode(e,b.indexOf(e))}else{this.relocateRefsUp(e,d.ownerCt)}}}}})();Ext.applyIf(afStudio.wd.edit.EditModelReflector,afStudio.view.ModelReflector);Ext.ns("afStudio.wd.edit");afStudio.wd.edit.EditView=Ext.extend(Ext.FormPanel,{frame:true,_beforeInitComponent:function(){var d=this;this.modelMapper={};var a=this.getModelNodeProperty(this.NODES.FIELDS,"labelWidth");var b=this.createFormCmp();var c=this.createButtons();return{autoScroll:true,labelWidth:a,items:b,tbar:{style:"border-bottom: 2px solid #C00; margin-bottom: 4px; padding: 4px;",items:[]},buttons:c}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.wd.edit.EditView.superclass.initComponent.apply(this,arguments);this._afterInitComponent()},initEvents:function(){afStudio.wd.edit.EditView.superclass.initEvents.call(this);var a=this;this.on({scope:a,modelNodeAppend:a.onModelNodeAppend,modelNodeInsert:a.onModelNodeInsert,modelNodeRemove:a.onModelNodeRemove,modelPropertyChanged:a.onModelPropertyChanged})},onDestroy:function(){this.modelMapper=null;afStudio.wd.edit.EditView.superclass.onDestroy.call(this)},_afterInitComponent:function(){this.configureView()},configureView:function(){var c=this.getTopToolbar();var b=this.getModelNodeByPath(this.NODES.DESCRIPTION),a=this.createDescription();c.add(a);b==null?c.hide():c.show()},onModelNodeAppend:function(d,b,c,a){afStudio.Logger.info("@view [EditView] modelNodeAppend");var e=this.getExecutor(this.EXEC_ADD,c);if(e){e(c,a)}},onModelNodeInsert:function(e,c,d,a){afStudio.Logger.info("@view [EditView] modelNodeInsert");var b=this.getCmpByModel(a),f=this.getExecutor(this.EXEC_INSERT,d);if(f){f(c,d,a,b)}},onModelNodeRemove:function(d,a,c){afStudio.Logger.info("@view [EditView] modelNodeRemove");var b=this.getCmpByModel(c),e=this.getExecutor(this.EXEC_REMOVE,c);if(e){e(c,b)}},onModelPropertyChanged:function(d,e,a,b){afStudio.Logger.info("@view [EditView] modelPropertyChanged");var c=this.getCmpByModel(d,e),f=this.getExecutor(this.EXEC_UPDATE,d,e);if(f){f(d,c,e,a,b)}},getDefaultSet:function(){var a=this.getComponent("default-set");return !Ext.isEmpty(a)?a:null},getTabbedSet:function(){var a=this.findByType("tabpanel");return a.length?a[0]:null},updateDefaultSetVisibility:function(){var b=this.getDefaultSet();if(b){var a=true;b.items.each(function(c){if(c.getXType()!="hidden"){a=false;return false}},this);!a?b.show():b.hide()}},updateDefaultSetExistence:function(a){if(a.items.getCount()==0){a.destroy()}else{this.updateDefaultSetVisibility()}},createFormCmp:function(){var c=[];if(this.isGrouped()){Ext.each(this.getPlainFieldSets(),function(e){c.push(this.createFieldSet(e))},this);var b=this.getFieldsFromDefaultSet();if(b.length){var d=this.createDefaultFieldSet(b);c.push(d)}var a=this.getTabbedFieldSets();if(!Ext.isEmpty(a)){c.push(this.createTabPanel(a))}}else{Ext.each(this.getFields(),function(e){c.push(this.createField(e))},this)}return c},createField:function(d){var c=this.NODE_ID_MAPPER,i=d[c];var b=this.getCmpByModel(i);if(b){b.destroy()}var e,a={},g;Ext.copyTo(a,d,"name, value, content, style, width, height, disabled");Ext.apply(a,{fieldLabel:d.label,labelStyle:"font-weight: bold;"});if(Ext.isDefined(d.content)){a.value=d.content}switch(d.type){case"input":e=Ext.form.TextField;break;case"textarea":e=d.rich?Ext.form.HtmlEditor:Ext.form.TextArea;break;case"checkbox":e=Ext.form.Checkbox;a.checked=Ext.isDefined(d.checked)?d.checked:false;break;case"radio":e=Ext.form.Radio;a.checked=Ext.isDefined(d.checked)?d.checked:false;break;case"password":e=Ext.form.TextField;a.inputType="password";break;case"hidden":e=Ext.form.Hidden;break;case"file":e=Ext.form.TextField;a.inputType="file";break;case"combo":e=Ext.form.ComboBox;Ext.apply(a,{store:[]});break;case"static":e=Ext.form.DisplayField;break;case"date":e=Ext.form.DateField;a.format=d.dateFormat?d.dateFormat:"Y-m-d";break;case"datetime":e=Ext.ux.form.DateTime;Ext.apply(a,{dateFormat:d.dateFormat?d.dateFormat:"Y-m-d",timeFormat:d.timeFormat?d.timeFormat:"H:i:s"});break;case"multicombo":e=Ext.ux.Multiselect;a.tbar=[{text:"clear"}];break;case"doublemulticombo":e=Ext.ux.ItemSelectorAutoSuggest;Ext.apply(a,{toStore:new Ext.data.ArrayStore(),toTBar:[{text:"clear"}],imagePath:"/appFlowerPlugin/extjs-3/plugins/multiselect/images"});break;case"doubletree":e=Ext.ux.TreeItemSelector;a.imagePath="/appFlowerPlugin/extjs-3/plugins/multiselect/images";break;case"color":e=Ext.ux.ColorField;break;default:e=Ext.form.DisplayField;a.value=String.format("<b>type</b> = {0}",d.type);break}if(d.state=="readonly"){a.readOnly=true}else{if(d.state=="disabled"){a.readOnly=true;a.submitValue=false}}a[c]=i;g=new e(a);if(!g.rendered){g.on({scope:this,afterrender:{fn:function(f){var j=function(){var k=this.getModelByCmp(f);this.controller.selectModelNode(k,this)}.createDelegate(this);f.label?f.label.on("click",j):null;f.on("focus",j)},single:true},beforedestroy:{fn:function(f){this.unmapCmpFromModel(f[this.NODE_ID_MAPPER])}}})}this.mapCmpToModel(i,g);return g},createButtons:function(){var d=[];this.createResetSubmitButtons(d);var b=this.getFieldsButtons();for(var a=b.length,c=a-1;c>=0;c--){d.unshift(this.createButton(b[c]))}Ext.each(this.getActions(),function(e){d.push(this.createButton(e,"action"))},this);return d},createResetSubmitButtons:function(e){var b=this.NODE_ID_MAPPER,g=this.NODES;var a=this.getModelNodeProperties(g.FIELDS);var d=Ext.isDefined(a.submit)?a.submit:true;var c=new Ext.Button({text:a.submitlabel?a.submitlabel:"Submit",iconCls:"icon-accept",hidden:!d});c[b]=g.FIELDS+"#submit";this.mapCmpToModel(g.FIELDS+"#submitlabel",c);var f=new Ext.Button({text:a.resetlabel?a.resetlabel:"Reset",iconCls:"icon-application-form",hidden:!d?true:(Ext.isDefined(a.resetable)?!a.resetable:false)});f[b]=g.FIELDS+"#resetable";this.mapCmpToModel(g.FIELDS+"#resetable",f);this.mapCmpToModel(g.FIELDS+"#resetlabel",f);this.mapCmpToModel(g.FIELDS+"#submit",{sub:c,res:f});e.push(c,f)},createButton:function(d,e){var b=this.NODE_ID_MAPPER,a={},c;e=Ext.isDefined(e)?e:"button";Ext.copyTo(a,d,"name, iconCls, icon, style");a[b]=d[b];if(e=="button"){a.text=d.label?d.label:d.name;if(d.state&&d.state=="disabled"){a.disabled=true}}else{if(e=="action"){Ext.apply(a,{text:d.text?d.text:d.name,tooltip:d.tooltip})}}c=new Ext.Button(a);c.on("click",function(f){var g=this.getModelByCmp(f);this.controller.selectModelNode(g,this)},this);this.mapCmpToModel(d[b],c);return c},createFieldSet:function(c){var e=this.NODE_ID_MAPPER,b={},g;Ext.copyTo(b,c,"title, collapsed");Ext.apply(b,{collapsible:true,items:[]});b[e]=c[e];g=new Ext.form.FieldSet(b);g.on("beforedestroy",function(j){this.unmapCmpFromModel(j[this.NODE_ID_MAPPER])},this);this.mapCmpToModel(c[e],g);var a=this.getFieldsFromSet(c[e]),i=c["float"];if(!Ext.isEmpty(a)){var d=this.createRefWrapper(i),f=this.getColumnWidth(a,0);g.add(d);Ext.each(a,function(m,j){var l=m.ref,k=m.field,n=this.createField(k);this.wrapField(d,n,l,f);if(l["break"]&&j!=a.length-1){d=this.createRefWrapper(i);f=this.getColumnWidth(a,j+1);g.add(d)}},this)}return g},createDefaultFieldSet:function(a){var g=this.NODES,b={},f;var d=this.getModelNodeProperties(g.GROUPING);Ext.copyTo(b,d,"title, collapsed");Ext.apply(b,{itemId:"default-set",collapsible:true});var e=true,c=[];Ext.each(a,function(i){if(i.type!="hidden"){e=false}c.push(this.createField(i))},this);Ext.apply(b,{hidden:e,labelWidth:this.labelWidth,items:c});f=new Ext.form.FieldSet(b);f.on("remove",function(i,j){this.updateDefaultSetExistence(i)},this);return f},createTabPanel:function(a){var c=new Ext.TabPanel({activeTab:0,height:300,padding:10});var b=[];Ext.each(a,function(d){b.push(this.createTab(d))},this);c.add(b);return c},createTab:function(a){var b=new Ext.Panel({title:a.tabtitle,layout:"anchor",autoScroll:true,items:this.createFieldSet(a)});return b},createDescription:function(){var a={itemId:"description",style:"white-space: normal;",text:"&#160;"};var b=this.getModelNodeByPath(this.NODES.DESCRIPTION);if(b){var c=this.getModelNodeValue(b);if(c[this.NODE_VALUE_MAPPER]){a.text=c[this.NODE_VALUE_MAPPER]}}return new Ext.Toolbar.TextItem(a)},createRefWrapper:function(a){a=!Ext.isDefined(a)?false:a;var b={defaults:{xtype:"container",layout:"form",labelAlign:a?"top":"left"},items:[]};if(a){b.layout="column"}return new Ext.Container(b)},wrapField:function(i,g,f,e,c){var d=this.NODE_ID_MAPPER,a={};e=Ext.isDefined(e)?e:1;Ext.apply(a,{layout:"form",columnWidth:e,labelWidth:this.labelWidth,items:g});a[d]=f[d];var b=new Ext.Container(a);b.on("beforedestroy",function(j){this.unmapCmpFromModel(j[this.NODE_ID_MAPPER])},this);this.mapCmpToModel(f[d],b);Ext.isNumber(c)?i.insert(c,b):i.add(b)},getColumnWidth:function(b,d){var e=0,a=b.length;if(d<a){for(var c=d;c<a;c++){e++;if(b[c].ref["break"]==true){break}}}e=(e==0)?1:e;return Ext.util.Format.round(1/e,2)},getButtonIndex:function(f,a,e){var d=this.controller.getViewDefinition(),c=d.getEntityObj(f,a).idx;c=(c==null)?0:c;e=Ext.isDefined(e)?e:"button";if(e=="action"){var b=this.getFooterToolbar().items.getCount();if(c<b){c+=b-c}}return c},getFieldIndex:function(d,a){var c=this.controller.getViewDefinition(),b=c.getEntityObj(d,a).idx;b=(b==null)?0:b;return b},getDefaultSetInsertFieldIndex:function(d,c){var e=this.getDefaultSet(),a=d.indexOf(c),b=null;if(e==null){return 0}e.items.each(function(g,f){var i=d.indexOf(this.getModelByCmp(g));if(a<i){b=f;return false}},this);if(b==null){b=e.items.getCount()}return b},getFieldSetInsertionIndex:function(d,i,b,c){var a=-1;if(this.isSetTabbed(i)){var f=this.getTabbedSet();if(this.isSetTabbed(b)){a=f.items.indexOf(c.ownerCt)}if(a==-1){var e=this.getTabbedFieldSets(),g=d.indexOf(b);Ext.each(e,function(m,j){var o=this.getModelNode(m[this.NODE_ID_MAPPER]),k=d.indexOf(o);if(g<k){var l=this.getCmpByModel(o).ownerCt;a=f.items.indexOf(l);return false}},this);if(a==-1){a=e.length-1}}}else{a=this.items.indexOf(c);if(a==-1){var e=this.getPlainFieldSets(),g=d.indexOf(b);Ext.each(e,function(l,j){var m=this.getModelNode(l[this.NODE_ID_MAPPER]),k=d.indexOf(m);if(g<k){a=this.items.indexOf(this.getCmpByModel(m));return false}},this);if(a==-1){a=e.length-1}}}return a}});Ext.applyIf(afStudio.wd.edit.EditView.prototype,afStudio.wd.ModelMapper);Ext.apply(afStudio.wd.edit.EditView.prototype,afStudio.wd.edit.EditModelInterface);Ext.apply(afStudio.wd.edit.EditView.prototype,afStudio.wd.edit.EditModelReflector);Ext.reg("wd.editView",afStudio.wd.edit.EditView);Ext.ns("afStudio.wd.show");afStudio.wd.show.ShowView=Ext.extend(Ext.FormPanel,{initComponent:function(){afStudio.wd.show.ShowView.superclass.initComponent.apply(this,arguments);this.messageBox=new afStudio.layoutDesigner.view.ViewMessageBox({viewContainer:this,viewMessage:'<p>"Show" widget GUI is under development</p> <span style="font-size:10px;">You can work with widget, to see the results use "Preview" button.</span>'});this.add(this.messageBox)}});Ext.ns("afStudio.wd.html");afStudio.wd.html.HtmlView=Ext.extend(Ext.FormPanel,{initComponent:function(){afStudio.wd.html.HtmlView.superclass.initComponent.apply(this,arguments);this.messageBox=new afStudio.layoutDesigner.view.ViewMessageBox({viewContainer:this,viewMessage:'<p>"Html" widget GUI is under development</p> <span style="font-size:10px;">You can work with widget, to see the results use "Preview" button.</span>'});this.add(this.messageBox)}});afStudio.WD=function(){return{previewWidget:function(b,c){var a=Ext.urlAppend(afStudioWSUrls.widgetPreviewUrl,Ext.urlEncode({uri:b,title:c}));window.open(a,"widget-preview")},getGuiView:function(a){var c=a.ucfirst()+"View";try{return afStudio.wd[a][c]}catch(b){afStudio.Msg.warning("Widget Designer",String.format("<b>{0}</b> was not found <br/> view type - <u>{1}</u>",c,a))}return null},showWidgetDesigner:function(a){var b=new afStudio.controller.ViewController({widget:a,listeners:{ready:function(d){var e=d.getModelType(),c=afStudio.WD.getGuiView(e);if(c){d.registerView("widget",c)}else{afStudio.vp.clearWorkspace();afStudio.Msg.info(String.format("View type {0} is under development",e));return}afStudio.vp.addToWorkspace({xtype:"wd",controller:d},true)}}});b.run()},getViewCarcass:function(a){return{attributes:{"type":a,"xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation":"http://www.appflower.com/schema/appflower.xsd","xmlns:i":"http://www.appflower.com/schema/"}}},findShowWidgetDesigner:function(d,b,c){var a=Ext.getCmp("widgets");path=String.format("/root/{0}/{1}/{2}",d,b,c);a.expandPath(path,"text",function(f,e){a.runNode(e)})}}}();Ext.namespace("afStudio.wd");afStudio.wd.WDContainer=Ext.extend(Ext.Container,{layout:"border",initComponent:function(){Ext.apply(this,{defaults:{margins:"5"},items:[{region:"center",ref:"widgetdesigner",xtype:"widgetdesigner",controller:this.controller},{region:"east",ref:"filetree",xtype:"filetreepanel",width:280,minWidth:200,split:true,collapsible:true,collapsed:true,cmargins:"5",title:"Code Browser",url:afStudioWSUrls.getFiletreeUrl,rootText:"Home",maxFileSize:524288*2*10,autoScroll:true,enableProgress:false}]});afStudio.wd.WDContainer.superclass.initComponent.apply(this,arguments);this.filetree.fileCt=this.widgetdesigner}});Ext.reg("wd",afStudio.wd.WDContainer);Ext.override(Ext.grid.GridDragZone,{afterRepair:function(){var a=Ext.get(this.DDM.currentTarget),b=a.parent("table")||a;b.frame("#FFA7A7",1);this.dragging=false}});Ext.ns("afStudio.wd");afStudio.wd.WidgetsBuilder=Ext.extend(Ext.Window,{_beforeInitComponent:function(){var b=this;this.RelationRec=Ext.data.Record.create(["id","model","name","field","type","size"]);this.relationsGrid=new Ext.grid.GridPanel({id:"rel-grid",flex:1,ddGroup:"widgetsBuilderRel",enableDragDrop:true,loadMask:true,border:true,style:"padding-bottom: 5px;",autoScroll:true,store:new Ext.data.ArrayStore({idIndex:0,fields:["id","model","name","field","type","size"]}),viewConfig:{scrollOffset:19,forceFit:true},columns:[{header:"Selected fields",sortable:false,menuDisabled:true,width:170,dataIndex:"name"}],bbar:{items:["->",{text:"Remove All",ref:"../removeAllBtn",iconCls:"afs-icon-delete",disabled:true,handler:function(){var c=b.relationsGrid.store.getRange();b.removeSelectedFields(c)}}]}});this.basket=new Ext.Panel({id:"widgets-basket",height:70,bodyStyle:"padding: 5px;",html:"<center><br>Drop Item here,<br> to remove it</br></center>"});var a=new Ext.grid.CheckboxSelectionModel({singleSelect:true});this.fieldsGrid=new afStudio.common.ModelFieldsGrid({id:"fields-grid",ddGroup:"widgetsBuilder",enableDragDrop:true,multiSelect:true,hidden:true});this.modulesCombo=new afStudio.common.WidgetLocation({locationType:b.placeType,anchor:"100%"});this.actionInput=new Ext.form.TextField({fieldLabel:"Widget Name",allowBlank:false,blankText:"Widget name is required",msgTarget:"qtip",anchor:"100%"});this.typeCombo=new Ext.form.ComboBox({fieldLabel:"Widget Type",triggerAction:"all",anchor:"100%",forceSelection:true,store:[["list","List"],["edit","Edit"],["show","Show"]],value:"list"});this.widgetForm=new Ext.FormPanel({labelWidth:100,bodyStyle:"padding: 5px;",items:[this.modulesCombo,this.actionInput,this.typeCombo]});return{title:"Create new widget",y:150,width:450,height:150,modal:true,tbar:{id:this.id+"help-toolbar",hidden:true,items:["Please select the fields for each model you want to have displayed in your Widget. And drag each field to the Selected fields area."]},layout:"card",activeItem:0,defaults:{border:false,bodyBorder:false},items:[{hideBorders:true,items:b.widgetForm},{layout:"border",items:[{region:"west",margins:"5 5 5 5",layout:"fit",width:220,items:[{xtype:"afStudio.common.modelsTree",ref:"../../modelsTree",border:false}]},{region:"center",margins:"5 5 5 0",layout:"fit",items:this.fieldsGrid},{region:"east",margins:"5 5 5 0",layout:"vbox",layoutConfig:{align:"stretch"},width:235,border:false,bodyBorder:false,bodyStyle:"background-color: #DFE8F6",items:[this.relationsGrid,this.basket]}]}],buttonAlign:"left",buttons:[{text:"Cancel",scope:this,handler:this.cancel},"->",{text:"&laquo; Back",id:this.id+"-back-btn",disabled:true,handler:this.chStep.createDelegate(b,[0])},{text:"Next &raquo;",id:this.id+"-next-btn",handler:this.chStep.createDelegate(b,[1])},{text:"Save &raquo;",id:this.id+"-save-btn",hidden:true,scope:this,handler:this.create}]}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.wd.WidgetsBuilder.superclass.initComponent.apply(this,arguments);this._afterInitComponent()},_afterInitComponent:function(){this.addEvents("widgetcreated");this.on("show",this.onWndShow,this);this.relationsGrid.getView().on("refresh",this.onRelGridRefresh);this.modelsTree.on({scope:this,click:this.onModelClick,modelsload:this.onModelsLoad})},onWndShow:function(){var c=this;c.widgetForm.items.itemAt(0).focus(true,200);var a=this.relationsGrid.getView().scroller.dom;new Ext.dd.DropTarget(a,{ddGroup:"widgetsBuilder",notifyDrop:function(l,k,i){var g=l.dragData.selections,j=c.modelsTree.getSelectionModel().getSelectedNode(),f=c.modelsTree.getModel(j);if(!Ext.isEmpty(g)){l.grid.store.remove(g);Ext.each(g,function(e){var e=new c.RelationRec({id:e.get("id"),model:f,name:f+"."+e.get("name"),field:e.get("name"),type:e.get("type"),size:e.get("size"),required:e.get("required")});c.relationsGrid.store.add(e)});c.relationsGrid.removeAllBtn.enable();return true}else{this.dragging=false}}});var d=c.basket;var b=d.body.dom;new Ext.dd.DropTarget(b,{ddGroup:"widgetsBuilderRel",notifyEnter:function(j,i,f){d.body.stopFx();var g=f.grid.getId();if("fields-grid"==g){return this.dropNotAllowed}else{d.body.highlight("#E56060");return this.dropAllowed}},notifyDrop:function(j,i,f){var g=f.grid.getId();if("fields-grid"==g){Ext.fly(this.DDM.currentTarget).parent("TABLE").frame("#8db2e3",1);this.dragging=false;return false}else{c.removeSelectedFields(j.dragData.selections);return true}}})},removeSelectedFields:function(c){if(Ext.isEmpty(c)){return}this.relationsGrid.store.remove(c);if(this.relationsGrid.store.getCount()==0){this.relationsGrid.removeAllBtn.disable()}var d=this.modelsTree.getSelectionModel().getSelectedNode(),b=d?this.modelsTree.getModel(d):null,a=this.fieldsGrid.store;if(b==null){return}Ext.each(c,function(e){if(e.get("model")==b&&!a.getById(e.get("id"))){var f=new a.recordType({id:e.get("id"),name:e.get("field"),type:e.get("type"),size:e.get("size"),required:e.get("required")});a.add(f)}})},loadModelFields:function(b,d){var c=this.modelsTree.getSchema(b),a=this.modelsTree.getModel(b);this.fieldsGrid.getStore().load({params:{schema:c,model:a},callback:d||Ext.emptyFn})},onModelClick:function(a,b){this.fieldsGrid.show();var c=this.fieldsGrid.getSelectionModel();if(c.hasSelection()){c.clearSelections(true)}this.loadModelFields(a)},onModelsLoad:function(a,b){this.fieldsGrid.getStore().removeAll();this.fieldsGrid.hide()},onRelGridRefresh:function(n){var a=n.grid,b=a.getStore();for(var g=0,l=b.getCount();g<l;g++){var c=b.getAt(g);var k="<b>Field Specification</b><br>";k+="<br><b>Model: </b>"+c.get("model");k+="<br><b>Field: </b>"+c.get("field");var m=c.get("type");if(m){k+="<br><b>Type: </b>"+m}var p=c.get("size");if(p){k+="<br><b>Size: </b>"+p}var o=n.getRow(g);var f=Ext.get(o).select(".x-grid3-cell-inner");for(var e=0,d=f.getCount();e<d;e++){Ext.QuickTips.register({target:f.item(e),text:k})}}},chStep:function(c){var a;if(c==1){var b=this.widgetForm;if(!b.getForm().isValid()){return}a={width:840,height:450};Ext.getCmp(this.id+"-save-btn").show();Ext.getCmp(this.id+"-next-btn").hide();Ext.getCmp(this.id+"-back-btn").enable();Ext.getCmp(this.id+"help-toolbar").show()}else{a={width:450,height:150};Ext.getCmp(this.id+"-save-btn").hide();Ext.getCmp(this.id+"-next-btn").show();Ext.getCmp(this.id+"-back-btn").disable();Ext.getCmp(this.id+"help-toolbar").hide()}this.setSize(a);this.setPagePosition((Ext.getBody().getWidth()-a.width)/2,150);this.getLayout().setActiveItem(c)},create:function(){var c=[];this.relationsGrid.getStore().each(function(i){if(i.data){c.push(i.data)}});if(Ext.isEmpty(c)){afStudio.Msg.warning("Widget Builder","Widget can be created - <u>no one field is selected</u>");return}var d=this.modulesCombo.getValue(),f=this.actionInput.getValue(),b=d.module+"/"+f,e=this.typeCombo.getValue(),a=d.place;var g=this.buildWidgetDefinition(f,e,c);afStudio.xhr.executeAction({url:afStudioWSUrls.widgetSaveDefinitionUrl,params:{uri:b,data:Ext.util.JSON.encode(g),createNewWidget:true,widgetType:e,place:a,placeType:this.placeType},mask:true,scope:this,run:function(i,j){this.fireEvent("widgetcreated",i);this.close()}})},cancel:function(){this.close()},buildWidgetDefinition:function(g,f,e){var j=afStudio.WD.getViewCarcass(f),c=afStudio.ModelNode;j[c.TITLE]=g;j[c.FIELDS]={};var a;if(e.length>1){a=[];Ext.each(e,function(k){a.push({attributes:{name:k.field,label:k.field.ucfirst()}})})}else{a={attributes:{name:e[0].field,label:e[0].field.ucfirst()}}}if(f!="list"){j[c.FIELDS][c.FIELD]=a}else{j[c.FIELDS][c.COLUMN]=a}var d=e[0].model,b=j[c.DATA_SOURCE]={attributes:{type:"orm"}};var i=b[c.METHOD]={attributes:{name:null}};if(f=="list"){b.attributes.modelName=d;b[c.CLASS]="ModelCriteriaFetcher";i.attributes.name="getDataForList";i[c.PARAM]={attributes:{name:"modelName"},_content:d}}else{b[c.CLASS]=d+"Peer";i.attributes.name="retrieveByPk";i[c.PARAM]={attributes:{name:"id"},_content:"{id}"}}return j}});afStudio.wd.DesignerPanel=Ext.extend(Ext.Panel,{layout:"fit",_beforeInitComponent:function(){var a=this,e=this.controller,d=e.getView("widget");var b=[{text:"Save",itemId:"saveBtn",iconCls:"icon-save",listeners:{scope:a,click:a.onSaveWidget}},"-",{text:"Preview",itemId:"previewBtn",iconCls:"icon-preview",listeners:{scope:a,click:a.onPreviewWidget}}];return{border:true,bodyStyle:"padding: 4px;",tbar:{items:b},items:d}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.wd.DesignerPanel.superclass.initComponent.apply(this,arguments)},getMenuItem:function(a){return this.getTopToolbar().getComponent(a)},showWidgetErrors:function(a){if(!this.errorWin){this.errorWin=new afStudio.view.ModelErrorWindow({title:"Widget Designer"})}this.errorWin.modelErrors=a;this.errorWin.show()},onSaveWidget:function(){var b=this.controller,a=b.validateModel();if(a===true){b.saveView()}else{this.showWidgetErrors(a)}},onPreviewWidget:function(){var f=this.controller,b=f.getWidget();var a=f.getRootNode(),e=a.getImmediateModelNode(afStudio.ModelNode.TITLE),d=e?e.getNodeDataValue():null;afStudio.WD.previewWidget(b.uri,d)}});Ext.reg("wd.designerPanel",afStudio.wd.DesignerPanel);afStudio.wd.InspectorPalette=Ext.extend(afStudio.view.InspectorPalette,{layout:"accordion",title:"Widget Inspector"});Ext.reg("wd.inspectorPalette",afStudio.wd.InspectorPalette);afStudio.wd.Editor=Ext.extend(Ext.Container,{layout:"fit",_beforeInitComponent:function(){var a={};if(this.file){a.file=this.file;delete this.file}if(this.theme){a.theme=this.theme;delete this.theme}if(this.mode){a.mode=this.mode;delete this.mode}if(this.fileUrl){a.fileUrl=this.fileUrl;delete this.fileUrl}this.ace=new Ext.ux.AceComponent(a);return{items:this.ace}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.wd.Editor.superclass.initComponent.apply(this,arguments)},getCode:function(){return this.ace.getCode()},setFile:function(a,b){this.ace.setFile(a,b)},getFile:function(){return this.ace.file}});Ext.namespace("afStudio.wd");afStudio.wd.Designer=Ext.extend(Ext.Panel,{layout:"border",_beforeInitComponent:function(){var a=this.controller;return{title:"Widget Designer",iconCls:"icon-bricks",defaults:{layout:"fit",border:false,style:"padding: 4px;"},items:[{region:"center",items:[{xtype:"wd.designerPanel",controller:a}]},{region:"east",width:350,minWidth:300,split:true,collapseMode:"mini",baseCls:"x-plain",items:[{xtype:"wd.inspectorPalette",controller:a}]}]}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.wd.Designer.superclass.initComponent.apply(this,arguments)}});Ext.reg("wd.designer",afStudio.wd.Designer);Ext.namespace("afStudio.wd");afStudio.wd.CodeEditor=Ext.extend(Ext.Panel,{layout:"fit",closable:true,_beforeInitComponent:function(){var b=this,a=this.findParentByType("widgetdesigner");b.ace=new afStudio.wd.Editor({file:this.file});return{title:this.fileName,iconCls:"icon-script-edit",tbar:[{text:"Save",itemId:"saveBtn",iconCls:"icon-save"}],defaults:{style:"padding: 5px;"},items:{layout:"fit",items:b.ace}}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.wd.CodeEditor.superclass.initComponent.apply(this,arguments);this._afterInitComponent()},_afterInitComponent:function(){var a=this,b=this.getTopToolbar().getComponent("saveBtn");b.on("click",a.onCodeSave,a)},onCodeSave:function(){var a=this,b=a.ace;afStudio.xhr.executeAction({url:afStudioWSUrls.getFilecontentUrl,params:{file:b.getFile(),code:b.getCode()},scope:a,logMessage:String.format('WD file "{0}" [{1}] was saved',this.fileName,this.file)})},setFile:function(b,c,a){if(a==this.file){this.setTitle(b);this.fileName=b;this.file=c;this.ace.setFile(this.file,true)}else{this.file=this.file.replace(a,c);this.ace.setFile(this.file)}}});Ext.reg("wd.codeEditor",afStudio.wd.CodeEditor);Ext.namespace("afStudio.wd");afStudio.wd.WidgetDesigner=Ext.extend(Ext.TabPanel,{_beforeInitComponent:function(){var b=this.controller,a=b.getWidget();return{activeTab:0,enableTabScroll:true,items:[{xtype:"wd.designer",controller:b},{xtype:"wd.codeEditor",fileName:"security.yml",tabTip:a.securityPath,file:a.securityPath},{xtype:"wd.codeEditor",fileName:a.actionName,tabTip:a.actionPath,file:a.actionPath}]}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.wd.WidgetDesigner.superclass.initComponent.apply(this,arguments)},addCodeEditorTab:function(c,b){var a=this.add({xtype:"wd.codeEditor",fileName:c,tabTip:b,file:b});this.setActiveTab(a.getId())},findCodeTabs:function(d,c){var b=this.findByType("wd.codeEditor",true),a=[];Ext.each(b,function(g){var e=g.file;if(e&&(c?e==d:e.indexOf(d)===0)){a.push(g)}});return a},openFile:function(a,b){var c=this.findCodeTabs(b,true);if(c.length>0){c[0].show()}else{this.addCodeEditorTab(a,b)}},renameFile:function(b,d,a){var c=this.findCodeTabs(a);Ext.each(c,function(e){e.setFile(b,d,a)},this)},deleteFile:function(b){var a=this.findCodeTabs(b);Ext.each(a,function(c){this.remove(c)},this)},beforeDestroy:function(){Ext.destroy(this.controller);afStudio.wd.WidgetDesigner.superclass.beforeDestroy.apply(this)}});Ext.reg("widgetdesigner",afStudio.wd.WidgetDesigner);Ext.ns("afStudio.theme");afStudio.theme.Designer=Ext.extend(Ext.Window,{title:"Theme Designer",width:1000,height:600,iconCls:"icon-theme",_beforeInitComponent:function(){return{layout:"fit",closable:true,draggable:true,plain:true,modal:true,maximizable:true,bodyBorder:false,border:false,items:[{xtype:"tabpanel",ref:"tabs",activeTab:0,items:[{title:"Theme Selector",xtype:"afStudio.theme.themeSelector",ref:"../themeSelector"},{title:"Theme Designer",xtype:"afStudio.theme.editorsPanel",ref:"../themeDesigner"},{title:"CSS Designer",xtype:"afStudio.theme.cssEditor"}]}],bbar:{items:["->",{text:"Save",ref:"../saveBtn"},{xtype:"tbspacer",width:5},{text:"Save and Close",ref:"../saveCloseBtn"},{xtype:"tbspacer",width:5},{text:"Close",ref:"../cancelBtn"}]}}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.theme.Designer.superclass.initComponent.apply(this,arguments)},initEvents:function(){afStudio.theme.Designer.superclass.initEvents.call(this);var a=this;this.delegateEvents();this.mon(this.saveBtn,"click",a.onSave,a);this.mon(this.saveCloseBtn,"click",a.onSaveAndClose,a);this.mon(this.cancelBtn,"click",a.onCancel,a);this.tabs.items.each(function(b){a.mon(b,"activate",b.onTabActivate,b)})},delegateEvents:function(){var b=this,a=b.themeSelector,c=b.themeDesigner;c.relayEvents(a,["themeSelection"])},getCurrentTheme:function(){return this.themeSelector.selectedTheme?this.themeSelector.selectedTheme:null},onShow:function(){if(this.themeSelector){this.themeSelector.selectTheme(afTemplateConfig.template.current)}},enableSave:function(){this.saveBtn.enable();this.saveCloseBtn.enable()},disableSave:function(){this.saveBtn.disable();this.saveCloseBtn.disable()},onSave:function(){var a=this.tabs.getActiveTab();a.save()},onSaveAndClose:function(){this.onSave();this.close()},onCancel:function(){this.close()}});Ext.reg("afStudio.theme.designer",afStudio.theme.Designer);Ext.ns("afStudio.theme");afStudio.theme.Designerable=(function(){return{onTabActivate:function(){var a=this.getContainerWindow();a.enableSave()},getContainerWindow:function(){return this.findParentByType("afStudio.theme.designer",true)}}})();Ext.ns("afStudio.theme");afStudio.theme.ThemeSelector=Ext.extend(Ext.Panel,{initComponent:function(){this.selectedTheme=null;var a=new Ext.data.ArrayStore({fields:["id","name","img"],sortInfo:{field:"name",direction:"ASC"},data:[["desktoptemplate","Desktop","template_desktop.png"],["viewporttemplate","Viewport","template_viewport.png"]]});this.selector=new Ext.DataView({itemSelector:"div.thumb-wrap-large",singleSelect:true,store:a,tpl:new Ext.XTemplate('<div class="theme-selector-wrap">','<tpl for=".">','<div class="{id} thumb-wrap-large">','<div class="thumb"><img src="appFlowerStudioPlugin/images/{img}"></div>',"<span>{name}</span>","</div>","</tpl>",'<div class="x-clear"/>',"</div>")});Ext.apply(this,Ext.apply(this.initialConfig,{layout:"vbox",layoutConfig:{align:"stretch",pack:"center"},items:[this.selector]}));afStudio.theme.ThemeSelector.superclass.initComponent.apply(this,arguments)},initEvents:function(){afStudio.theme.ThemeSelector.superclass.initEvents.call(this);this.addEvents("themeSelection");this.mon(this.selector,"selectionchange",this.onSelectionChange,this);this.mon(this.selector,"dblclick",this.onSelectorDblclick,this)},selectTheme:function(b){afStudio.Logger.info("@afStudio.theme.ThemeSelector#selectTheme",b);var a=this.selector.store.find("name",b);this.selector.select(a)},onSelectionChange:function(a,b){afStudio.Logger.info("@afStudio.theme.ThemeSelector.selector#selectionchange",b);if(b[0]){var d=a.getRecord(b[0]),c=d.get("name").toLowerCase();if(this.selectedTheme!=c){this.selectedTheme=c;this.fireEvent("themeSelection",c)}}},onSelectorDblclick:function(a,b,c,f){afStudio.Logger.info("@afStudio.theme.ThemeSelector.selector#dblclick");var g=this.getContainerWindow();g.tabs.setActiveTab(g.themeDesigner)},save:function(){var b=this;if(this.selector.getSelectionCount()){var a=this.selector.getSelectedRecords()[0].get("name");afStudio.Logger.info("@afStudio.theme.ThemeSelector#save",a);afStudio.xhr.executeAction({url:afStudioWSUrls.templateSelectorUrl,params:{cmd:"update",template:a},run:function(c,d){afTemplateConfig.template.current=a.toLowerCase()}})}}});Ext.applyIf(afStudio.theme.ThemeSelector.prototype,afStudio.theme.Designerable);Ext.reg("afStudio.theme.themeSelector",afStudio.theme.ThemeSelector);Ext.ns("afStudio.theme");afStudio.theme.CssEditor=Ext.extend(Ext.Panel,{layout:"border",initComponent:function(){this.createRegions();Ext.apply(this,Ext.apply(this.initialConfig,{border:false,items:[this.westPanel,this.centerPanel]}));afStudio.theme.CssEditor.superclass.initComponent.apply(this,arguments);this.mon(this.westPanel.getSelectionModel(),"selectionchange",function(c,b){var a=this.getContainerWindow();b&&b.isLeaf()?a.enableSave():a.disableSave()},this)},createRegions:function(){var a=this;this.westPanel=new Ext.ux.FileTreePanel({title:"Files",iconCls:"icon-models",region:"west",split:true,collapsible:true,collapseMode:"mini",url:afStudioWSUrls.getFiletreeUrl,loadMask:true,width:220,minWidth:200,rootText:"CSS",rootPath:"root/web/css",newfileText:"file.css",maxFileSize:524288*2*10,autoScroll:true,enableProgress:false,fileCt:this,fileOpenSingleClick:true});this.codeEditor=new Ext.ux.AceComponent();this.centerPanel=new Ext.Panel({region:"center",layout:"fit",items:this.codeEditor})},onTabActivate:function(){var e=this.westPanel,a=e.getSelectionModel(),c=a.getSelectedNode(),b=this.getContainerWindow();c&&c.isLeaf()?b.enableSave():b.disableSave()},openFile:function(a,b){if(b!=this.codeEditor.file){this.codeEditor.loadFile(b)}},renameFile:function(b,d,a){var c=this.codeEditor;if(c.file==a){c.setFile(d)}},deleteFile:function(a){this.codeEditor.setCode("")},save:function(){var a=this,b=this.codeEditor;afStudio.xhr.executeAction({url:afStudioWSUrls.getFilecontentUrl,params:{file:b.file,code:b.getCode()},scope:a,logMessage:String.format("CssEditor file [{0}] was saved",b.file)})}});Ext.applyIf(afStudio.theme.CssEditor.prototype,afStudio.theme.Designerable);Ext.reg("afStudio.theme.cssEditor",afStudio.theme.CssEditor);Ext.ns("afStudio.theme");afStudio.theme.EditorsPanel=Ext.extend(Ext.Panel,{layout:"border",initComponent:function(){this.editorsMenu=new Ext.menu.Menu({floating:false,plain:true});this.themeEditor=new Ext.Container({border:false,layout:"anchor"});Ext.apply(this,Ext.apply(this.initialConfig,{items:[{region:"west",width:150,minWidth:150,maxWidth:250,collapseMode:"mini",split:true,items:[this.editorsMenu]},{xtype:"container",region:"center",layout:"fit",items:[this.themeEditor]}]}));afStudio.theme.EditorsPanel.superclass.initComponent.apply(this,arguments)},afterRender:function(){this.theme=this.refOwner.getCurrentTheme();this.updateTheme(this.theme);afStudio.theme.EditorsPanel.superclass.afterRender.call(this)},initEvents:function(){afStudio.theme.EditorsPanel.superclass.initEvents.call(this);var a=this;a.on({scope:a,themeSelection:a.onThemeSelection,activate:a.onTabActivate});a.mon(a.editorsMenu,"itemclick",a.onEditorsMenuItemClick,a)},getThemeEditors:function(a){return afStudio.theme.EditorsPanel[a]},selectEditor:function(b){var a=b.parentMenu;a.items.each(function(d,c){d.el.removeClass("x-menu-item-active")});b.el.addClass("x-menu-item-active")},refreshEditors:function(c){var d=this.getThemeEditors(c),b=this.editorsMenu,a=[];if(!Ext.isDefined(d)){throw new afStudio.error.ApsError(String.format('afStudio.theme.EditorsPanel: editors not defined for the theme "{0}"',c))}Ext.iterate(d,function(e,f){a.push(f)},this);afStudio.Logger.info("@afStudio.theme.EditorsPanel#refreshEditors",a);b.removeAll(true);b.add(a);b.doLayout();this.currentEditorMenuItem=null},updateTheme:function(b){this.theme=b;this.refreshEditors(b);var a=new afStudio.layoutDesigner.view.ViewMessageBox({viewContainer:this.themeEditor,viewMessage:'<p>Select theme editor</p> <span style="font-size:10px;"> Theme editors placed in the left(west) collapsible panel.</span>'});this.themeEditor.removeAll(true);this.themeEditor.add(a);this.disableSaveCtr();this.on("activate",function(){this.themeEditor.doLayout()},this,{single:true})},disableSaveCtr:function(){var a=this.getContainerWindow();if(a.tabs.getActiveTab()==this){a.disableSave()}},enableSaveCtr:function(){var a=this.getContainerWindow();if(a.tabs.getActiveTab()==this){a.enableSave()}},onThemeSelection:function(a){afStudio.Logger.info("@afStudio.theme.EditorsPanel:onThemeSelection",a);this.updateTheme(a)},onTabActivate:function(){this.editorsMenu.doLayout();if(this.currentEditorMenuItem==null){this.disableSaveCtr()}},onEditorsMenuItemClick:function(b,a){if(this.currentEditorMenuItem==b){return}this.enableSaveCtr();this.currentEditorMenuItem=b;this.selectEditor(b);this.runEditor(b.method)},showEditor:function(b){var a=this.themeEditor;a.removeAll(true);a.add(b);a.doLayout()},runEditor:function(a){if(Ext.isEmpty(a)){throw new afStudio.error.ApsError("afStudio.theme.EditorsPanel#runEditor error, the editor method is empty")}var b="run"+a.ucfirst();if(!Ext.isFunction(this[b])){throw new afStudio.error.ApsError(String.format("afStudio.theme.EditorsPanel#runEditor error, method {0} is undefined",b))}this[b]()},runStartMenu:function(){var a=new afStudio.theme.desktop.StartMenuEditor();this.showEditor(a)},runShortcuts:function(){var a=new afStudio.theme.desktop.ShortcutsEditor();this.showEditor(a)},runBackground:function(){var a=new afStudio.theme.desktop.BackgroundEditor();this.showEditor(a)},runMenuToolbar:function(){var a=new afStudio.theme.BaseEditor({helper:"afExtjsToolbar"});this.showEditor(a)},runWestPanel:function(){var a=new afStudio.theme.BaseEditor({helper:"afExtjsWest"});this.showEditor(a)},runSouthPanel:function(){var a=new afStudio.theme.BaseEditor({helper:"afExtjsSouth"});this.showEditor(a)},runEastPanel:function(){var a=new afStudio.theme.BaseEditor({helper:"afExtjsEast"});this.showEditor(a)},save:function(){var a=this.themeEditor.items.first();a.save()}});afStudio.theme.EditorsPanel.viewport={menuToolbar:{text:"Menu Toolbar",iconCls:"icon-studio",method:"menuToolbar"},westPanel:{text:"West Panel",iconCls:"icon-studio",method:"westPanel"},southPanel:{text:"South Panel",iconCls:"icon-studio",method:"southPanel"},eastPanel:{text:"East Panel",iconCls:"icon-studio",method:"eastPanel"}};afStudio.theme.EditorsPanel.desktop={startMenu:{text:"Start Menu",iconCls:"icon-studio",method:"startMenu"},shortcuts:{text:"Shortcuts",iconCls:"icon-studio",method:"shortcuts"},background:{text:"Background",iconCls:"icon-studio",method:"background"}};Ext.applyIf(afStudio.theme.EditorsPanel.prototype,afStudio.theme.Designerable);Ext.reg("afStudio.theme.editorsPanel",afStudio.theme.EditorsPanel);Ext.ns("afStudio.theme");afStudio.theme.BaseEditor=Ext.extend(Ext.Panel,{anchor:"100% 100%",layout:"fit",initComponent:function(){this.checkHelperFileExist();this.createRegions();Ext.apply(this,Ext.apply(this.initialConfig,{border:false,items:[this.centerPanel]}));afStudio.theme.BaseEditor.superclass.initComponent.apply(this,arguments)},createRegions:function(){this.codeEditor=new Ext.ux.AceComponent({file:"root/apps/frontend/lib/helper/"+this.helper+"Helper.php"});this.centerPanel=new Ext.Panel({layout:"fit",region:"center",items:this.codeEditor})},save:function(){var a=this,b=this.codeEditor;afStudio.xhr.executeAction({url:afStudioWSUrls.getFilecontentUrl,params:{file:b.file,code:b.getCode()},scope:a,logMessage:String.format("Helper file [{0}] was saved",b.file)})},checkHelperFileExist:function(){afStudio.xhr.executeAction({url:afStudioWSUrls.checkHelperFileUrl,params:{helper:this.helper},showNoteOnSuccess:false})}});Ext.ns("afStudio.theme.desktop");afStudio.theme.desktop.StartMenuEditor=Ext.extend(Ext.Container,{anchor:"100% 100%",initComponent:function(){this.createRegions();Ext.apply(this,Ext.apply(this.initialConfig,{layout:"border",items:[this.centerPanel,this.eastPanel]}));afStudio.theme.desktop.StartMenuEditor.superclass.initComponent.apply(this,arguments)},afterRender:function(){afStudio.theme.desktop.StartMenuEditor.superclass.afterRender.call(this);(function(){afStudio.xhr.executeAction({url:afStudioWSUrls.project,params:{cmd:"getHelper",key:"menu"},scope:this,mask:{ctn:this,msg:"menu loading..."},run:function(a){this.menuAttr=a.data.attributes;this.initMainMenu(a.data.main);this.initToolsMenu(a.data.tools);this.initView()}})}).defer(50,this)},onDestroy:function(){Ext.destroy(this.mainCt,this.toolsCt,this.errorWin);this.mainCt=this.toolsCt=this.errorWin=null;this.eastPanel=this.centerPanel=this.menuAttr=null;afStudio.theme.desktop.StartMenuEditor.superclass.onDestroy.call(this)},createRegions:function(){this.eastPanel=new Ext.TabPanel({region:"east",width:350,minWidth:300,split:true,activeTab:0,defaults:{layout:"fit"},items:[{title:"Main",ref:"mainMenu"},{title:"Tools",ref:"toolMenu"}]});this.centerPanel=new Ext.Panel({region:"center",items:[]})},initView:function(){var a=new afStudio.theme.desktop.menu.view.StartMenuView({title:this.menuAttr.title||"",iconCls:this.menuAttr.iconCls,icon:this.menuAttr.icon,items:[]});this.mainCt.registerView("menu",a);this.toolsCt.registerView("tools",a);this.centerPanel.add(a);this.centerPanel.doLayout();a.show(this.centerPanel.body,"c-c?")},initMainMenu:function(a){var b={attributes:{type:"main",title:this.menuAttr.title,iconCls:this.menuAttr.iconCls,icon:this.menuAttr.icon}};b.children=a;this.mainCt=new afStudio.theme.desktop.menu.controller.MenuController({viewDefinition:b,listeners:{scope:this,ready:function(c){var d=new afStudio.view.InspectorPalette({controller:c});this.eastPanel.mainMenu.add(d);this.eastPanel.mainMenu.doLayout()}}});this.mainCt.run();afStudio.Logger.info("@menu main controller",this.mainCt)},initToolsMenu:function(b){var a={attributes:{type:"tools"}};a.children=b;this.toolsCt=new afStudio.theme.desktop.menu.controller.MenuController({viewDefinition:a,listeners:{scope:this,ready:function(c){var d=new afStudio.view.InspectorPalette({controller:c});this.eastPanel.toolMenu.add(d);this.eastPanel.toolMenu.doLayout()}}});this.toolsCt.run();afStudio.Logger.info("@menu tools controller",this.toolsCt)},validate:function(){var a=this.mainCt.validateModel(),b=this.toolsCt.validateModel(),c=[];if(a!==true){c.push({node:"MAIN",error:null,children:a.children})}if(b!==true){c.push({node:"TOOLS",error:null,children:b.children})}if(c.length>0){c={children:c};if(!this.errorWin){this.errorWin=new afStudio.view.ModelErrorWindow({title:"Desktop start menu"})}this.errorWin.modelErrors=c;this.errorWin.show();return false}return true},save:function(){if(this.validate()==false){return}var b={};var a=this.mainCt.root.fetchNodeDefinition(),c=this.toolsCt.root.fetchNodeDefinition();afStudio.Logger.info("@menu main definition",a,Ext.encode(a));afStudio.Logger.info("@menu tools definition",c,Ext.encode(c));b.attributes=a.attributes;if(a.children){b.main=a.children}if(c.children){b.tools=c.children}afStudio.Logger.info("@menu",b,Ext.encode(b));afStudio.xhr.executeAction({url:afStudioWSUrls.project,params:{cmd:"saveHelper",key:"menu",content:Ext.encode(b)},mask:{ctn:this,msg:"saving..."}})}});afStudio.theme.StartMenuEditor=afStudio.theme.desktop.StartMenuEditor;Ext.ns("afStudio.theme.desktop.menu.model.template");afStudio.theme.desktop.menu.model.template.MainTemplate=Ext.extend(afStudio.model.template.BaseTemplate,{constructor:function(){var a=afStudio.theme.desktop.menu.model;a.template.MainTemplate.superclass.constructor.call(this);this.extendStructure([{name:a.Nodes.ITEM,hasMany:true,unique:"name"},{name:a.Nodes.BUTTON,hasMany:true,unique:"name"}])}});afStudio.theme.desktop.menu.model.template.ToolsTemplate=Ext.extend(afStudio.model.template.BaseTemplate,{constructor:function(){var a=afStudio.theme.desktop.menu.model;a.template.ToolsTemplate.superclass.constructor.call(this);this.extendStructure([{name:a.Nodes.TOOL,hasMany:true,unique:"name"}])}});Ext.ns("afStudio.theme.desktop.menu.model");N=afStudio.theme.desktop.menu.model;N.Nodes={ITEM:"item",BUTTON:"button",TOOL:"tool"};delete N;Ext.ns("afStudio.theme.desktop.menu.model");afStudio.theme.desktop.menu.model.Node=Ext.extend(afStudio.model.Node,{_content:null,applyNodeDefinition:function(c,a){var e=this,d=afStudio.theme.desktop.menu.model;if(!Ext.isDefined(c)){return}a?this.suspendEvents():null;if(Ext.isObject(c)){var f=Ext.apply({},c);if(f.attributes){this.applyProperties(f.attributes)}var b=e.getModelType();if(f.children){Ext.iterate(f.children,function(j,i){var g=Ext.isObject(i.attributes)?i.attributes.type:null;g=Ext.isEmpty(g)?(b=="main"?d.Nodes.ITEM:d.Nodes.TOOL):g;if(g!=d.Nodes.TOOL){if(i.attributes){i.attributes.name=j}else{i.attributes={name:j}}}else{i.name=j}e.createNode(g,i)})}}a?this.resumeEvents():null},fetchNodeDefinition:function(){var a=afStudio.theme.desktop.menu.model,b={};if(this.properties.getCount()>0){b.attributes=this.getPropertiesHash(true);delete b.attributes.name;if(b.attributes.type!=a.Nodes.BUTTON){delete b.attributes.type}}if(this.hasChildNodes()){b.children={};this.eachChild(function(c){b.children[c.getPropertyValue("name")]=c.fetchNodeDefinition()},this)}return b},getNodeConstructorByName:function(d){var a=this.getModelType(),c=String(d).trim().ucfirst(),b=[afStudio.theme.desktop.menu.model,afStudio.model];Ext.iterate(b,function(e){if(Ext.isFunction(e[c])){c=e[c];return false}});return Ext.isFunction(c)?c:null},getNodeValidationName:function(){return this.toString()},toString:function(){var a=new Ext.XTemplate('[node: "{tag}", properties: {[this.toJson(values.properties.map)]} ]',{compiled:true,disableFormats:true,toJson:function(b){var c={};Ext.iterate(b,function(e,d){if(d.required===true&&!Ext.isEmpty(d.value)){c[e]=d.value}});return Ext.encode(c)}});return a.apply(this)}});afStudio.theme.desktop.menu.model.Root=Ext.extend(afStudio.theme.desktop.menu.model.Node,{tag:"root",properties:[{name:"type",type:"string",required:true,readOnly:true}],constructor:function(a){afStudio.theme.desktop.menu.model.Root.superclass.constructor.call(this,a);this.modelType=this.getModelType();this.initStructure(a.structureTpl);this.processStructure()},initStructure:function(a){var b=this.getModelType();if(a){a=Ext.isFunction(a)?a:afStudio.theme.desktop.menu.model.template[a]}else{if(b){var c=b.ucfirst()+"Template";a=afStudio.theme.desktop.menu.model.template[c]}}this.strTpl=Ext.isFunction(a)?new a():undefined},processStructure:function(){if(!this.strTpl){return}this.suspendEvents();this.strTpl.processStructure(this);this.resumeEvents();this.nodeTypes=this.nodeTypes.concat(this.strTpl.structure)},getRootNode:function(){return this},getModelType:function(){return this.getPropertyValue("type")},getModelNode:function(a){return this.findChildById(a,true)},getImmediateModelNode:function(a){return this.findChildById(a,false,true)},isValid:function(){var a={children:[]};this.eachChild(function(b){var c=b.validate();if(c!==true){a.children.push(c)}});return a.children.length>0?a:true}});afStudio.theme.desktop.menu.model.MainRoot=Ext.extend(afStudio.theme.desktop.menu.model.Root,{properties:[{name:"type",type:"string",required:true,readOnly:true},{name:"title",type:"string"},{name:"iconCls",type:"token"},{name:"icon",type:"absoluteUriType"}]});N=afStudio.theme.desktop.menu.model;N.Item=Ext.extend(N.Node,{tag:N.Nodes.ITEM,properties:[{name:"name",type:"dbNameType",required:true},{name:"type",type:"menuItemType",required:true,defaultValue:"item"},{name:"label",type:"string",required:true},{name:"url",type:"anyURI",required:true},{name:"iconCls",type:"token"},{name:"icon",type:"absoluteUriType"},{name:"tooltip",type:"string"}],defaultDefinition:{attributes:{label:"Item",name:"item",url:"#"}},nodeTypes:[{name:N.Nodes.ITEM,hasMany:true,unique:"name"},{name:N.Nodes.BUTTON,hasMany:true,unique:"name"}],onModelPropertyChanged:function(f,i,b,c){var a=this.getOwnerTree(),e=afStudio.theme.desktop.menu.model;if(a&&i=="type"){var d=null,g={attributes:f.getPropertiesHash()};if(b==e.Nodes.BUTTON){delete g.attributes.url;d=new e.Button({definition:g})}f.parentNode.replaceChildPreserveContent(d,f);d.getOwnerTree().selectModelNode(d)}return true}});delete N;N=afStudio.theme.desktop.menu.model;N.Button=Ext.extend(N.Node,{tag:N.Nodes.BUTTON,properties:[{name:"name",type:"dbNameType",required:true},{name:"type",type:"menuItemType",required:true,defaultValue:"button"},{name:"label",type:"string",required:true},{name:"handler",type:"string",required:true},{name:"iconCls",type:"token"},{name:"icon",type:"absoluteUriType"},{name:"tooltip",type:"string"}],defaultDefinition:{attributes:{label:"Button",name:"button"}},nodeTypes:[{name:N.Nodes.ITEM,hasMany:true,unique:"name"},{name:N.Nodes.BUTTON,hasMany:true,unique:"name"}],onModelPropertyChanged:function(f,i,b,c){var a=this.getOwnerTree(),e=afStudio.theme.desktop.menu.model;if(a&&i=="type"){var d=null,g={attributes:f.getPropertiesHash()};if(b==e.Nodes.ITEM){delete g.attributes.handler;d=new e.Item({definition:g})}f.parentNode.replaceChildPreserveContent(d,f);d.getOwnerTree().selectModelNode(d)}return true}});delete N;N=afStudio.theme.desktop.menu.model;N.Tool=Ext.extend(N.Node,{tag:N.Nodes.TOOL,properties:[{name:"name",type:"dbNameType",required:true},{name:"text",type:"string",required:true},{name:"url",type:"anyURI",required:true},{name:"iconCls",type:"token"},{name:"icon",type:"absoluteUriType"}],defaultDefinition:{name:"tool",text:"Tool",url:"#"},applyNodeDefinition:function(b,a){var c=this;if(!Ext.isDefined(b)){return}a?this.suspendEvents():null;if(Ext.isObject(b)){this.applyProperties(b)}a?this.resumeEvents():null},fetchNodeDefinition:function(){var a=this.getPropertiesHash(true);delete a.name;return a}});delete N;Ext.ns("afStudio.theme.desktop.menu.controller");afStudio.theme.desktop.menu.controller.MenuController=Ext.extend(afStudio.controller.BaseController,{constructor:function(a){a=a||{};afStudio.theme.desktop.menu.controller.MenuController.superclass.constructor.call(this,a);this.setupViews()},setupViews:function(){Ext.apply(this.views,{inspectorTree:{view:afStudio.theme.desktop.menu.view.inspector.InspectorTree,cfg:{border:false}},propertyGrid:{view:afStudio.view.property.PropertyGrid,cfg:{border:false}}})},resolveRootNode:function(a){return a.attributes.type=="main"?afStudio.theme.desktop.menu.model.MainRoot:afStudio.theme.desktop.menu.model.Root},registerView:function(d,b,a){var c=this;a=Ext.apply(a||{},{controller:c});if(Ext.isFunction(b)){b=c.views[d]=new b(a)}else{if(b instanceof Ext.BoxComponent){c.views[d]=b;b.init(a)}}b.relayEvents(c,["modelNodeAppend","modelNodeInsert","modelNodeRemove","modelNodeMove","modelNodeSelect","modelPropertyChanged","modelReconfigure"])},initModelEvents:function(){},saveViewDefinition:function(a){},getModelType:function(){var a=this.getRootNode();return a.getModelType()}});Ext.ns("afStudio.theme.desktop.menu.view.inspector");afStudio.theme.desktop.menu.view.inspector.InspectorTree=Ext.extend(afStudio.view.inspector.InspectorTree,{_beforeInitComponent:function(){var b=this.controller.getRootNode(),c=afStudio.theme.desktop.menu.view.inspector;this.enableDD=true;this.root={expanded:true,modelNode:b,iconCls:"icon-tb-menu",properties:{name:"Menu"}};var a=this.loader;if(!a){a=new c.InspectorLoader()}else{if(Ext.isObject(a)&&!a.load){a=new c.InspectorLoader(a)}}this.loader=a},onNodeDragOver:function(){return true},onNodeDrop:function(d){var c=d.dropNode.modelNode,b=d.point,a=d.target.modelNode;switch(b){case"above":a.parentNode.insertBefore(c,a);break;case"below":a.parentNode.insertBefore(c,a.nextSibling);break;case"append":a.appendChild(c);break}}});afStudio.theme.desktop.menu.view.inspector.nodeType={};Ext.ns("afStudio.theme.desktop.menu.view.inspector");afStudio.theme.desktop.menu.view.inspector.InspectorLoader=Ext.extend(afStudio.view.inspector.InspectorLoader,{resolveNodeType:function(b){var c=String(b).trim().ucfirst(),a=[afStudio.theme.desktop.menu.view.inspector.nodeType];c+="Node";Ext.iterate(a,function(d){if(Ext.isFunction(d[c])){c=d[c];return false}});return Ext.isFunction(c)?c:null}});N=afStudio.theme.desktop.menu.view.inspector;N.ItemNode=Ext.extend(afStudio.view.inspector.ContainerNode,{labelProperty:"label",initNode:function(a){a.iconCls="icon-tb-menu-item"}});N.nodeType.ItemNode=N.ItemNode;delete N;N=afStudio.theme.desktop.menu.view.inspector;N.ButtonNode=Ext.extend(afStudio.view.inspector.ContainerNode,{labelProperty:"label",initNode:function(a){a.iconCls="icon-tb-menu-btn"}});N.nodeType.ButtonNode=N.ButtonNode;delete N;N=afStudio.theme.desktop.menu.view.inspector;N.ToolNode=Ext.extend(afStudio.view.inspector.TreeNode,{labelProperty:"text",initNode:function(a){a.iconCls="icon-tb-menu-tool"}});N.nodeType.ToolNode=N.ToolNode;delete N;Ext.ns("afStudio.theme.desktop.menu.view");afStudio.theme.desktop.menu.view.ModelInterface=(function(){return{NODES:afStudio.theme.desktop.menu.model.Nodes,getMenuItems:function(e){var b=[],d=e.childNodes;for(var c=0,a=d.length;c<a;c++){var f=d[c];b[c]=this.getModelNodeProperties(f);if(f.hasChildNodes()){b[c].children=this.getMenuItems(f)}}return b},getNodeDef:function(c){var a=this.getModelNodeProperties(c),b=this.getMenuItems(c);if(b.length>0){a.children=b}return a}}})();Ext.applyIf(afStudio.theme.desktop.menu.view.ModelInterface,afStudio.view.ModelInterface);Ext.ns("afStudio.theme.desktop.menu.view");afStudio.theme.desktop.menu.view.ModelReflector=(function(){return{getExecutorToken:function(a){return a.ucfirst()},correctExecutorLine:function(a,c,d,e){var b=d.getOwnerTree().getModelType();if(b=="main"){a="MainItem"}if(d.isRoot){a="Root"+a}return a},executeUpdateRootMainItemTitle:function(d,c,e,a,b){this.setTitle(a)},executeUpdateRootMainItemIconCls:function(d,c,e,a,b){a=Ext.util.Format.trim(a);this.setTitleIconCls(a)},executeUpdateRootMainItemIcon:function(d,c,e,a,b){this.setTitleIcon(a)},executeAddMainItem:function(e,g,a){var d=this.getCmpByModel(e),c=this.getNodeDef(g),b=this.createMainMenuItem(c);if(e.isRoot&&d==null){this.insert(a,b);this.doLayout()}else{if(d.menu){d.menu.insert(a,b);d.menu.doLayout()}else{var f={ignoreParentClicks:true,items:[b],ownerCt:d};d.menu=Ext.menu.MenuMgr.get(f);if(d.el){d.el.addClass("x-menu-item-arrow")}}}},executeRemoveMainItem:function(c,d,a){var b=this.getCmpByModel(c);Ext.destroy(a);if(!c.isRoot&&b.menu.items.length==0){Ext.destroy(b.menu);b.menu=null;if(b.el){b.el.removeClass("x-menu-item-arrow")}}},executeInsertMainItem:function(b,c){var a=b.indexOf(c);this.executeAddMainItem(b,c,a)},executeUpdateMainItemLabel:function(d,c,e,a,b){c.setText(a?a:d.getPropertyValue("name"))},executeUpdateMainItemName:function(d,c,e,a,b){if(Ext.isEmpty(c.text)||c.text==b){c.setText(a)}},executeUpdateMainItemIconCls:function(d,c,e,a,b){c.setIconClass(a)},executeUpdateMainItemIcon:function(d,c,e,a,b){c.iconEl.dom.src=a?a:Ext.BLANK_IMAGE_URL},executeAddTool:function(d,e,a){var c=this.getModelNodeProperties(e),b=this.createToolsMenuItem(c);a++;this.insertToolItem(a,b)},executeRemoveTool:function(b,c,a){Ext.destroy(a)},executeInsertTool:function(b,c){var a=b.indexOf(c);this.executeAddTool(b,c,a)},executeUpdateToolText:function(d,c,e,a,b){c.setText(a?a:d.getPropertyValue("name"))},executeUpdateToolName:function(d,c,e,a,b){if(Ext.isEmpty(c.text)||c.text==b){c.setText(a)}},executeUpdateToolIconCls:function(d,c,e,a,b){c.setIconClass(a)},executeUpdateToolIcon:function(d,c,e,a,b){c.iconEl.dom.src=a?a:Ext.BLANK_IMAGE_URL}}})();Ext.applyIf(afStudio.theme.desktop.menu.view.ModelReflector,afStudio.view.ModelReflector);Ext.ns("afStudio.theme.desktop.menu.view");afStudio.theme.desktop.menu.view.StartMenuView=Ext.extend(Ext.ux.StartMenu,{floating:false,height:346,width:300,controller:null,currentCtrl:null,initComponent:function(){afStudio.theme.desktop.menu.view.StartMenuView.superclass.initComponent.apply(this,arguments);this.modelMapper={};var a=this;this.on({scope:a,modelNodeAppend:a.onModelNodeAppend,modelNodeInsert:a.onModelNodeInsert,modelNodeRemove:a.onModelNodeRemove,modelPropertyChanged:a.onModelPropertyChanged})},onDestroy:function(){this.controller=this.modelMapper=null;afStudio.theme.desktop.menu.view.StartMenuView.superclass.onDestroy.call(this)},init:function(a){var b=a.controller.getModelType();afStudio.Logger.info("@startMenu view registered",b);if(!this.controller){this.controller={}}this.controller[b]=a.controller;delete a.controller;Ext.apply(this,a);this.initController(this.controller[b])},initController:function(c){var b=c.root.getModelType(),a=String.format("build{0}Menu",b.ucfirst());if(Ext.isFunction(this[a])){this[a](c)}},getController:function(){if(!this.currentCtrl){throw new afStudio.error.ApsError("Current controller is not specified")}return this.currentCtrl},buildMainMenu:function(b){afStudio.Logger.info('@view [StartMenu] building "main" menu');this.currentCtrl=b;var a=this.getMenuItems(b.root);if(!Ext.isEmpty(a)){Ext.each(a,function(d){var c=this.createMainMenuItem(d);this.add(c)},this);this.doLayout()}},buildToolsMenu:function(b){afStudio.Logger.info('@view [StartMenu] building "tools" menu');this.currentCtrl=b;var a=this.getMenuItems(b.root);if(!Ext.isEmpty(a)){Ext.each(a,function(d){var c=this.createToolsMenuItem(d);this.addTool(c)},this);this.doLayout()}},onModelNodeAppend:function(d,b,c,a){afStudio.Logger.info("@view [StartMenu] modelNodeAppend",b,c);this.currentCtrl=d;var e=this.getExecutor(this.EXEC_ADD,c);if(e){e(b,c,a)}},onModelNodeInsert:function(e,c,d,a){afStudio.Logger.info("@view [StartMenu] modelNodeInsert",c,d);this.currentCtrl=e;var b=this.getCmpByModel(a),f=this.getExecutor(this.EXEC_INSERT,d);if(f){f(c,d,a,b)}},onModelNodeRemove:function(d,a,c){afStudio.Logger.info("@view [StartMenu] modelNodeRemove",a,c);this.currentCtrl=d;var b=this.getCmpByModel(c),e=this.getExecutor(this.EXEC_REMOVE,c);if(e){e(a,c,b)}},onModelPropertyChanged:function(d,e,a,b){afStudio.Logger.info("@view [StartMenu] modelPropertyChanged",d);this.currentCtrl=d.getOwnerTree();var c=this.getCmpByModel(d,e),f=this.getExecutor(this.EXEC_UPDATE,d,e);if(f){f(d,c,e,a,b)}},createMainMenuItem:function(d){var b=this.NODE_ID_MAPPER,e=d[b];var a={text:d.label,icon:d.icon,iconCls:d.iconCls};a[b]=e;if(d.children){var c=[];Ext.each(d.children,function(g,f){c[f]=this.createMainMenuItem(g)},this);a.menu={border:false,ignoreParentClicks:true,items:c}}return this.createItem(a)},createToolsMenuItem:function(c){var b=this.NODE_ID_MAPPER,d=c[b];var a=Ext.copyTo({},c,"text, icon, iconCls");a[b]=d;return this.createItem(a)},createItem:function(a){var b=this.getController(),c=new Ext.menu.Item(a);c.on({scope:this,activate:function(d){this.currentCtrl=b;var e=this.getModelByCmp(d);b.selectModelNode(e,this)},beforedestroy:function(d){this.unmapCmpFromModel(d[this.NODE_ID_MAPPER])}});this.mapCmpToModel(a[this.NODE_ID_MAPPER],c);return c}});Ext.applyIf(afStudio.theme.desktop.menu.view.StartMenuView.prototype,afStudio.view.ModelMapper);Ext.applyIf(afStudio.theme.desktop.menu.view.StartMenuView.prototype,afStudio.theme.desktop.menu.view.ModelInterface);Ext.applyIf(afStudio.theme.desktop.menu.view.StartMenuView.prototype,afStudio.theme.desktop.menu.view.ModelReflector);Ext.ns("afStudio.theme.desktop");afStudio.theme.desktop.ShortcutsEditor=Ext.extend(Ext.Panel,{anchor:"100% 100%",initComponent:function(){this.createRegions();Ext.apply(this,Ext.apply(this.initialConfig,{layout:"border",items:[this.centerPanel,this.eastPanel]}));afStudio.theme.desktop.ShortcutsEditor.superclass.initComponent.apply(this,arguments)},afterRender:function(){afStudio.theme.desktop.ShortcutsEditor.superclass.afterRender.call(this);(function(){afStudio.xhr.executeAction({url:afStudioWSUrls.project,params:{cmd:"getHelper",key:"links"},mask:{ctn:this,msg:"shortcuts loading..."},scope:this,run:function(a){this.initShortCutsInspector(a.data);this.initView()}})}).defer(50,this)},createRegions:function(){this.eastPanel=new Ext.Panel({region:"east",layout:"fit",width:350,minWidth:300,split:true,activeTab:0,bodyBorder:false,items:[]});this.centerPanel=new Ext.Panel({region:"center",layout:"fit",items:[]})},initShortCutsInspector:function(a){var b={attributes:{type:"shortcut"}};b.children=a;this.controller=new afStudio.theme.desktop.shortcut.controller.ShortcutController({viewDefinition:b,listeners:{scope:this,ready:function(c){var d=new afStudio.view.InspectorPalette({controller:c});this.eastPanel.add(d);this.eastPanel.doLayout()}}});this.controller.run();afStudio.Logger.info("@shortcut controller",this.controller)},initView:function(){var a=new afStudio.theme.desktop.shortcut.view.ShortcutsView({controller:this.controller});this.centerPanel.add(a);this.centerPanel.doLayout()},validate:function(){var a=this.controller.validateModel(),b=[];if(a!==true){if(!this.errorWin){this.errorWin=new afStudio.view.ModelErrorWindow({title:"Desktop Shortcuts"})}this.errorWin.modelErrors={children:a.children};this.errorWin.show();return false}return true},save:function(){if(this.validate()==false){return}var a=this.controller.root.fetchNodeDefinition();afStudio.Logger.info("@shortcut definition",a,Ext.encode(a.children));afStudio.xhr.executeAction({url:afStudioWSUrls.project,params:{cmd:"saveHelper",key:"links",content:Ext.encode(a.children)}})}});afStudio.theme.ShortcutsEditor=afStudio.theme.desktop.ShortcutsEditor;Ext.ns("afStudio.theme.desktop.shortcut.model.template");afStudio.theme.desktop.shortcut.model.template.ShortcutTemplate=Ext.extend(afStudio.model.template.BaseTemplate,{constructor:function(){var a=afStudio.theme.desktop.shortcut.model;a.template.ShortcutTemplate.superclass.constructor.call(this);this.extendStructure([{name:a.Nodes.LINK,hasMany:true,unique:"name"}])}});Ext.ns("afStudio.theme.desktop.shortcut.model");N=afStudio.theme.desktop.shortcut.model;N.Nodes={LINK:"link"};delete N;Ext.ns("afStudio.theme.desktop.shortcut.model");afStudio.theme.desktop.shortcut.model.Node=Ext.extend(afStudio.theme.desktop.menu.model.Node,{_content:null,applyNodeDefinition:function(c,a){var e=this,d=afStudio.theme.desktop.shortcut.model;if(!Ext.isDefined(c)){return}a?this.suspendEvents():null;if(Ext.isObject(c)){var f=Ext.apply({},c);if(f.attributes){this.applyProperties(f.attributes)}var b=e.getModelType();if(f.children){Ext.iterate(f.children,function(i,g){nt=d.Nodes.LINK;g.name=i;e.createNode(nt,g)})}}a?this.resumeEvents():null},fetchNodeDefinition:function(){var a=afStudio.theme.desktop.shortcut.model,b={};if(this.properties.getCount()>0){b.attributes=this.getPropertiesHash(true);delete b.attributes.name}if(this.hasChildNodes()){b.children={};this.eachChild(function(c){b.children[c.getPropertyValue("name")]=c.fetchNodeDefinition()},this)}return b},getNodeConstructorByName:function(d){var a=this.getModelType(),c=String(d).trim().ucfirst(),b=[afStudio.theme.desktop.shortcut.model,afStudio.model];Ext.iterate(b,function(e){if(Ext.isFunction(e[c])){c=e[c];return false}});return Ext.isFunction(c)?c:null}});afStudio.theme.desktop.shortcut.model.Root=Ext.extend(afStudio.theme.desktop.shortcut.model.Node,{tag:"root",properties:[{name:"type",type:"string",required:true,readOnly:true}],constructor:function(a){afStudio.theme.desktop.shortcut.model.Root.superclass.constructor.call(this,a);this.modelType=this.getModelType();this.initStructure(a.structureTpl);this.processStructure()},initStructure:function(a){var b=this.getModelType();if(a){a=Ext.isFunction(a)?a:afStudio.theme.desktop.shortcut.model.template[a]}else{if(b){var c=b.ucfirst()+"Template";a=afStudio.theme.desktop.shortcut.model.template[c]}}this.strTpl=Ext.isFunction(a)?new a():undefined},processStructure:function(){if(!this.strTpl){return}this.suspendEvents();this.strTpl.processStructure(this);this.resumeEvents();this.nodeTypes=this.nodeTypes.concat(this.strTpl.structure)},getRootNode:function(){return this},getModelType:function(){return this.getPropertyValue("type")},getModelNode:function(a){return this.findChildById(a,true)},getImmediateModelNode:function(a){return this.findChildById(a,false,true)},isValid:function(){var a={children:[]};this.eachChild(function(b){var c=b.validate();if(c!==true){a.children.push(c)}});return a.children.length>0?a:true}});N=afStudio.theme.desktop.shortcut.model;N.Link=Ext.extend(N.Node,{tag:"link",properties:[{name:"name",type:"dbNameType",required:true},{name:"title",type:"string",required:true},{name:"url",type:"anyURI",required:true},{name:"iconCls",type:"token"},{name:"icon",type:"absoluteUriType"}],defaultDefinition:{name:"shortcut",title:"Shortcut",url:"#"},applyNodeDefinition:function(b,a){var c=this;if(!Ext.isDefined(b)){return}a?this.suspendEvents():null;if(Ext.isObject(b)){this.applyProperties(b)}a?this.resumeEvents():null},fetchNodeDefinition:function(){var a=this.getPropertiesHash(true);delete a.name;return a}});delete N;Ext.ns("afStudio.theme.desktop.shortcut.controller");afStudio.theme.desktop.shortcut.controller.ShortcutController=Ext.extend(afStudio.controller.BaseController,{constructor:function(a){a=a||{};afStudio.theme.desktop.shortcut.controller.ShortcutController.superclass.constructor.call(this,a);this.setupViews()},setupViews:function(){Ext.apply(this.views,{inspectorTree:{view:afStudio.theme.desktop.shortcut.view.inspector.InspectorTree,cfg:{border:false}},propertyGrid:{view:afStudio.view.property.PropertyGrid,cfg:{border:false}}})},resolveRootNode:function(a){return afStudio.theme.desktop.shortcut.model.Root},registerView:function(d,b,a){var c=this;a=Ext.apply(a||{},{controller:c});if(Ext.isFunction(b)){b=c.views[d]=new b(a)}else{if(b instanceof Ext.util.Observable){c.views[d]=b;b.init(a)}}b.relayEvents(c,["modelNodeAppend","modelNodeInsert","modelNodeRemove","modelNodeMove","modelNodeSelect","modelPropertyChanged","modelReconfigure"])},initModelEvents:function(){},saveViewDefinition:function(a){}});Ext.ns("afStudio.theme.desktop.shortcut.view.inspector");afStudio.theme.desktop.shortcut.view.inspector.InspectorTree=Ext.extend(afStudio.view.inspector.InspectorTree,{_beforeInitComponent:function(){var b=this.controller.getRootNode(),c=afStudio.theme.desktop.shortcut.view.inspector;this.enableDD=true;this.root={expanded:true,modelNode:b,iconCls:"icon-tb-menu",properties:{name:"Shortcuts"}};var a=this.loader;if(!a){a=new c.InspectorLoader()}else{if(Ext.isObject(a)&&!a.load){a=new c.InspectorLoader(a)}}this.loader=a},onNodeDragOver:function(){return true},onNodeDrop:function(d){var c=d.dropNode.modelNode,b=d.point,a=d.target.modelNode;switch(b){case"above":a.parentNode.insertBefore(c,a);break;case"below":a.parentNode.insertBefore(c,a.nextSibling);break;case"append":a.appendChild(c);break}}});afStudio.theme.desktop.shortcut.view.inspector.nodeType={};Ext.ns("afStudio.theme.desktop.shortcut.view.inspector");afStudio.theme.desktop.shortcut.view.inspector.InspectorLoader=Ext.extend(afStudio.view.inspector.InspectorLoader,{resolveNodeType:function(b){var c=String(b).trim().ucfirst(),a=[afStudio.theme.desktop.shortcut.view.inspector.nodeType];c+="Node";Ext.iterate(a,function(d){if(Ext.isFunction(d[c])){c=d[c];return false}});return Ext.isFunction(c)?c:null}});N=afStudio.theme.desktop.shortcut.view.inspector;N.LinkNode=Ext.extend(afStudio.view.inspector.TreeNode,{labelProperty:"name",initNode:function(a){a.iconCls="icon-tb-shortcut-link"}});N.nodeType.LinkNode=N.LinkNode;delete N;Ext.ns("afStudio.theme.desktop.shortcut.view");afStudio.theme.desktop.shortcut.view.ModelReflector=(function(){return{getExecutorToken:function(a){return a.ucfirst()},executeAddLink:function(c,a){var b=c.getPropertiesRecord();this.insert(a,[b])},executeInsertLink:function(c,b,d){var a=this.indexOf(d);this.executeAddLink(c,a)},executeRemoveLink:function(b,a){this.remove(a)},executeUpdateLinkTitle:function(d,a,e,b,c){a.set(e,Ext.isEmpty(b)?a.get("name"):b)},executeUpdateLinkUrl:function(d,a,e,b,c){a.set(e,b)},executeUpdateLinkIcon:function(d,a,e,b,c){a.set(e,b)},executeUpdateLinkIconCls:function(d,a,e,b,c){a.set(e,b)}}})();Ext.applyIf(afStudio.theme.desktop.shortcut.view.ModelReflector,afStudio.view.ModelReflector);Ext.ns("afStudio.theme.desktop.shortcut.view");afStudio.theme.desktop.shortcut.view.ShortcutsCollection=Ext.extend(Ext.util.MixedCollection,{NS:afStudio.theme.desktop.shortcut.view,constructor:function(){this.modelMapper={};afStudio.theme.desktop.shortcut.view.ShortcutsCollection.superclass.constructor.apply(this,arguments)},add:function(a,b){if(arguments.length==1){b=arguments[0];a=this.getKey(b)}this.mapCmpToModel(a,b);return this.NS.ShortcutsCollection.superclass.add.apply(this,[a,b])},insert:function(a,b,c){c=this.NS.ShortcutsCollection.superclass.insert.apply(this,arguments);if(a<this.length){b=this.getKey(c);this.mapCmpToModel(b,c)}return c},removeAt:function(a){var b=this.items[a];if(b){this.unmapCmpFromModel(b)}return this.NS.ShortcutsCollection.superclass.removeAt.call(this,a)}});Ext.applyIf(afStudio.theme.desktop.shortcut.view.ShortcutsCollection.prototype,afStudio.view.ModelMapper);Ext.ns("afStudio.theme.desktop.shortcut.view");afStudio.theme.desktop.shortcut.view.ShortcutsStore=Ext.extend(Ext.data.Store,{controller:null,constructor:function(a){var b=a.data?a.data:null;delete a.data;afStudio.theme.desktop.shortcut.view.ShortcutsStore.superclass.constructor.call(this,Ext.apply(a,{autoLoad:false,sortInfo:false,multiSortInfo:false,url:null,api:null,proxy:null,reader:new Ext.data.JsonReader({idProperty:"model-id",fields:["model-id","name","title","url","iconCls","icon"]})}));this.data=new afStudio.theme.desktop.shortcut.view.ShortcutsCollection(false);if(b){this.loadData(b)}else{this.loadModel()}},init:function(){var a=this;this.on({scope:a,modelNodeAppend:a.onModelNodeAppend,modelNodeInsert:a.onModelNodeInsert,modelNodeRemove:a.onModelNodeRemove,modelPropertyChanged:a.onModelPropertyChanged})},getModelAsRecords:function(){var a=this.controller.root,b=[];a.eachChild(function(c){b.push(c.getPropertiesRecord())});return b},loadModel:function(){var a=this.getModelAsRecords();this.loadRecords({records:a},{add:false},true)},onModelNodeAppend:function(d,b,c,a){afStudio.Logger.info("@view [Shortcuts->store] modelNodeAppend",arguments);var e=this.getExecutor(this.EXEC_ADD,c);if(e){e(c,a)}},onModelNodeInsert:function(e,b,c,a){afStudio.Logger.info("@view [Shortcuts->store] modelNodeInsert",arguments);var d=this.data.getCmpByModel(a),f=this.getExecutor(this.EXEC_INSERT,c);if(f){f(c,a,d)}},onModelNodeRemove:function(d,a,c){afStudio.Logger.info("@view [Shortcuts->store] modelNodeRemove",arguments);var b=this.data.getCmpByModel(c),e=this.getExecutor(this.EXEC_REMOVE,c);if(e){e(c,b)}},onModelPropertyChanged:function(d,e,a,b){afStudio.Logger.info("@view [Shortcuts->store] modelPropertyChanged",arguments);var c=this.data.getCmpByModel(d,e),f=this.getExecutor(this.EXEC_UPDATE,d,e);if(f){f(d,c,e,a,b)}}});Ext.applyIf(afStudio.theme.desktop.shortcut.view.ShortcutsStore.prototype,afStudio.theme.desktop.shortcut.view.ModelReflector);Ext.ns("afStudio.theme.desktop.shortcut.view");afStudio.theme.desktop.shortcut.view.ShortcutsView=Ext.extend(Ext.DataView,{controller:null,initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,{itemSelector:"dt.shortcut",tpl:new Ext.XTemplate('<dl id="x-shortcuts">','<tpl for=".">','<dt class="shortcut {iconCls}">','<a href="javascript: void 0;">','<img src="{[this.getImg(values.icon)]}" title="{name}" />',"<div>{title}</div>","</a>","</dt>","</tpl>",'<div class="x-clean" />',"</dl>",{getImg:function(a){return Ext.isEmpty(a)?Ext.BLANK_IMAGE_URL:a}}),store:new afStudio.theme.desktop.shortcut.view.ShortcutsStore({controller:this.controller})}));this.controller.registerView("shortcutStore",this.store);afStudio.theme.desktop.shortcut.view.ShortcutsView.superclass.initComponent.call(this)},afterRender:function(){afStudio.theme.desktop.shortcut.view.ShortcutsView.superclass.afterRender.call(this);this.store.data.dumpMapper()},prepareData:function(c,b,a){return c}});Ext.ns("afStudio.theme.desktop");afStudio.theme.desktop.BackgroundEditor=Ext.extend(Ext.Panel,{anchor:"100% 100%",initComponent:function(){this.createContent();Ext.apply(this,Ext.apply(this.initialConfig,{layout:"vbox",layoutConfig:{align:"stretch",pack:"start"},items:[this.wallpaper,this.bgtools]}));afStudio.theme.desktop.BackgroundEditor.superclass.initComponent.apply(this,arguments)},afterRender:function(){afStudio.theme.desktop.BackgroundEditor.superclass.afterRender.call(this);(function(){this.fetchBackgroundData(function(a){var b=a.data;this.wallpaper.store.loadData(b.list);this.selectWallpaper(b.active_image);this.bgtools.bgcolor.setValue(b.active_color)})}).defer(50,this)},createContent:function(){var a=new Ext.data.JsonStore({fields:["id","name","image"],data:[]});var b=new Ext.XTemplate('<tpl for=".">','<div class="thumb-wrap" id="{image}">','<div class="thumb"><img src="{image}" title="{name}"></div>','<span class="x-editable">{shortName}</span></div>',"</tpl>");this.wallpaper=new Ext.DataView({store:a,tpl:b,flex:1,autoScroll:true,singleSelect:true,cls:"desktop-bg",overClass:"x-view-over",itemSelector:"div.thumb-wrap",emptyText:"No images to display",prepareData:function(c){c.shortName=Ext.util.Format.ellipsis(c.name,15);return c},listeners:{containerclick:function(c,d){return false}}});this.bgtools=new Ext.FormPanel({fileUpload:true,padding:5,frame:true,items:[{xtype:"container",layout:"column",items:[{layout:"form",items:{xtype:"colorfield",ref:"../../bgcolor",msgTarget:"qtip",fieldLabel:"Background color",submitValue:false}},{xtype:"checkbox",ref:"../onlycolor",boxLabel:"only color",style:"margin-left: 10px;",listeners:{scope:this,check:function(c,d){d?this.wallpaper.disable():this.wallpaper.enable()}}}]},{xtype:"container",layout:"column",items:[{layout:"form",items:{xtype:"fileuploadfield",fieldLabel:"Upload image",emptyText:"Select an image",allowBlank:false,msgTarget:"qtip",width:400,name:"wallpaper"}},{xtype:"button",text:"Upload",style:"margin-left: 10px;",scope:this,handler:this.uploadWallpaper}]}]})},selectWallpaper:function(a){this.wallpaper.select(a)},fetchBackgroundData:function(a){if(!Ext.isFunction(a)){return}this.wallpaper.el.mask("loading...","x-mask-loading");afStudio.xhr.executeAction({url:afStudioWSUrls.project,params:{cmd:"getWallpapers"},scope:this,showNoteOnSuccess:false,run:function(b){Ext.util.Functions.createDelegate(a,this,[b],false)();this.wallpaper.el.unmask()},error:function(){this.wallpaper.el.unmask()}})},refreshWallpapers:function(a){this.fetchBackgroundData(function(b){var c=b.data;this.wallpaper.store.loadData(c.list);this.selectWallpaper(c.active_image);if(Ext.isFunction(a)){Ext.util.Functions.createDelegate(a,this,[c],false)()}})},uploadWallpaper:function(){var a=this.bgtools.getForm();if(!a.isValid()){return}a.submit({url:afStudioWSUrls.project,params:{cmd:"uploadWallpaper"},scope:this,waitMsg:"Uploading...",submitEmptyText:false,success:function(d,e){var c=e.result;if(c.success){var b=this.bgtools.findByType("fileuploadfield",true);this.refreshWallpapers(function(){this.selectWallpaper(c.data.path)})}},failure:function(b,c){if(c.failureType===Ext.form.Action.CONNECT_FAILURE){afStudio.Msg.error("File Upload",String.format("Status: {0}: {1}",c.response.status,c.response.statusText))}if(c.failureType===Ext.form.Action.SERVER_INVALID){var f;try{f=Ext.decode(c.response.responseText).message;afStudio.Msg.warning("File Upload",f)}catch(d){f=c.response.responseText;afStudio.Msg.error("File Upload",f)}}}})},validate:function(){var d=this.wallpaper.getSelectionCount(),b=this.bgtools.bgcolor.getValue(),a=this.bgtools.onlycolor.getValue();if(a&&Ext.isEmpty(b)){afStudio.Msg.warning("Background Editor","Background color must be selected");return false}if(d==0&&Ext.isEmpty(b)){afStudio.Msg.warning("Background Editor","Background image or color must be selected");return false}return true},save:function(){if(this.validate()==false){return}var c=this.wallpaper.getSelectedRecords(),b=this.bgtools.bgcolor.getValue(),a=this.bgtools.onlycolor.getValue(),d={cmd:"setWallpaper"};d.path=!Ext.isEmpty(c)&&!a?c[0].get("image"):"none";if(!Ext.isEmpty(b)){d.color=b}afStudio.xhr.executeAction({url:afStudioWSUrls.project,params:d,mask:{ctn:this,msg:"saving..."}})}});afStudio.theme.BackgroundEditor=afStudio.theme.desktop.BackgroundEditor;afStudio.UserWindow=Ext.extend(Ext.Window,{form:null,mode:"add",formData:null,isRoleFieldAvailable:true,captchaSrc:"/afsUserManager/captcha?width=415&height=50",initComponent:function(){this.initForm();var b=("edit"==this.mode)?"You can edit an existing user from this widget":"You can add a new user from this widget";var a={width:463,title:b,autoHeight:true,closable:true,draggable:true,plain:true,modal:true,resizable:false,bodyBorder:false,border:false,items:this.form,buttons:[{text:"Save user data",handler:this.saveForm,scope:this},{text:"Cancel",handler:this.closeForm,scope:this}],buttonAlign:"center"};Ext.apply(this,Ext.apply(this.initialConfig,a));afStudio.UserWindow.superclass.initComponent.apply(this,arguments);this._initEvents()},initForm:function(){var a=[{name:"first_name",fieldLabel:"First Name"},{name:"last_name",fieldLabel:"Last Name"},{name:"username",fieldLabel:"Username",readOnly:("edit"==this.mode)?true:false,vtype:"username"},{name:"email",fieldLabel:"Email",vtype:"email"},{name:"password",inputType:"password",fieldLabel:"Password",allowBlank:("edit"==this.mode)?true:false},{xtype:"combo",mode:"local",triggerAction:"all",hidden:(this.isRoleFieldAvailable&&afStudioUser.is_admin)?false:true,disabled:(this.isRoleFieldAvailable&&afStudioUser.is_admin)?false:true,fieldLabel:"User Role",emptyText:"Please select user role...",store:[["admin","Administrator"],["user","Studio User"]],hiddenName:"role",name:"role"}];if(false==this.isRoleFieldAvailable){a[a.length]={fieldLabel:"Verification",helpText:"<i>Type the code you see below</i>",name:"captcha",emptyText:"Please enter text from the verification image..."};a[a.length]={xtype:"label",html:['<img style="cursor: pointer;" ext:qtip="Please click on the picture if you can\'t see the symbols" id="verificationimage" src="',this.captchaSrc,'">'].join("")}}this.form=new Ext.FormPanel({url:"",defaultType:"textfield",width:450,labelWidth:70,frame:true,title:false,defaults:{allowBlank:false,anchor:"95%",plugins:[Ext.ux.plugins.HelpText],helpType:"comment"},items:a})},closeForm:function(){this.close()},saveForm:function(){var a=this.form;var b=a.getForm();if(b.isValid()){var c=b.getValues();a.ownerCt.getEl().mask("Please wait...","x-mask-loading");Ext.Ajax.request({url:("edit"==this.mode)?afStudioWSUrls.userUpdateUrl:afStudioWSUrls.userCreateUrl,params:{username:c["username"],user:Ext.encode(c)},success:function(e,f){a.ownerCt.getEl().unmask();e=Ext.decode(e.responseText);if(e.console){afStudio.updateConsole(e.console)}if(!e.success){if(Ext.isArray(e.message)){for(var g=0,d=e.message.length;g<d;g++){var j=e.message[g];this.form.find("name",j.fieldname)[0].markInvalid(j.message)}}if(false==this.isRoleFieldAvailable){this.refreshCaptcha()}}else{afStudio.Msg.info("System Message",e.message);this.closeForm();if(Ext.isFunction(this.onFormClose)){this.onFormClose()}}},failure:function(e,f){if(Ext.isFunction(action.error)){Ext.util.Functions.createDelegate(action.error,this,[xhr,opt],false)()}var g=String.format("Status code: {0} <br /> Message: {1}",xhr.status,xhr.statusText||"none"),d="Server communication failure";afStudio.Msg.error(d,g)},scope:this})}},refreshCaptcha:function(){var a=(new Date()).format("U");var b=Ext.get("verificationimage");b.dom.src=[this.captchaSrc,"&",a].join("")},onWindowShow:function(a){if("edit"==this.mode){a.getEl().mask("Please wait...","x-mask-loading");Ext.Ajax.request({url:afStudioWSUrls.userGetUrl,params:{username:this.username},success:function(b,c){a.getEl().unmask();b=Ext.decode(b.responseText);this.setUserData(b.data)},failure:function(b,c){},scope:this})}if(Ext.get("verificationimage")){Ext.get("verificationimage").on("click",this.refreshCaptcha,this)}},setUserData:function(a){if(a){this.form.getForm().setValues({first_name:a.first_name,last_name:a.last_name,username:a.username,email:a.email,role:a.role})}},_initEvents:function(){this.on({"show":this.onWindowShow,scope:this})},cancel:function(){this.close()}});afStudio.UsersList=Ext.extend(Ext.Window,{initComponent:function(){this.createUserGrid();var a={tbar:[{text:"Create user",iconCls:"icon-add",handler:this.showDialog,scope:this}],title:"Users Management",width:813,layout:"fit",height:550,closable:true,draggable:true,modal:true,resizable:false,bodyBorder:false,border:false,items:[this.usersGrid],buttonAlign:"center"};Ext.apply(this,Ext.apply(this.initialConfig,a));afStudio.UsersList.superclass.initComponent.apply(this,arguments);this._initEvents()},onUserDelete:function(d,b){var a=Ext.getCmp("manage-users-grid");var f=b.getAttribute("username");if(f){var c=function(e){if("yes"==e){Ext.Ajax.request({url:afStudioWSUrls.userDeleteUrl,params:{username:f},callback:function(i,j,g){g=Ext.decode(g.responseText);if(!g.success){Ext.Msg.alert("Failure","Server-side failure with status code: "+g.status)}else{Ext.Msg.alert("System Message","User was successfully deleted");a.getStore().load()}}})}};Ext.Msg.confirm("Delete user","Are you sure want delete selected user?",c)}},onUserEdit:function(c,a){var d=a.getAttribute("username");var b=function(){Ext.getCmp("manage-users-grid").getStore().load()};(new afStudio.UserWindow({mode:"edit",username:d,onFormClose:b})).show()},refreshGrid:function(){Ext.getCmp("manage-users-grid").getStore().load()},showDialog:function(b,a){(new afStudio.UserWindow({mode:"add",onFormClose:this.refreshGrid})).show()},createUserGrid:function(){var c=Ext.data.Record.create([{name:"id",type:"int"},{name:"first_name"},{name:"last_name"},{name:"email"},{name:"password"},{name:"role"},{name:"username"}]);var d=new Ext.data.Store({proxy:new Ext.data.HttpProxy({url:afStudioWSUrls.userListUrl}),reader:new Ext.data.JsonReader({root:"data",totalProperty:"total",id:"id",fields:c}),remoteSort:true,listeners:{"load":function(){Ext.addBehaviors({"IMG.deleteUserEmptyCls@click":this.onUserDelete,"IMG.editUserEmptyCls@click":this.onUserEdit})},scope:this}});var b=function(e,g,f){return'<img class="deleteUserEmptyCls" username="'+e+'" ext:qtip="Delete User" style="cursor: pointer;" src="/appFlowerStudioPlugin/images/delete.png">'+'<img class="editUserEmptyCls" username="'+e+'" ext:qtip="Edit User" style="cursor: pointer;margin-left: 5px" src="/appFlowerStudioPlugin/images/pencil.png">'};var a=new Ext.grid.ColumnModel([new Ext.grid.RowNumberer(),{header:"First Name",sortable:false,dataIndex:"first_name"},{header:"Last Name",sortable:false,dataIndex:"last_name"},{header:"Username",sortable:false,dataIndex:"username"},{header:"Email",sortable:false,dataIndex:"email"},{header:"Role",sortable:false,fixed:true,width:75,dataIndex:"role"},{header:"Actions",sortable:false,fixed:true,width:75,dataIndex:"username",renderer:b}]);this.usersGrid=new Ext.grid.GridPanel({id:"manage-users-grid",store:d,showDialog:this.showDialog,viewConfig:{scrollOffset:19,forceFit:true},cm:a,loadMask:true,border:true,autoScroll:true})},onWindowShow:function(){this.usersGrid.getStore().load()},_initEvents:function(){this.on({"show":this.onWindowShow,scope:this})},cancel:function(){this.close()}});
/*
 * jQuery JavaScript Library v1.4.4
 * http://jquery.com/
 *
 * Copyright 2010, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2010, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Date: Thu Nov 11 19:04:53 2010 -0500
 */
(function(ax,aB){function j(t,c,E){if(E===aB&&t.nodeType===1){E=t.getAttribute("data-"+c);if(typeof E==="string"){try{E=E==="true"?true:E==="false"?false:E==="null"?null:!R.isNaN(E)?parseFloat(E):ac.test(E)?R.parseJSON(E):E}catch(B){}R.data(t,c,E)}else{E=aB}}return E}function am(){return false}function J(){return true}function aZ(t,c,B){B[0].type=t;return R.event.handle.apply(c,B)}function A(a4){var Z,Y,X,W,V,P,U,E,ab,c,B,t=[];W=[];V=R.data(this,this.nodeType?"events":"__events__");if(typeof V==="function"){V=V.events}if(!(a4.liveFired===this||!V||!V.live||a4.button&&a4.type==="click")){if(a4.namespace){B=RegExp("(^|\\.)"+a4.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)")}a4.liveFired=this;var aa=V.live.slice(0);for(U=0;U<aa.length;U++){V=aa[U];V.origType.replace(aj,"")===a4.type?W.push(V.selector):aa.splice(U--,1)}W=R(a4.target).closest(W,a4.currentTarget);E=0;for(ab=W.length;E<ab;E++){c=W[E];for(U=0;U<aa.length;U++){V=aa[U];if(c.selector===V.selector&&(!B||B.test(V.namespace))){P=c.elem;X=null;if(V.preType==="mouseenter"||V.preType==="mouseleave"){a4.type=V.preType;X=R(a4.relatedTarget).closest(V.selector)[0]}if(!X||X!==P){t.push({elem:P,handleObj:V,level:c.level})}}}}E=0;for(ab=t.length;E<ab;E++){W=t[E];if(Y&&W.level>Y){break}a4.currentTarget=W.elem;a4.data=W.handleObj.data;a4.handleObj=W.handleObj;B=W.handleObj.origHandler.apply(W.elem,arguments);if(B===false||a4.isPropagationStopped()){Y=W.level;if(B===false){Z=false}if(a4.isImmediatePropagationStopped()){break}}}return Z}}function ai(t,c){return(t&&t!=="*"?t+".":"")+c.replace(n,"`").replace(a3,"&")}function aM(t,c,E){if(R.isFunction(c)){return R.grep(t,function(U,P){return !!c.call(U,P,U)===E})}else{if(c.nodeType){return R.grep(t,function(P){return P===c===E})}else{if(typeof c==="string"){var B=R.grep(t,function(P){return P.nodeType===1});if(aR.test(c)){return R.filter(c,B,!E)}else{c=R.filter(c,B)}}}}return R.grep(t,function(P){return R.inArray(P,c)>=0===E})}function ay(t,c){var B=0;c.each(function(){if(this.nodeName===(t[B]&&t[B].nodeName)){var V=R.data(t[B++]),U=R.data(this,V);if(V=V&&V.events){delete U.handle;U.events={};for(var P in V){for(var E in V[P]){R.event.add(this,P,V[P][E],V[P][E].data)}}}}})}function aE(t,c){c.src?R.ajax({url:c.src,async:false,dataType:"script"}):R.globalEval(c.text||c.textContent||c.innerHTML||"");c.parentNode&&c.parentNode.removeChild(c)}function Q(t,c,E){var B=c==="width"?t.offsetWidth:t.offsetHeight;if(E==="border"){return B}R.each(c==="width"?af:F,function(){E||(B-=parseFloat(R.css(t,"padding"+this))||0);if(E==="margin"){B+=parseFloat(R.css(t,"margin"+this))||0}else{B-=parseFloat(R.css(t,"border"+this+"Width"))||0}});return B}function u(t,c,E,B){if(R.isArray(c)&&c.length){R.each(c,function(U,P){E||q.test(t)?B(t,P):u(t+"["+(typeof P==="object"||R.isArray(P)?U:"")+"]",P,E,B)})}else{if(!E&&c!=null&&typeof c==="object"){R.isEmptyObject(c)?B(t,""):R.each(c,function(U,P){u(t+"["+U+"]",P,E,B)})}else{B(t,c)}}}function ao(t,c){var B={};R.each(z.concat.apply([],z.slice(0,c)),function(){B[this]=t});return B}function m(t){if(!g[t]){var c=R("<"+t+">").appendTo("body"),B=c.css("display");c.remove();if(B==="none"||B===""){B="block"}g[t]=B}return g[t]}function aW(c){return R.isWindow(c)?c:c.nodeType===9?c.defaultView||c.parentWindow:false}var H=ax.document,R=function(){function bl(){if(!bk.isReady){try{H.documentElement.doScroll("left")}catch(bm){setTimeout(bl,1);return}bk.ready()}}var bk=function(bm,bn){return new bk.fn.init(bm,bn)},bj=ax.jQuery,bi=ax.$,bh,bf=/^(?:[^<]*(<[\w\W]+>)[^>]*$|#([\w\-]+)$)/,bc=/\S/,bd=/^\s+/,a9=/\s+$/,X=/\W/,a5=/\d/,a8=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,a4=/^[\],:{}\s]*$/,V=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,Y=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,W=/(?:^|:|,)(?:\s*\[)+/g,P=/(webkit)[ \/]([\w.]+)/,bg=/(opera)(?:.*version)?[ \/]([\w.]+)/,be=/(msie) ([\w.]+)/,ba=/(mozilla)(?:.*? rv:([\w.]+))?/,bb=navigator.userAgent,a7=false,a6=[],aa,U=Object.prototype.toString,Z=Object.prototype.hasOwnProperty,E=Array.prototype.push,B=Array.prototype.slice,t=String.prototype.trim,ab=Array.prototype.indexOf,c={};bk.fn=bk.prototype={init:function(bn,bp){var bm,bq,bo;if(!bn){return this}if(bn.nodeType){this.context=this[0]=bn;this.length=1;return this}if(bn==="body"&&!bp&&H.body){this.context=H;this[0]=H.body;this.selector="body";this.length=1;return this}if(typeof bn==="string"){if((bm=bf.exec(bn))&&(bm[1]||!bp)){if(bm[1]){bo=bp?bp.ownerDocument||bp:H;if(bq=a8.exec(bn)){if(bk.isPlainObject(bp)){bn=[H.createElement(bq[1])];bk.fn.attr.call(bn,bp,true)}else{bn=[bo.createElement(bq[1])]}}else{bq=bk.buildFragment([bm[1]],[bo]);bn=(bq.cacheable?bq.fragment.cloneNode(true):bq.fragment).childNodes}return bk.merge(this,bn)}else{if((bq=H.getElementById(bm[2]))&&bq.parentNode){if(bq.id!==bm[2]){return bh.find(bn)}this.length=1;this[0]=bq}this.context=H;this.selector=bn;return this}}else{if(!bp&&!X.test(bn)){this.selector=bn;this.context=H;bn=H.getElementsByTagName(bn);return bk.merge(this,bn)}else{return !bp||bp.jquery?(bp||bh).find(bn):bk(bp).find(bn)}}}else{if(bk.isFunction(bn)){return bh.ready(bn)}}if(bn.selector!==aB){this.selector=bn.selector;this.context=bn.context}return bk.makeArray(bn,this)},selector:"",jquery:"1.4.4",length:0,size:function(){return this.length},toArray:function(){return B.call(this,0)},get:function(bm){return bm==null?this.toArray():bm<0?this.slice(bm)[0]:this[bm]},pushStack:function(bn,bo,bm){var bp=bk();bk.isArray(bn)?E.apply(bp,bn):bk.merge(bp,bn);bp.prevObject=this;bp.context=this.context;if(bo==="find"){bp.selector=this.selector+(this.selector?" ":"")+bm}else{if(bo){bp.selector=this.selector+"."+bo+"("+bm+")"}}return bp},each:function(bm,bn){return bk.each(this,bm,bn)},ready:function(bm){bk.bindReady();if(bk.isReady){bm.call(H,bk)}else{a6&&a6.push(bm)}return this},eq:function(bm){return bm===-1?this.slice(bm):this.slice(bm,+bm+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(B.apply(this,arguments),"slice",B.call(arguments).join(","))},map:function(bm){return this.pushStack(bk.map(this,function(bo,bn){return bm.call(bo,bn,bo)}))},end:function(){return this.prevObject||bk(null)},push:E,sort:[].sort,splice:[].splice};bk.fn.init.prototype=bk.fn;bk.extend=bk.fn.extend=function(){var bm,bu,br,bo,bq,bs=arguments[0]||{},bp=1,bn=arguments.length,bt=false;if(typeof bs==="boolean"){bt=bs;bs=arguments[1]||{};bp=2}if(typeof bs!=="object"&&!bk.isFunction(bs)){bs={}}if(bn===bp){bs=this;--bp}for(;bp<bn;bp++){if((bm=arguments[bp])!=null){for(bu in bm){br=bs[bu];bo=bm[bu];if(bs!==bo){if(bt&&bo&&(bk.isPlainObject(bo)||(bq=bk.isArray(bo)))){if(bq){bq=false;br=br&&bk.isArray(br)?br:[]}else{br=br&&bk.isPlainObject(br)?br:{}}bs[bu]=bk.extend(bt,br,bo)}else{if(bo!==aB){bs[bu]=bo}}}}}}return bs};bk.extend({noConflict:function(bm){ax.$=bi;if(bm){ax.jQuery=bj}return bk},isReady:false,readyWait:1,ready:function(bn){bn===true&&bk.readyWait--;if(!bk.readyWait||bn!==true&&!bk.isReady){if(!H.body){return setTimeout(bk.ready,1)}bk.isReady=true;if(!(bn!==true&&--bk.readyWait>0)){if(a6){var bo=0,bm=a6;for(a6=null;bn=bm[bo++];){bn.call(H,bk)}bk.fn.trigger&&bk(H).trigger("ready").unbind("ready")}}}},bindReady:function(){if(!a7){a7=true;if(H.readyState==="complete"){return setTimeout(bk.ready,1)}if(H.addEventListener){H.addEventListener("DOMContentLoaded",aa,false);ax.addEventListener("load",bk.ready,false)}else{if(H.attachEvent){H.attachEvent("onreadystatechange",aa);ax.attachEvent("onload",bk.ready);var bm=false;try{bm=ax.frameElement==null}catch(bn){}H.documentElement.doScroll&&bm&&bl()}}}},isFunction:function(bm){return bk.type(bm)==="function"},isArray:Array.isArray||function(bm){return bk.type(bm)==="array"},isWindow:function(bm){return bm&&typeof bm==="object"&&"setInterval" in bm},isNaN:function(bm){return bm==null||!a5.test(bm)||isNaN(bm)},type:function(bm){return bm==null?String(bm):c[U.call(bm)]||"object"},isPlainObject:function(bm){if(!bm||bk.type(bm)!=="object"||bm.nodeType||bk.isWindow(bm)){return false}if(bm.constructor&&!Z.call(bm,"constructor")&&!Z.call(bm.constructor.prototype,"isPrototypeOf")){return false}for(var bn in bm){}return bn===aB||Z.call(bm,bn)},isEmptyObject:function(bm){for(var bn in bm){return false}return true},error:function(bm){throw bm},parseJSON:function(bm){if(typeof bm!=="string"||!bm){return null}bm=bk.trim(bm);if(a4.test(bm.replace(V,"@").replace(Y,"]").replace(W,""))){return ax.JSON&&ax.JSON.parse?ax.JSON.parse(bm):(new Function("return "+bm))()}else{bk.error("Invalid JSON: "+bm)}},noop:function(){},globalEval:function(bn){if(bn&&bc.test(bn)){var bo=H.getElementsByTagName("head")[0]||H.documentElement,bm=H.createElement("script");bm.type="text/javascript";if(bk.support.scriptEval){bm.appendChild(H.createTextNode(bn))}else{bm.text=bn}bo.insertBefore(bm,bo.firstChild);bo.removeChild(bm)}},nodeName:function(bm,bn){return bm.nodeName&&bm.nodeName.toUpperCase()===bn.toUpperCase()},each:function(bo,br,bn){var bs,bp=0,bq=bo.length,bm=bq===aB||bk.isFunction(bo);if(bn){if(bm){for(bs in bo){if(br.apply(bo[bs],bn)===false){break}}}else{for(;bp<bq;){if(br.apply(bo[bp++],bn)===false){break}}}}else{if(bm){for(bs in bo){if(br.call(bo[bs],bs,bo[bs])===false){break}}}else{for(bn=bo[0];bp<bq&&br.call(bn,bp,bn)!==false;bn=bo[++bp]){}}}return bo},trim:t?function(bm){return bm==null?"":t.call(bm)}:function(bm){return bm==null?"":bm.toString().replace(bd,"").replace(a9,"")},makeArray:function(bn,bo){var bm=bo||[];if(bn!=null){var bp=bk.type(bn);bn.length==null||bp==="string"||bp==="function"||bp==="regexp"||bk.isWindow(bn)?E.call(bm,bn):bk.merge(bm,bn)}return bm},inArray:function(bn,bo){if(bo.indexOf){return bo.indexOf(bn)}for(var bm=0,bp=bo.length;bm<bp;bm++){if(bo[bm]===bn){return bm}}return -1},merge:function(bn,bp){var bm=bn.length,bq=0;if(typeof bp.length==="number"){for(var bo=bp.length;bq<bo;bq++){bn[bm++]=bp[bq]}}else{for(;bp[bq]!==aB;){bn[bm++]=bp[bq++]}}bn.length=bm;return bn},grep:function(bo,br,bn){var bs=[],bp;bn=!!bn;for(var bq=0,bm=bo.length;bq<bm;bq++){bp=!!br(bo[bq],bq);bn!==bp&&bs.push(bo[bq])}return bs},map:function(bo,br,bn){for(var bs=[],bp,bq=0,bm=bo.length;bq<bm;bq++){bp=br(bo[bq],bq,bn);if(bp!=null){bs[bs.length]=bp}}return bs.concat.apply([],bs)},guid:1,proxy:function(bn,bo,bm){if(arguments.length===2){if(typeof bo==="string"){bm=bn;bn=bm[bo];bo=aB}else{if(bo&&!bk.isFunction(bo)){bm=bo;bo=aB}}}if(!bo&&bn){bo=function(){return bn.apply(bm||this,arguments)}}if(bn){bo.guid=bn.guid=bn.guid||bo.guid||bk.guid++}return bo},access:function(bo,br,bn,bt,bp,bq){var bm=bo.length;if(typeof br==="object"){for(var bs in br){bk.access(bo,bs,br[bs],bt,bp,bn)}return bo}if(bn!==aB){bt=!bq&&bt&&bk.isFunction(bn);for(bs=0;bs<bm;bs++){bp(bo[bs],br,bt?bn.call(bo[bs],bs,bp(bo[bs],br)):bn,bq)}return bo}return bm?bp(bo[0],br):aB},now:function(){return(new Date).getTime()},uaMatch:function(bm){bm=bm.toLowerCase();bm=P.exec(bm)||bg.exec(bm)||be.exec(bm)||bm.indexOf("compatible")<0&&ba.exec(bm)||[];return{browser:bm[1]||"",version:bm[2]||"0"}},browser:{}});bk.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(bm,bn){c["[object "+bn+"]"]=bn.toLowerCase()});bb=bk.uaMatch(bb);if(bb.browser){bk.browser[bb.browser]=true;bk.browser.version=bb.version}if(bk.browser.webkit){bk.browser.safari=true}if(ab){bk.inArray=function(bm,bn){return ab.call(bn,bm)}}if(!/\s/.test("\u00a0")){bd=/^[\s\xA0]+/;a9=/[\s\xA0]+$/}bh=bk(H);if(H.addEventListener){aa=function(){H.removeEventListener("DOMContentLoaded",aa,false);bk.ready()}}else{if(H.attachEvent){aa=function(){if(H.readyState==="complete"){H.detachEvent("onreadystatechange",aa);bk.ready()}}}}return ax.jQuery=ax.$=bk}();(function(){R.support={};var Z=H.documentElement,X=H.createElement("script"),W=H.createElement("div"),V="script"+R.now();W.style.display="none";W.innerHTML="   <link/><table></table><a href='/a' style='color:red;float:left;opacity:.55;'>a</a><input type='checkbox'/>";var U=W.getElementsByTagName("*"),P=W.getElementsByTagName("a")[0],B=H.createElement("select"),E=B.appendChild(H.createElement("option"));if(!(!U||!U.length||!P)){R.support={leadingWhitespace:W.firstChild.nodeType===3,tbody:!W.getElementsByTagName("tbody").length,htmlSerialize:!!W.getElementsByTagName("link").length,style:/red/.test(P.getAttribute("style")),hrefNormalized:P.getAttribute("href")==="/a",opacity:/^0.55$/.test(P.style.opacity),cssFloat:!!P.style.cssFloat,checkOn:W.getElementsByTagName("input")[0].value==="on",optSelected:E.selected,deleteExpando:true,optDisabled:false,checkClone:false,scriptEval:false,noCloneEvent:true,boxModel:null,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableHiddenOffsets:true};B.disabled=true;R.support.optDisabled=!E.disabled;X.type="text/javascript";try{X.appendChild(H.createTextNode("window."+V+"=1;"))}catch(t){}Z.insertBefore(X,Z.firstChild);if(ax[V]){R.support.scriptEval=true;delete ax[V]}try{delete X.test}catch(Y){R.support.deleteExpando=false}Z.removeChild(X);if(W.attachEvent&&W.fireEvent){W.attachEvent("onclick",function c(){R.support.noCloneEvent=false;W.detachEvent("onclick",c)});W.cloneNode(true).fireEvent("onclick")}W=H.createElement("div");W.innerHTML="<input type='radio' name='radiotest' checked='checked'/>";Z=H.createDocumentFragment();Z.appendChild(W.firstChild);R.support.checkClone=Z.cloneNode(true).cloneNode(true).lastChild.checked;R(function(){var ab=H.createElement("div");ab.style.width=ab.style.paddingLeft="1px";H.body.appendChild(ab);R.boxModel=R.support.boxModel=ab.offsetWidth===2;if("zoom" in ab.style){ab.style.display="inline";ab.style.zoom=1;R.support.inlineBlockNeedsLayout=ab.offsetWidth===2;ab.style.display="";ab.innerHTML="<div style='width:4px;'></div>";R.support.shrinkWrapBlocks=ab.offsetWidth!==2}ab.innerHTML="<table><tr><td style='padding:0;display:none'></td><td>t</td></tr></table>";var aa=ab.getElementsByTagName("td");R.support.reliableHiddenOffsets=aa[0].offsetHeight===0;aa[0].style.display="";aa[1].style.display="none";R.support.reliableHiddenOffsets=R.support.reliableHiddenOffsets&&aa[0].offsetHeight===0;ab.innerHTML="";H.body.removeChild(ab).style.display="none"});Z=function(ab){var aa=H.createElement("div");ab="on"+ab;var a4=ab in aa;if(!a4){aa.setAttribute(ab,"return;");a4=typeof aa[ab]==="function"}return a4};R.support.submitBubbles=Z("submit");R.support.changeBubbles=Z("change");Z=X=W=U=P=null}})();var a2={},ac=/^(?:\{.*\}|\[.*\])$/;R.extend({cache:{},uuid:0,expando:"jQuery"+R.now(),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},data:function(t,c,U){if(R.acceptData(t)){t=t==ax?a2:t;var P=t.nodeType,E=P?t[R.expando]:null,B=R.cache;if(!(P&&!E&&typeof c==="string"&&U===aB)){if(P){E||(t[R.expando]=E=++R.uuid)}else{B=t}if(typeof c==="object"){if(P){B[E]=R.extend(B[E],c)}else{R.extend(B,c)}}else{if(P&&!B[E]){B[E]={}}}t=P?B[E]:B;if(U!==aB){t[c]=U}return typeof c==="string"?t[c]:t}}},removeData:function(B,c){if(R.acceptData(B)){B=B==ax?a2:B;var V=B.nodeType,U=V?B[R.expando]:B,P=R.cache,E=V?P[U]:U;if(c){if(E){delete E[c];V&&R.isEmptyObject(E)&&R.removeData(B)}}else{if(V&&R.support.deleteExpando){delete B[R.expando]}else{if(B.removeAttribute){B.removeAttribute(R.expando)}else{if(V){delete P[U]}else{for(var t in B){delete B[t]}}}}}}},acceptData:function(t){if(t.nodeName){var c=R.noData[t.nodeName.toLowerCase()];if(c){return !(c===true||t.getAttribute("classid")!==c)}}return true}});R.fn.extend({data:function(B,c){var W=null;if(typeof B==="undefined"){if(this.length){var V=this[0].attributes,U;W=R.data(this[0]);for(var P=0,t=V.length;P<t;P++){U=V[P].name;if(U.indexOf("data-")===0){U=U.substr(5);j(this[0],U,W[U])}}}return W}else{if(typeof B==="object"){return this.each(function(){R.data(this,B)})}}var E=B.split(".");E[1]=E[1]?"."+E[1]:"";if(c===aB){W=this.triggerHandler("getData"+E[1]+"!",[E[0]]);if(W===aB&&this.length){W=R.data(this[0],B);W=j(this[0],B,W)}return W===aB&&E[1]?this.data(E[0]):W}else{return this.each(function(){var Y=R(this),X=[E[0],c];Y.triggerHandler("setData"+E[1]+"!",X);R.data(this,B,c);Y.triggerHandler("changeData"+E[1]+"!",X)})}},removeData:function(c){return this.each(function(){R.removeData(this,c)})}});R.extend({queue:function(t,c,E){if(t){c=(c||"fx")+"queue";var B=R.data(t,c);if(!E){return B||[]}if(!B||R.isArray(E)){B=R.data(t,c,R.makeArray(E))}else{B.push(E)}return B}},dequeue:function(t,c){c=c||"fx";var E=R.queue(t,c),B=E.shift();if(B==="inprogress"){B=E.shift()}if(B){c==="fx"&&E.unshift("inprogress");B.call(t,function(){R.dequeue(t,c)})}}});R.fn.extend({queue:function(t,c){if(typeof t!=="string"){c=t;t="fx"}if(c===aB){return R.queue(this[0],t)}return this.each(function(){var B=R.queue(this,t,c);t==="fx"&&B[0]!=="inprogress"&&R.dequeue(this,t)})},dequeue:function(c){return this.each(function(){R.dequeue(this,c)})},delay:function(t,c){t=R.fx?R.fx.speeds[t]||t:t;c=c||"fx";return this.queue(c,function(){var B=this;setTimeout(function(){R.dequeue(B,c)},t)})},clearQueue:function(c){return this.queue(c||"fx",[])}});var aQ=/[\n\t]/g,au=/\s+/,d=/\r/g,aT=/^(?:href|src|style)$/,aG=/^(?:button|input)$/i,ah=/^(?:button|input|object|select|textarea)$/i,G=/^a(?:rea)?$/i,aD=/^(?:radio|checkbox)$/i;R.props={"for":"htmlFor","class":"className",readonly:"readOnly",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",colspan:"colSpan",tabindex:"tabIndex",usemap:"useMap",frameborder:"frameBorder"};R.fn.extend({attr:function(t,c){return R.access(this,t,c,true,R.attr)},removeAttr:function(c){return this.each(function(){R.attr(this,c,"");this.nodeType===1&&this.removeAttribute(c)})},addClass:function(X){if(R.isFunction(X)){return this.each(function(Y){var Z=R(this);Z.addClass(X.call(this,Y,Z.attr("class")))})}if(X&&typeof X==="string"){for(var W=(X||"").split(au),V=0,U=this.length;V<U;V++){var P=this[V];if(P.nodeType===1){if(P.className){for(var E=" "+P.className+" ",t=P.className,B=0,c=W.length;B<c;B++){if(E.indexOf(" "+W[B]+" ")<0){t+=" "+W[B]}}P.className=R.trim(t)}else{P.className=X}}}}return this},removeClass:function(B){if(R.isFunction(B)){return this.each(function(Y){var X=R(this);X.removeClass(B.call(this,Y,X.attr("class")))})}if(B&&typeof B==="string"||B===aB){for(var c=(B||"").split(au),W=0,V=this.length;W<V;W++){var U=this[W];if(U.nodeType===1&&U.className){if(B){for(var P=(" "+U.className+" ").replace(aQ," "),t=0,E=c.length;t<E;t++){P=P.replace(" "+c[t]+" "," ")}U.className=R.trim(P)}else{U.className=""}}}}return this},toggleClass:function(t,c){var E=typeof t,B=typeof c==="boolean";if(R.isFunction(t)){return this.each(function(U){var P=R(this);P.toggleClass(t.call(this,U,P.attr("class"),c),c)})}return this.each(function(){if(E==="string"){for(var W,V=0,P=R(this),U=c,X=t.split(au);W=X[V++];){U=B?U:!P.hasClass(W);P[U?"addClass":"removeClass"](W)}}else{if(E==="undefined"||E==="boolean"){this.className&&R.data(this,"__className__",this.className);this.className=this.className||t===false?"":R.data(this,"__className__")||""}}})},hasClass:function(t){t=" "+t+" ";for(var c=0,B=this.length;c<B;c++){if((" "+this[c].className+" ").replace(aQ," ").indexOf(t)>-1){return true}}return false},val:function(B){if(!arguments.length){var c=this[0];if(c){if(R.nodeName(c,"option")){var W=c.attributes.value;return !W||W.specified?c.value:c.text}if(R.nodeName(c,"select")){var V=c.selectedIndex;W=[];var U=c.options;c=c.type==="select-one";if(V<0){return null}var P=c?V:0;for(V=c?V+1:U.length;P<V;P++){var t=U[P];if(t.selected&&(R.support.optDisabled?!t.disabled:t.getAttribute("disabled")===null)&&(!t.parentNode.disabled||!R.nodeName(t.parentNode,"optgroup"))){B=R(t).val();if(c){return B}W.push(B)}}return W}if(aD.test(c.type)&&!R.support.checkOn){return c.getAttribute("value")===null?"on":c.value}return(c.value||"").replace(d,"")}return aB}var E=R.isFunction(B);return this.each(function(aa){var Y=R(this),Z=B;if(this.nodeType===1){if(E){Z=B.call(this,aa,Y.val())}if(Z==null){Z=""}else{if(typeof Z==="number"){Z+=""}else{if(R.isArray(Z)){Z=R.map(Z,function(ab){return ab==null?"":ab+""})}}}if(R.isArray(Z)&&aD.test(this.type)){this.checked=R.inArray(Y.val(),Z)>=0}else{if(R.nodeName(this,"select")){var X=R.makeArray(Z);R("option",this).each(function(){this.selected=R.inArray(R(this).val(),X)>=0});if(!X.length){this.selectedIndex=-1}}else{this.value=Z}}}})}});R.extend({attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attr:function(t,c,U,P){if(!t||t.nodeType===3||t.nodeType===8){return aB}if(P&&c in R.attrFn){return R(t)[c](U)}P=t.nodeType!==1||!R.isXMLDoc(t);var E=U!==aB;c=P&&R.props[c]||c;var B=aT.test(c);if((c in t||t[c]!==aB)&&P&&!B){if(E){c==="type"&&aG.test(t.nodeName)&&t.parentNode&&R.error("type property can't be changed");if(U===null){t.nodeType===1&&t.removeAttribute(c)}else{t[c]=U}}if(R.nodeName(t,"form")&&t.getAttributeNode(c)){return t.getAttributeNode(c).nodeValue}if(c==="tabIndex"){return(c=t.getAttributeNode("tabIndex"))&&c.specified?c.value:ah.test(t.nodeName)||G.test(t.nodeName)&&t.href?0:aB}return t[c]}if(!R.support.style&&P&&c==="style"){if(E){t.style.cssText=""+U}return t.style.cssText}E&&t.setAttribute(c,""+U);if(!t.attributes[c]&&t.hasAttribute&&!t.hasAttribute(c)){return aB}t=!R.support.hrefNormalized&&P&&B?t.getAttribute(c,2):t.getAttribute(c);return t===null?aB:t}});var aj=/\.(.*)$/,L=/^(?:textarea|input|select)$/i,n=/\./g,a3=/ /g,r=/[^\w\s.|`]/g,e=function(c){return c.replace(r,"\\$&")},ae={focusin:0,focusout:0};R.event={add:function(ab,Z,Y,X){if(!(ab.nodeType===3||ab.nodeType===8)){if(R.isWindow(ab)&&ab!==ax&&!ab.frameElement){ab=ax}if(Y===false){Y=am}else{if(!Y){return}}var W,V;if(Y.handler){W=Y;Y=W.handler}if(!Y.guid){Y.guid=R.guid++}if(V=R.data(ab)){var P=ab.nodeType?"events":"__events__",U=V[P],E=V.handle;if(typeof U==="function"){E=U.handle;U=U.events}else{if(!U){ab.nodeType||(V[P]=V=function(){});V.events=U={}}}if(!E){V.handle=E=function(){return typeof R!=="undefined"&&!R.event.triggered?R.event.handle.apply(E.elem,arguments):aB}}E.elem=ab;Z=Z.split(" ");for(var aa=0,c;P=Z[aa++];){V=W?R.extend({},W):{handler:Y,data:X};if(P.indexOf(".")>-1){c=P.split(".");P=c.shift();V.namespace=c.slice(0).sort().join(".")}else{c=[];V.namespace=""}V.type=P;if(!V.guid){V.guid=Y.guid}var B=U[P],t=R.event.special[P]||{};if(!B){B=U[P]=[];if(!t.setup||t.setup.call(ab,X,c,E)===false){if(ab.addEventListener){ab.addEventListener(P,E,false)}else{ab.attachEvent&&ab.attachEvent("on"+P,E)}}}if(t.add){t.add.call(ab,V);if(!V.handler.guid){V.handler.guid=Y.guid}}B.push(V);R.event.global[P]=true}ab=null}}},global:{},remove:function(a4,Z,Y,X){if(!(a4.nodeType===3||a4.nodeType===8)){if(Y===false){Y=am}var W,V,P=0,U,E,ab,c,B,t,aa=a4.nodeType?"events":"__events__",a6=R.data(a4),a5=a6&&a6[aa];if(a6&&a5){if(typeof a5==="function"){a6=a5;a5=a5.events}if(Z&&Z.type){Y=Z.handler;Z=Z.type}if(!Z||typeof Z==="string"&&Z.charAt(0)==="."){Z=Z||"";for(W in a5){R.event.remove(a4,W+Z)}}else{for(Z=Z.split(" ");W=Z[P++];){c=W;U=W.indexOf(".")<0;E=[];if(!U){E=W.split(".");W=E.shift();ab=RegExp("(^|\\.)"+R.map(E.slice(0).sort(),e).join("\\.(?:.*\\.)?")+"(\\.|$)")}if(B=a5[W]){if(Y){c=R.event.special[W]||{};for(V=X||0;V<B.length;V++){t=B[V];if(Y.guid===t.guid){if(U||ab.test(t.namespace)){X==null&&B.splice(V--,1);c.remove&&c.remove.call(a4,t)}if(X!=null){break}}}if(B.length===0||X!=null&&B.length===1){if(!c.teardown||c.teardown.call(a4,E)===false){R.removeEvent(a4,W,a6.handle)}delete a5[W]}}else{for(V=0;V<B.length;V++){t=B[V];if(U||ab.test(t.namespace)){R.event.remove(a4,c,t.handler,V);B.splice(V--,1)}}}}}if(R.isEmptyObject(a5)){if(Z=a6.handle){Z.elem=null}delete a6.events;delete a6.handle;if(typeof a6==="function"){R.removeData(a4,aa)}else{R.isEmptyObject(a6)&&R.removeData(a4)}}}}}},trigger:function(Z,X,W,V){var U=Z.type||Z;if(!V){Z=typeof Z==="object"?Z[R.expando]?Z:R.extend(R.Event(U),Z):R.Event(U);if(U.indexOf("!")>=0){Z.type=U=U.slice(0,-1);Z.exclusive=true}if(!W){Z.stopPropagation();R.event.global[U]&&R.each(R.cache,function(){this.events&&this.events[U]&&R.event.trigger(Z,X,this.handle.elem)})}if(!W||W.nodeType===3||W.nodeType===8){return aB}Z.result=aB;Z.target=W;X=R.makeArray(X);X.unshift(Z)}Z.currentTarget=W;(V=W.nodeType?R.data(W,"handle"):(R.data(W,"__events__")||{}).handle)&&V.apply(W,X);V=W.parentNode||W.ownerDocument;try{if(!(W&&W.nodeName&&R.noData[W.nodeName.toLowerCase()])){if(W["on"+U]&&W["on"+U].apply(W,X)===false){Z.result=false;Z.preventDefault()}}}catch(P){}if(!Z.isPropagationStopped()&&V){R.event.trigger(Z,X,V,true)}else{if(!Z.isDefaultPrevented()){var B;V=Z.target;var E=U.replace(aj,""),t=R.nodeName(V,"a")&&E==="click",Y=R.event.special[E]||{};if((!Y._default||Y._default.call(W,Z)===false)&&!t&&!(V&&V.nodeName&&R.noData[V.nodeName.toLowerCase()])){try{if(V[E]){if(B=V["on"+E]){V["on"+E]=null}R.event.triggered=true;V[E]()}}catch(c){}if(B){V["on"+E]=B}R.event.triggered=false}}}},handle:function(B){var c,W,V,U;W=[];var P=R.makeArray(arguments);B=P[0]=R.event.fix(B||ax.event);B.currentTarget=this;c=B.type.indexOf(".")<0&&!B.exclusive;if(!c){V=B.type.split(".");B.type=V.shift();W=V.slice(0).sort();V=RegExp("(^|\\.)"+W.join("\\.(?:.*\\.)?")+"(\\.|$)")}B.namespace=B.namespace||W.join(".");U=R.data(this,this.nodeType?"events":"__events__");if(typeof U==="function"){U=U.events}W=(U||{})[B.type];if(U&&W){W=W.slice(0);U=0;for(var t=W.length;U<t;U++){var E=W[U];if(c||V.test(E.namespace)){B.handler=E.handler;B.data=E.data;B.handleObj=E;E=E.handler.apply(this,P);if(E!==aB){B.result=E;if(E===false){B.preventDefault();B.stopPropagation()}}if(B.isImmediatePropagationStopped()){break}}}}return B.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(t){if(t[R.expando]){return t}var c=t;t=R.Event(c);for(var E=this.props.length,B;E;){B=this.props[--E];t[B]=c[B]}if(!t.target){t.target=t.srcElement||H}if(t.target.nodeType===3){t.target=t.target.parentNode}if(!t.relatedTarget&&t.fromElement){t.relatedTarget=t.fromElement===t.target?t.toElement:t.fromElement}if(t.pageX==null&&t.clientX!=null){c=H.documentElement;E=H.body;t.pageX=t.clientX+(c&&c.scrollLeft||E&&E.scrollLeft||0)-(c&&c.clientLeft||E&&E.clientLeft||0);t.pageY=t.clientY+(c&&c.scrollTop||E&&E.scrollTop||0)-(c&&c.clientTop||E&&E.clientTop||0)}if(t.which==null&&(t.charCode!=null||t.keyCode!=null)){t.which=t.charCode!=null?t.charCode:t.keyCode}if(!t.metaKey&&t.ctrlKey){t.metaKey=t.ctrlKey}if(!t.which&&t.button!==aB){t.which=t.button&1?1:t.button&2?3:t.button&4?2:0}return t},guid:100000000,proxy:R.proxy,special:{ready:{setup:R.bindReady,teardown:R.noop},live:{add:function(c){R.event.add(this,ai(c.origType,c.selector),R.extend({},c,{handler:A,guid:c.handler.guid}))},remove:function(c){R.event.remove(this,ai(c.origType,c.selector),c)}},beforeunload:{setup:function(t,c,B){if(R.isWindow(this)){this.onbeforeunload=B}},teardown:function(t,c){if(this.onbeforeunload===c){this.onbeforeunload=null}}}}};R.removeEvent=H.removeEventListener?function(t,c,B){t.removeEventListener&&t.removeEventListener(c,B,false)}:function(t,c,B){t.detachEvent&&t.detachEvent("on"+c,B)};R.Event=function(c){if(!this.preventDefault){return new R.Event(c)}if(c&&c.type){this.originalEvent=c;this.type=c.type}else{this.type=c}this.timeStamp=R.now();this[R.expando]=true};R.Event.prototype={preventDefault:function(){this.isDefaultPrevented=J;var c=this.originalEvent;if(c){if(c.preventDefault){c.preventDefault()}else{c.returnValue=false}}},stopPropagation:function(){this.isPropagationStopped=J;var c=this.originalEvent;if(c){c.stopPropagation&&c.stopPropagation();c.cancelBubble=true}},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=J;this.stopPropagation()},isDefaultPrevented:am,isPropagationStopped:am,isImmediatePropagationStopped:am};var D=function(t){var c=t.relatedTarget;try{for(;c&&c!==this;){c=c.parentNode}if(c!==this){t.type=t.data;R.event.handle.apply(this,arguments)}}catch(B){}},p=function(c){c.type=c.data;R.event.handle.apply(this,arguments)};R.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,c){R.event.special[t]={setup:function(B){R.event.add(this,c,B&&B.selector?p:D,t)},teardown:function(B){R.event.remove(this,c,B&&B.selector?p:D)}}});if(!R.support.submitBubbles){R.event.special.submit={setup:function(){if(this.nodeName.toLowerCase()!=="form"){R.event.add(this,"click.specialSubmit",function(t){var c=t.target,B=c.type;if((B==="submit"||B==="image")&&R(c).closest("form").length){t.liveFired=aB;return aZ("submit",this,arguments)}});R.event.add(this,"keypress.specialSubmit",function(t){var c=t.target,B=c.type;if((B==="text"||B==="password")&&R(c).closest("form").length&&t.keyCode===13){t.liveFired=aB;return aZ("submit",this,arguments)}})}else{return false}},teardown:function(){R.event.remove(this,".specialSubmit")}}}if(!R.support.changeBubbles){var al,b=function(t){var c=t.type,B=t.value;if(c==="radio"||c==="checkbox"){B=t.checked}else{if(c==="select-multiple"){B=t.selectedIndex>-1?R.map(t.options,function(E){return E.selected}).join("-"):""}else{if(t.nodeName.toLowerCase()==="select"){B=t.selectedIndex}}}return B},ag=function(t,c){var P=t.target,E,B;if(!(!L.test(P.nodeName)||P.readOnly)){E=R.data(P,"_change_data");B=b(P);if(t.type!=="focusout"||P.type!=="radio"){R.data(P,"_change_data",B)}if(!(E===aB||B===E)){if(E!=null||B){t.type="change";t.liveFired=aB;return R.event.trigger(t,c,P)}}}};R.event.special.change={filters:{focusout:ag,beforedeactivate:ag,click:function(t){var c=t.target,B=c.type;if(B==="radio"||B==="checkbox"||c.nodeName.toLowerCase()==="select"){return ag.call(this,t)}},keydown:function(t){var c=t.target,B=c.type;if(t.keyCode===13&&c.nodeName.toLowerCase()!=="textarea"||t.keyCode===32&&(B==="checkbox"||B==="radio")||B==="select-multiple"){return ag.call(this,t)}},beforeactivate:function(c){c=c.target;R.data(c,"_change_data",b(c))}},setup:function(){if(this.type==="file"){return false}for(var c in al){R.event.add(this,c+".specialChange",al[c])}return L.test(this.nodeName)},teardown:function(){R.event.remove(this,".specialChange");return L.test(this.nodeName)}};al=R.event.special.change.filters;al.focus=al.beforeactivate}H.addEventListener&&R.each({focus:"focusin",blur:"focusout"},function(t,c){function B(E){E=R.event.fix(E);E.type=c;return R.event.trigger(E,null,E.target)}R.event.special[c]={setup:function(){ae[c]++===0&&H.addEventListener(t,B,true)},teardown:function(){--ae[c]===0&&H.removeEventListener(t,B,true)}}});R.each(["bind","one"],function(t,c){R.fn[c]=function(W,V,U){if(typeof W==="object"){for(var P in W){this[c](P,V,W[P],U)}return this}if(R.isFunction(V)||V===false){U=V;V=aB}var B=c==="one"?R.proxy(U,function(X){R(this).unbind(X,B);return U.apply(this,arguments)}):U;if(W==="unload"&&c!=="one"){this.one(W,V,U)}else{P=0;for(var E=this.length;P<E;P++){R.event.add(this[P],W,B,V)}}return this}});R.fn.extend({unbind:function(t,c){if(typeof t==="object"&&!t.preventDefault){for(var E in t){this.unbind(E,t[E])}}else{E=0;for(var B=this.length;E<B;E++){R.event.remove(this[E],t,c)}}return this},delegate:function(t,c,E,B){return this.live(c,E,B,t)},undelegate:function(t,c,B){return arguments.length===0?this.unbind("live"):this.die(c,null,B,t)},trigger:function(t,c){return this.each(function(){R.event.trigger(t,c,this)})},triggerHandler:function(t,c){if(this[0]){var B=R.Event(t);B.preventDefault();B.stopPropagation();R.event.trigger(B,c,this[0]);return B.result}},toggle:function(t){for(var c=arguments,B=1;B<c.length;){R.proxy(t,c[B++])}return this.click(R.proxy(t,function(P){var E=(R.data(this,"lastToggle"+t.guid)||0)%B;R.data(this,"lastToggle"+t.guid,E+1);P.preventDefault();return c[E].apply(this,arguments)||false}))},hover:function(t,c){return this.mouseenter(t).mouseleave(c||t)}});var aS={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};R.each(["live","die"],function(t,c){R.fn[c]=function(Z,Y,X,W){var U,V=0,P,aa,B=W||this.selector;W=W?this:R(this.context);if(typeof Z==="object"&&!Z.preventDefault){for(U in Z){W[c](U,Y,Z[U],B)}return this}if(R.isFunction(Y)){X=Y;Y=aB}for(Z=(Z||"").split(" ");(U=Z[V++])!=null;){P=aj.exec(U);aa="";if(P){aa=P[0];U=U.replace(aj,"")}if(U==="hover"){Z.push("mouseenter"+aa,"mouseleave"+aa)}else{P=U;if(U==="focus"||U==="blur"){Z.push(aS[U]+aa);U+=aa}else{U=(aS[U]||U)+aa}if(c==="live"){aa=0;for(var E=W.length;aa<E;aa++){R.event.add(W[aa],"live."+ai(U,B),{data:Y,selector:B,handler:X,origType:U,origHandler:X,preType:P})}}else{W.unbind("live."+ai(U,B),X)}}}return this}});R.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),function(t,c){R.fn[c]=function(E,B){if(B==null){B=E;E=null}return arguments.length>0?this.bind(c,E,B):this.trigger(c)};if(R.attrFn){R.attrFn[c]=true}});ax.attachEvent&&!ax.addEventListener&&R(ax).bind("unload",function(){for(var t in R.cache){if(R.cache[t].handle){try{R.event.remove(R.cache[t].handle.elem)}catch(c){}}}});(function(){function a5(bd,bc,ba,bb,a9,a8){a9=0;for(var bf=bb.length;a9<bf;a9++){var be=bb[a9];if(be){var bg=false;for(be=be[bd];be;){if(be.sizcache===ba){bg=bb[be.sizset];break}if(be.nodeType===1&&!a8){be.sizcache=ba;be.sizset=a9}if(be.nodeName.toLowerCase()===bc){bg=be;break}be=be[bd]}bb[a9]=bg}}}function aa(bd,bc,ba,bb,a9,a8){a9=0;for(var bf=bb.length;a9<bf;a9++){var be=bb[a9];if(be){var bg=false;for(be=be[bd];be;){if(be.sizcache===ba){bg=bb[be.sizset];break}if(be.nodeType===1){if(!a8){be.sizcache=ba;be.sizset=a9}if(typeof bc!=="string"){if(be===bc){bg=true;break}}else{if(U.filter(bc,[be]).length>0){bg=be;break}}}be=be[bd]}bb[a9]=bg}}}var Y=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,X=0,W=Object.prototype.toString,V=false,P=true;[0,0].sort(function(){P=false;return 0});var U=function(bf,be,bb,bc){bb=bb||[];var ba=be=be||H;if(be.nodeType!==1&&be.nodeType!==9){return[]}if(!bf||typeof bf!=="string"){return bb}var a9,bk,bj,bl,bi,bh=true,bg=U.isXML(be),a8=[],bd=bf;do{Y.exec("");if(a9=Y.exec(bd)){bd=a9[3];a8.push(a9[1]);if(a9[2]){bl=a9[3];break}}}while(a9);if(a8.length>1&&a4.exec(bf)){if(a8.length===2&&E.relative[a8[0]]){bk=Z(a8[0]+a8[1],be)}else{for(bk=E.relative[a8[0]]?[be]:U(a8.shift(),be);a8.length;){bf=a8.shift();if(E.relative[bf]){bf+=a8.shift()}bk=Z(bf,bk)}}}else{if(!bc&&a8.length>1&&be.nodeType===9&&!bg&&E.match.ID.test(a8[0])&&!E.match.ID.test(a8[a8.length-1])){a9=U.find(a8.shift(),be,bg);be=a9.expr?U.filter(a9.expr,a9.set)[0]:a9.set[0]}if(be){a9=bc?{expr:a8.pop(),set:t(bc)}:U.find(a8.pop(),a8.length===1&&(a8[0]==="~"||a8[0]==="+")&&be.parentNode?be.parentNode:be,bg);bk=a9.expr?U.filter(a9.expr,a9.set):a9.set;if(a8.length>0){bj=t(bk)}else{bh=false}for(;a8.length;){a9=bi=a8.pop();if(E.relative[bi]){a9=a8.pop()}else{bi=""}if(a9==null){a9=be}E.relative[bi](bj,a9,bg)}}else{bj=[]}}bj||(bj=bk);bj||U.error(bi||bf);if(W.call(bj)==="[object Array]"){if(bh){if(be&&be.nodeType===1){for(bf=0;bj[bf]!=null;bf++){if(bj[bf]&&(bj[bf]===true||bj[bf].nodeType===1&&U.contains(be,bj[bf]))){bb.push(bk[bf])}}}else{for(bf=0;bj[bf]!=null;bf++){bj[bf]&&bj[bf].nodeType===1&&bb.push(bk[bf])}}}else{bb.push.apply(bb,bj)}}else{t(bj,bb)}if(bl){U(bl,ba,bb,bc);U.uniqueSort(bb)}return bb};U.uniqueSort=function(a9){if(a7){V=P;a9.sort(a7);if(V){for(var a8=1;a8<a9.length;a8++){a9[a8]===a9[a8-1]&&a9.splice(a8--,1)}}}return a9};U.matches=function(a9,a8){return U(a9,null,null,a8)};U.matchesSelector=function(a9,a8){return U(a8,null,null,[a9]).length>0};U.find=function(bd,bc,ba){var bb;if(!bd){return[]}for(var a9=0,a8=E.order.length;a9<a8;a9++){var bf,be=E.order[a9];if(bf=E.leftMatch[be].exec(bd)){var bg=bf[1];bf.splice(1,1);if(bg.substr(bg.length-1)!=="\\"){bf[1]=(bf[1]||"").replace(/\\/g,"");bb=E.find[be](bf,bc,ba);if(bb!=null){bd=bd.replace(E.match[be],"");break}}}}bb||(bb=bc.getElementsByTagName("*"));return{set:bb,expr:bd}};U.filter=function(bg,bf,bb,bc){for(var ba,a9,bl=bg,bk=[],bm=bf,bj=bf&&bf[0]&&U.isXML(bf[0]);bg&&bf.length;){for(var bi in E.filter){if((ba=E.leftMatch[bi].exec(bg))!=null&&ba[2]){var bh,a8,be=E.filter[bi];a8=ba[1];a9=false;ba.splice(1,1);if(a8.substr(a8.length-1)!=="\\"){if(bm===bk){bk=[]}if(E.preFilter[bi]){if(ba=E.preFilter[bi](ba,bm,bb,bk,bc,bj)){if(ba===true){continue}}else{a9=bh=true}}if(ba){for(var bd=0;(a8=bm[bd])!=null;bd++){if(a8){bh=be(a8,ba,bd,bm);var bn=bc^!!bh;if(bb&&bh!=null){if(bn){a9=true}else{bm[bd]=false}}else{if(bn){bk.push(a8);a9=true}}}}}if(bh!==aB){bb||(bm=bk);bg=bg.replace(E.match[bi],"");if(!a9){return[]}break}}}}if(bg===bl){if(a9==null){U.error(bg)}else{break}}bl=bg}return bm};U.error=function(a8){throw"Syntax error, unrecognized expression: "+a8};var E=U.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a8){return a8.getAttribute("href")}},relative:{"+":function(ba,a9){var bd=typeof a9==="string",a8=bd&&!/\W/.test(a9);bd=bd&&!a8;if(a8){a9=a9.toLowerCase()}a8=0;for(var bc=ba.length,bb;a8<bc;a8++){if(bb=ba[a8]){for(;(bb=bb.previousSibling)&&bb.nodeType!==1;){}ba[a8]=bd||bb&&bb.nodeName.toLowerCase()===a9?bb||false:bb===a9}}bd&&U.filter(a9,ba,true)},">":function(ba,a9){var bd,a8=typeof a9==="string",bc=0,bb=ba.length;if(a8&&!/\W/.test(a9)){for(a9=a9.toLowerCase();bc<bb;bc++){if(bd=ba[bc]){bd=bd.parentNode;ba[bc]=bd.nodeName.toLowerCase()===a9?bd:false}}}else{for(;bc<bb;bc++){if(bd=ba[bc]){ba[bc]=a8?bd.parentNode:bd.parentNode===a9}}a8&&U.filter(a9,ba,true)}},"":function(ba,a9,bd){var a8,bc=X++,bb=aa;if(typeof a9==="string"&&!/\W/.test(a9)){a8=a9=a9.toLowerCase();bb=a5}bb("parentNode",a9,bc,ba,a8,bd)},"~":function(ba,a9,bd){var a8,bc=X++,bb=aa;if(typeof a9==="string"&&!/\W/.test(a9)){a8=a9=a9.toLowerCase();bb=a5}bb("previousSibling",a9,bc,ba,a8,bd)}},find:{ID:function(a9,a8,ba){if(typeof a8.getElementById!=="undefined"&&!ba){return(a9=a8.getElementById(a9[1]))&&a9.parentNode?[a9]:[]}},NAME:function(ba,a9){if(typeof a9.getElementsByName!=="undefined"){for(var bd=[],a8=a9.getElementsByName(ba[1]),bc=0,bb=a8.length;bc<bb;bc++){a8[bc].getAttribute("name")===ba[1]&&bd.push(a8[bc])}return bd.length===0?null:bd}},TAG:function(a9,a8){return a8.getElementsByTagName(a9[1])}},preFilter:{CLASS:function(bb,ba,be,a8,bd,bc){bb=" "+bb[1].replace(/\\/g,"")+" ";if(bc){return bb}bc=0;for(var a9;(a9=ba[bc])!=null;bc++){if(a9){if(bd^(a9.className&&(" "+a9.className+" ").replace(/[\t\n]/g," ").indexOf(bb)>=0)){be||a8.push(a9)}else{if(be){ba[bc]=false}}}}return false},ID:function(a8){return a8[1].replace(/\\/g,"")},TAG:function(a8){return a8[1].toLowerCase()},CHILD:function(a9){if(a9[1]==="nth"){var a8=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(a9[2]==="even"&&"2n"||a9[2]==="odd"&&"2n+1"||!/\D/.test(a9[2])&&"0n+"+a9[2]||a9[2]);a9[2]=a8[1]+(a8[2]||1)-0;a9[3]=a8[3]-0}a9[0]=X++;return a9},ATTR:function(ba,a9,bd,a8,bc,bb){a9=ba[1].replace(/\\/g,"");if(!bb&&E.attrMap[a9]){ba[1]=E.attrMap[a9]}if(ba[2]==="~="){ba[4]=" "+ba[4]+" "}return ba},PSEUDO:function(ba,a9,bc,a8,bb){if(ba[1]==="not"){if((Y.exec(ba[3])||"").length>1||/^\w/.test(ba[3])){ba[3]=U(ba[3],null,null,a9)}else{ba=U.filter(ba[3],a9,bc,true^bb);bc||a8.push.apply(a8,ba);return false}}else{if(E.match.POS.test(ba[0])||E.match.CHILD.test(ba[0])){return true}}return ba},POS:function(a8){a8.unshift(true);return a8}},filters:{enabled:function(a8){return a8.disabled===false&&a8.type!=="hidden"},disabled:function(a8){return a8.disabled===true},checked:function(a8){return a8.checked===true},selected:function(a8){return a8.selected===true},parent:function(a8){return !!a8.firstChild},empty:function(a8){return !a8.firstChild},has:function(a9,a8,ba){return !!U(ba[3],a9).length},header:function(a8){return/h\d/i.test(a8.nodeName)},text:function(a8){return"text"===a8.type},radio:function(a8){return"radio"===a8.type},checkbox:function(a8){return"checkbox"===a8.type},file:function(a8){return"file"===a8.type},password:function(a8){return"password"===a8.type},submit:function(a8){return"submit"===a8.type},image:function(a8){return"image"===a8.type},reset:function(a8){return"reset"===a8.type},button:function(a8){return"button"===a8.type||a8.nodeName.toLowerCase()==="button"},input:function(a8){return/input|select|textarea|button/i.test(a8.nodeName)}},setFilters:{first:function(a9,a8){return a8===0},last:function(ba,a9,bb,a8){return a9===a8.length-1},even:function(a9,a8){return a8%2===0},odd:function(a9,a8){return a8%2===1},lt:function(a9,a8,ba){return a8<ba[3]-0},gt:function(a9,a8,ba){return a8>ba[3]-0},nth:function(a9,a8,ba){return ba[3]-0===a8},eq:function(a9,a8,ba){return ba[3]-0===a8}},filter:{PSEUDO:function(ba,a9,bd,a8){var bc=a9[1],bb=E.filters[bc];if(bb){return bb(ba,bd,a9,a8)}else{if(bc==="contains"){return(ba.textContent||ba.innerText||U.getText([ba])||"").indexOf(a9[3])>=0}else{if(bc==="not"){a9=a9[3];bd=0;for(a8=a9.length;bd<a8;bd++){if(a9[bd]===ba){return false}}return true}else{U.error("Syntax error, unrecognized expression: "+bc)}}}},CHILD:function(bb,ba){var bf=ba[1],a8=bb;switch(bf){case"only":case"first":for(;a8=a8.previousSibling;){if(a8.nodeType===1){return false}}if(bf==="first"){return true}a8=bb;case"last":for(;a8=a8.nextSibling;){if(a8.nodeType===1){return false}}return true;case"nth":bf=ba[2];var bd=ba[3];if(bf===1&&bd===0){return true}var bc=ba[0],a9=bb.parentNode;if(a9&&(a9.sizcache!==bc||!bb.nodeIndex)){var be=0;for(a8=a9.firstChild;a8;a8=a8.nextSibling){if(a8.nodeType===1){a8.nodeIndex=++be}}a9.sizcache=bc}a8=bb.nodeIndex-bd;return bf===0?a8===0:a8%bf===0&&a8/bf>=0}},ID:function(a9,a8){return a9.nodeType===1&&a9.getAttribute("id")===a8},TAG:function(a9,a8){return a8==="*"&&a9.nodeType===1||a9.nodeName.toLowerCase()===a8},CLASS:function(a9,a8){return(" "+(a9.className||a9.getAttribute("class"))+" ").indexOf(a8)>-1},ATTR:function(ba,a9){var bd=a9[1];bd=E.attrHandle[bd]?E.attrHandle[bd](ba):ba[bd]!=null?ba[bd]:ba.getAttribute(bd);var a8=bd+"",bc=a9[2],bb=a9[4];return bd==null?bc==="!=":bc==="="?a8===bb:bc==="*="?a8.indexOf(bb)>=0:bc==="~="?(" "+a8+" ").indexOf(bb)>=0:!bb?a8&&bd!==false:bc==="!="?a8!==bb:bc==="^="?a8.indexOf(bb)===0:bc==="$="?a8.substr(a8.length-bb.length)===bb:bc==="|="?a8===bb||a8.substr(0,bb.length+1)===bb+"-":false},POS:function(ba,a9,bc,a8){var bb=E.setFilters[a9[2]];if(bb){return bb(ba,bc,a9,a8)}}}},a4=E.match.POS,c=function(a9,a8){return"\\"+(a8-0+1)},B;for(B in E.match){E.match[B]=RegExp(E.match[B].source+/(?![^\[]*\])(?![^\(]*\))/.source);E.leftMatch[B]=RegExp(/(^(?:.|\r|\n)*?)/.source+E.match[B].source.replace(/\\(\d+)/g,c))}var t=function(a9,a8){a9=Array.prototype.slice.call(a9,0);if(a8){a8.push.apply(a8,a9);return a8}return a9};try{Array.prototype.slice.call(H.documentElement.childNodes,0)}catch(ab){t=function(ba,a9){var bc=0,a8=a9||[];if(W.call(ba)==="[object Array]"){Array.prototype.push.apply(a8,ba)}else{if(typeof ba.length==="number"){for(var bb=ba.length;bc<bb;bc++){a8.push(ba[bc])}}else{for(;ba[bc];bc++){a8.push(ba[bc])}}}return a8}}var a7,a6;if(H.documentElement.compareDocumentPosition){a7=function(a9,a8){if(a9===a8){V=true;return 0}if(!a9.compareDocumentPosition||!a8.compareDocumentPosition){return a9.compareDocumentPosition?-1:1}return a9.compareDocumentPosition(a8)&4?-1:1}}else{a7=function(bb,ba){var be,a8,bd=[],bc=[];be=bb.parentNode;a8=ba.parentNode;var a9=be;if(bb===ba){V=true;return 0}else{if(be===a8){return a6(bb,ba)}else{if(be){if(!a8){return 1}}else{return -1}}}for(;a9;){bd.unshift(a9);a9=a9.parentNode}for(a9=a8;a9;){bc.unshift(a9);a9=a9.parentNode}be=bd.length;a8=bc.length;for(a9=0;a9<be&&a9<a8;a9++){if(bd[a9]!==bc[a9]){return a6(bd[a9],bc[a9])}}return a9===be?a6(bb,bc[a9],-1):a6(bd[a9],ba,1)};a6=function(a9,a8,ba){if(a9===a8){return ba}for(a9=a9.nextSibling;a9;){if(a9===a8){return -1}a9=a9.nextSibling}return 1}}U.getText=function(ba){for(var a9="",bb,a8=0;ba[a8];a8++){bb=ba[a8];if(bb.nodeType===3||bb.nodeType===4){a9+=bb.nodeValue}else{if(bb.nodeType!==8){a9+=U.getText(bb.childNodes)}}}return a9};(function(){var a9=H.createElement("div"),a8="script"+(new Date).getTime(),ba=H.documentElement;a9.innerHTML="<a name='"+a8+"'/>";ba.insertBefore(a9,ba.firstChild);if(H.getElementById(a8)){E.find.ID=function(bb,bd,bc){if(typeof bd.getElementById!=="undefined"&&!bc){return(bd=bd.getElementById(bb[1]))?bd.id===bb[1]||typeof bd.getAttributeNode!=="undefined"&&bd.getAttributeNode("id").nodeValue===bb[1]?[bd]:aB:[]}};E.filter.ID=function(bb,bd){var bc=typeof bb.getAttributeNode!=="undefined"&&bb.getAttributeNode("id");return bb.nodeType===1&&bc&&bc.nodeValue===bd}}ba.removeChild(a9);ba=a9=null})();(function(){var a8=H.createElement("div");a8.appendChild(H.createComment(""));if(a8.getElementsByTagName("*").length>0){E.find.TAG=function(ba,bd){var a9=bd.getElementsByTagName(ba[1]);if(ba[1]==="*"){for(var bc=[],bb=0;a9[bb];bb++){a9[bb].nodeType===1&&bc.push(a9[bb])}a9=bc}return a9}}a8.innerHTML="<a href='#'></a>";if(a8.firstChild&&typeof a8.firstChild.getAttribute!=="undefined"&&a8.firstChild.getAttribute("href")!=="#"){E.attrHandle.href=function(a9){return a9.getAttribute("href",2)}}a8=null})();H.querySelectorAll&&function(){var a9=U,a8=H.createElement("div");a8.innerHTML="<p class='TEST'></p>";if(!(a8.querySelectorAll&&a8.querySelectorAll(".TEST").length===0)){U=function(bb,bf,be,bc){bf=bf||H;bb=bb.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!bc&&!U.isXML(bf)){if(bf.nodeType===9){try{return t(bf.querySelectorAll(bb),be)}catch(bi){}}else{if(bf.nodeType===1&&bf.nodeName.toLowerCase()!=="object"){var bd=bf.getAttribute("id"),bh=bd||"__sizzle__";bd||bf.setAttribute("id",bh);try{return t(bf.querySelectorAll("#"+bh+" "+bb),be)}catch(bg){}finally{bd||bf.removeAttribute("id")}}}}return a9(bb,bf,be,bc)};for(var ba in a9){U[ba]=a9[ba]}a8=null}}();(function(){var ba=H.documentElement,a9=ba.matchesSelector||ba.mozMatchesSelector||ba.webkitMatchesSelector||ba.msMatchesSelector,bb=false;try{a9.call(H.documentElement,"[test!='']:sizzle")}catch(a8){bb=true}if(a9){U.matchesSelector=function(be,bd){bd=bd.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!U.isXML(be)){try{if(bb||!E.match.PSEUDO.test(bd)&&!/!=/.test(bd)){return a9.call(be,bd)}}catch(bc){}}return U(bd,null,null,[be]).length>0}}})();(function(){var a8=H.createElement("div");a8.innerHTML="<div class='test e'></div><div class='test'></div>";if(!(!a8.getElementsByClassName||a8.getElementsByClassName("e").length===0)){a8.lastChild.className="e";if(a8.getElementsByClassName("e").length!==1){E.order.splice(1,0,"CLASS");E.find.CLASS=function(ba,bb,a9){if(typeof bb.getElementsByClassName!=="undefined"&&!a9){return bb.getElementsByClassName(ba[1])}};a8=null}}})();U.contains=H.documentElement.contains?function(a9,a8){return a9!==a8&&(a9.contains?a9.contains(a8):true)}:H.documentElement.compareDocumentPosition?function(a9,a8){return !!(a9.compareDocumentPosition(a8)&16)}:function(){return false};U.isXML=function(a8){return(a8=(a8?a8.ownerDocument||a8:0).documentElement)?a8.nodeName!=="HTML":false};var Z=function(bb,ba){for(var be,a8=[],bd="",bc=ba.nodeType?[ba]:ba;be=E.match.PSEUDO.exec(bb);){bd+=be[0];bb=bb.replace(E.match.PSEUDO,"")}bb=E.relative[bb]?bb+"*":bb;be=0;for(var a9=bc.length;be<a9;be++){U(bb,bc[be],a8)}return U.filter(bd,a8)};R.find=U;R.expr=U.selectors;R.expr[":"]=R.expr.filters;R.unique=U.uniqueSort;R.text=U.getText;R.isXMLDoc=U.isXML;R.contains=U.contains})();var aU=/Until$/,aA=/^(?:parents|prevUntil|prevAll)/,aH=/,/,aR=/^.[^:#\[\.,]*$/,ap=Array.prototype.slice,I=R.expr.match.POS;R.fn.extend({find:function(B){for(var c=this.pushStack("","find",B),V=0,U=0,P=this.length;U<P;U++){V=c.length;R.find(B,this[U],c);if(U>0){for(var E=V;E<c.length;E++){for(var t=0;t<V;t++){if(c[t]===c[E]){c.splice(E--,1);break}}}}}return c},has:function(t){var c=R(t);return this.filter(function(){for(var E=0,B=c.length;E<B;E++){if(R.contains(this,c[E])){return true}}})},not:function(c){return this.pushStack(aM(this,c,false),"not",c)},filter:function(c){return this.pushStack(aM(this,c,true),"filter",c)},is:function(c){return !!c&&R.filter(c,this).length>0},closest:function(X,W){var V=[],U,P,E=this[0];if(R.isArray(X)){var t,B={},c=1;if(E&&X.length){U=0;for(P=X.length;U<P;U++){t=X[U];B[t]||(B[t]=R.expr.match.POS.test(t)?R(t,W||this.context):t)}for(;E&&E.ownerDocument&&E!==W;){for(t in B){U=B[t];if(U.jquery?U.index(E)>-1:R(E).is(U)){V.push({selector:t,elem:E,level:c})}}E=E.parentNode;c++}}return V}t=I.test(X)?R(X,W||this.context):null;U=0;for(P=this.length;U<P;U++){for(E=this[U];E;){if(t?t.index(E)>-1:R.find.matchesSelector(E,X)){V.push(E);break}else{E=E.parentNode;if(!E||!E.ownerDocument||E===W){break}}}}V=V.length>1?R.unique(V):V;return this.pushStack(V,"closest",X)},index:function(c){if(!c||typeof c==="string"){return R.inArray(this[0],c?R(c):this.parent().children())}return R.inArray(c.jquery?c[0]:c,this)},add:function(t,c){var E=typeof t==="string"?R(t,c||this.context):R.makeArray(t),B=R.merge(this.get(),E);return this.pushStack(!E[0]||!E[0].parentNode||E[0].parentNode.nodeType===11||!B[0]||!B[0].parentNode||B[0].parentNode.nodeType===11?B:R.unique(B))},andSelf:function(){return this.add(this.prevObject)}});R.each({parent:function(c){return(c=c.parentNode)&&c.nodeType!==11?c:null},parents:function(c){return R.dir(c,"parentNode")},parentsUntil:function(t,c,B){return R.dir(t,"parentNode",B)},next:function(c){return R.nth(c,2,"nextSibling")},prev:function(c){return R.nth(c,2,"previousSibling")},nextAll:function(c){return R.dir(c,"nextSibling")},prevAll:function(c){return R.dir(c,"previousSibling")},nextUntil:function(t,c,B){return R.dir(t,"nextSibling",B)},prevUntil:function(t,c,B){return R.dir(t,"previousSibling",B)},siblings:function(c){return R.sibling(c.parentNode.firstChild,c)},children:function(c){return R.sibling(c.firstChild)},contents:function(c){return R.nodeName(c,"iframe")?c.contentDocument||c.contentWindow.document:R.makeArray(c.childNodes)}},function(t,c){R.fn[t]=function(P,E){var B=R.map(this,c,P);aU.test(t)||(E=P);if(E&&typeof E==="string"){B=R.filter(E,B)}B=this.length>1?R.unique(B):B;if((this.length>1||aH.test(E))&&aA.test(t)){B=B.reverse()}return this.pushStack(B,t,ap.call(arguments).join(","))}});R.extend({filter:function(t,c,B){if(B){t=":not("+t+")"}return c.length===1?R.find.matchesSelector(c[0],t)?[c[0]]:[]:R.find.matches(t,c)},dir:function(t,c,E){var B=[];for(t=t[c];t&&t.nodeType!==9&&(E===aB||t.nodeType!==1||!R(t).is(E));){t.nodeType===1&&B.push(t);t=t[c]}return B},nth:function(t,c,E){c=c||1;for(var B=0;t;t=t[E]){if(t.nodeType===1&&++B===c){break}}return t},sibling:function(t,c){for(var B=[];t;t=t.nextSibling){t.nodeType===1&&t!==c&&B.push(t)}return B}});var aF=/ jQuery\d+="(?:\d+|null)"/g,aO=/^\s+/,aX=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,aK=/<([\w:]+)/,s=/<tbody/i,f=/<|&#?\w+;/,av=/<(?:script|object|embed|option|style)/i,M=/checked\s*(?:[^=]|=\s*.checked.)/i,aV=/\=([^="'>\s]+\/)>/g,aq={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};aq.optgroup=aq.option;aq.tbody=aq.tfoot=aq.colgroup=aq.caption=aq.thead;aq.th=aq.td;if(!R.support.htmlSerialize){aq._default=[1,"div<div>","</div>"]}R.fn.extend({text:function(c){if(R.isFunction(c)){return this.each(function(t){var B=R(this);B.text(c.call(this,t,B.text()))})}if(typeof c!=="object"&&c!==aB){return this.empty().append((this[0]&&this[0].ownerDocument||H).createTextNode(c))}return R.text(this)},wrapAll:function(t){if(R.isFunction(t)){return this.each(function(B){R(this).wrapAll(t.call(this,B))})}if(this[0]){var c=R(t,this[0].ownerDocument).eq(0).clone(true);this[0].parentNode&&c.insertBefore(this[0]);c.map(function(){for(var B=this;B.firstChild&&B.firstChild.nodeType===1;){B=B.firstChild}return B}).append(this)}return this},wrapInner:function(c){if(R.isFunction(c)){return this.each(function(t){R(this).wrapInner(c.call(this,t))})}return this.each(function(){var t=R(this),B=t.contents();B.length?B.wrapAll(c):t.append(c)})},wrap:function(c){return this.each(function(){R(this).wrapAll(c)})},unwrap:function(){return this.parent().each(function(){R.nodeName(this,"body")||R(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,true,function(c){this.nodeType===1&&this.appendChild(c)})},prepend:function(){return this.domManip(arguments,true,function(c){this.nodeType===1&&this.insertBefore(c,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(t){this.parentNode.insertBefore(t,this)})}else{if(arguments.length){var c=R(arguments[0]);c.push.apply(c,this.toArray());return this.pushStack(c,"before",arguments)}}},after:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(t){this.parentNode.insertBefore(t,this.nextSibling)})}else{if(arguments.length){var c=this.pushStack(this,"after",arguments);c.push.apply(c,R(arguments[0]).toArray());return c}}},remove:function(t,c){for(var E=0,B;(B=this[E])!=null;E++){if(!t||R.filter(t,[B]).length){if(!c&&B.nodeType===1){R.cleanData(B.getElementsByTagName("*"));R.cleanData([B])}B.parentNode&&B.parentNode.removeChild(B)}}return this},empty:function(){for(var t=0,c;(c=this[t])!=null;t++){for(c.nodeType===1&&R.cleanData(c.getElementsByTagName("*"));c.firstChild;){c.removeChild(c.firstChild)}}return this},clone:function(t){var c=this.map(function(){if(!R.support.noCloneEvent&&!R.isXMLDoc(this)){var E=this.outerHTML,B=this.ownerDocument;if(!E){E=B.createElement("div");E.appendChild(this.cloneNode(true));E=E.innerHTML}return R.clean([E.replace(aF,"").replace(aV,'="$1">').replace(aO,"")],B)[0]}else{return this.cloneNode(true)}});if(t===true){ay(this,c);ay(this.find("*"),c.find("*"))}return c},html:function(t){if(t===aB){return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(aF,""):null}else{if(typeof t==="string"&&!av.test(t)&&(R.support.leadingWhitespace||!aO.test(t))&&!aq[(aK.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(aX,"<$1></$2>");try{for(var c=0,E=this.length;c<E;c++){if(this[c].nodeType===1){R.cleanData(this[c].getElementsByTagName("*"));this[c].innerHTML=t}}}catch(B){this.empty().append(t)}}else{R.isFunction(t)?this.each(function(U){var P=R(this);P.html(t.call(this,U,P.html()))}):this.empty().append(t)}}return this},replaceWith:function(c){if(this[0]&&this[0].parentNode){if(R.isFunction(c)){return this.each(function(t){var E=R(this),B=E.html();E.replaceWith(c.call(this,t,B))})}if(typeof c!=="string"){c=R(c).detach()}return this.each(function(){var t=this.nextSibling,B=this.parentNode;R(this).remove();t?R(t).before(c):R(B).append(c)})}else{return this.pushStack(R(R.isFunction(c)?c():c),"replaceWith",c)}},detach:function(c){return this.remove(c,true)},domManip:function(X,W,V){var U,P,E,t=X[0],B=[];if(!R.support.checkClone&&arguments.length===3&&typeof t==="string"&&M.test(t)){return this.each(function(){R(this).domManip(X,W,V,true)})}if(R.isFunction(t)){return this.each(function(Y){var Z=R(this);X[0]=t.call(this,Y,W?Z.html():aB);Z.domManip(X,W,V)})}if(this[0]){U=t&&t.parentNode;U=R.support.parentNode&&U&&U.nodeType===11&&U.childNodes.length===this.length?{fragment:U}:R.buildFragment(X,this,B);E=U.fragment;if(P=E.childNodes.length===1?E=E.firstChild:E.firstChild){W=W&&R.nodeName(P,"tr");P=0;for(var c=this.length;P<c;P++){V.call(W?R.nodeName(this[P],"table")?this[P].getElementsByTagName("tbody")[0]||this[P].appendChild(this[P].ownerDocument.createElement("tbody")):this[P]:this[P],P>0||U.cacheable||this.length>1?E.cloneNode(true):E)}}B.length&&R.each(B,aE)}return this}});R.buildFragment=function(t,c,U){var P,E,B;c=c&&c[0]?c[0].ownerDocument||c[0]:H;if(t.length===1&&typeof t[0]==="string"&&t[0].length<512&&c===H&&!av.test(t[0])&&(R.support.checkClone||!M.test(t[0]))){E=true;if(B=R.fragments[t[0]]){if(B!==1){P=B}}}if(!P){P=c.createDocumentFragment();R.clean(t,c,P,U)}if(E){R.fragments[t[0]]=B?P:1}return{fragment:P,cacheable:E}};R.fragments={};R.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,c){R.fn[t]=function(V){var U=[];V=R(V);var P=this.length===1&&this[0].parentNode;if(P&&P.nodeType===11&&P.childNodes.length===1&&V.length===1){V[c](this[0]);return this}else{P=0;for(var E=V.length;P<E;P++){var B=(P>0?this.clone(true):this).get();R(V[P])[c](B);U=U.concat(B)}return this.pushStack(U,t,V.selector)}}});R.extend({clean:function(Z,X,W,V){X=X||H;if(typeof X.createElement==="undefined"){X=X.ownerDocument||X[0]&&X[0].ownerDocument||H}for(var U=[],P=0,B;(B=Z[P])!=null;P++){if(typeof B==="number"){B+=""}if(B){if(typeof B==="string"&&!f.test(B)){B=X.createTextNode(B)}else{if(typeof B==="string"){B=B.replace(aX,"<$1></$2>");var E=(aK.exec(B)||["",""])[1].toLowerCase(),t=aq[E]||aq._default,Y=t[0],c=X.createElement("div");for(c.innerHTML=t[1]+B+t[2];Y--;){c=c.lastChild}if(!R.support.tbody){Y=s.test(B);E=E==="table"&&!Y?c.firstChild&&c.firstChild.childNodes:t[1]==="<table>"&&!Y?c.childNodes:[];for(t=E.length-1;t>=0;--t){R.nodeName(E[t],"tbody")&&!E[t].childNodes.length&&E[t].parentNode.removeChild(E[t])}}!R.support.leadingWhitespace&&aO.test(B)&&c.insertBefore(X.createTextNode(aO.exec(B)[0]),c.firstChild);B=c.childNodes}}if(B.nodeType){U.push(B)}else{U=R.merge(U,B)}}}if(W){for(P=0;U[P];P++){if(V&&R.nodeName(U[P],"script")&&(!U[P].type||U[P].type.toLowerCase()==="text/javascript")){V.push(U[P].parentNode?U[P].parentNode.removeChild(U[P]):U[P])}else{U[P].nodeType===1&&U.splice.apply(U,[P+1,0].concat(R.makeArray(U[P].getElementsByTagName("script"))));W.appendChild(U[P])}}}return U},cleanData:function(X){for(var W,V,U=R.cache,P=R.event.special,E=R.support.deleteExpando,t=0,B;(B=X[t])!=null;t++){if(!(B.nodeName&&R.noData[B.nodeName.toLowerCase()])){if(V=B[R.expando]){if((W=U[V])&&W.events){for(var c in W.events){P[c]?R.event.remove(B,c):R.removeEvent(B,c,W.handle)}}if(E){delete B[R.expando]}else{B.removeAttribute&&B.removeAttribute(R.expando)}delete U[V]}}}}});var x=/alpha\([^)]*\)/i,aJ=/opacity=([^)]*)/,at=/-([a-z])/ig,K=/([A-Z])/g,k=/^-?\d+(?:px)?$/i,v=/^-?\d/,i={position:"absolute",visibility:"hidden",display:"block"},af=["Left","Right"],F=["Top","Bottom"],ak,a0,aI,aY=function(t,c){return c.toUpperCase()};R.fn.css=function(t,c){if(arguments.length===2&&c===aB){return this}return R.access(this,t,c,true,function(P,E,B){return B!==aB?R.style(P,E,B):R.css(P,E)})};R.extend({cssHooks:{opacity:{get:function(t,c){if(c){var B=ak(t,"opacity","opacity");return B===""?"1":B}else{return t.style.opacity}}}},cssNumber:{zIndex:true,fontWeight:true,opacity:true,zoom:true,lineHeight:true},cssProps:{"float":R.support.cssFloat?"cssFloat":"styleFloat"},style:function(X,W,V,U){if(!(!X||X.nodeType===3||X.nodeType===8||!X.style)){var P,E=R.camelCase(W),t=X.style,B=R.cssHooks[E];W=R.cssProps[E]||E;if(V!==aB){if(!(typeof V==="number"&&isNaN(V)||V==null)){if(typeof V==="number"&&!R.cssNumber[E]){V+="px"}if(!B||!("set" in B)||(V=B.set(X,V))!==aB){try{t[W]=V}catch(c){}}}}else{if(B&&"get" in B&&(P=B.get(X,false,U))!==aB){return P}return t[W]}}},css:function(t,c,U){var P,E=R.camelCase(c),B=R.cssHooks[E];c=R.cssProps[E]||E;if(B&&"get" in B&&(P=B.get(t,true,U))!==aB){return P}else{if(ak){return ak(t,c,E)}}},swap:function(t,c,P){var E={},B;for(B in c){E[B]=t.style[B];t.style[B]=c[B]}P.call(t);for(B in c){t.style[B]=E[B]}},camelCase:function(c){return c.replace(at,aY)}});R.curCSS=R.css;R.each(["height","width"],function(t,c){R.cssHooks[c]={get:function(U,P,E){var B;if(P){if(U.offsetWidth!==0){B=Q(U,c,E)}else{R.swap(U,i,function(){B=Q(U,c,E)})}if(B<=0){B=ak(U,c,c);if(B==="0px"&&aI){B=aI(U,c,c)}if(B!=null){return B===""||B==="auto"?"0px":B}}if(B<0||B==null){B=U.style[c];return B===""||B==="auto"?"0px":B}return typeof B==="string"?B:B+"px"}},set:function(E,B){if(k.test(B)){B=parseFloat(B);if(B>=0){return B+"px"}}else{return B}}}});if(!R.support.opacity){R.cssHooks.opacity={get:function(t,c){return aJ.test((c&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?parseFloat(RegExp.$1)/100+"":c?"1":""},set:function(t,c){var P=t.style;P.zoom=1;var E=R.isNaN(c)?"":"alpha(opacity="+c*100+")",B=P.filter||"";P.filter=x.test(B)?B.replace(x,E):P.filter+" "+E}}}if(H.defaultView&&H.defaultView.getComputedStyle){a0=function(t,c,E){var B;E=E.replace(K,"-$1").toLowerCase();if(!(c=t.ownerDocument.defaultView)){return aB}if(c=c.getComputedStyle(t,null)){B=c.getPropertyValue(E);if(B===""&&!R.contains(t.ownerDocument.documentElement,t)){B=R.style(t,E)}}return B}}if(H.documentElement.currentStyle){aI=function(t,c){var U,P,E=t.currentStyle&&t.currentStyle[c],B=t.style;if(!k.test(E)&&v.test(E)){U=B.left;P=t.runtimeStyle.left;t.runtimeStyle.left=t.currentStyle.left;B.left=c==="fontSize"?"1em":E||0;E=B.pixelLeft+"px";B.left=U;t.runtimeStyle.left=P}return E===""?"auto":E}}ak=a0||aI;if(R.expr&&R.expr.filters){R.expr.filters.hidden=function(t){var c=t.offsetHeight;return t.offsetWidth===0&&c===0||!R.support.reliableHiddenOffsets&&(t.style.display||R.css(t,"display"))==="none"};R.expr.filters.visible=function(c){return !R.expr.filters.hidden(c)}}var aL=R.now(),aw=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,O=/^(?:select|textarea)/i,y=/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,l=/^(?:GET|HEAD)$/,q=/\[\]$/,an=/\=\?(&|$)/,w=/\?/,a1=/([?&])_=[^&]*/,aP=/^(\w+:)?\/\/([^\/?#]+)/,aC=/%20/g,ad=/#.*$/,aN=R.fn.load;R.fn.extend({load:function(t,c,U){if(typeof t!=="string"&&aN){return aN.apply(this,arguments)}else{if(!this.length){return this}}var P=t.indexOf(" ");if(P>=0){var E=t.slice(P,t.length);t=t.slice(0,P)}P="GET";if(c){if(R.isFunction(c)){U=c;c=null}else{if(typeof c==="object"){c=R.param(c,R.ajaxSettings.traditional);P="POST"}}}var B=this;R.ajax({url:t,type:P,dataType:"html",data:c,complete:function(V,W){if(W==="success"||W==="notmodified"){B.html(E?R("<div>").append(V.responseText.replace(aw,"")).find(E):V.responseText)}U&&B.each(U,[V.responseText,W,V])}});return this},serialize:function(){return R.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?R.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||O.test(this.nodeName)||y.test(this.type))}).map(function(t,c){var B=R(this).val();return B==null?null:R.isArray(B)?R.map(B,function(E){return{name:c.name,value:E}}):{name:c.name,value:B}}).get()}});R.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(t,c){R.fn[c]=function(B){return this.bind(c,B)}});R.extend({get:function(t,c,E,B){if(R.isFunction(c)){B=B||E;E=c;c=null}return R.ajax({type:"GET",url:t,data:c,success:E,dataType:B})},getScript:function(t,c){return R.get(t,null,c,"script")},getJSON:function(t,c,B){return R.get(t,c,B,"json")},post:function(t,c,E,B){if(R.isFunction(c)){B=B||E;E=c;c={}}return R.ajax({type:"POST",url:t,data:c,success:E,dataType:B})},ajaxSetup:function(c){R.extend(R.ajaxSettings,c)},ajaxSettings:{url:location.href,global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,xhr:function(){return new ax.XMLHttpRequest},accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},ajax:function(ba){var a9=R.extend(true,{},R.ajaxSettings,ba),a8,a7,a6,a4=a9.type.toUpperCase(),Z=l.test(a4);a9.url=a9.url.replace(ad,"");a9.context=ba&&ba.context!=null?ba.context:a9;if(a9.data&&a9.processData&&typeof a9.data!=="string"){a9.data=R.param(a9.data,a9.traditional)}if(a9.dataType==="jsonp"){if(a4==="GET"){an.test(a9.url)||(a9.url+=(w.test(a9.url)?"&":"?")+(a9.jsonp||"callback")+"=?")}else{if(!a9.data||!an.test(a9.data)){a9.data=(a9.data?a9.data+"&":"")+(a9.jsonp||"callback")+"=?"}}a9.dataType="json"}if(a9.dataType==="json"&&(a9.data&&an.test(a9.data)||an.test(a9.url))){a8=a9.jsonpCallback||"jsonp"+aL++;if(a9.data){a9.data=(a9.data+"").replace(an,"="+a8+"$1")}a9.url=a9.url.replace(an,"="+a8+"$1");a9.dataType="script";var aa=ax[a8];ax[a8]=function(bb){if(R.isFunction(aa)){aa(bb)}else{ax[a8]=aB;try{delete ax[a8]}catch(bc){}}a6=bb;R.handleSuccess(a9,P,a7,a6);R.handleComplete(a9,P,a7,a6);V&&V.removeChild(W)}}if(a9.dataType==="script"&&a9.cache===null){a9.cache=false}if(a9.cache===false&&Z){var X=R.now(),E=a9.url.replace(a1,"$1_="+X);a9.url=E+(E===a9.url?(w.test(a9.url)?"&":"?")+"_="+X:"")}if(a9.data&&Z){a9.url+=(w.test(a9.url)?"&":"?")+a9.data}a9.global&&R.active++===0&&R.event.trigger("ajaxStart");X=(X=aP.exec(a9.url))&&(X[1]&&X[1].toLowerCase()!==location.protocol||X[2].toLowerCase()!==location.host);if(a9.dataType==="script"&&a4==="GET"&&X){var V=H.getElementsByTagName("head")[0]||H.documentElement,W=H.createElement("script");if(a9.scriptCharset){W.charset=a9.scriptCharset}W.src=a9.url;if(!a8){var U=false;W.onload=W.onreadystatechange=function(){if(!U&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){U=true;R.handleSuccess(a9,P,a7,a6);R.handleComplete(a9,P,a7,a6);W.onload=W.onreadystatechange=null;V&&W.parentNode&&V.removeChild(W)}}}V.insertBefore(W,V.firstChild);return aB}var t=false,P=a9.xhr();if(P){a9.username?P.open(a4,a9.url,a9.async,a9.username,a9.password):P.open(a4,a9.url,a9.async);try{if(a9.data!=null&&!Z||ba&&ba.contentType){P.setRequestHeader("Content-Type",a9.contentType)}if(a9.ifModified){R.lastModified[a9.url]&&P.setRequestHeader("If-Modified-Since",R.lastModified[a9.url]);R.etag[a9.url]&&P.setRequestHeader("If-None-Match",R.etag[a9.url])}X||P.setRequestHeader("X-Requested-With","XMLHttpRequest");P.setRequestHeader("Accept",a9.dataType&&a9.accepts[a9.dataType]?a9.accepts[a9.dataType]+", */*; q=0.01":a9.accepts._default)}catch(B){}if(a9.beforeSend&&a9.beforeSend.call(a9.context,P,a9)===false){a9.global&&R.active--===1&&R.event.trigger("ajaxStop");P.abort();return false}a9.global&&R.triggerGlobal(a9,"ajaxSend",[P,a9]);var c=P.onreadystatechange=function(bb){if(!P||P.readyState===0||bb==="abort"){t||R.handleComplete(a9,P,a7,a6);t=true;if(P){P.onreadystatechange=R.noop}}else{if(!t&&P&&(P.readyState===4||bb==="timeout")){t=true;P.onreadystatechange=R.noop;a7=bb==="timeout"?"timeout":!R.httpSuccess(P)?"error":a9.ifModified&&R.httpNotModified(P,a9.url)?"notmodified":"success";var bd;if(a7==="success"){try{a6=R.httpData(P,a9.dataType,a9)}catch(bc){a7="parsererror";bd=bc}}if(a7==="success"||a7==="notmodified"){a8||R.handleSuccess(a9,P,a7,a6)}else{R.handleError(a9,P,a7,bd)}a8||R.handleComplete(a9,P,a7,a6);bb==="timeout"&&P.abort();if(a9.async){P=null}}}};try{var a5=P.abort;P.abort=function(){P&&Function.prototype.call.call(a5,P);c("abort")}}catch(ab){}a9.async&&a9.timeout>0&&setTimeout(function(){P&&!t&&c("timeout")},a9.timeout);try{P.send(Z||a9.data==null?null:a9.data)}catch(Y){R.handleError(a9,P,null,Y);R.handleComplete(a9,P,a7,a6)}a9.async||c();return P}},param:function(t,c){var P=[],E=function(V,U){U=R.isFunction(U)?U():U;P[P.length]=encodeURIComponent(V)+"="+encodeURIComponent(U)};if(c===aB){c=R.ajaxSettings.traditional}if(R.isArray(t)||t.jquery){R.each(t,function(){E(this.name,this.value)})}else{for(var B in t){u(B,t[B],c,E)}}return P.join("&").replace(aC,"+")}});R.extend({active:0,lastModified:{},etag:{},handleError:function(t,c,E,B){t.error&&t.error.call(t.context,c,E,B);t.global&&R.triggerGlobal(t,"ajaxError",[c,t,B])},handleSuccess:function(t,c,E,B){t.success&&t.success.call(t.context,B,E,c);t.global&&R.triggerGlobal(t,"ajaxSuccess",[c,t])},handleComplete:function(t,c,B){t.complete&&t.complete.call(t.context,c,B);t.global&&R.triggerGlobal(t,"ajaxComplete",[c,t]);t.global&&R.active--===1&&R.event.trigger("ajaxStop")},triggerGlobal:function(t,c,B){(t.context&&t.context.url==null?R(t.context):R.event).trigger(c,B)},httpSuccess:function(t){try{return !t.status&&location.protocol==="file:"||t.status>=200&&t.status<300||t.status===304||t.status===1223}catch(c){}return false},httpNotModified:function(t,c){var E=t.getResponseHeader("Last-Modified"),B=t.getResponseHeader("Etag");if(E){R.lastModified[c]=E}if(B){R.etag[c]=B}return t.status===304},httpData:function(t,c,P){var E=t.getResponseHeader("content-type")||"",B=c==="xml"||!c&&E.indexOf("xml")>=0;t=B?t.responseXML:t.responseText;B&&t.documentElement.nodeName==="parsererror"&&R.error("parsererror");if(P&&P.dataFilter){t=P.dataFilter(t,c)}if(typeof t==="string"){if(c==="json"||!c&&E.indexOf("json")>=0){t=R.parseJSON(t)}else{if(c==="script"||!c&&E.indexOf("javascript")>=0){R.globalEval(t)}}}return t}});if(ax.ActiveXObject){R.ajaxSettings.xhr=function(){if(ax.location.protocol!=="file:"){try{return new ax.XMLHttpRequest}catch(t){}}try{return new ax.ActiveXObject("Microsoft.XMLHTTP")}catch(c){}}}R.support.ajax=!!R.ajaxSettings.xhr();var g={},C=/^(?:toggle|show|hide)$/,o=/^([+\-]=)?([\d+.\-]+)(.*)$/,ar,z=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];R.fn.extend({show:function(t,c,E){if(t||t===0){return this.animate(ao("show",3),t,c,E)}else{E=0;for(var B=this.length;E<B;E++){t=this[E];c=t.style.display;if(!R.data(t,"olddisplay")&&c==="none"){c=t.style.display=""}c===""&&R.css(t,"display")==="none"&&R.data(t,"olddisplay",m(t.nodeName))}for(E=0;E<B;E++){t=this[E];c=t.style.display;if(c===""||c==="none"){t.style.display=R.data(t,"olddisplay")||""}}return this}},hide:function(t,c,B){if(t||t===0){return this.animate(ao("hide",3),t,c,B)}else{t=0;for(c=this.length;t<c;t++){B=R.css(this[t],"display");B!=="none"&&R.data(this[t],"olddisplay",B)}for(t=0;t<c;t++){this[t].style.display="none"}return this}},_toggle:R.fn.toggle,toggle:function(t,c,E){var B=typeof t==="boolean";if(R.isFunction(t)&&R.isFunction(c)){this._toggle.apply(this,arguments)}else{t==null||B?this.each(function(){var P=B?t:R(this).is(":hidden");R(this)[P?"show":"hide"]()}):this.animate(ao("toggle",3),t,c,E)}return this},fadeTo:function(t,c,E,B){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:c},t,E,B)},animate:function(t,c,P,E){var B=R.speed(c,P,E);if(R.isEmptyObject(t)){return this.each(B.complete)}return this[B.queue===false?"each":"queue"](function(){var X=R.extend({},B),V,W=this.nodeType===1,Z=W&&R(this).is(":hidden"),U=this;for(V in t){var Y=R.camelCase(V);if(V!==Y){t[Y]=t[V];delete t[V];V=Y}if(t[V]==="hide"&&Z||t[V]==="show"&&!Z){return X.complete.call(this)}if(W&&(V==="height"||V==="width")){X.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY];if(R.css(this,"display")==="inline"&&R.css(this,"float")==="none"){if(R.support.inlineBlockNeedsLayout){if(m(this.nodeName)==="inline"){this.style.display="inline-block"}else{this.style.display="inline";this.style.zoom=1}}else{this.style.display="inline-block"}}}if(R.isArray(t[V])){(X.specialEasing=X.specialEasing||{})[V]=t[V][1];t[V]=t[V][0]}}if(X.overflow!=null){this.style.overflow="hidden"}X.curAnim=R.extend({},t);R.each(t,function(ab,a8){var a5=new R.fx(U,X,ab);if(C.test(a8)){a5[a8==="toggle"?Z?"show":"hide":a8](t)}else{var a4=o.exec(a8),a6=a5.cur()||0;if(a4){var aa=parseFloat(a4[2]),a7=a4[3]||"px";if(a7!=="px"){R.style(U,ab,(aa||1)+a7);a6=(aa||1)/a5.cur()*a6;R.style(U,ab,a6+a7)}if(a4[1]){aa=(a4[1]==="-="?-1:1)*aa+a6}a5.custom(a6,aa,a7)}else{a5.custom(a6,a8,"")}}});return true})},stop:function(t,c){var B=R.timers;t&&this.queue([]);this.each(function(){for(var E=B.length-1;E>=0;E--){if(B[E].elem===this){c&&B[E](true);B.splice(E,1)}}});c||this.dequeue();return this}});R.each({slideDown:ao("show",1),slideUp:ao("hide",1),slideToggle:ao("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,c){R.fn[t]=function(P,E,B){return this.animate(c,P,E,B)}});R.extend({speed:function(t,c,E){var B=t&&typeof t==="object"?R.extend({},t):{complete:E||!E&&c||R.isFunction(t)&&t,duration:t,easing:E&&c||c&&!R.isFunction(c)&&c};B.duration=R.fx.off?0:typeof B.duration==="number"?B.duration:B.duration in R.fx.speeds?R.fx.speeds[B.duration]:R.fx.speeds._default;B.old=B.complete;B.complete=function(){B.queue!==false&&R(this).dequeue();R.isFunction(B.old)&&B.old.call(this)};return B},easing:{linear:function(t,c,E,B){return E+B*t},swing:function(t,c,E,B){return(-Math.cos(t*Math.PI)/2+0.5)*B+E}},timers:[],fx:function(t,c,B){this.options=c;this.elem=t;this.prop=B;if(!c.orig){c.orig={}}}});R.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(R.fx.step[this.prop]||R.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop]}var c=parseFloat(R.css(this.elem,this.prop));return c&&c>-10000?c:0},custom:function(t,c,U){function P(V){return E.step(V)}var E=this,B=R.fx;this.startTime=R.now();this.start=t;this.end=c;this.unit=U||this.unit||"px";this.now=this.start;this.pos=this.state=0;P.elem=this.elem;if(P()&&R.timers.push(P)&&!ar){ar=setInterval(B.tick,B.interval)}},show:function(){this.options.orig[this.prop]=R.style(this.elem,this.prop);this.options.show=true;this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());R(this.elem).show()},hide:function(){this.options.orig[this.prop]=R.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(B){var c=R.now(),V=true;if(B||c>=this.options.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();this.options.curAnim[this.prop]=true;for(var U in this.options.curAnim){if(this.options.curAnim[U]!==true){V=false}}if(V){if(this.options.overflow!=null&&!R.support.shrinkWrapBlocks){var P=this.elem,E=this.options;R.each(["","X","Y"],function(W,X){P.style["overflow"+X]=E.overflow[W]})}this.options.hide&&R(this.elem).hide();if(this.options.hide||this.options.show){for(var t in this.options.curAnim){R.style(this.elem,t,this.options.orig[t])}}this.options.complete.call(this.elem)}return false}else{B=c-this.startTime;this.state=B/this.options.duration;c=this.options.easing||(R.easing.swing?"swing":"linear");this.pos=R.easing[this.options.specialEasing&&this.options.specialEasing[this.prop]||c](this.state,B,0,1,this.options.duration);this.now=this.start+(this.end-this.start)*this.pos;this.update()}return true}};R.extend(R.fx,{tick:function(){for(var t=R.timers,c=0;c<t.length;c++){t[c]()||t.splice(c--,1)}t.length||R.fx.stop()},interval:13,stop:function(){clearInterval(ar);ar=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(c){R.style(c.elem,"opacity",c.now)},_default:function(c){if(c.elem.style&&c.elem.style[c.prop]!=null){c.elem.style[c.prop]=(c.prop==="width"||c.prop==="height"?Math.max(0,c.now):c.now)+c.unit}else{c.elem[c.prop]=c.now}}}});if(R.expr&&R.expr.filters){R.expr.filters.animated=function(c){return R.grep(R.timers,function(t){return c===t.elem}).length}}var a=/^t(?:able|d|h)$/i,az=/^(?:body|html)$/i;R.fn.offset="getBoundingClientRect" in H.documentElement?function(t){var c=this[0],U;if(t){return this.each(function(V){R.offset.setOffset(this,t,V)})}if(!c||!c.ownerDocument){return null}if(c===c.ownerDocument.body){return R.offset.bodyOffset(c)}try{U=c.getBoundingClientRect()}catch(P){}var E=c.ownerDocument,B=E.documentElement;if(!U||!R.contains(B,c)){return U||{top:0,left:0}}c=E.body;E=aW(E);return{top:U.top+(E.pageYOffset||R.support.boxModel&&B.scrollTop||c.scrollTop)-(B.clientTop||c.clientTop||0),left:U.left+(E.pageXOffset||R.support.boxModel&&B.scrollLeft||c.scrollLeft)-(B.clientLeft||c.clientLeft||0)}}:function(X){var W=this[0];if(X){return this.each(function(Y){R.offset.setOffset(this,X,Y)})}if(!W||!W.ownerDocument){return null}if(W===W.ownerDocument.body){return R.offset.bodyOffset(W)}R.offset.initialize();var V,U=W.offsetParent,P=W.ownerDocument,E=P.documentElement,t=P.body;V=(P=P.defaultView)?P.getComputedStyle(W,null):W.currentStyle;for(var B=W.offsetTop,c=W.offsetLeft;(W=W.parentNode)&&W!==t&&W!==E;){if(R.offset.supportsFixedPosition&&V.position==="fixed"){break}V=P?P.getComputedStyle(W,null):W.currentStyle;B-=W.scrollTop;c-=W.scrollLeft;if(W===U){B+=W.offsetTop;c+=W.offsetLeft;if(R.offset.doesNotAddBorder&&!(R.offset.doesAddBorderForTableAndCells&&a.test(W.nodeName))){B+=parseFloat(V.borderTopWidth)||0;c+=parseFloat(V.borderLeftWidth)||0}U=W.offsetParent}if(R.offset.subtractsBorderForOverflowNotVisible&&V.overflow!=="visible"){B+=parseFloat(V.borderTopWidth)||0;c+=parseFloat(V.borderLeftWidth)||0}V=V}if(V.position==="relative"||V.position==="static"){B+=t.offsetTop;c+=t.offsetLeft}if(R.offset.supportsFixedPosition&&V.position==="fixed"){B+=Math.max(E.scrollTop,t.scrollTop);c+=Math.max(E.scrollLeft,t.scrollLeft)}return{top:B,left:c}};R.offset={initialize:function(){var t=H.body,c=H.createElement("div"),U,P,E,B=parseFloat(R.css(t,"marginTop"))||0;R.extend(c.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"});c.innerHTML="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";t.insertBefore(c,t.firstChild);U=c.firstChild;P=U.firstChild;E=U.nextSibling.firstChild.firstChild;this.doesNotAddBorder=P.offsetTop!==5;this.doesAddBorderForTableAndCells=E.offsetTop===5;P.style.position="fixed";P.style.top="20px";this.supportsFixedPosition=P.offsetTop===20||P.offsetTop===15;P.style.position=P.style.top="";U.style.overflow="hidden";U.style.position="relative";this.subtractsBorderForOverflowNotVisible=P.offsetTop===-5;this.doesNotIncludeMarginInBodyOffset=t.offsetTop!==B;t.removeChild(c);R.offset.initialize=R.noop},bodyOffset:function(t){var c=t.offsetTop,B=t.offsetLeft;R.offset.initialize();if(R.offset.doesNotIncludeMarginInBodyOffset){c+=parseFloat(R.css(t,"marginTop"))||0;B+=parseFloat(R.css(t,"marginLeft"))||0}return{top:c,left:B}},setOffset:function(Y,W,V){var U=R.css(Y,"position");if(U==="static"){Y.style.position="relative"}var P=R(Y),E=P.offset(),t=R.css(Y,"top"),B=R.css(Y,"left"),c=U==="absolute"&&R.inArray("auto",[t,B])>-1;U={};var X={};if(c){X=P.position()}t=c?X.top:parseInt(t,10)||0;B=c?X.left:parseInt(B,10)||0;if(R.isFunction(W)){W=W.call(Y,V,E)}if(W.top!=null){U.top=W.top-E.top+t}if(W.left!=null){U.left=W.left-E.left+B}"using" in W?W.using.call(Y,U):P.css(U)}};R.fn.extend({position:function(){if(!this[0]){return null}var t=this[0],c=this.offsetParent(),E=this.offset(),B=az.test(c[0].nodeName)?{top:0,left:0}:c.offset();E.top-=parseFloat(R.css(t,"marginTop"))||0;E.left-=parseFloat(R.css(t,"marginLeft"))||0;B.top+=parseFloat(R.css(c[0],"borderTopWidth"))||0;B.left+=parseFloat(R.css(c[0],"borderLeftWidth"))||0;return{top:E.top-B.top,left:E.left-B.left}},offsetParent:function(){return this.map(function(){for(var c=this.offsetParent||H.body;c&&!az.test(c.nodeName)&&R.css(c,"position")==="static";){c=c.offsetParent}return c})}});R.each(["Left","Top"],function(t,c){var B="scroll"+c;R.fn[B]=function(U){var P=this[0],E;if(!P){return null}if(U!==aB){return this.each(function(){if(E=aW(this)){E.scrollTo(!t?U:R(E).scrollLeft(),t?U:R(E).scrollTop())}else{this[B]=U}})}else{return(E=aW(P))?"pageXOffset" in E?E[t?"pageYOffset":"pageXOffset"]:R.support.boxModel&&E.document.documentElement[B]||E.document.body[B]:P[B]}}});R.each(["Height","Width"],function(t,c){var B=c.toLowerCase();R.fn["inner"+c]=function(){return this[0]?parseFloat(R.css(this[0],B,"padding")):null};R.fn["outer"+c]=function(E){return this[0]?parseFloat(R.css(this[0],B,E?"margin":"border")):null};R.fn[B]=function(U){var P=this[0];if(!P){return U==null?null:this}if(R.isFunction(U)){return this.each(function(V){var W=R(this);W[B](U.call(this,V,W[B]()))})}if(R.isWindow(P)){return P.document.compatMode==="CSS1Compat"&&P.document.documentElement["client"+c]||P.document.body["client"+c]}else{if(P.nodeType===9){return Math.max(P.documentElement["client"+c],P.body["scroll"+c],P.documentElement["scroll"+c],P.body["offset"+c],P.documentElement["offset"+c])}else{if(U===aB){P=R.css(P,B);var E=parseFloat(P);return R.isNaN(E)?P:E}else{return this.css(B,typeof U==="string"?U:U+"px")}}}}})})(window);(function(d,e,f){d.fn.jScrollPane=function(a){function c(br,bc){var bk,ba=this,a2,bF,aK,bD,a7,a1,s,aO,bi,bS,bs,aW,bh,aX,aV,a0,a6,bz,a3,aM,bv,by,bK,bC,bl,aT,bu,bm,aI,bq,bP,aZ,bf,bG=true,bb=true,bQ=false,aU=false,bA=br.clone(false,false).empty(),bN=d.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";bP=br.css("paddingTop")+" "+br.css("paddingRight")+" "+br.css("paddingBottom")+" "+br.css("paddingLeft");aZ=(parseInt(br.css("paddingLeft"),10)||0)+(parseInt(br.css("paddingRight"),10)||0);function bx(j){var l,k,p,n,o,g,i,m;bk=j;if(a2===f){i=br.scrollTop();m=br.scrollLeft();br.css({overflow:"hidden",padding:0});bF=br.innerWidth()+aZ;aK=br.innerHeight();br.width(bF);a2=d('<div class="jspPane" />').css("padding",bP).append(br.children());bD=d('<div class="jspContainer" />').css({width:bF+"px",height:aK+"px"}).append(a2).appendTo(br)}else{br.css("width","");g=br.innerWidth()+aZ!=bF||br.outerHeight()!=aK;if(g){bF=br.innerWidth()+aZ;aK=br.innerHeight();bD.css({width:bF+"px",height:aK+"px"})}if(!g&&bf==a7&&a2.outerHeight()==a1){br.width(bF);return}bf=a7;a2.css("width","");br.width(bF);bD.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}l=a2.clone(false,false).css("position","absolute");k=d('<div style="width:1px; position: relative;" />').append(l);d("body").append(k);a7=Math.max(a2.outerWidth(),l.outerWidth());k.remove();a1=a2.outerHeight();s=a7/bF;aO=a1/aK;bi=aO>1;bS=s>1;if(!(bS||bi)){br.removeClass("jspScrollable");a2.css({top:0,width:bD.width()-aZ});aR();bp();a9();aJ();bH()}else{br.addClass("jspScrollable");p=bk.maintainPosition&&(bh||a0);if(p){n=bU();o=bW()}bR();bw();bn();if(p){bd(n,false);be(o,false)}bg();bJ();bB();if(bk.enableKeyboardNavigation){a8()}if(bk.clickOnTrack){aP()}bt();if(bk.hijackInternalLinks){aS()}}if(bk.autoReinitialise&&!bq){bq=setInterval(function(){bx(bk)},bk.autoReinitialiseDelay)}else{if(!bk.autoReinitialise&&bq){clearInterval(bq)}}i&&br.scrollTop(0)&&be(i,false);m&&br.scrollLeft(0)&&bd(m,false);br.trigger("jsp-initialised",[bS||bi])}function bR(){if(bi){bD.append(d('<div class="jspVerticalBar" />').append(d('<div class="jspCap jspCapTop" />'),d('<div class="jspTrack" />').append(d('<div class="jspDrag" />').append(d('<div class="jspDragTop" />'),d('<div class="jspDragBottom" />'))),d('<div class="jspCap jspCapBottom" />')));a6=bD.find(">.jspVerticalBar");bz=a6.find(">.jspTrack");bs=bz.find(">.jspDrag");if(bk.showArrows){by=d('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",bT(0,-1)).bind("click.jsp",bV);bK=d('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",bT(0,1)).bind("click.jsp",bV);if(bk.arrowScrollOnHover){by.bind("mouseover.jsp",bT(0,-1,by));bK.bind("mouseover.jsp",bT(0,1,bK))}bE(bz,bk.verticalArrowPositions,by,bK)}aM=aK;bD.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){aM-=d(this).outerHeight()});bs.hover(function(){bs.addClass("jspHover")},function(){bs.removeClass("jspHover")}).bind("mousedown.jsp",function(i){d("html").bind("dragstart.jsp selectstart.jsp",bV);bs.addClass("jspActive");var g=i.pageY-bs.position().top;d("html").bind("mousemove.jsp",function(j){a5(j.pageY-g,false)}).bind("mouseup.jsp mouseleave.jsp",bo);return false});aQ()}}function aQ(){bz.height(aM+"px");bh=0;a3=bk.verticalGutter+bz.outerWidth();a2.width(bF-a3-aZ);if(a6.position().left===0){a2.css("margin-left",a3+"px")}}function bw(){if(bS){bD.append(d('<div class="jspHorizontalBar" />').append(d('<div class="jspCap jspCapLeft" />'),d('<div class="jspTrack" />').append(d('<div class="jspDrag" />').append(d('<div class="jspDragLeft" />'),d('<div class="jspDragRight" />'))),d('<div class="jspCap jspCapRight" />')));bC=bD.find(">.jspHorizontalBar");bl=bC.find(">.jspTrack");aX=bl.find(">.jspDrag");if(bk.showArrows){bm=d('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",bT(-1,0)).bind("click.jsp",bV);aI=d('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",bT(1,0)).bind("click.jsp",bV);if(bk.arrowScrollOnHover){bm.bind("mouseover.jsp",bT(-1,0,bm));aI.bind("mouseover.jsp",bT(1,0,aI))}bE(bl,bk.horizontalArrowPositions,bm,aI)}aX.hover(function(){aX.addClass("jspHover")},function(){aX.removeClass("jspHover")}).bind("mousedown.jsp",function(i){d("html").bind("dragstart.jsp selectstart.jsp",bV);aX.addClass("jspActive");var g=i.pageX-aX.position().left;d("html").bind("mousemove.jsp",function(j){a4(j.pageX-g,false)}).bind("mouseup.jsp mouseleave.jsp",bo);return false});aT=bD.innerWidth();bI()}}function bI(){bD.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){aT-=d(this).outerWidth()});bl.width(aT+"px");a0=0}function bn(){if(bS&&bi){var i=bl.outerHeight(),g=bz.outerWidth();aM-=i;d(bC).find(">.jspCap:visible,>.jspArrow").each(function(){aT+=d(this).outerWidth()});aT-=g;aK-=g;bF-=i;bl.parent().append(d('<div class="jspCorner" />').css("width",i+"px"));aQ();bI()}if(bS){a2.width((bD.outerWidth()-aZ)+"px")}a1=a2.outerHeight();aO=a1/aK;if(bS){bu=Math.ceil(1/s*aT);if(bu>bk.horizontalDragMaxWidth){bu=bk.horizontalDragMaxWidth}else{if(bu<bk.horizontalDragMinWidth){bu=bk.horizontalDragMinWidth}}aX.width(bu+"px");aV=aT-bu;bL(a0)}if(bi){bv=Math.ceil(1/aO*aM);if(bv>bk.verticalDragMaxHeight){bv=bk.verticalDragMaxHeight}else{if(bv<bk.verticalDragMinHeight){bv=bk.verticalDragMinHeight}}bs.height(bv+"px");aW=aM-bv;bM(bh)}}function bE(m,k,n,i){var g="before",l="after",j;if(k=="os"){k=/Mac/.test(navigator.platform)?"after":"split"}if(k==g){l=k}else{if(k==l){g=k;j=n;n=i;i=j}}m[g](n)[l](i)}function bT(j,g,i){return function(){bj(j,g,this,i);this.blur();return false}}function bj(l,m,g,j){g=d(g).addClass("jspActive");var k,n,o=true,i=function(){if(l!==0){ba.scrollByX(l*bk.arrowButtonSpeed)}if(m!==0){ba.scrollByY(m*bk.arrowButtonSpeed)}n=setTimeout(i,o?bk.initialDelay:bk.arrowRepeatFreq);o=false};i();k=j?"mouseout.jsp":"mouseup.jsp";j=j||d("html");j.bind(k,function(){g.removeClass("jspActive");n&&clearTimeout(n);n=null;j.unbind(k)})}function aP(){aJ();if(bi){bz.bind("mousedown.jsp",function(j){if(j.originalTarget===f||j.originalTarget==j.currentTarget){var l=d(this),g=l.offset(),k=j.pageY-g.top-bh,n,o=true,i=function(){var q=l.offset(),p=j.pageY-q.top-bv/2,t=aK*bk.scrollPagePercent,r=aW*t/(a1-aK);if(k<0){if(bh-r>p){ba.scrollByY(-t)}else{a5(p)}}else{if(k>0){if(bh+r<p){ba.scrollByY(t)}else{a5(p)}}else{m();return}}n=setTimeout(i,o?bk.initialDelay:bk.trackClickRepeatFreq);o=false},m=function(){n&&clearTimeout(n);n=null;d(document).unbind("mouseup.jsp",m)};i();d(document).bind("mouseup.jsp",m);return false}})}if(bS){bl.bind("mousedown.jsp",function(j){if(j.originalTarget===f||j.originalTarget==j.currentTarget){var l=d(this),g=l.offset(),k=j.pageX-g.left-a0,n,o=true,i=function(){var q=l.offset(),p=j.pageX-q.left-bu/2,t=bF*bk.scrollPagePercent,r=aV*t/(a7-bF);if(k<0){if(a0-r>p){ba.scrollByX(-t)}else{a4(p)}}else{if(k>0){if(a0+r<p){ba.scrollByX(t)}else{a4(p)}}else{m();return}}n=setTimeout(i,o?bk.initialDelay:bk.trackClickRepeatFreq);o=false},m=function(){n&&clearTimeout(n);n=null;d(document).unbind("mouseup.jsp",m)};i();d(document).bind("mouseup.jsp",m);return false}})}}function aJ(){if(bl){bl.unbind("mousedown.jsp")}if(bz){bz.unbind("mousedown.jsp")}}function bo(){d("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp");if(bs){bs.removeClass("jspActive")}if(aX){aX.removeClass("jspActive")}}function a5(g,i){if(!bi){return}if(g<0){g=0}else{if(g>aW){g=aW}}if(i===f){i=bk.animateScroll}if(i){ba.animate(bs,"top",g,bM)}else{bs.css("top",g);bM(g)}}function bM(l){if(l===f){l=bs.position().top}bD.scrollTop(0);bh=l;var i=bh===0,k=bh==aW,j=l/aW,g=-j*(a1-aK);if(bG!=i||bQ!=k){bG=i;bQ=k;br.trigger("jsp-arrow-change",[bG,bQ,bb,aU])}aL(i,k);a2.css("top",g);br.trigger("jsp-scroll-y",[-g,i,k]).trigger("scroll")}function a4(i,g){if(!bS){return}if(i<0){i=0}else{if(i>aV){i=aV}}if(g===f){g=bk.animateScroll}if(g){ba.animate(aX,"left",i,bL)}else{aX.css("left",i);bL(i)}}function bL(l){if(l===f){l=aX.position().left}bD.scrollTop(0);a0=l;var i=a0===0,j=a0==aV,k=l/aV,g=-k*(a7-bF);if(bb!=i||aU!=j){bb=i;aU=j;br.trigger("jsp-arrow-change",[bG,bQ,bb,aU])}aN(i,j);a2.css("left",g);br.trigger("jsp-scroll-x",[-g,i,j]).trigger("scroll")}function aL(i,g){if(bk.showArrows){by[i?"addClass":"removeClass"]("jspDisabled");bK[g?"addClass":"removeClass"]("jspDisabled")}}function aN(i,g){if(bk.showArrows){bm[i?"addClass":"removeClass"]("jspDisabled");aI[g?"addClass":"removeClass"]("jspDisabled")}}function be(g,j){var i=g/(a1-aK);a5(i*aW,j)}function bd(j,g){var i=j/(a7-bF);a4(i*aV,g)}function bO(j,o,g){var q,u,t,v=0,k=0,i,p,m,n,l;try{q=d(j)}catch(r){return}u=q.outerHeight();t=q.outerWidth();bD.scrollTop(0);bD.scrollLeft(0);while(!q.is(".jspPane")){v+=q.position().top;k+=q.position().left;q=q.offsetParent();if(/^body|html$/i.test(q[0].nodeName)){return}}i=bW();p=i+aK;if(v<i||o){n=v-bk.verticalGutter}else{if(v+u>p){n=v-aK+u+bk.verticalGutter}}if(n){be(n,g)}viewportLeft=bU();m=viewportLeft+bF;if(k<viewportLeft||o){l=k-bk.horizontalGutter}else{if(k+t>m){l=k-bF+t+bk.horizontalGutter}}if(l){bd(l,g)}}function bU(){return -a2.position().left}function bW(){return -a2.position().top}function bJ(){bD.unbind(bN).bind(bN,function(j,i,k,m){var l=a0,g=bh;ba.scrollBy(k*bk.mouseWheelSpeed,-m*bk.mouseWheelSpeed,false);return l==a0&&g==bh})}function aR(){bD.unbind(bN)}function bV(){return false}function bg(){a2.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(g){bO(g.target,false)})}function bp(){a2.find(":input,a").unbind("focus.jsp")}function a8(){var g,j;a2.focus(function(){br.focus()});br.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(k){if(k.target!==this){return}var l=a0,m=bh;switch(k.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:g=k.keyCode;i();break;case 35:be(a1-aK);g=null;break;case 36:be(0);g=null;break}j=k.keyCode==g&&l!=a0||m!=bh;return !j}).bind("keypress.jsp",function(k){if(k.keyCode==g){i()}return !j});if(bk.hideFocus){br.css("outline","none");if("hideFocus" in bD[0]){br.attr("hideFocus",true)}}else{br.css("outline","");if("hideFocus" in bD[0]){br.attr("hideFocus",false)}}function i(){var k=a0,l=bh;switch(g){case 40:ba.scrollByY(bk.keyboardSpeed,false);break;case 38:ba.scrollByY(-bk.keyboardSpeed,false);break;case 34:case 32:ba.scrollByY(aK*bk.scrollPagePercent,false);break;case 33:ba.scrollByY(-aK*bk.scrollPagePercent,false);break;case 39:ba.scrollByX(bk.keyboardSpeed,false);break;case 37:ba.scrollByX(-bk.keyboardSpeed,false);break}j=k!=a0||l!=bh;return j}}function a9(){br.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp")}function bt(){if(location.hash&&location.hash.length>1){var i,j;try{i=d(location.hash)}catch(g){return}if(i.length&&a2.find(location.hash)){if(bD.scrollTop()===0){j=setInterval(function(){if(bD.scrollTop()>0){bO(location.hash,true);d(document).scrollTop(bD.position().top);clearInterval(j)}},50)}else{bO(location.hash,true);d(document).scrollTop(bD.position().top)}}}}function bH(){d("a.jspHijack").unbind("click.jsp-hijack").removeClass("jspHijack")}function aS(){bH();d("a[href^=#]").addClass("jspHijack").bind("click.jsp-hijack",function(){var g=this.href.split("#"),i;if(g.length>1){i=g[1];if(i.length>0&&a2.find("#"+i).length>0){bO("#"+i,true);return false}}})}function bB(){var l,m,j,k,i,g=false;bD.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(o){var n=o.originalEvent.touches[0];l=bU();m=bW();j=n.pageX;k=n.pageY;i=false;g=true}).bind("touchmove.jsp",function(n){if(!g){return}var o=n.originalEvent.touches[0],p=a0,q=bh;ba.scrollTo(l+j-o.pageX,m+k-o.pageY);i=i||Math.abs(j-o.pageX)>5||Math.abs(k-o.pageY)>5;return p==a0&&q==bh}).bind("touchend.jsp",function(n){g=false}).bind("click.jsp-touchclick",function(n){if(i){i=false;return false}})}function aY(){var g=bW(),i=bU();br.removeClass("jspScrollable").unbind(".jsp");br.replaceWith(bA.append(a2.children()));bA.scrollTop(g);bA.scrollLeft(i)}d.extend(ba,{reinitialise:function(g){g=d.extend({},bk,g);bx(g)},scrollToElement:function(i,j,g){bO(i,j,g)},scrollTo:function(i,g,j){bd(i,j);be(g,j)},scrollToX:function(i,g){bd(i,g)},scrollToY:function(g,i){be(g,i)},scrollToPercentX:function(i,g){bd(i*(a7-bF),g)},scrollToPercentY:function(i,g){be(i*(a1-aK),g)},scrollBy:function(j,g,i){ba.scrollByX(j,i);ba.scrollByY(g,i)},scrollByX:function(g,j){var k=bU()+g,i=k/(a7-bF);a4(i*aV,j)},scrollByY:function(g,j){var k=bW()+g,i=k/(a1-aK);a5(i*aW,j)},positionDragX:function(g,i){a4(g,i)},positionDragY:function(i,g){a4(i,g)},animate:function(l,i,g,j){var k={};k[i]=g;l.animate(k,{duration:bk.animateDuration,ease:bk.animateEase,queue:false,step:j})},getContentPositionX:function(){return bU()},getContentPositionY:function(){return bW()},getContentWidth:function(){return a7()},getContentHeight:function(){return a1()},getPercentScrolledX:function(){return bU()/(a7-bF)},getPercentScrolledY:function(){return bW()/(a1-aK)},getIsScrollableH:function(){return bS},getIsScrollableV:function(){return bi},getContentPane:function(){return a2},scrollToBottom:function(g){a5(aW,g)},hijackInternalLinks:function(){aS()},destroy:function(){aY()}});bx(bc)}a=d.extend({},d.fn.jScrollPane.defaults,a);d.each(["mouseWheelSpeed","arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){a[this]=a[this]||a.speed});var b;this.each(function(){var j=d(this),i=j.data("jsp");if(i){i.reinitialise(a)}else{i=new c(j,a);j.data("jsp",i)}b=b?b.add(j):j});return b};d.fn.jScrollPane.defaults={showArrows:false,maintainPosition:true,clickOnTrack:true,autoReinitialise:false,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,animateScroll:false,animateDuration:300,animateEase:"linear",hijackInternalLinks:false,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:0,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:false,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:true,hideFocus:false,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:0.8}})(jQuery,this);(function(a){a.prettyPhoto={version:"3.1"};a.fn.prettyPhoto=function(d){d=jQuery.extend({animation_speed:"fast",slideshow:5000,autoplay_slideshow:false,opacity:0.8,show_title:true,allow_resize:true,default_width:500,default_height:344,counter_separator_label:"/",theme:"pp_default",horizontal_padding:20,hideflash:false,wmode:"opaque",autoplay:true,modal:false,overlay_gallery:true,keyboard_shortcuts:true,changepicturecallback:function(){},callback:function(){},ie6_fallback:true,markup:'<div class="pp_pic_holder">       <div class="ppt">&nbsp;</div>       <div class="pp_top">        <div class="pp_left"></div>        <div class="pp_middle"></div>        <div class="pp_right"></div>       </div>       <div class="pp_content_container">        <div class="pp_left">        <div class="pp_right">         <div class="pp_content">          <div class="pp_loaderIcon"></div>          <div class="pp_fade">           <a href="#" class="pp_expand" title="Expand the image">Expand</a>           <div class="pp_hoverContainer">            <a class="pp_next" href="#">next</a>            <a class="pp_previous" href="#">previous</a>           </div>           <div id="pp_full_res"></div>           <div class="pp_details">            <div class="pp_nav">             <a href="#" class="pp_arrow_previous">Previous</a>             <p class="currentTextHolder">0/0</p>             <a href="#" class="pp_arrow_next">Next</a>            </div>            <p class="pp_description"></p>            <a class="pp_close" href="#">Close</a>           </div>          </div>         </div>        </div>        </div>       </div>       <div class="pp_bottom">        <div class="pp_left"></div>        <div class="pp_middle"></div>        <div class="pp_right"></div>       </div>      </div>      <div class="pp_overlay"></div>',gallery_markup:'<div class="pp_gallery">         <a href="#" class="pp_arrow_previous">Previous</a>         <div>          <ul>           {gallery}          </ul>         </div>         <a href="#" class="pp_arrow_next">Next</a>        </div>',image_markup:'<img id="fullResImage" src="{path}" />',flash_markup:'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="{width}" height="{height}"><param name="wmode" value="{wmode}" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="{path}" /><embed src="{path}" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="{width}" height="{height}" wmode="{wmode}"></embed></object>',quicktime_markup:'<object classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" codebase="http://www.apple.com/qtactivex/qtplugin.cab" height="{height}" width="{width}"><param name="src" value="{path}"><param name="autoplay" value="{autoplay}"><param name="type" value="video/quicktime"><embed src="{path}" height="{height}" width="{width}" autoplay="{autoplay}" type="video/quicktime" pluginspage="http://www.apple.com/quicktime/download/"></embed></object>',iframe_markup:'<iframe src ="{path}" width="{width}" height="{height}" frameborder="no"></iframe>',inline_markup:'<div class="pp_inline">{content}</div>',custom_markup:""},d);var l=this,k=false,r,p,q,s,v,w,f=a(window).height(),z=a(window).width(),g;doresize=true,scroll_pos=x();a(window).unbind("resize.prettyphoto").bind("resize.prettyphoto",function(){o();u()});if(d.keyboard_shortcuts){a(document).unbind("keydown.prettyphoto").bind("keydown.prettyphoto",function(A){if(typeof $pp_pic_holder!="undefined"){if($pp_pic_holder.is(":visible")){switch(A.keyCode){case 37:a.prettyPhoto.changePage("previous");A.preventDefault();break;case 39:a.prettyPhoto.changePage("next");A.preventDefault();break;case 27:if(!settings.modal){a.prettyPhoto.close()}A.preventDefault();break}}}})}a.prettyPhoto.initialize=function(){settings=d;if(settings.theme=="pp_default"){settings.horizontal_padding=16}if(settings.ie6_fallback&&a.browser.msie&&parseInt(a.browser.version)==6){settings.theme="light_square"}theRel=a(this).attr("rel");galleryRegExp=/\[(?:.*)\]/;isSet=(galleryRegExp.exec(theRel))?true:false;pp_images=(isSet)?jQuery.map(l,function(B,A){if(a(B).attr("rel").indexOf(theRel)!=-1){return a(B).attr("href")}}):a.makeArray(a(this).attr("href"));pp_titles=(isSet)?jQuery.map(l,function(B,A){if(a(B).attr("rel").indexOf(theRel)!=-1){return(a(B).find("img").attr("alt"))?a(B).find("img").attr("alt"):""}}):a.makeArray(a(this).find("img").attr("alt"));pp_descriptions=(isSet)?jQuery.map(l,function(B,A){if(a(B).attr("rel").indexOf(theRel)!=-1){return(a(B).attr("title"))?a(B).attr("title"):""}}):a.makeArray(a(this).attr("title"));set_position=jQuery.inArray(a(this).attr("href"),pp_images);e(this);if(settings.allow_resize){a(window).bind("scroll.prettyphoto",function(){o()})}a.prettyPhoto.open();return false};a.prettyPhoto.open=function(A){if(typeof settings=="undefined"){settings=d;if(a.browser.msie&&a.browser.version==6){settings.theme="light_square"}pp_images=a.makeArray(arguments[0]);pp_titles=(arguments[1])?a.makeArray(arguments[1]):a.makeArray("");pp_descriptions=(arguments[2])?a.makeArray(arguments[2]):a.makeArray("");isSet=(pp_images.length>1)?true:false;set_position=0;e(A.target)}if(a.browser.msie&&a.browser.version==6){a("select").css("visibility","hidden")}if(settings.hideflash){a("object,embed").css("visibility","hidden")}j(a(pp_images).size());a(".pp_loaderIcon").show();if($ppt.is(":hidden")){$ppt.css("opacity",0).show()}$pp_overlay.show().fadeTo(settings.animation_speed,settings.opacity);$pp_pic_holder.find(".currentTextHolder").text((set_position+1)+settings.counter_separator_label+a(pp_images).size());$pp_pic_holder.find(".pp_description").show().html(unescape(pp_descriptions[set_position]));movie_width=(parseFloat(b("width",pp_images[set_position])))?b("width",pp_images[set_position]):settings.default_width.toString();movie_height=(parseFloat(b("height",pp_images[set_position])))?b("height",pp_images[set_position]):settings.default_height.toString();if(movie_height.indexOf("%")!=-1){movie_height=parseFloat((a(window).height()*parseFloat(movie_height)/100)-150);k=true}if(movie_width.indexOf("%")!=-1){movie_width=parseFloat((a(window).width()*parseFloat(movie_width)/100)-150);k=true}$pp_pic_holder.fadeIn(function(){(settings.show_title&&pp_titles[set_position]!=""&&typeof pp_titles[set_position]!="undefined")?$ppt.html(unescape(pp_titles[set_position])):$ppt.html("&nbsp;");imgPreloader="";skipInjection=false;switch(y(pp_images[set_position])){case"image":imgPreloader=new Image();nextImage=new Image();if(isSet&&set_position<a(pp_images).size()-1){nextImage.src=pp_images[set_position+1]}prevImage=new Image();if(isSet&&pp_images[set_position-1]){prevImage.src=pp_images[set_position-1]}$pp_pic_holder.find("#pp_full_res")[0].innerHTML=settings.image_markup.replace(/{path}/g,pp_images[set_position]);imgPreloader.onload=function(){r=n(imgPreloader.width,imgPreloader.height);i()};imgPreloader.onerror=function(){alert("Image cannot be loaded. Make sure the path is correct and image exist.");a.prettyPhoto.close()};imgPreloader.src=pp_images[set_position];break;case"youtube":r=n(movie_width,movie_height);movie="http://www.youtube.com/embed/"+b("v",pp_images[set_position]);if(settings.autoplay){movie+="?autoplay=1"}toInject=settings.iframe_markup.replace(/{width}/g,r["width"]).replace(/{height}/g,r["height"]).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,movie);break;case"vimeo":r=n(movie_width,movie_height);movie_id=pp_images[set_position];var C=/http:\/\/(www\.)?vimeo.com\/(\d+)/;var B=movie_id.match(C);movie="http://player.vimeo.com/video/"+B[2]+"?title=0&amp;byline=0&amp;portrait=0";if(settings.autoplay){movie+="&autoplay=1;"}vimeo_width=r["width"]+"/embed/?moog_width="+r["width"];toInject=settings.iframe_markup.replace(/{width}/g,vimeo_width).replace(/{height}/g,r["height"]).replace(/{path}/g,movie);break;case"quicktime":r=n(movie_width,movie_height);r["height"]+=15;r["contentHeight"]+=15;r["containerHeight"]+=15;toInject=settings.quicktime_markup.replace(/{width}/g,r["width"]).replace(/{height}/g,r["height"]).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,pp_images[set_position]).replace(/{autoplay}/g,settings.autoplay);break;case"flash":r=n(movie_width,movie_height);flash_vars=pp_images[set_position];flash_vars=flash_vars.substring(pp_images[set_position].indexOf("flashvars")+10,pp_images[set_position].length);filename=pp_images[set_position];filename=filename.substring(0,filename.indexOf("?"));toInject=settings.flash_markup.replace(/{width}/g,r["width"]).replace(/{height}/g,r["height"]).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,filename+"?"+flash_vars);break;case"iframe":r=n(movie_width,movie_height);frame_url=pp_images[set_position];frame_url=frame_url.substr(0,frame_url.indexOf("iframe")-1);toInject=settings.iframe_markup.replace(/{width}/g,r["width"]).replace(/{height}/g,r["height"]).replace(/{path}/g,frame_url);break;case"ajax":doresize=false;r=n(movie_width,movie_height);doresize=true;skipInjection=true;a.get(pp_images[set_position],function(D){toInject=settings.inline_markup.replace(/{content}/g,D);$pp_pic_holder.find("#pp_full_res")[0].innerHTML=toInject;i()});break;case"custom":r=n(movie_width,movie_height);toInject=settings.custom_markup;break;case"inline":myClone=a(pp_images[set_position]).clone().append('<br clear="all" />').css({"width":settings.default_width}).wrapInner('<div id="pp_full_res"><div class="pp_inline"></div></div>').appendTo(a("body")).show();doresize=false;r=n(a(myClone).width(),a(myClone).height());doresize=true;a(myClone).remove();toInject=settings.inline_markup.replace(/{content}/g,a(pp_images[set_position]).html());break}if(!imgPreloader&&!skipInjection){$pp_pic_holder.find("#pp_full_res")[0].innerHTML=toInject;i()}});return false};a.prettyPhoto.changePage=function(A){currentGalleryPage=0;if(A=="previous"){set_position--;if(set_position<0){set_position=a(pp_images).size()-1}}else{if(A=="next"){set_position++;if(set_position>a(pp_images).size()-1){set_position=0}}else{set_position=A}}if(!doresize){doresize=true}a(".pp_contract").removeClass("pp_contract").addClass("pp_expand");m(function(){a.prettyPhoto.open()})};a.prettyPhoto.changeGalleryPage=function(A){if(A=="next"){currentGalleryPage++;if(currentGalleryPage>totalPage){currentGalleryPage=0}slide_speed=settings.animation_speed}else{if(A=="previous"){currentGalleryPage--;if(currentGalleryPage<0){currentGalleryPage=totalPage}slide_speed=settings.animation_speed}else{currentGalleryPage=A;slide_speed=0}}slide_to=currentGalleryPage*(itemsPerPage*itemWidth);itemsToSlide=(currentGalleryPage==totalPage)?pp_images.length-((totalPage)*itemsPerPage):itemsPerPage;$pp_gallery.find("ul").animate({left:-slide_to},slide_speed)};a.prettyPhoto.startSlideshow=function(){if(typeof g=="undefined"){$pp_pic_holder.find(".pp_play").unbind("click").removeClass("pp_play").addClass("pp_pause").click(function(){a.prettyPhoto.stopSlideshow();return false});g=setInterval(a.prettyPhoto.startSlideshow,settings.slideshow)}else{a.prettyPhoto.changePage("next")}};a.prettyPhoto.stopSlideshow=function(){$pp_pic_holder.find(".pp_pause").unbind("click").removeClass("pp_pause").addClass("pp_play").click(function(){a.prettyPhoto.startSlideshow();return false});clearInterval(g);g=undefined};a.prettyPhoto.close=function(){if($pp_overlay.is(":animated")){return}a.prettyPhoto.stopSlideshow();$pp_pic_holder.stop().find("object,embed").css("visibility","hidden");a("div.pp_pic_holder,div.ppt,.pp_fade").fadeOut(settings.animation_speed,function(){a(this).remove()});$pp_overlay.fadeOut(settings.animation_speed,function(){if(a.browser.msie&&a.browser.version==6){a("select").css("visibility","visible")}if(settings.hideflash){a("object,embed").css("visibility","visible")}a(this).remove();a(window).unbind("scroll.prettyphoto");settings.callback();doresize=true;p=false;delete settings})};function i(){a(".pp_loaderIcon").hide();$ppt.fadeTo(settings.animation_speed,1);projectedTop=scroll_pos["scrollTop"]+((f/2)-(r["containerHeight"]/2));if(projectedTop<0){projectedTop=0}$pp_pic_holder.find(".pp_content").animate({height:r["contentHeight"],width:r["contentWidth"]},settings.animation_speed);$pp_pic_holder.animate({"top":projectedTop,"left":(z/2)-(r["containerWidth"]/2),width:r["containerWidth"]},settings.animation_speed,function(){$pp_pic_holder.find(".pp_hoverContainer,#fullResImage").height(r["height"]).width(r["width"]);$pp_pic_holder.find(".pp_fade").fadeIn(settings.animation_speed);if(isSet&&y(pp_images[set_position])=="image"){$pp_pic_holder.find(".pp_hoverContainer").show()}else{$pp_pic_holder.find(".pp_hoverContainer").hide()}if(r["resized"]){a("a.pp_expand,a.pp_contract").show()}else{a("a.pp_expand").hide()}if(settings.autoplay_slideshow&&!g&&!p){a.prettyPhoto.startSlideshow()}settings.changepicturecallback();p=true});c()}function m(A){$pp_pic_holder.find("#pp_full_res object,#pp_full_res embed").css("visibility","hidden");$pp_pic_holder.find(".pp_fade").fadeOut(settings.animation_speed,function(){a(".pp_loaderIcon").show();A()})}function j(A){(A>1)?a(".pp_nav").show():a(".pp_nav").hide()}function n(B,A){resized=false;t(B,A);imageWidth=B,imageHeight=A;if(((w>z)||(v>f))&&doresize&&settings.allow_resize&&!k){resized=true,fitting=false;while(!fitting){if((w>z)){imageWidth=(z-200);imageHeight=(A/B)*imageWidth}else{if((v>f)){imageHeight=(f-200);imageWidth=(B/A)*imageHeight}else{fitting=true}}v=imageHeight,w=imageWidth}t(imageWidth,imageHeight);if((w>z)||(v>f)){n(w,v)}}return{width:Math.floor(imageWidth),height:Math.floor(imageHeight),containerHeight:Math.floor(v),containerWidth:Math.floor(w)+(settings.horizontal_padding*2),contentHeight:Math.floor(q),contentWidth:Math.floor(s),resized:resized}}function t(B,A){B=parseFloat(B);A=parseFloat(A);$pp_details=$pp_pic_holder.find(".pp_details");$pp_details.width(B);detailsHeight=parseFloat($pp_details.css("marginTop"))+parseFloat($pp_details.css("marginBottom"));$pp_details=$pp_details.clone().addClass(settings.theme).width(B).appendTo(a("body")).css({"position":"absolute","top":-10000});detailsHeight+=$pp_details.height();detailsHeight=(detailsHeight<=34)?36:detailsHeight;if(a.browser.msie&&a.browser.version==7){detailsHeight+=8}$pp_details.remove();$pp_title=$pp_pic_holder.find(".ppt");$pp_title.width(B);titleHeight=parseFloat($pp_title.css("marginTop"))+parseFloat($pp_title.css("marginBottom"));$pp_title=$pp_title.clone().appendTo(a("body")).css({"position":"absolute","top":-10000});titleHeight+=$pp_title.height();$pp_title.remove();q=A+detailsHeight;s=B;v=q+titleHeight+$pp_pic_holder.find(".pp_top").height()+$pp_pic_holder.find(".pp_bottom").height();w=B}function y(A){if(A.match(/youtube\.com\/watch/i)){return"youtube"}else{if(A.match(/vimeo\.com/i)){return"vimeo"}else{if(A.match(/\b.mov\b/i)){return"quicktime"}else{if(A.match(/\b.swf\b/i)){return"flash"}else{if(A.match(/\biframe=true\b/i)){return"iframe"}else{if(A.match(/\bajax=true\b/i)){return"ajax"}else{if(A.match(/\bcustom=true\b/i)){return"custom"}else{if(A.substr(0,1)=="#"){return"inline"}else{return"image"}}}}}}}}}function o(){if(doresize&&typeof $pp_pic_holder!="undefined"){scroll_pos=x();contentHeight=$pp_pic_holder.height(),contentwidth=$pp_pic_holder.width();projectedTop=(f/2)+scroll_pos["scrollTop"]-(contentHeight/2);if(projectedTop<0){projectedTop=0}if(contentHeight>f){return}$pp_pic_holder.css({"top":projectedTop,"left":(z/2)+scroll_pos["scrollLeft"]-(contentwidth/2)})}}function x(){if(self.pageYOffset){return{scrollTop:self.pageYOffset,scrollLeft:self.pageXOffset}}else{if(document.documentElement&&document.documentElement.scrollTop){return{scrollTop:document.documentElement.scrollTop,scrollLeft:document.documentElement.scrollLeft}}else{if(document.body){return{scrollTop:document.body.scrollTop,scrollLeft:document.body.scrollLeft}}}}}function u(){f=a(window).height(),z=a(window).width();if(typeof $pp_overlay!="undefined"){$pp_overlay.height(a(document).height()).width(z)}}function c(){if(isSet&&settings.overlay_gallery&&y(pp_images[set_position])=="image"&&(settings.ie6_fallback&&!(a.browser.msie&&parseInt(a.browser.version)==6))){itemWidth=52+5;navWidth=(settings.theme=="facebook"||settings.theme=="pp_default")?50:30;itemsPerPage=Math.floor((r["containerWidth"]-100-navWidth)/itemWidth);itemsPerPage=(itemsPerPage<pp_images.length)?itemsPerPage:pp_images.length;totalPage=Math.ceil(pp_images.length/itemsPerPage)-1;if(totalPage==0){navWidth=0;$pp_gallery.find(".pp_arrow_next,.pp_arrow_previous").hide()}else{$pp_gallery.find(".pp_arrow_next,.pp_arrow_previous").show()}galleryWidth=itemsPerPage*itemWidth;fullGalleryWidth=pp_images.length*itemWidth;$pp_gallery.css("margin-left",-((galleryWidth/2)+(navWidth/2))).find("div:first").width(galleryWidth+5).find("ul").width(fullGalleryWidth).find("li.selected").removeClass("selected");goToPage=(Math.floor(set_position/itemsPerPage)<totalPage)?Math.floor(set_position/itemsPerPage):totalPage;a.prettyPhoto.changeGalleryPage(goToPage);$pp_gallery_li.filter(":eq("+set_position+")").addClass("selected")}else{$pp_pic_holder.find(".pp_content").unbind("mouseenter mouseleave")}}function e(A){a("body").append(settings.markup);$pp_pic_holder=a(".pp_pic_holder"),$ppt=a(".ppt"),$pp_overlay=a("div.pp_overlay");if(isSet&&settings.overlay_gallery){currentGalleryPage=0;toInject="";for(var B=0;B<pp_images.length;B++){if(!pp_images[B].match(/\b(jpg|jpeg|png|gif)\b/gi)){classname="default";img_src=""}else{classname="";img_src=pp_images[B]}toInject+="<li class='"+classname+"'><a href='#'><img src='"+img_src+"' width='50' alt='' /></a></li>"}toInject=settings.gallery_markup.replace(/{gallery}/g,toInject);$pp_pic_holder.find("#pp_full_res").after(toInject);$pp_gallery=a(".pp_pic_holder .pp_gallery"),$pp_gallery_li=$pp_gallery.find("li");$pp_gallery.find(".pp_arrow_next").click(function(){a.prettyPhoto.changeGalleryPage("next");a.prettyPhoto.stopSlideshow();return false});$pp_gallery.find(".pp_arrow_previous").click(function(){a.prettyPhoto.changeGalleryPage("previous");a.prettyPhoto.stopSlideshow();return false});$pp_pic_holder.find(".pp_content").hover(function(){$pp_pic_holder.find(".pp_gallery:not(.disabled)").fadeIn()},function(){$pp_pic_holder.find(".pp_gallery:not(.disabled)").fadeOut()});itemWidth=52+5;$pp_gallery_li.each(function(C){a(this).find("a").click(function(){a.prettyPhoto.changePage(C);a.prettyPhoto.stopSlideshow();return false})})}if(settings.slideshow){$pp_pic_holder.find(".pp_nav").prepend('<a href="#" class="pp_play">Play</a>');$pp_pic_holder.find(".pp_nav .pp_play").click(function(){a.prettyPhoto.startSlideshow();return false})}$pp_pic_holder.attr("class","pp_pic_holder "+settings.theme);$pp_overlay.css({"opacity":0,"height":a(document).height(),"width":a(window).width()}).bind("click",function(){if(!settings.modal){a.prettyPhoto.close()}});a("a.pp_close").bind("click",function(){a.prettyPhoto.close();return false});a("a.pp_expand").bind("click",function(C){if(a(this).hasClass("pp_expand")){a(this).removeClass("pp_expand").addClass("pp_contract");doresize=false}else{a(this).removeClass("pp_contract").addClass("pp_expand");doresize=true}m(function(){a.prettyPhoto.open()});return false});$pp_pic_holder.find(".pp_previous, .pp_nav .pp_arrow_previous").bind("click",function(){a.prettyPhoto.changePage("previous");a.prettyPhoto.stopSlideshow();return false});$pp_pic_holder.find(".pp_next, .pp_nav .pp_arrow_next").bind("click",function(){a.prettyPhoto.changePage("next");a.prettyPhoto.stopSlideshow();return false});o()}return this.unbind("click.prettyphoto").bind("click.prettyphoto",a.prettyPhoto.initialize)};function b(e,d){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c="[\\?&]"+e+"=([^&#]*)";var g=new RegExp(c);var f=g.exec(d);return(f==null)?"":f[1]}})(jQuery);afStudio.CodeEditor=Ext.extend(Ext.Window,{initComponent:function(){this.createRegions();var a={title:"Code Browser",layout:"border",width:"100%",height:Ext.getBody().getViewSize().height-25,y:25,closable:true,draggable:true,resizable:false,bodyBorder:false,border:false,items:[this.westPanel,this.centerPanel],buttonAlign:"center",buttons:[{text:"Cancel",scope:this,handler:this.cancel}]};Ext.apply(this,Ext.apply(this.initialConfig,a));afStudio.CodeEditor.superclass.initComponent.apply(this,arguments);Ext.EventManager.on(window,"resize",this.updateCodeBrowserHeight,this)},updateCodeBrowserHeight:function(){this.setHeight(Ext.getBody().getViewSize().height-25)},onDestroy:function(){Ext.EventManager.un(window,"resize",this.updateCodeBrowserHeight,this);afStudio.codeEditor=false;afStudio.CodeEditor.superclass.onDestroy.call(this)},createRegions:function(){this.westPanel=new Ext.ux.FileTreePanel({url:afStudioWSUrls.getFiletreeUrl,title:"Files",iconCls:"icon-models",region:"west",split:true,collapsible:true,loadMask:true,width:220,rootText:"Project",rootPath:"root",newfileText:"newFile.php",maxFileSize:524288*2*10,autoScroll:true,enableProgress:false,fileCt:this,fileOpenSingleClick:true});this.codeEditor=new Ext.ux.AceComponent();this.centerPanel=new Ext.Panel({region:"center",layout:"fit",items:this.codeEditor,tbar:[{text:"Save",iconCls:"icon-save",scope:this,handler:this.save}]})},save:function(){var a=this,b=this.codeEditor;afStudio.xhr.executeAction({url:afStudioWSUrls.getFilecontentUrl,params:{file:b.file,code:b.getCode()},scope:a,logMessage:String.format("CodeEditor file [{0}] was saved",b.file)})},cancel:function(){this.close()},openFile:function(a,b){if(b!=this.codeEditor.file){this.codeEditor.loadFile(b)}},renameFile:function(b,d,a){var c=this.codeEditor;if(c.file==a){c.setFile(d)}},deleteFile:function(a){this.codeEditor.setCode("")}});