Ext.BLANK_IMAGE_URL="/appFlowerPlugin/extjs-3/resources/images/default/s.gif";Ext.state.Manager.setProvider(new Ext.state.CookieProvider());Ext.ns("afStudio");var afStudio=function(){return{initAjaxRequestComplete:function(){Ext.Ajax.on("requestcomplete",function(c,f,b){var a;try{a=Ext.decode(f.responseText)}catch(d){if(b.jsonResponse){afStudio.Msg.error("Response cannot be decoded",String.format("<u>url</u>: <b>{0}</b> <br/>{1}",b.url,f.responseText))}return}if(!Ext.isEmpty(a)&&!Ext.isEmpty(a.redirect)){location.href=a.redirect}})},initDataProxyErrorsHandling:function(){var a=function(c){var b=c.message||c.content||c.msg||c.errors;return Ext.isArray(b)?b.join(""):b};Ext.data.DataProxy.on("exception",function(e,f,c,m,d,j){var k,g=String.format("Request Failed {0}",m.url);if(f=="response"){var b=Ext.decode(d.responseText);if(d.status==200){k=a(b)||"The remote-request succeeded but the reader could not read the response"}else{k=String.format("Server side error <br/> status code: {0}, message: {1}",b.status,b.statusText||"---")}}else{k=a(d.raw)}afStudio.Msg.error(g,k)})},setConsole:function(a){afStudio.cli.CommandLineMgr.setConsole(a)},updateConsole:function(a){afStudio.cli.CommandLineMgr.updateConsole(a)},log:function(b,a){a=a||false;Ext.Ajax.request({url:afStudioWSUrls.getNotificationsUrl(),method:"POST",params:{cmd:"set",message:b,messageType:a},callback:function(d,e,c){c=Ext.decode(c.responseText);if(!e){afStudio.Msg.error("Failure","Server-side failure with status code: "+c.status)}}})},getViewport:function(){return this.vp},getRecentProjects:function(){var a=Ext.decode(Ext.util.Cookies.get("appFlowerStudioRecentProjects"))||[];recentProject=a.reverse();return a},addCurrentProject:function(){var a=Ext.decode(Ext.util.Cookies.get("appFlowerStudioRecentProjects"))||[];Ext.Ajax.request({url:window.afStudioWSUrls.getConfigureProjectUrl(),success:function(b,d){var b=Ext.decode(b.responseText);var e={};e.text=b.data.name;e.url=b.data.url+"/studio";Ext.each(a,function(g,f){if(g.url==e.url){delete a[f]}});a[a.length]=e;var c=new Date();c.setDate(c.getDate()+30);Ext.util.Cookies.set("appFlowerStudioRecentProjects",Ext.encode(a),c,"/","")}})},init:function(){Ext.QuickTips.init();Ext.apply(Ext.QuickTips.getQuickTip(),{trackMouse:true});Ext.form.Field.prototype.msgTarget="side";this.initAjaxRequestComplete();this.initDataProxyErrorsHandling();Ext.Ajax.timeout=300000;this.tb=new afStudio.viewport.StudioToolbar();this.vp=new afStudio.viewport.StudioViewport();afStudio.Cli.init();afStudio.Logger.mode=afStudio.Logger.OFF;this.addCurrentProject();if(Ext.util.Cookies.get("appFlowerStudioDontShowWelcomePopup")!="true"){new afStudio.Welcome().show()}},createSlug:function(d){d=d.toLowerCase();var b={a:/\u00e1/g,e:/u00e9/g,i:/\u00ed/g,o:/\u00f3/g,u:/\u00fa/g,n:/\u00f1/g};for(var c in b){d=d.replace(b[c],c)}var e=d.replace(/\s/g,"-");var a=e.replace(/[^a-zA-Z0-9\-\_]/g,"");a=a.toLowerCase();a=a.replace(/-+/g,"-");a=a.replace(/(^-)|(-$)/g,"");return a}}}();Ext.applyIf(Array.prototype,{dragUp:function(f,e){if(f<e){throw new RangeError('"dragUp": "from" index should be greater than "to"')}var d=this[f];for(var b=0,c=f-e,a=f;b<c;b++,a--){this[a]=this[a-1]}this[e]=d},dragDown:function(f,e){if(f>e){throw new RangeError('"dragDown": "from" index should be less than "to"')}var d=this[f];for(var b=0,c=e-f,a=f;b<c;b++,a++){this[a]=this[a+1]}this[e]=d}});Ext.applyIf(String.prototype,{ucfirst:function(){return this.substr(0,1).toUpperCase()+this.substr(1)},bool:function(){return(/^true$/i).test(this)}});afStudio.xhr={executeAction:function(c){var d=this,a=c.showNoteOnSuccess===false?false:true;if(c.mask){afStudio.vp.mask(c.mask)}var b=function(){if(c.mask){c.mask.region?afStudio.vp.unmask(c.mask.region):afStudio.vp.unmask()}};Ext.Ajax.request({url:c.url,params:c.params,scope:c.scope?c.scope:d,jsonResponse:true,success:function(m,g){b();try{var f=Ext.decode(m.responseText)}catch(k){return}var j=f.message||f.content||(f.success?"Operation was successfully processed!":"Error occured during action execution.");if(f.success){if(Ext.isFunction(c.run)){Ext.util.Functions.createDelegate(c.run,this,[f,g],false)()}if(f.console){afStudio.updateConsole(f.console)}if(c.logMessage){this.fireEvent("logmessage",this,c.logMessage)}if(a){afStudio.Msg.info(j)}}else{if(Ext.isFunction(c.error)){Ext.util.Functions.createDelegate(c.error,this,[f,g],false)()}afStudio.Msg.warning(j)}},failure:function(j,f){b();if(Ext.isFunction(c.error)){Ext.util.Functions.createDelegate(c.error,this,[j,f],false)()}var g=String.format("Status code: {0} <br /> Message: {1}",j.status,j.statusText||"none"),e="Server communication failure";afStudio.Msg.error(e,g)}})}};Ext.ns("afStudio");afStudio.WSUrlsClass=function(){};afStudio.WSUrlsClass=Ext.extend(afStudio.WSUrlsClass,{helpUrl:"http://www.appflower.com/cms/learningcenter",welcomeWinUrl:"/appFlowerStudio/welcome",modelListUrl:"/appFlowerStudio/models",getFiletreeUrl:"/appFlowerStudio/filetree",moduleListUrl:"/afsModuleManager/getList",moduleGroupedUrl:"/afsModuleManager/getGrouped",moduleAddUrl:"/afsModuleManager/add",moduleRenameUrl:"/afsModuleManager/rename",moduleDeleteUrl:"/afsModuleManager/delete",widgetRenameUrl:"/afsModuleManager/renameView",widgetDeleteUrl:"/afsModuleManager/deleteView",widgetGenerateUrl:"afsWidgetBuilder/generateWidget",widgetSetAsHomepage:"/afsModuleManager/setAsHomepage",pageSetAsHomepage:"/afsLayoutBuilder/setAsHomepage",getModuleWidgetsUrl:function(){return this.buildUrlFor("/appFlowerStudio/moduleWidgets")},widgetPreviewUrl:"/appFlowerStudio/preview",widgetUrl:"afsLayoutBuilder/getWidget",layoutSaveUrl:"afsLayoutBuilder/save",pluginListUrl:"/afsPluginManager/getList",pluginAddUrl:"/afsPluginManager/add",pluginRenameUrl:"/afsPluginManager/rename",pluginDeleteUrl:"/afsPluginManager/delete",widgetGetDefinitionUrl:"/afsWidgetBuilder/getWidget",widgetSaveDefinitionUrl:"/afsWidgetBuilder/saveWidget",getFilecontentUrl:"/appFlowerStudio/filecontent",getDebugUrl:function(){return this.buildUrlFor("/appFlowerStudio/debug")},getNotificationsUrl:function(){return this.buildUrlFor("/appFlowerStudio/notifications")},getConsoleUrl:function(){return this.buildUrlFor("/appFlowerStudio/console")},getConfigureProjectUrl:function(){return this.buildUrlFor("/appFlowerStudio/configureProject")},getConfigureDatabaseUrl:function(){return this.buildUrlFor("/appFlowerStudio/configureDatabase")},getLoadDatabaseConnectionSettingsUrl:function(){return this.buildUrlFor("/appFlowerStudio/loadDatabaseConnectionSettings")},dbQueryDatabaseListUrl:"/afsDatabaseQuery/databaseList",dbQueryQueryUrl:"/afsDatabaseQuery/query",dbQueryComplexQueryUrl:"/afsDatabaseQuery/complexQuery",getModelGridDataReadUrl:function(a){return this.buildUrlFor("/afsModelGridData/read?model="+a)},getModelGridDataCreateUrl:function(a){return this.buildUrlFor("/afsModelGridData/create?model="+a)},getModelGridDataUpdateUrl:function(a){return this.buildUrlFor("/afsModelGridData/update?model="+a)},getModelGridDataDeleteUrl:function(a){return this.buildUrlFor("/afsModelGridData/delete?model="+a)},getTemplateSelectorUrl:function(){return this.buildUrlFor("/appFlowerStudio/templateSelector")},getHelperFileSaveUrl:function(){return this.buildUrlFor("/appFlowerStudio/helperFileSave")},getCheckHelperFileExistUrl:function(){return this.buildUrlFor("/appFlowerStudio/checkHelperFileExist")},getCheckUserExistUrl:function(){return this.buildUrlFor("/afsUserManager/checkUserExist")},project:"/appFlowerStudio/project",exportUrl:"/appFlowerStudio/export",buildUrlFor:function(a){return a}});afStudioWSUrls=new afStudio.WSUrlsClass();Ext.ns("afStudio.log");afStudio.log.Console=(function(){return{debug:function(){console.debug.apply(console,arguments)},info:function(){console.log.apply(console,arguments)},error:function(){console.error.apply(console,arguments)}}})();Ext.ns("afStudio.log");afStudio.log.Logger=(function(){var a=afStudio.log.Console;return{DEBUG:"debug",INFO:"info",ERROR:"error",OFF:"off",mode:"debug",log:function(g,f){var c=[this.DEBUG,this.INFO,this.ERROR],e=c.concat(this.OFF),d=e.indexOf(this.mode),b=c.indexOf(g);if(b>=d&&!Ext.isEmpty(f)){a[g].apply(this,f)}},debug:function(){this.log("debug",arguments)},info:function(){this.log("info",arguments)},error:function(){this.log("error",arguments)},getLogger:function(){return a},setLogger:function(b){a=b}}})();afStudio.Logger=afStudio.log.Logger;Ext.grid.CheckColumn=function(a){Ext.apply(this,a);if(!this.id){this.id=Ext.id()}this.renderer=this.renderer.createDelegate(this)};Ext.grid.CheckColumn.prototype={init:function(a){this.grid=a;this.grid.on("render",function(){var b=this.grid.getView();b.mainBody.on("mousedown",this.onMouseDown,this)},this)},onMouseDown:function(d,c){if(c.className&&c.className.indexOf("x-grid3-cc-"+this.id)!=-1){d.stopEvent();var b=this.grid.getView().findRowIndex(c);var a=this.grid.store.getAt(b);a.set(this.dataIndex,!a.data[this.dataIndex])}},renderer:function(b,c,a){c.css+=" x-grid3-check-col-td";return'<div class="x-grid3-check-col'+(b?"-on":"")+" x-grid3-cc-"+this.id+'">&#160;</div>'}};Ext.ux.WidgetFieldDropZone=Ext.extend(Ext.dd.DropZone,{constructor:function(){},scroller:"div.greenborder",init:function(a){if(a.rendered){this.panel=a;Ext.ux.WidgetFieldDropZone.superclass.constructor.call(this,this.panel.body)}else{a.on("render",this.init,this)}},getTargetFromEvent:function(b){var a=b.getTarget(this.scroller);if(a){return{node:a}}},onNodeEnter:function(k,a,j,g){delete this.dropOK;if(!k){return}var d=g.field;if(!d){return}var c=k;this.dropOK=true;var b=Ext.fly(c);b.addClass("x-drop-target-active")},onNodeOver:function(d,a,c,b){return this.dropOK?this.dropAllowed:this.dropNotAllowed},onNodeOut:function(d,a,c,b){Ext.fly(d.node).removeClass("x-drop-target-active")},onNodeDrop:function(k,q,m,d){if(this.dropOK){var j=d.field;if(!j){return false}var p=Ext.getCmp(j.id);var a=p.ownerCt;var o=a.ownerCt;var c=k.node;var g=Ext.fly(c);var n=g.findParent('DIV[class*="x-box-item"]',5);o.remove(a,false);var b=Ext.getCmp(n.id);b.add(a);b.doLayout();return true}}});Ext.ux.WidgetFieldDragZone=Ext.extend(Ext.dd.DragZone,{constructor:function(){},init:function(a){if(a.nodeType){Ext.ux.WidgetFieldDragZone.superclass.init.apply(this,arguments)}else{if(a.rendered){Ext.ux.WidgetFieldDragZone.superclass.constructor.call(this,a.getEl());var b=Ext.fly(a.getEl()).select("input");b.unselectable()}else{a.on("afterlayout",this.init,this,{single:true})}}},scroll:false,getDragData:function(c){var a=c.getTarget("input");if(a){c.stopEvent();if(Ext.isOpera){Ext.fly(a).on("mousemove",function(d){a.style.visibility="hidden";(function(){a.style.visibility=""}).defer(1)},null,{single:true})}var b=Ext.getCmp(a.id);var g=document.createElement("div");g.className="x-form-text";g.appendChild(document.createTextNode(a.value));Ext.fly(g).setWidth(b.getEl().getWidth());return{field:b,ddel:g}}},getRepairXY:function(){return this.dragData.field.getEl().getXY()}});Ext.override(Ext.BoxComponent,{initComponent:function(){Ext.BoxComponent.superclass.initComponent.apply(this,arguments);this.addEvents("resize","move","logmessage");this.on("logmessage",this.onLogMessage,this)},onLogMessage:function(b,a){afStudio.log(a,"afStudioChange")}});Ext.ns("Ext.ux");Ext.ux.TabMenu=function(){var a,c,e,b;this.init=function(f){a=f;a.on("contextmenu",d)};function d(j,g,k){if(!c){c=new Ext.menu.Menu([{id:a.id+"-save",text:"Save",iconCls:"icon-file-save",handler:function(){Ext.Ajax.request({url:b.fileContentUrl,method:"post",params:{"file":b.file,"code":b.getCode()},success:function(n,o){Ext.Msg.alert("Success","The file was saved !")},failure:function(){Ext.Msg.alert("Failure","The server can't save the file !")}})}},{id:a.id+"-close",text:"Close Tab",iconCls:"icon-file-close",handler:function(){a.remove(e)}},{id:a.id+"-close-others",text:"Close Other Tabs",iconCls:"icon-file-close-others",handler:function(){a.items.each(function(n){if(n.closable&&n!=e){a.remove(n)}})}}])}e=g;if(e.items&&e.items.items[0]&&e.items.items[0].code){b=e.items.items[0]}else{b=e}var f=c.items;f.get(a.id+"-close").setDisabled(!g.closable);var m=true;a.items.each(function(){if(this!=g&&this.closable){m=false;return false}});if(g.itemId=="security"||g.itemId=="designer"){f.get(a.id+"-save").setDisabled(true)}else{f.get(a.id+"-save").setDisabled(false)}f.get(a.id+"-close-others").setDisabled(m);c.showAt(k.getPoint())}};Ext.override(Ext.Element,(function(){var f=document,c="scrollLeft",e="scrollTop",d=/^(scroll|resize|load|unload|abort|error)$/,b=/^(click|dblclick|mousedown|mouseup|mouseover|mouseout|contextmenu|mousenter|mouseleave)$/,a=/^(focus|blur|select|change|reset|keypress|keydown|keyup)$/,j=/^on/;function g(){var k=f.documentElement,m=f.body;if(k&&(k[e]||k[c])){return[k[c],k[e]]}else{if(m){return[m[c],m[e]]}else{return[0,0]}}}return{fireEvent:Ext.isIE?function(n,m){var k;n=n.toLowerCase();if(!j.test(n)){n="on"+n}if(Ext.isFunction(m)){k=document.createEventObject();m(k)}else{k=m}this.dom.fireEvent(n,k)}:function(p,o){var n;p=p.toLowerCase();p.replace(j,"");if(b.test(p)){var m={};if(this.getBox){m=this.getBox()}else{m.width=this.getWidth();m.height=this.getHeight();m.x=this.getX();m.y=this.getY()}var k=m.x+m.width/2,q=m.y+m.height/2;n=document.createEvent("MouseEvents");n.initMouseEvent(p,true,true,window,(p=="dblclick")?2:1,k,q,k,q,false,false,false,false,0,null)}else{if(a.test(p)){n=document.createEvent("UIEvents");n.initUIEvent(p,true,true,window,0)}else{if(d.test(p)){n=document.createEvent("HTMLEvents");n.initEvent(p,true,true)}}}if(n){if(Ext.isFunction(o)){o(n)}this.dom.dispatchEvent(n)}},forwardMouseEvents:function(o){var r=this,s,q,k,n=["mousemove","mousedown","mouseup","dblclick","mousewheel"];r.on("mouseout",function(){if(k){Ext.fly(k).fireEvent("mouseout");k=null}});for(var p=0,m=n.length;p<m;p++){this.on(n[p],function(B){var w=(Ext.isGecko)?g():[0,0],z=B.browserEvent,u=Ext.num(z.pageX,z.clientX)-w[0],C=Ext.num(z.pageY,z.clientY)-w[1],A=z.type,v;if(!r.forwardingSuspended&&r.isVisible()){B.stopPropagation();r.forwardingSuspended=true;r.hide();v=Ext.get(document.elementFromPoint(u,C));r.show();if(!v){k.fireEvent("mouseout");k=v;delete r.forwardingSuspended;return}if(v===k){if(A=="mouseup"){v.fireEvent("click")}}else{if(k){k.fireEvent("mouseout")}v.fireEvent("mouseover")}if(A!=="mousemove"){if(v.dom.fireEvent){v.fireEvent(A,z)}else{B=document.createEvent("MouseEvents");B.initMouseEvent(A,true,true,window,z.detail,z.screenX,z.screenY,z.clientX,z.clientY,z.ctrlKey,z.altKey,z.shiftKey,z.metaKey,z.button,null);v.dom.dispatchEvent(B)}}k=v;delete r.forwardingSuspended}})}}}})());Ext.ns("Ext.ux.grid");Ext.ux.grid.DataDrop=(function(){var e=/\r\n|\r|\n/,c=/\s*\t\s*/;function b(){var f=this.view;if(f.mainBody){this.textEl=Ext.DomHelper.insertAfter(f.scroller,{tag:"textarea",id:Ext.id(),value:"",style:{"font-size":"1px",border:"0px none",overflow:"hidden",color:"#fff",position:"absolute",top:f.mainHd.getHeight()+"px",left:"0px","background-color":"#fff",margin:0,cursor:"default"}},true);this.textEl.setOpacity(0.1);this.textEl.forwardMouseEvents();this.textEl.on({mouseover:function(){Ext.TaskMgr.start(this.changeValueTask)},mouseout:function(){Ext.TaskMgr.stop(this.changeValueTask)},scope:this});a.call(this)}}function a(){if(this.textEl){var f=this.view,k=f.scroller,j=k.getSize,g={width:k.dom.clientWidth||(j.width-f.getScrollOffset()+2),height:k.dom.clientHeight||j.height};this.textEl.setSize(g)}}function d(r,g){var s=g.value;g.blur();if(s!==""){var x=this.getStore(),v=x.recordType;g.value="";var y=s.split(e),u=this.getColumnModel().getColumnsBy(function(k){return !k.hidden}),q=v.prototype.fields;if(u.length&&y.length){for(var p=0;p<y.length;p++){var t=y[p].split(c),o={};if(t.join("").replace(" ","")!==""){for(var n=0;n<t.length;n++){var f=u[n].dataIndex;var j=q.item(f);o[f]=j?j.convert(t[n]):t[n]}var m=new v(o);x.add(m);var w=x.indexOf(m);this.view.focusRow(w);Ext.get(this.view.getRow(w)).highlight()}}a.call(this)}}}return{init:function(f){Ext.apply(f,{changeValueTask:{run:function(){d.call(this,null,this.textEl.dom)},interval:100,scope:f},onResize:f.onResize.createSequence(a)});f.getView().afterRender=f.getView().afterRender.createSequence(b,f)}}})();Ext.ns("Ext.ux.form");Ext.ux.form.GroupingComboBox=Ext.extend(Ext.form.ComboBox,{initComponent:function(){if(this.transform){this.allowDomMove=false;var m=Ext.getDom(this.transform);if(!this.hiddenName){this.hiddenName=m.name}if(!this.store){this.mode="local";var f=[],a=m.options;for(var c=0,e=a.length;c<e;c++){var b=a[c];var g=(Ext.isIE?b.getAttributeNode("value").specified:b.hasAttribute("value"))?b.value:b.text;if(b.selected){this.value=g}var k=b.parentNode,j=k.tagName.toLowerCase()=="optgroup"?k.label:false;f.push([g,b.text,j])}this.store=new Ext.data.SimpleStore({"id":0,fields:["value","text","group"],data:f});this.valueField="value";this.displayField="text";this.groupField="group"}m.name=Ext.id();if(!this.lazyRender){this.target=true;this.el=Ext.DomHelper.insertBefore(m,this.autoCreate||this.defaultAutoCreate);Ext.removeNode(m);this.render(this.el.parentNode)}else{Ext.removeNode(m)}}delete this.transform;Ext.ux.form.GroupingComboBox.superclass.initComponent.call(this)},initList:function(){if(!this.list&&!this.tpl){this.tpl=['<tpl for=".">','<tpl if="values.'+this.groupField+" && (xindex == 1 || parent[xindex - 2]."+this.groupField+" != values."+this.groupField+')">','<div class="x-combo-list-group">{'+this.groupField+"}</div>","</tpl>",'<div class="x-combo-list-item">','<tpl if="values.'+this.groupField+'">&nbsp;</tpl>',"{"+this.displayField+"}","</div>","</tpl>"].join("")}Ext.ux.form.GroupingComboBox.superclass.initList.call(this)}});Ext.ns("Ext.ux.grid");Ext.ux.grid.PagingRowNumberer=Ext.extend(Ext.grid.RowNumberer,{renderer:function(d,g,b,j,e,c){if(this.rowspan){g.cellAttr='rowspan="'+this.rowspan+'"'}var f=c.lastOptions;var a=f?f.params:null;return((a&&a.start)?a.start:0)+j+1}});
/*
 * Ext JS Library 3.3.1
 * Copyright(c) 2006-2010 Sencha Inc.
 * licensing@sencha.com
 * http://www.sencha.com/license
 */
Ext.ux.TabCloseMenu=Ext.extend(Object,{closeTabText:"Close Tab",closeOtherTabsText:"Close Other Tabs",showCloseAll:true,closeAllTabsText:"Close All Tabs",constructor:function(a){Ext.apply(this,a||{})},init:function(a){this.tabs=a;a.on({scope:this,contextmenu:this.onContextMenu,destroy:this.destroy})},destroy:function(){Ext.destroy(this.menu);delete this.menu;delete this.tabs;delete this.active},onContextMenu:function(b,c,g){this.active=c;var a=this.createMenu(),d=true,j=true,f=a.getComponent("closeall");a.getComponent("close").setDisabled(!c.closable);b.items.each(function(){if(this.closable){d=false;if(this!=c){j=false;return false}}});a.getComponent("closeothers").setDisabled(j);if(f){f.setDisabled(d)}g.stopEvent();a.showAt(g.getPoint())},createMenu:function(){if(!this.menu){var a=[{itemId:"close",text:this.closeTabText,scope:this,handler:this.onClose}];if(this.showCloseAll){a.push("-")}a.push({itemId:"closeothers",text:this.closeOtherTabsText,scope:this,handler:this.onCloseOthers});if(this.showCloseAll){a.push({itemId:"closeall",text:this.closeAllTabsText,scope:this,handler:this.onCloseAll})}this.menu=new Ext.menu.Menu({items:a})}return this.menu},onClose:function(){var a=this.active;if(a.fireEvent("beforeclose",a)!==false){a.fireEvent("close",a);this.tabs.remove(a)}},onCloseOthers:function(){this.doClose(true)},onCloseAll:function(){this.doClose(false)},doClose:function(c){var b=[];this.tabs.items.each(function(d){if(d.closable){if(!c||d!=this.active){b.push(d)}}},this);var a=this.active;if(a.fireEvent("beforeclose",a,true,b)!==false){Ext.each(b,function(d){d.fireEvent("close",d);this.tabs.remove(d)},this)}}});Ext.preg("tabclosemenu",Ext.ux.TabCloseMenu);
/*
 * Ext JS Library 3.3.0
 * Copyright(c) 2006-2010 Ext JS, Inc.
 * licensing@extjs.com
 * http://www.extjs.com/license
 */
Ext.ux.Portal=Ext.extend(Ext.Panel,{layout:"column",autoScroll:true,cls:"x-portal",defaultType:"portalcolumn",initComponent:function(){Ext.ux.Portal.superclass.initComponent.call(this);this.addEvents({validatedrop:true,beforedragover:true,dragover:true,beforedrop:true,drop:true})},initEvents:function(){Ext.ux.Portal.superclass.initEvents.call(this);this.dd=new Ext.ux.Portal.DropZone(this,this.dropConfig)},beforeDestroy:function(){if(this.dd){this.dd.unreg()}Ext.ux.Portal.superclass.beforeDestroy.call(this)}});Ext.reg("portal",Ext.ux.Portal);Ext.ux.Portal.DropZone=Ext.extend(Ext.dd.DropTarget,{constructor:function(a,b){this.portal=a;Ext.dd.ScrollManager.register(a.body);Ext.ux.Portal.DropZone.superclass.constructor.call(this,a.bwrap.dom,b);a.body.ddScrollConfig=this.ddScrollConfig},ddScrollConfig:{vthresh:50,hthresh:-1,animate:true,increment:200},createEvent:function(a,f,d,b,j,g){return{portal:this.portal,panel:d.panel,columnIndex:b,column:j,position:g,data:d,source:a,rawEvent:f,status:this.dropAllowed}},notifyOver:function(x,v,y){var f=v.getXY(),a=this.portal,q=x.proxy;if(!this.grid){this.grid=this.getGrid()}var b=a.body.dom.clientWidth;if(!this.lastCW){this.lastCW=b}else{if(this.lastCW!=b){this.lastCW=b;a.doLayout();this.grid=this.getGrid()}}var d=0,n=this.grid.columnX,o=false;for(var u=n.length;d<u;d++){if(f[0]<(n[d].x+n[d].w)){o=true;break}}if(!o){d--}var s,m=false,j=0,w=a.items.itemAt(d),r=w.items.items,k=false;for(var u=r.length;j<u;j++){s=r[j];var t=s.el.getHeight();if(t===0){k=true}else{if((s.el.getY()+(t/2))>f[1]){m=true;break}}}j=(m&&s?j:w.items.getCount())+(k?-1:0);var g=this.createEvent(x,v,y,d,w,j);if(a.fireEvent("validatedrop",g)!==false&&a.fireEvent("beforedragover",g)!==false){q.getProxy().setWidth("auto");if(s){q.moveProxy(s.el.dom.parentNode,m?s.el.dom:null)}else{q.moveProxy(w.el.dom,null)}this.lastPos={c:w,col:d,p:k||(m&&s)?j:false};this.scrollPos=a.body.getScroll();a.fireEvent("dragover",g);return g.status}else{return g.status}},notifyOut:function(){delete this.grid},notifyDrop:function(o,j,g){delete this.grid;if(!this.lastPos){return}var m=this.lastPos.c,f=this.lastPos.col,n=this.lastPos.p,a=o.panel,b=this.createEvent(o,j,g,f,m,n!==false?n:m.items.getCount());if(this.portal.fireEvent("validatedrop",b)!==false&&this.portal.fireEvent("beforedrop",b)!==false){o.proxy.getProxy().remove();a.el.dom.parentNode.removeChild(o.panel.el.dom);if(n!==false){m.insert(n,a)}else{m.add(a)}m.doLayout();this.portal.fireEvent("drop",b);var p=this.scrollPos.top;if(p){var k=this.portal.body.dom;setTimeout(function(){k.scrollTop=p},10)}}delete this.lastPos},getGrid:function(){var a=this.portal.bwrap.getBox();a.columnX=[];this.portal.items.each(function(b){a.columnX.push({x:b.el.getX(),w:b.el.getWidth()})});return a},unreg:function(){Ext.dd.ScrollManager.unregister(this.portal.body);Ext.ux.Portal.DropZone.superclass.unreg.call(this)}});
/*
 * Ext JS Library 3.3.0
 * Copyright(c) 2006-2010 Ext JS, Inc.
 * licensing@extjs.com
 * http://www.extjs.com/license
 */
Ext.ux.PortalColumn=Ext.extend(Ext.Container,{layout:"anchor",defaultType:"portlet",cls:"x-portal-column"});Ext.reg("portalcolumn",Ext.ux.PortalColumn);
/*
 * Ext JS Library 3.3.0
 * Copyright(c) 2006-2010 Ext JS, Inc.
 * licensing@extjs.com
 * http://www.extjs.com/license
 */
Ext.ux.Portlet=Ext.extend(Ext.Panel,{anchor:"100%",frame:true,collapsible:true,draggable:true,cls:"x-portlet"});Ext.reg("portlet",Ext.ux.Portlet);Ext.ux.FileTreePanel=Ext.extend(Ext.tree.TreePanel,{confirmText:"Confirm",containerScroll:true,deleteText:"Delete",enableDD:true,enableDelete:true,enableNewDir:true,enableOpen:true,enableProgress:true,enableRename:true,enableSort:true,enableUpload:true,errorText:"Error",existsText:"File <b>{0}</b> already exists",expandOnRender:true,fileCls:"file",fileText:"File",fileOpenSingleClick:false,focusPopup:true,folderSort:true,hrefPrefix:"",hrefSuffix:"",layout:"fit",loadingText:"Loading",loadMask:false,maxFileSize:524288,maxMsgLen:2000,method:"post",newdirText:"New Folder",newfileText:"file.php",openNewFile:true,openMode:"container",overwriteText:"Do you want to overwrite it?",popupFeatures:"width=800,height=600,dependent=1,scrollbars=1,resizable=1,toolbar=1",readOnly:false,reallyWantText:"Do you really want to",rootPath:"root",rootText:"Tree Root",rootVisible:true,selectOnEdit:true,singleUpload:false,topMenu:false,url:"",initComponent:function(){Ext.apply(this,{root:new Ext.tree.AsyncTreeNode({text:this.rootText,path:this.rootPath,rootVisible:this.rootVisible,allowDrag:false}),treeEditor:!this.readOnly?new Ext.tree.TreeEditor(this,{allowBlank:false,cancelOnEsc:true,completeOnEnter:true,ignoreNoChange:true,selectOnFocus:this.selectOnEdit}):undefined,dropConfig:this.dropConfig?this.dropConfig:{ddGroup:this.ddGroup||"TreeDD",appendOnly:this.enableSort,expandDelay:3600000},treeSorter:this.enableSort?new Ext.tree.TreeSorter(this,{folderSort:this.folderSort}):undefined,keys:[{key:Ext.EventObject.ENTER,scope:this,fn:function(a,c){var d=this.getSelectionModel();var b=d.getSelectedNode();if(b&&0!==b.getDepth()&&b.isLeaf()){this.openNode(b)}}},{key:113,scope:this,fn:function(a,c){var d=this.getSelectionModel();var b=d.getSelectedNode();if(b&&0!==b.getDepth()&&this.enableRename&&this.readOnly!==true){this.treeEditor.triggerEdit(b)}}},{key:46,stopEvent:true,scope:this,fn:function(a,c){var d=this.getSelectionModel();var b=d.getSelectedNode();if(b&&0!==b.getDepth()&&this.enableDelete&&this.readOnly!==true){this.deleteNode(b)}}},{key:69,ctrl:true,stopEvent:true,scope:this,fn:function(a,c){var d=this.getSelectionModel();var b=d.getSelectedNode();if(b){b=b.isLeaf()?b.parentNode:b;d.select(b);b.reload()}}},{key:39,ctrl:true,stopEvent:true,scope:this,fn:function(a,c){var d=this.getSelectionModel();var b=d.getSelectedNode();if(b&&!b.isLeaf()){d.select(b);b.expand.defer(1,b,[true])}}},{key:37,ctrl:true,scope:this,stopEvent:true,fn:function(a,c){var d=this.getSelectionModel();var b=d.getSelectedNode();if(b&&!b.isLeaf()){d.select(b);b.collapse.defer(1,b,[true])}}},{key:78,ctrl:true,scope:this,stopEvent:true,fn:function(a,c){var d,b;d=this.getSelectionModel();b=d.getSelectedNode();if(b&&this.enableNewDir&&this.readOnly!==true){b=b.isLeaf()?b.parentNode:b;this.createNewDir(b)}}}]});if(!this.loader){this.loader=new Ext.tree.TreeLoader({url:this.url,baseParams:{cmd:"get"},listeners:{beforeload:{scope:this,fn:function(a,b){a.baseParams.path=this.getPath(b)}}}})}if(true===this.topMenu){this.tbar=[{text:this.fileText,disabled:true,scope:this,menu:this.getContextMenu()}]}Ext.ux.FileTreePanel.superclass.initComponent.apply(this,arguments);if(this.treeEditor){this.treeEditor.beforeNodeClick=function(a,b){return true};this.treeEditor.on({scope:this,complete:this.onEditComplete,beforecomplete:this.onBeforeEditComplete})}if(this.openMode=="container"){this.fileCt=this.getFileContainer()}this.addEvents("beforeopen","open","beforerename","rename","renamefailure","beforedelete","delete","deletefailure","beforenewdir","newdir","newdirfailure","beforenewfile","newfile","newfilefailure")},onRender:function(){Ext.ux.FileTreePanel.superclass.onRender.apply(this,arguments);if(this.topMenu===true){this.topMenu=Ext.getCmp(this.getTopToolbar().items.itemAt(0).id);this.getSelectionModel().on({scope:this,selectionchange:function(c,b){var a=(b?false:true)||this.readOnly;this.topMenu.setDisabled(a)}});Ext.apply(this.topMenu,{showMenu:function(){this.showContextMenu(false)}.createDelegate(this)})}if(this.expandOnRender){this.root.expand()}this.el.on({contextmenu:{fn:function(){return false},stopEvent:true}});if(true===this.loadMask){this.loader.on({scope:this.el,beforeload:this.el.mask.createDelegate(this.el,[this.loadingText+"..."]),load:this.el.unmask,loadexception:this.el.unmask})}},initEvents:function(){Ext.ux.FileTreePanel.superclass.initEvents.call(this);this.on({scope:this,contextmenu:{fn:this.onContextMenu,stopEvent:true},beforenodedrop:this.onBeforeNodeDrop,nodedrop:this.onNodeDrop,nodedragover:this.onNodeDragOver});this.on(this.fileOpenSingleClick?"click":"dblclick",this.onClick,this,{buffer:100})},cmdCallback:function(k,j,d){var e,a,c;var g=true;if(true===j){try{a=Ext.decode(d.responseText)}catch(f){this.showError(d.responseText)}if(true===a.success){switch(k.params.cmd){case"delete":if(true!==this.eventsSuspended){this.fireEvent("delete",this,k.node)}k.node.parentNode.removeChild(k.node);if(this.openMode=="container"){this.fileCt.deleteFile(k.params.file)}break;case"newdir":if(true!==this.eventsSuspended){this.fireEvent("newdir",this,k.node)}break;case"newfile":if(true!==this.eventsSuspended){this.fireEvent("newfile",this,k.node)}if(this.openNewFile){this.openNode(k.node)}break;case"rename":this.updateCls(k.node,k.params.oldname);if(true!==this.eventsSuspended){this.fireEvent("rename",this,k.node,k.params.newname,k.params.oldname)}if(this.openMode=="container"){var b=this.getFileName(k.params.newname);this.fileCt.renameFile(b,k.params.newname,k.params.oldname)}break}}else{switch(k.params.cmd){case"rename":if(k.oldParent){k.oldParent.appendChild(k.node)}else{k.node.setText(k.oldName)}if(k.e){k.e.failure=true}if(true!==this.eventsSuspended){this.fireEvent("renamefailure",this,k.node,k.params.newname,k.params.oldname)}break;case"newdir":if(false!==this.eventsSuspended){this.fireEvent("newdirfailure",this,k.params.dir)}k.node.parentNode.removeChild(k.node);break;case"newfile":if(false!==this.eventsSuspended){this.fireEvent("newfilefailure",this,k.params.file)}k.node.parentNode.removeChild(k.node);break;case"delete":if(true!==this.eventsSuspended){this.fireEvent("deletefailure",this,k.node)}k.node.parentNode.reload.defer(1,k.node.parentNode);break;default:this.root.reload();break}this.showError(a.message||d.responseText)}}else{this.showError(d.responseText)}},confirmOverwrite:function(a,c,b){Ext.Msg.show({title:this.confirmText,msg:String.format(this.existsText,a)+". "+this.overwriteText,icon:Ext.Msg.QUESTION,buttons:Ext.Msg.YESNO,fn:c.createDelegate(b||this)})},createNewDir:function(d){if(true!==this.eventsSuspended&&false===this.fireEvent("beforenewdir",this,d)){return}var b=this.treeEditor;var a;var c=d.isLeaf()?d.parentNode:d;c.expand(false,false,function(e){a=e.appendChild(new Ext.tree.AsyncTreeNode({text:this.newdirText,iconCls:"folder"}));b.on({complete:{scope:this,single:true,fn:this.onNewDir}});b.creatingNewDir=true;(function(){b.triggerEdit(a)}.defer(10))}.createDelegate(this))},createNewFile:function(d){if(true!==this.eventsSuspended&&this.fireEvent("beforenewfile",this,d)===false){return}var b=this.treeEditor;var a;var c=d.isLeaf()?d.parentNode:d;c.expand(false,false,function(e){a=e.appendChild(new Ext.tree.AsyncTreeNode({text:this.newfileText,leaf:true}));b.on({complete:{scope:this,single:true,fn:this.onNewFile}});b.creatingNewFile=true;(function(){b.triggerEdit(a)}.defer(10))}.createDelegate(this))},deleteNode:function(a){if(true!==this.eventsSuspended&&this.fireEvent("beforedelete",this,a)===false){return}Ext.Msg.show({title:this.deleteText,msg:this.reallyWantText+" "+this.deleteText.toLowerCase()+" <b>"+a.text+"</b>?",icon:Ext.Msg.WARNING,buttons:Ext.Msg.YESNO,scope:this,fn:function(b){if("yes"!==b){this.getEl().dom.focus();return}var c={url:this.deleteUrl||this.url,method:this.method,scope:this,callback:this.cmdCallback,node:a,params:{cmd:"delete",file:this.getPath(a)}};Ext.Ajax.request(c)}})},downloadFile:function(c){var f=Ext.id();var d=document.createElement("iframe");d.id=f;d.name=f;d.className="x-hidden";if(Ext.isIE){d.src=Ext.SSL_SECURE_URL}document.body.appendChild(d);if(Ext.isIE){document.frames[f].name=f}var a=Ext.DomHelper.append(document.body,{tag:"form",method:"post",action:this.downloadUrl||this.url,target:f});document.body.appendChild(a);var b;b=document.createElement("input");b.type="hidden";b.name="cmd";b.value="download";a.appendChild(b);b=document.createElement("input");b.type="hidden";b.name="path";b.value=c;a.appendChild(b);var e=function(){Ext.EventManager.removeListener(d,"load",e,this);setTimeout(function(){document.body.removeChild(a)},100);setTimeout(function(){document.body.removeChild(d)},110)};Ext.EventManager.on(d,"load",e,this);a.submit()},openFileInContainer:function(b){var a=this.getFileName(b);this.fileCt.openFile(a,b)},getFileContainer:function(){var a=this.fileCt;if(Ext.isString(a)){return Ext.getCmp(a)}if(Ext.isFunction(a)){return a()}return a},getContextMenu:function(){if(!this.contextmenu){var a={singleUpload:this.singleUpload,maxFileSize:this.maxFileSize,enableProgress:this.enableProgress};if(this.baseParams){a.baseParams=this.baseParams}this.contextmenu=new Ext.ux.FileTreeMenu(a);this.contextmenu.on({scope:this,click:this.onContextClick});this.uploadPanel=this.contextmenu.getItemByCmd("upload-panel");this.uploadPanel.on({scope:this,beforeupload:this.onBeforeUpload,allfinished:this.onAllFinished});this.uploadPanel.setUrl(this.uploadUrl||this.url)}return this.contextmenu},getFileCls:function(a){var b=a.split(".");if(1===b.length){return this.fileCls}else{return this.fileCls+"-"+b.pop().toLowerCase()}},getFileName:function(b){var a=b.split("/");return a[a.length-1]},getPath:function(c){var e,d,b;if(c!==this.root){d=c.parentNode;b=[c.text];while(d&&d!==this.root){b.unshift(d.text);d=d.parentNode}b.unshift(this.root.attributes.path||"");e=b.join(this.pathSeparator)}else{e=c.attributes.path||""}e=e.replace(/^[\/\.]*/,"");return e},hasChild:function(b,a){return(b.isLeaf()?b.parentNode:b).findChild("text",a)!==null},hideContextMenu:function(){if(this.contextmenu&&this.contextmenu.isVisible()){this.contextmenu.hide()}return this},onBeforeEditComplete:function(c,a,b){if(c.cancellingEdit){c.cancellingEdit=false;return}var e=this.getPath(c.editNode);var d=e.replace(/\/[^\\]+$/,"/"+a);if(false===this.fireEvent("beforerename",this,c.editNode,d,e)){c.cancellingEdit=true;c.cancelEdit();return false}},onBeforeNodeDrop:function(g){var f=g.dropNode;var j=g.target.leaf?g.target.parentNode:g.target;if(f.parentNode===j){return false}if(this.hasChild(j,f.text)&&undefined===g.confirmed){this.confirmOverwrite(f.text,function(d){g.confirmed="yes"===d;this.onBeforeNodeDrop(g)});return false}if(false===g.confirmed){return false}g.confirmed=undefined;g.oldParent=f.parentNode;var c=this.getPath(f);var a=this.getPath(j)+"/"+f.text;if(true!==this.eventsSuspended&&false===this.fireEvent("beforerename",this,f,a,c)){return false}var b={url:this.renameUrl||this.url,method:this.method,scope:this,callback:this.cmdCallback,node:f,oldParent:f.parentNode,e:g,params:{cmd:"rename",oldname:c,newname:a}};Ext.Ajax.request(b);return true},onBeforeUpload:function(c){var b=this.getContextMenu();var a=this.getPath(b.node);if(b.node.isLeaf()){a=a.replace(/\/[^\/]+$/,"",a)}c.setPath(a)},onAllFinished:function(a){var b=this.getContextMenu();(b.node.isLeaf()?b.node.parentNode:b.node).reload()},onContextClick:function(d,b,c){if(b.disabled){return}var a=d.node;if(!a){a=d.parentMenu.node}switch(b.cmd){case"reload":a.reload();break;case"expand":a.expand(true);break;case"collapse":a.collapse(true);break;case"open":this.openNode(a);break;case"open-self":this.openNode(a,"_self");break;case"open-popup":this.openNode(a,"popup");break;case"open-blank":this.openNode(a,"_blank");break;case"open-dwnld":this.openNode(a,"download");break;case"rename":this.treeEditor.triggerEdit(a);break;case"delete":this.deleteNode(a);break;case"newdir":this.createNewDir(a);break;case"newfile":this.createNewFile(a);break;default:break}},onContextMenu:function(a,b){if(this.readOnly){return false}this.showContextMenu(a);return false},onDblClick:function(a,b){},onClick:function(a,b){this.openNode(a)},onDestroy:function(){if(this.contextmenu){this.contextmenu.purgeListeners();this.contextmenu.destroy();this.contextmenu=null}if(this.treeEditor){this.treeEditor.purgeListeners();this.treeEditor.destroy();this.treeEditor=null}if(this.treeSorter){this.treeSorter=null}if(this.fileCt){this.fileCt=null}Ext.ux.FileTreePanel.superclass.onDestroy.call(this)},onEditComplete:function(d,a,c){var e=d.editNode;if(a===c||d.creatingNewDir||d.creatingNewFile){d.creatingNewDir=false;d.creatingNewFile=false;return}var f=this.getPath(e.parentNode);var b={url:this.renameUrl||this.url,method:this.method,scope:this,callback:this.cmdCallback,node:e,oldName:c,params:{cmd:"rename",oldname:f+"/"+c,newname:f+"/"+a}};Ext.Ajax.request(b)},onNewDir:function(b){var c=this.getPath(b.editNode);var a={url:this.newdirUrl||this.url,method:this.method,scope:this,node:b.editNode,callback:this.cmdCallback,params:{cmd:"newdir",dir:c}};Ext.Ajax.request(a)},onNewFile:function(b){var c=this.getPath(b.editNode);var a={url:this.newfileUrl||this.url,method:this.method,scope:this,node:b.editNode,callback:this.cmdCallback,params:{cmd:"newfile",file:c}};Ext.Ajax.request(a)},onNodeDragOver:function(a){a.cancel=a.target.disabled||a.dropNode.parentNode===a.target.parentNode&&a.target.isLeaf()},onNodeDrop:function(b){if(true===b.failure){b.oldParent.appendChild(b.dropNode);return}var a=b.dropNode.parentNode.findChild("text",b.dropNode.text);if(a&&a!==b.dropNode){a.parentNode.removeChild(a)}},openNode:function(b,d){if(!this.enableOpen){return}d=d||this.openMode;var a;var c;if(b.isLeaf()){c=this.getPath(b);a=this.hrefPrefix+c+this.hrefSuffix;if(true!==this.eventsSuspended&&false===this.fireEvent("beforeopen",this,b.text,a,d)){return}switch(d){case"container":this.openFileInContainer(c);break;case"popup":if(!this.popup||this.popup.closed){this.popup=window.open(a,this.hrefTarget,this.popupFeatures)}this.popup.location=a;if(this.focusPopup){this.popup.focus()}break;case"_self":window.location=a;break;case"_blank":window.open(a);break;case"download":this.downloadFile(c);break}if(true!==this.eventsSuspended){this.fireEvent("open",this,b.text,a,d)}}},setDeleteDisabled:function(a){a=!(!a);if(!this.enableDelete===a){return this}this.hideContextMenu();this.enableDelete=!a},setNewdirDisabled:function(a){a=!(!a);if(!this.enableNewDir===a){return this}this.hideContextMenu();this.enableNewDir=!a},setOpenDisabled:function(a){a=!(!a);if(!this.enableOpen===a){return this}this.hideContextMenu();this.enableOpen=!a;return this},setReadOnly:function(a){a=!(!a);if(this.readOnly===a){return this}this.hideContextMenu();if(this.dragZone){this.dragZone.locked=a}this.readOnly=a;return this},setRenameDisabled:function(a){a=!(!a);if(!this.enableRename===a){return this}this.hideContextMenu();if(this.dragZone){this.dragZone.locked=a}this.enableRename=!a;return this},setUploadDisabled:function(a){a=!(!a);if(!this.enableUpload===a){return this}this.hideContextMenu();this.enableUpload=!a;return this},showContextMenu:function(c){var a=false;var b=this.topMenu?this.topMenu.getEl():this.body;if(!c){c=this.getSelectionModel().getSelectedNode();a=true}else{b=c.getUI().getEl()}if(!c){return}var d=this.getContextMenu();d.node=c;d.getItemByCmd("nodename").setText(Ext.util.Format.ellipsis(c.text,22));d.setItemDisabled("open",!c.isLeaf());d.setItemDisabled("reload",c.isLeaf());d.setItemDisabled("expand",c.isLeaf());d.setItemDisabled("collapse",c.isLeaf());d.setItemDisabled("delete",c===this.root||c.disabled);d.setItemDisabled("rename",this.readOnly||c===this.root||c.disabled);d.setItemDisabled("newdir",this.readOnly||(c.isLeaf()?c.parentNode.disabled:c.disabled));d.setItemDisabled("newfile",this.readOnly||(c.isLeaf()?c.parentNode.disabled:c.disabled));d.setItemDisabled("upload",c.isLeaf()?c.parentNode.disabled:c.disabled);d.setItemDisabled("upload-panel",c.isLeaf()?c.parentNode.disabled:c.disabled);d.getItemByCmd("open").setVisible(this.enableOpen);d.getItemByCmd("delete").setVisible(this.enableDelete);d.getItemByCmd("newdir").setVisible(this.enableNewDir);d.getItemByCmd("rename").setVisible(this.enableRename);d.getItemByCmd("upload").setVisible(this.enableUpload);d.getItemByCmd("upload-panel").setVisible(this.enableUpload);d.getItemByCmd("sep-upload").setVisible(this.enableUpload);d.getItemByCmd("sep-collapse").setVisible(this.enableNewDir||this.enableDelete||this.enableRename);d.render();c.select();if(a){d.showAt(d.getEl().getAlignToXY(b,"tl-bl?"))}else{d.showAt(d.getEl().getAlignToXY(b,"tl-tl?",[0,18]))}},showError:function(b,a){Ext.Msg.show({title:a||this.errorText,msg:Ext.util.Format.ellipsis(b,this.maxMsgLen),fixCursor:true,icon:Ext.Msg.ERROR,buttons:Ext.Msg.OK,minWidth:1200>String(b).length?360:600})},updateCls:function(b,a){if(b.isLeaf()){Ext.fly(b.getUI().iconNode).removeClass(this.getFileCls(a));Ext.fly(b.getUI().iconNode).addClass(this.getFileCls(b.text))}}});Ext.reg("filetreepanel",Ext.ux.FileTreePanel);Ext.ux.FileTreeMenu=function(b){b=b||{};var a={hideOnClick:false,cmd:"upload-panel",contextmenu:this,buttonsAt:b.buttonsAt||"tbar",singleUpload:b.singleUpload||false,maxFileSize:b.maxFileSize,enableProgress:b.enableProgress};if(b.baseParams){b.baseParams.cmd=b.baseParams.cmd||"upload";b.baseParams.dir=b.baseParams.dir||".";a.baseParams=b.baseParams}Ext.apply(b,{items:[{text:"&#160",cls:"ux-ftm-nodename",disabledClass:"",disabled:true,cmd:"nodename"},{text:this.openText+" (Enter)",iconCls:this.openIconCls,cmd:"open",menu:{items:[{text:this.openSelfText,iconCls:this.openSelfIconCls,cmd:"open-self"}]}},new Ext.menu.Separator({cmd:"sep-open"}),{text:this.reloadText+" (Ctrl+E)",iconCls:this.reloadIconCls,cmd:"reload"},{text:this.expandText+" (Ctrl+&nbsp;&rarr;)",iconCls:this.expandIconCls,cmd:"expand"},{text:this.collapseText+" (Ctrl+&nbsp;&larr;)",iconCls:this.collapseIconCls,cmd:"collapse"},new Ext.menu.Separator({cmd:"sep-collapse"}),{text:this.renameText+" (F2)",iconCls:this.renameIconCls,cmd:"rename"},{text:this.deleteText+" ("+this.deleteKeyName+")",iconCls:this.deleteIconCls,cmd:"delete"},{text:this.newdirText+"... (Ctrl+N)",iconCls:this.newdirIconCls,cmd:"newdir"},{text:this.newfileText,iconCls:this.newfileIconCls,cmd:"newfile"},new Ext.menu.Separator({cmd:"sep-upload"}),{text:this.uploadFileText+" (Ctrl+U)",iconCls:this.uploadIconCls,hideOnClick:false,cmd:"upload"},new Ext.ux.UploadPanel(a)]});Ext.ux.FileTreeMenu.superclass.constructor.call(this,b);this.relayEvents(this.getItemByCmd("open").menu,["click","itemclick"])};Ext.extend(Ext.ux.FileTreeMenu,Ext.menu.Menu,{collapseIconCls:"icon-collapse-all",collapseText:"Collapse all",deleteIconCls:"icon-cross",deleteKeyName:"Delete Key",deleteText:"Delete",expandIconCls:"icon-expand-all",expandText:"Expand all",newdirIconCls:"icon-folder-add",newdirText:"New folder",newfileIconCls:"icon-plus",newfileText:"New file",openBlankIconCls:"icon-open-blank",openBlankText:"Open in new window",openDwnldIconCls:"icon-open-download",openDwnldText:"Download",openIconCls:"icon-open",openPopupIconCls:"icon-open-popup",openPopupText:"Open in popup",openSelfIconCls:"icon-open-self",openSelfText:"Open in this window",openText:"Open",reloadIconCls:"icon-refresh",reloadText:'R<span style="text-decoration:underline">e</span>load',renameIconCls:"icon-pencil",renameText:"Rename",uploadFileText:'<span style="text-decoration:underline">U</span>pload file',uploadIconCls:"icon-upload",uploadText:"Upload",width:190,getItemByCmd:function(c){var a;var b=this.items.find(function(d){return c===d.cmd});if(!b){a=this.items.find(function(d){return"open"===d.cmd});if(!a){return null}b=a.menu.items.find(function(d){return c===d.cmd})}return b},setItemDisabled:function(c,a){var b=this.getItemByCmd(c);if(b){b.setDisabled(a)}},beforeDestroy:function(){var a=this.getItemByCmd("upload-panel");if(a&&a.component){a.component.purgeListeners();a.component.destroy();a.component=null}}});Ext.reg("filetreemenu",Ext.ux.FileTreeMenu);Ext.namespace("Ext.ux.form");Ext.ux.form.BrowseButton=Ext.extend(Ext.Button,{inputFileName:"file",debug:false,FLOAT_EL_WIDTH:60,FLOAT_EL_HEIGHT:18,buttonCt:null,clipEl:null,floatEl:null,inputFileEl:null,originalHandler:null,originalScope:null,initComponent:function(){Ext.ux.form.BrowseButton.superclass.initComponent.call(this);this.originalHandler=this.handler;this.originalScope=this.scope;this.handler=null;this.scope=null},onRender:function(d,b){Ext.ux.form.BrowseButton.superclass.onRender.call(this,d,b);this.buttonCt=this.el.child(".x-btn-mc em");this.buttonCt.position("relative");var c={position:"absolute",overflow:"hidden",top:"0px",left:"0px"};if(Ext.isIE){Ext.apply(c,{left:"-3px",top:"-3px"})}else{if(Ext.isGecko){Ext.apply(c,{left:"-3px",top:"-3px"})}else{if(Ext.isSafari){Ext.apply(c,{left:"-4px",top:"-2px"})}}}this.clipEl=this.buttonCt.createChild({tag:"div",style:c});this.setClipSize();this.clipEl.on({"mousemove":this.onButtonMouseMove,"mouseover":this.onButtonMouseMove,scope:this});this.floatEl=this.clipEl.createChild({tag:"div",style:{position:"absolute",width:this.FLOAT_EL_WIDTH+"px",height:this.FLOAT_EL_HEIGHT+"px",overflow:"hidden"}});if(this.debug){this.clipEl.applyStyles({"background-color":"green"});this.floatEl.applyStyles({"background-color":"red"})}else{this.clipEl.setOpacity(0)}var a=this.el.child(this.buttonSelector);a.on("focus",this.onButtonFocus,this);if(Ext.isIE){this.el.on("keydown",this.onButtonKeyDown,this)}this.createInputFile()},setClipSize:function(){if(this.clipEl){var b=this.buttonCt.getWidth();var a=this.buttonCt.getHeight();if(b===0||a===0){this.setClipSize.defer(100,this)}else{if(Ext.isIE){b=b+5;a=a+5}else{if(Ext.isGecko){b=b+6;a=a+6}else{if(Ext.isSafari){b=b+6;a=a+6}}}this.clipEl.setSize(b,a)}}},createInputFile:function(){this.floatEl.select("em").each(function(a){a.remove()});this.inputFileEl=this.floatEl.createChild({tag:"input",type:"file",size:1,name:this.inputFileName||Ext.id(this.el),tabindex:this.tabIndex,style:{position:"absolute",cursor:"pointer",right:"0px",top:Ext.isIE?"10px":"0px"}});this.inputFileEl=this.inputFileEl.child("input")||this.inputFileEl;this.inputFileEl.on({"click":this.onInputFileClick,"change":this.onInputFileChange,"focus":this.onInputFileFocus,"select":this.onInputFileFocus,"blur":this.onInputFileBlur,scope:this});if(this.tooltip){if(typeof this.tooltip=="object"){Ext.QuickTips.register(Ext.apply({target:this.inputFileEl},this.tooltip))}else{this.inputFileEl.dom[this.tooltipType]=this.tooltip}}},onButtonFocus:function(a){if(this.inputFileEl){this.inputFileEl.focus();a.stopEvent()}},onButtonKeyDown:function(a){if(this.inputFileEl&&a.getKey()==Ext.EventObject.SPACE){this.inputFileEl.dom.click();a.stopEvent()}},onButtonMouseMove:function(b){var a=b.getXY();a[0]-=this.FLOAT_EL_WIDTH/2;a[1]-=this.FLOAT_EL_HEIGHT/2;this.floatEl.setXY(a)},onInputFileFocus:function(a){if(!this.isDisabled){this.el.addClass("x-btn-over")}},onInputFileBlur:function(a){this.el.removeClass("x-btn-over")},onInputFileClick:function(a){a.stopPropagation()},onInputFileChange:function(){if(this.originalHandler){this.originalHandler.call(this.originalScope,this)}},detachInputFile:function(b){var a=this.inputFileEl;if(typeof this.tooltip=="object"){Ext.QuickTips.unregister(this.inputFileEl)}else{this.inputFileEl.dom[this.tooltipType]=null}this.inputFileEl.removeAllListeners();this.inputFileEl=null;if(!b){this.createInputFile()}return a},getInputFile:function(){return this.inputFileEl},disable:function(){Ext.ux.form.BrowseButton.superclass.disable.call(this);this.inputFileEl.dom.disabled=true},enable:function(){Ext.ux.form.BrowseButton.superclass.enable.call(this);this.inputFileEl.dom.disabled=false}});Ext.reg("browsebutton",Ext.ux.form.BrowseButton);Ext.ux.FileUploader=function(a){Ext.apply(this,a);Ext.ux.FileUploader.superclass.constructor.apply(this,arguments);this.addEvents("beforeallstart","allfinished","beforefilestart","filefinished","progress")};Ext.extend(Ext.ux.FileUploader,Ext.util.Observable,{baseParams:{cmd:"upload",dir:"."},concurrent:true,enableProgress:true,jsonErrorText:"Cannot decode JSON object",maxFileSize:524288,progressIdName:"UPLOAD_IDENTIFIER",progressInterval:2000,progressUrl:"progress.php",progressMap:{bytes_total:"bytesTotal",bytes_uploaded:"bytesUploaded",est_sec:"estSec",files_uploaded:"filesUploaded",speed_average:"speedAverage",speed_last:"speedLast",time_last:"timeLast",time_start:"timeStart"},singleUpload:false,unknownErrorText:"Unknown error",upCount:0,createForm:function(a){var c=parseInt(Math.random()*10000000000,10);var b=Ext.getBody().createChild({tag:"form",action:this.url,method:"post",cls:"x-hidden",id:Ext.id(),cn:[{tag:"input",type:"hidden",name:"APC_UPLOAD_PROGRESS",value:c},{tag:"input",type:"hidden",name:this.progressIdName,value:c},{tag:"input",type:"hidden",name:"MAX_FILE_SIZE",value:this.maxFileSize}]});if(a){if(Ext.isIE){a.set("form",undefined)}else{a.set("form",b)}a.set("progressId",c)}else{this.progressId=c}return b},deleteForm:function(b,a){b.remove();if(a){a.set("form",null)}},fireFinishEvents:function(a){if(true!==this.eventsSuspended&&!this.singleUpload){this.fireEvent("filefinished",this,a&&a.record)}if(true!==this.eventsSuspended&&0===this.upCount){this.stopProgress();this.fireEvent("allfinished",this)}},getIframe:function(a){var b=null;var c=a.get("form");if(c&&c.dom&&c.dom.target){b=Ext.get(c.dom.target)}return b},getOptions:function(a,c){var b={url:this.url,method:"post",isUpload:true,scope:this,callback:this.uploadCallback,record:a,params:this.getParams(a,c)};return b},getParams:function(a,c){var b={path:this.path};Ext.apply(b,this.baseParams||{},c||{});return b},processSuccess:function(c,b,d){var a=false;if(this.singleUpload){this.store.each(function(e){e.set("state","done");e.set("error","");e.commit()})}else{a=c.record;a.set("state","done");a.set("error","");a.commit()}this.deleteForm(c.form,a)},processFailure:function(e,c,d){var a=e.record;var b;afStudio.Msg.error("Upload error",d.message);if(this.singleUpload){b=this.store.queryBy(function(f){var g=f.get("state");return"done"!==g&&"uploading"!==g});b.each(function(f){var g=d.errors?d.errors[f.id]:this.unknownErrorText;if(g){f.set("state","failed");f.set("error",g);Ext.getBody().appendChild(f.get("input"))}else{f.set("state","done");f.set("error","")}f.commit()},this);this.deleteForm(e.form)}else{if(d&&"object"===Ext.type(d)){a.set("error",d.errors&&d.errors[a.id]?d.errors[a.id]:this.unknownErrorText)}else{if(d){a.set("error",d)}else{if(c&&c.responseText){a.set("error",c.responseText)}else{a.set("error",this.unknownErrorText)}}}a.set("state","failed");a.commit()}},requestProgress:function(){var a,b;var c={url:this.progressUrl,method:"post",params:{},scope:this,callback:function(f,k,d){var j;if(true!==k){return}try{j=Ext.decode(d.responseText)}catch(g){return}if("object"!==Ext.type(j)||true!==j.success){return}if(this.singleUpload){this.progress={};for(b in j){if(this.progressMap[b]){this.progress[this.progressMap[b]]=parseInt(j[b],10)}}if(true!==this.eventsSuspended){this.fireEvent("progress",this,this.progress)}}else{for(b in j){if(this.progressMap[b]&&f.record){f.record.set(this.progressMap[b],parseInt(j[b],10))}}if(f.record){f.record.commit();if(true!==this.eventsSuspended){this.fireEvent("progress",this,f.record.data,f.record)}}}this.progressTask.delay(this.progressInterval)}};if(this.singleUpload){c.params[this.progressIdName]=this.progressId;c.params.APC_UPLOAD_PROGRESS=this.progressId;Ext.Ajax.request(c)}else{a=this.store.query("state","uploading");a.each(function(d){c.params[this.progressIdName]=d.get("progressId");c.params.APC_UPLOAD_PROGRESS=c.params[this.progressIdName];c.record=d;(function(){Ext.Ajax.request(c)}).defer(250)},this)}},setPath:function(a){this.path=a},setUrl:function(a){this.url=a},startProgress:function(){if(!this.progressTask){this.progressTask=new Ext.util.DelayedTask(this.requestProgress,this)}this.progressTask.delay.defer(this.progressInterval/2,this.progressTask,[this.progressInterval])},stopProgress:function(){if(this.progressTask){this.progressTask.cancel()}},stopAll:function(){var a=this.store.query("state","uploading");a.each(this.stopUpload,this)},stopUpload:function(a){var b=false;if(a){b=this.getIframe(a);this.stopIframe(b);this.upCount--;this.upCount=0>this.upCount?0:this.upCount;a.set("state","stopped");this.fireFinishEvents({record:a})}else{if(this.form){b=Ext.fly(this.form.dom.target);this.stopIframe(b);this.upCount=0;this.fireFinishEvents()}}},stopIframe:function(a){if(a){try{a.dom.contentWindow.stop();a.remove.defer(250,a)}catch(b){}}},upload:function(){var a=this.store.queryBy(function(b){return"done"!==b.get("state")});if(!a.getCount()){return}if(true!==this.eventsSuspended&&false===this.fireEvent("beforeallstart",this)){return}if(this.singleUpload){this.uploadSingle()}else{a.each(this.uploadFile,this)}if(true===this.enableProgress){this.startProgress()}},uploadCallback:function(b,f,a){var d;this.upCount--;this.form=false;if(true===f){try{d=Ext.decode(a.responseText)}catch(c){this.processFailure(b,a,this.jsonErrorText);this.fireFinishEvents(b);return}if(true===d.success){this.processSuccess(b,a,d)}else{this.processFailure(b,a,d)}}else{this.processFailure(b,a)}this.fireFinishEvents(b)},uploadFile:function(a,e){if(true!==this.eventsSuspended&&false===this.fireEvent("beforefilestart",this,a)){return}var c=this.createForm(a);var b=a.get("input");b.set({name:b.id});c.appendChild(b);var d=this.getOptions(a,e);d.form=c;a.set("state","uploading");a.set("pctComplete",0);this.upCount++;Ext.Ajax.request(d);this.getIframe.defer(100,this,[a])},uploadSingle:function(){var a=this.store.queryBy(function(d){return"done"!==d.get("state")});if(!a.getCount()){return}var b=this.createForm();a.each(function(d){var e=d.get("input");e.set({name:e.id});b.appendChild(e);d.set("state","uploading")},this);var c=this.getOptions();c.form=b;this.form=b;this.upCount++;Ext.Ajax.request(c)}});Ext.reg("fileuploader",Ext.ux.FileUploader);Ext.ux.UploadPanel=Ext.extend(Ext.Panel,{addIconCls:"icon-plus",addText:"Add",bodyStyle:"padding:2px",buttonsAt:"tbar",clickRemoveText:"Click to remove",clickStopText:"Click to stop",emptyText:"No files",enableProgress:true,errorText:"Error",fileCls:"file",fileQueuedText:"File <b>{0}</b> is queued for upload",fileDoneText:"File <b>{0}</b> has been successfully uploaded",fileFailedText:"File <b>{0}</b> failed to upload",fileStoppedText:"File <b>{0}</b> stopped by user",fileUploadingText:"Uploading file <b>{0}</b>",maxFileSize:524288,maxLength:18,removeAllIconCls:"icon-cross",removeAllText:"Remove All",removeIconCls:"icon-minus",removeText:"Remove",selectedClass:"ux-up-item-selected",singleUpload:false,stopAllText:"Stop All",stopIconCls:"icon-stop",uploadText:"Upload",uploadIconCls:"icon-upload",workingIconCls:"icon-working",initComponent:function(){var d={xtype:"browsebutton",text:this.addText+"...",iconCls:this.addIconCls,scope:this,handler:this.onAddFile};var b={xtype:"button",iconCls:this.uploadIconCls,text:this.uploadText,scope:this,handler:this.onUpload,disabled:true};var e={xtype:"button",iconCls:this.removeAllIconCls,tooltip:this.removeAllText,scope:this,handler:this.onRemoveAllClick,disabled:true};if("body"!==this.buttonsAt){this[this.buttonsAt]=[d,b,"->",e]}var a=[{name:"id",type:"text",system:true},{name:"shortName",type:"text",system:true},{name:"fileName",type:"text",system:true},{name:"filePath",type:"text",system:true},{name:"fileCls",type:"text",system:true},{name:"input",system:true},{name:"form",system:true},{name:"state",type:"text",system:true},{name:"error",type:"text",system:true},{name:"progressId",type:"int",system:true},{name:"bytesTotal",type:"int",system:true},{name:"bytesUploaded",type:"int",system:true},{name:"estSec",type:"int",system:true},{name:"filesUploaded",type:"int",system:true},{name:"speedAverage",type:"int",system:true},{name:"speedLast",type:"int",system:true},{name:"timeLast",type:"int",system:true},{name:"timeStart",type:"int",system:true},{name:"pctComplete",type:"int",system:true}];if(Ext.isArray(this.customFields)){a.push(this.customFields)}this.store=new Ext.data.SimpleStore({id:0,fields:a,data:[]});Ext.apply(this,{items:[{xtype:"dataview",itemSelector:"div.ux-up-item",store:this.store,selectedClass:this.selectedClass,singleSelect:true,emptyText:this.emptyText,tpl:this.tpl||new Ext.XTemplate('<tpl for=".">'+'<div class="ux-up-item">'+'<div class="ux-up-icon-file {fileCls}">&#160;</div>'+'<div class="ux-up-text x-unselectable" qtip="{fileName}">{shortName}</div>'+'<div id="remove-{[values.input.id]}" class="ux-up-icon-state ux-up-icon-{state}"'+'qtip="{[this.scope.getQtip(values)]}">&#160;</div>'+"</div>"+"</tpl>",{scope:this}),listeners:{click:{scope:this,fn:this.onViewClick}}}]});Ext.ux.UploadPanel.superclass.initComponent.apply(this,arguments);this.view=this.items.itemAt(0);this.addEvents("beforefileadd","fileadd","beforefileremove","fileremove","beforequeueclear","queueclear","beforeupload");this.relayEvents(this.view,["beforeclick","beforeselect","click","containerclick","contextmenu","dblclick","selectionchange"]);var c={store:this.store,singleUpload:this.singleUpload,maxFileSize:this.maxFileSize,enableProgress:this.enableProgress,url:this.url,path:this.path};if(this.baseParams){c.baseParams=this.baseParams}this.uploader=new Ext.ux.FileUploader(c);this.relayEvents(this.uploader,["beforeallstart","allfinished","progress"]);this.on({beforeallstart:{scope:this,fn:function(){this.uploading=true;this.updateButtons()}},allfinished:{scope:this,fn:function(){this.uploading=false;this.updateButtons()}},progress:{fn:this.onProgress.createDelegate(this)}})},onRender:function(){Ext.ux.UploadPanel.superclass.onRender.apply(this,arguments);var a="tbar"===this.buttonsAt?this.getTopToolbar():this.getBottomToolbar();this.addBtn=Ext.getCmp(a.items.first().id);this.uploadBtn=Ext.getCmp(a.items.itemAt(1).id);this.removeAllBtn=Ext.getCmp(a.items.last().id);this.ownerCt.doLayout()},getQtip:function(a){var b="";switch(a.state){case"queued":b=String.format(this.fileQueuedText,a.fileName);b+="<br>"+this.clickRemoveText;break;case"uploading":b=String.format(this.fileUploadingText,a.fileName);b+="<br>"+a.pctComplete+"% done";b+="<br>"+this.clickStopText;break;case"done":b=String.format(this.fileDoneText,a.fileName);b+="<br>"+this.clickRemoveText;break;case"failed":b=String.format(this.fileFailedText,a.fileName);b+="<br>"+this.errorText+":"+a.error;b+="<br>"+this.clickRemoveText;break;case"stopped":b=String.format(this.fileStoppedText,a.fileName);b+="<br>"+this.clickRemoveText;break}return b},getFileName:function(a){return a.getValue().split(/[\/\\]/).pop()},getFilePath:function(a){return a.getValue().replace(/[^\/\\]+$/,"")},getFileCls:function(a){var b=a.split(".");if(1===b.length){return this.fileCls}else{return this.fileCls+"-"+b.pop().toLowerCase()}},onAddFile:function(c){if(true!==this.eventsSuspended&&false===this.fireEvent("beforefileadd",this,c.getInputFile())){return}var a=c.detachInputFile();a.addClass("x-hidden");var d=this.getFileName(a);var b=new this.store.recordType({input:a,fileName:d,filePath:this.getFilePath(a),shortName:Ext.util.Format.ellipsis(d,this.maxLength),fileCls:this.getFileCls(d),state:"queued"},a.id);b.commit();this.store.add(b);this.syncShadow();this.uploadBtn.enable();this.removeAllBtn.enable();if(true!==this.eventsSuspended){this.fireEvent("fileadd",this,this.store,b);this.ownerCt.doLayout()}},onDestroy:function(){if(this.uploader){this.uploader.stopAll();this.uploader.purgeListeners();this.uploader=null}if(this.view){this.view.purgeListeners();this.view.destroy();this.view=null}if(this.store){this.store.purgeListeners();this.store.destroy();this.store=null}},onProgress:function(j,f,g){var e,d,k,a,m,n,b,c;if(g){a=g.get("state");e=g.get("bytesTotal")||1;d=g.get("bytesUploaded")||0;if("uploading"===a){k=Math.round(1000*d/e)/10}else{if("done"===a){k=100}else{k=0}}g.set("pctComplete",k);m=this.store.indexOf(g);n=Ext.get(this.view.getNode(m));if(n){b=n.getWidth();n.applyStyles({"background-position":b*k/100+"px"})}}},onRemoveFile:function(a){if(true!==this.eventsSuspended&&false===this.fireEvent("beforefileremove",this,this.store,a)){return}var d=a.get("input");var b=d.up("em");d.remove();if(b){}this.store.remove(a);var c=this.store.getCount();this.uploadBtn.setDisabled(!c);this.removeAllBtn.setDisabled(!c);if(true!==this.eventsSuspended){this.fireEvent("fileremove",this,this.store);this.syncShadow()}this.ownerCt.doLayout()},onRemoveAllClick:function(a){if(true===this.uploading){this.stopAll()}else{this.removeAll()}},stopAll:function(){this.uploader.stopAll()},onViewClick:function(a,b,d,f){var c=f.getTarget("div:any(.ux-up-icon-queued|.ux-up-icon-failed|.ux-up-icon-done|.ux-up-icon-stopped)");if(c){this.onRemoveFile(this.store.getAt(b))}c=f.getTarget("div.ux-up-icon-uploading");if(c){this.uploader.stopUpload(this.store.getAt(b))}},onUpload:function(){if(true!==this.eventsSuspended&&false===this.fireEvent("beforeupload",this)){return false}this.uploader.upload()},setUrl:function(a){this.url=a;this.uploader.setUrl(a)},setPath:function(a){this.uploader.setPath(a)},updateButtons:function(){if(true===this.uploading){this.addBtn.disable();this.uploadBtn.disable();this.removeAllBtn.setIconClass(this.stopIconCls);this.removeAllBtn.getEl().child(this.removeAllBtn.buttonSelector).dom[this.removeAllBtn.tooltipType]=this.stopAllText}else{this.addBtn.enable();this.uploadBtn.enable();this.removeAllBtn.setIconClass(this.removeAllIconCls);this.removeAllBtn.getEl().child(this.removeAllBtn.buttonSelector).dom[this.removeAllBtn.tooltipType]=this.removeAllText}},removeAll:function(){var a=this.eventsSuspended;if(false!==this.eventsSuspended&&false===this.fireEvent("beforequeueclear",this,this.store)){return false}this.suspendEvents();this.store.each(this.onRemoveFile,this);this.eventsSuspended=a;if(true!==this.eventsSuspended){this.fireEvent("queueclear",this,this.store)}this.syncShadow()},syncShadow:function(){if(this.contextmenu&&this.contextmenu.shadow){this.contextmenu.getEl().shadow.show(this.contextmenu.getEl())}}});Ext.reg("uploadpanel",Ext.ux.UploadPanel);
/*
 * Ext JS Library 3.4.0
 * Copyright(c) 2006-2011 Sencha Inc.
 * licensing@sencha.com
 * http://www.sencha.com/license
 */
Ext.ns("Ext.ux.tree");Ext.ux.tree.TreeGridSorter=Ext.extend(Ext.tree.TreeSorter,{sortClasses:["sort-asc","sort-desc"],sortAscText:"Sort Ascending",sortDescText:"Sort Descending",constructor:function(a,b){if(!Ext.isObject(b)){b={property:a.columns[0].dataIndex||"text",folderSort:true}}Ext.ux.tree.TreeGridSorter.superclass.constructor.apply(this,arguments);this.tree=a;a.on("headerclick",this.onHeaderClick,this);a.ddAppendOnly=true;var c=this;this.defaultSortFn=function(n,m){var k=c.dir&&c.dir.toLowerCase()=="desc",d=c.property||"text",f=c.sortType,p=c.caseSensitive===true,e=c.leafAttr||"leaf",q=n.attributes,o=m.attributes;if(c.folderSort){if(q[e]&&!o[e]){return 1}if(!q[e]&&o[e]){return -1}}var j=q[d],g=o[d],r=f?f(j):(p?j:j.toUpperCase());v2=f?f(g):(p?g:g.toUpperCase());if(r<v2){return k?+1:-1}else{if(r>v2){return k?-1:+1}else{return 0}}};a.on("afterrender",this.onAfterTreeRender,this,{single:true});a.on("headermenuclick",this.onHeaderMenuClick,this)},onAfterTreeRender:function(){if(this.tree.hmenu){this.tree.hmenu.insert(0,{itemId:"asc",text:this.sortAscText,cls:"xg-hmenu-sort-asc"},{itemId:"desc",text:this.sortDescText,cls:"xg-hmenu-sort-desc"})}this.updateSortIcon(0,"asc")},onHeaderMenuClick:function(d,b,a){if(b==="asc"||b==="desc"){this.onHeaderClick(d,null,a);return false}},onHeaderClick:function(e,b,a){if(e&&!this.tree.headersDisabled){var d=this;d.property=e.dataIndex;d.dir=e.dir=(e.dir==="desc"?"asc":"desc");d.sortType=e.sortType;d.caseSensitive===Ext.isBoolean(e.caseSensitive)?e.caseSensitive:this.caseSensitive;d.sortFn=e.sortFn||this.defaultSortFn;this.tree.root.cascade(function(c){if(!c.isLeaf()){d.updateSort(d.tree,c)}});this.updateSortIcon(a,e.dir)}},updateSortIcon:function(b,a){var d=this.sortClasses,c=this.tree.innerHd.select("td").removeClass(d);c.item(b).addClass(d[a=="desc"?1:0])}});
/*
 * Ext JS Library 3.4.0
 * Copyright(c) 2006-2011 Sencha Inc.
 * licensing@sencha.com
 * http://www.sencha.com/license
 */
Ext.tree.ColumnResizer=Ext.extend(Ext.util.Observable,{minWidth:14,constructor:function(a){Ext.apply(this,a);Ext.tree.ColumnResizer.superclass.constructor.call(this)},init:function(a){this.tree=a;a.on("render",this.initEvents,this)},initEvents:function(a){a.mon(a.innerHd,"mousemove",this.handleHdMove,this);this.tracker=new Ext.dd.DragTracker({onBeforeStart:this.onBeforeStart.createDelegate(this),onStart:this.onStart.createDelegate(this),onDrag:this.onDrag.createDelegate(this),onEnd:this.onEnd.createDelegate(this),tolerance:3,autoStart:300});this.tracker.initEl(a.innerHd);a.on("beforedestroy",this.tracker.destroy,this.tracker)},handleHdMove:function(f,m){var g=5,k=f.getPageX(),d=f.getTarget(".x-treegrid-hd",3,true);if(d){var b=d.getRegion(),n=d.dom.style,c=d.dom.parentNode;if(k-b.left<=g&&d.dom!==c.firstChild){var a=d.dom.previousSibling;while(a&&Ext.fly(a).hasClass("x-treegrid-hd-hidden")){a=a.previousSibling}if(a){this.activeHd=Ext.get(a);n.cursor=Ext.isWebKit?"e-resize":"col-resize"}}else{if(b.right-k<=g){var j=d.dom;while(j&&Ext.fly(j).hasClass("x-treegrid-hd-hidden")){j=j.previousSibling}if(j){this.activeHd=Ext.get(j);n.cursor=Ext.isWebKit?"w-resize":"col-resize"}}else{delete this.activeHd;n.cursor=""}}}},onBeforeStart:function(a){this.dragHd=this.activeHd;return !!this.dragHd},onStart:function(b){this.dragHeadersDisabled=this.tree.headersDisabled;this.tree.headersDisabled=true;this.proxy=this.tree.body.createChild({cls:"x-treegrid-resizer"});this.proxy.setHeight(this.tree.body.getHeight());var a=this.tracker.getXY()[0];this.hdX=this.dragHd.getX();this.hdIndex=this.tree.findHeaderIndex(this.dragHd);this.proxy.setX(this.hdX);this.proxy.setWidth(a-this.hdX);this.maxWidth=this.tree.outerCt.getWidth()-this.tree.innerBody.translatePoints(this.hdX).left},onDrag:function(b){var a=this.tracker.getXY()[0];this.proxy.setWidth((a-this.hdX).constrain(this.minWidth,this.maxWidth))},onEnd:function(d){var b=this.proxy.getWidth(),a=this.tree,c=this.dragHeadersDisabled;this.proxy.remove();delete this.dragHd;a.columns[this.hdIndex].width=b;a.updateColumnWidths();setTimeout(function(){a.headersDisabled=c},100)}});
/*
 * Ext JS Library 3.4.0
 * Copyright(c) 2006-2011 Sencha Inc.
 * licensing@sencha.com
 * http://www.sencha.com/license
 */
Ext.ux.tree.TreeGridNodeUI=Ext.extend(Ext.tree.TreeNodeUI,{isTreeGridNodeUI:true,renderElements:function(d,o,j,p){var q=d.getOwnerTree(),m=q.columns,k=m[0],e,b,g;this.indentMarkup=d.parentNode?d.parentNode.ui.getChildIndent():"";b=['<tbody class="x-tree-node">','<tr ext:tree-node-id="',d.id,'" class="x-tree-node-el x-tree-node-leaf ',o.cls,'">','<td class="x-treegrid-col">','<span class="x-tree-node-indent">',this.indentMarkup,"</span>",'<img src="',this.emptyIcon,'" class="x-tree-ec-icon x-tree-elbow" />','<img src="',o.icon||this.emptyIcon,'" class="x-tree-node-icon',(o.icon?" x-tree-node-inline-icon":""),(o.iconCls?" "+o.iconCls:""),'" unselectable="on" />','<a hidefocus="on" class="x-tree-node-anchor" href="',o.href?o.href:"#",'" tabIndex="1" ',o.hrefTarget?' target="'+o.hrefTarget+'"':"",">",'<span unselectable="on">',(k.tpl?k.tpl.apply(o):o[k.dataIndex]||k.text),"</span></a>","</td>"];for(e=1,g=m.length;e<g;e++){k=m[e];b.push('<td class="x-treegrid-col ',(k.cls?k.cls:""),'">','<div unselectable="on" class="x-treegrid-text"',(k.align?' style="text-align: '+k.align+';"':""),">",(k.tpl?k.tpl.apply(o):o[k.dataIndex]),"</div>","</td>")}b.push('</tr><tr class="x-tree-node-ct"><td colspan="',m.length,'">','<table class="x-treegrid-node-ct-table" cellpadding="0" cellspacing="0" style="table-layout: fixed; display: none; width: ',q.innerCt.getWidth(),'px;"><colgroup>');for(e=0,g=m.length;e<g;e++){b.push('<col style="width: ',(m[e].hidden?0:m[e].width),'px;" />')}b.push("</colgroup></table></td></tr></tbody>");if(p!==true&&d.nextSibling&&d.nextSibling.ui.getEl()){this.wrap=Ext.DomHelper.insertHtml("beforeBegin",d.nextSibling.ui.getEl(),b.join(""))}else{this.wrap=Ext.DomHelper.insertHtml("beforeEnd",j,b.join(""))}this.elNode=this.wrap.childNodes[0];this.ctNode=this.wrap.childNodes[1].firstChild.firstChild;var f=this.elNode.firstChild.childNodes;this.indentNode=f[0];this.ecNode=f[1];this.iconNode=f[2];this.anchor=f[3];this.textNode=f[3].firstChild},animExpand:function(a){this.ctNode.style.display="";Ext.ux.tree.TreeGridNodeUI.superclass.animExpand.call(this,a)}});Ext.ux.tree.TreeGridRootNodeUI=Ext.extend(Ext.tree.TreeNodeUI,{isTreeGridNodeUI:true,render:function(){if(!this.rendered){this.wrap=this.ctNode=this.node.ownerTree.innerCt.dom;this.node.expanded=true}if(Ext.isWebKit){var a=this.ctNode;a.style.tableLayout=null;(function(){a.style.tableLayout="fixed"}).defer(1)}},destroy:function(){if(this.elNode){Ext.dd.Registry.unregister(this.elNode.id)}delete this.node},collapse:Ext.emptyFn,expand:Ext.emptyFn});
/*
 * Ext JS Library 3.4.0
 * Copyright(c) 2006-2011 Sencha Inc.
 * licensing@sencha.com
 * http://www.sencha.com/license
 */
Ext.ux.tree.TreeGridLoader=Ext.extend(Ext.tree.TreeLoader,{createNode:function(a){if(!a.uiProvider){a.uiProvider=Ext.ux.tree.TreeGridNodeUI}return Ext.tree.TreeLoader.prototype.createNode.call(this,a)}});
/*
 * Ext JS Library 3.4.0
 * Copyright(c) 2006-2011 Sencha Inc.
 * licensing@sencha.com
 * http://www.sencha.com/license
 */
(function(){Ext.override(Ext.list.Column,{init:function(){var b=Ext.data.Types,a=this.sortType;if(this.type){if(Ext.isString(this.type)){this.type=Ext.data.Types[this.type.toUpperCase()]||b.AUTO}}else{this.type=b.AUTO}if(Ext.isString(a)){this.sortType=Ext.data.SortTypes[a]}else{if(Ext.isEmpty(a)){this.sortType=this.type.sortType}}}});Ext.tree.Column=Ext.extend(Ext.list.Column,{});Ext.tree.NumberColumn=Ext.extend(Ext.list.NumberColumn,{});Ext.tree.DateColumn=Ext.extend(Ext.list.DateColumn,{});Ext.tree.BooleanColumn=Ext.extend(Ext.list.BooleanColumn,{});Ext.reg("tgcolumn",Ext.tree.Column);Ext.reg("tgnumbercolumn",Ext.tree.NumberColumn);Ext.reg("tgdatecolumn",Ext.tree.DateColumn);Ext.reg("tgbooleancolumn",Ext.tree.BooleanColumn)})();
/*
 * Ext JS Library 3.4.0
 * Copyright(c) 2006-2011 Sencha Inc.
 * licensing@sencha.com
 * http://www.sencha.com/license
 */
Ext.ux.tree.TreeGrid=Ext.extend(Ext.tree.TreePanel,{rootVisible:false,useArrows:true,lines:false,borderWidth:Ext.isBorderBox?0:2,cls:"x-treegrid",columnResize:true,enableSort:true,reserveScrollOffset:true,enableHdMenu:true,columnsText:"Columns",initComponent:function(){if(!this.root){this.root=new Ext.tree.AsyncTreeNode({text:"Root"})}var a=this.loader;if(!a){a=new Ext.ux.tree.TreeGridLoader({dataUrl:this.dataUrl,requestMethod:this.requestMethod,store:this.store})}else{if(Ext.isObject(a)&&!a.load){a=new Ext.ux.tree.TreeGridLoader(a)}}this.loader=a;Ext.ux.tree.TreeGrid.superclass.initComponent.call(this);this.initColumns();if(this.enableSort){this.treeGridSorter=new Ext.ux.tree.TreeGridSorter(this,this.enableSort)}if(this.columnResize){this.colResizer=new Ext.tree.ColumnResizer(this.columnResize);this.colResizer.init(this)}var b=this.columns;if(!this.internalTpl){this.internalTpl=new Ext.XTemplate('<div class="x-grid3-header">','<div class="x-treegrid-header-inner">','<div class="x-grid3-header-offset">','<table style="table-layout: fixed;" cellspacing="0" cellpadding="0" border="0"><colgroup><tpl for="columns"><col /></tpl></colgroup>','<thead><tr class="x-grid3-hd-row">','<tpl for="columns">','<td class="x-grid3-hd x-grid3-cell x-treegrid-hd" style="text-align: {align};" id="',this.id,'-xlhd-{#}">','<div class="x-grid3-hd-inner x-treegrid-hd-inner" unselectable="on">',this.enableHdMenu?'<a class="x-grid3-hd-btn" href="#"></a>':"",'{header}<img class="x-grid3-sort-icon" src="',Ext.BLANK_IMAGE_URL,'" />',"</div>","</td></tpl>","</tr></thead>","</table>","</div></div>","</div>",'<div class="x-treegrid-root-node">','<table class="x-treegrid-root-table" cellpadding="0" cellspacing="0" style="table-layout: fixed;"></table>',"</div>")}if(!this.colgroupTpl){this.colgroupTpl=new Ext.XTemplate('<colgroup><tpl for="columns"><col style="width: {width}px"/></tpl></colgroup>')}},initColumns:function(){var e=this.columns,a=e.length,d=[],b,f;for(b=0;b<a;b++){f=e[b];if(!f.isColumn){f.xtype=f.xtype?(/^tg/.test(f.xtype)?f.xtype:"tg"+f.xtype):"tgcolumn";f=Ext.create(f)}f.init(this);d.push(f);if(this.enableSort!==false&&f.sortable!==false){f.sortable=true;this.enableSort=true}}this.columns=d},onRender:function(){Ext.tree.TreePanel.superclass.onRender.apply(this,arguments);this.el.addClass("x-treegrid");this.outerCt=this.body.createChild({cls:"x-tree-root-ct x-treegrid-ct "+(this.useArrows?"x-tree-arrows":this.lines?"x-tree-lines":"x-tree-no-lines")});this.internalTpl.overwrite(this.outerCt,{columns:this.columns});this.mainHd=Ext.get(this.outerCt.dom.firstChild);this.innerHd=Ext.get(this.mainHd.dom.firstChild);this.innerBody=Ext.get(this.outerCt.dom.lastChild);this.innerCt=Ext.get(this.innerBody.dom.firstChild);this.colgroupTpl.insertFirst(this.innerCt,{columns:this.columns});if(this.hideHeaders){this.el.child(".x-grid3-header").setDisplayed("none")}else{if(this.enableHdMenu!==false){this.hmenu=new Ext.menu.Menu({id:this.id+"-hctx"});if(this.enableColumnHide!==false){this.colMenu=new Ext.menu.Menu({id:this.id+"-hcols-menu"});this.colMenu.on({scope:this,beforeshow:this.beforeColMenuShow,itemclick:this.handleHdMenuClick});this.hmenu.add({itemId:"columns",hideOnClick:false,text:this.columnsText,menu:this.colMenu,iconCls:"x-cols-icon"})}this.hmenu.on("itemclick",this.handleHdMenuClick,this)}}},setRootNode:function(a){a.attributes.uiProvider=Ext.ux.tree.TreeGridRootNodeUI;a=Ext.ux.tree.TreeGrid.superclass.setRootNode.call(this,a);if(this.innerCt){this.colgroupTpl.insertFirst(this.innerCt,{columns:this.columns})}return a},clearInnerCt:function(){if(Ext.isIE){var a=this.innerCt.dom;while(a.firstChild){a.removeChild(a.firstChild)}}else{Ext.ux.tree.TreeGrid.superclass.clearInnerCt.call(this)}},initEvents:function(){Ext.ux.tree.TreeGrid.superclass.initEvents.apply(this,arguments);this.mon(this.innerBody,"scroll",this.syncScroll,this);this.mon(this.innerHd,"click",this.handleHdDown,this);this.mon(this.mainHd,{scope:this,mouseover:this.handleHdOver,mouseout:this.handleHdOut})},onResize:function(b,c){Ext.ux.tree.TreeGrid.superclass.onResize.apply(this,arguments);var e=this.innerBody.dom;var f=this.innerHd.dom;if(!e){return}if(Ext.isNumber(c)){e.style.height=this.body.getHeight(true)-f.offsetHeight+"px"}if(Ext.isNumber(b)){var a=Ext.num(this.scrollOffset,Ext.getScrollBarWidth());if(this.reserveScrollOffset||((e.offsetWidth-e.clientWidth)>10)){this.setScrollOffset(a)}else{var d=this;setTimeout(function(){d.setScrollOffset(e.offsetWidth-e.clientWidth>10?a:0)},10)}}},updateColumnWidths:function(){var m=this.columns,o=m.length,a=this.outerCt.query("colgroup"),n=a.length,k,e,d,b;for(d=0;d<o;d++){k=m[d];for(b=0;b<n;b++){e=a[b];e.childNodes[d].style.width=(k.hidden?0:k.width)+"px"}}for(d=0,a=this.innerHd.query("td"),len=a.length;d<len;d++){k=Ext.fly(a[d]);if(m[d]&&m[d].hidden){k.addClass("x-treegrid-hd-hidden")}else{k.removeClass("x-treegrid-hd-hidden")}}var f=this.getTotalColumnWidth();Ext.fly(this.innerHd.dom.firstChild).setWidth(f+(this.scrollOffset||0));this.outerCt.select("table").setWidth(f);this.syncHeaderScroll()},getVisibleColumns:function(){var c=[],d=this.columns,a=d.length,b;for(b=0;b<a;b++){if(!d[b].hidden){c.push(d[b])}}return c},getTotalColumnWidth:function(){var d=0;for(var b=0,c=this.getVisibleColumns(),a=c.length;b<a;b++){d+=c[b].width}return d},setScrollOffset:function(a){this.scrollOffset=a;this.updateColumnWidths()},handleHdDown:function(k,f){var j=k.getTarget(".x-treegrid-hd");if(j&&Ext.fly(f).hasClass("x-grid3-hd-btn")){var b=this.hmenu.items,g=this.columns,a=this.findHeaderIndex(j),m=g[a],d=m.sortable;k.stopEvent();Ext.fly(j).addClass("x-grid3-hd-menu-open");this.hdCtxIndex=a;this.fireEvent("headerbuttonclick",b,m,j,a);this.hmenu.on("hide",function(){Ext.fly(j).removeClass("x-grid3-hd-menu-open")},this,{single:true});this.hmenu.show(f,"tl-bl?")}else{if(j){var a=this.findHeaderIndex(j);this.fireEvent("headerclick",this.columns[a],j,a)}}},handleHdOver:function(d,a){var c=d.getTarget(".x-treegrid-hd");if(c&&!this.headersDisabled){index=this.findHeaderIndex(c);this.activeHdRef=a;this.activeHdIndex=index;var b=Ext.get(c);this.activeHdRegion=b.getRegion();b.addClass("x-grid3-hd-over");this.activeHdBtn=b.child(".x-grid3-hd-btn");if(this.activeHdBtn){this.activeHdBtn.dom.style.height=(c.firstChild.offsetHeight-1)+"px"}}},handleHdOut:function(c,a){var b=c.getTarget(".x-treegrid-hd");if(b&&(!Ext.isIE||!c.within(b,true))){this.activeHdRef=null;Ext.fly(b).removeClass("x-grid3-hd-over");b.style.cursor=""}},findHeaderIndex:function(d){d=d.dom||d;var b=d.parentNode.childNodes;for(var a=0,e;e=b[a];a++){if(e==d){return a}}return -1},beforeColMenuShow:function(){var d=this.columns,b=d.length,a,e;this.colMenu.removeAll();for(a=1;a<b;a++){e=d[a];if(e.hideable!==false){this.colMenu.add(new Ext.menu.CheckItem({itemId:"col-"+a,text:e.header,checked:!e.hidden,hideOnClick:false,disabled:e.hideable===false}))}}},handleHdMenuClick:function(b){var a=this.hdCtxIndex,c=b.getItemId();if(this.fireEvent("headermenuclick",this.columns[a],c,a)!==false){a=c.substr(4);if(a>0&&this.columns[a]){this.setColumnVisible(a,!b.checked)}}return true},setColumnVisible:function(a,b){this.columns[a].hidden=!b;this.updateColumnWidths()},scrollToTop:function(){this.innerBody.dom.scrollTop=0;this.innerBody.dom.scrollLeft=0},syncScroll:function(){this.syncHeaderScroll();var a=this.innerBody.dom;this.fireEvent("bodyscroll",a.scrollLeft,a.scrollTop)},syncHeaderScroll:function(){var a=this.innerBody.dom;this.innerHd.dom.scrollLeft=a.scrollLeft;this.innerHd.dom.scrollLeft=a.scrollLeft},registerNode:function(a){Ext.ux.tree.TreeGrid.superclass.registerNode.call(this,a);if(!a.uiProvider&&!a.isRoot&&!a.ui.isTreeGridNodeUI){a.ui=new Ext.ux.tree.TreeGridNodeUI(a)}}});Ext.reg("treegrid",Ext.ux.tree.TreeGrid);(function(){var f=function(){return this}();if(typeof requirejs!="undefined"){return}var e=function(b,m,k){if(typeof b!="string"){e.original?e.original.apply(window,arguments):(console.error("dropping module because define wasn't a string."),console.trace());return}arguments.length==2&&(k=m),define.modules||(define.modules={}),define.modules[b]=k};f.define&&(e.original=f.define),f.define=e;var j=function(d,c){if(Object.prototype.toString.call(d)==="[object Array]"){var p=[];for(var o=0,n=d.length;o<n;++o){var m=g(d[o]);if(!m&&j.original){return j.original.apply(window,arguments)}p.push(m)}c&&c.apply(null,p)}else{if(typeof d=="string"){var k=g(d);return !k&&j.original?j.original.apply(window,arguments):(c&&c(),k)}if(j.original){return j.original.apply(window,arguments)}}};j.packaged=!0,f.require&&(j.original=f.require),f.require=j;var g=function(k){var d=define.modules[k];if(d==null){return null}if(typeof d=="function"){var m={};return d(require,m,{id:k,uri:""}),define.modules[k]=m,m}return d}})(),define("pilot/fixoldbrowsers",["require","exports","module","pilot/regexp","pilot/es5-shim"],function(e,d,f){e("pilot/regexp"),e("pilot/es5-shim")}),define("pilot/regexp",["require","exports","module"],function(k,j,r){function n(b){return(b.global?"g":"")+(b.ignoreCase?"i":"")+(b.multiline?"m":"")+(b.extended?"x":"")+(b.sticky?"y":"")}function m(f,e,s){if(Array.prototype.indexOf){return f.indexOf(e,s)}for(var g=s||0;g<f.length;g++){if(f[g]===e){return g}}return -1}var q={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},p=q.exec.call(/()??/,"")[1]===undefined,o=function(){var b=/^/g;return q.test.call(b,""),!b.lastIndex}();RegExp.prototype.exec=function(e){var d=q.exec.apply(this,arguments),s,g;if(d){!p&&d.length>1&&m(d,"")>-1&&(g=RegExp(this.source,q.replace.call(n(this),"g","")),q.replace.call(e.slice(d.index),g,function(){for(var b=1;b<arguments.length-2;b++){arguments[b]===undefined&&(d[b]=undefined)}}));if(this._xregexp&&this._xregexp.captureNames){for(var f=1;f<d.length;f++){s=this._xregexp.captureNames[f-1],s&&(d[s]=d[f])}}!o&&this.global&&!d[0].length&&this.lastIndex>d.index&&this.lastIndex--}return d},o||(RegExp.prototype.test=function(d){var c=q.exec.call(this,d);return c&&this.global&&!c[0].length&&this.lastIndex>c.index&&this.lastIndex--,!!c})}),define("pilot/es5-shim",["require","exports","module"],function(al,ak,aj){Function.prototype.bind||(Function.prototype.bind=function(f){var e=this;if(typeof e.apply!="function"||typeof e.call!="function"){return new TypeError}var j=af.call(arguments,1),g=function(){if(this instanceof g){var b=Object.create(e.prototype),a=e.apply(b,j.concat(af.call(arguments)));return a!==null&&Object(a)===a?a:b}return e.apply(f,j.concat(af.call(arguments)))};return g});var ai=Function.prototype.call,ah=Array.prototype,ag=Object.prototype,af=ah.slice,ae=ag.toString,ad=ai.bind(ag.hasOwnProperty),ac,ab,aa,Z,Y;if(Y=ad(ag,"__defineGetter__")){ac=ai.bind(ag.__defineGetter__),ab=ai.bind(ag.__defineSetter__),aa=ai.bind(ag.__lookupGetter__),Z=ai.bind(ag.__lookupSetter__)}Array.isArray||(Array.isArray=function(b){return Object.prototype.toString.call(b)=="[object Array]"}),Array.prototype.forEach||(Array.prototype.forEach=function(g){var f=Object(this),m=arguments[1],k=0,j=f.length>>>0;if(!g||!g.call){throw new TypeError}while(k<j){k in f&&g.call(m,f[k],k,f),k++}}),Array.prototype.map||(Array.prototype.map=function(j){var g=Object(this),o=g.length>>>0;if(typeof j!="function"){throw new TypeError}var n=new Array(o),m=arguments[1];for(var k=0;k<o;k++){k in g&&(n[k]=j.call(m,g[k],k,g))}return n}),Array.prototype.filter||(Array.prototype.filter=function(j){var g=Object(this),o=g.length>>>0;if(typeof j!="function"){throw new TypeError}var n=[],m=arguments[1];for(var k=0;k<o;k++){k in g&&j.call(m,g[k],k,g)&&n.push(g[k])}return n}),Array.prototype.every||(Array.prototype.every=function(g){if(this===void 0||this===null){throw new TypeError}if(typeof g!="function"){throw new TypeError}var f=Object(this),m=f.length>>>0,k=arguments[1];for(var j=0;j<m;j++){if(j in f&&!g.call(k,f[j],j,f)){return !1}}return !0}),Array.prototype.some||(Array.prototype.some=function(g){if(this===void 0||this===null){throw new TypeError}if(typeof g!="function"){throw new TypeError}var f=Object(this),m=f.length>>>0,k=arguments[1];for(var j=0;j<m;j++){if(j in f&&g.call(k,f[j],j,f)){return !0}}return !1}),Array.prototype.reduce||(Array.prototype.reduce=function(g){var f=Object(this),m=f.length>>>0;if(Object.prototype.toString.call(g)!="[object Function]"){throw new TypeError}if(!m&&arguments.length==1){throw new TypeError}var k=0,j;if(arguments.length>=2){j=arguments[1]}else{do{if(k in f){j=f[k++];break}if(++k>=m){throw new TypeError}}while(!0)}for(;k<m;k++){k in f&&(j=g.call(null,j,f[k],k,f))}return j}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(g){var f=Object(this),m=f.length>>>0;if(Object.prototype.toString.call(g)!="[object Function]"){throw new TypeError}if(!m&&arguments.length==1){throw new TypeError}var k,j=m-1;if(arguments.length>=2){k=arguments[1]}else{do{if(j in f){k=f[j--];break}if(--j<0){throw new TypeError}}while(!0)}do{j in this&&(k=g.call(null,k,f[j],j,f))}while(j--);return k}),Array.prototype.indexOf||(Array.prototype.indexOf=function(f){if(this===void 0||this===null){throw new TypeError}var e=Object(this),j=e.length>>>0;if(!j){return -1}var g=0;arguments.length>1&&(g=M(arguments[1])),g=g>=0?g:j-Math.abs(g);for(;g<j;g++){if(g in e&&e[g]===f){return g}}return -1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(f){if(this===void 0||this===null){throw new TypeError}var e=Object(this),j=e.length>>>0;if(!j){return -1}var g=j-1;arguments.length>1&&(g=M(arguments[1])),g=g>=0?g:j-Math.abs(g);for(;g>=0;g--){if(g in e&&f===e[g]){return g}}return -1}),Object.getPrototypeOf||(Object.getPrototypeOf=function(b){return b.__proto__||b.constructor.prototype});if(!Object.getOwnPropertyDescriptor){var X="Object.getOwnPropertyDescriptor called on a non-object: ";Object.getOwnPropertyDescriptor=function(j,f){if(typeof j!="object"&&typeof j!="function"||j===null){throw new TypeError(X+j)}if(!ad(j,f)){return undefined}var o,n,m;o={enumerable:!0,configurable:!0};if(Y){var k=j.__proto__;j.__proto__=ag;var n=aa(j,f),m=Z(j,f);j.__proto__=k;if(n||m){return n&&(o.get=n),m&&(o.set=m),o}}return o.value=j[f],o}}Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(b){return Object.keys(b)}),Object.create||(Object.create=function(f,e){var j;if(f===null){j={"__proto__":null}}else{if(typeof f!="object"){throw new TypeError("typeof prototype["+typeof f+"] != 'object'")}var g=function(){};g.prototype=f,j=new g,j.__proto__=f}return typeof e!="undefined"&&Object.defineProperties(j,e),j});var W=Object.defineProperty,U=!!W;if(U){var Q={};Object.defineProperty(Q,"",{}),U="" in Q}if(!U){var O="Property description must be an object: ",L="Object.defineProperty called on non-object: ",K="getters & setters can not be defined on this javascript engine";Object.defineProperty=function(f,e,j){if(typeof f!="object"&&typeof f!="function"){throw new TypeError(L+f)}if(typeof j!="object"||j===null){throw new TypeError(O+j)}if(W&&f.nodeType){return W(f,e,j)}if(ad(j,"value")){if(Y&&(aa(f,e)||Z(f,e))){var g=f.__proto__;f.__proto__=ag,delete f[e],f[e]=j.value,f.__proto__=g}else{f[e]=j.value}}else{if(!Y){throw new TypeError(K)}ad(j,"get")&&ac(f,e,j.get),ad(j,"set")&&ab(f,e,j.set)}return f}}Object.defineProperties||(Object.defineProperties=function(e,d){for(var f in d){ad(d,f)&&Object.defineProperty(e,f,d[f])}return e}),Object.seal||(Object.seal=function(b){return b}),Object.freeze||(Object.freeze=function(b){return b});try{Object.freeze(function(){})}catch(J){Object.freeze=function(d){return function c(a){return typeof a=="function"?a:d(a)}}(Object.freeze)}Object.preventExtensions||(Object.preventExtensions=function(b){return b}),Object.isSealed||(Object.isSealed=function(b){return !1}),Object.isFrozen||(Object.isFrozen=function(b){return !1}),Object.isExtensible||(Object.isExtensible=function(b){return !0});if(!Object.keys){var I=!0,H=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],G=H.length;for(var F in {toString:null}){I=!1}Object.keys=function E(g){if(typeof g!="object"&&typeof g!="function"||g===null){throw new TypeError("Object.keys called on a non-object")}var n=[];for(var f in g){ad(g,f)&&n.push(f)}if(I){for(var m=0,k=G;m<k;m++){var j=H[m];ad(g,j)&&n.push(j)}}return n}}Date.prototype.toISOString||(Date.prototype.toISOString=function(){var e,d,f;if(!isFinite(this)){throw new RangeError}e=[this.getUTCFullYear(),this.getUTCMonth()+1,this.getUTCDate(),this.getUTCHours(),this.getUTCMinutes(),this.getUTCSeconds()],d=e.length;while(d--){f=e[d],f<10&&(e[d]="0"+f)}return e.slice(0,3).join("-")+"T"+e.slice(3).join(":")+"."+("000"+this.getUTCMilliseconds()).slice(-3)+"Z"}),Date.now||(Date.now=function(){return(new Date).getTime()}),Date.prototype.toJSON||(Date.prototype.toJSON=function(b){if(typeof this.toISOString.call!="function"){throw new TypeError}return this.toISOString.call(this)}),isNaN(Date.parse("2011-06-15T21:40:05+06:00"))&&(Date=function(g){var f=function(t,s,r,q,p,o,n){var b=arguments.length;if(this instanceof g){var a=b==1&&String(t)===t?new g(f.parse(t)):b>=7?new g(t,s,r,q,p,o,n):b>=6?new g(t,s,r,q,p,o):b>=5?new g(t,s,r,q,p):b>=4?new g(t,s,r,q):b>=3?new g(t,s,r):b>=2?new g(t,s):b>=1?new g(t):new g;return a.constructor=f,a}return g.apply(this,arguments)},m=new RegExp("^(d{4})(?:-(d{2})(?:-(d{2})(?:T(d{2}):(d{2})(?::(d{2})(?:.(d{3}))?)?(?:Z|(?:([-+])(d{2}):(d{2})))?)?)?)?$");for(var k in g){f[k]=g[k]}return f.now=g.now,f.UTC=g.UTC,f.prototype=g.prototype,f.prototype.constructor=f,f.parse=function j(a){var r=m.exec(a);if(r){r.shift();for(var q=1;q<7;q++){r[q]=+(r[q]||(q<3?1:0)),q==1&&r[q]--}var p=+r.pop(),o=+r.pop(),n=r.pop(),c=0;if(n){if(o>23||minuteOffset>59){return NaN}c=(o*60+minuteOffset)*60000*(n=="+"?-1:1)}return g.UTC.apply(this,r)+c}return g.parse.apply(this,arguments)},f}(Date));if(!String.prototype.trim){var V="[\t\n-\r -\u2028\u2029]",R=new RegExp("^"+V+V+"*"),P=new RegExp(V+V+"*$");String.prototype.trim=function(){return String(this).replace(R,"").replace(P,"")}}var M=function(b){return b=+b,b!==b?b=-1:b!==0&&b!==1/0&&b!==-Infinity&&(b=(b>0||-1)*Math.floor(Math.abs(b))),b}}),define("ace/ace",["require","exports","module","pilot/index","pilot/fixoldbrowsers","pilot/plugin_manager","pilot/dom","pilot/event","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/theme/textmate","pilot/environment"],function(u,t,s){u("pilot/index"),u("pilot/fixoldbrowsers");var r=u("pilot/plugin_manager").catalog;r.registerPlugins(["pilot/index"]);var q=u("pilot/dom"),p=u("pilot/event"),o=u("ace/editor").Editor,n=u("ace/edit_session").EditSession,m=u("ace/undomanager").UndoManager,k=u("ace/virtual_renderer").VirtualRenderer;t.edit=function(a){typeof a=="string"&&(a=document.getElementById(a));var f=new n(q.getInnerText(a));f.setUndoManager(new m),a.innerHTML="";var e=new o(new k(a,u("ace/theme/textmate")));e.setSession(f);var d=u("pilot/environment").create();return r.startupPlugins({env:d}).then(function(){d.document=f,d.editor=e,e.resize(),p.addListener(window,"resize",function(){e.resize()}),a.env=d}),e.env=d,e}}),define("pilot/index",["require","exports","module","pilot/fixoldbrowsers","pilot/types/basic","pilot/types/command","pilot/types/settings","pilot/commands/settings","pilot/commands/basic","pilot/settings/canon","pilot/canon"],function(e,d,f){d.startup=function(a,g){e("pilot/fixoldbrowsers"),e("pilot/types/basic").startup(a,g),e("pilot/types/command").startup(a,g),e("pilot/types/settings").startup(a,g),e("pilot/commands/settings").startup(a,g),e("pilot/commands/basic").startup(a,g),e("pilot/settings/canon").startup(a,g),e("pilot/canon").startup(a,g)},d.shutdown=function(a,g){e("pilot/types/basic").shutdown(a,g),e("pilot/types/command").shutdown(a,g),e("pilot/types/settings").shutdown(a,g),e("pilot/commands/settings").shutdown(a,g),e("pilot/commands/basic").shutdown(a,g),e("pilot/settings/canon").shutdown(a,g),e("pilot/canon").shutdown(a,g)}}),define("pilot/types/basic",["require","exports","module","pilot/types"],function(B,A,z){function s(b){if(!Array.isArray(b.data)&&typeof b.data!="function"){throw new Error("instances of SelectionType need typeSpec.data to be an array or function that returns an array:"+JSON.stringify(b))}Object.keys(b).forEach(function(a){this[a]=b[a]},this)}function q(b){if(typeof b.defer!="function"){throw new Error("Instances of DeferredType need typeSpec.defer to be a function that returns a type")}Object.keys(b).forEach(function(a){this[a]=b[a]},this)}function p(b){if(b instanceof x){this.subtype=b}else{if(typeof b!="string"){throw new Error("Can' handle array subtype")}this.subtype=y.getType(b);if(this.subtype==null){throw new Error("Unknown array subtype: "+b)}}}var y=B("pilot/types"),x=y.Type,w=y.Conversion,v=y.Status,u=new x;u.stringify=function(b){return b},u.parse=function(b){if(typeof b!="string"){throw new Error("non-string passed to text.parse()")}return new w(b)},u.name="text";var t=new x;t.stringify=function(b){return b?""+b:null},t.parse=function(d){if(typeof d!="string"){throw new Error("non-string passed to number.parse()")}if(d.replace(/\s/g,"").length===0){return new w(null,v.INCOMPLETE,"")}var c=new w(parseInt(d,10));return isNaN(c.value)&&(c.status=v.INVALID,c.message="Can't convert \""+d+'" to a number.'),c},t.decrement=function(b){return b-1},t.increment=function(b){return b+1},t.name="number",s.prototype=new x,s.prototype.stringify=function(b){return b},s.prototype.parse=function(g){if(typeof g!="string"){throw new Error("non-string passed to parse()")}if(!this.data){throw new Error("Missing data on selection type extension.")}var f=typeof this.data=="function"?this.data():this.data,n=!1,m,k=[];f.forEach(function(a){g==a?(m=this.fromString(a),n=!0):a.indexOf(g)===0&&k.push(this.fromString(a))},this);if(n){return new w(m)}this.noMatch&&this.noMatch();if(k.length>0){var j="Possibilities"+(g.length===0?"":" for '"+g+"'");return new w(null,v.INCOMPLETE,j,k)}var j="Can't use '"+g+"'.";return new w(null,v.INVALID,j,k)},s.prototype.fromString=function(b){return b},s.prototype.decrement=function(f){var e=typeof this.data=="function"?this.data():this.data,j;if(f==null){j=e.length-1}else{var g=this.stringify(f),j=e.indexOf(g);j=j===0?e.length-1:j-1}return this.fromString(e[j])},s.prototype.increment=function(f){var e=typeof this.data=="function"?this.data():this.data,j;if(f==null){j=0}else{var g=this.stringify(f),j=e.indexOf(g);j=j===e.length-1?0:j+1}return this.fromString(e[j])},s.prototype.name="selection",A.SelectionType=s;var r=new s({name:"bool",data:["true","false"],stringify:function(b){return""+b},fromString:function(b){return b==="true"?!0:!1}});q.prototype=new x,q.prototype.stringify=function(b){return this.defer().stringify(b)},q.prototype.parse=function(b){return this.defer().parse(b)},q.prototype.decrement=function(d){var c=this.defer();return c.decrement?c.decrement(d):undefined},q.prototype.increment=function(d){var c=this.defer();return c.increment?c.increment(d):undefined},q.prototype.name="deferred",A.DeferredType=q,p.prototype=new x,p.prototype.stringify=function(b){return b.join(" ")},p.prototype.parse=function(b){return this.defer().parse(b)},p.prototype.name="array";var o=!1;A.startup=function(){if(o){return}o=!0,y.registerType(u),y.registerType(t),y.registerType(r),y.registerType(s),y.registerType(q),y.registerType(p)},A.shutdown=function(){o=!1,y.unregisterType(u),y.unregisterType(t),y.unregisterType(r),y.unregisterType(s),y.unregisterType(q),y.unregisterType(p)}}),define("pilot/types",["require","exports","module"],function(k,j,r){function p(f,d,s,g){this.value=f,this.status=d||q.VALID,this.message=s,this.predictions=g||[]}function o(){}function m(f,e){if(f.substr(-2)==="[]"){var s=f.slice(0,-2);return new n.array(s)}var g=n[f];return typeof g=="function"&&(g=new g(e)),g}var q={VALID:{toString:function(){return"VALID"},valueOf:function(){return 0}},INCOMPLETE:{toString:function(){return"INCOMPLETE"},valueOf:function(){return 1}},INVALID:{toString:function(){return"INVALID"},valueOf:function(){return 2}},combine:function(e){var d=q.VALID;for(var f=0;f<e.length;f++){e[f].valueOf()>d.valueOf()&&(d=e[f])}return d}};j.Status=q,j.Conversion=p,o.prototype={stringify:function(b){throw new Error("not implemented")},parse:function(b){throw new Error("not implemented")},name:undefined,increment:function(b){return undefined},decrement:function(b){return undefined},getDefault:function(){return this.parse("")}},j.Type=o;var n={};j.registerType=function(b){if(typeof b=="object"){if(!(b instanceof o)){throw new Error("Can't registerType using: "+b)}if(!b.name){throw new Error("All registered types must have a name")}n[b.name]=b}else{if(typeof b!="function"){throw new Error("Unknown type: "+b)}if(!b.prototype.name){throw new Error("All registered types must have a name")}n[b.prototype.name]=b}},j.registerTypes=function(b){Object.keys(b).forEach(function(e){var a=b[e];a.name=e,j.registerType(a)})},j.deregisterType=function(b){delete n[b.name]},j.getType=function(b){if(typeof b=="string"){return m(b)}if(typeof b=="object"){if(!b.name){throw new Error("Missing 'name' member to typeSpec")}return m(b.name,b)}throw new Error("Can't extract type from "+b)}}),define("pilot/types/command",["require","exports","module","pilot/canon","pilot/types/basic","pilot/types"],function(k,j,q){var p=k("pilot/canon"),o=k("pilot/types/basic").SelectionType,n=k("pilot/types"),m=new o({name:"command",data:function(){return p.getCommandNames()},stringify:function(b){return b.name},fromString:function(b){return p.getCommand(b)}});j.startup=function(){n.registerType(m)},j.shutdown=function(){n.unregisterType(m)}}),define("pilot/canon",["require","exports","module","pilot/console","pilot/stacktrace","pilot/oop","pilot/useragent","pilot/keys","pilot/event_emitter","pilot/typecheck","pilot/catalog","pilot/types","pilot/lang"],function(ax,aw,av){function ad(f,e,j,g){return(g&&f.toLowerCase()||f).replace(/(?:^\s+|\n|\s+$)/g,"").split(new RegExp("[\\s ]*"+e+"[\\s ]*","g"),j||999)}function ac(k,j,r){var q,p=0,o=ad(k,"\\-",null,!0),n=0,m=o.length;for(;n<m;++n){ap.KEY_MODS[o[n]]?p=p|ap.KEY_MODS[o[n]]:q=o[n]||"-"}if(r==null){return{key:q,hashId:p}}(r[p]||(r[p]={}))[q]=j}function aa(k){var j=k.bindKey,q=j[ab],p=af,o=ae;if(!j.sender){throw new Error("All key bindings must have a sender")}if(!j.mac&&j.mac!==null){throw new Error("All key bindings must have a mac key binding")}if(!j.win&&j.win!==null){throw new Error("All key bindings must have a windows key binding")}if(!j[ab]){return}if(typeof j.sender=="string"){var n=ad(j.sender,"\\|",null,!0);n.forEach(function(a){p[a]||(p[a]={}),q.split("|").forEach(function(b){ac(b,k,p[a])})})}else{if(!an.isFunction(j.sender)){throw new Error("Key binding must have a sender that is a string or function")}var m={command:k,sender:j.sender};keyData=ac(q),o[keyData.hashId]||(o[keyData.hashId]={}),o[keyData.hashId][keyData.key]?o[keyData.hashId][keyData.key].push(m):o[keyData.hashId][keyData.key]=[m]}}function Z(k,j,q,p){an.isNumber(p)&&(p=ap.keyCodeToString(p));var o=(ae[q]||{})[p]||[];for(var n=0;n<o.length;n++){if(o[n].sender(k,j,q,p)){return o[n].command}}var m=af[j];return m&&m[q]&&m[q][p]}function Y(g,f,m,k){var j=Z(g,f,m,k);return j?O(j,g,f,{}):!1}function W(b){if(!b.name){throw new Error("All registered commands must have a name")}b.params==null&&(b.params=[]);if(!Array.isArray(b.params)){throw new Error("command.params must be an array in "+b.name)}b.params.forEach(function(a){if(!a.name){throw new Error("In "+b.name+": all params must have a name")}V(b.name,a)},this),ag[b.name]=b,b.bindKey&&aa(b),X.push(b.name),X.sort()}function V(e,d){var f=d.type;d.type=ak.getType(f);if(d.type==null){throw new Error("In "+e+"/"+d.name+": can't find type for: "+JSON.stringify(f))}}function U(k){var j=typeof k=="string"?k:k.name;k=ag[j],delete ag[j],aj.arrayRemove(X,j);var q=af;for(var p in q){for(var o in q[p]){for(var n in q[p][o]){q[p][o][n]==k&&delete q[p][o][n]}}}var m=ae;for(var p in m){for(var o in m[p]){m[p][o].forEach(function(a,d){a.command==k&&m[p][o].splice(d,1)})}}}function R(b){return ag[b]}function Q(){return X}function P(k,j){var r=k.args,q=k.command.params;for(var p=0;p<q.length;p++){var o=q[p];if(k.getParamStatus(o)!=al.VALID||o.defaultValue===null){var n=o.description;o.defaultValue===null&&(n+=" (optional)");var m=prompt(n,o.defaultValue||"");if(!m){j();return}r[o.name]=m}}j()}function O(s,r,q,p,o){function m(){s.exec(r,n.args,n),!n.isAsync&&!n.isDone&&n.done()}typeof s=="string"&&(s=ag[s]);if(!s){return !1}var n=new K({sender:q,command:s,args:p||{},typed:o});if(n.getStatus()==al.INVALID){return au.error("Canon.exec: Invalid parameter(s) passed to "+s.name),!1}if(n.getStatus()==al.INCOMPLETE){var k,d=r[q];if(!d||!d.getArgsProvider||!(k=d.getArgsProvider())){k=P}return k(n,function(){n.getStatus()==al.VALID&&m()}),!0}return m(),!0}function K(b){b=b||{},this.command=b.command,this.args=b.args,this.typed=b.typed,this._begunOutput=!1,this.start=new Date,this.end=null,this.completed=!1,this.error=!1}var au=ax("pilot/console"),at=ax("pilot/stacktrace").Trace,ar=ax("pilot/oop"),aq=ax("pilot/useragent"),ap=ax("pilot/keys"),ao=ax("pilot/event_emitter").EventEmitter,an=ax("pilot/typecheck"),am=ax("pilot/catalog"),al=ax("pilot/types").Status,ak=ax("pilot/types"),aj=ax("pilot/lang"),ai={name:"command",description:"A command is a bit of functionality with optional typed arguments which can do something small like moving the cursor around the screen, or large like cloning a project from VCS.",indexOn:"name"};aw.startup=function(d,c){am.addExtensionSpec(ai)},aw.shutdown=function(d,c){am.removeExtensionSpec(ai)};var ah={name:"thing",description:"thing is an example command",params:[{name:"param1",description:"an example parameter",type:"text",defaultValue:null}],exec:function(e,d,f){thing()}},ag={},af={},ae={},ab=aq.isMac?"mac":"win",X=[];aw.removeCommand=U,aw.addCommand=W,aw.getCommand=R,aw.getCommandNames=Q,aw.findKeyCommand=Z,aw.exec=O,aw.execKeyCommand=Y,aw.upgradeType=V,ar.implement(aw,ao);var M=[],L=100;ar.implement(K.prototype,ao),K.prototype.getParamStatus=function(g){var f=this.args||{};if(g.name in f){if(f[g.name]==null){return g.defaultValue===null?al.VALID:al.INCOMPLETE}var m,k=f[g.name].toString();try{m=g.type.parse(k)}catch(j){return al.INVALID}if(m.status!=al.VALID){return m.status}}else{if(g.defaultValue===undefined){return al.INCOMPLETE}}return al.VALID},K.prototype.getParamNameStatus=function(e){var d=this.command.params||[];for(var f=0;f<d.length;f++){if(d[f].name==e){return this.getParamStatus(d[f])}}throw"Parameter '"+e+"' not defined on command '"+this.command.name+"'"},K.prototype.getStatus=function(){var f=this.args||{},e=this.command.params;if(!e||e.length==0){return al.VALID}var j=[];for(var g=0;g<e.length;g++){j.push(this.getParamStatus(e[g]))}return al.combine(j)},K.prototype._beginOutput=function(){this._begunOutput=!0,this.outputs=[],M.push(this);while(M.length>L){M.shiftObject()}aw._dispatchEvent("output",{requests:M,request:this})},K.prototype.doneWithError=function(b){this.error=!0,this.done(b)},K.prototype.async=function(){this.isAsync=!0,this._begunOutput||this._beginOutput()},K.prototype.output=function(b){return this._begunOutput||this._beginOutput(),typeof b!="string"&&!(b instanceof Node)&&(b=b.toString()),this.outputs.push(b),this.isDone=!0,this._dispatchEvent("output",{}),this},K.prototype.done=function(b){this.completed=!0,this.end=new Date,this.duration=this.end.getTime()-this.start.getTime(),b&&this.output(b),this.isDone||(this.isDone=!0,this._dispatchEvent("output",{}))},aw.Request=K}),define("pilot/console",["require","exports","module"],function(g,f,m){var k=function(){},j=["assert","count","debug","dir","dirxml","error","group","groupEnd","info","log","profile","profileEnd","time","timeEnd","trace","warn"];typeof window=="undefined"?j.forEach(function(b){f[b]=function(){var a=Array.prototype.slice.call(arguments),d={op:"log",method:b,args:a};postMessage(JSON.stringify(d))}}):j.forEach(function(b){window.console&&window.console[b]?f[b]=Function.prototype.bind.call(window.console[b],window.console):f[b]=k})}),define("pilot/stacktrace",["require","exports","module","pilot/useragent","pilot/console"],function(w,v,u){function q(e){for(var d=0;d<e.length;++d){var f=e[d];typeof f=="object"?e[d]="#object":typeof f=="function"?e[d]="#function":typeof f=="string"&&(e[d]='"'+f+'"')}return e.join(",")}function o(){}var t=w("pilot/useragent"),s=w("pilot/console"),r=function(){return t.isGecko?"firefox":t.isOpera?"opera":"other"}(),p={chrome:function(d){var c=d.stack;return c?c.replace(/^.*?\n/,"").replace(/^.*?\n/,"").replace(/^.*?\n/,"").replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@").split("\n"):(s.log(d),[])},firefox:function(d){var c=d.stack;return c?(c=c.replace(/(?:\n@:0)?\s+$/m,""),c=c.replace(/^\(/gm,"{anonymous}("),c.split("\n")):(s.log(d),[])},opera:function(k){var j=k.message.split("\n"),B="{anonymous}",A=/Line\s+(\d+).*?script\s+(http\S+)(?:.*?in\s+function\s+(\S+))?/i,z,y,x;for(z=4,y=0,x=j.length;z<x;z+=2){A.test(j[z])&&(j[y++]=(RegExp.$3?RegExp.$3+"()@"+RegExp.$2+RegExp.$1:B+"()@"+RegExp.$2+":"+RegExp.$1)+" -- "+j[z+1].replace(/^\s+/,""))}return j.splice(y,j.length-y),j},other:function(j){var g="{anonymous}",B=/function\s*([\w\-$]+)?\s*\(/i,A=[],z=0,y,x,k=10;while(j&&A.length<k){y=B.test(j.toString())?RegExp.$1||g:g,x=Array.prototype.slice.call(j.arguments),A[z++]=y+"("+q(x)+")";if(j===j.caller&&window.opera){break}j=j.caller}return A}};o.prototype={sourceCache:{},ajax:function(d){var c=this.createXMLHTTPObject();if(!c){return}return c.open("GET",d,!1),c.setRequestHeader("User-Agent","XMLHTTP/1.0"),c.send(""),c.responseText},createXMLHTTPObject:function(){var f,e=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}];for(var j=0;j<e.length;j++){try{return f=e[j](),this.createXMLHTTPObject=e[j],f}catch(g){}}},getSource:function(b){return b in this.sourceCache||(this.sourceCache[b]=this.ajax(b).split("\n")),this.sourceCache[b]},guessFunctions:function(k){for(var j=0;j<k.length;++j){var C=/{anonymous}\(.*\)@(\w+:\/\/([-\w\.]+)+(:\d+)?[^:]+):(\d+):?(\d+)?/,B=k[j],A=C.exec(B);if(A){var z=A[1],y=A[4];if(z&&y){var x=this.guessFunctionName(z,y);k[j]=B.replace("{anonymous}",x)}}}return k},guessFunctionName:function(e,d){try{return this.guessFunctionNameFromLines(d,this.getSource(e))}catch(f){return"getSource failed with url: "+e+", exception: "+f.toString()}},guessFunctionNameFromLines:function(k,j){var C=/function ([^(]*)\(([^)]*)\)/,B=/['"]?([0-9A-Za-z_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,A="",z=10;for(var y=0;y<z;++y){A=j[k-y]+A;if(A!==undefined){var x=B.exec(A);if(x){return x[1]}x=C.exec(A);if(x&&x[1]){return x[1]}}}return"(?)"}};var n=new o,m=[/http:\/\/localhost:4020\/sproutcore.js:/];v.ignoreFramesMatching=function(b){m.push(b)},v.Trace=function(d,c){this._ex=d,this._stack=p[r](d),c&&(this._stack=n.guessFunctions(this._stack))},v.Trace.prototype.log=function(g){g<=0&&(g=999999999);var e=0;for(var x=0;x<this._stack.length&&e<g;x++){var k=this._stack[x],j=!0;m.forEach(function(b){b.test(k)&&(j=!1)}),j&&(s.debug(k),e++)}}}),define("pilot/useragent",["require","exports","module"],function(j,g,o){var n=(navigator.platform.match(/mac|win|linux/i)||["other"])[0].toLowerCase(),m=navigator.userAgent,k=navigator.appVersion;g.isWin=n=="win",g.isMac=n=="mac",g.isLinux=n=="linux",g.isIE=navigator.appName=="Microsoft Internet Explorer"&&parseFloat(navigator.userAgent.match(/MSIE ([0-9]+[\.0-9]+)/)[1]),g.isOldIE=g.isIE&&g.isIE<9,g.isGecko=g.isMozilla=window.controllers&&window.navigator.product==="Gecko",g.isOldGecko=g.isGecko&&/rv\:1/.test(navigator.userAgent),g.isOpera=window.opera&&Object.prototype.toString.call(window.opera)=="[object Opera]",g.isWebKit=parseFloat(m.split("WebKit/")[1])||undefined,g.isChrome=parseFloat(m.split(" Chrome/")[1])||undefined,g.isAIR=m.indexOf("AdobeAIR")>=0,g.isIPad=m.indexOf("iPad")>=0,g.isTouchPad=m.indexOf("TouchPad")>=0,g.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},g.getOS=function(){return g.isMac?g.OS.MAC:g.isLinux?g.OS.LINUX:g.OS.WINDOWS}}),define("pilot/oop",["require","exports","module"],function(e,d,f){d.inherits=function(){var b=function(){};return function(a,g){b.prototype=g.prototype,a.super_=g.prototype,a.prototype=new b,a.prototype.constructor=a}}(),d.mixin=function(j,g){for(var k in g){j[k]=g[k]}},d.implement=function(b,g){d.mixin(b,g)}}),define("pilot/keys",["require","exports","module","pilot/oop"],function(g,f,m){var k=g("pilot/oop"),j=function(){var d={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,meta:8,command:8},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",188:",",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:'"'}};for(i in d.FUNCTION_KEYS){var c=d.FUNCTION_KEYS[i].toUpperCase();d[c]=parseInt(i,10)}return k.mixin(d,d.MODIFIER_KEYS),k.mixin(d,d.PRINTABLE_KEYS),k.mixin(d,d.FUNCTION_KEYS),d}();k.mixin(f,j),f.keyCodeToString=function(b){return(j[b]||String.fromCharCode(b)).toLowerCase()}}),define("pilot/event_emitter",["require","exports","module"],function(f,e,j){var g={};g._emit=g._dispatchEvent=function(m,k){this._eventRegistry=this._eventRegistry||{};var o=this._eventRegistry[m];if(!o||!o.length){return}var k=k||{};k.type=m;for(var n=0;n<o.length;n++){o[n](k)}},g.on=g.addEventListener=function(k,d){this._eventRegistry=this._eventRegistry||{};var m=this._eventRegistry[k];if(!m){var m=this._eventRegistry[k]=[]}m.indexOf(d)==-1&&m.push(d)},g.removeListener=g.removeEventListener=function(m,k){this._eventRegistry=this._eventRegistry||{};var o=this._eventRegistry[m];if(!o){return}var n=o.indexOf(k);n!==-1&&o.splice(n,1)},g.removeAllListeners=function(b){this._eventRegistry&&(this._eventRegistry[b]=[])},e.EventEmitter=g}),define("pilot/typecheck",["require","exports","module"],function(f,e,j){var g=Object.prototype.toString;e.isString=function(b){return b&&g.call(b)==="[object String]"},e.isBoolean=function(b){return b&&g.call(b)==="[object Boolean]"},e.isNumber=function(b){return b&&g.call(b)==="[object Number]"&&isFinite(b)},e.isObject=function(b){return b!==undefined&&(b===null||typeof b=="object"||Array.isArray(b)||e.isFunction(b))},e.isFunction=function(b){return b&&g.call(b)==="[object Function]"}}),define("pilot/catalog",["require","exports","module"],function(f,e,j){var g={};e.addExtensionSpec=function(b){g[b.name]=b},e.removeExtensionSpec=function(b){typeof b=="string"?delete g[b]:delete g[b.name]},e.getExtensionSpec=function(b){return g[b]},e.getExtensionSpecs=function(){return Object.keys(g)}}),define("pilot/lang",["require","exports","module"],function(g,f,m){f.stringReverse=function(b){return b.split("").reverse().join("")},f.stringRepeat=function(d,c){return(new Array(c+1)).join(d)};var k=/^\s\s*/,j=/\s\s*$/;f.stringTrimLeft=function(b){return b.replace(k,"")},f.stringTrimRight=function(b){return b.replace(j,"")},f.copyObject=function(e){var d={};for(var n in e){d[n]=e[n]}return d},f.copyArray=function(d){var c=[];for(i=0,l=d.length;i<l;i++){d[i]&&typeof d[i]=="object"?c[i]=this.copyObject(d[i]):c[i]=d[i]}return c},f.deepCopy=function(e){if(typeof e!="object"){return e}var d=e.constructor();for(var n in e){typeof e[n]=="object"?d[n]=this.deepCopy(e[n]):d[n]=e[n]}return d},f.arrayToMap=function(e){var d={};for(var n=0;n<e.length;n++){d[e[n]]=1}return d},f.arrayRemove=function(e,d){for(var n=0;n<=e.length;n++){d===e[n]&&e.splice(n,1)}},f.escapeRegExp=function(b){return b.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},f.deferredCall=function(n){var e=null,p=function(){e=null,n()},o=function(b){return e||(e=setTimeout(p,b||0)),o};return o.schedule=o,o.call=function(){return this.cancel(),n(),o},o.cancel=function(){return clearTimeout(e),e=null,o},o}}),define("pilot/types/settings",["require","exports","module","pilot/types/basic","pilot/types","pilot/settings"],function(w,v,u){var t=w("pilot/types/basic").SelectionType,s=w("pilot/types/basic").DeferredType,r=w("pilot/types"),q=w("pilot/settings").settings,p,o=new t({name:"setting",data:function(){return m.settings.getSettingNames()},stringify:function(b){return p=b,b.name},fromString:function(b){return p=q.getSetting(b),p},noMatch:function(){p=null}}),n=new s({name:"settingValue",defer:function(){return p?p.type:r.getType("text")},getDefault:function(){var f=this.parse("");if(p){var e=p.get();if(f.predictions.length===0){f.predictions.push(e)}else{var j=!1;for(;;){var g=f.predictions.indexOf(e);if(g===-1){break}f.predictions.splice(g,1),j=!0}j&&f.predictions.push(e)}}return f}}),m;v.startup=function(d,c){m=d.env,r.registerType(o),r.registerType(n)},v.shutdown=function(d,c){r.unregisterType(o),r.unregisterType(n)}}),define("pilot/settings",["require","exports","module","pilot/console","pilot/oop","pilot/types","pilot/event_emitter","pilot/catalog"],function(x,w,v){function o(d,c){this._settings=c,Object.keys(d).forEach(function(a){this[a]=d[a]},this),this.type=s.getType(this.type);if(this.type==null){throw new Error("In "+this.name+": can't find type for: "+JSON.stringify(d.type))}if(!this.name){throw new Error("Setting.name == undefined. Ignoring.",this)}if(!this.defaultValue===undefined){throw new Error("Setting.defaultValue == undefined",this)}this.onChange&&this.on("change",this.onChange.bind(this)),this.set(this.defaultValue)}function n(b){this._deactivated={},this._settings={},this._settingNames=[],b&&this.setPersister(b)}function m(){}var u=x("pilot/console"),t=x("pilot/oop"),s=x("pilot/types"),r=x("pilot/event_emitter").EventEmitter,q=x("pilot/catalog"),p={name:"setting",description:"A setting is something that the application offers as a way to customize how it works",register:"env.settings.addSetting",indexOn:"name"};w.startup=function(d,c){q.addExtensionSpec(p)},w.shutdown=function(d,c){q.removeExtensionSpec(p)},o.prototype={get:function(){return this.value},set:function(b){if(this.value===b){return}this.value=b,this._settings.persister&&this._settings.persister.persistValue(this._settings,this.name,b),this._dispatchEvent("change",{setting:this,value:b})},resetValue:function(){this.set(this.defaultValue)},toString:function(){return this.name}},t.implement(o.prototype,r),n.prototype={addSetting:function(d){var c=new o(d,this);this._settings[c.name]=c,this._settingNames.push(c.name),this._settingNames.sort()},addSettings:function(b){Object.keys(b).forEach(function(a){var d=b[a];"name" in d||(d.name=a),this.addSetting(d)},this)},removeSetting:function(d){var c=typeof d=="string"?d:d.name;d=this._settings[c],delete this._settings[c],util.arrayRemove(this._settingNames,c),settings.removeAllListeners("change")},removeSettings:function(b){Object.keys(b).forEach(function(a){var d=b[a];"name" in d||(d.name=a),this.removeSettings(d)},this)},getSettingNames:function(){return this._settingNames},getSetting:function(b){return this._settings[b]},setPersister:function(b){this._persister=b,b&&b.loadInitialValues(this)},resetAll:function(){this.getSettingNames().forEach(function(b){this.resetValue(b)},this)},_list:function(){var b=[];return this.getSettingNames().forEach(function(a){b.push({key:a,value:this.getSetting(a).get()})},this),b},_loadDefaultValues:function(){this._loadFromObject(this._getDefaultValues())},_loadFromObject:function(f){for(var e in f){if(f.hasOwnProperty(e)){var j=this._settings[e];if(j){var g=j.type.parse(f[e]);this.set(e,g)}else{this.set(e,f[e])}}}},_saveToObject:function(){return this.getSettingNames().map(function(b){return this._settings[b].type.stringify(this.get(b))}.bind(this))},_getDefaultValues:function(){return this.getSettingNames().map(function(b){return this._settings[b].spec.defaultValue}.bind(this))}},w.settings=new n,m.prototype={loadInitialValues:function(d){d._loadDefaultValues();var c=cookie.get("settings");d._loadFromObject(JSON.parse(c))},persistValue:function(g,d,y){try{var k=JSON.stringify(g._saveToObject());cookie.set("settings",k)}catch(j){u.error("Unable to JSONify the settings! "+j);return}}},w.CookiePersister=m}),define("pilot/commands/settings",["require","exports","module","pilot/canon"],function(j,g,o){var n={name:"set",params:[{name:"setting",type:"setting",description:"The name of the setting to display or alter",defaultValue:null},{name:"value",type:"settingValue",description:"The new value for the chosen setting",defaultValue:null}],description:"define and show settings",exec:function(p,f,s){var r;if(!f.setting){var q=p.settings.getSettingNames();r="",q.sort(function(d,c){return d.localeCompare(c)}),q.forEach(function(a){var t=p.settings.getSetting(a),d="https://wiki.mozilla.org/Labs/Skywriter/Settings#"+t.name;r+='<a class="setting" href="'+d+'" title="View external documentation on setting: '+t.name+'" target="_blank">'+t.name+"</a> = "+t.value+"<br/>"})}else{f.value===undefined?r="<strong>"+setting.name+"</strong> = "+setting.get():(f.setting.set(f.value),r="Setting: <strong>"+f.setting.name+"</strong> = "+f.setting.get())}s.done(r)}},m={name:"unset",params:[{name:"setting",type:"setting",description:"The name of the setting to return to defaults"}],description:"unset a setting entirely",exec:function(f,e,q){var p=f.settings.get(e.setting);if(!p){q.doneWithError("No setting with the name <strong>"+e.setting+"</strong>.");return}p.reset(),q.done("Reset "+p.name+" to default: "+f.settings.get(e.setting))}},k=j("pilot/canon");g.startup=function(d,c){k.addCommand(n),k.addCommand(m)},g.shutdown=function(d,c){k.removeCommand(n),k.removeCommand(m)}}),define("pilot/commands/basic",["require","exports","module","pilot/typecheck","pilot/canon"],function(require,exports,module){var checks=require("pilot/typecheck"),canon=require("pilot/canon"),helpCommandSpec={name:"help",params:[{name:"search",type:"text",description:"Search string to narrow the output.",defaultValue:null}],description:"Get help on the available commands.",exec:function(a,b,c){var d=[],e=canon.getCommand(b.search);if(e&&e.exec){d.push(e.description?e.description:"No description for "+b.search)}else{var f=!1;e?(d.push("<h2>Sub-Commands of "+e.name+"</h2>"),d.push("<p>"+e.description+"</p>")):b.search?(b.search=="hidden"&&(b.search="",f=!0),d.push("<h2>Commands starting with '"+b.search+"':</h2>")):d.push("<h2>Available Commands:</h2>");var g=canon.getCommandNames();g.sort(),d.push("<table>");for(var h=0;h<g.length;h++){e=canon.getCommand(g[h]);if(!f&&e.hidden){continue}if(e.description===undefined){continue}if(b.search&&e.name.indexOf(b.search)!==0){continue}if(!b.search&&e.name.indexOf(" ")!=-1){continue}if(e&&e.name==b.search){continue}d.push("<tr>"),d.push('<th class="right">'+e.name+"</th>"),d.push("<td>"+e.description+"</td>"),d.push("</tr>")}d.push("</table>")}c.done(d.join(""))}},evalCommandSpec={name:"eval",params:[{name:"javascript",type:"text",description:"The JavaScript to evaluate"}],description:"evals given js code and show the result",hidden:!0,exec:function(env,args,request){var result,javascript=args.javascript;try{result=eval(javascript)}catch(e){result="<b>Error: "+e.message+"</b>"}var msg="",type="",x;if(checks.isFunction(result)){msg=(result+"").replace(/\n/g,"<br>").replace(/ /g,"&#160"),type="function"}else{if(checks.isObject(result)){Array.isArray(result)?type="array":type="object";var items=[],value;for(x in result){result.hasOwnProperty(x)&&(checks.isFunction(result[x])?value="[function]":checks.isObject(result[x])?value="[object]":value=result[x],items.push({name:x,value:value}))}items.sort(function(a,b){return a.name.toLowerCase()<b.name.toLowerCase()?-1:1});for(x=0;x<items.length;x++){msg+="<b>"+items[x].name+"</b>: "+items[x].value+"<br>"}}else{msg=result,type=typeof result}}request.done("Result for eval <b>'"+javascript+"'</b>"+" (type: "+type+"): <br><br>"+msg)}},canon=require("pilot/canon");exports.startup=function(a,b){canon.addCommand(helpCommandSpec),canon.addCommand(evalCommandSpec)},exports.shutdown=function(a,b){canon.removeCommand(helpCommandSpec),canon.removeCommand(evalCommandSpec)}}),define("pilot/settings/canon",["require","exports","module"],function(f,e,j){var g={name:"historyLength",description:"How many typed commands do we recall for reference?",type:"number",defaultValue:50};e.startup=function(d,c){d.env.settings.addSetting(g)},e.shutdown=function(d,c){d.env.settings.removeSetting(g)}}),define("pilot/plugin_manager",["require","exports","module","pilot/promise"],function(f,e,j){var g=f("pilot/promise").Promise;e.REASONS={APP_STARTUP:1,APP_SHUTDOWN:2,PLUGIN_ENABLE:3,PLUGIN_DISABLE:4,PLUGIN_INSTALL:5,PLUGIN_UNINSTALL:6,PLUGIN_UPGRADE:7,PLUGIN_DOWNGRADE:8},e.Plugin=function(b){this.name=b,this.status=this.INSTALLED},e.Plugin.prototype={NEW:0,INSTALLED:1,REGISTERED:2,STARTED:3,UNREGISTERED:4,SHUTDOWN:5,install:function(a,k){var d=new g;return this.status>this.NEW?(d.resolve(this),d):(f([this.name],function(b){b.install&&b.install(a,k),this.status=this.INSTALLED,d.resolve(this)}.bind(this)),d)},register:function(a,k){var d=new g;return this.status!=this.INSTALLED?(d.resolve(this),d):(f([this.name],function(b){b.register&&b.register(a,k),this.status=this.REGISTERED,d.resolve(this)}.bind(this)),d)},startup:function(d,b){b=b||e.REASONS.APP_STARTUP;var a=new g;return this.status!=this.REGISTERED?(a.resolve(this),a):(f([this.name],function(c){c.startup&&c.startup(d,b),this.status=this.STARTED,a.resolve(this)}.bind(this)),a)},shutdown:function(a,d){if(this.status!=this.STARTED){return}pluginModule=f(this.name),pluginModule.shutdown&&pluginModule.shutdown(a,d)}},e.PluginCatalog=function(){this.plugins={}},e.PluginCatalog.prototype={registerPlugins:function(b,m,k){var d=[];return b.forEach(function(c){var n=this.plugins[c];n===undefined&&(n=new e.Plugin(c),this.plugins[c]=n,d.push(n.register(m,k)))}.bind(this)),g.group(d)},startupPlugins:function(k,d){var o=[];for(var n in this.plugins){var m=this.plugins[n];o.push(m.startup(k,d))}return g.group(o)}},e.catalog=new e.PluginCatalog}),define("pilot/promise",["require","exports","module","pilot/console","pilot/stacktrace"],function(x,w,v){var u=x("pilot/console"),t=x("pilot/stacktrace").Trace,s=-1,r=0,q=1,p=0,o=!1,n=[],m=[];Promise=function(){this._status=r,this._value=undefined,this._onSuccessHandlers=[],this._onErrorHandlers=[],this._id=p++,n[this._id]=this},Promise.prototype.isPromise=!0,Promise.prototype.isComplete=function(){return this._status!=r},Promise.prototype.isResolved=function(){return this._status==q},Promise.prototype.isRejected=function(){return this._status==s},Promise.prototype.then=function(d,c){return typeof d=="function"&&(this._status===q?d.call(null,this._value):this._status===r&&this._onSuccessHandlers.push(d)),typeof c=="function"&&(this._status===s?c.call(null,this._value):this._status===r&&this._onErrorHandlers.push(c)),this},Promise.prototype.chainPromise=function(d){var c=new Promise;return c._chainedFrom=this,this.then(function(b){try{c.resolve(d(b))}catch(a){c.reject(a)}},function(b){c.reject(b)}),c},Promise.prototype.resolve=function(b){return this._complete(this._onSuccessHandlers,q,b,"resolve")},Promise.prototype.reject=function(b){return this._complete(this._onErrorHandlers,s,b,"reject")},Promise.prototype._complete=function(e,d,j,g){if(this._status!=r){return u.group("Promise already closed"),u.error("Attempted "+g+"() with ",j),u.error("Previous status = ",this._status,", previous value = ",this._value),u.trace(),this._completeTrace&&(u.error("Trace of previous completion:"),this._completeTrace.log(5)),u.groupEnd(),this}o&&(this._completeTrace=new t(new Error)),this._status=d,this._value=j,e.forEach(function(b){b.call(null,this._value)},this),this._onSuccessHandlers.length=0,this._onErrorHandlers.length=0,delete n[this._id],m.push(this);while(m.length>20){m.shift()}return this},Promise.group=function(g){g instanceof Array||(g=Array.prototype.slice.call(arguments));if(g.length===0){return(new Promise).resolve([])}var f=new Promise,y=[],k=0,j=function(a){return function(b){y[a]=b,k++,f._status!==s&&k===g.length&&f.resolve(y)}};return g.forEach(function(b,A){var z=j(A),e=f.reject.bind(f);b.then(z,e)}),f},w.Promise=Promise,w._outstanding=n,w._recent=m}),define("pilot/dom",["require","exports","module"],function(f,e,j){var g="http://www.w3.org/1999/xhtml";e.createElement=function(d,c){return document.createElementNS?document.createElementNS(c||g,d):document.createElement(d)},e.setText=function(d,c){d.innerText!==undefined&&(d.innerText=c),d.textContent!==undefined&&(d.textContent=c)},document.documentElement.classList?(e.hasCssClass=function(d,c){return d.classList.contains(c)},e.addCssClass=function(d,c){d.classList.add(c)},e.removeCssClass=function(d,c){d.classList.remove(c)},e.toggleCssClass=function(d,c){return d.classList.toggle(c)}):(e.hasCssClass=function(k,d){var m=k.className.split(/\s+/g);return m.indexOf(d)!==-1},e.addCssClass=function(b,d){e.hasCssClass(b,d)||(b.className+=" "+d)},e.removeCssClass=function(m,k){var o=m.className.split(/\s+/g);for(;;){var n=o.indexOf(k);if(n==-1){break}o.splice(n,1)}m.className=o.join(" ")},e.toggleCssClass=function(m,k){var p=m.className.split(/\s+/g),o=!0;for(;;){var n=p.indexOf(k);if(n==-1){break}o=!1,p.splice(n,1)}return o&&p.push(k),m.className=p.join(" "),o}),e.setCssClass=function(b,m,k){k?e.addCssClass(b,m):e.removeCssClass(b,m)},e.importCssString=function(k,d){d=d||document;if(d.createStyleSheet){var o=d.createStyleSheet();o.cssText=k}else{var n=d.createElementNS?d.createElementNS(g,"style"):d.createElement("style");n.appendChild(d.createTextNode(k));var m=d.getElementsByTagName("head")[0]||d.documentElement;m.appendChild(n)}},e.getInnerWidth=function(b){return parseInt(e.computedStyle(b,"paddingLeft"))+parseInt(e.computedStyle(b,"paddingRight"))+b.clientWidth},e.getInnerHeight=function(b){return parseInt(e.computedStyle(b,"paddingTop"))+parseInt(e.computedStyle(b,"paddingBottom"))+b.clientHeight},window.pageYOffset!==undefined?(e.getPageScrollTop=function(){return window.pageYOffset},e.getPageScrollLeft=function(){return window.pageXOffset}):(e.getPageScrollTop=function(){return document.body.scrollTop},e.getPageScrollLeft=function(){return document.body.scrollLeft}),window.getComputedStyle?e.computedStyle=function(d,c){return c?(window.getComputedStyle(d,"")||{})[c]||"":window.getComputedStyle(d,"")||{}}:e.computedStyle=function(d,c){return c?d.currentStyle[c]:d.currentStyle},e.scrollbarWidth=function(){var b=e.createElement("p");b.style.width="100%",b.style.minWidth="0px",b.style.height="200px";var p=e.createElement("div"),o=p.style;o.position="absolute",o.left="-10000px",o.overflow="hidden",o.width="200px",o.minWidth="0px",o.height="150px",p.appendChild(b);var n=document.body||document.documentElement;n.appendChild(p);var m=b.offsetWidth;o.overflow="scroll";var k=b.offsetWidth;return m==k&&(k=p.clientWidth),n.removeChild(p),m-k},e.setInnerHtml=function(k,d){var m=k.cloneNode(!1);return m.innerHTML=d,k.parentNode.replaceChild(m,k),m},e.setInnerText=function(d,c){document.body&&"textContent" in document.body?d.textContent=c:d.innerText=c},e.getInnerText=function(b){return document.body&&"textContent" in document.body?b.textContent:b.innerText||b.textContent||""},e.getParentWindow=function(b){return b.defaultView||b.parentWindow},e.getSelectionStart=function(k){var d;try{d=k.selectionStart||0}catch(m){d=0}return d},e.setSelectionStart=function(d,c){return d.selectionStart=c},e.getSelectionEnd=function(k){var d;try{d=k.selectionEnd||0}catch(m){d=0}return d},e.setSelectionEnd=function(d,c){return d.selectionEnd=c}}),define("pilot/event",["require","exports","module","pilot/keys","pilot/useragent","pilot/dom"],function(k,j,q){function m(e,d,r){var g=0;o.isOpera&&o.isMac?g=0|(d.metaKey?1:0)|(d.altKey?2:0)|(d.shiftKey?4:0)|(d.ctrlKey?8:0):g=0|(d.ctrlKey?1:0)|(d.altKey?2:0)|(d.shiftKey?4:0)|(d.metaKey?8:0);if(r in p.MODIFIER_KEYS){switch(p.MODIFIER_KEYS[r]){case"Alt":g=2;break;case"Shift":g=4;break;case"Ctrl":g=1;break;default:g=8}r=0}return g&8&&(r==91||r==93)&&(r=0),g!=0||r in p.FUNCTION_KEYS?e(d,g,r):!1}var p=k("pilot/keys"),o=k("pilot/useragent"),n=k("pilot/dom");j.addListener=function(f,e,r){if(f.addEventListener){return f.addEventListener(e,r,!1)}if(f.attachEvent){var g=function(){r(window.event)};r._wrapper=g,f.attachEvent("on"+e,g)}},j.removeListener=function(e,d,f){if(e.removeEventListener){return e.removeEventListener(d,f,!1)}e.detachEvent&&e.detachEvent("on"+d,f._wrapper||f)},j.stopEvent=function(b){return j.stopPropagation(b),j.preventDefault(b),!1},j.stopPropagation=function(b){b.stopPropagation?b.stopPropagation():b.cancelBubble=!0},j.preventDefault=function(b){b.preventDefault?b.preventDefault():b.returnValue=!1},j.getDocumentX=function(b){return b.clientX?b.clientX+n.getPageScrollLeft():b.pageX},j.getDocumentY=function(b){return b.clientY?b.clientY+n.getPageScrollTop():b.pageY},j.getButton=function(b){return b.type=="dblclick"?0:b.type=="contextmenu"?2:b.preventDefault?b.button:{1:0,2:2,4:1}[b.button]},document.documentElement.setCapture?j.capture=function(b,v,u){function t(c){return v(c),j.stopPropagation(c)}function r(a){v(a),s||(s=!0,u()),j.removeListener(b,"mousemove",v),j.removeListener(b,"mouseup",r),j.removeListener(b,"losecapture",r),b.releaseCapture()}var s=!1;j.addListener(b,"mousemove",v),j.addListener(b,"mouseup",r),j.addListener(b,"losecapture",r),b.setCapture()}:j.capture=function(g,f,t){function s(b){f(b),b.stopPropagation()}function r(b){f&&f(b),t&&t(),document.removeEventListener("mousemove",s,!0),document.removeEventListener("mouseup",r,!0),b.stopPropagation()}document.addEventListener("mousemove",s,!0),document.addEventListener("mouseup",r,!0)},j.addMouseWheelListener=function(b,r){var g=0,f=function(c){c.wheelDelta!==undefined?(Math.abs(c.wheelDeltaY)>g&&(g=Math.abs(c.wheelDeltaY)),g>5000?factor=400:factor=8,c.wheelDeltaX!==undefined?(c.wheelX=-c.wheelDeltaX/factor,c.wheelY=-c.wheelDeltaY/factor):(c.wheelX=0,c.wheelY=-c.wheelDelta/factor)):c.axis&&c.axis==c.HORIZONTAL_AXIS?(c.wheelX=(c.detail||0)*5,c.wheelY=0):(c.wheelX=0,c.wheelY=(c.detail||0)*5),r(c)};j.addListener(b,"DOMMouseScroll",f),j.addListener(b,"mousewheel",f)},j.addMultiMouseDownListener=function(x,w,v,u,t){var s=0,r,e,b=function(c){s+=1,s==1&&(r=c.clientX,e=c.clientY,setTimeout(function(){s=0},u||600));var d=j.getButton(c)==w;if(!d||Math.abs(c.clientX-r)>5||Math.abs(c.clientY-e)>5){s=0}s==v&&(s=0,t(c));if(d){return j.preventDefault(c)}};j.addListener(x,"mousedown",b),o.isOldIE&&j.addListener(x,"dblclick",b)},j.addCommandKeyListener=function(b,s){var r=j.addListener;if(o.isOldGecko){var g=null;r(b,"keydown",function(c){g=c.keyCode}),r(b,"keypress",function(c){return m(s,c,g)})}else{var e=null;r(b,"keydown",function(c){return e=c.keyIdentifier||c.keyCode,m(s,c,c.keyCode)}),o.isMac&&o.isOpera&&r(b,"keypress",function(d){var c=d.keyIdentifier||d.keyCode;if(e!==c){return m(s,d,d.keyCode)}e=null})}}}),define("ace/editor",["require","exports","module","pilot/fixoldbrowsers","pilot/oop","pilot/event","pilot/lang","pilot/useragent","ace/keyboard/textinput","ace/mouse_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","pilot/event_emitter"],function(D,C,B){D("pilot/fixoldbrowsers");var A=D("pilot/oop"),z=D("pilot/event"),y=D("pilot/lang"),x=D("pilot/useragent"),w=D("ace/keyboard/textinput").TextInput,v=D("ace/mouse_handler").MouseHandler,u=D("ace/keyboard/keybinding").KeyBinding,t=D("ace/edit_session").EditSession,s=D("ace/search").Search,r=D("ace/range").Range,q=D("pilot/event_emitter").EventEmitter,p=function(e,d){var f=e.getContainerElement();this.container=f,this.renderer=e,this.textInput=new w(e.getTextAreaContainer(),this),this.keyBinding=new u(this),x.isIPad||(this.$mouseHandler=new v(this)),this.$blockScrolling=0,this.$search=(new s).set({wrap:!0}),this.setSession(d||new t(""))};(function(){A.implement(this,q),this.$forwardEvents={gutterclick:1,gutterdblclick:1},this.$originalAddEventListener=this.addEventListener,this.$originalRemoveEventListener=this.removeEventListener,this.addEventListener=function(d,c){return this.$forwardEvents[d]?this.renderer.addEventListener(d,c):this.$originalAddEventListener(d,c)},this.removeEventListener=function(d,c){return this.$forwardEvents[d]?this.renderer.removeEventListener(d,c):this.$originalRemoveEventListener(d,c)},this.setKeyboardHandler=function(b){this.keyBinding.setKeyboardHandler(b)},this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},this.setSession=function(e){if(this.session==e){return}if(this.session){var d=this.session;this.session.removeEventListener("change",this.$onDocumentChange),this.session.removeEventListener("changeMode",this.$onChangeMode),this.session.removeEventListener("tokenizerUpdate",this.$onTokenizerUpdate),this.session.removeEventListener("changeTabSize",this.$onChangeTabSize),this.session.removeEventListener("changeWrapLimit",this.$onChangeWrapLimit),this.session.removeEventListener("changeWrapMode",this.$onChangeWrapMode),this.session.removeEventListener("onChangeFold",this.$onChangeFold),this.session.removeEventListener("changeFrontMarker",this.$onChangeFrontMarker),this.session.removeEventListener("changeBackMarker",this.$onChangeBackMarker),this.session.removeEventListener("changeBreakpoint",this.$onChangeBreakpoint),this.session.removeEventListener("changeAnnotation",this.$onChangeAnnotation),this.session.removeEventListener("changeOverwrite",this.$onCursorChange);var f=this.session.getSelection();f.removeEventListener("changeCursor",this.$onCursorChange),f.removeEventListener("changeSelection",this.$onSelectionChange),this.session.setScrollTopRow(this.renderer.getScrollTopRow())}this.session=e,this.$onDocumentChange=this.onDocumentChange.bind(this),e.addEventListener("change",this.$onDocumentChange),this.renderer.setSession(e),this.$onChangeMode=this.onChangeMode.bind(this),e.addEventListener("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),e.addEventListener("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.updateText.bind(this.renderer),e.addEventListener("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),e.addEventListener("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),e.addEventListener("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),e.addEventListener("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.addEventListener("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.addEventListener("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.addEventListener("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.addEventListener("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.addEventListener("changeOverwrite",this.$onCursorChange),this.selection=e.getSelection(),this.selection.addEventListener("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.addEventListener("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.onCursorChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.scrollToRow(e.getScrollTopRow()),this.renderer.updateFull(),this._dispatchEvent("changeSession",{session:e,oldSession:d})},this.getSession=function(){return this.session},this.getSelection=function(){return this.selection},this.resize=function(){this.renderer.onResize()},this.setTheme=function(b){this.renderer.setTheme(b)},this.getTheme=function(){return this.renderer.getTheme()},this.setStyle=function(b){this.renderer.setStyle(b)},this.unsetStyle=function(b){this.renderer.unsetStyle(b)},this.setFontSize=function(b){this.container.style.fontSize=b},this.$highlightBrackets=function(){this.session.$bracketHighlight&&(this.session.removeMarker(this.session.$bracketHighlight),this.session.$bracketHighlight=null);if(this.$highlightPending){return}var b=this;this.$highlightPending=!0,setTimeout(function(){b.$highlightPending=!1;var a=b.session.findMatchingBracket(b.getCursorPosition());if(a){var d=new r(a.row,a.column,a.row,a.column+1);b.session.$bracketHighlight=b.session.addMarker(d,"ace_bracket","text")}},10)},this.focus=function(){var b=this;setTimeout(function(){b.textInput.focus()}),this.textInput.focus()},this.isFocused=function(){return this.textInput.isFocused()},this.blur=function(){this.textInput.blur()},this.onFocus=function(){this.renderer.showCursor(),this.renderer.visualizeFocus(),this._dispatchEvent("focus")},this.onBlur=function(){this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._dispatchEvent("blur")},this.onDocumentChange=function(f){var e=f.data,j=e.range;if(j.start.row==j.end.row&&e.action!="insertLines"&&e.action!="removeLines"){var g=j.end.row}else{g=Infinity}this.renderer.updateLines(j.start.row,g),this.renderer.updateCursor()},this.onTokenizerUpdate=function(d){var c=d.data;this.renderer.updateLines(c.first,c.last)},this.onCursorChange=function(b){this.renderer.updateCursor(),this.$blockScrolling||this.renderer.scrollCursorIntoView(),this.renderer.moveTextAreaToCursor(this.textInput.getElement()),this.$highlightBrackets(),this.$updateHighlightActiveLine()},this.$updateHighlightActiveLine=function(){var f=this.getSession();f.$highlightLineMarker&&f.removeMarker(f.$highlightLineMarker),f.$highlightLineMarker=null;if(this.getHighlightActiveLine()&&(this.getSelectionStyle()!="line"||!this.selection.isMultiLine())){var e=this.getCursorPosition(),j=this.session.getFoldLine(e.row),g;j?g=new r(j.start.row,0,j.end.row+1,0):g=new r(e.row,0,e.row+1,0),f.$highlightLineMarker=f.addMarker(g,"ace_active_line","background")}},this.onSelectionChange=function(f){var e=this.getSession();e.$selectionMarker&&e.removeMarker(e.$selectionMarker),e.$selectionMarker=null;if(!this.selection.isEmpty()){var j=this.selection.getRange(),g=this.getSelectionStyle();e.$selectionMarker=e.addMarker(j,"ace_selection",g)}else{this.$updateHighlightActiveLine()}this.$highlightSelectedWord&&this.session.getMode().highlightSelection(this)},this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},this.onChangeBreakpoint=function(){this.renderer.setBreakpoints(this.session.getBreakpoints())},this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},this.onChangeMode=function(){this.renderer.updateText()},this.onChangeWrapLimit=function(){this.renderer.updateFull()},this.onChangeWrapMode=function(){this.renderer.onResize(!0)},this.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},this.getCopyText=function(){var b="";return this.selection.isEmpty()||(b=this.session.getTextRange(this.getSelectionRange())),this._emit("copy",b),b},this.onCut=function(){if(this.$readOnly){return}var b=this.getSelectionRange();this._emit("cut",b),this.selection.isEmpty()||(this.session.remove(b),this.clearSelection())},this.insert=function(X){if(this.$readOnly){return}var W=this.session,V=W.getMode(),U=this.getCursorPosition();if(this.getBehavioursEnabled()){var R=V.transformAction(W.getState(U.row),"insertion",this,W,X);R&&(X=R.text)}X=X.replace("\t",this.session.getTabString());if(!this.selection.isEmpty()){var U=this.session.remove(this.getSelectionRange());this.clearSelection()}else{if(this.session.getOverwrite()){var Q=new r.fromPoints(U,U);Q.end.column+=X.length,this.session.remove(Q)}}this.clearSelection();var P=U.column,O=W.getState(U.row),M=V.checkOutdent(O,W.getLine(U.row),X),L=W.getLine(U.row),K=V.getNextLineIndent(O,L.slice(0,U.column),W.getTabString()),J=W.insert(U,X);R&&R.selection&&(R.selection.length==2?this.selection.setSelectionRange(new r(U.row,P+R.selection[0],U.row,P+R.selection[1])):this.selection.setSelectionRange(new r(U.row+R.selection[0],R.selection[1],U.row+R.selection[2],R.selection[3])));var O=W.getState(U.row);if(W.getDocument().isNewLine(X)){this.moveCursorTo(U.row+1,0);var I=W.getTabSize(),H=Number.MAX_VALUE;for(var G=U.row+1;G<=J.row;++G){var F=0;L=W.getLine(G);for(var E=0;E<L.length;++E){if(L.charAt(E)=="\t"){F+=I}else{if(L.charAt(E)==" "){F+=1}else{break}}}/[^\s]/.test(L)&&(H=Math.min(F,H))}for(var G=U.row+1;G<=J.row;++G){var m=H;L=W.getLine(G);for(var E=0;E<L.length&&m>0;++E){L.charAt(E)=="\t"?m-=I:L.charAt(E)==" "&&(m-=1)}W.remove(new r(G,0,G,E))}W.indentRows(U.row+1,J.row,K)}M&&V.autoOutdent(O,W,U.row)},this.onTextInput=function(e,d){d||this._emit("paste",e);if(d&&e.length==1){var f=this.keyBinding.onCommandKey({},0,null,e);f||this.insert(e)}else{this.keyBinding.onTextInput(e)}},this.onCommandKey=function(e,d,f){this.keyBinding.onCommandKey(e,d,f)},this.setOverwrite=function(b){this.session.setOverwrite(b)},this.getOverwrite=function(){return this.session.getOverwrite()},this.toggleOverwrite=function(){this.session.toggleOverwrite()},this.setScrollSpeed=function(b){this.$mouseHandler.setScrollSpeed(b)},this.getScrollSpeed=function(){return this.$mouseHandler.getScrollSpeed()},this.$selectionStyle="line",this.setSelectionStyle=function(b){if(this.$selectionStyle==b){return}this.$selectionStyle=b,this.onSelectionChange(),this._dispatchEvent("changeSelectionStyle",{data:b})},this.getSelectionStyle=function(){return this.$selectionStyle},this.$highlightActiveLine=!0,this.setHighlightActiveLine=function(b){if(this.$highlightActiveLine==b){return}this.$highlightActiveLine=b,this.$updateHighlightActiveLine()},this.getHighlightActiveLine=function(){return this.$highlightActiveLine},this.$highlightSelectedWord=!0,this.setHighlightSelectedWord=function(b){if(this.$highlightSelectedWord==b){return}this.$highlightSelectedWord=b,b?this.session.getMode().highlightSelection(this):this.session.getMode().clearSelectionHighlight(this)},this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},this.setShowInvisibles=function(b){if(this.getShowInvisibles()==b){return}this.renderer.setShowInvisibles(b)},this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},this.setShowPrintMargin=function(b){this.renderer.setShowPrintMargin(b)},this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},this.setPrintMarginColumn=function(b){this.renderer.setPrintMarginColumn(b)},this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},this.$readOnly=!1,this.setReadOnly=function(b){this.$readOnly=b},this.getReadOnly=function(){return this.$readOnly},this.$modeBehaviours=!0,this.setBehavioursEnabled=function(b){this.$modeBehaviours=b},this.getBehavioursEnabled=function(){return this.$modeBehaviours},this.removeRight=function(){if(this.$readOnly){return}this.selection.isEmpty()&&this.selection.selectRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeLeft=function(){if(this.$readOnly){return}this.selection.isEmpty()&&this.selection.selectLeft();var f=this.getSelectionRange();if(this.getBehavioursEnabled()){var e=this.session,j=e.getState(f.start.row),g=e.getMode().transformAction(j,"deletion",this,e,f);g!==!1&&(f=g)}this.session.remove(f),this.clearSelection()},this.removeWordRight=function(){if(this.$readOnly){return}this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeWordLeft=function(){if(this.$readOnly){return}this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineStart=function(){if(this.$readOnly){return}this.selection.isEmpty()&&this.selection.selectLineStart(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineEnd=function(){if(this.$readOnly){return}this.selection.isEmpty()&&this.selection.selectLineEnd();var b=this.getSelectionRange();b.start.column==b.end.column&&b.start.row==b.end.row&&(b.end.column=0,b.end.row++),this.session.remove(b),this.clearSelection()},this.splitLine=function(){if(this.$readOnly){return}this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var b=this.getCursorPosition();this.insert("\n"),this.moveCursorToPosition(b)},this.transposeLetters=function(){if(this.$readOnly){return}if(!this.selection.isEmpty()){return}var g=this.getCursorPosition(),f=g.column;if(f==0){return}var m=this.session.getLine(g.row);if(f<m.length){var k=m.charAt(f)+m.charAt(f-1),j=new r(g.row,f-1,g.row,f+1)}else{var k=m.charAt(f-1)+m.charAt(f-2),j=new r(g.row,f-2,g.row,f)}this.session.replace(j,k)},this.indent=function(){if(this.$readOnly){return}var j=this.session,f=this.getSelectionRange();if(!(f.start.row<f.end.row||f.start.column<f.end.column)){var E;if(this.session.getUseSoftTabs()){var o=j.getTabSize(),n=this.getCursorPosition(),m=j.documentToScreenColumn(n.row,n.column),k=o-m%o;E=y.stringRepeat(" ",k)}else{E="\t"}return this.onTextInput(E)}var F=this.$getSelectedRows();j.indentRows(F.first,F.last,"\t")},this.blockOutdent=function(){if(this.$readOnly){return}var b=this.session.getSelection();this.session.outdentRows(b.getRange())},this.toggleCommentLines=function(){if(this.$readOnly){return}var d=this.session.getState(this.getCursorPosition().row),c=this.$getSelectedRows();this.session.getMode().toggleCommentLines(d,this.session,c.first,c.last)},this.removeLines=function(){if(this.$readOnly){return}var d=this.$getSelectedRows();if(d.last==0||d.last+1<this.session.getLength()){var c=new r(d.first,0,d.last+1,0)}else{var c=new r(d.first-1,this.session.getLine(d.first-1).length,d.last,this.session.getLine(d.last).length)}this.session.remove(c),this.clearSelection()},this.moveLinesDown=function(){if(this.$readOnly){return}this.$moveLines(function(d,c){return this.session.moveLinesDown(d,c)})},this.moveLinesUp=function(){if(this.$readOnly){return}this.$moveLines(function(d,c){return this.session.moveLinesUp(d,c)})},this.moveText=function(d,c){return this.$readOnly?null:this.session.moveText(d,c)},this.copyLinesUp=function(){if(this.$readOnly){return}this.$moveLines(function(d,c){return this.session.duplicateLines(d,c),0})},this.copyLinesDown=function(){if(this.$readOnly){return}this.$moveLines(function(d,c){return this.session.duplicateLines(d,c)})},this.$moveLines=function(f){var e=this.$getSelectedRows(),j=f.call(this,e.first,e.last),g=this.selection;g.setSelectionAnchor(e.last+j+1,0),g.$moveSelection(function(){g.moveCursorTo(e.first+j,0)})},this.$getSelectedRows=function(){var b=this.getSelectionRange().collapseRows();return{first:b.start.row,last:b.end.row}},this.onCompositionStart=function(b){this.renderer.showComposition(this.getCursorPosition())},this.onCompositionUpdate=function(b){this.renderer.setCompositionText(b)},this.onCompositionEnd=function(){this.renderer.hideComposition()},this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},this.isRowVisible=function(b){return b>=this.getFirstVisibleRow()&&b<=this.getLastVisibleRow()},this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},this.$getPageDownRow=function(){return this.renderer.getScrollBottomRow()},this.$getPageUpRow=function(){var d=this.renderer.getScrollTopRow(),c=this.renderer.getScrollBottomRow();return d-(c-d)},this.selectPageDown=function(){var f=this.$getPageDownRow()+Math.floor(this.$getVisibleRowCount()/2);this.scrollPageDown();var e=this.getSelection(),j=this.session.documentToScreenPosition(e.getSelectionLead()),g=this.session.screenToDocumentPosition(f,j.column);e.selectTo(g.row,g.column)},this.selectPageUp=function(){var g=this.renderer.getScrollTopRow()-this.renderer.getScrollBottomRow(),f=this.$getPageUpRow()+Math.round(g/2);this.scrollPageUp();var m=this.getSelection(),k=this.session.documentToScreenPosition(m.getSelectionLead()),j=this.session.screenToDocumentPosition(f,k.column);m.selectTo(j.row,j.column)},this.gotoPageDown=function(){var d=this.$getPageDownRow(),c=this.getCursorPositionScreen().column;this.scrollToRow(d),this.getSelection().moveCursorToScreen(d,c)},this.gotoPageUp=function(){var d=this.$getPageUpRow(),c=this.getCursorPositionScreen().column;this.scrollToRow(d),this.getSelection().moveCursorToScreen(d,c)},this.scrollPageDown=function(){this.scrollToRow(this.$getPageDownRow())},this.scrollPageUp=function(){this.renderer.scrollToRow(this.$getPageUpRow())},this.scrollToRow=function(b){this.renderer.scrollToRow(b)},this.scrollToLine=function(d,c){this.renderer.scrollToLine(d,c)},this.centerSelection=function(){var d=this.getSelectionRange(),c=Math.floor(d.start.row+(d.end.row-d.start.row)/2);this.renderer.scrollToLine(c,!0)},this.getCursorPosition=function(){return this.selection.getCursor()},this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},this.getSelectionRange=function(){return this.selection.getRange()},this.selectAll=function(){this.$blockScrolling+=1,this.selection.selectAll(),this.$blockScrolling-=1},this.clearSelection=function(){this.selection.clearSelection()},this.moveCursorTo=function(d,c){this.selection.moveCursorTo(d,c)},this.moveCursorToPosition=function(b){this.selection.moveCursorToPosition(b)},this.gotoLine=function(d,c){this.selection.clearSelection(),this.$blockScrolling+=1,this.moveCursorTo(d-1,c||0),this.$blockScrolling-=1,this.isRowVisible(this.getCursorPosition().row)||this.scrollToLine(d,!0)},this.navigateTo=function(d,c){this.clearSelection(),this.moveCursorTo(d,c)},this.navigateUp=function(b){this.selection.clearSelection(),b=b||1,this.selection.moveCursorBy(-b,0)},this.navigateDown=function(b){this.selection.clearSelection(),b=b||1,this.selection.moveCursorBy(b,0)},this.navigateLeft=function(d){if(!this.selection.isEmpty()){var c=this.getSelectionRange().start;this.moveCursorToPosition(c)}else{d=d||1;while(d--){this.selection.moveCursorLeft()}}this.clearSelection()},this.navigateRight=function(d){if(!this.selection.isEmpty()){var c=this.getSelectionRange().end;this.moveCursorToPosition(c)}else{d=d||1;while(d--){this.selection.moveCursorRight()}}this.clearSelection()},this.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},this.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},this.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},this.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},this.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},this.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},this.replace=function(e,d){d&&this.$search.set(d);var f=this.$search.find(this.session);if(!f){return}this.$tryReplace(f,e),f!==null&&this.selection.setSelectionRange(f)},this.replaceAll=function(g,f){f&&this.$search.set(f);var m=this.$search.findAll(this.session);if(!m.length){return}var k=this.getSelectionRange();this.clearSelection(),this.selection.moveCursorTo(0,0),this.$blockScrolling+=1;for(var j=m.length-1;j>=0;--j){this.$tryReplace(m[j],g)}this.selection.setSelectionRange(k),this.$blockScrolling-=1},this.$tryReplace=function(e,d){var f=this.session.getTextRange(e),d=this.$search.replace(f,d);return d!==null?(e.end=this.session.replace(e,d),e):null},this.getLastSearchOptions=function(){return this.$search.getOptions()},this.find=function(d,c){this.clearSelection(),c=c||{},c.needle=d,this.$search.set(c),this.$find()},this.findNext=function(b){b=b||{},typeof b.backwards=="undefined"&&(b.backwards=!1),this.$search.set(b),this.$find()},this.findPrevious=function(b){b=b||{},typeof b.backwards=="undefined"&&(b.backwards=!0),this.$search.set(b),this.$find()},this.$find=function(d){this.selection.isEmpty()||this.$search.set({needle:this.session.getTextRange(this.getSelectionRange())}),typeof d!="undefined"&&this.$search.set({backwards:d});var c=this.$search.find(this.session);c&&(this.gotoLine(c.end.row+1,c.end.column),this.selection.setSelectionRange(c))},this.undo=function(){this.session.getUndoManager().undo()},this.redo=function(){this.session.getUndoManager().redo()},this.destroy=function(){this.renderer.destroy()}}).call(p.prototype),C.Editor=p}),define("ace/keyboard/textinput",["require","exports","module","pilot/event","pilot/useragent","pilot/dom"],function(k,j,q){var p=k("pilot/event"),o=k("pilot/useragent"),n=k("pilot/dom"),m=function(L,K){function D(){try{J.select()}catch(b){}}function C(b){if(!G){var c=b||J.value;if(c){c.charCodeAt(c.length-1)==I.charCodeAt(0)?(c=c.slice(0,-1),c&&K.onTextInput(c,!F)):K.onTextInput(c,!F);if(!d()){return !1}}}G=!1,F=!1,J.value=I,D()}function d(){return document.activeElement===J}var J=n.createElement("textarea");o.isTouchPad&&J.setAttribute("x-palm-disable-auto-cap",!0),J.style.left="-10000px",L.appendChild(J);var I=String.fromCharCode(0);C();var H=!1,G=!1,F=!1,E="",B=function(b){setTimeout(function(){H||C(b.data)},0)},A=function(b){if(o.isOldIE&&J.value.charCodeAt(0)>128){return}setTimeout(function(){H||C()},0)},z=function(b){H=!0,K.onCompositionStart(),o.isGecko||setTimeout(y,0)},y=function(){if(!H){return}K.onCompositionUpdate(J.value)},x=function(b){H=!1,K.onCompositionEnd()},w=function(b){G=!0;var c=K.getCopyText();c?J.value=c:b.preventDefault(),D(),setTimeout(function(){C()},0)},f=function(b){G=!0;var c=K.getCopyText();c?(J.value=c,K.onCut()):b.preventDefault(),D(),setTimeout(function(){C()},0)};p.addCommandKeyListener(J,K.onCommandKey.bind(K));if(o.isOldIE){var e={13:1,27:1};p.addListener(J,"keyup",function(b){H&&(!J.value||e[b.keyCode])&&setTimeout(x,0);if((J.value.charCodeAt(0)|0)<129){return}H?y():z()})}"onpropertychange" in J&&!("oninput" in J)?p.addListener(J,"propertychange",A):p.addListener(J,"input",B),p.addListener(J,"paste",function(b){F=!0,b.clipboardData&&b.clipboardData.getData?(C(b.clipboardData.getData("text/plain")),b.preventDefault()):A()}),"onbeforecopy" in J&&typeof clipboardData!="undefined"?(p.addListener(J,"beforecopy",function(b){var g=K.getCopyText();g?clipboardData.setData("Text",g):b.preventDefault()}),p.addListener(L,"keydown",function(b){if(b.ctrlKey&&b.keyCode==88){var g=K.getCopyText();g&&(clipboardData.setData("Text",g),K.onCut()),p.preventDefault(b)}})):(p.addListener(J,"copy",w),p.addListener(J,"cut",f)),p.addListener(J,"compositionstart",z),o.isGecko&&p.addListener(J,"text",y),o.isWebKit&&p.addListener(J,"keyup",y),p.addListener(J,"compositionend",x),p.addListener(J,"blur",function(){K.onBlur()}),p.addListener(J,"focus",function(){K.onFocus(),D()}),this.focus=function(){K.onFocus(),D(),J.focus()},this.blur=function(){J.blur()},this.isFocused=d,this.getElement=function(){return J},this.onContextMenu=function(g,c){g&&(E||(E=J.style.cssText),J.style.cssText="position:fixed; z-index:1000;left:"+(g.x-2)+"px; top:"+(g.y-2)+"px;"),c&&(J.value="")},this.onContextMenuClose=function(){setTimeout(function(){E&&(J.style.cssText=E,E=""),C()},0)}};j.TextInput=m}),define("ace/mouse_handler",["require","exports","module","pilot/event","pilot/dom","pilot/browser_focus"],function(x,w,v){var u=x("pilot/event"),t=x("pilot/dom"),s=x("pilot/browser_focus").BrowserFocus,r=0,q=1,p=2,o=250,n=5,m=function(d){this.editor=d,this.browserFocus=new s,u.addListener(d.container,"mousedown",function(a){return d.focus(),u.preventDefault(a)}),u.addListener(d.container,"selectstart",function(b){return u.preventDefault(b)});var c=d.renderer.getMouseEventTarget();u.addListener(c,"mousedown",this.onMouseDown.bind(this)),u.addMultiMouseDownListener(c,0,2,500,this.onMouseDoubleClick.bind(this)),u.addMultiMouseDownListener(c,0,3,600,this.onMouseTripleClick.bind(this)),u.addMultiMouseDownListener(c,0,4,600,this.onMouseQuadClick.bind(this)),u.addMouseWheelListener(d.container,this.onMouseWheel.bind(this))};(function(){this.$scrollSpeed=1,this.setScrollSpeed=function(b){this.$scrollSpeed=b},this.getScrollSpeed=function(){return this.$scrollSpeed},this.$getEventPosition=function(f){var d=u.getDocumentX(f),j=u.getDocumentY(f),g=this.editor.renderer.screenToTextCoordinates(d,j);return g.row=Math.max(0,Math.min(g.row,this.editor.session.getLength()-1)),g},this.$distance=function(f,e,j,g){return Math.sqrt(Math.pow(j-f,2)+Math.pow(g-e,2))},this.onMouseDown=function(ae){function O(a){ae.shiftKey?aa.selection.selectToPosition(a):Z.$clickSelection||(aa.moveCursorToPosition(a),aa.selection.clearSelection(a.row,a.column)),U=q}var ad=u.getDocumentX(ae),ac=u.getDocumentY(ae),ab=this.$getEventPosition(ae),aa=this.editor,Z=this,Y=aa.getSelectionRange(),X=Y.isEmpty(),W=!aa.getReadOnly()&&!X&&Y.contains(ab.row,ab.column),U=r;if(W&&(!this.browserFocus.isFocused()||(new Date).getTime()-this.browserFocus.lastFocus<20||!this.editor.isFocused())){this.editor.focus();return}var Q=u.getButton(ae);if(Q!==0){X&&aa.moveCursorToPosition(ab),Q==2&&(aa.textInput.onContextMenu({x:ad,y:ac},X),u.capture(aa.container,function(){},aa.textInput.onContextMenuClose));return}var M=aa.session.getFoldAt(ab.row,ab.column,1);if(M){aa.selection.setSelectionRange(M.range);return}W||O(ab);var L,J,H=aa.getOverwrite(),j=(new Date).getTime(),g,e,d=function(b){L=u.getDocumentX(b),J=u.getDocumentY(b)},V=function(){clearInterval(k),U==r?O(ab):U==p&&R(),Z.$clickSelection=null,U=r},R=function(){t.removeCssClass(aa.container,"ace_dragging"),aa.session.removeMarker(dragSelectionMarker),Z.$clickSelection||g||(aa.moveCursorToPosition(ab),aa.selection.clearSelection(ab.row,ab.column));if(!g){return}if(e.contains(g.row,g.column)){g=null;return}aa.clearSelection();var b=aa.moveText(e,g);if(!b){g=null;return}aa.selection.setSelectionRange(b)},P=function(){if(L===undefined||J===undefined){return}if(U==r){var b=Z.$distance(ad,ac,L,J),y=(new Date).getTime();if(b>n){U=q;var c=aa.renderer.screenToTextCoordinates(L,J);c.row=Math.max(0,Math.min(c.row,aa.session.getLength()-1)),O(c)}else{if(y-j>o){U=p,e=aa.getSelectionRange();var z=aa.getSelectionStyle();dragSelectionMarker=aa.session.addMarker(e,"ace_selection",z),aa.clearSelection(),t.addCssClass(aa.container,"ace_dragging")}}}U==p?I():U==q&&K()},K=function(){var f=aa.renderer.screenToTextCoordinates(L,J);f.row=Math.max(0,Math.min(f.row,aa.session.getLength()-1));if(Z.$clickSelection){if(Z.$clickSelection.contains(f.row,f.column)){aa.selection.setSelectionRange(Z.$clickSelection)}else{if(Z.$clickSelection.compare(f.row,f.column)==-1){var c=Z.$clickSelection.end}else{var c=Z.$clickSelection.start}aa.selection.setSelectionAnchor(c.row,c.column),aa.selection.selectToPosition(f)}}else{aa.selection.selectToPosition(f)}aa.renderer.scrollCursorIntoView()},I=function(){g=aa.renderer.screenToTextCoordinates(L,J),g.row=Math.max(0,Math.min(g.row,aa.session.getLength()-1)),aa.moveCursorToPosition(g)};u.capture(aa.container,d,V);var k=setInterval(P,20);return u.preventDefault(ae)},this.onMouseDoubleClick=function(f){var e=this.editor,j=this.$getEventPosition(f),g=e.session.getFoldAt(j.row,j.column,1);g?e.session.expandFold(g):(e.moveCursorToPosition(j),e.selection.selectWord(),this.$clickSelection=e.getSelectionRange())},this.onMouseTripleClick=function(d){var c=this.$getEventPosition(d);this.editor.moveCursorToPosition(c),this.editor.selection.selectLine(),this.$clickSelection=this.editor.getSelectionRange()},this.onMouseQuadClick=function(b){this.editor.selectAll(),this.$clickSelection=this.editor.getSelectionRange()},this.onMouseWheel=function(d){var c=this.$scrollSpeed*2;this.editor.renderer.scrollBy(d.wheelX*c,d.wheelY*c);if(this.editor.renderer.isScrollableBy(d.wheelX,d.wheelY)){return u.preventDefault(d)}}}).call(m.prototype),w.MouseHandler=m}),define("pilot/browser_focus",["require","exports","module","pilot/oop","pilot/event","pilot/event_emitter"],function(k,j,q){var p=k("pilot/oop"),o=k("pilot/event"),n=k("pilot/event_emitter").EventEmitter,m=function(d){d=d||window,this.lastFocus=(new Date).getTime(),this._isFocused=!0;var c=this;"onfocusin" in d.document?(o.addListener(d.document,"focusin",function(b){c._setFocused(!0)}),o.addListener(d.document,"focusout",function(b){c._setFocused(!!b.toElement)})):(o.addListener(d,"blur",function(b){c._setFocused(!1)}),o.addListener(d,"focus",function(b){c._setFocused(!0)}))};(function(){p.implement(this,n),this.isFocused=function(){return this._isFocused},this._setFocused=function(b){if(this._isFocused==b){return}b&&(this.lastFocus=(new Date).getTime()),this._isFocused=b,this._emit("changeFocus")}}).call(m.prototype),j.BrowserFocus=m}),define("ace/keyboard/keybinding",["require","exports","module","pilot/useragent","pilot/keys","pilot/event","pilot/settings","pilot/canon","ace/commands/default_commands"],function(s,r,q){var p=s("pilot/useragent"),o=s("pilot/keys"),n=s("pilot/event"),m=s("pilot/settings").settings,k=s("pilot/canon");s("ace/commands/default_commands");var j=function(b){this.$editor=b,this.$data={},this.$keyboardHandler=null};(function(){this.setKeyboardHandler=function(b){this.$keyboardHandler!=b&&(this.$data={},this.$keyboardHandler=b)},this.getKeyboardHandler=function(){return this.$keyboardHandler},this.$callKeyboardHandler=function(t,f,y,x){var w={editor:this.$editor},v;this.$keyboardHandler&&(v=this.$keyboardHandler.handleKeyboard(this.$data,f,y,x,t));if(!v||!v.command){f!=0||x!=0?v={command:k.findKeyCommand(w,"editor",f,y)}:v={command:"inserttext",args:{text:y}}}var u=!1;return v&&(u=k.exec(v.command,w,"editor",v.args),u&&n.stopEvent(t)),u},this.onCommandKey=function(f,e,t,g){return g||(g=o.keyCodeToString(t)),this.$callKeyboardHandler(f,e,g,t)},this.onTextInput=function(b){return this.$callKeyboardHandler({},0,b,0)}}).call(j.prototype),r.KeyBinding=j}),define("ace/commands/default_commands",["require","exports","module","pilot/lang","pilot/canon"],function(j,g,o){function k(d,c){return{win:d,mac:c,sender:"editor"}}var n=j("pilot/lang"),m=j("pilot/canon");m.addCommand({name:"null",exec:function(e,d,f){}}),m.addCommand({name:"selectall",bindKey:k("Ctrl-A","Command-A"),exec:function(e,d,f){e.editor.selectAll()}}),m.addCommand({name:"removeline",bindKey:k("Ctrl-D","Command-D"),exec:function(e,d,f){e.editor.removeLines()}}),m.addCommand({name:"gotoline",bindKey:k("Ctrl-L","Command-L"),exec:function(f,e,q){var p=parseInt(prompt("Enter line number:"));isNaN(p)||f.editor.gotoLine(p)}}),m.addCommand({name:"togglecomment",bindKey:k("Ctrl-7","Command-7"),exec:function(e,d,f){e.editor.toggleCommentLines()}}),m.addCommand({name:"findnext",bindKey:k("Ctrl-K","Command-G"),exec:function(e,d,f){e.editor.findNext()}}),m.addCommand({name:"findprevious",bindKey:k("Ctrl-Shift-K","Command-Shift-G"),exec:function(e,d,f){e.editor.findPrevious()}}),m.addCommand({name:"find",bindKey:k("Ctrl-F","Command-F"),exec:function(f,e,q){var p=prompt("Find:",f.editor.getCopyText());f.editor.find(p)}}),m.addCommand({name:"replace",bindKey:k("Ctrl-R","Command-Option-F"),exec:function(p,f,s){var r=prompt("Find:",p.editor.getCopyText());if(!r){return}var q=prompt("Replacement:");if(!q){return}p.editor.replace(q,{needle:r})}}),m.addCommand({name:"replaceall",bindKey:k("Ctrl-Shift-R","Command-Shift-Option-F"),exec:function(p,f,s){var r=prompt("Find:");if(!r){return}var q=prompt("Replacement:");if(!q){return}p.editor.replaceAll(q,{needle:r})}}),m.addCommand({name:"undo",bindKey:k("Ctrl-Z","Command-Z"),exec:function(e,d,f){e.editor.undo()}}),m.addCommand({name:"redo",bindKey:k("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(e,d,f){e.editor.redo()}}),m.addCommand({name:"overwrite",bindKey:k("Insert","Insert"),exec:function(e,d,f){e.editor.toggleOverwrite()}}),m.addCommand({name:"copylinesup",bindKey:k("Ctrl-Alt-Up","Command-Option-Up"),exec:function(e,d,f){e.editor.copyLinesUp()}}),m.addCommand({name:"movelinesup",bindKey:k("Alt-Up","Option-Up"),exec:function(e,d,f){e.editor.moveLinesUp()}}),m.addCommand({name:"selecttostart",bindKey:k("Ctrl-Shift-Home|Alt-Shift-Up","Command-Shift-Up"),exec:function(e,d,f){e.editor.getSelection().selectFileStart()}}),m.addCommand({name:"gotostart",bindKey:k("Ctrl-Home|Ctrl-Up","Command-Home|Command-Up"),exec:function(e,d,f){e.editor.navigateFileStart()}}),m.addCommand({name:"selectup",bindKey:k("Shift-Up","Shift-Up"),exec:function(e,d,f){e.editor.getSelection().selectUp()}}),m.addCommand({name:"golineup",bindKey:k("Up","Up|Ctrl-P"),exec:function(e,d,f){e.editor.navigateUp(d.times)}}),m.addCommand({name:"copylinesdown",bindKey:k("Ctrl-Alt-Down","Command-Option-Down"),exec:function(e,d,f){e.editor.copyLinesDown()}}),m.addCommand({name:"movelinesdown",bindKey:k("Alt-Down","Option-Down"),exec:function(e,d,f){e.editor.moveLinesDown()}}),m.addCommand({name:"selecttoend",bindKey:k("Ctrl-Shift-End|Alt-Shift-Down","Command-Shift-Down"),exec:function(e,d,f){e.editor.getSelection().selectFileEnd()}}),m.addCommand({name:"gotoend",bindKey:k("Ctrl-End|Ctrl-Down","Command-End|Command-Down"),exec:function(e,d,f){e.editor.navigateFileEnd()}}),m.addCommand({name:"selectdown",bindKey:k("Shift-Down","Shift-Down"),exec:function(e,d,f){e.editor.getSelection().selectDown()}}),m.addCommand({name:"golinedown",bindKey:k("Down","Down|Ctrl-N"),exec:function(e,d,f){e.editor.navigateDown(d.times)}}),m.addCommand({name:"selectwordleft",bindKey:k("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(e,d,f){e.editor.getSelection().selectWordLeft()}}),m.addCommand({name:"gotowordleft",bindKey:k("Ctrl-Left","Option-Left"),exec:function(e,d,f){e.editor.navigateWordLeft()}}),m.addCommand({name:"selecttolinestart",bindKey:k("Alt-Shift-Left","Command-Shift-Left"),exec:function(e,d,f){e.editor.getSelection().selectLineStart()}}),m.addCommand({name:"gotolinestart",bindKey:k("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(e,d,f){e.editor.navigateLineStart()}}),m.addCommand({name:"selectleft",bindKey:k("Shift-Left","Shift-Left"),exec:function(e,d,f){e.editor.getSelection().selectLeft()}}),m.addCommand({name:"gotoleft",bindKey:k("Left","Left|Ctrl-B"),exec:function(e,d,f){e.editor.navigateLeft(d.times)}}),m.addCommand({name:"selectwordright",bindKey:k("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(e,d,f){e.editor.getSelection().selectWordRight()}}),m.addCommand({name:"gotowordright",bindKey:k("Ctrl-Right","Option-Right"),exec:function(e,d,f){e.editor.navigateWordRight()}}),m.addCommand({name:"selecttolineend",bindKey:k("Alt-Shift-Right","Command-Shift-Right"),exec:function(e,d,f){e.editor.getSelection().selectLineEnd()}}),m.addCommand({name:"gotolineend",bindKey:k("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(e,d,f){e.editor.navigateLineEnd()}}),m.addCommand({name:"selectright",bindKey:k("Shift-Right","Shift-Right"),exec:function(e,d,f){e.editor.getSelection().selectRight()}}),m.addCommand({name:"gotoright",bindKey:k("Right","Right|Ctrl-F"),exec:function(e,d,f){e.editor.navigateRight(d.times)}}),m.addCommand({name:"selectpagedown",bindKey:k("Shift-PageDown","Shift-PageDown"),exec:function(e,d,f){e.editor.selectPageDown()}}),m.addCommand({name:"pagedown",bindKey:k(null,"PageDown"),exec:function(e,d,f){e.editor.scrollPageDown()}}),m.addCommand({name:"gotopagedown",bindKey:k("PageDown","Option-PageDown|Ctrl-V"),exec:function(e,d,f){e.editor.gotoPageDown()}}),m.addCommand({name:"selectpageup",bindKey:k("Shift-PageUp","Shift-PageUp"),exec:function(e,d,f){e.editor.selectPageUp()}}),m.addCommand({name:"pageup",bindKey:k(null,"PageUp"),exec:function(e,d,f){e.editor.scrollPageUp()}}),m.addCommand({name:"gotopageup",bindKey:k("PageUp","Option-PageUp"),exec:function(e,d,f){e.editor.gotoPageUp()}}),m.addCommand({name:"selectlinestart",bindKey:k("Shift-Home","Shift-Home"),exec:function(e,d,f){e.editor.getSelection().selectLineStart()}}),m.addCommand({name:"selectlineend",bindKey:k("Shift-End","Shift-End"),exec:function(e,d,f){e.editor.getSelection().selectLineEnd()}}),m.addCommand({name:"del",bindKey:k("Delete","Delete|Ctrl-D"),exec:function(e,d,f){e.editor.removeRight()}}),m.addCommand({name:"backspace",bindKey:k("Ctrl-Backspace|Command-Backspace|Option-Backspace|Shift-Backspace|Backspace","Ctrl-Backspace|Command-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(e,d,f){e.editor.removeLeft()}}),m.addCommand({name:"removetolinestart",bindKey:k(null,"Option-Backspace"),exec:function(e,d,f){e.editor.removeToLineStart()}}),m.addCommand({name:"removetolineend",bindKey:k(null,"Ctrl-K"),exec:function(e,d,f){e.editor.removeToLineEnd()}}),m.addCommand({name:"removewordleft",bindKey:k("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(e,d,f){e.editor.removeWordLeft()}}),m.addCommand({name:"removewordright",bindKey:k(null,"Alt-Delete"),exec:function(e,d,f){e.editor.removeWordRight()}}),m.addCommand({name:"outdent",bindKey:k("Shift-Tab","Shift-Tab"),exec:function(e,d,f){e.editor.blockOutdent()}}),m.addCommand({name:"indent",bindKey:k("Tab","Tab"),exec:function(e,d,f){e.editor.indent()}}),m.addCommand({name:"inserttext",exec:function(e,d,f){e.editor.insert(n.stringRepeat(d.text||"",d.times||1))}}),m.addCommand({name:"centerselection",bindKey:k(null,"Ctrl-L"),exec:function(e,d,f){e.editor.centerSelection()}}),m.addCommand({name:"splitline",bindKey:k(null,"Ctrl-O"),exec:function(e,d,f){e.editor.splitLine()}}),m.addCommand({name:"transposeletters",bindKey:k("Ctrl-T","Ctrl-T"),exec:function(e,d,f){e.editor.transposeLetters()}})}),define("ace/edit_session",["require","exports","module","pilot/oop","pilot/lang","pilot/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/edit_session/folding"],function(y,x,w){var v=y("pilot/oop"),u=y("pilot/lang"),t=y("pilot/event_emitter").EventEmitter,s=y("ace/selection").Selection,r=y("ace/mode/text").Mode,q=y("ace/range").Range,p=y("ace/document").Document,o=y("ace/background_tokenizer").BackgroundTokenizer,n=function(d,c){this.$modified=!0,this.$breakpoints=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$rowCache=[],this.$wrapData=[],this.$foldData=[],this.$foldData.toString=function(){var b="";return this.forEach(function(a){b+="\n"+a.toString()}),b},d instanceof p?this.setDocument(d):this.setDocument(new p(d)),this.selection=new s(this),c?this.setMode(c):this.setMode(new r)};(function(){function z(b){return b<4352?!1:b>=4352&&b<=4447||b>=4515&&b<=4519||b>=4602&&b<=4607||b>=9001&&b<=9002||b>=11904&&b<=11929||b>=11931&&b<=12019||b>=12032&&b<=12245||b>=12272&&b<=12283||b>=12288&&b<=12350||b>=12353&&b<=12438||b>=12441&&b<=12543||b>=12549&&b<=12589||b>=12593&&b<=12686||b>=12688&&b<=12730||b>=12736&&b<=12771||b>=12784&&b<=12830||b>=12832&&b<=12871||b>=12880&&b<=13054||b>=13056&&b<=19903||b>=19968&&b<=42124||b>=42128&&b<=42182||b>=43360&&b<=43388||b>=44032&&b<=55203||b>=55216&&b<=55238||b>=55243&&b<=55291||b>=63744&&b<=64255||b>=65040&&b<=65049||b>=65072&&b<=65106||b>=65108&&b<=65126||b>=65128&&b<=65131||b>=65281&&b<=65376||b>=65504&&b<=65510}v.implement(this,t),this.setDocument=function(b){if(this.doc){throw new Error("Document is already set")}this.doc=b,b.on("change",this.onChange.bind(this)),this.on("changeFold",this.onChangeFold.bind(this))},this.getDocument=function(){return this.doc},this.$resetRowCache=function(k){if(k==0){this.$rowCache=[];return}var g=this.$rowCache;for(var m=0;m<g.length;m++){if(g[m].docRow>=k){g.splice(m,g.length);return}}},this.onChangeFold=function(g){var c=g.data;this.$resetRowCache(c.start.row)},this.onChange=function(k){var g=k.data;this.$modified=!0,this.$resetRowCache(g.range.start.row);var m=this.$updateInternalDataOnChange(k);!this.$fromUndo&&this.$undoManager&&!g.ignore&&(this.$deltasDoc.push(g),m&&m.length!=0&&this.$deltasFold.push({action:"removeFolds",folds:m}),this.$informUndoManager.schedule()),this.bgTokenizer.start(g.range.start.row),this._dispatchEvent("change",k)},this.setValue=function(b){this.doc.setValue(b),this.selection.moveCursorTo(0,0),this.selection.clearSelection(),this.$resetRowCache(0),this.$deltas=[],this.$deltasDoc=[],this.$deltasFold=[],this.getUndoManager().reset()},this.getValue=this.toString=function(){return this.doc.getValue()},this.getSelection=function(){return this.selection},this.getState=function(b){return this.bgTokenizer.getState(b)},this.getTokens=function(g,c){return this.bgTokenizer.getTokens(g,c)},this.setUndoManager=function(g){this.$undoManager=g,this.$resetRowCache(0),this.$deltas=[],this.$deltasDoc=[],this.$deltasFold=[],this.$informUndoManager&&this.$informUndoManager.cancel();if(g){var c=this;this.$syncInformUndoManager=function(){c.$informUndoManager.cancel(),c.$deltasFold.length&&(c.$deltas.push({group:"fold",deltas:c.$deltasFold}),c.$deltasFold=[]),c.$deltasDoc.length&&(c.$deltas.push({group:"doc",deltas:c.$deltasDoc}),c.$deltasDoc=[]),c.$deltas.length>0&&g.execute({action:"aceupdate",args:[c.$deltas,c]}),c.$deltas=[]},this.$informUndoManager=u.deferredCall(this.$syncInformUndoManager)}},this.$defaultUndoManager={undo:function(){},redo:function(){},reset:function(){}},this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},this.getTabString=function(){return this.getUseSoftTabs()?u.stringRepeat(" ",this.getTabSize()):"\t"},this.$useSoftTabs=!0,this.setUseSoftTabs=function(b){if(this.$useSoftTabs===b){return}this.$useSoftTabs=b},this.getUseSoftTabs=function(){return this.$useSoftTabs},this.$tabSize=4,this.setTabSize=function(b){if(isNaN(b)||this.$tabSize===b){return}this.$modified=!0,this.$tabSize=b,this._dispatchEvent("changeTabSize")},this.getTabSize=function(){return this.$tabSize},this.isTabStop=function(b){return this.$useSoftTabs&&b.column%this.$tabSize==0},this.$overwrite=!1,this.setOverwrite=function(b){if(this.$overwrite==b){return}this.$overwrite=b,this._dispatchEvent("changeOverwrite")},this.getOverwrite=function(){return this.$overwrite},this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},this.getBreakpoints=function(){return this.$breakpoints},this.setBreakpoints=function(g){this.$breakpoints=[];for(var c=0;c<g.length;c++){this.$breakpoints[g[c]]=!0}this._dispatchEvent("changeBreakpoint",{})},this.clearBreakpoints=function(){this.$breakpoints=[],this._dispatchEvent("changeBreakpoint",{})},this.setBreakpoint=function(b){this.$breakpoints[b]=!0,this._dispatchEvent("changeBreakpoint",{})},this.clearBreakpoint=function(b){delete this.$breakpoints[b],this._dispatchEvent("changeBreakpoint",{})},this.getBreakpoints=function(){return this.$breakpoints},this.addMarker=function(k,g,E,D){var C=this.$markerId++,m={range:k,type:E||"line",renderer:typeof E=="function"?E:null,clazz:g,inFront:!!D};return D?(this.$frontMarkers[C]=m,this._dispatchEvent("changeFrontMarker")):(this.$backMarkers[C]=m,this._dispatchEvent("changeBackMarker")),C},this.removeMarker=function(k){var g=this.$frontMarkers[k]||this.$backMarkers[k];if(!g){return}var m=g.inFront?this.$frontMarkers:this.$backMarkers;g&&(delete m[k],this._dispatchEvent(g.inFront?"changeFrontMarker":"changeBackMarker"))},this.getMarkers=function(b){return b?this.$frontMarkers:this.$backMarkers},this.setAnnotations=function(k){this.$annotations={};for(var g=0;g<k.length;g++){var C=k[g],m=C.row;this.$annotations[m]?this.$annotations[m].push(C):this.$annotations[m]=[C]}this._dispatchEvent("changeAnnotation",{})},this.getAnnotations=function(){return this.$annotations},this.clearAnnotations=function(){this.$annotations={},this._dispatchEvent("changeAnnotation",{})},this.$detectNewLine=function(g){var c=g.match(/^.*?(\r?\n)/m);c?this.$autoNewLine=c[1]:this.$autoNewLine="\n"},this.getWordRange=function(m,k){var G=this.getLine(m),F=!1;k>0&&(F=!!G.charAt(k-1).match(this.tokenRe)),F||(F=!!G.charAt(k).match(this.tokenRe));var E=F?this.tokenRe:this.nonTokenRe,D=k;if(D>0){do{D--}while(D>=0&&G.charAt(D).match(E));D++}var C=k;while(C<G.length&&G.charAt(C).match(E)){C++}return new q(m,D,m,C)},this.setNewLineMode=function(b){this.doc.setNewLineMode(b)},this.getNewLineMode=function(){return this.doc.getNewLineMode()},this.$useWorker=!0,this.setUseWorker=function(b){if(this.$useWorker==b){return}this.$useWorker=b,this.$stopWorker(),b&&this.$startWorker()},this.getUseWorker=function(){return this.$useWorker},this.onReloadTokenizer=function(g){var c=g.data;this.bgTokenizer.start(c.first),this._dispatchEvent("tokenizerUpdate",g)},this.$mode=null,this.setMode=function(k){if(this.$mode===k){return}this.$mode=k,this.$stopWorker(),this.$useWorker&&this.$startWorker();var g=k.getTokenizer();if(g.addEventListener!==undefined){var C=this.onReloadTokenizer.bind(this);g.addEventListener("update",C)}if(!this.bgTokenizer){this.bgTokenizer=new o(g);var m=this;this.bgTokenizer.addEventListener("update",function(b){m._dispatchEvent("tokenizerUpdate",b)})}else{this.bgTokenizer.setTokenizer(g)}this.bgTokenizer.setDocument(this.getDocument()),this.bgTokenizer.start(0),this.tokenRe=k.tokenRe,this.nonTokenRe=k.nonTokenRe,this._dispatchEvent("changeMode")},this.$stopWorker=function(){this.$worker&&this.$worker.terminate(),this.$worker=null},this.$startWorker=function(){if(typeof Worker!="undefined"&&!y.noWorker){try{this.$worker=this.$mode.createWorker(this)}catch(c){console.log("Could not load worker"),console.log(c),this.$worker=null}}else{this.$worker=null}},this.getMode=function(){return this.$mode},this.$scrollTop=0,this.setScrollTopRow=function(b){if(this.$scrollTop===b){return}this.$scrollTop=b,this._dispatchEvent("changeScrollTop")},this.getScrollTopRow=function(){return this.$scrollTop},this.getWidth=function(){return this.$computeWidth(),this.width},this.getScreenWidth=function(){return this.$computeWidth(),this.screenWidth},this.$computeWidth=function(I){if(this.$modified||I){this.$modified=!1;var H=this.doc.getAllLines(),G=0,F=0;for(var E=0;E<H.length;E++){var D=this.getFoldLine(E),C,m;C=H[E];if(D){var k=D.range.end;C=this.getFoldDisplayLine(D),E=k.row}m=C.length,G=Math.max(G,m),this.$useWrapMode||(F=Math.max(F,this.$getStringScreenWidth(C)[0]))}this.width=G,this.$useWrapMode?this.screenWidth=this.$wrapLimit:this.screenWidth=F}},this.getLine=function(b){return this.doc.getLine(b)},this.getLines=function(g,c){return this.doc.getLines(g,c)},this.getLength=function(){return this.doc.getLength()},this.getTextRange=function(b){return this.doc.getTextRange(b)},this.findMatchingBracket=function(k){if(k.column==0){return null}var g=this.getLine(k.row).charAt(k.column-1);if(g==""){return null}var m=g.match(/([\(\[\{])|([\)\]\}])/);return m?m[1]?this.$findClosingBracket(m[1],k):this.$findOpeningBracket(m[2],k):null},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{"},this.$findOpeningBracket=function(m,k){var H=this.$brackets[m],G=k.column-2,F=k.row,E=1,D=this.getLine(F);for(;;){while(G>=0){var C=D.charAt(G);if(C==H){E-=1;if(E==0){return{row:F,column:G}}}else{C==m&&(E+=1)}G-=1}F-=1;if(F<0){break}var D=this.getLine(F),G=D.length-1}return null},this.$findClosingBracket=function(I,H){var G=this.$brackets[I],F=H.column,E=H.row,D=1,C=this.getLine(E),m=this.getLength();for(;;){while(F<C.length){var k=C.charAt(F);if(k==G){D-=1;if(D==0){return{row:E,column:F}}}else{k==I&&(D+=1)}F+=1}E+=1;if(E>=m){break}var C=this.getLine(E),F=0}return null},this.insert=function(g,c){return this.doc.insert(g,c)},this.remove=function(b){return this.doc.remove(b)},this.undoChanges=function(k,g){if(!k.length){return}this.$fromUndo=!0;var C=null;for(var m=k.length-1;m!=-1;m--){delta=k[m],delta.group=="doc"?(this.doc.revertDeltas(delta.deltas),C=this.$getUndoSelection(delta.deltas,!0,C)):delta.deltas.forEach(function(b){this.addFolds(b.folds)},this)}return this.$fromUndo=!1,C&&!g&&this.selection.setSelectionRange(C),C},this.redoChanges=function(k,g){if(!k.length){return}this.$fromUndo=!0;var C=null;for(var m=0;m<k.length;m++){delta=k[m],delta.group=="doc"&&(this.doc.applyDeltas(delta.deltas),C=this.$getUndoSelection(delta.deltas,!1,C))}return this.$fromUndo=!1,C&&!g&&this.selection.setSelectionRange(C),C},this.$getUndoSelection=function(K,J,I){function H(b){var g=b.action=="insertText"||b.action=="insertLines";return J?!g:g}var G=K[0],F,E,D=!1;H(G)?(F=G.range.clone(),D=!0):(F=q.fromPoints(G.range.start,G.range.start),D=!1);for(var C=1;C<K.length;C++){G=K[C],H(G)?(E=G.range.start,F.compare(E.row,E.column)==-1&&F.setStart(G.range.start),E=G.range.end,F.compare(E.row,E.column)==1&&F.setEnd(G.range.end),D=!0):(E=G.range.start,F.compare(E.row,E.column)==-1&&(F=q.fromPoints(G.range.start,G.range.start)),D=!1)}if(I!=null){var m=I.compareRange(F);m==1?F.setStart(I.start):m==-1&&F.setEnd(I.end)}return F},this.replace=function(g,c){return this.doc.replace(g,c)},this.moveText=function(I,H){var G=this.getTextRange(I);this.remove(I);var F=H.row,E=H.column;!I.isMultiLine()&&I.start.row==F&&I.end.column<E&&(E-=G.length);if(I.isMultiLine()&&I.end.row<F){var D=this.doc.$split(G);F-=D.length-1}var C=F+I.end.row-I.start.row,m=I.isMultiLine()?I.end.column:E+I.end.column-I.start.column,k=new q(F,E,C,m);return this.insert(k.start,G),k},this.indentRows=function(k,g,C){C=C.replace(/\t/g,this.getTabString());for(var m=k;m<=g;m++){this.insert({row:m,column:0},C)}},this.outdentRows=function(m){var k=m.collapseRows(),G=new q(0,0,0,0),F=this.getTabSize();for(var E=k.start.row;E<=k.end.row;++E){var D=this.getLine(E);G.start.row=E,G.end.row=E;for(var C=0;C<F;++C){if(D.charAt(C)!=" "){break}}C<F&&D.charAt(C)=="\t"?(G.start.column=C,G.end.column=C+1):(G.start.column=0,G.end.column=C),this.remove(G)}},this.moveLinesUp=function(k,g){if(k<=0){return 0}var m=this.doc.removeLines(k,g);return this.doc.insertLines(k-1,m),-1},this.moveLinesDown=function(k,g){if(g>=this.doc.getLength()-1){return 0}var m=this.doc.removeLines(k,g);return this.doc.insertLines(k+1,m),1},this.duplicateLines=function(k,g){var k=this.$clipRowToDocument(k),g=this.$clipRowToDocument(g),C=this.getLines(k,g);this.doc.insertLines(k,C);var m=g-k+1;return m},this.$clipRowToDocument=function(b){return Math.max(0,Math.min(b,this.doc.getLength()-1))},this.$clipPositionToDocument=function(k,g){g=Math.max(0,g);if(k<0){k=0,g=0}else{var m=this.doc.getLength();k>=m?(k=m-1,g=this.doc.getLine(m-1).length):g=Math.min(this.doc.getLine(k).length,g)}return{row:k,column:g}},this.$wrapLimit=80,this.$useWrapMode=!1,this.$wrapLimitRange={min:null,max:null},this.setUseWrapMode=function(g){if(g!=this.$useWrapMode){this.$useWrapMode=g,this.$modified=!0,this.$resetRowCache(0);if(g){var c=this.getLength();this.$wrapData=[];for(i=0;i<c;i++){this.$wrapData.push([])}this.$updateWrapData(0,c-1)}this._dispatchEvent("changeWrapMode")}},this.getUseWrapMode=function(){return this.$useWrapMode},this.setWrapLimitRange=function(g,c){if(this.$wrapLimitRange.min!==g||this.$wrapLimitRange.max!==c){this.$wrapLimitRange.min=g,this.$wrapLimitRange.max=c,this.$modified=!0,this._dispatchEvent("changeWrapMode")}},this.adjustWrapLimit=function(g){var c=this.$constrainWrapLimit(g);return c!=this.$wrapLimit&&c>0?(this.$wrapLimit=c,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._dispatchEvent("changeWrapLimit")),!0):!1},this.$constrainWrapLimit=function(k){var g=this.$wrapLimitRange.min;g&&(k=Math.max(g,k));var m=this.$wrapLimitRange.max;return m&&(k=Math.min(m,k)),Math.max(1,k)},this.getWrapLimit=function(){return this.$wrapLimit},this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},this.$updateInternalDataOnChange=function(V){var U=this.$useWrapMode,R,Q=V.data.action,P=V.data.range.start.row,O=V.data.range.end.row,M=V.data.range.start,L=V.data.range.end,K=null;Q.indexOf("Lines")!=-1?(Q=="insertLines"?O=P+V.data.lines.length:O=P,R=V.data.lines.length):R=O-P;if(R!=0){if(Q.indexOf("remove")!=-1){U&&this.$wrapData.splice(P,R);var J=this.$foldData;K=this.getFoldsInRange(V.data.range),this.removeFolds(K);var I=this.getFoldLine(L.row),H=0;if(I){I.addRemoveChars(L.row,L.column,M.column-L.column),I.shiftRow(-R);var G=this.getFoldLine(P);G&&G!==I&&(G.merge(I),I=G),H=J.indexOf(I)+1}for(H;H<J.length;H++){var I=J[H];I.start.row>=L.row&&I.shiftRow(-R)}O=P}else{var F;if(U){F=[P,0];for(var E=0;E<R;E++){F.push([])}this.$wrapData.splice.apply(this.$wrapData,F)}var J=this.$foldData,I=this.getFoldLine(P),H=0;if(I){var D=I.range.compareInside(M.row,M.column);D==0?(I=I.split(M.row,M.column),I.shiftRow(R),I.addRemoveChars(O,0,L.column-M.column)):D==-1&&(I.addRemoveChars(P,0,L.column-M.column),I.shiftRow(R)),H=J.indexOf(I)+1}for(H;H<J.length;H++){var I=J[H];I.start.row>=P&&I.shiftRow(R)}}}else{var C;R=Math.abs(V.data.range.start.column-V.data.range.end.column),Q.indexOf("remove")!=-1&&(K=this.getFoldsInRange(V.data.range),this.removeFolds(K),R=-R);var I=this.getFoldLine(P);I&&I.addRemoveChars(P,M.column,R)}return U&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),U&&this.$updateWrapData(P,O),K},this.$updateWrapData=function(I,H){var G=this.doc.getAllLines(),F=this.getTabSize(),E=this.$wrapData,D=this.$wrapLimit,C,k,g=I;H=Math.min(H,G.length-1);while(g<=H){k=this.getFoldLine(g);if(!k){C=this.$getDisplayTokens(u.stringTrimRight(G[g]))}else{C=[],k.walk(function(m,c,M,L){var K;if(m){K=this.$getDisplayTokens(m,C.length),K[0]=j;for(var J=1;J<K.length;J++){K[J]=f}}else{K=this.$getDisplayTokens(G[c].substring(L,M),C.length)}C=C.concat(K)}.bind(this),k.end.row,G[k.end.row].length+1);while(C.length!=0&&C[C.length-1]>=e){C.pop()}}E[g]=this.$computeWrapSplits(C,D,F),g=this.getRowFoldEnd(g)+1}};var d=1,B=2,j=3,f=4,e=10,a=11,A=12;this.$computeWrapSplits=function(H,G,F){function k(I){var K=H.slice(C,I),J=K.length;K.join("").replace(/12/g,function(b){J-=1}).replace(/2/g,function(b){J-=1}),m+=J,E.push(m),C=I}if(H.length==0){return[]}var F=this.getTabSize(),E=[],D=H.length,C=0,m=0;while(D-C>G){var g=C+G;if(H[g]>=e){while(H[g]>=e){g++}k(g);continue}if(H[g]==j||H[g]==f){for(g;g!=C-1;g--){if(H[g]==j){break}}if(g>C){k(g);continue}g=C+G;for(g;g<H.length;g++){if(H[g]!=f){break}}if(g==H.length){break}k(g);continue}for(g;g!=C-1;g--){if(H[g]>=j){g++;break}}if(g>C){k(g);continue}g=C+G,k(C+G)}return E},this.$getDisplayTokens=function(b,E){var D=[],C;E=E||0;for(var m=0;m<b.length;m++){var k=b.charCodeAt(m);if(k==9){C=this.getScreenTabSize(D.length+E),D.push(a);for(var c=1;c<C;c++){D.push(A)}}else{k==32?D.push(e):z(k)?D.push(d,B):D.push(d)}}return D},this.$getStringScreenWidth=function(k,g,D){if(g==0){return[0,0]}g==null&&(g=D+k.length*Math.max(this.getTabSize(),2)),D=D||0;var C,m;for(m=0;m<k.length;m++){C=k.charCodeAt(m),C==9?D+=this.getScreenTabSize(D):z(C)?D+=2:D+=1;if(D>g){break}}return[D,m]},this.getRowLength=function(b){return !this.$useWrapMode||!this.$wrapData[b]?1:this.$wrapData[b].length+1},this.getRowHeight=function(g,c){return this.getRowLength(c)*g.lineHeight},this.getScreenLastRowColumn=function(b){return this.documentToScreenColumn(b,this.doc.getLine(b).length)},this.getDocumentLastRowColumn=function(k,g){var m=this.documentToScreenRow(k,g);return this.getScreenLastRowColumn(m)},this.getDocumentLastRowColumnPosition=function(k,g){var m=this.documentToScreenRow(k,g);return this.screenToDocumentPosition(m,Number.MAX_VALUE/10)},this.getRowSplitData=function(b){return this.$useWrapMode?this.$wrapData[b]:undefined},this.getScreenTabSize=function(b){return this.$tabSize-b%this.$tabSize},this.screenToDocumentRow=function(g,c){return this.screenToDocumentPosition(g,c).row},this.screenToDocumentColumn=function(g,c){return this.screenToDocumentPosition(g,c).column},this.screenToDocumentPosition=function(U,R){if(U<0){return{row:0,column:0}}var Q,P=0,O=0,M,L,K=0,J=0,I=this.$rowCache;for(var H=0;H<I.length;H++){if(I[H].screenRow<U){K=I[H].screenRow,P=I[H].docRow}else{break}}var G=!I.length||H==I.length,F=this.getLength()-1,E=this.getNextFold(P),D=E?E.start.row:Infinity;while(K<=U){J=this.getRowLength(P);if(K+J-1>=U||P>=F){break}K+=J,P++,P>D&&(P=E.end.row+1,E=this.getNextFold(P),D=E?E.start.row:Infinity),G&&I.push({docRow:P,screenRow:K})}E&&E.start.row<=P?Q=this.getFoldDisplayLine(E):(Q=this.getLine(P),E=null);var C=[];return this.$useWrapMode&&(C=this.$wrapData[P],C&&(M=C[U-K],U>K&&C.length&&(O=C[U-K-1]||C[C.length-1],Q=Q.substring(O)))),O+=this.$getStringScreenWidth(Q,R)[1],K+C.length<U&&(O=Number.MAX_VALUE),this.$useWrapMode?O>=M&&(O=M-1):O=Math.min(O,Q.length),E?E.idxToPosition(O):{row:P,column:O}},this.documentToScreenPosition=function(X,W){if(typeof W=="undefined"){var V=this.$clipPositionToDocument(X.row,X.column)}else{V=this.$clipPositionToDocument(X,W)}X=V.row,W=V.column;var U=this.$rowCache.length,R;if(this.$useWrapMode){R=this.$wrapData;if(X>R.length-1){return{row:this.getScreenLength(),column:R.length==0?0:R[R.length-1].length-1}}}var Q=0,P=0,O=null,M=null;M=this.getFoldAt(X,W,1),M&&(X=M.start.row,W=M.start.column);var L,K=0,J=this.$rowCache;for(var I=0;I<J.length;I++){if(J[I].docRow<X){Q=J[I].screenRow,K=J[I].docRow}else{break}}var H=!J.length||I==J.length,G=this.getNextFold(K),F=G?G.start.row:Infinity;while(K<X){if(K>=F){L=G.end.row+1;if(L>X){break}G=this.getNextFold(L),F=G?G.start.row:Infinity}else{L=K+1}Q+=this.getRowLength(K),K=L,H&&J.push({docRow:K,screenRow:Q})}var E="";G&&K>=F?(E=this.getFoldDisplayLine(G,X,W),O=G.start.row):(E=this.getLine(X).substring(0,W),O=X);if(this.$useWrapMode){var D=R[O],C=0;while(E.length>=D[C]){Q++,C++}E=E.substring(D[C-1]||0,E.length)}return{row:Q,column:this.$getStringScreenWidth(E)[0]}},this.documentToScreenColumn=function(g,c){return this.documentToScreenPosition(g,c).column},this.documentToScreenRow=function(g,c){return this.documentToScreenPosition(g,c).row},this.getScreenLength=function(){var k=0,g=null,E=null;if(!this.$useWrapMode){k=this.getLength();var D=this.$foldData;for(var C=0;C<D.length;C++){E=D[C],k-=E.end.row-E.start.row}}else{for(var m=0;m<this.$wrapData.length;m++){(E=this.getFoldLine(m,g))?(m=E.end.row,k+=1):k+=this.$wrapData[m].length+1}}return k}}).call(n.prototype),y("ace/edit_session/folding").Folding.call(n.prototype),x.EditSession=n}),define("ace/selection",["require","exports","module","pilot/oop","pilot/lang","pilot/event_emitter","ace/range"],function(k,j,r){var q=k("pilot/oop"),p=k("pilot/lang"),o=k("pilot/event_emitter").EventEmitter,n=k("ace/range").Range,m=function(d){this.session=d,this.doc=d.getDocument(),this.clearSelection(),this.selectionLead=this.doc.createAnchor(0,0),this.selectionAnchor=this.doc.createAnchor(0,0);var c=this;this.selectionLead.on("change",function(b){c._dispatchEvent("changeCursor"),c.$isEmpty||c._dispatchEvent("changeSelection"),!c.$preventUpdateDesiredColumnOnChange&&b.old.column!=b.value.column&&c.$updateDesiredColumn()}),this.selectionAnchor.on("change",function(){c.$isEmpty||c._dispatchEvent("changeSelection")})};(function(){q.implement(this,o),this.isEmpty=function(){return this.$isEmpty||this.selectionAnchor.row==this.selectionLead.row&&this.selectionAnchor.column==this.selectionLead.column},this.isMultiLine=function(){return this.isEmpty()?!1:this.getRange().isMultiLine()},this.getCursor=function(){return this.selectionLead.getPosition()},this.setSelectionAnchor=function(d,c){this.selectionAnchor.setPosition(d,c),this.$isEmpty&&(this.$isEmpty=!1,this._dispatchEvent("changeSelection"))},this.getSelectionAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.selectionAnchor.getPosition()},this.getSelectionLead=function(){return this.selectionLead.getPosition()},this.shiftSelection=function(f){if(this.$isEmpty){this.moveCursorTo(this.selectionLead.row,this.selectionLead.column+f);return}var e=this.getSelectionAnchor(),s=this.getSelectionLead(),g=this.isBackwards();(!g||e.column!==0)&&this.setSelectionAnchor(e.row,e.column+f),(g||s.column!==0)&&this.$moveSelection(function(){this.moveCursorTo(s.row,s.column+f)})},this.isBackwards=function(){var d=this.selectionAnchor,c=this.selectionLead;return d.row>c.row||d.row==c.row&&d.column>c.column},this.getRange=function(){var d=this.selectionAnchor,c=this.selectionLead;return this.isEmpty()?n.fromPoints(c,c):this.isBackwards()?n.fromPoints(c,d):n.fromPoints(d,c)},this.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._dispatchEvent("changeSelection"))},this.selectAll=function(){var b=this.doc.getLength()-1;this.setSelectionAnchor(b,this.doc.getLine(b).length),this.moveCursorTo(0,0)},this.setSelectionRange=function(d,c){c?(this.setSelectionAnchor(d.end.row,d.end.column),this.selectTo(d.start.row,d.start.column)):(this.setSelectionAnchor(d.start.row,d.start.column),this.selectTo(d.end.row,d.end.column)),this.$updateDesiredColumn()},this.$updateDesiredColumn=function(){var b=this.getCursor();this.$desiredColumn=this.session.documentToScreenColumn(b.row,b.column)},this.$moveSelection=function(d){var c=this.selectionLead;this.$isEmpty&&this.setSelectionAnchor(c.row,c.column),d.call(this)},this.selectTo=function(d,c){this.$moveSelection(function(){this.moveCursorTo(d,c)})},this.selectToPosition=function(b){this.$moveSelection(function(){this.moveCursorToPosition(b)})},this.selectUp=function(){this.$moveSelection(this.moveCursorUp)},this.selectDown=function(){this.$moveSelection(this.moveCursorDown)},this.selectRight=function(){this.$moveSelection(this.moveCursorRight)},this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},this.selectWord=function(){var d=this.getCursor(),c=this.session.getWordRange(d.row,d.column);this.setSelectionRange(c)},this.selectLine=function(){var e=this.selectionLead.row,d,f=this.session.getFoldLine(e);f?(e=f.start.row,d=f.end.row):d=e,this.setSelectionAnchor(e,0),this.$moveSelection(function(){this.moveCursorTo(d+1,0)})},this.moveCursorUp=function(){this.moveCursorBy(-1,0)},this.moveCursorDown=function(){this.moveCursorBy(1,0)},this.moveCursorLeft=function(){var e=this.selectionLead.getPosition(),d;if(d=this.session.getFoldAt(e.row,e.column,-1)){this.moveCursorTo(d.start.row,d.start.column)}else{if(e.column==0){e.row>0&&this.moveCursorTo(e.row-1,this.doc.getLine(e.row-1).length)}else{var f=this.session.getTabSize();this.session.isTabStop(e)&&this.doc.getLine(e.row).slice(e.column-f,e.column).split(" ").length-1==f?this.moveCursorBy(0,-f):this.moveCursorBy(0,-1)}}},this.moveCursorRight=function(){var e=this.selectionLead.getPosition(),d;if(d=this.session.getFoldAt(e.row,e.column,1)){this.moveCursorTo(d.end.row,d.end.column)}else{if(this.selectionLead.column==this.doc.getLine(this.selectionLead.row).length){this.selectionLead.row<this.doc.getLength()-1&&this.moveCursorTo(this.selectionLead.row+1,0)}else{var f=this.session.getTabSize(),e=this.selectionLead;this.session.isTabStop(e)&&this.doc.getLine(e.row).slice(e.column,e.column+f).split(" ").length-1==f?this.moveCursorBy(0,f):this.moveCursorBy(0,1)}}},this.moveCursorLineStart=function(){var s=this.selectionLead.row,g=this.selectionLead.column,w=this.session.documentToScreenRow(s,g),v=this.session.screenToDocumentPosition(w,0),u=this.session.getDisplayLine(s,null,v.row,v.column),t=u.match(/^\s*/);t[0].length==g?this.moveCursorTo(v.row,v.column):this.moveCursorTo(v.row,v.column+t[0].length)},this.moveCursorLineEnd=function(){var d=this.selectionLead,c=this.session.getDocumentLastRowColumnPosition(d.row,d.column);this.moveCursorTo(c.row,c.column)},this.moveCursorFileEnd=function(){var d=this.doc.getLength()-1,c=this.doc.getLine(d).length;this.moveCursorTo(d,c)},this.moveCursorFileStart=function(){this.moveCursorTo(0,0)},this.moveCursorWordRight=function(){var s=this.selectionLead.row,g=this.selectionLead.column,w=this.doc.getLine(s),v=w.substring(g),u;this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var t;if(t=this.session.getFoldAt(s,g,1)){this.moveCursorTo(t.end.row,t.end.column);return}if(g==w.length){this.moveCursorRight();return}if(u=this.session.nonTokenRe.exec(v)){g+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0}else{if(u=this.session.tokenRe.exec(v)){g+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0}}this.moveCursorTo(s,g)},this.moveCursorWordLeft=function(){var s=this.selectionLead.row,e=this.selectionLead.column,w;if(w=this.session.getFoldAt(s,e,-1)){this.moveCursorTo(w.start.row,w.start.column);return}if(e==0){this.moveCursorLeft();return}var v=this.session.getFoldStringAt(s,e,-1);v==null&&(v=this.doc.getLine(s).substring(0,e));var u=p.stringReverse(v),t;this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;if(t=this.session.nonTokenRe.exec(u)){e-=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0}else{if(t=this.session.tokenRe.exec(u)){e-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0}}this.moveCursorTo(s,e)},this.moveCursorBy=function(g,f){var u=this.session.documentToScreenPosition(this.selectionLead.row,this.selectionLead.column),t=f==0&&this.$desiredColumn||u.column,s=this.session.screenToDocumentPosition(u.row+g,t);this.moveCursorTo(s.row,s.column+f,f==0)},this.moveCursorToPosition=function(b){this.moveCursorTo(b.row,b.column)},this.moveCursorTo=function(f,e,s){var g=this.session.getFoldAt(f,e,1);g&&(f=g.start.row,e=g.start.column),this.$preventUpdateDesiredColumnOnChange=!0,this.selectionLead.setPosition(f,e),this.$preventUpdateDesiredColumnOnChange=!1,s||this.$updateDesiredColumn(this.selectionLead.column)},this.moveCursorToScreen=function(f,e,s){var g=this.session.screenToDocumentPosition(f,e);f=g.row,e=g.column,this.moveCursorTo(f,e,s)}}).call(m.prototype),j.Selection=m}),define("ace/range",["require","exports","module"],function(f,e,j){var g=function(m,k,o,n){this.start={row:m,column:k},this.end={row:o,column:n}};(function(){this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(d,c){return this.compare(d,c)==0},this.compareRange=function(m){var k,o=m.end,n=m.start;return k=this.compare(o.row,o.column),k==1?(k=this.compare(n.row,n.column),k==1?2:k==0?1:0):k==-1?-2:(k=this.compare(n.row,n.column),k==-1?-1:k==1?42:0)},this.containsRange=function(d){var c=this.compareRange(d);return c==-1||c==0||c==1},this.isEnd=function(d,c){return this.end.row==d&&this.end.column==c},this.isStart=function(d,c){return this.start.row==d&&this.start.column==c},this.setStart=function(d,c){typeof d=="object"?(this.start.column=d.column,this.start.row=d.row):(this.start.row=d,this.start.column=c)},this.setEnd=function(d,c){typeof d=="object"?(this.end.column=d.column,this.end.row=d.row):(this.end.row=d,this.end.column=c)},this.inside=function(d,c){return this.compare(d,c)==0?this.isEnd(d,c)||this.isStart(d,c)?!1:!0:!1},this.insideStart=function(d,c){return this.compare(d,c)==0?this.isEnd(d,c)?!1:!0:!1},this.insideEnd=function(d,c){return this.compare(d,c)==0?this.isStart(d,c)?!1:!0:!1},this.compare=function(d,c){return !this.isMultiLine()&&d===this.start.row?c<this.start.column?-1:c>this.end.column?1:0:d<this.start.row?-1:d>this.end.row?1:this.start.row===d?c>=this.start.column?0:-1:this.end.row===d?c<=this.end.column?0:1:0},this.compareStart=function(d,c){return this.start.row==d&&this.start.column==c?-1:this.compare(d,c)},this.compareEnd=function(d,c){return this.end.row==d&&this.end.column==c?1:this.compare(d,c)},this.compareInside=function(d,c){return this.end.row==d&&this.end.column==c?1:this.start.row==d&&this.start.column==c?-1:this.compare(d,c)},this.clipRows=function(k,d){if(this.end.row>d){var n={row:d+1,column:0}}if(this.start.row>d){var m={row:d+1,column:0}}if(this.start.row<k){var m={row:k,column:0}}if(this.end.row<k){var n={row:k,column:0}}return g.fromPoints(m||this.start,n||this.end)},this.extend=function(k,d){var o=this.compare(k,d);if(o==0){return this}if(o==-1){var n={row:k,column:d}}else{var m={row:k,column:d}}return g.fromPoints(n||this.start,m||this.end)},this.isEmpty=function(){return this.start.row==this.end.row&&this.start.column==this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return g.fromPoints(this.start,this.end)},this.collapseRows=function(){return this.end.column==0?new g(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new g(this.start.row,0,this.end.row,0)},this.toScreenRange=function(k){var d=k.documentToScreenPosition(this.start),m=k.documentToScreenPosition(this.end);return new g(d.row,d.column,m.row,m.column)}}).call(g.prototype),g.fromPoints=function(d,c){return new g(d.row,d.column,c.row,c.column)},e.Range=g}),define("ace/mode/text",["require","exports","module","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour","ace/unicode"],function(k,j,r){var q=k("ace/tokenizer").Tokenizer,p=k("ace/mode/text_highlight_rules").TextHighlightRules,o=k("ace/mode/behaviour").Behaviour,n=k("ace/unicode"),m=function(){this.$tokenizer=new q((new p).getRules()),this.$behaviour=new o};(function(){this.tokenRe=new RegExp("^["+n.packages.L+n.packages.Mn+n.packages.Mc+n.packages.Nd+n.packages.Pc+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+n.packages.L+n.packages.Mn+n.packages.Mc+n.packages.Nd+n.packages.Pc+"\\$_]|s])+","g"),this.getTokenizer=function(){return this.$tokenizer},this.toggleCommentLines=function(f,e,s,g){},this.getNextLineIndent=function(e,d,f){return""},this.checkOutdent=function(e,d,f){return !1},this.autoOutdent=function(e,d,f){},this.$getIndent=function(d){var c=d.match(/^(\s+)/);return c?c[1]:""},this.createWorker=function(b){return null},this.highlightSelection=function(D){var C=D.session;C.$selectionOccurrences||(C.$selectionOccurrences=[]),C.$selectionOccurrences.length&&this.clearSelectionHighlight(D);var B=D.getSelectionRange();if(B.isEmpty()||B.isMultiLine()){return}var A=B.start.column-1,z=B.end.column+1,y=C.getLine(B.start.row),x=y.length,w=y.substring(Math.max(A,0),Math.min(z,x));if(A>=0&&/^[\w\d]/.test(w)||z<=x&&/[\w\d]$/.test(w)){return}w=y.substring(B.start.column,B.end.column);if(!/^[\w\d]+$/.test(w)){return}var v=D.getCursorPosition(),u={wrap:!0,wholeWord:!0,caseSensitive:!0,needle:w},t=D.$search.getOptions();D.$search.set(u);var s=D.$search.findAll(C);s.forEach(function(b){if(!b.contains(v.row,v.column)){var d=C.addMarker(b,"ace_selected_word","text");C.$selectionOccurrences.push(d)}}),D.$search.set(t)},this.clearSelectionHighlight=function(b){if(!b.session.$selectionOccurrences){return}b.session.$selectionOccurrences.forEach(function(a){b.session.removeMarker(a)}),b.session.$selectionOccurrences=[]},this.createModeDelegates=function(e){if(!this.$embeds){return}this.$modes={};for(var d=0;d<this.$embeds.length;d++){e[this.$embeds[d]]&&(this.$modes[this.$embeds[d]]=new e[this.$embeds[d]])}var f=["toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction"];for(var d=0;d<f.length;d++){(function(b){var g=f[d],c=b[g];b[f[d]]=function(){return this.$delegator(g,arguments,c)}})(this)}},this.$delegator=function(t,s,z){var y=s[0];for(var x=0;x<this.$embeds.length;x++){if(!this.$modes[this.$embeds[x]]){continue}var w=y.split(this.$embeds[x]);if(!w[0]&&w[1]){s[0]=w[1];var v=this.$modes[this.$embeds[x]];return v[t].apply(v,s)}}var u=z.apply(this,s);return z?u:undefined},this.transformAction=function(t,s,z,y,x){if(this.$behaviour){var w=this.$behaviour.getBehaviours();for(var v in w){if(w[v][s]){var u=w[v][s].apply(this,arguments);if(u!==!1){return u}}}}return !1}}).call(m.prototype),j.Mode=m}),define("ace/tokenizer",["require","exports","module"],function(f,e,j){var g=function(u){this.rules=u,this.regExps={},this.matchMappings={};for(var t in this.rules){var s=this.rules[t],r=s,q=[],p=0,o=this.matchMappings[t]={};for(var n=0;n<r.length;n++){var m=(new RegExp("(?:("+r[n].regex+")|(.))")).exec("a").length-2,k=r[n].regex.replace(/\\([0-9]+)/g,function(d,c){return"\\"+(parseInt(c,10)+p+1)});o[p]={rule:n,len:m},p+=m,q.push(k)}this.regExps[t]=new RegExp("(?:("+q.join(")|(")+")|(.))","g")}};(function(){this.getLineTokens=function(D,C){var B=C,A=this.rules[B],z=this.matchMappings[B],y=this.regExps[B];y.lastIndex=0;var x,w=[],v=0,u={type:null,value:""};while(x=y.exec(D)){var t="text",s=null,r=[x[0]];for(var q=0;q<x.length-2;q++){if(x[q+1]!==undefined){s=A[z[q].rule],z[q].len>1&&(r=x.slice(q+2,q+1+z[q].len)),typeof s.token=="function"?t=s.token.apply(this,r):t=s.token;var p=s.next;p&&p!==B&&(B=p,A=this.rules[B],z=this.matchMappings[B],v=y.lastIndex,y=this.regExps[B],y.lastIndex=v);break}}if(r[0]){typeof t=="string"&&(r=[r.join("")],t=[t]);for(var q=0;q<r.length;q++){(!s||s.merge||t[q]==="text")&&u.type===t[q]?u.value+=r[q]:(u.type&&w.push(u),u={type:t[q],value:r[q]})}}if(v==D.length){break}v=y.lastIndex}return u.type&&w.push(u),{tokens:w,state:B}}}).call(g.prototype),e.Tokenizer=g}),define("ace/mode/text_highlight_rules",["require","exports","module","pilot/lang"],function(g,f,m){var k=g("pilot/lang"),j=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{token:"text",regex:".+"}]}};(function(){this.addRules=function(o,n){for(var s in o){var r=o[s];for(var q=0;q<r.length;q++){var p=r[q];p.next?p.next=n+p.next:p.next=n+s}this.$rules[n+s]=r}},this.getRules=function(){return this.$rules},this.embedRules=function(n,d,s,r){var q=(new n).getRules();if(r){for(var p=0;p<r.length;p++){r[p]=d+r[p]}}else{r=[];for(var o in q){r.push(d+o)}}this.addRules(q,d);for(var p=0;p<r.length;p++){Array.prototype.unshift.apply(this.$rules[r[p]],k.deepCopy(s))}this.$embeds||(this.$embeds=[]),this.$embeds.push(d)},this.getEmbeds=function(){return this.$embeds}}).call(j.prototype),f.TextHighlightRules=j}),define("ace/mode/behaviour",["require","exports","module"],function(f,e,j){var g=function(){this.$behaviours={}};(function(){this.add=function(k,d,m){switch(undefined){case this.$behaviours:this.$behaviours={};case this.$behaviours[k]:this.$behaviours[k]={}}this.$behaviours[k][d]=m},this.addBehaviours=function(k){for(var d in k){for(var m in k[d]){this.add(d,m,k[d][m])}}},this.remove=function(b){this.$behaviours&&this.$behaviours[b]&&delete this.$behaviours[b]},this.inherit=function(k,d){if(typeof k=="function"){var m=(new k).getBehaviours(d)}else{var m=k.getBehaviours(d)}this.addBehaviours(m)},this.getBehaviours=function(k){if(!k){return this.$behaviours}var d={};for(var m=0;m<k.length;m++){this.$behaviours[k[m]]&&(d[k[m]]=this.$behaviours[k[m]])}return d}}).call(g.prototype),e.Behaviour=g}),define("ace/unicode",["require","exports","module"],function(f,e,j){function g(b){var m=/\w{4}/g;for(var k in b){e.packages[k]=b[k].replace(m,"\\u$&")}}e.packages={},g({L:"0041-005A0061-007A00AA00B500BA00C0-00D600D8-00F600F8-02C102C6-02D102E0-02E402EC02EE0370-037403760377037A-037D03860388-038A038C038E-03A103A3-03F503F7-0481048A-05250531-055605590561-058705D0-05EA05F0-05F20621-064A066E066F0671-06D306D506E506E606EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA07F407F507FA0800-0815081A082408280904-0939093D09500958-0961097109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E460E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EC60EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10A0-10C510D0-10FA10FC1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317D717DC1820-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541AA71B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C7D1CE9-1CEC1CEE-1CF11D00-1DBF1E00-1F151F18-1F1D1F20-1F451F48-1F4D1F50-1F571F591F5B1F5D1F5F-1F7D1F80-1FB41FB6-1FBC1FBE1FC2-1FC41FC6-1FCC1FD0-1FD31FD6-1FDB1FE0-1FEC1FF2-1FF41FF6-1FFC2071207F2090-209421022107210A-211321152119-211D212421262128212A-212D212F-2139213C-213F2145-2149214E218321842C00-2C2E2C30-2C5E2C60-2CE42CEB-2CEE2D00-2D252D30-2D652D6F2D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE2E2F300530063031-3035303B303C3041-3096309D-309F30A1-30FA30FC-30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A48CA4D0-A4FDA500-A60CA610-A61FA62AA62BA640-A65FA662-A66EA67F-A697A6A0-A6E5A717-A71FA722-A788A78BA78CA7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2A9CFAA00-AA28AA40-AA42AA44-AA4BAA60-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADB-AADDABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB00-FB06FB13-FB17FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF21-FF3AFF41-FF5AFF66-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",Ll:"0061-007A00AA00B500BA00DF-00F600F8-00FF01010103010501070109010B010D010F01110113011501170119011B011D011F01210123012501270129012B012D012F01310133013501370138013A013C013E014001420144014601480149014B014D014F01510153015501570159015B015D015F01610163016501670169016B016D016F0171017301750177017A017C017E-0180018301850188018C018D019201950199-019B019E01A101A301A501A801AA01AB01AD01B001B401B601B901BA01BD-01BF01C601C901CC01CE01D001D201D401D601D801DA01DC01DD01DF01E101E301E501E701E901EB01ED01EF01F001F301F501F901FB01FD01FF02010203020502070209020B020D020F02110213021502170219021B021D021F02210223022502270229022B022D022F02310233-0239023C023F0240024202470249024B024D024F-02930295-02AF037103730377037B-037D039003AC-03CE03D003D103D5-03D703D903DB03DD03DF03E103E303E503E703E903EB03ED03EF-03F303F503F803FB03FC0430-045F04610463046504670469046B046D046F04710473047504770479047B047D047F0481048B048D048F04910493049504970499049B049D049F04A104A304A504A704A904AB04AD04AF04B104B304B504B704B904BB04BD04BF04C204C404C604C804CA04CC04CE04CF04D104D304D504D704D904DB04DD04DF04E104E304E504E704E904EB04ED04EF04F104F304F504F704F904FB04FD04FF05010503050505070509050B050D050F05110513051505170519051B051D051F0521052305250561-05871D00-1D2B1D62-1D771D79-1D9A1E011E031E051E071E091E0B1E0D1E0F1E111E131E151E171E191E1B1E1D1E1F1E211E231E251E271E291E2B1E2D1E2F1E311E331E351E371E391E3B1E3D1E3F1E411E431E451E471E491E4B1E4D1E4F1E511E531E551E571E591E5B1E5D1E5F1E611E631E651E671E691E6B1E6D1E6F1E711E731E751E771E791E7B1E7D1E7F1E811E831E851E871E891E8B1E8D1E8F1E911E931E95-1E9D1E9F1EA11EA31EA51EA71EA91EAB1EAD1EAF1EB11EB31EB51EB71EB91EBB1EBD1EBF1EC11EC31EC51EC71EC91ECB1ECD1ECF1ED11ED31ED51ED71ED91EDB1EDD1EDF1EE11EE31EE51EE71EE91EEB1EED1EEF1EF11EF31EF51EF71EF91EFB1EFD1EFF-1F071F10-1F151F20-1F271F30-1F371F40-1F451F50-1F571F60-1F671F70-1F7D1F80-1F871F90-1F971FA0-1FA71FB0-1FB41FB61FB71FBE1FC2-1FC41FC61FC71FD0-1FD31FD61FD71FE0-1FE71FF2-1FF41FF61FF7210A210E210F2113212F21342139213C213D2146-2149214E21842C30-2C5E2C612C652C662C682C6A2C6C2C712C732C742C76-2C7C2C812C832C852C872C892C8B2C8D2C8F2C912C932C952C972C992C9B2C9D2C9F2CA12CA32CA52CA72CA92CAB2CAD2CAF2CB12CB32CB52CB72CB92CBB2CBD2CBF2CC12CC32CC52CC72CC92CCB2CCD2CCF2CD12CD32CD52CD72CD92CDB2CDD2CDF2CE12CE32CE42CEC2CEE2D00-2D25A641A643A645A647A649A64BA64DA64FA651A653A655A657A659A65BA65DA65FA663A665A667A669A66BA66DA681A683A685A687A689A68BA68DA68FA691A693A695A697A723A725A727A729A72BA72DA72F-A731A733A735A737A739A73BA73DA73FA741A743A745A747A749A74BA74DA74FA751A753A755A757A759A75BA75DA75FA761A763A765A767A769A76BA76DA76FA771-A778A77AA77CA77FA781A783A785A787A78CFB00-FB06FB13-FB17FF41-FF5A",Lu:"0041-005A00C0-00D600D8-00DE01000102010401060108010A010C010E01100112011401160118011A011C011E01200122012401260128012A012C012E01300132013401360139013B013D013F0141014301450147014A014C014E01500152015401560158015A015C015E01600162016401660168016A016C016E017001720174017601780179017B017D018101820184018601870189-018B018E-0191019301940196-0198019C019D019F01A001A201A401A601A701A901AC01AE01AF01B1-01B301B501B701B801BC01C401C701CA01CD01CF01D101D301D501D701D901DB01DE01E001E201E401E601E801EA01EC01EE01F101F401F6-01F801FA01FC01FE02000202020402060208020A020C020E02100212021402160218021A021C021E02200222022402260228022A022C022E02300232023A023B023D023E02410243-02460248024A024C024E03700372037603860388-038A038C038E038F0391-03A103A3-03AB03CF03D2-03D403D803DA03DC03DE03E003E203E403E603E803EA03EC03EE03F403F703F903FA03FD-042F04600462046404660468046A046C046E04700472047404760478047A047C047E0480048A048C048E04900492049404960498049A049C049E04A004A204A404A604A804AA04AC04AE04B004B204B404B604B804BA04BC04BE04C004C104C304C504C704C904CB04CD04D004D204D404D604D804DA04DC04DE04E004E204E404E604E804EA04EC04EE04F004F204F404F604F804FA04FC04FE05000502050405060508050A050C050E05100512051405160518051A051C051E0520052205240531-055610A0-10C51E001E021E041E061E081E0A1E0C1E0E1E101E121E141E161E181E1A1E1C1E1E1E201E221E241E261E281E2A1E2C1E2E1E301E321E341E361E381E3A1E3C1E3E1E401E421E441E461E481E4A1E4C1E4E1E501E521E541E561E581E5A1E5C1E5E1E601E621E641E661E681E6A1E6C1E6E1E701E721E741E761E781E7A1E7C1E7E1E801E821E841E861E881E8A1E8C1E8E1E901E921E941E9E1EA01EA21EA41EA61EA81EAA1EAC1EAE1EB01EB21EB41EB61EB81EBA1EBC1EBE1EC01EC21EC41EC61EC81ECA1ECC1ECE1ED01ED21ED41ED61ED81EDA1EDC1EDE1EE01EE21EE41EE61EE81EEA1EEC1EEE1EF01EF21EF41EF61EF81EFA1EFC1EFE1F08-1F0F1F18-1F1D1F28-1F2F1F38-1F3F1F48-1F4D1F591F5B1F5D1F5F1F68-1F6F1FB8-1FBB1FC8-1FCB1FD8-1FDB1FE8-1FEC1FF8-1FFB21022107210B-210D2110-211221152119-211D212421262128212A-212D2130-2133213E213F214521832C00-2C2E2C602C62-2C642C672C692C6B2C6D-2C702C722C752C7E-2C802C822C842C862C882C8A2C8C2C8E2C902C922C942C962C982C9A2C9C2C9E2CA02CA22CA42CA62CA82CAA2CAC2CAE2CB02CB22CB42CB62CB82CBA2CBC2CBE2CC02CC22CC42CC62CC82CCA2CCC2CCE2CD02CD22CD42CD62CD82CDA2CDC2CDE2CE02CE22CEB2CEDA640A642A644A646A648A64AA64CA64EA650A652A654A656A658A65AA65CA65EA662A664A666A668A66AA66CA680A682A684A686A688A68AA68CA68EA690A692A694A696A722A724A726A728A72AA72CA72EA732A734A736A738A73AA73CA73EA740A742A744A746A748A74AA74CA74EA750A752A754A756A758A75AA75CA75EA760A762A764A766A768A76AA76CA76EA779A77BA77DA77EA780A782A784A786A78BFF21-FF3A",Lt:"01C501C801CB01F21F88-1F8F1F98-1F9F1FA8-1FAF1FBC1FCC1FFC",Lm:"02B0-02C102C6-02D102E0-02E402EC02EE0374037A0559064006E506E607F407F507FA081A0824082809710E460EC610FC17D718431AA71C78-1C7D1D2C-1D611D781D9B-1DBF2071207F2090-20942C7D2D6F2E2F30053031-3035303B309D309E30FC-30FEA015A4F8-A4FDA60CA67FA717-A71FA770A788A9CFAA70AADDFF70FF9EFF9F",Lo:"01BB01C0-01C3029405D0-05EA05F0-05F20621-063F0641-064A066E066F0671-06D306D506EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA0800-08150904-0939093D09500958-096109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E450E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10D0-10FA1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317DC1820-18421844-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C771CE9-1CEC1CEE-1CF12135-21382D30-2D652D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE3006303C3041-3096309F30A1-30FA30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A014A016-A48CA4D0-A4F7A500-A60BA610-A61FA62AA62BA66EA6A0-A6E5A7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2AA00-AA28AA40-AA42AA44-AA4BAA60-AA6FAA71-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADBAADCABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF66-FF6FFF71-FF9DFFA0-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",M:"0300-036F0483-04890591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DE-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0903093C093E-094E0951-0955096209630981-098309BC09BE-09C409C709C809CB-09CD09D709E209E30A01-0A030A3C0A3E-0A420A470A480A4B-0A4D0A510A700A710A750A81-0A830ABC0ABE-0AC50AC7-0AC90ACB-0ACD0AE20AE30B01-0B030B3C0B3E-0B440B470B480B4B-0B4D0B560B570B620B630B820BBE-0BC20BC6-0BC80BCA-0BCD0BD70C01-0C030C3E-0C440C46-0C480C4A-0C4D0C550C560C620C630C820C830CBC0CBE-0CC40CC6-0CC80CCA-0CCD0CD50CD60CE20CE30D020D030D3E-0D440D46-0D480D4A-0D4D0D570D620D630D820D830DCA0DCF-0DD40DD60DD8-0DDF0DF20DF30E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F3E0F3F0F71-0F840F860F870F90-0F970F99-0FBC0FC6102B-103E1056-1059105E-10601062-10641067-106D1071-10741082-108D108F109A-109D135F1712-17141732-1734175217531772177317B6-17D317DD180B-180D18A91920-192B1930-193B19B0-19C019C819C91A17-1A1B1A55-1A5E1A60-1A7C1A7F1B00-1B041B34-1B441B6B-1B731B80-1B821BA1-1BAA1C24-1C371CD0-1CD21CD4-1CE81CED1CF21DC0-1DE61DFD-1DFF20D0-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66F-A672A67CA67DA6F0A6F1A802A806A80BA823-A827A880A881A8B4-A8C4A8E0-A8F1A926-A92DA947-A953A980-A983A9B3-A9C0AA29-AA36AA43AA4CAA4DAA7BAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE3-ABEAABECABEDFB1EFE00-FE0FFE20-FE26",Mn:"0300-036F0483-04870591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DF-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0902093C0941-0948094D0951-095509620963098109BC09C1-09C409CD09E209E30A010A020A3C0A410A420A470A480A4B-0A4D0A510A700A710A750A810A820ABC0AC1-0AC50AC70AC80ACD0AE20AE30B010B3C0B3F0B41-0B440B4D0B560B620B630B820BC00BCD0C3E-0C400C46-0C480C4A-0C4D0C550C560C620C630CBC0CBF0CC60CCC0CCD0CE20CE30D41-0D440D4D0D620D630DCA0DD2-0DD40DD60E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F71-0F7E0F80-0F840F860F870F90-0F970F99-0FBC0FC6102D-10301032-10371039103A103D103E10581059105E-10601071-1074108210851086108D109D135F1712-17141732-1734175217531772177317B7-17BD17C617C9-17D317DD180B-180D18A91920-19221927192819321939-193B1A171A181A561A58-1A5E1A601A621A65-1A6C1A73-1A7C1A7F1B00-1B031B341B36-1B3A1B3C1B421B6B-1B731B801B811BA2-1BA51BA81BA91C2C-1C331C361C371CD0-1CD21CD4-1CE01CE2-1CE81CED1DC0-1DE61DFD-1DFF20D0-20DC20E120E5-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66FA67CA67DA6F0A6F1A802A806A80BA825A826A8C4A8E0-A8F1A926-A92DA947-A951A980-A982A9B3A9B6-A9B9A9BCAA29-AA2EAA31AA32AA35AA36AA43AA4CAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE5ABE8ABEDFB1EFE00-FE0FFE20-FE26",Mc:"0903093E-09400949-094C094E0982098309BE-09C009C709C809CB09CC09D70A030A3E-0A400A830ABE-0AC00AC90ACB0ACC0B020B030B3E0B400B470B480B4B0B4C0B570BBE0BBF0BC10BC20BC6-0BC80BCA-0BCC0BD70C01-0C030C41-0C440C820C830CBE0CC0-0CC40CC70CC80CCA0CCB0CD50CD60D020D030D3E-0D400D46-0D480D4A-0D4C0D570D820D830DCF-0DD10DD8-0DDF0DF20DF30F3E0F3F0F7F102B102C10311038103B103C105610571062-10641067-106D108310841087-108C108F109A-109C17B617BE-17C517C717C81923-19261929-192B193019311933-193819B0-19C019C819C91A19-1A1B1A551A571A611A631A641A6D-1A721B041B351B3B1B3D-1B411B431B441B821BA11BA61BA71BAA1C24-1C2B1C341C351CE11CF2A823A824A827A880A881A8B4-A8C3A952A953A983A9B4A9B5A9BAA9BBA9BD-A9C0AA2FAA30AA33AA34AA4DAA7BABE3ABE4ABE6ABE7ABE9ABEAABEC",Me:"0488048906DE20DD-20E020E2-20E4A670-A672",N:"0030-003900B200B300B900BC-00BE0660-066906F0-06F907C0-07C90966-096F09E6-09EF09F4-09F90A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BF20C66-0C6F0C78-0C7E0CE6-0CEF0D66-0D750E50-0E590ED0-0ED90F20-0F331040-10491090-10991369-137C16EE-16F017E0-17E917F0-17F91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C5920702074-20792080-20892150-21822185-21892460-249B24EA-24FF2776-27932CFD30073021-30293038-303A3192-31953220-32293251-325F3280-328932B1-32BFA620-A629A6E6-A6EFA830-A835A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nd:"0030-00390660-066906F0-06F907C0-07C90966-096F09E6-09EF0A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BEF0C66-0C6F0CE6-0CEF0D66-0D6F0E50-0E590ED0-0ED90F20-0F291040-10491090-109917E0-17E91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C59A620-A629A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nl:"16EE-16F02160-21822185-218830073021-30293038-303AA6E6-A6EF",No:"00B200B300B900BC-00BE09F4-09F90BF0-0BF20C78-0C7E0D70-0D750F2A-0F331369-137C17F0-17F920702074-20792080-20892150-215F21892460-249B24EA-24FF2776-27932CFD3192-31953220-32293251-325F3280-328932B1-32BFA830-A835",P:"0021-00230025-002A002C-002F003A003B003F0040005B-005D005F007B007D00A100AB00B700BB00BF037E0387055A-055F0589058A05BE05C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F3A-0F3D0F850FD0-0FD4104A-104F10FB1361-13681400166D166E169B169C16EB-16ED1735173617D4-17D617D8-17DA1800-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD32010-20272030-20432045-20512053-205E207D207E208D208E2329232A2768-277527C527C627E6-27EF2983-299829D8-29DB29FC29FD2CF9-2CFC2CFE2CFF2E00-2E2E2E302E313001-30033008-30113014-301F3030303D30A030FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFD3EFD3FFE10-FE19FE30-FE52FE54-FE61FE63FE68FE6AFE6BFF01-FF03FF05-FF0AFF0C-FF0FFF1AFF1BFF1FFF20FF3B-FF3DFF3FFF5BFF5DFF5F-FF65",Pd:"002D058A05BE140018062010-20152E172E1A301C303030A0FE31FE32FE58FE63FF0D",Ps:"0028005B007B0F3A0F3C169B201A201E2045207D208D23292768276A276C276E27702772277427C527E627E827EA27EC27EE2983298529872989298B298D298F299129932995299729D829DA29FC2E222E242E262E283008300A300C300E3010301430163018301A301DFD3EFE17FE35FE37FE39FE3BFE3DFE3FFE41FE43FE47FE59FE5BFE5DFF08FF3BFF5BFF5FFF62",Pe:"0029005D007D0F3B0F3D169C2046207E208E232A2769276B276D276F27712773277527C627E727E927EB27ED27EF298429862988298A298C298E2990299229942996299829D929DB29FD2E232E252E272E293009300B300D300F3011301530173019301B301E301FFD3FFE18FE36FE38FE3AFE3CFE3EFE40FE42FE44FE48FE5AFE5CFE5EFF09FF3DFF5DFF60FF63",Pi:"00AB2018201B201C201F20392E022E042E092E0C2E1C2E20",Pf:"00BB2019201D203A2E032E052E0A2E0D2E1D2E21",Pc:"005F203F20402054FE33FE34FE4D-FE4FFF3F",Po:"0021-00230025-0027002A002C002E002F003A003B003F0040005C00A100B700BF037E0387055A-055F058905C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F850FD0-0FD4104A-104F10FB1361-1368166D166E16EB-16ED1735173617D4-17D617D8-17DA1800-18051807-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD3201620172020-20272030-2038203B-203E2041-20432047-205120532055-205E2CF9-2CFC2CFE2CFF2E002E012E06-2E082E0B2E0E-2E162E182E192E1B2E1E2E1F2E2A-2E2E2E302E313001-3003303D30FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFE10-FE16FE19FE30FE45FE46FE49-FE4CFE50-FE52FE54-FE57FE5F-FE61FE68FE6AFE6BFF01-FF03FF05-FF07FF0AFF0CFF0EFF0FFF1AFF1BFF1FFF20FF3CFF61FF64FF65",S:"0024002B003C-003E005E0060007C007E00A2-00A900AC00AE-00B100B400B600B800D700F702C2-02C502D2-02DF02E5-02EB02ED02EF-02FF03750384038503F604820606-0608060B060E060F06E906FD06FE07F609F209F309FA09FB0AF10B700BF3-0BFA0C7F0CF10CF20D790E3F0F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-139917DB194019E0-19FF1B61-1B6A1B74-1B7C1FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE20442052207A-207C208A-208C20A0-20B8210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B2140-2144214A-214D214F2190-2328232B-23E82400-24262440-244A249C-24E92500-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE27C0-27C427C7-27CA27CC27D0-27E527F0-29822999-29D729DC-29FB29FE-2B4C2B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F309B309C319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A700-A716A720A721A789A78AA828-A82BA836-A839AA77-AA79FB29FDFCFDFDFE62FE64-FE66FE69FF04FF0BFF1C-FF1EFF3EFF40FF5CFF5EFFE0-FFE6FFE8-FFEEFFFCFFFD",Sm:"002B003C-003E007C007E00AC00B100D700F703F60606-060820442052207A-207C208A-208C2140-2144214B2190-2194219A219B21A021A321A621AE21CE21CF21D221D421F4-22FF2308-230B23202321237C239B-23B323DC-23E125B725C125F8-25FF266F27C0-27C427C7-27CA27CC27D0-27E527F0-27FF2900-29822999-29D729DC-29FB29FE-2AFF2B30-2B442B47-2B4CFB29FE62FE64-FE66FF0BFF1C-FF1EFF5CFF5EFFE2FFE9-FFEC",Sc:"002400A2-00A5060B09F209F309FB0AF10BF90E3F17DB20A0-20B8A838FDFCFE69FF04FFE0FFE1FFE5FFE6",Sk:"005E006000A800AF00B400B802C2-02C502D2-02DF02E5-02EB02ED02EF-02FF0375038403851FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE309B309CA700-A716A720A721A789A78AFF3EFF40FFE3",So:"00A600A700A900AE00B000B60482060E060F06E906FD06FE07F609FA0B700BF3-0BF80BFA0C7F0CF10CF20D790F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-1399194019E0-19FF1B61-1B6A1B74-1B7C210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B214A214C214D214F2195-2199219C-219F21A121A221A421A521A7-21AD21AF-21CD21D021D121D321D5-21F32300-2307230C-231F2322-2328232B-237B237D-239A23B4-23DB23E2-23E82400-24262440-244A249C-24E92500-25B625B8-25C025C2-25F72600-266E2670-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE2800-28FF2B00-2B2F2B452B462B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A828-A82BA836A837A839AA77-AA79FDFDFFE4FFE8FFEDFFEEFFFCFFFD",Z:"002000A01680180E2000-200A20282029202F205F3000",Zs:"002000A01680180E2000-200A202F205F3000",Zl:"2028",Zp:"2029",C:"0000-001F007F-009F00AD03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-0605061C061D0620065F06DD070E070F074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17B417B517DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF200B-200F202A-202E2060-206F20722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-F8FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFD-FF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFFBFFFEFFFF",Cc:"0000-001F007F-009F",Cf:"00AD0600-060306DD070F17B417B5200B-200F202A-202E2060-2064206A-206FFEFFFFF9-FFFB",Co:"E000-F8FF",Cs:"D800-DFFF",Cn:"03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-05FF06040605061C061D0620065F070E074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF2065-206920722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-D7FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFDFEFEFF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFF8FFFEFFFF"})}),define("ace/document",["require","exports","module","pilot/oop","pilot/event_emitter","ace/range","ace/anchor"],function(k,j,r){var q=k("pilot/oop"),p=k("pilot/event_emitter").EventEmitter,o=k("ace/range").Range,n=k("ace/anchor").Anchor,m=function(b){this.$lines=[],Array.isArray(b)?this.insertLines(0,b):b.length==0?this.$lines=[""]:this.insert({row:0,column:0},b)};(function(){q.implement(this,p),this.setValue=function(d){var c=this.getLength();this.remove(new o(0,0,c,this.getLine(c-1).length)),this.insert({row:0,column:0},d)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(d,c){return new n(this,d,c)},"aaa".split(/a/).length==0?this.$split=function(b){return b.replace(/\r\n|\r/g,"\n").split("\n")}:this.$split=function(b){return b.split(/\r\n|\r|\n/)},this.$detectNewLine=function(d){var c=d.match(/^.*?(\r\n|\r|\n)/m);c?this.$autoNewLine=c[1]:this.$autoNewLine="\n"},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\r\n";case"unix":return"\n";case"auto":return this.$autoNewLine}},this.$autoNewLine="\n",this.$newLineMode="auto",this.setNewLineMode=function(b){if(this.$newLineMode===b){return}this.$newLineMode=b},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(b){return b=="\r\n"||b=="\r"||b=="\n"},this.getLine=function(b){return this.$lines[b]||""},this.getLines=function(d,c){return this.$lines.slice(d,c+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(d){if(d.start.row==d.end.row){return this.$lines[d.start.row].substring(d.start.column,d.end.column)}var c=[];return c.push(this.$lines[d.start.row].substring(d.start.column)),c.push.apply(c,this.getLines(d.start.row+1,d.end.row-1)),c.push(this.$lines[d.end.row].substring(0,d.end.column)),c.join(this.getNewLineCharacter())},this.$clipPosition=function(d){var c=this.getLength();return d.row>=c&&(d.row=Math.max(0,c-1),d.column=this.getLine(c-1).length),d},this.insert=function(g,f){if(f.length==0){return g}g=this.$clipPosition(g),this.getLength()<=1&&this.$detectNewLine(f);var u=this.$split(f),t=u.splice(0,1)[0],s=u.length==0?null:u.splice(u.length-1,1)[0];return g=this.insertInLine(g,t),s!==null&&(g=this.insertNewLine(g),g=this.insertLines(g.row,u),g=this.insertInLine(g,s||"")),g},this.insertLines=function(g,f){if(f.length==0){return{row:g,column:0}}var u=[g,0];u.push.apply(u,f),this.$lines.splice.apply(this.$lines,u);var t=new o(g,0,g+f.length,0),s={action:"insertLines",range:t,lines:f};return this._dispatchEvent("change",{data:s}),t.end},this.insertNewLine=function(f){f=this.$clipPosition(f);var e=this.$lines[f.row]||"";this.$lines[f.row]=e.substring(0,f.column),this.$lines.splice(f.row+1,0,e.substring(f.column,e.length));var s={row:f.row+1,column:0},g={action:"insertText",range:o.fromPoints(f,s),text:this.getNewLineCharacter()};return this._dispatchEvent("change",{data:g}),s},this.insertInLine=function(g,f){if(f.length==0){return g}var u=this.$lines[g.row]||"";this.$lines[g.row]=u.substring(0,g.column)+f+u.substring(g.column);var t={row:g.row,column:g.column+f.length},s={action:"insertText",range:o.fromPoints(g,t),text:f};return this._dispatchEvent("change",{data:s}),t},this.remove=function(g){g.start=this.$clipPosition(g.start),g.end=this.$clipPosition(g.end);if(g.isEmpty()){return g.start}var f=g.start.row,u=g.end.row;if(g.isMultiLine()){var t=g.start.column==0?f:f+1,s=u-1;g.end.column>0&&this.removeInLine(u,0,g.end.column),s>=t&&this.removeLines(t,s),t!=f&&(this.removeInLine(f,g.start.column,this.getLine(f).length),this.removeNewLine(g.start.row))}else{this.removeInLine(f,g.start.column,g.end.column)}return g.start},this.removeInLine=function(s,f,y){if(f==y){return}var x=new o(s,f,s,y),w=this.getLine(s),v=w.substring(f,y),u=w.substring(0,f)+w.substring(y,w.length);this.$lines.splice(s,1,u);var t={action:"removeText",range:x,text:v};return this._dispatchEvent("change",{data:t}),x.start},this.removeLines=function(g,f){var u=new o(g,0,f+1,0),t=this.$lines.splice(g,f-g+1),s={action:"removeLines",range:u,nl:this.getNewLineCharacter(),lines:t};return this._dispatchEvent("change",{data:s}),t},this.removeNewLine=function(s){var f=this.getLine(s),w=this.getLine(s+1),v=new o(s,f.length,s+1,0),u=f+w;this.$lines.splice(s,2,u);var t={action:"removeText",range:v,text:this.getNewLineCharacter()};this._dispatchEvent("change",{data:t})},this.replace=function(e,d){if(d.length==0&&e.isEmpty()){return e.start}if(d==this.getTextRange(e)){return e.end}this.remove(e);if(d){var f=this.insert(e.start,d)}else{f=e.start}return f},this.applyDeltas=function(f){for(var e=0;e<f.length;e++){var s=f[e],g=o.fromPoints(s.range.start,s.range.end);s.action=="insertLines"?this.insertLines(g.start.row,s.lines):s.action=="insertText"?this.insert(g.start,s.text):s.action=="removeLines"?this.removeLines(g.start.row,g.end.row-1):s.action=="removeText"&&this.remove(g)}},this.revertDeltas=function(f){for(var e=f.length-1;e>=0;e--){var s=f[e],g=o.fromPoints(s.range.start,s.range.end);s.action=="insertLines"?this.removeLines(g.start.row,g.end.row-1):s.action=="insertText"?this.remove(g):s.action=="removeLines"?this.insertLines(g.start.row,s.lines):s.action=="removeText"&&this.insert(g.start,s.text)}}}).call(m.prototype),j.Document=m}),define("ace/anchor",["require","exports","module","pilot/oop","pilot/event_emitter"],function(j,g,o){var n=j("pilot/oop"),m=j("pilot/event_emitter").EventEmitter,k=g.Anchor=function(e,d,f){this.document=e,typeof f=="undefined"?this.setPosition(d.row,d.column):this.setPosition(d,f),this.$onChange=this.onChange.bind(this),e.on("change",this.$onChange)};(function(){n.implement(this,m),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.onChange=function(p){var f=p.data,s=f.range;if(s.start.row==s.end.row&&s.start.row!=this.row){return}if(s.start.row>this.row){return}if(s.start.row==this.row&&s.start.column>this.column){return}var r=this.row,q=this.column;f.action==="insertText"?s.start.row===r&&s.start.column<=q?s.start.row===s.end.row?q+=s.end.column-s.start.column:(q-=s.start.column,r+=s.end.row-s.start.row):s.start.row!==s.end.row&&s.start.row<r&&(r+=s.end.row-s.start.row):f.action==="insertLines"?s.start.row<=r&&(r+=s.end.row-s.start.row):f.action=="removeText"?s.start.row==r&&s.start.column<q?s.end.column>=q?q=s.start.column:q=Math.max(0,q-(s.end.column-s.start.column)):s.start.row!==s.end.row&&s.start.row<r?(s.end.row==r&&(q=Math.max(0,q-s.end.column)+s.start.column),r-=s.end.row-s.start.row):s.end.row==r&&(r-=s.end.row-s.start.row,q=Math.max(0,q-s.end.column)+s.start.column):f.action=="removeLines"&&s.start.row<=r&&(s.end.row<=r?r-=s.end.row-s.start.row:(r=s.start.row,q=0)),this.setPosition(r,q,!0)},this.setPosition=function(p,f,s){var r;s?r={row:p,column:f}:r=this.$clipPositionToDocument(p,f);if(this.row==r.row&&this.column==r.column){return}var q={row:this.row,column:this.column};this.row=r.row,this.column=r.column,this._dispatchEvent("change",{old:q,value:r})},this.detach=function(){this.document.removeEventListener("change",this.$onChange)},this.$clipPositionToDocument=function(e,d){var f={};return e>=this.document.getLength()?(f.row=Math.max(0,this.document.getLength()-1),f.column=this.document.getLine(f.row).length):e<0?(f.row=0,f.column=0):(f.row=e,f.column=Math.min(this.document.getLine(f.row).length,Math.max(0,d))),d<0&&(f.column=0),f}}).call(k.prototype)}),define("ace/background_tokenizer",["require","exports","module","pilot/oop","pilot/event_emitter"],function(j,g,o){var n=j("pilot/oop"),m=j("pilot/event_emitter").EventEmitter,k=function(e,d){this.running=!1,this.lines=[],this.currentLine=0,this.tokenizer=e;var f=this;this.$worker=function(){if(!f.running){return}var p=new Date,c=f.currentLine,s=f.doc,r=0,q=s.getLength();while(f.currentLine<q){f.lines[f.currentLine]=f.$tokenizeRows(f.currentLine,f.currentLine)[0],f.currentLine++,r+=1;if(r%5==0&&new Date-p>20){f.fireUpdateEvent(c,f.currentLine-1),f.running=setTimeout(f.$worker,20);return}}f.running=!1,f.fireUpdateEvent(c,q-1)}};(function(){n.implement(this,m),this.setTokenizer=function(b){this.tokenizer=b,this.lines=[],this.start(0)},this.setDocument=function(b){this.doc=b,this.lines=[],this.stop()},this.fireUpdateEvent=function(e,d){var f={first:e,last:d};this._dispatchEvent("update",{data:f})},this.start=function(b){this.currentLine=Math.min(b||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.stop(),this.running=setTimeout(this.$worker,700)},this.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},this.getTokens=function(d,c){return this.$tokenizeRows(d,c)},this.getState=function(b){return this.$tokenizeRows(b,b)[0].state},this.$tokenizeRows=function(q,p){if(!this.doc){return[]}var w=[],v="start",u=!1;q>0&&this.lines[q-1]?(v=this.lines[q-1].state,u=!0):q==0?(v="start",u=!0):this.lines.length>0&&(v=this.lines[this.lines.length-1].state);var t=this.doc.getLines(q,p);for(var s=q;s<=p;s++){if(!this.lines[s]){var r=this.tokenizer.getLineTokens(t[s-q]||"",v),v=r.state;w.push(r),u&&(this.lines[s]=r)}else{var r=this.lines[s];v=r.state,w.push(r)}}return w}}).call(k.prototype),g.BackgroundTokenizer=k}),define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold"],function(k,j,q){function m(){this.getFoldAt=function(s,r,x){var w=this.getFoldLine(s);if(!w){return null}var v=w.folds;for(var u=0;u<v.length;u++){var t=v[u];if(t.range.contains(s,r)){if(x==1&&t.range.isEnd(s,r)){continue}if(x==-1&&t.range.isStart(s,r)){continue}return t}}},this.getFoldsInRange=function(A){A=A.clone();var z=A.start,y=A.end,x=this.$foldData,w=[];z.column+=1,y.column-=1;for(var v=0;v<x.length;v++){var u=x[v].range.compareRange(A);if(u==2){continue}if(u==-2){break}var t=x[v].folds;for(var s=0;s<t.length;s++){var r=t[s];u=r.range.compareRange(A);if(u==-2){break}if(u==2){continue}if(u==42){break}w.push(r)}}return w},this.getFoldStringAt=function(z,y,x,w){var w=w||this.getFoldLine(z);if(!w){return null}var v={end:{column:0}};for(var u=0;u<w.folds.length;u++){var t=w.folds[u],s=t.range.compareEnd(z,y);if(s==-1){var r=this.getLine(t.start.row).substring(v.end.column,t.start.column);break}if(s==0){return null}v=t}return r||(r=this.getLine(t.start.row).substring(v.end.column)),x==-1?r.substring(0,y-v.end.column):x==1?r.substring(y-v.end.column):r},this.getFoldLine=function(g,f){var t=this.$foldData,s=0;f&&(s=t.indexOf(f)),s==-1&&(s=0);for(s;s<t.length;s++){var r=t[s];if(r.start.row<=g&&r.end.row>=g){return r}if(r.end.row>g){return null}}return null},this.getNextFold=function(r,g){var v=this.$foldData,u,t=0;g&&(t=v.indexOf(g)),t==-1&&(t=0);for(t;t<v.length;t++){var s=v[t];if(s.end.row>=r){return s}}return null},this.getFoldedRowCount=function(s,r){var y=this.$foldData,x=r-s+1;for(var w=0;w<y.length;w++){var v=y[w],u=v.end.row,t=v.start.row;if(u>=r){t<r&&(t>=s?x-=r-t:x=0);break}u>=s&&(t>=s?x-=u-t:x-=u-s+1)}return x},this.$addFoldLine=function(b){return this.$foldData.push(b),this.$foldData.sort(function(d,c){return d.start.row-c.start.row}),b},this.addFold=function(B,A){var z=this.$foldData,y=!1;if(B instanceof n){var x=B}else{x=new n(A,B)}var w=x.start.row,v=x.start.column,u=x.end.row,t=x.end.column;if(x.placeholder.length<2){throw"Placeholder has to be at least 2 characters"}if(w==u&&t-v<2){throw"The range has to be at least 2 characters width"}var s=this.getFoldAt(w,v,1);if(s&&s.range.isEnd(u,t)&&s.range.isStart(w,v)){return x}s=this.getFoldAt(w,v,1);if(s&&!s.range.isStart(w,v)){throw"A fold can't start inside of an already existing fold"}s=this.getFoldAt(u,t,-1);if(s&&!s.range.isEnd(u,t)){throw"A fold can't end inside of an already existing fold"}if(u>=this.doc.getLength()){throw"End of fold is outside of the document."}if(t>this.getLine(u).length||v>this.getLine(w).length){throw"End of fold is outside of the document."}var r=this.getFoldsInRange(x.range);r.length>0&&(this.removeFolds(r),x.subFolds=r);for(var f=0;f<z.length;f++){var e=z[f];if(u==e.start.row){e.addFold(x),y=!0;break}if(w==e.end.row){e.addFold(x),y=!0;if(!x.sameRow){foldLineNext=z[f+1];if(foldLineNext&&foldLineNext.start.row==u){e.merge(foldLineNext);break}}break}if(u<=e.start.row){break}}return y||(e=this.$addFoldLine(new o(this.$foldData,x))),this.$useWrapMode&&this.$updateWrapData(e.start.row,e.start.row),this.$modified=!0,this._dispatchEvent("changeFold",{data:x}),x},this.addFolds=function(b){b.forEach(function(c){this.addFold(c)},this)},this.removeFold=function(s){var r=s.foldLine,x=r.start.row,w=r.end.row,v=this.$foldData,u=r.folds;if(u.length==1){v.splice(v.indexOf(r),1)}else{if(r.range.isEnd(s.end.row,s.end.column)){u.pop(),r.end.row=u[u.length-1].end.row,r.end.column=u[u.length-1].end.column}else{if(r.range.isStart(s.start.row,s.start.column)){u.shift(),r.start.row=u[0].start.row,r.start.column=u[0].start.column}else{if(s.sameRow){u.splice(u.indexOf(s),1)}else{var t=r.split(s.start.row,s.start.column);t.folds.shift(),r.start.row=u[0].start.row,r.start.column=u[0].start.column,this.$addFoldLine(t)}}}}this.$useWrapMode&&this.$updateWrapData(x,w),this.$modified=!0,this._dispatchEvent("changeFold",{data:s})},this.removeFolds=function(e){var d=[];for(var f=0;f<e.length;f++){d.push(e[f])}d.forEach(function(b){this.removeFold(b)},this),this.$modified=!0},this.expandFold=function(b){this.removeFold(b),b.subFolds.forEach(function(c){this.addFold(c)},this),b.subFolds=[]},this.expandFolds=function(b){b.forEach(function(c){this.expandFold(c)},this)},this.isRowFolded=function(d,c){return !!this.getFoldLine(d,c)},this.getRowFoldEnd=function(e,d){var f=this.getFoldLine(e,d);return f?f.end.row:e},this.getFoldDisplayLine=function(s,r,y,x,w){x==null&&(x=s.start.row,w=0),r==null&&(r=s.end.row,y=this.getLine(r).length);var v="",u=this.doc,t="";return s.walk(function(e,d,A,z,g){if(d<x){return}if(d==x){if(A<w){return}z=Math.max(w,z)}e?t+=e:t+=u.getLine(d).substring(z,A)}.bind(this),r,y),t},this.getDisplayLine=function(r,g,v,u){var t=this.getFoldLine(r);if(!t){var s;return s=this.doc.getLine(r),s.substring(u||0,g||s.length)}return this.getFoldDisplayLine(t,r,g,v,u)},this.$cloneFoldData=function(){var d=this.$foldData,c=[];return c=this.$foldData.map(function(b){var e=b.folds.map(function(f){return f.clone()});return new o(c,e)}),c}}var p=k("ace/range").Range,o=k("ace/edit_session/fold_line").FoldLine,n=k("ace/edit_session/fold").Fold;j.Folding=m}),define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(g,f,m){function j(e,d){this.foldData=e,Array.isArray(d)?this.folds=d:d=this.folds=[d];var n=d[d.length-1];this.range=new k(d[0].start.row,d[0].start.column,n.end.row,n.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(b){b.setFoldLine(this)},this)}var k=g("ace/range").Range;(function(){this.shiftRow=function(b){this.start.row+=b,this.end.row+=b,this.folds.forEach(function(a){a.start.row+=b,a.end.row+=b})},this.addFold=function(b){if(b.sameRow){if(b.start.row<this.startRow||b.endRow>this.endRow){throw"Can't add a fold to this FoldLine as it has no connection"}this.folds.push(b),this.folds.sort(function(d,c){return -d.range.compareEnd(c.start.row,c.start.column)}),this.range.compareEnd(b.start.row,b.start.column)>0?(this.end.row=b.end.row,this.end.column=b.end.column):this.range.compareStart(b.end.row,b.end.column)<0&&(this.start.row=b.start.row,this.start.column=b.start.column)}else{if(b.start.row==this.end.row){this.folds.push(b),this.end.row=b.end.row,this.end.column=b.end.column}else{if(b.end.row==this.start.row){this.folds.unshift(b),this.start.row=b.start.row,this.start.column=b.start.column}else{throw"Trying to add fold to FoldRow that doesn't have a matching row"}}}b.foldLine=this},this.containsRow=function(b){return b>=this.start.row&&b<=this.end.row},this.walk=function(w,v,u){var t=0,s=this.folds,r,q,p,o=!0;v==null&&(v=this.end.row,u=this.end.column);for(var n=0;n<s.length;n++){r=s[n],q=r.range.compareStart(v,u);if(q==-1){w(null,v,u,t,o);return}p=w(null,r.start.row,r.start.column,t,o),p=!p&&w(r.placeholder,r.start.row,r.start.column,t);if(p||q==0){return}o=!r.sameRow,t=r.end.column}w(null,v,u,t,o)},this.getNextFoldTo=function(o,n){var r,q;for(var p=0;p<this.folds.length;p++){r=this.folds[p],q=r.range.compareEnd(o,n);if(q==-1){return{fold:r,kind:"after"}}if(q==0){return{fold:r,kind:"inside"}}}return null},this.addRemoveChars=function(o,n,t){var s=this.getNextFoldTo(o,n),r,q;if(s){r=s.fold;if(s.kind=="inside"&&r.start.column!=n&&r.start.row!=o){throw"Moving characters inside of a fold should never be reached"}if(r.start.row==o){q=this.folds;var p=q.indexOf(r);p==0&&(this.start.column+=t);for(p;p<q.length;p++){r=q[p],r.start.column+=t;if(!r.sameRow){return}r.end.column+=t}this.end.column+=t}}},this.split=function(n,e){var t=this.getNextFoldTo(n,e).fold,s=this.folds,r=this.foldData;if(!t){return null}var q=s.indexOf(t),p=s[q-1];this.end.row=p.end.row,this.end.column=p.end.column,s=s.splice(q,s.length-q);var o=new j(r,s);return r.splice(r.indexOf(this)+1,0,o),o},this.merge=function(n){var e=n.folds;for(var p=0;p<e.length;p++){this.addFold(e[p])}var o=this.foldData;o.splice(o.indexOf(n),1)},this.toString=function(){var b=[this.range.toString()+": ["];return this.folds.forEach(function(a){b.push("  "+a.toString())}),b.push("]"),b.join("\n")},this.idxToPosition=function(n){var e=0,p;for(var o=0;o<this.folds.length;o++){var p=this.folds[o];n-=p.start.column-e;if(n<0){return{row:p.start.row,column:p.start.column+n}}n-=p.placeholder.length;if(n<0){return p.start}e=p.end.column}return{row:this.end.row,column:this.end.column+n}}}).call(j.prototype),f.FoldLine=j}),define("ace/edit_session/fold",["require","exports","module"],function(f,e,j){var g=e.Fold=function(d,c){this.foldLine=null,this.placeholder=c,this.range=d,this.start=d.start,this.end=d.end,this.sameRow=d.start.row==d.end.row,this.subFolds=[]};(function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},this.setFoldLine=function(b){this.foldLine=b,this.subFolds.forEach(function(a){a.setFoldLine(b)})},this.clone=function(){var d=this.range.clone(),c=new g(d,this.placeholder);return this.subFolds.forEach(function(b){c.subFolds.push(b.clone())}),c}}).call(g.prototype)}),define("ace/search",["require","exports","module","pilot/lang","pilot/oop","ace/range"],function(k,j,q){var p=k("pilot/lang"),o=k("pilot/oop"),n=k("ace/range").Range,m=function(){this.$options={needle:"",backwards:!1,wrap:!1,caseSensitive:!1,wholeWord:!1,scope:m.ALL,regExp:!1}};m.ALL=1,m.SELECTION=2,function(){this.set=function(b){return o.mixin(this.$options,b),this},this.getOptions=function(){return p.copyObject(this.$options)},this.find=function(e){if(!this.$options.needle){return null}if(this.$options.backwards){var d=this.$backwardMatchIterator(e)}else{d=this.$forwardMatchIterator(e)}var f=null;return d.forEach(function(b){return f=b,!0}),f},this.findAll=function(e){if(!this.$options.needle){return[]}if(this.$options.backwards){var d=this.$backwardMatchIterator(e)}else{d=this.$forwardMatchIterator(e)}var f=[];return d.forEach(function(b){f.push(b)}),f},this.replace=function(f,e){var r=this.$assembleRegExp(),g=r.exec(f);return g&&g[0].length==f.length?this.$options.regExp?f.replace(r,e):e:null},this.$forwardMatchIterator=function(e){var d=this.$assembleRegExp(),f=this;return{forEach:function(a){f.$forwardLineIterator(e).forEach(function(b,v,u){v&&(b=b.substring(v));var t=[];b.replace(d,function(w){var g=arguments[arguments.length-2];return t.push({str:w,offset:v+g}),w});for(var s=0;s<t.length;s++){var r=t[s],c=f.$rangeFromMatch(u,r.offset,r.str.length);if(a(c)){return !0}}})}}},this.$backwardMatchIterator=function(e){var d=this.$assembleRegExp(),f=this;return{forEach:function(a){f.$backwardLineIterator(e).forEach(function(b,v,u){v&&(b=b.substring(v));var t=[];b.replace(d,function(w,g){return t.push({str:w,offset:v+g}),w});for(var s=t.length-1;s>=0;s--){var r=t[s],c=f.$rangeFromMatch(u,r.offset,r.str.length);if(a(c)){return !0}}})}}},this.$rangeFromMatch=function(e,d,f){return new n(e,d,e,d+f)},this.$assembleRegExp=function(){if(this.$options.regExp){var e=this.$options.needle}else{e=p.escapeRegExp(this.$options.needle)}this.$options.wholeWord&&(e="\\b"+e+"\\b");var d="g";this.$options.caseSensitive||(d+="i");var f=new RegExp(e,d);return f},this.$forwardLineIterator=function(z){function g(b){var a=z.getLine(b);return y&&b==x.end.row&&(a=a.substring(0,x.end.column)),r&&b==w.row&&(a=a.substring(0,w.column)),a}var y=this.$options.scope==m.SELECTION,x=z.getSelection().getRange(),w=z.getSelection().getCursor(),v=y?x.start.row:0,u=y?x.start.column:0,t=y?x.end.row:z.getLength()-1,s=this.$options.wrap,r=!1;return{forEach:function(f){var d=w.row,B=g(d),A=w.column,e=!1;r=!1;while(!f(B,A,d)){if(e){return}d++,A=0;if(d>t){if(s){d=v,A=u,r=!0}else{return}}d==w.row&&(e=!0),B=g(d)}}}},this.$backwardLineIterator=function(r){var g=this.$options.scope==m.SELECTION,x=r.getSelection().getRange(),w=g?x.end:x.start,v=g?x.start.row:0,u=g?x.start.column:0,t=g?x.end.row:r.getLength()-1,s=this.$options.wrap;return{forEach:function(e){var d=w.row,c=r.getLine(d).substring(0,w.column),b=0,a=!1,f=!1;while(!e(c,b,d)){if(a){return}d--,b=0;if(d<v){if(s){d=t,f=!0}else{return}}d==w.row&&(a=!0),c=r.getLine(d),g&&(d==v?b=u:d==t&&(c=c.substring(0,x.end.column))),f&&d==w.row&&(b=w.column)}}}}}.call(m.prototype),j.Search=m}),define("ace/undomanager",["require","exports","module"],function(f,e,j){var g=function(){this.reset()};(function(){this.execute=function(d){var c=d.args[0];this.$doc=d.args[1],this.$undoStack.push(c),this.$redoStack=[]},this.undo=function(k){var d=this.$undoStack.pop(),m=null;return d&&(m=this.$doc.undoChanges(d,k),this.$redoStack.push(d)),m},this.redo=function(k){var d=this.$redoStack.pop(),m=null;return d&&(m=this.$doc.redoChanges(d,k),this.$undoStack.push(d)),m},this.reset=function(){this.$undoStack=[],this.$redoStack=[]},this.hasUndo=function(){return this.$undoStack.length>0},this.hasRedo=function(){return this.$redoStack.length>0}}).call(g.prototype),e.UndoManager=g}),define("ace/virtual_renderer",["require","exports","module","pilot/oop","pilot/dom","pilot/event","pilot/useragent","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/renderloop","pilot/event_emitter","text!ace/css/editor.css"],function(F,E,D){var C=F("pilot/oop"),B=F("pilot/dom"),A=F("pilot/event"),z=F("pilot/useragent"),y=F("ace/layer/gutter").Gutter,x=F("ace/layer/marker").Marker,w=F("ace/layer/text").Text,v=F("ace/layer/cursor").Cursor,u=F("ace/scrollbar").ScrollBar,t=F("ace/renderloop").RenderLoop,s=F("pilot/event_emitter").EventEmitter,r=F("text!ace/css/editor.css");B.importCssString(r);var q=function(f,e){this.container=f,B.addCssClass(this.container,"ace_editor"),this.setTheme(e),this.$gutter=B.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.scroller=B.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=B.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new y(this.$gutter),this.$markerBack=new x(this.content);var j=this.$textLayer=new w(this.content);this.canvas=j.element,this.$markerFront=new x(this.content),this.characterWidth=j.getCharacterWidth(),this.lineHeight=j.getLineHeight(),this.$cursorLayer=new v(this.content),this.$cursorPadding=8,this.$horizScroll=!0,this.$horizScrollAlwaysVisible=!0,this.scrollBar=new u(f),this.scrollBar.addEventListener("scroll",this.onScroll.bind(this)),this.scrollTop=0,this.cursorPos={row:0,column:0};var g=this;this.$textLayer.addEventListener("changeCharaterSize",function(){g.characterWidth=j.getCharacterWidth(),g.lineHeight=j.getLineHeight(),g.$updatePrintMargin(),g.onResize(!0),g.$loop.schedule(g.CHANGE_FULL)}),A.addListener(this.$gutter,"click",this.$onGutterClick.bind(this)),A.addListener(this.$gutter,"dblclick",this.$onGutterClick.bind(this)),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:1,characterWidth:1,minHeight:1,maxHeight:1,offset:0,height:1},this.$loop=new t(this.$renderChanges.bind(this)),this.$loop.schedule(this.CHANGE_FULL),this.setPadding(4),this.$updatePrintMargin()};(function(){this.showGutter=!0,this.CHANGE_CURSOR=1,this.CHANGE_MARKER=2,this.CHANGE_GUTTER=4,this.CHANGE_SCROLL=8,this.CHANGE_LINES=16,this.CHANGE_TEXT=32,this.CHANGE_SIZE=64,this.CHANGE_MARKER_BACK=128,this.CHANGE_MARKER_FRONT=256,this.CHANGE_FULL=512,C.implement(this,s),this.setSession=function(b){this.session=b,this.$cursorLayer.setSession(b),this.$markerBack.setSession(b),this.$markerFront.setSession(b),this.$gutterLayer.setSession(b),this.$textLayer.setSession(b),this.$loop.schedule(this.CHANGE_FULL)},this.updateLines=function(d,c){c===undefined&&(c=Infinity),this.$changedLines?(this.$changedLines.firstRow>d&&(this.$changedLines.firstRow=d),this.$changedLines.lastRow<c&&(this.$changedLines.lastRow=c)):this.$changedLines={firstRow:d,lastRow:c},this.$loop.schedule(this.CHANGE_LINES)},this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},this.updateFull=function(){this.$loop.schedule(this.CHANGE_FULL)},this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},this.onResize=function(j){var e=this.CHANGE_SIZE,o=this.$size,n=B.getInnerHeight(this.container);if(j||o.height!=n){o.height=n,this.scroller.style.height=n+"px",o.scrollerHeight=this.scroller.clientHeight,this.scrollBar.setHeight(o.scrollerHeight),this.session&&(this.scrollToY(this.getScrollTop()),e=e|this.CHANGE_FULL)}var m=B.getInnerWidth(this.container);if(j||o.width!=m){o.width=m;var k=this.showGutter?this.$gutter.offsetWidth:0;this.scroller.style.left=k+"px",o.scrollerWidth=Math.max(0,m-k-this.scrollBar.getWidth()),this.scroller.style.width=o.scrollerWidth+"px";if(this.session.getUseWrapMode()&&this.adjustWrapLimit()||j){e=e|this.CHANGE_FULL}}this.$loop.schedule(e)},this.adjustWrapLimit=function(){var d=this.$size.scrollerWidth-this.$padding*2,c=Math.floor(d/this.characterWidth)-1;return this.session.adjustWrapLimit(c)},this.$onGutterClick=function(e){var d=A.getDocumentX(e),f=A.getDocumentY(e);this._dispatchEvent("gutter"+e.type,{row:this.screenToTextCoordinates(d,f).row,htmlEvent:e})},this.setShowInvisibles=function(b){this.$textLayer.setShowInvisibles(b)&&this.$loop.schedule(this.CHANGE_TEXT)},this.getShowInvisibles=function(){return this.$textLayer.showInvisibles},this.$showPrintMargin=!0,this.setShowPrintMargin=function(b){this.$showPrintMargin=b,this.$updatePrintMargin()},this.getShowPrintMargin=function(){return this.$showPrintMargin},this.$printMarginColumn=80,this.setPrintMarginColumn=function(b){this.$printMarginColumn=b,this.$updatePrintMargin()},this.getPrintMarginColumn=function(){return this.$printMarginColumn},this.getShowGutter=function(){return this.showGutter},this.setShowGutter=function(b){if(this.showGutter===b){return}this.$gutter.style.display=b?"block":"none",this.showGutter=b,this.onResize(!0)},this.$updatePrintMargin=function(){var d;if(!this.$showPrintMargin&&!this.$printMarginEl){return}this.$printMarginEl||(d=B.createElement("div"),d.className="ace_print_margin_layer",this.$printMarginEl=B.createElement("div"),this.$printMarginEl.className="ace_print_margin",d.appendChild(this.$printMarginEl),this.content.insertBefore(d,this.$textLayer.element));var c=this.$printMarginEl.style;c.left=this.characterWidth*this.$printMarginColumn+this.$padding*2+"px",c.visibility=this.$showPrintMargin?"visible":"hidden"},this.getContainerElement=function(){return this.container},this.getMouseEventTarget=function(){return this.content},this.getTextAreaContainer=function(){return this.container},this.moveTextAreaToCursor=function(f){if(z.isIE){return}var e=this.$cursorLayer.getPixelPosition();if(!e){return}var j=this.content.getBoundingClientRect(),g=this.layerConfig.offset;f.style.left=j.left+e.left+this.$padding+"px",f.style.top=j.top+e.top-this.scrollTop+g+"px"},this.getFirstVisibleRow=function(){return this.layerConfig.firstRow},this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(this.layerConfig.offset===0?0:1)},this.getLastFullyVisibleRow=function(){var b=Math.floor((this.layerConfig.height+this.layerConfig.offset)/this.layerConfig.lineHeight);return this.layerConfig.firstRow-1+b},this.getLastVisibleRow=function(){return this.layerConfig.lastRow},this.$padding=null,this.setPadding=function(b){this.$padding=b,this.$textLayer.setPadding(b),this.$cursorLayer.setPadding(b),this.$markerFront.setPadding(b),this.$markerBack.setPadding(b),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},this.getHScrollBarAlwaysVisible=function(){return this.$horizScrollAlwaysVisible},this.setHScrollBarAlwaysVisible=function(b){this.$horizScrollAlwaysVisible!=b&&(this.$horizScrollAlwaysVisible=b,(!this.$horizScrollAlwaysVisible||!this.$horizScroll)&&this.$loop.schedule(this.CHANGE_SCROLL))},this.onScroll=function(b){this.scrollToY(b.data)},this.$updateScrollBar=function(){this.scrollBar.setInnerHeight(this.layerConfig.maxHeight),this.scrollBar.setScrollTop(this.scrollTop)},this.$renderChanges=function(b){if(!b||!this.session){return}(b&this.CHANGE_FULL||b&this.CHANGE_SIZE||b&this.CHANGE_TEXT||b&this.CHANGE_LINES||b&this.CHANGE_SCROLL)&&this.$computeLayerConfig();if(b&this.CHANGE_FULL){this.$textLayer.update(this.layerConfig),this.showGutter&&this.$gutterLayer.update(this.layerConfig),this.$markerBack.update(this.layerConfig),this.$markerFront.update(this.layerConfig),this.$cursorLayer.update(this.layerConfig),this.$updateScrollBar();return}if(b&this.CHANGE_SCROLL){b&this.CHANGE_TEXT||b&this.CHANGE_LINES?this.$textLayer.update(this.layerConfig):this.$textLayer.scrollLines(this.layerConfig),this.showGutter&&this.$gutterLayer.update(this.layerConfig),this.$markerBack.update(this.layerConfig),this.$markerFront.update(this.layerConfig),this.$cursorLayer.update(this.layerConfig),this.$updateScrollBar();return}b&this.CHANGE_TEXT?(this.$textLayer.update(this.layerConfig),this.showGutter&&this.$gutterLayer.update(this.layerConfig)):b&this.CHANGE_LINES?(this.$updateLines(),this.$updateScrollBar(),this.showGutter&&this.$gutterLayer.update(this.layerConfig)):b&this.CHANGE_GUTTER&&this.showGutter&&this.$gutterLayer.update(this.layerConfig),b&this.CHANGE_CURSOR&&this.$cursorLayer.update(this.layerConfig),b&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(this.layerConfig),b&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(this.layerConfig),b&this.CHANGE_SIZE&&this.$updateScrollBar()},this.$computeLayerConfig=function(){var W=this.session,V=this.scrollTop%this.lineHeight,U=this.$size.scrollerHeight+this.lineHeight,R=this.$getLongestLine(),Q=this.layerConfig.width!=R,P=this.$horizScrollAlwaysVisible||this.$size.scrollerWidth-R<0,O=this.$horizScroll!==P;this.$horizScroll=P,O&&(this.scroller.style.overflowX=P?"scroll":"hidden");var M=this.session.getScreenLength()*this.lineHeight;this.scrollTop=Math.max(0,Math.min(this.scrollTop,M-this.$size.scrollerHeight));var L=Math.ceil(U/this.lineHeight)-1,K=Math.max(0,Math.round((this.scrollTop-V)/this.lineHeight)),J=K+L,I,H,G={lineHeight:this.lineHeight};K=W.screenToDocumentRow(K,0);var p=W.getFoldLine(K);p&&(K=p.start.row),I=W.documentToScreenRow(K,0),H=W.getRowHeight(G,K),J=Math.min(W.screenToDocumentRow(J,0),W.getLength()-1),U=this.$size.scrollerHeight+W.getRowHeight(G,J)+H,V=this.scrollTop-I*this.lineHeight,this.layerConfig={width:R,padding:this.$padding,firstRow:K,firstRowScreen:I,lastRow:J,lineHeight:this.lineHeight,characterWidth:this.characterWidth,minHeight:U,maxHeight:M,offset:V,height:this.$size.scrollerHeight},this.$gutterLayer.element.style.marginTop=-V+"px",this.content.style.marginTop=-V+"px",this.content.style.width=R+"px",this.content.style.height=U+"px",this.$desiredScrollLeft&&(this.scrollToX(this.$desiredScrollLeft),this.$desiredScrollLeft=0),O&&this.onResize(!0)},this.$updateLines=function(){var e=this.$changedLines.firstRow,d=this.$changedLines.lastRow;this.$changedLines=null;var f=this.layerConfig;if(f.width!=this.$getLongestLine()){return this.$textLayer.update(f)}if(e>f.lastRow+1){return}if(d<f.firstRow){return}if(d===Infinity){this.showGutter&&this.$gutterLayer.update(f),this.$textLayer.update(f);return}this.$textLayer.updateLines(f,e,d)},this.$getLongestLine=function(){var b=this.session.getScreenWidth()+1;return this.$textLayer.showInvisibles&&(b+=1),Math.max(this.$size.scrollerWidth,Math.round(b*this.characterWidth))},this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},this.addGutterDecoration=function(d,c){this.$gutterLayer.addGutterDecoration(d,c),this.$loop.schedule(this.CHANGE_GUTTER)},this.removeGutterDecoration=function(d,c){this.$gutterLayer.removeGutterDecoration(d,c),this.$loop.schedule(this.CHANGE_GUTTER)},this.setBreakpoints=function(b){this.$gutterLayer.setBreakpoints(b),this.$loop.schedule(this.CHANGE_GUTTER)},this.setAnnotations=function(b){this.$gutterLayer.setAnnotations(b),this.$loop.schedule(this.CHANGE_GUTTER)},this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},this.hideCursor=function(){this.$cursorLayer.hideCursor()},this.showCursor=function(){this.$cursorLayer.showCursor()},this.scrollCursorIntoView=function(){if(this.$size.scrollerHeight===0){return}var f=this.$cursorLayer.getPixelPosition(),e=f.left+this.$padding,j=f.top;this.scrollTop>j&&this.scrollToY(j),this.scrollTop+this.$size.scrollerHeight<j+this.lineHeight&&this.scrollToY(j+this.lineHeight-this.$size.scrollerHeight);var g=this.scroller.scrollLeft;g>e&&this.scrollToX(e),g+this.$size.scrollerWidth<e+this.characterWidth&&(e>this.layerConfig.width?this.$desiredScrollLeft=e+2*this.characterWidth:this.scrollToX(Math.round(e+this.characterWidth-this.$size.scrollerWidth)))},this.getScrollTop=function(){return this.scrollTop},this.getScrollLeft=function(){return this.scroller.scrollLeft},this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},this.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},this.scrollToRow=function(b){this.scrollToY(b*this.lineHeight)},this.scrollToLine=function(g,f){var m={lineHeight:this.lineHeight},k=0;for(var j=1;j<g;j++){k+=this.session.getRowHeight(m,j-1)}f&&(k-=this.$size.scrollerHeight/2),this.scrollToY(k)},this.scrollToY=function(b){b=Math.max(0,b),this.scrollTop!==b&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=b)},this.scrollToX=function(b){b<=this.$padding&&(b=0),this.scroller.scrollLeft=b},this.scrollBy=function(d,c){c&&this.scrollToY(this.scrollTop+c),d&&this.scrollToX(this.scroller.scrollLeft+d)},this.isScrollableBy=function(d,c){if(c<0&&this.scrollTop>0){return !0}if(c>0&&this.scrollTop+this.$size.scrollerHeight<this.layerConfig.maxHeight){return !0}},this.screenToTextCoordinates=function(g,e){var m=this.scroller.getBoundingClientRect(),k=Math.round((g+this.scroller.scrollLeft-m.left-this.$padding-B.getPageScrollLeft())/this.characterWidth),j=Math.floor((e+this.scrollTop-m.top-B.getPageScrollTop())/this.lineHeight);return this.session.screenToDocumentPosition(j,Math.max(k,0))},this.textToScreenCoordinates=function(j,g){var o=this.scroller.getBoundingClientRect(),n=this.session.documentToScreenPosition(j,g),m=this.$padding+Math.round(n.column*this.characterWidth),k=n.row*this.lineHeight;return{pageX:o.left+m-this.getScrollLeft(),pageY:o.top+k-this.getScrollTop()}},this.visualizeFocus=function(){B.addCssClass(this.container,"ace_focus")},this.visualizeBlur=function(){B.removeCssClass(this.container,"ace_focus")},this.showComposition=function(e){this.$composition||(this.$composition=B.createElement("div"),this.$composition.className="ace_composition",this.content.appendChild(this.$composition)),this.$composition.innerHTML="&#160;";var d=this.$cursorLayer.getPixelPosition(),f=this.$composition.style;f.top=d.top+"px",f.left=d.left+this.$padding+"px",f.height=this.lineHeight+"px",this.hideCursor()},this.setCompositionText=function(b){B.setInnerText(this.$composition,b)},this.hideComposition=function(){this.showCursor();if(!this.$composition){return}var b=this.$composition.style;b.top="-10000px",b.left="-10000px"},this.setTheme=function(a){function e(b){f.$theme&&B.removeCssClass(f.container,f.$theme),f.$theme=b?b.cssClass:null,f.$theme&&B.addCssClass(f.container,f.$theme),f.$size&&(f.$size.width=0,f.onResize())}var f=this;this.$themeValue=a,!a||typeof a=="string"?(a=a||"ace/theme/textmate",F([a],function(b){e(b)})):e(a)},this.getTheme=function(){return this.$themeValue},this.setStyle=function(b){B.addCssClass(this.container,b)},this.unsetStyle=function(b){B.removeCssClass(this.container,b)},this.destroy=function(){this.$textLayer.destroy(),this.$cursorLayer.destroy()}}).call(q.prototype),E.VirtualRenderer=q}),define("ace/layer/gutter",["require","exports","module","pilot/dom"],function(g,f,m){var k=g("pilot/dom"),j=function(b){this.element=k.createElement("div"),this.element.className="ace_layer ace_gutter-layer",b.appendChild(this.element),this.$breakpoints=[],this.$annotations=[],this.$decorations=[]};(function(){this.setSession=function(b){this.session=b},this.addGutterDecoration=function(d,c){this.$decorations[d]||(this.$decorations[d]=""),this.$decorations[d]+=" ace_"+c},this.removeGutterDecoration=function(d,c){this.$decorations[d]=this.$decorations[d].replace(" ace_"+c,"")},this.setBreakpoints=function(b){this.$breakpoints=b.concat()},this.setAnnotations=function(o){this.$annotations=[];for(var n in o){if(o.hasOwnProperty(n)){var t=o[n];if(!t){continue}var s=this.$annotations[n]={text:[]};for(var r=0;r<t.length;r++){var q=t[r];s.text.push(q.text.replace(/"/g,"&quot;").replace(/'/g,"&#8217;").replace(/</,"&lt;"));var p=q.type;p=="error"?s.className="ace_error":p=="warning"&&s.className!="ace_error"?s.className="ace_warning":p=="info"&&!s.className&&(s.className="ace_info")}}}},this.update=function(u){this.$config=u;var t={className:"",text:[]},s=[],r=u.firstRow,q=u.lastRow,p=this.session.getNextFold(r),o=p?p.start.row:Infinity;for(;;){r>o&&(r=p.end.row+1,p=this.session.getNextFold(r),o=p?p.start.row:Infinity);if(r>q){break}var n=this.$annotations[r]||t;s.push("<div class='ace_gutter-cell",this.$decorations[r]||"",this.$breakpoints[r]?" ace_breakpoint ":" ",n.className,"' title='",n.text.join("\n"),"' style='height:",u.lineHeight,"px;'>",r+1);var d=this.session.getRowLength(r)-1;while(d--){s.push("</div><div class='ace_gutter-cell' style='height:",u.lineHeight,"px'>&brvbar;</div>")}s.push("</div>"),r++}this.element=k.setInnerHtml(this.element,s.join("")),this.element.style.height=u.minHeight+"px"}}).call(j.prototype),f.Gutter=j}),define("ace/layer/marker",["require","exports","module","ace/range","pilot/dom"],function(j,g,o){var n=j("ace/range").Range,m=j("pilot/dom"),k=function(b){this.element=m.createElement("div"),this.element.className="ace_layer ace_marker-layer",b.appendChild(this.element)};(function(){this.$padding=0,this.setPadding=function(b){this.$padding=b},this.setSession=function(b){this.session=b},this.setMarkers=function(b){this.markers=b},this.update=function(p){var p=p||this.config;if(!p){return}this.config=p;var e=[];for(var u in this.markers){var t=this.markers[u],s=t.range.clipRows(p.firstRow,p.lastRow);if(s.isEmpty()){continue}s=s.toScreenRange(this.session);if(t.renderer){var r=this.$getTop(s.start.row,p),q=Math.round(this.$padding+s.start.column*p.characterWidth);t.renderer(e,s,q,r,p)}else{s.isMultiLine()?t.type=="text"?this.drawTextMarker(e,s,t.clazz,p):this.drawMultiLineMarker(e,s,t.clazz,p,t.type):this.drawSingleLineMarker(e,s,t.clazz,p,null,t.type)}}this.element=m.setInnerHtml(this.element,e.join(""))},this.$getTop=function(d,c){return(d-c.firstRowScreen)*c.lineHeight},this.drawTextMarker=function(p,d,t,s){var r=d.start.row,q=new n(r,d.start.column,r,this.session.getScreenLastRowColumn(r));this.drawSingleLineMarker(p,q,t,s,1,"text"),r=d.end.row,q=new n(r,0,r,d.end.column),this.drawSingleLineMarker(p,q,t,s,0,"text");for(r=d.start.row+1;r<d.end.row;r++){q.start.row=r,q.end.row=r,q.end.column=this.session.getScreenLastRowColumn(r),this.drawSingleLineMarker(p,q,t,s,1,"text")}},this.drawMultiLineMarker=function(y,x,w,v,u){var t=u==="background"?0:this.$padding,s=v.lineHeight,r=Math.round(v.width-x.start.column*v.characterWidth),q=this.$getTop(x.start.row,v),p=Math.round(t+x.start.column*v.characterWidth);y.push("<div class='",w,"' style='","height:",s,"px;","width:",r,"px;","top:",q,"px;","left:",p,"px;'></div>"),q=this.$getTop(x.end.row,v),r=Math.round(x.end.column*v.characterWidth),y.push("<div class='",w,"' style='","height:",s,"px;","width:",r,"px;","top:",q,"px;","left:",t,"px;'></div>"),s=(x.end.row-x.start.row-1)*v.lineHeight;if(s<0){return}q=this.$getTop(x.start.row+1,v),r=v.width,y.push("<div class='",w,"' style='","height:",s,"px;","width:",r,"px;","top:",q,"px;","left:",t,"px;'></div>")},this.drawSingleLineMarker=function(z,y,x,w,v,u){var t=u==="background"?0:this.$padding,s=w.lineHeight;if(u==="background"){var r=w.width}else{r=Math.round((y.end.column+(v||0)-y.start.column)*w.characterWidth)}var q=this.$getTop(y.start.row,w),p=Math.round(t+y.start.column*w.characterWidth);z.push("<div class='",x,"' style='","height:",s,"px;","width:",r,"px;","top:",q,"px;","left:",p,"px;'></div>")}}).call(k.prototype),g.Marker=k}),define("ace/layer/text",["require","exports","module","pilot/oop","pilot/dom","pilot/lang","pilot/useragent","pilot/event_emitter"],function(s,r,q){var p=s("pilot/oop"),o=s("pilot/dom"),n=s("pilot/lang"),m=s("pilot/useragent"),k=s("pilot/event_emitter").EventEmitter,j=function(b){this.element=o.createElement("div"),this.element.className="ace_layer ace_text-layer",this.element.style.width="auto",b.appendChild(this.element),this.$characterSize=this.$measureSizes()||{width:0,height:0},this.$pollSizeChanges()};(function(){p.implement(this,k),this.EOF_CHAR="&para;",this.EOL_CHAR="&not;",this.TAB_CHAR="&rarr;",this.SPACE_CHAR="&middot;",this.$padding=0,this.setPadding=function(b){this.$padding=b,this.element.style.padding="0 "+b+"px"},this.getLineHeight=function(){return this.$characterSize.height||1},this.getCharacterWidth=function(){return this.$characterSize.width||1},this.checkForSizeChanges=function(){var b=this.$measureSizes();b&&(this.$characterSize.width!==b.width||this.$characterSize.height!==b.height)&&(this.$characterSize=b,this._dispatchEvent("changeCharaterSize",{data:b}))},this.$pollSizeChanges=function(){var b=this;this.$pollSizeChangesTimer=setInterval(function(){b.checkForSizeChanges()},500)},this.$fontStyles={fontFamily:1,fontSize:1,fontWeight:1,fontStyle:1,lineHeight:1},this.$measureSizes=function(){var f=1000;if(!this.$measureNode){var e=this.$measureNode=o.createElement("div"),x=e.style;x.width=x.height="auto",x.left=x.top=-f*40+"px",x.visibility="hidden",x.position="absolute",x.overflow="visible",x.whiteSpace="nowrap",e.innerHTML=n.stringRepeat("Xy",f);if(document.body){document.body.appendChild(e)}else{var w=this.element.parentNode;while(!o.hasCssClass(w,"ace_editor")){w=w.parentNode}w.appendChild(e)}}var x=this.$measureNode.style,v=o.computedStyle(this.element);for(var u in this.$fontStyles){x[u]=v[u]}var t={height:this.$measureNode.offsetHeight,width:this.$measureNode.offsetWidth/(f*2)};return t.width==0&&t.height==0?null:t},this.setSession=function(b){this.session=b},this.showInvisibles=!1,this.setShowInvisibles=function(b){return this.showInvisibles==b?!1:(this.showInvisibles=b,!0)},this.$tabStrings=[],this.$computeTabString=function(){var e=this.session.getTabSize(),d=this.$tabStrings=[0];for(var f=1;f<e+1;f++){this.showInvisibles?d.push("<span class='ace_invisible'>"+this.TAB_CHAR+(new Array(f)).join("&#160;")+"</span>"):d.push((new Array(f+1)).join("&#160;"))}},this.updateLines=function(E,D,C){this.$computeTabString(),(this.config.lastRow!=E.lastRow||this.config.firstRow!=E.firstRow)&&this.scrollLines(E),this.config=E;var B=Math.max(D,E.firstRow),A=Math.min(C,E.lastRow),z=this.element.childNodes,y=0;for(var x=E.firstRow;x<B;x++){var w=this.session.getFoldLine(x);if(w){if(w.containsRow(B)){break}x=w.end.row}y++}for(var v=B;v<=A;v++){var u=z[y++];if(!u){continue}var t=[],e=this.session.getTokens(v,v);this.$renderLine(t,v,e[0].tokens,!this.$useLineGroups()),u=o.setInnerHtml(u,t.join("")),v=this.session.getRowFoldEnd(v)}},this.scrollLines=function(g){this.$computeTabString();var f=this.config;this.config=g;if(!f||f.lastRow<g.firstRow){return this.update(g)}if(g.lastRow<f.firstRow){return this.update(g)}var v=this.element;if(f.firstRow<g.firstRow){for(var u=this.session.getFoldedRowCount(f.firstRow,g.firstRow-1);u>0;u--){v.removeChild(v.firstChild)}}if(f.lastRow>g.lastRow){for(var u=this.session.getFoldedRowCount(g.lastRow+1,f.lastRow);u>0;u--){v.removeChild(v.lastChild)}}if(g.firstRow<f.firstRow){var t=this.$renderLinesFragment(g,g.firstRow,f.firstRow-1);v.firstChild?v.insertBefore(t,v.firstChild):v.appendChild(t)}if(g.lastRow>f.lastRow){var t=this.$renderLinesFragment(g,f.lastRow+1,g.lastRow);v.appendChild(t)}},this.$renderLinesFragment=function(C,B,A){var z=document.createDocumentFragment(),y=B,x=this.session.getNextFold(y),w=x?x.start.row:Infinity;for(;;){y>w&&(y=x.end.row+1,x=this.session.getNextFold(y),w=x?x.start.row:Infinity);if(y>A){break}var v=o.createElement("div"),u=[],t=this.session.getTokens(y,y);t.length==1&&this.$renderLine(u,y,t[0].tokens,!1),v.innerHTML=u.join("");if(this.$useLineGroups()){v.className="ace_line_group",z.appendChild(v)}else{var e=v.childNodes;while(e.length){z.appendChild(e[0])}}y++}return z},this.update=function(t){this.$computeTabString(),this.config=t;var e=[],z=t.firstRow,y=t.lastRow,x=z,w=this.session.getNextFold(x),v=w?w.start.row:Infinity;for(;;){x>v&&(x=w.end.row+1,w=this.session.getNextFold(x),v=w?w.start.row:Infinity);if(x>y){break}this.$useLineGroups()&&e.push("<div class='ace_line_group'>");var u=this.session.getTokens(x,x);u.length==1&&this.$renderLine(e,x,u[0].tokens,!1),this.$useLineGroups()&&e.push("</div>"),x++}this.element=o.setInnerHtml(this.element,e.join(""))},this.$textToken={text:!0,rparen:!0,lparen:!0},this.$renderToken=function(A,z,y,x){var w=this,v=/\t|&|<|( +)|([\v\f \u00a0\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u200b\u2028\u2029\u3000])|[\u1100-\u115F]|[\u11A3-\u11A7]|[\u11FA-\u11FF]|[\u2329-\u232A]|[\u2E80-\u2E99]|[\u2E9B-\u2EF3]|[\u2F00-\u2FD5]|[\u2FF0-\u2FFB]|[\u3000-\u303E]|[\u3041-\u3096]|[\u3099-\u30FF]|[\u3105-\u312D]|[\u3131-\u318E]|[\u3190-\u31BA]|[\u31C0-\u31E3]|[\u31F0-\u321E]|[\u3220-\u3247]|[\u3250-\u32FE]|[\u3300-\u4DBF]|[\u4E00-\uA48C]|[\uA490-\uA4C6]|[\uA960-\uA97C]|[\uAC00-\uD7A3]|[\uD7B0-\uD7C6]|[\uD7CB-\uD7FB]|[\uF900-\uFAFF]|[\uFE10-\uFE19]|[\uFE30-\uFE52]|[\uFE54-\uFE66]|[\uFE68-\uFE6B]|[\uFF01-\uFF60]|[\uFFE0-\uFFE6]/g,u=function(b,G,F,E,D){if(b.charCodeAt(0)==32){return(new Array(b.length+1)).join("&#160;")}if(b=="\t"){var C=w.session.getScreenTabSize(z+E);return z+=C-1,w.$tabStrings[C]}if(b=="&"){return m.isOldGecko?"&":"&amp;"}if(b=="<"){return"&lt;"}if(b==""){var B=w.showInvisibles?"ace_cjk ace_invisible":"ace_cjk",e=w.showInvisibles?w.SPACE_CHAR:"";return z+=1,"<span class='"+B+"' style='width:"+w.config.characterWidth*2+"px'>"+e+"</span>"}if(b.match(/[\v\f \u00a0\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u200b\u2028\u2029\u3000]/)){if(w.showInvisibles){var e=(new Array(b.length+1)).join(w.SPACE_CHAR);return"<span class='ace_invisible'>"+e+"</span>"}return"&#160;"}return z+=1,"<span class='ace_cjk' style='width:"+w.config.characterWidth*2+"px'>"+b+"</span>"},t=x.replace(v,u);if(!this.$textToken[y.type]){var g="ace_"+y.type.replace(/\./g," ace_");A.push("<span class='",g,"'>",t,"</span>")}else{A.push(t)}return z+x.length},this.$renderLineCore=function(G,F,E,D,C){var B=0,A=0,z,y=this.config.characterWidth,x=0,w=this;!D||D.length==0?z=Number.MAX_VALUE:z=D[0],C||G.push("<div class='ace_line' style='height:",this.config.lineHeight,"px","'>");for(var v=0;v<E.length;v++){var u=E[v],t=u.value;if(B+t.length<z){x=w.$renderToken(G,x,u,t),B+=t.length}else{while(B+t.length>=z){x=w.$renderToken(G,x,u,t.substring(0,z-B)),t=t.substring(z-B),B=z,C||G.push("</div>","<div class='ace_line' style='height:",this.config.lineHeight,"px","'>"),A++,x=0,z=D[A]||Number.MAX_VALUE}t.length!=0&&(B+=t.length,x=w.$renderToken(G,x,u,t))}}this.showInvisibles&&(F!==this.session.getLength()-1?G.push("<span class='ace_invisible'>"+this.EOL_CHAR+"</span>"):G.push("<span class='ace_invisible'>"+this.EOF_CHAR+"</span>")),C||G.push("</div>")},this.$renderLine=function(g,f,v,u){if(!this.session.isRowFolded(f)){var t=this.session.getRowSplitData(f);this.$renderLineCore(g,f,v,t,u)}else{this.$renderFoldLine(g,f,v,u)}},this.$renderFoldLine=function(B,A,z,y){function u(C,g,G){var F=0,E=0;while(E+C[F].value.length<g){E+=C[F].value.length,F++;if(F==C.length){return}}if(E!=g){var D=C[F].value.substring(g-E);D.length>G-g&&(D=D.substring(0,G-g)),v.push({type:C[F].type,value:D}),E=g+D.length,F+=1}while(E<G){var D=C[F].value;D.length+E>G&&(D=D.substring(0,G-E)),v.push({type:C[F].type,value:D}),E+=D.length,F+=1}}var x=this.session,w=x.getFoldLine(A),v=[];w.walk(function(g,c,E,D,C){g?v.push({type:"fold",value:g}):(C&&(z=this.session.getTokens(c,c)[0].tokens),z.length!=0&&u(z,D,E))}.bind(this),w.end.row,this.session.getLine(w.end.row).length);var t=this.session.$useWrapMode?this.session.$wrapData[A]:null;this.$renderLineCore(B,A,v,t,y)},this.$useLineGroups=function(){return this.session.getUseWrapMode()},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$measureNode&&this.$measureNode.parentNode.removeChild(this.$measureNode),delete this.$measureNode}}).call(j.prototype),r.Text=j}),define("ace/layer/cursor",["require","exports","module","pilot/dom"],function(g,f,m){var k=g("pilot/dom"),j=function(b){this.element=k.createElement("div"),this.element.className="ace_layer ace_cursor-layer",b.appendChild(this.element),this.cursor=k.createElement("div"),this.cursor.className="ace_cursor ace_hidden",this.element.appendChild(this.cursor),this.isVisible=!1};(function(){this.$padding=0,this.setPadding=function(b){this.$padding=b},this.setSession=function(b){this.session=b},this.hideCursor=function(){this.isVisible=!1,k.addCssClass(this.cursor,"ace_hidden"),clearInterval(this.blinkId)},this.showCursor=function(){this.isVisible=!0,k.removeCssClass(this.cursor,"ace_hidden"),this.cursor.style.visibility="visible",this.restartTimer()},this.restartTimer=function(){clearInterval(this.blinkId);if(!this.isVisible){return}var b=this.cursor;this.blinkId=setInterval(function(){b.style.visibility="hidden",setTimeout(function(){b.style.visibility="visible"},400)},1000)},this.getPixelPosition=function(o){if(!this.config||!this.session){return{left:0,top:0}}var n=this.session.selection.getCursor(),r=this.session.documentToScreenPosition(n),q=Math.round(this.$padding+r.column*this.config.characterWidth),p=(r.row-(o?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:q,top:p}},this.update=function(d){this.config=d,this.pixelPos=this.getPixelPosition(!0),this.cursor.style.left=this.pixelPos.left+"px",this.cursor.style.top=this.pixelPos.top+"px",this.cursor.style.width=d.characterWidth+"px",this.cursor.style.height=d.lineHeight+"px";var c=this.session.getOverwrite();c!=this.overwrite&&(this.overwrite=c,c?k.addCssClass(this.cursor,"ace_overwrite"):k.removeCssClass(this.cursor,"ace_overwrite")),this.restartTimer()},this.destroy=function(){clearInterval(this.blinkId)}}).call(j.prototype),f.Cursor=j}),define("ace/scrollbar",["require","exports","module","pilot/oop","pilot/dom","pilot/event","pilot/event_emitter"],function(k,j,r){var q=k("pilot/oop"),p=k("pilot/dom"),o=k("pilot/event"),n=k("pilot/event_emitter").EventEmitter,m=function(b){this.element=p.createElement("div"),this.element.className="ace_sb",this.inner=p.createElement("div"),this.element.appendChild(this.inner),b.appendChild(this.element),this.width=p.scrollbarWidth(),this.element.style.width=(this.width||15)+5+"px",o.addListener(this.element,"scroll",this.onScroll.bind(this))};(function(){q.implement(this,n),this.onScroll=function(){this._dispatchEvent("scroll",{data:this.element.scrollTop})},this.getWidth=function(){return this.width},this.setHeight=function(b){this.element.style.height=b+"px"},this.setInnerHeight=function(b){this.inner.style.height=b+"px"},this.setScrollTop=function(b){this.element.scrollTop=b}}).call(m.prototype),j.ScrollBar=m}),define("ace/renderloop",["require","exports","module","pilot/event"],function(g,f,m){var k=g("pilot/event"),j=function(b){this.onRender=b,this.pending=!1,this.changes=0};(function(){this.schedule=function(d){this.changes=this.changes|d;if(!this.pending){this.pending=!0;var c=this;this.setTimeoutZero(function(){c.pending=!1;var b=c.changes;c.changes=0,c.onRender(b)})}},this.setTimeoutZero=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame,this.setTimeoutZero?this.setTimeoutZero=this.setTimeoutZero.bind(window):window.postMessage?(this.messageName="zero-timeout-message",this.setTimeoutZero=function(d){if(!this.attached){var c=this;k.addListener(window,"message",function(b){c.callback&&b.data==c.messageName&&(k.stopPropagation(b),c.callback())}),this.attached=!0}this.callback=d,window.postMessage(this.messageName,"*")}):this.setTimeoutZero=function(b){setTimeout(b,0)}}).call(j.prototype),f.RenderLoop=j}),define("ace/theme/textmate",["require","exports","module","pilot/dom"],function(g,f,m){var k=g("pilot/dom"),j=".ace-tm .ace_editor {  border: 2px solid rgb(159, 159, 159);}.ace-tm .ace_editor.ace_focus {  border: 2px solid #327fbd;}.ace-tm .ace_gutter {  width: 50px;  background: #e8e8e8;  color: #333;  overflow : hidden;}.ace-tm .ace_gutter-layer {  width: 100%;  text-align: right;}.ace-tm .ace_gutter-layer .ace_gutter-cell {  padding-right: 6px;}.ace-tm .ace_print_margin {  width: 1px;  background: #e8e8e8;}.ace-tm .ace_text-layer {  cursor: text;}.ace-tm .ace_cursor {  border-left: 2px solid black;}.ace-tm .ace_cursor.ace_overwrite {  border-left: 0px;  border-bottom: 1px solid black;}        .ace-tm .ace_line .ace_invisible {  color: rgb(191, 191, 191);}.ace-tm .ace_line .ace_keyword {  color: blue;}.ace-tm .ace_line .ace_constant.ace_buildin {  color: rgb(88, 72, 246);}.ace-tm .ace_line .ace_constant.ace_language {  color: rgb(88, 92, 246);}.ace-tm .ace_line .ace_constant.ace_library {  color: rgb(6, 150, 14);}.ace-tm .ace_line .ace_invalid {  background-color: rgb(153, 0, 0);  color: white;}.ace-tm .ace_line .ace_fold {    background-color: #E4E4E4;    border-radius: 3px;}.ace-tm .ace_line .ace_support.ace_function {  color: rgb(60, 76, 114);}.ace-tm .ace_line .ace_support.ace_constant {  color: rgb(6, 150, 14);}.ace-tm .ace_line .ace_support.ace_type,.ace-tm .ace_line .ace_support.ace_class {  color: rgb(109, 121, 222);}.ace-tm .ace_line .ace_keyword.ace_operator {  color: rgb(104, 118, 135);}.ace-tm .ace_line .ace_string {  color: rgb(3, 106, 7);}.ace-tm .ace_line .ace_comment {  color: rgb(76, 136, 107);}.ace-tm .ace_line .ace_comment.ace_doc {  color: rgb(0, 102, 255);}.ace-tm .ace_line .ace_comment.ace_doc.ace_tag {  color: rgb(128, 159, 191);}.ace-tm .ace_line .ace_constant.ace_numeric {  color: rgb(0, 0, 205);}.ace-tm .ace_line .ace_variable {  color: rgb(49, 132, 149);}.ace-tm .ace_line .ace_xml_pe {  color: rgb(104, 104, 91);}.ace-tm .ace_markup.ace_underline {    text-decoration:underline;}.ace-tm .ace_markup.ace_heading {  color: rgb(12, 7, 255);}.ace-tm .ace_markup.ace_list {  color:rgb(185, 6, 144);}.ace-tm .ace_marker-layer .ace_selection {  background: rgb(181, 213, 255);}.ace-tm .ace_marker-layer .ace_step {  background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {  background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {  margin: -1px 0 0 -1px;  border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active_line {  background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_marker-layer .ace_selected_word {  background: rgb(250, 250, 255);  border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_meta.ace_tag {  color:rgb(28, 2, 255);}.ace-tm .ace_string.ace_regex {  color: rgb(255, 0, 0)}";k.importCssString(j),f.cssClass="ace-tm"}),define("pilot/environment",["require","exports","module","pilot/settings"],function(g,f,m){function j(){return{settings:k}}var k=g("pilot/settings").settings;f.create=j}),define("text!ace/css/editor.css",[],"@import url(http://fonts.googleapis.com/css?family=Droid+Sans+Mono);\n\n\n.ace_editor {\n    position: absolute;\n    overflow: hidden;\n    font-family: 'Monaco', 'Menlo', 'Droid Sans Mono', 'Courier New', monospace;\n    font-size: 12px;\n}\n\n.ace_scroller {\n    position: absolute;\n    overflow-x: scroll;\n    overflow-y: hidden;\n}\n\n.ace_content {\n    position: absolute;\n    box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n}\n\n.ace_composition {\n    position: absolute;\n    background: #555;\n    color: #DDD;\n    z-index: 4;\n}\n\n.ace_gutter {\n    position: absolute;\n    overflow-x: hidden;\n    overflow-y: hidden;\n    height: 100%;\n}\n\n.ace_gutter-cell.ace_error {\n    background-image: url(\"data:image/gif,GIF89a%10%00%10%00%D5%00%00%F5or%F5%87%88%F5nr%F4ns%EBmq%F5z%7F%DDJT%DEKS%DFOW%F1Yc%F2ah%CE(7%CE)8%D18E%DD%40M%F2KZ%EBU%60%F4%60m%DCir%C8%16(%C8%19*%CE%255%F1%3FR%F1%3FS%E6%AB%B5%CA%5DI%CEn%5E%F7%A2%9A%C9G%3E%E0a%5B%F7%89%85%F5yy%F6%82%80%ED%82%80%FF%BF%BF%E3%C4%C4%FF%FF%FF%FF%FF%FF%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00!%F9%04%01%00%00%25%00%2C%00%00%00%00%10%00%10%00%00%06p%C0%92pH%2C%1A%8F%C8%D2H%93%E1d4%23%E4%88%D3%09mB%1DN%B48%F5%90%40%60%92G%5B%94%20%3E%22%D2%87%24%FA%20%24%C5%06A%00%20%B1%07%02B%A38%89X.v%17%82%11%13q%10%0Fi%24%0F%8B%10%7BD%12%0Ei%09%92%09%0EpD%18%15%24%0A%9Ci%05%0C%18F%18%0B%07%04%01%04%06%A0H%18%12%0D%14%0D%12%A1I%B3%B4%B5IA%00%3B\");\n    background-repeat: no-repeat;\n    background-position: 4px center;\n}\n\n.ace_gutter-cell.ace_warning {\n    background-image: url(\"data:image/gif,GIF89a%10%00%10%00%D5%00%00%FF%DBr%FF%DE%81%FF%E2%8D%FF%E2%8F%FF%E4%96%FF%E3%97%FF%E5%9D%FF%E6%9E%FF%EE%C1%FF%C8Z%FF%CDk%FF%D0s%FF%D4%81%FF%D5%82%FF%D5%83%FF%DC%97%FF%DE%9D%FF%E7%B8%FF%CCl%7BQ%13%80U%15%82W%16%81U%16%89%5B%18%87%5B%18%8C%5E%1A%94d%1D%C5%83-%C9%87%2F%C6%84.%C6%85.%CD%8B2%C9%871%CB%8A3%CD%8B5%DC%98%3F%DF%9BB%E0%9CC%E1%A5U%CB%871%CF%8B5%D1%8D6%DB%97%40%DF%9AB%DD%99B%E3%B0p%E7%CC%AE%FF%FF%FF%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00!%F9%04%01%00%00%2F%00%2C%00%00%00%00%10%00%10%00%00%06a%C0%97pH%2C%1A%8FH%A1%ABTr%25%87%2B%04%82%F4%7C%B9X%91%08%CB%99%1C!%26%13%84*iJ9(%15G%CA%84%14%01%1A%97%0C%03%80%3A%9A%3E%81%84%3E%11%08%B1%8B%20%02%12%0F%18%1A%0F%0A%03'F%1C%04%0B%10%16%18%10%0B%05%1CF%1D-%06%07%9A%9A-%1EG%1B%A0%A1%A0U%A4%A5%A6BA%00%3B\");\n    background-repeat: no-repeat;\n    background-position: 4px center;\n}\n\n.ace_editor .ace_sb {\n    position: absolute;\n    overflow-x: hidden;\n    overflow-y: scroll;\n    right: 0;\n}\n\n.ace_editor .ace_sb div {\n    position: absolute;\n    width: 1px;\n    left: 0;\n}\n\n.ace_editor .ace_print_margin_layer {\n    z-index: 0;\n    position: absolute;\n    overflow: hidden;\n    margin: 0;\n    left: 0;\n    height: 100%;\n    width: 100%;\n}\n\n.ace_editor .ace_print_margin {\n    position: absolute;\n    height: 100%;\n}\n\n.ace_editor textarea {\n    position: fixed;\n    z-index: -1;\n    width: 10px;\n    height: 30px;\n    opacity: 0;\n    background: transparent;\n    appearance: none;\n    -moz-appearance: none;\n    border: none;\n    resize: none;\n    outline: none;\n    overflow: hidden;\n}\n\n.ace_layer {\n    z-index: 1;\n    position: absolute;\n    overflow: hidden;\n    white-space: nowrap;\n    height: 100%;\n    width: 100%;\n}\n\n.ace_text-layer {\n    color: black;\n}\n\n.ace_cjk {\n    display: inline-block;\n    text-align: center;\n}\n\n.ace_cursor-layer {\n    z-index: 4;\n    cursor: text;\n    /* setting pointer-events: none; here will break mouse wheel scrolling in Safari */\n}\n\n.ace_cursor {\n    z-index: 4;\n    position: absolute;\n}\n\n.ace_cursor.ace_hidden {\n    opacity: 0.2;\n}\n\n.ace_line {\n    white-space: nowrap;\n}\n\n.ace_marker-layer {\n    cursor: text;\n    pointer-events: none;\n}\n\n.ace_marker-layer .ace_step {\n    position: absolute;\n    z-index: 3;\n}\n\n.ace_marker-layer .ace_selection {\n    position: absolute;\n    z-index: 4;\n}\n\n.ace_marker-layer .ace_bracket {\n    position: absolute;\n    z-index: 5;\n}\n\n.ace_marker-layer .ace_active_line {\n    position: absolute;\n    z-index: 2;\n}\n\n.ace_marker-layer .ace_selected_word {\n    position: absolute;\n    z-index: 6;\n    box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n}\n\n.ace_line .ace_fold {\n    cursor: pointer;\n}\n\n.ace_dragging .ace_marker-layer, .ace_dragging .ace_text-layer {\n  cursor: move;\n}\n"),define("text!build/demo/styles.css",[],"html {\n    height: 100%;\n    width: 100%;\n    overflow: hidden;\n}\n\nbody {\n    overflow: hidden;\n    margin: 0;\n    padding: 0;\n    height: 100%;\n    width: 100%;\n    font-family: Arial, Helvetica, sans-serif, Tahoma, Verdana, sans-serif;\n    font-size: 12px;\n    background: rgb(14, 98, 165);\n    color: white;\n}\n\n#logo {\n    padding: 15px;\n    margin-left: 65px;\n}\n\n#editor {\n    position: absolute;\n    top:  0px;\n    left: 280px;\n    bottom: 0px;\n    right: 0px;\n    background: white;\n}\n\n#controls {\n    padding: 5px;\n}\n\n#controls td {\n    text-align: right;\n}\n\n#controls td + td {\n    text-align: left;\n}"),define("text!build/textarea/style.css",[],"body {\n    margin:0;\n    padding:0;\n    background-color:#e6f5fc;\n    \n}\n\nH2, H3, H4 {\n    font-family:Trebuchet MS;\n    font-weight:bold;\n    margin:0;\n    padding:0;\n}\n\nH2 {\n    font-size:28px;\n    color:#263842;\n    padding-bottom:6px;\n}\n\nH3 {\n    font-family:Trebuchet MS;\n    font-weight:bold;\n    font-size:22px;\n    color:#253741;\n    margin-top:43px;\n    margin-bottom:8px;\n}\n\nH4 {\n    font-family:Trebuchet MS;\n    font-weight:bold;\n    font-size:21px;\n    color:#222222;\n    margin-bottom:4px;\n}\n\nP {\n    padding:13px 0;\n    margin:0;\n    line-height:22px;\n}\n\nUL{\n    line-height : 22px;\n}\n\nPRE{\n    background : #333;\n    color : white;\n    padding : 10px;\n}\n\n#header {\n    height : 227px;\n    position:relative;\n    overflow:hidden;\n    background: url(images/background.png) repeat-x 0 0;\n    border-bottom:1px solid #c9e8fa;   \n}\n\n#header .content .signature {\n    font-family:Trebuchet MS;\n    font-size:11px;\n    color:#ebe4d6;\n    position:absolute;\n    bottom:5px;\n    right:42px;\n    letter-spacing : 1px;\n}\n\n.content {\n    width:970px;\n    position:relative;\n    overflow:hidden;\n    margin:0 auto;\n}\n\n#header .content {\n    height:184px;\n    margin-top:22px;\n}\n\n#header .content .logo {\n    width  : 282px;\n    height : 184px;\n    background:url(images/logo.png) no-repeat 0 0;\n    position:absolute;\n    top:0;\n    left:0;\n}\n\n#header .content .title {\n    width  : 605px;\n    height : 58px;\n    background:url(images/ace.png) no-repeat 0 0;\n    position:absolute;\n    top:98px;\n    left:329px;\n}\n\n#wrapper {\n    background:url(images/body_background.png) repeat-x 0 0;\n    min-height:250px;\n}\n\n#wrapper .content {\n    font-family:Arial;\n    font-size:14px;\n    color:#222222;\n    width:1000px;\n}\n\n#wrapper .content .column1 {\n    position:relative;\n    overflow:hidden;\n    float:left;\n    width:315px;\n    margin-right:31px;\n}\n\n#wrapper .content .column2 {\n    position:relative;\n    overflow:hidden;\n    float:left;\n    width:600px;\n    padding-top:47px;\n}\n\n.fork_on_github {\n    width:310px;\n    height:80px;\n    background:url(images/fork_on_github.png) no-repeat 0 0;\n    position:relative;\n    overflow:hidden;\n    margin-top:49px;\n    cursor:pointer;\n}\n\n.fork_on_github:hover {\n    background-position:0 -80px;\n}\n\n.divider {\n    height:3px;\n    background-color:#bedaea;\n    margin-bottom:3px;\n}\n\n.menu {\n    padding:23px 0 0 24px;\n}\n\nUL.content-list {\n    padding:15px;\n    margin:0;\n}\n\nUL.menu-list {\n    padding:0;\n    margin:0 0 20px 0;\n    list-style-type:none;\n    line-height : 16px;\n}\n\nUL.menu-list LI {\n    color:#2557b4;\n    font-family:Trebuchet MS;\n    font-size:14px;\n    padding:7px 0;\n    border-bottom:1px dotted #d6e2e7;\n}\n\nUL.menu-list LI:last-child {\n    border-bottom:0;\n}\n\nA {\n    color:#2557b4;\n    text-decoration:none;\n}\n\nA:hover {\n    text-decoration:underline;\n}\n\nP#first{\n    background : rgba(255,255,255,0.5);\n    padding : 20px;\n    font-size : 16px;\n    line-height : 24px;\n    margin : 0 0 20px 0;\n}\n\n#footer {\n    height:40px;\n    position:relative;\n    overflow:hidden;\n    background:url(images/bottombar.png) repeat-x 0 0;\n    position:relative;\n    margin-top:40px;\n}\n\nUL.menu-footer {\n    padding:0;\n    margin:8px 11px 0 0;\n    list-style-type:none;\n    float:right;\n}\n\nUL.menu-footer LI {\n    color:white;\n    font-family:Arial;\n    font-size:12px;\n    display:inline-block;\n    margin:0 1px;\n}\n\nUL.menu-footer LI A {\n    color:#8dd0ff;\n    text-decoration:none;\n}\n\nUL.menu-footer LI A:hover {\n    text-decoration:underline;\n}\n\n\n\n\n"),define("text!build_support/style.css",[],"body {\n    margin:0;\n    padding:0;\n    background-color:#e6f5fc;\n    \n}\n\nH2, H3, H4 {\n    font-family:Trebuchet MS;\n    font-weight:bold;\n    margin:0;\n    padding:0;\n}\n\nH2 {\n    font-size:28px;\n    color:#263842;\n    padding-bottom:6px;\n}\n\nH3 {\n    font-family:Trebuchet MS;\n    font-weight:bold;\n    font-size:22px;\n    color:#253741;\n    margin-top:43px;\n    margin-bottom:8px;\n}\n\nH4 {\n    font-family:Trebuchet MS;\n    font-weight:bold;\n    font-size:21px;\n    color:#222222;\n    margin-bottom:4px;\n}\n\nP {\n    padding:13px 0;\n    margin:0;\n    line-height:22px;\n}\n\nUL{\n    line-height : 22px;\n}\n\nPRE{\n    background : #333;\n    color : white;\n    padding : 10px;\n}\n\n#header {\n    height : 227px;\n    position:relative;\n    overflow:hidden;\n    background: url(images/background.png) repeat-x 0 0;\n    border-bottom:1px solid #c9e8fa;   \n}\n\n#header .content .signature {\n    font-family:Trebuchet MS;\n    font-size:11px;\n    color:#ebe4d6;\n    position:absolute;\n    bottom:5px;\n    right:42px;\n    letter-spacing : 1px;\n}\n\n.content {\n    width:970px;\n    position:relative;\n    overflow:hidden;\n    margin:0 auto;\n}\n\n#header .content {\n    height:184px;\n    margin-top:22px;\n}\n\n#header .content .logo {\n    width  : 282px;\n    height : 184px;\n    background:url(images/logo.png) no-repeat 0 0;\n    position:absolute;\n    top:0;\n    left:0;\n}\n\n#header .content .title {\n    width  : 605px;\n    height : 58px;\n    background:url(images/ace.png) no-repeat 0 0;\n    position:absolute;\n    top:98px;\n    left:329px;\n}\n\n#wrapper {\n    background:url(images/body_background.png) repeat-x 0 0;\n    min-height:250px;\n}\n\n#wrapper .content {\n    font-family:Arial;\n    font-size:14px;\n    color:#222222;\n    width:1000px;\n}\n\n#wrapper .content .column1 {\n    position:relative;\n    overflow:hidden;\n    float:left;\n    width:315px;\n    margin-right:31px;\n}\n\n#wrapper .content .column2 {\n    position:relative;\n    overflow:hidden;\n    float:left;\n    width:600px;\n    padding-top:47px;\n}\n\n.fork_on_github {\n    width:310px;\n    height:80px;\n    background:url(images/fork_on_github.png) no-repeat 0 0;\n    position:relative;\n    overflow:hidden;\n    margin-top:49px;\n    cursor:pointer;\n}\n\n.fork_on_github:hover {\n    background-position:0 -80px;\n}\n\n.divider {\n    height:3px;\n    background-color:#bedaea;\n    margin-bottom:3px;\n}\n\n.menu {\n    padding:23px 0 0 24px;\n}\n\nUL.content-list {\n    padding:15px;\n    margin:0;\n}\n\nUL.menu-list {\n    padding:0;\n    margin:0 0 20px 0;\n    list-style-type:none;\n    line-height : 16px;\n}\n\nUL.menu-list LI {\n    color:#2557b4;\n    font-family:Trebuchet MS;\n    font-size:14px;\n    padding:7px 0;\n    border-bottom:1px dotted #d6e2e7;\n}\n\nUL.menu-list LI:last-child {\n    border-bottom:0;\n}\n\nA {\n    color:#2557b4;\n    text-decoration:none;\n}\n\nA:hover {\n    text-decoration:underline;\n}\n\nP#first{\n    background : rgba(255,255,255,0.5);\n    padding : 20px;\n    font-size : 16px;\n    line-height : 24px;\n    margin : 0 0 20px 0;\n}\n\n#footer {\n    height:40px;\n    position:relative;\n    overflow:hidden;\n    background:url(images/bottombar.png) repeat-x 0 0;\n    position:relative;\n    margin-top:40px;\n}\n\nUL.menu-footer {\n    padding:0;\n    margin:8px 11px 0 0;\n    list-style-type:none;\n    float:right;\n}\n\nUL.menu-footer LI {\n    color:white;\n    font-family:Arial;\n    font-size:12px;\n    display:inline-block;\n    margin:0 1px;\n}\n\nUL.menu-footer LI A {\n    color:#8dd0ff;\n    text-decoration:none;\n}\n\nUL.menu-footer LI A:hover {\n    text-decoration:underline;\n}\n\n\n\n\n"),define("text!demo/docs/css.css",[],'.text-layer {\n    font-family: Monaco, "Courier New", monospace;\n    font-size: 12px;\n    cursor: text;\n}'),define("text!demo/styles.css",[],"html {\n    height: 100%;\n    width: 100%;\n    overflow: hidden;\n}\n\nbody {\n    overflow: hidden;\n    margin: 0;\n    padding: 0;\n    height: 100%;\n    width: 100%;\n    font-family: Arial, Helvetica, sans-serif, Tahoma, Verdana, sans-serif;\n    font-size: 12px;\n    background: rgb(14, 98, 165);\n    color: white;\n}\n\n#logo {\n    padding: 15px;\n    margin-left: 65px;\n}\n\n#editor {\n    position: absolute;\n    top:  0px;\n    left: 280px;\n    bottom: 0px;\n    right: 0px;\n    background: white;\n}\n\n#controls {\n    padding: 5px;\n}\n\n#controls td {\n    text-align: right;\n}\n\n#controls td + td {\n    text-align: left;\n}"),define("text!doc/site/iphone.css",[],"#wrapper {\n    position:relative;\n    overflow:hidden;\n}\n\n#wrapper .content .column1 {\n    margin:0 16px 0 15px;\n}\n\n#header .content .signature {\n    font-size:18px;\n    bottom:0;\n}\n\nUL.menu-list LI {\n    font-size:22px;\n}\n\nUL.menu-footer LI {\n    font-size:22px;\n}\n\nPRE{\n    font-size:22px;\n}\n"),define("text!doc/site/style.css",[],"body {\n    margin:0;\n    padding:0;\n    background-color:#e6f5fc;\n    \n}\n\nH2, H3, H4 {\n    font-family:Trebuchet MS;\n    font-weight:bold;\n    margin:0;\n    padding:0;\n}\n\nH2 {\n    font-size:28px;\n    color:#263842;\n    padding-bottom:6px;\n}\n\nH3 {\n    font-family:Trebuchet MS;\n    font-weight:bold;\n    font-size:22px;\n    color:#253741;\n    margin-top:43px;\n    margin-bottom:8px;\n}\n\nH4 {\n    font-family:Trebuchet MS;\n    font-weight:bold;\n    font-size:21px;\n    color:#222222;\n    margin-bottom:4px;\n}\n\nP {\n    padding:13px 0;\n    margin:0;\n    line-height:22px;\n}\n\nUL{\n    line-height : 22px;\n}\n\nPRE{\n    background : #333;\n    color : white;\n    padding : 10px;\n}\n\n#header {\n    height : 227px;\n    position:relative;\n    overflow:hidden;\n    background: url(images/background.png) repeat-x 0 0;\n    border-bottom:1px solid #c9e8fa;   \n}\n\n#header .content .signature {\n    font-family:Trebuchet MS;\n    font-size:11px;\n    color:#ebe4d6;\n    position:absolute;\n    bottom:5px;\n    right:42px;\n    letter-spacing : 1px;\n}\n\n.content {\n    width:970px;\n    position:relative;\n    overflow:hidden;\n    margin:0 auto;\n}\n\n#header .content {\n    height:184px;\n    margin-top:22px;\n}\n\n#header .content .logo {\n    width  : 282px;\n    height : 184px;\n    background:url(images/logo.png) no-repeat 0 0;\n    position:absolute;\n    top:0;\n    left:0;\n}\n\n#header .content .title {\n    width  : 605px;\n    height : 58px;\n    background:url(images/ace.png) no-repeat 0 0;\n    position:absolute;\n    top:98px;\n    left:329px;\n}\n\n#wrapper {\n    background:url(images/body_background.png) repeat-x 0 0;\n    min-height:250px;\n}\n\n#wrapper .content {\n    font-family:Arial;\n    font-size:14px;\n    color:#222222;\n    width:1000px;\n}\n\n#wrapper .content .column1 {\n    position:relative;\n    overflow:hidden;\n    float:left;\n    width:315px;\n    margin-right:31px;\n}\n\n#wrapper .content .column2 {\n    position:relative;\n    overflow:hidden;\n    float:left;\n    width:600px;\n    padding-top:47px;\n}\n\n.fork_on_github {\n    width:310px;\n    height:80px;\n    background:url(images/fork_on_github.png) no-repeat 0 0;\n    position:relative;\n    overflow:hidden;\n    margin-top:49px;\n    cursor:pointer;\n}\n\n.fork_on_github:hover {\n    background-position:0 -80px;\n}\n\n.divider {\n    height:3px;\n    background-color:#bedaea;\n    margin-bottom:3px;\n}\n\n.menu {\n    padding:23px 0 0 24px;\n}\n\nUL.content-list {\n    padding:15px;\n    margin:0;\n}\n\nUL.menu-list {\n    padding:0;\n    margin:0 0 20px 0;\n    list-style-type:none;\n    line-height : 16px;\n}\n\nUL.menu-list LI {\n    color:#2557b4;\n    font-family:Trebuchet MS;\n    font-size:14px;\n    padding:7px 0;\n    border-bottom:1px dotted #d6e2e7;\n}\n\nUL.menu-list LI:last-child {\n    border-bottom:0;\n}\n\nA {\n    color:#2557b4;\n    text-decoration:none;\n}\n\nA:hover {\n    text-decoration:underline;\n}\n\nP#first{\n    background : rgba(255,255,255,0.5);\n    padding : 20px;\n    font-size : 16px;\n    line-height : 24px;\n    margin : 0 0 20px 0;\n}\n\n#footer {\n    height:40px;\n    position:relative;\n    overflow:hidden;\n    background:url(images/bottombar.png) repeat-x 0 0;\n    position:relative;\n    margin-top:40px;\n}\n\nUL.menu-footer {\n    padding:0;\n    margin:8px 11px 0 0;\n    list-style-type:none;\n    float:right;\n}\n\nUL.menu-footer LI {\n    color:white;\n    font-family:Arial;\n    font-size:12px;\n    display:inline-block;\n    margin:0 1px;\n}\n\nUL.menu-footer LI A {\n    color:#8dd0ff;\n    text-decoration:none;\n}\n\nUL.menu-footer LI A:hover {\n    text-decoration:underline;\n}\n\n\n\n\n"),define("text!lib/ace/css/editor.css",[],"@import url(http://fonts.googleapis.com/css?family=Droid+Sans+Mono);\n\n\n.ace_editor {\n    position: absolute;\n    overflow: hidden;\n    font-family: 'Monaco', 'Menlo', 'Droid Sans Mono', 'Courier New', monospace;\n    font-size: 12px;\n}\n\n.ace_scroller {\n    position: absolute;\n    overflow-x: scroll;\n    overflow-y: hidden;\n}\n\n.ace_content {\n    position: absolute;\n    box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n}\n\n.ace_composition {\n    position: absolute;\n    background: #555;\n    color: #DDD;\n    z-index: 4;\n}\n\n.ace_gutter {\n    position: absolute;\n    overflow-x: hidden;\n    overflow-y: hidden;\n    height: 100%;\n}\n\n.ace_gutter-cell.ace_error {\n    background-image: url(\"data:image/gif,GIF89a%10%00%10%00%D5%00%00%F5or%F5%87%88%F5nr%F4ns%EBmq%F5z%7F%DDJT%DEKS%DFOW%F1Yc%F2ah%CE(7%CE)8%D18E%DD%40M%F2KZ%EBU%60%F4%60m%DCir%C8%16(%C8%19*%CE%255%F1%3FR%F1%3FS%E6%AB%B5%CA%5DI%CEn%5E%F7%A2%9A%C9G%3E%E0a%5B%F7%89%85%F5yy%F6%82%80%ED%82%80%FF%BF%BF%E3%C4%C4%FF%FF%FF%FF%FF%FF%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00!%F9%04%01%00%00%25%00%2C%00%00%00%00%10%00%10%00%00%06p%C0%92pH%2C%1A%8F%C8%D2H%93%E1d4%23%E4%88%D3%09mB%1DN%B48%F5%90%40%60%92G%5B%94%20%3E%22%D2%87%24%FA%20%24%C5%06A%00%20%B1%07%02B%A38%89X.v%17%82%11%13q%10%0Fi%24%0F%8B%10%7BD%12%0Ei%09%92%09%0EpD%18%15%24%0A%9Ci%05%0C%18F%18%0B%07%04%01%04%06%A0H%18%12%0D%14%0D%12%A1I%B3%B4%B5IA%00%3B\");\n    background-repeat: no-repeat;\n    background-position: 4px center;\n}\n\n.ace_gutter-cell.ace_warning {\n    background-image: url(\"data:image/gif,GIF89a%10%00%10%00%D5%00%00%FF%DBr%FF%DE%81%FF%E2%8D%FF%E2%8F%FF%E4%96%FF%E3%97%FF%E5%9D%FF%E6%9E%FF%EE%C1%FF%C8Z%FF%CDk%FF%D0s%FF%D4%81%FF%D5%82%FF%D5%83%FF%DC%97%FF%DE%9D%FF%E7%B8%FF%CCl%7BQ%13%80U%15%82W%16%81U%16%89%5B%18%87%5B%18%8C%5E%1A%94d%1D%C5%83-%C9%87%2F%C6%84.%C6%85.%CD%8B2%C9%871%CB%8A3%CD%8B5%DC%98%3F%DF%9BB%E0%9CC%E1%A5U%CB%871%CF%8B5%D1%8D6%DB%97%40%DF%9AB%DD%99B%E3%B0p%E7%CC%AE%FF%FF%FF%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00!%F9%04%01%00%00%2F%00%2C%00%00%00%00%10%00%10%00%00%06a%C0%97pH%2C%1A%8FH%A1%ABTr%25%87%2B%04%82%F4%7C%B9X%91%08%CB%99%1C!%26%13%84*iJ9(%15G%CA%84%14%01%1A%97%0C%03%80%3A%9A%3E%81%84%3E%11%08%B1%8B%20%02%12%0F%18%1A%0F%0A%03'F%1C%04%0B%10%16%18%10%0B%05%1CF%1D-%06%07%9A%9A-%1EG%1B%A0%A1%A0U%A4%A5%A6BA%00%3B\");\n    background-repeat: no-repeat;\n    background-position: 4px center;\n}\n\n.ace_editor .ace_sb {\n    position: absolute;\n    overflow-x: hidden;\n    overflow-y: scroll;\n    right: 0;\n}\n\n.ace_editor .ace_sb div {\n    position: absolute;\n    width: 1px;\n    left: 0;\n}\n\n.ace_editor .ace_print_margin_layer {\n    z-index: 0;\n    position: absolute;\n    overflow: hidden;\n    margin: 0;\n    left: 0;\n    height: 100%;\n    width: 100%;\n}\n\n.ace_editor .ace_print_margin {\n    position: absolute;\n    height: 100%;\n}\n\n.ace_editor textarea {\n    position: fixed;\n    z-index: -1;\n    width: 10px;\n    height: 30px;\n    opacity: 0;\n    background: transparent;\n    appearance: none;\n    -moz-appearance: none;\n    border: none;\n    resize: none;\n    outline: none;\n    overflow: hidden;\n}\n\n.ace_layer {\n    z-index: 1;\n    position: absolute;\n    overflow: hidden;\n    white-space: nowrap;\n    height: 100%;\n    width: 100%;\n}\n\n.ace_text-layer {\n    color: black;\n}\n\n.ace_cjk {\n    display: inline-block;\n    text-align: center;\n}\n\n.ace_cursor-layer {\n    z-index: 4;\n    cursor: text;\n    /* setting pointer-events: none; here will break mouse wheel scrolling in Safari */\n}\n\n.ace_cursor {\n    z-index: 4;\n    position: absolute;\n}\n\n.ace_cursor.ace_hidden {\n    opacity: 0.2;\n}\n\n.ace_line {\n    white-space: nowrap;\n}\n\n.ace_marker-layer {\n    cursor: text;\n    pointer-events: none;\n}\n\n.ace_marker-layer .ace_step {\n    position: absolute;\n    z-index: 3;\n}\n\n.ace_marker-layer .ace_selection {\n    position: absolute;\n    z-index: 4;\n}\n\n.ace_marker-layer .ace_bracket {\n    position: absolute;\n    z-index: 5;\n}\n\n.ace_marker-layer .ace_active_line {\n    position: absolute;\n    z-index: 2;\n}\n\n.ace_marker-layer .ace_selected_word {\n    position: absolute;\n    z-index: 6;\n    box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n}\n\n.ace_line .ace_fold {\n    cursor: pointer;\n}\n\n.ace_dragging .ace_marker-layer, .ace_dragging .ace_text-layer {\n  cursor: move;\n}\n"),define("text!node_modules/uglify-js/docstyle.css",[],'html { font-family: "Lucida Grande","Trebuchet MS",sans-serif; font-size: 12pt; }\nbody { max-width: 60em; }\n.title  { text-align: center; }\n.todo   { color: red; }\n.done   { color: green; }\n.tag    { background-color:lightblue; font-weight:normal }\n.target { }\n.timestamp { color: grey }\n.timestamp-kwd { color: CadetBlue }\np.verse { margin-left: 3% }\npre {\n  border: 1pt solid #AEBDCC;\n  background-color: #F3F5F7;\n  padding: 5pt;\n  font-family: monospace;\n  font-size: 90%;\n  overflow:auto;\n}\npre.src {\n  background-color: #eee; color: #112; border: 1px solid #000;\n}\ntable { border-collapse: collapse; }\ntd, th { vertical-align: top; }\ndt { font-weight: bold; }\ndiv.figure { padding: 0.5em; }\ndiv.figure p { text-align: center; }\n.linenr { font-size:smaller }\n.code-highlighted {background-color:#ffff00;}\n.org-info-js_info-navigation { border-style:none; }\n#org-info-js_console-label { font-size:10px; font-weight:bold;\n  white-space:nowrap; }\n.org-info-js_search-highlight {background-color:#ffff00; color:#000000;\n  font-weight:bold; }\n\nsup {\n  vertical-align: baseline;\n  position: relative;\n  top: -0.5em;\n  font-size: 80%;\n}\n\nsup a:link, sup a:visited {\n  text-decoration: none;\n  color: #c00;\n}\n\nsup a:before { content: "["; color: #999; }\nsup a:after { content: "]"; color: #999; }\n\nh1.title { border-bottom: 4px solid #000; padding-bottom: 5px; margin-bottom: 2em; }\n\n#postamble {\n  color: #777;\n  font-size: 90%;\n  padding-top: 1em; padding-bottom: 1em; border-top: 1px solid #999;\n  margin-top: 2em;\n  padding-left: 2em;\n  padding-right: 2em;\n  text-align: right;\n}\n\n#postamble p { margin: 0; }\n\n#footnotes { border-top: 1px solid #000; }\n\nh1 { font-size: 200% }\nh2 { font-size: 175% }\nh3 { font-size: 150% }\nh4 { font-size: 125% }\n\nh1, h2, h3, h4 { font-family: "Bookman",Georgia,"Times New Roman",serif; font-weight: normal; }\n\n@media print {\n  html { font-size: 11pt; }\n}\n'),define("text!support/cockpit/lib/cockpit/ui/cli_view.css",[],"\n#cockpitInput { padding-left: 16px; }\n\n.cptOutput { overflow: auto; position: absolute; z-index: 999; display: none; }\n\n.cptCompletion { padding: 0; position: absolute; z-index: -1000; }\n.cptCompletion.VALID { background: #FFF; }\n.cptCompletion.INCOMPLETE { background: #DDD; }\n.cptCompletion.INVALID { background: #DDD; }\n.cptCompletion span { color: #FFF; }\n.cptCompletion span.INCOMPLETE { color: #DDD; border-bottom: 2px dotted #F80; }\n.cptCompletion span.INVALID { color: #DDD; border-bottom: 2px dotted #F00; }\nspan.cptPrompt { color: #66F; font-weight: bold; }\n\n\n.cptHints {\n  color: #000;\n  position: absolute;\n  border: 1px solid rgba(230, 230, 230, 0.8);\n  background: rgba(250, 250, 250, 0.8);\n  -moz-border-radius-topleft: 10px;\n  -moz-border-radius-topright: 10px;\n  border-top-left-radius: 10px; border-top-right-radius: 10px;\n  z-index: 1000;\n  padding: 8px;\n  display: none;\n}\n\n.cptFocusPopup { display: block; }\n.cptFocusPopup.cptNoPopup { display: none; }\n\n.cptHints ul { margin: 0; padding: 0 15px; }\n\n.cptGt { font-weight: bold; font-size: 120%; }\n"),define("text!support/cockpit/lib/cockpit/ui/request_view.css",[],"\n.cptRowIn {\n  display: box; display: -moz-box; display: -webkit-box;\n  box-orient: horizontal; -moz-box-orient: horizontal; -webkit-box-orient: horizontal;\n  box-align: center; -moz-box-align: center; -webkit-box-align: center;\n  color: #333;\n  background-color: #EEE;\n  width: 100%;\n  font-family: consolas, courier, monospace;\n}\n.cptRowIn > * { padding-left: 2px; padding-right: 2px; }\n.cptRowIn > img { cursor: pointer; }\n.cptHover { display: none; }\n.cptRowIn:hover > .cptHover { display: block; }\n.cptRowIn:hover > .cptHover.cptHidden { display: none; }\n.cptOutTyped {\n  box-flex: 1; -moz-box-flex: 1; -webkit-box-flex: 1;\n  font-weight: bold; color: #000; font-size: 120%;\n}\n.cptRowOutput { padding-left: 10px; line-height: 1.2em; }\n.cptRowOutput strong,\n.cptRowOutput b,\n.cptRowOutput th,\n.cptRowOutput h1,\n.cptRowOutput h2,\n.cptRowOutput h3 { color: #000; }\n.cptRowOutput a { font-weight: bold; color: #666; text-decoration: none; }\n.cptRowOutput a: hover { text-decoration: underline; cursor: pointer; }\n.cptRowOutput input[type=password],\n.cptRowOutput input[type=text],\n.cptRowOutput textarea {\n  color: #000; font-size: 120%;\n  background: transparent; padding: 3px;\n  border-radius: 5px; -moz-border-radius: 5px; -webkit-border-radius: 5px;\n}\n.cptRowOutput table,\n.cptRowOutput td,\n.cptRowOutput th { border: 0; padding: 0 2px; }\n.cptRowOutput .right { text-align: right; }\n"),define("text!tool/Theme.tmpl.css",[],".%cssClass% .ace_editor {\n  border: 2px solid rgb(159, 159, 159);\n}\n\n.%cssClass% .ace_editor.ace_focus {\n  border: 2px solid #327fbd;\n}\n\n.%cssClass% .ace_gutter {\n  width: 50px;\n  background: #e8e8e8;\n  color: #333;\n  overflow : hidden;\n}\n\n.%cssClass% .ace_gutter-layer {\n  width: 100%;\n  text-align: right;\n}\n\n.%cssClass% .ace_gutter-layer .ace_gutter-cell {\n  padding-right: 6px;\n}\n\n.%cssClass% .ace_print_margin {\n  width: 1px;\n  background: %printMargin%;\n}\n\n.%cssClass% .ace_scroller {\n  background-color: %background%;\n}\n\n.%cssClass% .ace_text-layer {\n  cursor: text;\n  color: %foreground%;\n}\n\n.%cssClass% .ace_cursor {\n  border-left: 2px solid %cursor%;\n}\n\n.%cssClass% .ace_cursor.ace_overwrite {\n  border-left: 0px;\n  border-bottom: 1px solid %overwrite%;\n}\n \n.%cssClass% .ace_marker-layer .ace_selection {\n  background: %selection%;\n}\n\n.%cssClass% .ace_marker-layer .ace_step {\n  background: %step%;\n}\n\n.%cssClass% .ace_marker-layer .ace_bracket {\n  margin: -1px 0 0 -1px;\n  border: 1px solid %bracket%;\n}\n\n.%cssClass% .ace_marker-layer .ace_active_line {\n  background: %active_line%;\n}\n\n       \n.%cssClass% .ace_invisible {\n  %invisible%\n}\n\n.%cssClass% .ace_keyword {\n  %keyword%\n}\n\n.%cssClass% .ace_keyword.ace_operator {\n  %keyword.operator%\n}\n\n.%cssClass% .ace_constant {\n  %constant%\n}\n\n.%cssClass% .ace_constant.ace_language {\n  %constant.language%\n}\n\n.%cssClass% .ace_constant.ace_library {\n  %constant.library%\n}\n\n.%cssClass% .ace_constant.ace_numeric {\n  %constant.numeric%\n}\n\n.%cssClass% .ace_invalid {\n  %invalid%\n}\n\n.%cssClass% .ace_invalid.ace_illegal {\n  %invalid.illegal%\n}\n\n.%cssClass% .ace_invalid.ace_deprecated {\n  %invalid.deprecated%\n}\n\n.%cssClass% .ace_support {\n  %support%\n}\n\n.%cssClass% .ace_support.ace_function {\n  %support.function%\n}\n\n.%cssClass% .ace_function.ace_buildin {\n  %function.buildin%\n}\n\n.%cssClass% .ace_string {\n  %string%\n}\n\n.%cssClass% .ace_string.ace_regexp {\n  %string.regexp%\n}\n\n.%cssClass% .ace_comment {\n  %comment%\n}\n\n.%cssClass% .ace_comment.ace_doc {\n  %comment.doc%\n}\n\n.%cssClass% .ace_comment.ace_doc.ace_tag {\n  %comment.doc.tag%\n}\n\n.%cssClass% .ace_variable {\n  %variable%\n}\n\n.%cssClass% .ace_variable.ace_language {\n  %variable.language%\n}\n\n.%cssClass% .ace_xml_pe {\n  %xml_pe%\n}\n\n.%cssClass% .ace_meta {\n  %meta%\n}\n\n.%cssClass% .ace_meta.ace_tag {\n  %meta.tag%\n}\n\n.%cssClass% .ace_meta.ace_tag.ace_input {\n  %ace.meta.tag.input%\n}\n\n.%cssClass% .ace_entity.ace_other.ace_attribute-name {\n  %entity.other.attribute-name%\n}\n\n.%cssClass% .ace_markup.ace_underline {\n    text-decoration:underline;\n}\n\n.%cssClass% .ace_markup.ace_heading {\n  %markup.heading%\n}\n\n.%cssClass% .ace_markup.ace_heading.ace_1 {\n  %markup.heading.1%\n}\n\n.%cssClass% .ace_markup.ace_heading.ace_2 {\n  %markup.heading.2%\n}\n\n.%cssClass% .ace_markup.ace_heading.ace_3 {\n  %markup.heading.3%\n}\n\n.%cssClass% .ace_markup.ace_heading.ace_4 {\n  %markup.heading.4%\n}\n\n.%cssClass% .ace_markup.ace_heading.ace_5 {\n  %markup.heading.5%\n}\n\n.%cssClass% .ace_markup.ace_heading.ace_6 {\n  %markup.heading.6%\n}\n\n.%cssClass% .ace_markup.ace_list {\n  %markup.list%\n}\n\n.%cssClass% .ace_collab.ace_user1 {\n  %collab.user1%   \n}"),define("text!docs/css.css",[],'.text-layer {\n    font-family: Monaco, "Courier New", monospace;\n    font-size: 12px;\n    cursor: text;\n}'),define("text!styles.css",[],"html {\n    height: 100%;\n    width: 100%;\n    overflow: hidden;\n}\n\nbody {\n    overflow: hidden;\n    margin: 0;\n    padding: 0;\n    height: 100%;\n    width: 100%;\n    font-family: Arial, Helvetica, sans-serif, Tahoma, Verdana, sans-serif;\n    font-size: 12px;\n    background: rgb(14, 98, 165);\n    color: white;\n}\n\n#logo {\n    padding: 15px;\n    margin-left: 65px;\n}\n\n#editor {\n    position: absolute;\n    top:  0px;\n    left: 280px;\n    bottom: 0px;\n    right: 0px;\n    background: white;\n}\n\n#controls {\n    padding: 5px;\n}\n\n#controls td {\n    text-align: right;\n}\n\n#controls td + td {\n    text-align: left;\n}"),require(["ace/ace"],function(b){window.ace=b});define("ace/mode/textile",["require","exports","module","pilot/oop","ace/mode/text","ace/tokenizer","ace/mode/textile_highlight_rules","ace/mode/matching_brace_outdent","ace/range"],function(u,t,s){var r=u("pilot/oop"),q=u("ace/mode/text").Mode,p=u("ace/tokenizer").Tokenizer,o=u("ace/mode/textile_highlight_rules").TextileHighlightRules,n=u("ace/mode/matching_brace_outdent").MatchingBraceOutdent,m=u("ace/range").Range,k=function(){this.$tokenizer=new p((new o).getRules()),this.$outdent=new n};r.inherits(k,q),function(){this.getNextLineIndent=function(e,d,f){return e=="intag"?f:""},this.checkOutdent=function(e,d,f){return this.$outdent.checkOutdent(d,f)},this.autoOutdent=function(e,d,f){this.$outdent.autoOutdent(d,f)}}.call(k.prototype),t.Mode=k}),define("ace/mode/textile_highlight_rules",["require","exports","module","pilot/oop","ace/mode/text_highlight_rules"],function(j,g,o){var n=j("pilot/oop"),m=j("ace/mode/text_highlight_rules").TextHighlightRules,k=function(){this.$rules={start:[{token:"keyword",token:function(b){return b.match(/^h\d$/)?"markup.heading."+b.charAt(1):"markup.heading"},regex:"h1|h2|h3|h4|h5|h6|bq|p|bc|pre",next:"blocktag"},{token:"keyword",regex:"[\\*]+|[#]+"},{token:"text",regex:".+"}],blocktag:[{token:"keyword",regex:"\\. ",next:"start"},{token:"keyword",regex:"\\(",next:"blocktagproperties"}],blocktagproperties:[{token:"keyword",regex:"\\)",next:"blocktag"},{token:"string",regex:"[a-zA-Z0-9\\-_]+"},{token:"keyword",regex:"#"}]}};n.inherits(k,m),g.TextileHighlightRules=k}),define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(g,f,m){var k=g("ace/range").Range,j=function(){};(function(){this.checkOutdent=function(d,c){return/^\s+$/.test(d)?/^\s*\}/.test(c):!1},this.autoOutdent=function(n,d){var s=n.getLine(d),r=s.match(/^(\s*\})/);if(!r){return 0}var q=r[1].length,p=n.findMatchingBracket({row:d,column:q});if(!p||p.row==d){return 0}var o=this.$getIndent(n.getLine(p.row));n.replace(new k(d,0,d,q-1),o)},this.$getIndent=function(d){var c=d.match(/^(\s+)/);return c?c[1]:""}}).call(j.prototype),f.MatchingBraceOutdent=j});define("ace/mode/javascript",["require","exports","module","pilot/oop","ace/mode/text","ace/tokenizer","ace/mode/javascript_highlight_rules","ace/mode/matching_brace_outdent","ace/range","ace/worker/worker_client","ace/mode/behaviour/cstyle"],function(x,w,v){var u=x("pilot/oop"),t=x("ace/mode/text").Mode,s=x("ace/tokenizer").Tokenizer,r=x("ace/mode/javascript_highlight_rules").JavaScriptHighlightRules,q=x("ace/mode/matching_brace_outdent").MatchingBraceOutdent,p=x("ace/range").Range,o=x("ace/worker/worker_client").WorkerClient,n=x("ace/mode/behaviour/cstyle").CstyleBehaviour,m=function(){this.$tokenizer=new s((new r).getRules()),this.$outdent=new q,this.$behaviour=new n};u.inherits(m,t),function(){this.toggleCommentLines=function(I,H,G,F){var E=!0,D=[],C=/^(\s*)\/\//;for(var B=G;B<=F;B++){if(!C.test(H.getLine(B))){E=!1;break}}if(E){var A=new p(0,0,0,0);for(var B=G;B<=F;B++){var z=H.getLine(B),y=z.match(C);A.start.row=B,A.end.row=B,A.end.column=y[0].length,H.replace(A,y[1])}}else{H.indentRows(G,F,"//")}},this.getNextLineIndent=function(k,j,D){var C=this.$getIndent(j),B=this.$tokenizer.getLineTokens(j,k),A=B.tokens,z=B.state;if(A.length&&A[A.length-1].type=="comment"){return C}if(k=="start"||k=="regex_allowed"){var y=j.match(/^.*[\{\(\[\:]\s*$/);y&&(C+=D)}else{if(k=="doc-start"){if(z=="start"||k=="regex_allowed"){return""}var y=j.match(/^\s*(\/?)\*/);y&&(y[1]&&(C+=" "),C+="* ")}}return C},this.checkOutdent=function(e,d,f){return this.$outdent.checkOutdent(d,f)},this.autoOutdent=function(e,d,f){this.$outdent.autoOutdent(d,f)},this.createWorker=function(e){var d=e.getDocument(),f=new o(["ace","pilot"],"worker-javascript.js","ace/mode/javascript_worker","JavaScriptWorker");return f.call("setValue",[d.getValue()]),d.on("change",function(b){b.range={start:b.data.range.start,end:b.data.range.end},f.emit("change",b)}),f.on("jslint",function(a){var k=[];for(var j=0;j<a.data.length;j++){var g=a.data[j];g&&k.push({row:g.line-1,column:g.character-1,text:g.reason,type:"warning",lint:g})}e.setAnnotations(k)}),f.on("narcissus",function(a){e.setAnnotations([a.data])}),f.on("terminate",function(){e.clearAnnotations()}),f}}.call(m.prototype),w.Mode=m}),define("ace/mode/javascript_highlight_rules",["require","exports","module","pilot/oop","pilot/lang","ace/unicode","ace/mode/doc_comment_highlight_rules","ace/mode/text_highlight_rules"],function(s,r,q){var p=s("pilot/oop"),o=s("pilot/lang"),n=s("ace/unicode"),m=s("ace/mode/doc_comment_highlight_rules").DocCommentHighlightRules,k=s("ace/mode/text_highlight_rules").TextHighlightRules,j=function(){var f=o.arrayToMap("break|case|catch|continue|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|let|var|while|with|const|yield|import|get|set".split("|")),e=o.arrayToMap("null|Infinity|NaN|undefined".split("|")),t=o.arrayToMap("class|enum|extends|super|export|implements|private|public|interface|package|protected|static".split("|")),g="["+n.packages.L+"\\$_]["+n.packages.L+n.packages.Mn+n.packages.Mc+n.packages.Nd+n.packages.Pc+"\\$_]*\\b";this.$rules={start:[{token:"comment",regex:"\\/\\/.*$"},(new m).getStartRule("doc-start"),{token:"comment",merge:!0,regex:"\\/\\*",next:"comment"},{token:"string",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]'},{token:"string",merge:!0,regex:'["].*\\\\$',next:"qqstring"},{token:"string",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"string",merge:!0,regex:"['].*\\\\$",next:"qstring"},{token:"constant.numeric",regex:"0[xX][0-9a-fA-F]+\\b"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"constant.language.boolean",regex:"(?:true|false)\\b"},{token:function(a){return a=="this"?"variable.language":f.hasOwnProperty(a)?"keyword":e.hasOwnProperty(a)?"constant.language":t.hasOwnProperty(a)?"invalid.illegal":a=="debugger"?"invalid.deprecated":"identifier"},regex:g},{token:"keyword.operator",regex:"!|\\$|%|&|\\*|\\-\\-|\\-|\\+\\+|\\+|~|===|==|=|!=|!==|<=|>=|<<=|>>=|>>>=|<>|<|>|!|&&|\\|\\||\\?\\:|\\*=|%=|\\+=|\\-=|&=|\\^=|\\b(?:in|instanceof|new|delete|typeof|void)",next:"regex_allowed"},{token:"lparen",regex:"[[({]",next:"regex_allowed"},{token:"rparen",regex:"[\\])}]"},{token:"keyword.operator",regex:"\\/=?",next:"regex_allowed"},{token:"comment",regex:"^#!.*$"},{token:"text",regex:"\\s+"}],regex_allowed:[{token:"string.regexp",regex:"\\/(?:(?:\\[(?:\\\\]|[^\\]])+\\])|(?:\\\\/|[^\\]/]))*[/]\\w*",next:"start"},{token:"text",regex:"\\s+"},{token:"empty",regex:"",next:"start"}],comment:[{token:"comment",regex:".*?\\*\\/",next:"start"},{token:"comment",merge:!0,regex:".+"}],qqstring:[{token:"string",regex:'(?:(?:\\\\.)|(?:[^"\\\\]))*?"',next:"start"},{token:"string",merge:!0,regex:".+"}],qstring:[{token:"string",regex:"(?:(?:\\\\.)|(?:[^'\\\\]))*?'",next:"start"},{token:"string",merge:!0,regex:".+"}]},this.embedRules(m,"doc-",[(new m).getEndRule("start")])};p.inherits(j,k),r.JavaScriptHighlightRules=j}),define("ace/mode/doc_comment_highlight_rules",["require","exports","module","pilot/oop","ace/mode/text_highlight_rules"],function(j,g,o){var n=j("pilot/oop"),m=j("ace/mode/text_highlight_rules").TextHighlightRules,k=function(){this.$rules={start:[{token:"comment.doc.tag",regex:"@[\\w\\d_]+"},{token:"comment.doc",merge:!0,regex:"\\s+"},{token:"comment.doc",merge:!0,regex:"TODO"},{token:"comment.doc",merge:!0,regex:"[^@\\*]+"},{token:"comment.doc",merge:!0,regex:"."}]}};n.inherits(k,m),function(){this.getStartRule=function(b){return{token:"comment.doc",merge:!0,regex:"\\/\\*(?=\\*)",next:b}},this.getEndRule=function(b){return{token:"comment.doc",merge:!0,regex:"\\*\\/",next:b}}}.call(k.prototype),g.DocCommentHighlightRules=k}),define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(g,f,m){var k=g("ace/range").Range,j=function(){};(function(){this.checkOutdent=function(d,c){return/^\s+$/.test(d)?/^\s*\}/.test(c):!1},this.autoOutdent=function(n,d){var s=n.getLine(d),r=s.match(/^(\s*\})/);if(!r){return 0}var q=r[1].length,p=n.findMatchingBracket({row:d,column:q});if(!p||p.row==d){return 0}var o=this.$getIndent(n.getLine(p.row));n.replace(new k(d,0,d,q-1),o)},this.$getIndent=function(d){var c=d.match(/^(\s+)/);return c?c[1]:""}}).call(j.prototype),f.MatchingBraceOutdent=j}),define("ace/worker/worker_client",["require","exports","module","pilot/oop","pilot/event_emitter"],function(j,g,o){var n=j("pilot/oop"),m=j("pilot/event_emitter").EventEmitter,k=function(z,y,x,w){this.callbacks=[];if(j.packaged){var v=this.$guessBasePath(),u=this.$worker=new Worker(v+y)}else{var t=this.$normalizePath(j.nameToUrl("ace/worker/worker",null,"_")),u=this.$worker=new Worker(t),s={};for(var r=0;r<z.length;r++){var q=z[r],p=this.$normalizePath(j.nameToUrl(q,null,"_").replace(/.js$/,""));s[q]=p}}this.$worker.postMessage({init:!0,tlns:s,module:x,classname:w}),this.callbackId=1,this.callbacks={};var a=this;this.$worker.onerror=function(b){throw window.console&&console.log&&console.log(b),b},this.$worker.onmessage=function(e){var d=e.data;switch(d.type){case"log":window.console&&console.log&&console.log(d.data);break;case"event":a._dispatchEvent(d.name,{data:d.data});break;case"call":var f=a.callbacks[d.id];f&&(f(d.data),delete a.callbacks[d.id])}}};(function(){n.implement(this,m),this.$normalizePath=function(b){return b.match(/^\w+:/)||(b=location.protocol+"//"+location.host+(b.charAt(0)=="/"?"":location.pathname.replace(/\/[^\/]*$/,""))+"/"+b.replace(/^[\/]+/,"")),b},this.$guessBasePath=function(){if(j.aceBaseUrl){return j.aceBaseUrl}var a=document.getElementsByTagName("script");for(var t=0;t<a.length;t++){var s=a[t],r=s.getAttribute("data-ace-base");if(r){return r.replace(/\/*$/,"/")}var q=s.src||s.getAttribute("src");if(!q){continue}var p=q.match(/^(?:(.*\/)ace\.js|(.*\/)ace-uncompressed\.js)(?:\?|$)/);if(p){return p[1]||p[2]}}return""},this.terminate=function(){this._dispatchEvent("terminate",{}),this.$worker.terminate()},this.send=function(d,c){this.$worker.postMessage({command:d,args:c})},this.call=function(f,e,q){if(q){var p=this.callbackId++;this.callbacks[p]=q,e.push(p)}this.send(f,e)},this.emit=function(d,c){this.$worker.postMessage({event:d,data:c})}}).call(k.prototype),g.WorkerClient=k}),define("ace/mode/behaviour/cstyle",["require","exports","module","pilot/oop","ace/mode/behaviour"],function(j,g,o){var n=j("pilot/oop"),m=j("ace/mode/behaviour").Behaviour,k=function(){this.add("braces","insertion",function(C,B,A,z,y){if(y=="{"){var x=A.getSelectionRange(),w=z.doc.getTextRange(x);return w!==""?{text:"{"+w+"}",selection:!1}:{text:"{}",selection:[1,1]}}if(y=="}"){var v=A.getCursorPosition(),u=z.doc.getLine(v.row),t=u.substring(v.column,v.column+1);if(t=="}"){var s=z.$findOpeningBracket("}",{column:v.column+1,row:v.row});if(s!==null){return{text:"",selection:[1,1]}}}}else{if(y=="\n"){var v=A.getCursorPosition(),u=z.doc.getLine(v.row),t=u.substring(v.column,v.column+1);if(t=="}"){var r=z.findMatchingBracket({row:v.row,column:v.column+1});if(!r){return !1}var q=this.getNextLineIndent(C,u.substring(0,u.length-1),z.getTabString()),p=this.$getIndent(z.doc.getLine(r.row));return{text:"\n"+q+"\n"+p,selection:[1,q.length,1,q.length]}}}}return !1}),this.add("braces","deletion",function(q,p,w,v,u){var t=v.doc.getTextRange(u);if(!u.isMultiLine()&&t=="{"){var s=v.doc.getLine(u.start.row),r=s.substring(u.end.column,u.end.column+1);if(r=="}"){return u.end.column++,u}}return !1}),this.add("parens","insertion",function(z,y,x,w,v){if(v=="("){var u=x.getSelectionRange(),t=w.doc.getTextRange(u);return t!==""?{text:"("+t+")",selection:!1}:{text:"()",selection:[1,1]}}if(v==")"){var s=x.getCursorPosition(),r=w.doc.getLine(s.row),q=r.substring(s.column,s.column+1);if(q==")"){var p=w.$findOpeningBracket(")",{column:s.column+1,row:s.row});if(p!==null){return{text:"",selection:[1,1]}}}}return !1}),this.add("parens","deletion",function(q,p,w,v,u){var t=v.doc.getTextRange(u);if(!u.isMultiLine()&&t=="("){var s=v.doc.getLine(u.start.row),r=s.substring(u.start.column+1,u.start.column+2);if(r==")"){return u.end.column++,u}}return !1}),this.add("string_dquotes","insertion",function(F,E,D,C,B){if(B=='"'){var A=D.getSelectionRange(),z=C.doc.getTextRange(A);if(z!==""){return{text:'"'+z+'"',selection:!1}}var y=D.getCursorPosition(),x=C.doc.getLine(y.row),w=x.substring(y.column-1,y.column);if(w=="\\"){return !1}var v=C.getTokens(A.start.row,A.start.row)[0].tokens,u=0,t,s=-1;for(var r=0;r<v.length;r++){t=v[r],t.type=="string"?s=-1:s<0&&(s=t.value.indexOf('"'));if(t.value.length+u>A.start.column){break}u+=v[r].value.length}if(!t||s<0&&t.type!=="comment"&&(t.type!=="string"||A.start.column!==t.value.length+u-1&&t.value.lastIndexOf('"')===t.value.length-1)){return{text:'""',selection:[1,1]}}if(t&&t.type==="string"){var q=x.substring(y.column,y.column+1);if(q=='"'){return{text:"",selection:[1,1]}}}}return !1}),this.add("string_dquotes","deletion",function(q,p,w,v,u){var t=v.doc.getTextRange(u);if(!u.isMultiLine()&&t=='"'){var s=v.doc.getLine(u.start.row),r=s.substring(u.start.column+1,u.start.column+2);if(r=='"'){return u.end.column++,u}}return !1})};n.inherits(k,m),g.CstyleBehaviour=k});define("ace/mode/css",["require","exports","module","pilot/oop","ace/mode/text","ace/tokenizer","ace/mode/css_highlight_rules","ace/mode/matching_brace_outdent","ace/worker/worker_client"],function(u,t,s){var r=u("pilot/oop"),q=u("ace/mode/text").Mode,p=u("ace/tokenizer").Tokenizer,o=u("ace/mode/css_highlight_rules").CssHighlightRules,n=u("ace/mode/matching_brace_outdent").MatchingBraceOutdent,m=u("ace/worker/worker_client").WorkerClient,k=function(){this.$tokenizer=new p((new o).getRules()),this.$outdent=new n};r.inherits(k,q),function(){this.getNextLineIndent=function(j,g,y){var x=this.$getIndent(g),w=this.$tokenizer.getLineTokens(g,j).tokens;if(w.length&&w[w.length-1].type=="comment"){return x}var v=g.match(/^.*\{\s*$/);return v&&(x+=y),x},this.checkOutdent=function(e,d,f){return this.$outdent.checkOutdent(d,f)},this.autoOutdent=function(e,d,f){this.$outdent.autoOutdent(d,f)},this.createWorker=function(e){var d=e.getDocument(),f=new m(["ace","pilot"],"worker-css.js","ace/mode/css_worker","Worker");f.call("setValue",[d.getValue()]),d.on("change",function(b){b.range={start:b.data.range.start,end:b.data.range.end},f.emit("change",b)}),f.on("csslint",function(a){var g=[];a.data.forEach(function(b){g.push({row:b.line-1,column:b.col-1,text:b.message,type:b.type,lint:b})}),e.setAnnotations(g)})}}.call(k.prototype),t.Mode=k}),define("ace/mode/css_highlight_rules",["require","exports","module","pilot/oop","pilot/lang","ace/mode/text_highlight_rules"],function(k,j,q){var p=k("pilot/oop"),o=k("pilot/lang"),n=k("ace/mode/text_highlight_rules").TextHighlightRules,m=function(){function x(g){var f=[],E=g.split("");for(var D=0;D<E.length;D++){f.push("[",E[D].toLowerCase(),E[D].toUpperCase(),"]")}return f.join("")}var C=o.arrayToMap("-moz-box-sizing|-webkit-box-sizing|appearance|azimuth|background-attachment|background-color|background-image|background-position|background-repeat|background|border-bottom-color|border-bottom-style|border-bottom-width|border-bottom|border-collapse|border-color|border-left-color|border-left-style|border-left-width|border-left|border-right-color|border-right-style|border-right-width|border-right|border-spacing|border-style|border-top-color|border-top-style|border-top-width|border-top|border-width|border|bottom|box-sizing|caption-side|clear|clip|color|content|counter-increment|counter-reset|cue-after|cue-before|cue|cursor|direction|display|elevation|empty-cells|float|font-family|font-size-adjust|font-size|font-stretch|font-style|font-variant|font-weight|font|height|left|letter-spacing|line-height|list-style-image|list-style-position|list-style-type|list-style|margin-bottom|margin-left|margin-right|margin-top|marker-offset|margin|marks|max-height|max-width|min-height|min-width|-moz-border-radius|opacity|orphans|outline-color|outline-style|outline-width|outline|overflow|overflow-x|overflow-y|padding-bottom|padding-left|padding-right|padding-top|padding|page-break-after|page-break-before|page-break-inside|page|pause-after|pause-before|pause|pitch-range|pitch|play-during|position|quotes|richness|right|size|speak-header|speak-numeral|speak-punctuation|speech-rate|speak|stress|table-layout|text-align|text-decoration|text-indent|text-shadow|text-transform|top|unicode-bidi|vertical-align|visibility|voice-family|volume|white-space|widows|width|word-spacing|z-index".split("|")),B=o.arrayToMap("rgb|rgba|url|attr|counter|counters".split("|")),A=o.arrayToMap("absolute|all-scroll|always|armenian|auto|baseline|below|bidi-override|block|bold|bolder|border-box|both|bottom|break-all|break-word|capitalize|center|char|circle|cjk-ideographic|col-resize|collapse|content-box|crosshair|dashed|decimal-leading-zero|decimal|default|disabled|disc|distribute-all-lines|distribute-letter|distribute-space|distribute|dotted|double|e-resize|ellipsis|fixed|georgian|groove|hand|hebrew|help|hidden|hiragana-iroha|hiragana|horizontal|ideograph-alpha|ideograph-numeric|ideograph-parenthesis|ideograph-space|inactive|inherit|inline-block|inline|inset|inside|inter-ideograph|inter-word|italic|justify|katakana-iroha|katakana|keep-all|left|lighter|line-edge|line-through|line|list-item|loose|lower-alpha|lower-greek|lower-latin|lower-roman|lowercase|lr-tb|ltr|medium|middle|move|n-resize|ne-resize|newspaper|no-drop|no-repeat|nw-resize|none|normal|not-allowed|nowrap|oblique|outset|outside|overline|pointer|progress|relative|repeat-x|repeat-y|repeat|right|ridge|row-resize|rtl|s-resize|scroll|se-resize|separate|small-caps|solid|square|static|strict|super|sw-resize|table-footer-group|table-header-group|tb-rl|text-bottom|text-top|text|thick|thin|top|transparent|underline|upper-alpha|upper-latin|upper-roman|uppercase|vertical-ideographic|vertical-text|visible|w-resize|wait|whitespace|zero".split("|")),z=o.arrayToMap("aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow".split("|")),y="\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))",w=[{token:"comment",merge:!0,regex:"\\/\\*",next:"ruleset_comment"},{token:"string",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]'},{token:"string",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"constant.numeric",regex:y+x("em")},{token:"constant.numeric",regex:y+x("ex")},{token:"constant.numeric",regex:y+x("px")},{token:"constant.numeric",regex:y+x("cm")},{token:"constant.numeric",regex:y+x("mm")},{token:"constant.numeric",regex:y+x("in")},{token:"constant.numeric",regex:y+x("pt")},{token:"constant.numeric",regex:y+x("pc")},{token:"constant.numeric",regex:y+x("deg")},{token:"constant.numeric",regex:y+x("rad")},{token:"constant.numeric",regex:y+x("grad")},{token:"constant.numeric",regex:y+x("ms")},{token:"constant.numeric",regex:y+x("s")},{token:"constant.numeric",regex:y+x("hz")},{token:"constant.numeric",regex:y+x("khz")},{token:"constant.numeric",regex:y+"%"},{token:"constant.numeric",regex:y},{token:"constant.numeric",regex:"#[a-fA-F0-9]{6}"},{token:"constant.numeric",regex:"#[a-fA-F0-9]{3}"},{token:function(a){return C.hasOwnProperty(a.toLowerCase())?"support.type":B.hasOwnProperty(a.toLowerCase())?"support.function":A.hasOwnProperty(a.toLowerCase())?"support.constant":z.hasOwnProperty(a.toLowerCase())?"support.constant.color":"text"},regex:"\\-?[a-zA-Z_][a-zA-Z0-9_\\-]*"}],v=o.copyArray(w);v.unshift({token:"rparen",regex:"\\}",next:"start"});var u=o.copyArray(w);u.unshift({token:"rparen",regex:"\\}",next:"media"});var t=[{token:"comment",merge:!0,regex:".+"}],s=o.copyArray(t);s.unshift({token:"comment",regex:".*?\\*\\/",next:"start"});var r=o.copyArray(t);r.unshift({token:"comment",regex:".*?\\*\\/",next:"media"});var e=o.copyArray(t);e.unshift({token:"comment",regex:".*?\\*\\/",next:"ruleset"}),this.$rules={start:[{token:"comment",merge:!0,regex:"\\/\\*",next:"comment"},{token:"lparen",regex:"\\{",next:"ruleset"},{token:"string",regex:"@media.*?{",next:"media"},{token:"keyword",regex:"#[a-zA-Z0-9-_]+"},{token:"variable",regex:"\\.[a-zA-Z0-9-_]+"},{token:"string",regex:":[a-zA-Z0-9-_]+"},{token:"constant",regex:"[a-zA-Z0-9-_]+"}],media:[{token:"comment",merge:!0,regex:"\\/\\*",next:"media_comment"},{token:"lparen",regex:"\\{",next:"media_ruleset"},{token:"string",regex:"\\}",next:"start"},{token:"keyword",regex:"#[a-zA-Z0-9-_]+"},{token:"variable",regex:"\\.[a-zA-Z0-9-_]+"},{token:"string",regex:":[a-zA-Z0-9-_]+"},{token:"constant",regex:"[a-zA-Z0-9-_]+"}],comment:s,ruleset:v,ruleset_comment:e,media_ruleset:u,media_comment:r}};p.inherits(m,n),j.CssHighlightRules=m}),define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(g,f,m){var k=g("ace/range").Range,j=function(){};(function(){this.checkOutdent=function(d,c){return/^\s+$/.test(d)?/^\s*\}/.test(c):!1},this.autoOutdent=function(n,d){var s=n.getLine(d),r=s.match(/^(\s*\})/);if(!r){return 0}var q=r[1].length,p=n.findMatchingBracket({row:d,column:q});if(!p||p.row==d){return 0}var o=this.$getIndent(n.getLine(p.row));n.replace(new k(d,0,d,q-1),o)},this.$getIndent=function(d){var c=d.match(/^(\s+)/);return c?c[1]:""}}).call(j.prototype),f.MatchingBraceOutdent=j}),define("ace/worker/worker_client",["require","exports","module","pilot/oop","pilot/event_emitter"],function(j,g,o){var n=j("pilot/oop"),m=j("pilot/event_emitter").EventEmitter,k=function(z,y,x,w){this.callbacks=[];if(j.packaged){var v=this.$guessBasePath(),u=this.$worker=new Worker(v+y)}else{var t=this.$normalizePath(j.nameToUrl("ace/worker/worker",null,"_")),u=this.$worker=new Worker(t),s={};for(var r=0;r<z.length;r++){var q=z[r],p=this.$normalizePath(j.nameToUrl(q,null,"_").replace(/.js$/,""));s[q]=p}}this.$worker.postMessage({init:!0,tlns:s,module:x,classname:w}),this.callbackId=1,this.callbacks={};var a=this;this.$worker.onerror=function(b){throw window.console&&console.log&&console.log(b),b},this.$worker.onmessage=function(e){var d=e.data;switch(d.type){case"log":window.console&&console.log&&console.log(d.data);break;case"event":a._dispatchEvent(d.name,{data:d.data});break;case"call":var f=a.callbacks[d.id];f&&(f(d.data),delete a.callbacks[d.id])}}};(function(){n.implement(this,m),this.$normalizePath=function(b){return b.match(/^\w+:/)||(b=location.protocol+"//"+location.host+(b.charAt(0)=="/"?"":location.pathname.replace(/\/[^\/]*$/,""))+"/"+b.replace(/^[\/]+/,"")),b},this.$guessBasePath=function(){if(j.aceBaseUrl){return j.aceBaseUrl}var a=document.getElementsByTagName("script");for(var t=0;t<a.length;t++){var s=a[t],r=s.getAttribute("data-ace-base");if(r){return r.replace(/\/*$/,"/")}var q=s.src||s.getAttribute("src");if(!q){continue}var p=q.match(/^(?:(.*\/)ace\.js|(.*\/)ace-uncompressed\.js)(?:\?|$)/);if(p){return p[1]||p[2]}}return""},this.terminate=function(){this._dispatchEvent("terminate",{}),this.$worker.terminate()},this.send=function(d,c){this.$worker.postMessage({command:d,args:c})},this.call=function(f,e,q){if(q){var p=this.callbackId++;this.callbacks[p]=q,e.push(p)}this.send(f,e)},this.emit=function(d,c){this.$worker.postMessage({event:d,data:c})}}).call(k.prototype),g.WorkerClient=k});define("ace/mode/html",["require","exports","module","pilot/oop","ace/mode/text","ace/mode/javascript","ace/mode/css","ace/tokenizer","ace/mode/html_highlight_rules","ace/mode/behaviour/xml"],function(w,v,u){var t=w("pilot/oop"),s=w("ace/mode/text").Mode,r=w("ace/mode/javascript").Mode,q=w("ace/mode/css").Mode,p=w("ace/tokenizer").Tokenizer,o=w("ace/mode/html_highlight_rules").HtmlHighlightRules,n=w("ace/mode/behaviour/xml").XmlBehaviour,m=function(){var b=new o;this.$tokenizer=new p(b.getRules()),this.$behaviour=new n,this.$embeds=b.getEmbeds(),this.createModeDelegates({"js-":r,"css-":q})};t.inherits(m,s),function(){this.toggleCommentLines=function(f,e,j,g){return 0},this.getNextLineIndent=function(e,d,f){return this.$getIndent(d)},this.checkOutdent=function(e,d,f){return !1}}.call(m.prototype),v.Mode=m}),define("ace/mode/javascript",["require","exports","module","pilot/oop","ace/mode/text","ace/tokenizer","ace/mode/javascript_highlight_rules","ace/mode/matching_brace_outdent","ace/range","ace/worker/worker_client","ace/mode/behaviour/cstyle"],function(x,w,v){var u=x("pilot/oop"),t=x("ace/mode/text").Mode,s=x("ace/tokenizer").Tokenizer,r=x("ace/mode/javascript_highlight_rules").JavaScriptHighlightRules,q=x("ace/mode/matching_brace_outdent").MatchingBraceOutdent,p=x("ace/range").Range,o=x("ace/worker/worker_client").WorkerClient,n=x("ace/mode/behaviour/cstyle").CstyleBehaviour,m=function(){this.$tokenizer=new s((new r).getRules()),this.$outdent=new q,this.$behaviour=new n};u.inherits(m,t),function(){this.toggleCommentLines=function(I,H,G,F){var E=!0,D=[],C=/^(\s*)\/\//;for(var B=G;B<=F;B++){if(!C.test(H.getLine(B))){E=!1;break}}if(E){var A=new p(0,0,0,0);for(var B=G;B<=F;B++){var z=H.getLine(B),y=z.match(C);A.start.row=B,A.end.row=B,A.end.column=y[0].length,H.replace(A,y[1])}}else{H.indentRows(G,F,"//")}},this.getNextLineIndent=function(k,j,D){var C=this.$getIndent(j),B=this.$tokenizer.getLineTokens(j,k),A=B.tokens,z=B.state;if(A.length&&A[A.length-1].type=="comment"){return C}if(k=="start"||k=="regex_allowed"){var y=j.match(/^.*[\{\(\[\:]\s*$/);y&&(C+=D)}else{if(k=="doc-start"){if(z=="start"||k=="regex_allowed"){return""}var y=j.match(/^\s*(\/?)\*/);y&&(y[1]&&(C+=" "),C+="* ")}}return C},this.checkOutdent=function(e,d,f){return this.$outdent.checkOutdent(d,f)},this.autoOutdent=function(e,d,f){this.$outdent.autoOutdent(d,f)},this.createWorker=function(e){var d=e.getDocument(),f=new o(["ace","pilot"],"worker-javascript.js","ace/mode/javascript_worker","JavaScriptWorker");return f.call("setValue",[d.getValue()]),d.on("change",function(b){b.range={start:b.data.range.start,end:b.data.range.end},f.emit("change",b)}),f.on("jslint",function(a){var k=[];for(var j=0;j<a.data.length;j++){var g=a.data[j];g&&k.push({row:g.line-1,column:g.character-1,text:g.reason,type:"warning",lint:g})}e.setAnnotations(k)}),f.on("narcissus",function(a){e.setAnnotations([a.data])}),f.on("terminate",function(){e.clearAnnotations()}),f}}.call(m.prototype),w.Mode=m}),define("ace/mode/javascript_highlight_rules",["require","exports","module","pilot/oop","pilot/lang","ace/unicode","ace/mode/doc_comment_highlight_rules","ace/mode/text_highlight_rules"],function(s,r,q){var p=s("pilot/oop"),o=s("pilot/lang"),n=s("ace/unicode"),m=s("ace/mode/doc_comment_highlight_rules").DocCommentHighlightRules,k=s("ace/mode/text_highlight_rules").TextHighlightRules,j=function(){var f=o.arrayToMap("break|case|catch|continue|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|let|var|while|with|const|yield|import|get|set".split("|")),e=o.arrayToMap("null|Infinity|NaN|undefined".split("|")),t=o.arrayToMap("class|enum|extends|super|export|implements|private|public|interface|package|protected|static".split("|")),g="["+n.packages.L+"\\$_]["+n.packages.L+n.packages.Mn+n.packages.Mc+n.packages.Nd+n.packages.Pc+"\\$_]*\\b";this.$rules={start:[{token:"comment",regex:"\\/\\/.*$"},(new m).getStartRule("doc-start"),{token:"comment",merge:!0,regex:"\\/\\*",next:"comment"},{token:"string",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]'},{token:"string",merge:!0,regex:'["].*\\\\$',next:"qqstring"},{token:"string",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"string",merge:!0,regex:"['].*\\\\$",next:"qstring"},{token:"constant.numeric",regex:"0[xX][0-9a-fA-F]+\\b"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"constant.language.boolean",regex:"(?:true|false)\\b"},{token:function(a){return a=="this"?"variable.language":f.hasOwnProperty(a)?"keyword":e.hasOwnProperty(a)?"constant.language":t.hasOwnProperty(a)?"invalid.illegal":a=="debugger"?"invalid.deprecated":"identifier"},regex:g},{token:"keyword.operator",regex:"!|\\$|%|&|\\*|\\-\\-|\\-|\\+\\+|\\+|~|===|==|=|!=|!==|<=|>=|<<=|>>=|>>>=|<>|<|>|!|&&|\\|\\||\\?\\:|\\*=|%=|\\+=|\\-=|&=|\\^=|\\b(?:in|instanceof|new|delete|typeof|void)",next:"regex_allowed"},{token:"lparen",regex:"[[({]",next:"regex_allowed"},{token:"rparen",regex:"[\\])}]"},{token:"keyword.operator",regex:"\\/=?",next:"regex_allowed"},{token:"comment",regex:"^#!.*$"},{token:"text",regex:"\\s+"}],regex_allowed:[{token:"string.regexp",regex:"\\/(?:(?:\\[(?:\\\\]|[^\\]])+\\])|(?:\\\\/|[^\\]/]))*[/]\\w*",next:"start"},{token:"text",regex:"\\s+"},{token:"empty",regex:"",next:"start"}],comment:[{token:"comment",regex:".*?\\*\\/",next:"start"},{token:"comment",merge:!0,regex:".+"}],qqstring:[{token:"string",regex:'(?:(?:\\\\.)|(?:[^"\\\\]))*?"',next:"start"},{token:"string",merge:!0,regex:".+"}],qstring:[{token:"string",regex:"(?:(?:\\\\.)|(?:[^'\\\\]))*?'",next:"start"},{token:"string",merge:!0,regex:".+"}]},this.embedRules(m,"doc-",[(new m).getEndRule("start")])};p.inherits(j,k),r.JavaScriptHighlightRules=j}),define("ace/mode/doc_comment_highlight_rules",["require","exports","module","pilot/oop","ace/mode/text_highlight_rules"],function(j,g,o){var n=j("pilot/oop"),m=j("ace/mode/text_highlight_rules").TextHighlightRules,k=function(){this.$rules={start:[{token:"comment.doc.tag",regex:"@[\\w\\d_]+"},{token:"comment.doc",merge:!0,regex:"\\s+"},{token:"comment.doc",merge:!0,regex:"TODO"},{token:"comment.doc",merge:!0,regex:"[^@\\*]+"},{token:"comment.doc",merge:!0,regex:"."}]}};n.inherits(k,m),function(){this.getStartRule=function(b){return{token:"comment.doc",merge:!0,regex:"\\/\\*(?=\\*)",next:b}},this.getEndRule=function(b){return{token:"comment.doc",merge:!0,regex:"\\*\\/",next:b}}}.call(k.prototype),g.DocCommentHighlightRules=k}),define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(g,f,m){var k=g("ace/range").Range,j=function(){};(function(){this.checkOutdent=function(d,c){return/^\s+$/.test(d)?/^\s*\}/.test(c):!1},this.autoOutdent=function(n,d){var s=n.getLine(d),r=s.match(/^(\s*\})/);if(!r){return 0}var q=r[1].length,p=n.findMatchingBracket({row:d,column:q});if(!p||p.row==d){return 0}var o=this.$getIndent(n.getLine(p.row));n.replace(new k(d,0,d,q-1),o)},this.$getIndent=function(d){var c=d.match(/^(\s+)/);return c?c[1]:""}}).call(j.prototype),f.MatchingBraceOutdent=j}),define("ace/worker/worker_client",["require","exports","module","pilot/oop","pilot/event_emitter"],function(j,g,o){var n=j("pilot/oop"),m=j("pilot/event_emitter").EventEmitter,k=function(z,y,x,w){this.callbacks=[];if(j.packaged){var v=this.$guessBasePath(),u=this.$worker=new Worker(v+y)}else{var t=this.$normalizePath(j.nameToUrl("ace/worker/worker",null,"_")),u=this.$worker=new Worker(t),s={};for(var r=0;r<z.length;r++){var q=z[r],p=this.$normalizePath(j.nameToUrl(q,null,"_").replace(/.js$/,""));s[q]=p}}this.$worker.postMessage({init:!0,tlns:s,module:x,classname:w}),this.callbackId=1,this.callbacks={};var a=this;this.$worker.onerror=function(b){throw window.console&&console.log&&console.log(b),b},this.$worker.onmessage=function(e){var d=e.data;switch(d.type){case"log":window.console&&console.log&&console.log(d.data);break;case"event":a._dispatchEvent(d.name,{data:d.data});break;case"call":var f=a.callbacks[d.id];f&&(f(d.data),delete a.callbacks[d.id])}}};(function(){n.implement(this,m),this.$normalizePath=function(b){return b.match(/^\w+:/)||(b=location.protocol+"//"+location.host+(b.charAt(0)=="/"?"":location.pathname.replace(/\/[^\/]*$/,""))+"/"+b.replace(/^[\/]+/,"")),b},this.$guessBasePath=function(){if(j.aceBaseUrl){return j.aceBaseUrl}var a=document.getElementsByTagName("script");for(var t=0;t<a.length;t++){var s=a[t],r=s.getAttribute("data-ace-base");if(r){return r.replace(/\/*$/,"/")}var q=s.src||s.getAttribute("src");if(!q){continue}var p=q.match(/^(?:(.*\/)ace\.js|(.*\/)ace-uncompressed\.js)(?:\?|$)/);if(p){return p[1]||p[2]}}return""},this.terminate=function(){this._dispatchEvent("terminate",{}),this.$worker.terminate()},this.send=function(d,c){this.$worker.postMessage({command:d,args:c})},this.call=function(f,e,q){if(q){var p=this.callbackId++;this.callbacks[p]=q,e.push(p)}this.send(f,e)},this.emit=function(d,c){this.$worker.postMessage({event:d,data:c})}}).call(k.prototype),g.WorkerClient=k}),define("ace/mode/behaviour/cstyle",["require","exports","module","pilot/oop","ace/mode/behaviour"],function(j,g,o){var n=j("pilot/oop"),m=j("ace/mode/behaviour").Behaviour,k=function(){this.add("braces","insertion",function(C,B,A,z,y){if(y=="{"){var x=A.getSelectionRange(),w=z.doc.getTextRange(x);return w!==""?{text:"{"+w+"}",selection:!1}:{text:"{}",selection:[1,1]}}if(y=="}"){var v=A.getCursorPosition(),u=z.doc.getLine(v.row),t=u.substring(v.column,v.column+1);if(t=="}"){var s=z.$findOpeningBracket("}",{column:v.column+1,row:v.row});if(s!==null){return{text:"",selection:[1,1]}}}}else{if(y=="\n"){var v=A.getCursorPosition(),u=z.doc.getLine(v.row),t=u.substring(v.column,v.column+1);if(t=="}"){var r=z.findMatchingBracket({row:v.row,column:v.column+1});if(!r){return !1}var q=this.getNextLineIndent(C,u.substring(0,u.length-1),z.getTabString()),p=this.$getIndent(z.doc.getLine(r.row));return{text:"\n"+q+"\n"+p,selection:[1,q.length,1,q.length]}}}}return !1}),this.add("braces","deletion",function(q,p,w,v,u){var t=v.doc.getTextRange(u);if(!u.isMultiLine()&&t=="{"){var s=v.doc.getLine(u.start.row),r=s.substring(u.end.column,u.end.column+1);if(r=="}"){return u.end.column++,u}}return !1}),this.add("parens","insertion",function(z,y,x,w,v){if(v=="("){var u=x.getSelectionRange(),t=w.doc.getTextRange(u);return t!==""?{text:"("+t+")",selection:!1}:{text:"()",selection:[1,1]}}if(v==")"){var s=x.getCursorPosition(),r=w.doc.getLine(s.row),q=r.substring(s.column,s.column+1);if(q==")"){var p=w.$findOpeningBracket(")",{column:s.column+1,row:s.row});if(p!==null){return{text:"",selection:[1,1]}}}}return !1}),this.add("parens","deletion",function(q,p,w,v,u){var t=v.doc.getTextRange(u);if(!u.isMultiLine()&&t=="("){var s=v.doc.getLine(u.start.row),r=s.substring(u.start.column+1,u.start.column+2);if(r==")"){return u.end.column++,u}}return !1}),this.add("string_dquotes","insertion",function(F,E,D,C,B){if(B=='"'){var A=D.getSelectionRange(),z=C.doc.getTextRange(A);if(z!==""){return{text:'"'+z+'"',selection:!1}}var y=D.getCursorPosition(),x=C.doc.getLine(y.row),w=x.substring(y.column-1,y.column);if(w=="\\"){return !1}var v=C.getTokens(A.start.row,A.start.row)[0].tokens,u=0,t,s=-1;for(var r=0;r<v.length;r++){t=v[r],t.type=="string"?s=-1:s<0&&(s=t.value.indexOf('"'));if(t.value.length+u>A.start.column){break}u+=v[r].value.length}if(!t||s<0&&t.type!=="comment"&&(t.type!=="string"||A.start.column!==t.value.length+u-1&&t.value.lastIndexOf('"')===t.value.length-1)){return{text:'""',selection:[1,1]}}if(t&&t.type==="string"){var q=x.substring(y.column,y.column+1);if(q=='"'){return{text:"",selection:[1,1]}}}}return !1}),this.add("string_dquotes","deletion",function(q,p,w,v,u){var t=v.doc.getTextRange(u);if(!u.isMultiLine()&&t=='"'){var s=v.doc.getLine(u.start.row),r=s.substring(u.start.column+1,u.start.column+2);if(r=='"'){return u.end.column++,u}}return !1})};n.inherits(k,m),g.CstyleBehaviour=k}),define("ace/mode/css",["require","exports","module","pilot/oop","ace/mode/text","ace/tokenizer","ace/mode/css_highlight_rules","ace/mode/matching_brace_outdent","ace/worker/worker_client"],function(u,t,s){var r=u("pilot/oop"),q=u("ace/mode/text").Mode,p=u("ace/tokenizer").Tokenizer,o=u("ace/mode/css_highlight_rules").CssHighlightRules,n=u("ace/mode/matching_brace_outdent").MatchingBraceOutdent,m=u("ace/worker/worker_client").WorkerClient,k=function(){this.$tokenizer=new p((new o).getRules()),this.$outdent=new n};r.inherits(k,q),function(){this.getNextLineIndent=function(j,g,y){var x=this.$getIndent(g),w=this.$tokenizer.getLineTokens(g,j).tokens;if(w.length&&w[w.length-1].type=="comment"){return x}var v=g.match(/^.*\{\s*$/);return v&&(x+=y),x},this.checkOutdent=function(e,d,f){return this.$outdent.checkOutdent(d,f)},this.autoOutdent=function(e,d,f){this.$outdent.autoOutdent(d,f)},this.createWorker=function(e){var d=e.getDocument(),f=new m(["ace","pilot"],"worker-css.js","ace/mode/css_worker","Worker");f.call("setValue",[d.getValue()]),d.on("change",function(b){b.range={start:b.data.range.start,end:b.data.range.end},f.emit("change",b)}),f.on("csslint",function(a){var g=[];a.data.forEach(function(b){g.push({row:b.line-1,column:b.col-1,text:b.message,type:b.type,lint:b})}),e.setAnnotations(g)})}}.call(k.prototype),t.Mode=k}),define("ace/mode/css_highlight_rules",["require","exports","module","pilot/oop","pilot/lang","ace/mode/text_highlight_rules"],function(k,j,q){var p=k("pilot/oop"),o=k("pilot/lang"),n=k("ace/mode/text_highlight_rules").TextHighlightRules,m=function(){function x(g){var f=[],E=g.split("");for(var D=0;D<E.length;D++){f.push("[",E[D].toLowerCase(),E[D].toUpperCase(),"]")}return f.join("")}var C=o.arrayToMap("-moz-box-sizing|-webkit-box-sizing|appearance|azimuth|background-attachment|background-color|background-image|background-position|background-repeat|background|border-bottom-color|border-bottom-style|border-bottom-width|border-bottom|border-collapse|border-color|border-left-color|border-left-style|border-left-width|border-left|border-right-color|border-right-style|border-right-width|border-right|border-spacing|border-style|border-top-color|border-top-style|border-top-width|border-top|border-width|border|bottom|box-sizing|caption-side|clear|clip|color|content|counter-increment|counter-reset|cue-after|cue-before|cue|cursor|direction|display|elevation|empty-cells|float|font-family|font-size-adjust|font-size|font-stretch|font-style|font-variant|font-weight|font|height|left|letter-spacing|line-height|list-style-image|list-style-position|list-style-type|list-style|margin-bottom|margin-left|margin-right|margin-top|marker-offset|margin|marks|max-height|max-width|min-height|min-width|-moz-border-radius|opacity|orphans|outline-color|outline-style|outline-width|outline|overflow|overflow-x|overflow-y|padding-bottom|padding-left|padding-right|padding-top|padding|page-break-after|page-break-before|page-break-inside|page|pause-after|pause-before|pause|pitch-range|pitch|play-during|position|quotes|richness|right|size|speak-header|speak-numeral|speak-punctuation|speech-rate|speak|stress|table-layout|text-align|text-decoration|text-indent|text-shadow|text-transform|top|unicode-bidi|vertical-align|visibility|voice-family|volume|white-space|widows|width|word-spacing|z-index".split("|")),B=o.arrayToMap("rgb|rgba|url|attr|counter|counters".split("|")),A=o.arrayToMap("absolute|all-scroll|always|armenian|auto|baseline|below|bidi-override|block|bold|bolder|border-box|both|bottom|break-all|break-word|capitalize|center|char|circle|cjk-ideographic|col-resize|collapse|content-box|crosshair|dashed|decimal-leading-zero|decimal|default|disabled|disc|distribute-all-lines|distribute-letter|distribute-space|distribute|dotted|double|e-resize|ellipsis|fixed|georgian|groove|hand|hebrew|help|hidden|hiragana-iroha|hiragana|horizontal|ideograph-alpha|ideograph-numeric|ideograph-parenthesis|ideograph-space|inactive|inherit|inline-block|inline|inset|inside|inter-ideograph|inter-word|italic|justify|katakana-iroha|katakana|keep-all|left|lighter|line-edge|line-through|line|list-item|loose|lower-alpha|lower-greek|lower-latin|lower-roman|lowercase|lr-tb|ltr|medium|middle|move|n-resize|ne-resize|newspaper|no-drop|no-repeat|nw-resize|none|normal|not-allowed|nowrap|oblique|outset|outside|overline|pointer|progress|relative|repeat-x|repeat-y|repeat|right|ridge|row-resize|rtl|s-resize|scroll|se-resize|separate|small-caps|solid|square|static|strict|super|sw-resize|table-footer-group|table-header-group|tb-rl|text-bottom|text-top|text|thick|thin|top|transparent|underline|upper-alpha|upper-latin|upper-roman|uppercase|vertical-ideographic|vertical-text|visible|w-resize|wait|whitespace|zero".split("|")),z=o.arrayToMap("aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow".split("|")),y="\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))",w=[{token:"comment",merge:!0,regex:"\\/\\*",next:"ruleset_comment"},{token:"string",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]'},{token:"string",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"constant.numeric",regex:y+x("em")},{token:"constant.numeric",regex:y+x("ex")},{token:"constant.numeric",regex:y+x("px")},{token:"constant.numeric",regex:y+x("cm")},{token:"constant.numeric",regex:y+x("mm")},{token:"constant.numeric",regex:y+x("in")},{token:"constant.numeric",regex:y+x("pt")},{token:"constant.numeric",regex:y+x("pc")},{token:"constant.numeric",regex:y+x("deg")},{token:"constant.numeric",regex:y+x("rad")},{token:"constant.numeric",regex:y+x("grad")},{token:"constant.numeric",regex:y+x("ms")},{token:"constant.numeric",regex:y+x("s")},{token:"constant.numeric",regex:y+x("hz")},{token:"constant.numeric",regex:y+x("khz")},{token:"constant.numeric",regex:y+"%"},{token:"constant.numeric",regex:y},{token:"constant.numeric",regex:"#[a-fA-F0-9]{6}"},{token:"constant.numeric",regex:"#[a-fA-F0-9]{3}"},{token:function(a){return C.hasOwnProperty(a.toLowerCase())?"support.type":B.hasOwnProperty(a.toLowerCase())?"support.function":A.hasOwnProperty(a.toLowerCase())?"support.constant":z.hasOwnProperty(a.toLowerCase())?"support.constant.color":"text"},regex:"\\-?[a-zA-Z_][a-zA-Z0-9_\\-]*"}],v=o.copyArray(w);v.unshift({token:"rparen",regex:"\\}",next:"start"});var u=o.copyArray(w);u.unshift({token:"rparen",regex:"\\}",next:"media"});var t=[{token:"comment",merge:!0,regex:".+"}],s=o.copyArray(t);s.unshift({token:"comment",regex:".*?\\*\\/",next:"start"});var r=o.copyArray(t);r.unshift({token:"comment",regex:".*?\\*\\/",next:"media"});var e=o.copyArray(t);e.unshift({token:"comment",regex:".*?\\*\\/",next:"ruleset"}),this.$rules={start:[{token:"comment",merge:!0,regex:"\\/\\*",next:"comment"},{token:"lparen",regex:"\\{",next:"ruleset"},{token:"string",regex:"@media.*?{",next:"media"},{token:"keyword",regex:"#[a-zA-Z0-9-_]+"},{token:"variable",regex:"\\.[a-zA-Z0-9-_]+"},{token:"string",regex:":[a-zA-Z0-9-_]+"},{token:"constant",regex:"[a-zA-Z0-9-_]+"}],media:[{token:"comment",merge:!0,regex:"\\/\\*",next:"media_comment"},{token:"lparen",regex:"\\{",next:"media_ruleset"},{token:"string",regex:"\\}",next:"start"},{token:"keyword",regex:"#[a-zA-Z0-9-_]+"},{token:"variable",regex:"\\.[a-zA-Z0-9-_]+"},{token:"string",regex:":[a-zA-Z0-9-_]+"},{token:"constant",regex:"[a-zA-Z0-9-_]+"}],comment:s,ruleset:v,ruleset_comment:e,media_ruleset:u,media_comment:r}};p.inherits(m,n),j.CssHighlightRules=m}),define("ace/mode/html_highlight_rules",["require","exports","module","pilot/oop","ace/mode/css_highlight_rules","ace/mode/javascript_highlight_rules","ace/mode/text_highlight_rules"],function(k,j,r){var q=k("pilot/oop"),p=k("ace/mode/css_highlight_rules").CssHighlightRules,o=k("ace/mode/javascript_highlight_rules").JavaScriptHighlightRules,n=k("ace/mode/text_highlight_rules").TextHighlightRules,m=function(){function e(b){return[{token:"string",regex:'".*?"'},{token:"string",merge:!0,regex:'["].*$',next:b+"-qqstring"},{token:"string",regex:"'.*?'"},{token:"string",merge:!0,regex:"['].*$",next:b+"-qstring"}]}function d(g,c){return[{token:"string",merge:!0,regex:".*"+g,next:c},{token:"string",merge:!0,regex:".+"}]}function f(g,b,a){g[b]=[{token:"text",regex:"\\s+"},{token:"meta.tag",regex:"[-_a-zA-Z0-9:]+",next:b+"-attribute-list"},{token:"empty",regex:"",next:b+"-attribute-list"}],g[b+"-qstring"]=d("'",b),g[b+"-qqstring"]=d('"',b),g[b+"-attribute-list"]=[{token:"text",regex:">",next:a},{token:"entity.other.attribute-name",regex:"[-_a-zA-Z0-9:]+"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"text",regex:"\\s+"}].concat(e(b))}this.$rules={start:[{token:"text",merge:!0,regex:"<\\!\\[CDATA\\[",next:"cdata"},{token:"xml_pe",regex:"<\\?.*?\\?>"},{token:"comment",merge:!0,regex:"<\\!--",next:"comment"},{token:"text",regex:"<(?=s*script)",next:"script"},{token:"text",regex:"<(?=s*style)",next:"css"},{token:"text",regex:"<\\/?",next:"tag"},{token:"text",regex:"\\s+"},{token:"text",regex:"[^<]+"}],cdata:[{token:"text",regex:"\\]\\]>",next:"start"},{token:"text",merge:!0,regex:"\\s+"},{token:"text",merge:!0,regex:".+"}],comment:[{token:"comment",regex:".*?-->",next:"start"},{token:"comment",merge:!0,regex:".+"}]},f(this.$rules,"tag","start"),f(this.$rules,"css","css-start"),f(this.$rules,"script","js-start"),this.embedRules(o,"js-",[{token:"comment",regex:"\\/\\/.*(?=<\\/script>)",next:"tag"},{token:"text",regex:"<\\/(?=script)",next:"tag"}]),this.embedRules(p,"css-",[{token:"text",regex:"<\\/(?=style)",next:"tag"}])};q.inherits(m,n),j.HtmlHighlightRules=m}),define("ace/mode/behaviour/xml",["require","exports","module","pilot/oop","ace/mode/behaviour","ace/mode/behaviour/cstyle"],function(k,j,q){var p=k("pilot/oop"),o=k("ace/mode/behaviour").Behaviour,n=k("ace/mode/behaviour/cstyle").CstyleBehaviour,m=function(){this.inherit(n,["string_dquotes"]),this.add("brackets","insertion",function(D,C,B,A,z){if(z=="<"){var y=B.getSelectionRange(),x=A.doc.getTextRange(y);return x!==""?!1:{text:"<>",selection:[1,1]}}if(z==">"){var w=B.getCursorPosition(),v=A.doc.getLine(w.row),u=v.substring(w.column,w.column+1);if(u==">"){return{text:"",selection:[1,1]}}}else{if(z=="\n"){var w=B.getCursorPosition(),v=A.doc.getLine(w.row),t=v.substring(w.column,w.column+2);if(t=="</"){var s=this.$getIndent(A.doc.getLine(w.row))+A.getTabString(),r=this.$getIndent(A.doc.getLine(w.row));return{text:"\n"+s+"\n"+r,selection:[1,s.length,1,s.length]}}}}return !1})};p.inherits(m,o),j.XmlBehaviour=m});define("ace/mode/json",["require","exports","module","pilot/oop","ace/mode/text","ace/tokenizer","ace/mode/json_highlight_rules","ace/mode/matching_brace_outdent","ace/range","ace/mode/behaviour/cstyle"],function(w,v,u){var t=w("pilot/oop"),s=w("ace/mode/text").Mode,r=w("ace/tokenizer").Tokenizer,q=w("ace/mode/json_highlight_rules").JsonHighlightRules,p=w("ace/mode/matching_brace_outdent").MatchingBraceOutdent,o=w("ace/range").Range,n=w("ace/mode/behaviour/cstyle").CstyleBehaviour,m=function(){this.$tokenizer=new r((new q).getRules()),this.$outdent=new p,this.$behaviour=new n};t.inherits(m,s),function(){this.getNextLineIndent=function(k,j,C){var B=this.$getIndent(j),A=this.$tokenizer.getLineTokens(j,k),z=A.tokens,y=A.state;if(k=="start"){var x=j.match(/^.*[\{\(\[]\s*$/);x&&(B+=C)}return B},this.checkOutdent=function(e,d,f){return this.$outdent.checkOutdent(d,f)},this.autoOutdent=function(e,d,f){this.$outdent.autoOutdent(d,f)}}.call(m.prototype),v.Mode=m}),define("ace/mode/json_highlight_rules",["require","exports","module","pilot/oop","pilot/lang","ace/mode/text_highlight_rules"],function(k,j,q){var p=k("pilot/oop"),o=k("pilot/lang"),n=k("ace/mode/text_highlight_rules").TextHighlightRules,m=function(){this.$rules={start:[{token:"string",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]'},{token:"constant.numeric",regex:"0[xX][0-9a-fA-F]+\\b"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"constant.language.boolean",regex:"(?:true|false)\\b"},{token:"invalid.illegal",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"invalid.illegal",regex:"\\/\\/.*$"},{token:"lparen",regex:"[[({]"},{token:"rparen",regex:"[\\])}]"},{token:"text",regex:"\\s+"}]}};p.inherits(m,n),j.JsonHighlightRules=m}),define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(g,f,m){var k=g("ace/range").Range,j=function(){};(function(){this.checkOutdent=function(d,c){return/^\s+$/.test(d)?/^\s*\}/.test(c):!1},this.autoOutdent=function(n,d){var s=n.getLine(d),r=s.match(/^(\s*\})/);if(!r){return 0}var q=r[1].length,p=n.findMatchingBracket({row:d,column:q});if(!p||p.row==d){return 0}var o=this.$getIndent(n.getLine(p.row));n.replace(new k(d,0,d,q-1),o)},this.$getIndent=function(d){var c=d.match(/^(\s+)/);return c?c[1]:""}}).call(j.prototype),f.MatchingBraceOutdent=j}),define("ace/mode/behaviour/cstyle",["require","exports","module","pilot/oop","ace/mode/behaviour"],function(j,g,o){var n=j("pilot/oop"),m=j("ace/mode/behaviour").Behaviour,k=function(){this.add("braces","insertion",function(C,B,A,z,y){if(y=="{"){var x=A.getSelectionRange(),w=z.doc.getTextRange(x);return w!==""?{text:"{"+w+"}",selection:!1}:{text:"{}",selection:[1,1]}}if(y=="}"){var v=A.getCursorPosition(),u=z.doc.getLine(v.row),t=u.substring(v.column,v.column+1);if(t=="}"){var s=z.$findOpeningBracket("}",{column:v.column+1,row:v.row});if(s!==null){return{text:"",selection:[1,1]}}}}else{if(y=="\n"){var v=A.getCursorPosition(),u=z.doc.getLine(v.row),t=u.substring(v.column,v.column+1);if(t=="}"){var r=z.findMatchingBracket({row:v.row,column:v.column+1});if(!r){return !1}var q=this.getNextLineIndent(C,u.substring(0,u.length-1),z.getTabString()),p=this.$getIndent(z.doc.getLine(r.row));return{text:"\n"+q+"\n"+p,selection:[1,q.length,1,q.length]}}}}return !1}),this.add("braces","deletion",function(q,p,w,v,u){var t=v.doc.getTextRange(u);if(!u.isMultiLine()&&t=="{"){var s=v.doc.getLine(u.start.row),r=s.substring(u.end.column,u.end.column+1);if(r=="}"){return u.end.column++,u}}return !1}),this.add("parens","insertion",function(z,y,x,w,v){if(v=="("){var u=x.getSelectionRange(),t=w.doc.getTextRange(u);return t!==""?{text:"("+t+")",selection:!1}:{text:"()",selection:[1,1]}}if(v==")"){var s=x.getCursorPosition(),r=w.doc.getLine(s.row),q=r.substring(s.column,s.column+1);if(q==")"){var p=w.$findOpeningBracket(")",{column:s.column+1,row:s.row});if(p!==null){return{text:"",selection:[1,1]}}}}return !1}),this.add("parens","deletion",function(q,p,w,v,u){var t=v.doc.getTextRange(u);if(!u.isMultiLine()&&t=="("){var s=v.doc.getLine(u.start.row),r=s.substring(u.start.column+1,u.start.column+2);if(r==")"){return u.end.column++,u}}return !1}),this.add("string_dquotes","insertion",function(F,E,D,C,B){if(B=='"'){var A=D.getSelectionRange(),z=C.doc.getTextRange(A);if(z!==""){return{text:'"'+z+'"',selection:!1}}var y=D.getCursorPosition(),x=C.doc.getLine(y.row),w=x.substring(y.column-1,y.column);if(w=="\\"){return !1}var v=C.getTokens(A.start.row,A.start.row)[0].tokens,u=0,t,s=-1;for(var r=0;r<v.length;r++){t=v[r],t.type=="string"?s=-1:s<0&&(s=t.value.indexOf('"'));if(t.value.length+u>A.start.column){break}u+=v[r].value.length}if(!t||s<0&&t.type!=="comment"&&(t.type!=="string"||A.start.column!==t.value.length+u-1&&t.value.lastIndexOf('"')===t.value.length-1)){return{text:'""',selection:[1,1]}}if(t&&t.type==="string"){var q=x.substring(y.column,y.column+1);if(q=='"'){return{text:"",selection:[1,1]}}}}return !1}),this.add("string_dquotes","deletion",function(q,p,w,v,u){var t=v.doc.getTextRange(u);if(!u.isMultiLine()&&t=='"'){var s=v.doc.getLine(u.start.row),r=s.substring(u.start.column+1,u.start.column+2);if(r=='"'){return u.end.column++,u}}return !1})};n.inherits(k,m),g.CstyleBehaviour=k});define("ace/mode/markdown",["require","exports","module","pilot/oop","ace/mode/text","ace/mode/javascript","ace/mode/xml","ace/mode/html","ace/tokenizer","ace/mode/markdown_highlight_rules","ace/range"],function(x,w,v){var u=x("pilot/oop"),t=x("ace/mode/text").Mode,s=x("ace/mode/javascript").Mode,r=x("ace/mode/xml").Mode,q=x("ace/mode/html").Mode,p=x("ace/tokenizer").Tokenizer,o=x("ace/mode/markdown_highlight_rules").MarkdownHighlightRules,n=x("ace/range").Range,m=function(){var b=new o;this.$tokenizer=new p(b.getRules()),this.$embeds=b.getEmbeds(),this.createModeDelegates({"js-":s,"xml-":r,"html-":q})};u.inherits(m,t),function(){this.getNextLineIndent=function(f,e,j){if(f=="listblock"){var g=/^((?:.+)?)([-+*][ ]+)/.exec(e);return g?(new Array(g[1].length+1)).join(" ")+g[2]:""}return this.$getIndent(e)}}.call(m.prototype),w.Mode=m}),define("ace/mode/javascript",["require","exports","module","pilot/oop","ace/mode/text","ace/tokenizer","ace/mode/javascript_highlight_rules","ace/mode/matching_brace_outdent","ace/range","ace/worker/worker_client","ace/mode/behaviour/cstyle"],function(x,w,v){var u=x("pilot/oop"),t=x("ace/mode/text").Mode,s=x("ace/tokenizer").Tokenizer,r=x("ace/mode/javascript_highlight_rules").JavaScriptHighlightRules,q=x("ace/mode/matching_brace_outdent").MatchingBraceOutdent,p=x("ace/range").Range,o=x("ace/worker/worker_client").WorkerClient,n=x("ace/mode/behaviour/cstyle").CstyleBehaviour,m=function(){this.$tokenizer=new s((new r).getRules()),this.$outdent=new q,this.$behaviour=new n};u.inherits(m,t),function(){this.toggleCommentLines=function(I,H,G,F){var E=!0,D=[],C=/^(\s*)\/\//;for(var B=G;B<=F;B++){if(!C.test(H.getLine(B))){E=!1;break}}if(E){var A=new p(0,0,0,0);for(var B=G;B<=F;B++){var z=H.getLine(B),y=z.match(C);A.start.row=B,A.end.row=B,A.end.column=y[0].length,H.replace(A,y[1])}}else{H.indentRows(G,F,"//")}},this.getNextLineIndent=function(k,j,D){var C=this.$getIndent(j),B=this.$tokenizer.getLineTokens(j,k),A=B.tokens,z=B.state;if(A.length&&A[A.length-1].type=="comment"){return C}if(k=="start"||k=="regex_allowed"){var y=j.match(/^.*[\{\(\[\:]\s*$/);y&&(C+=D)}else{if(k=="doc-start"){if(z=="start"||k=="regex_allowed"){return""}var y=j.match(/^\s*(\/?)\*/);y&&(y[1]&&(C+=" "),C+="* ")}}return C},this.checkOutdent=function(e,d,f){return this.$outdent.checkOutdent(d,f)},this.autoOutdent=function(e,d,f){this.$outdent.autoOutdent(d,f)},this.createWorker=function(e){var d=e.getDocument(),f=new o(["ace","pilot"],"worker-javascript.js","ace/mode/javascript_worker","JavaScriptWorker");return f.call("setValue",[d.getValue()]),d.on("change",function(b){b.range={start:b.data.range.start,end:b.data.range.end},f.emit("change",b)}),f.on("jslint",function(a){var k=[];for(var j=0;j<a.data.length;j++){var g=a.data[j];g&&k.push({row:g.line-1,column:g.character-1,text:g.reason,type:"warning",lint:g})}e.setAnnotations(k)}),f.on("narcissus",function(a){e.setAnnotations([a.data])}),f.on("terminate",function(){e.clearAnnotations()}),f}}.call(m.prototype),w.Mode=m}),define("ace/mode/javascript_highlight_rules",["require","exports","module","pilot/oop","pilot/lang","ace/unicode","ace/mode/doc_comment_highlight_rules","ace/mode/text_highlight_rules"],function(s,r,q){var p=s("pilot/oop"),o=s("pilot/lang"),n=s("ace/unicode"),m=s("ace/mode/doc_comment_highlight_rules").DocCommentHighlightRules,k=s("ace/mode/text_highlight_rules").TextHighlightRules,j=function(){var f=o.arrayToMap("break|case|catch|continue|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|let|var|while|with|const|yield|import|get|set".split("|")),e=o.arrayToMap("null|Infinity|NaN|undefined".split("|")),t=o.arrayToMap("class|enum|extends|super|export|implements|private|public|interface|package|protected|static".split("|")),g="["+n.packages.L+"\\$_]["+n.packages.L+n.packages.Mn+n.packages.Mc+n.packages.Nd+n.packages.Pc+"\\$_]*\\b";this.$rules={start:[{token:"comment",regex:"\\/\\/.*$"},(new m).getStartRule("doc-start"),{token:"comment",merge:!0,regex:"\\/\\*",next:"comment"},{token:"string",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]'},{token:"string",merge:!0,regex:'["].*\\\\$',next:"qqstring"},{token:"string",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"string",merge:!0,regex:"['].*\\\\$",next:"qstring"},{token:"constant.numeric",regex:"0[xX][0-9a-fA-F]+\\b"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"constant.language.boolean",regex:"(?:true|false)\\b"},{token:function(a){return a=="this"?"variable.language":f.hasOwnProperty(a)?"keyword":e.hasOwnProperty(a)?"constant.language":t.hasOwnProperty(a)?"invalid.illegal":a=="debugger"?"invalid.deprecated":"identifier"},regex:g},{token:"keyword.operator",regex:"!|\\$|%|&|\\*|\\-\\-|\\-|\\+\\+|\\+|~|===|==|=|!=|!==|<=|>=|<<=|>>=|>>>=|<>|<|>|!|&&|\\|\\||\\?\\:|\\*=|%=|\\+=|\\-=|&=|\\^=|\\b(?:in|instanceof|new|delete|typeof|void)",next:"regex_allowed"},{token:"lparen",regex:"[[({]",next:"regex_allowed"},{token:"rparen",regex:"[\\])}]"},{token:"keyword.operator",regex:"\\/=?",next:"regex_allowed"},{token:"comment",regex:"^#!.*$"},{token:"text",regex:"\\s+"}],regex_allowed:[{token:"string.regexp",regex:"\\/(?:(?:\\[(?:\\\\]|[^\\]])+\\])|(?:\\\\/|[^\\]/]))*[/]\\w*",next:"start"},{token:"text",regex:"\\s+"},{token:"empty",regex:"",next:"start"}],comment:[{token:"comment",regex:".*?\\*\\/",next:"start"},{token:"comment",merge:!0,regex:".+"}],qqstring:[{token:"string",regex:'(?:(?:\\\\.)|(?:[^"\\\\]))*?"',next:"start"},{token:"string",merge:!0,regex:".+"}],qstring:[{token:"string",regex:"(?:(?:\\\\.)|(?:[^'\\\\]))*?'",next:"start"},{token:"string",merge:!0,regex:".+"}]},this.embedRules(m,"doc-",[(new m).getEndRule("start")])};p.inherits(j,k),r.JavaScriptHighlightRules=j}),define("ace/mode/doc_comment_highlight_rules",["require","exports","module","pilot/oop","ace/mode/text_highlight_rules"],function(j,g,o){var n=j("pilot/oop"),m=j("ace/mode/text_highlight_rules").TextHighlightRules,k=function(){this.$rules={start:[{token:"comment.doc.tag",regex:"@[\\w\\d_]+"},{token:"comment.doc",merge:!0,regex:"\\s+"},{token:"comment.doc",merge:!0,regex:"TODO"},{token:"comment.doc",merge:!0,regex:"[^@\\*]+"},{token:"comment.doc",merge:!0,regex:"."}]}};n.inherits(k,m),function(){this.getStartRule=function(b){return{token:"comment.doc",merge:!0,regex:"\\/\\*(?=\\*)",next:b}},this.getEndRule=function(b){return{token:"comment.doc",merge:!0,regex:"\\*\\/",next:b}}}.call(k.prototype),g.DocCommentHighlightRules=k}),define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(g,f,m){var k=g("ace/range").Range,j=function(){};(function(){this.checkOutdent=function(d,c){return/^\s+$/.test(d)?/^\s*\}/.test(c):!1},this.autoOutdent=function(n,d){var s=n.getLine(d),r=s.match(/^(\s*\})/);if(!r){return 0}var q=r[1].length,p=n.findMatchingBracket({row:d,column:q});if(!p||p.row==d){return 0}var o=this.$getIndent(n.getLine(p.row));n.replace(new k(d,0,d,q-1),o)},this.$getIndent=function(d){var c=d.match(/^(\s+)/);return c?c[1]:""}}).call(j.prototype),f.MatchingBraceOutdent=j}),define("ace/worker/worker_client",["require","exports","module","pilot/oop","pilot/event_emitter"],function(j,g,o){var n=j("pilot/oop"),m=j("pilot/event_emitter").EventEmitter,k=function(z,y,x,w){this.callbacks=[];if(j.packaged){var v=this.$guessBasePath(),u=this.$worker=new Worker(v+y)}else{var t=this.$normalizePath(j.nameToUrl("ace/worker/worker",null,"_")),u=this.$worker=new Worker(t),s={};for(var r=0;r<z.length;r++){var q=z[r],p=this.$normalizePath(j.nameToUrl(q,null,"_").replace(/.js$/,""));s[q]=p}}this.$worker.postMessage({init:!0,tlns:s,module:x,classname:w}),this.callbackId=1,this.callbacks={};var a=this;this.$worker.onerror=function(b){throw window.console&&console.log&&console.log(b),b},this.$worker.onmessage=function(e){var d=e.data;switch(d.type){case"log":window.console&&console.log&&console.log(d.data);break;case"event":a._dispatchEvent(d.name,{data:d.data});break;case"call":var f=a.callbacks[d.id];f&&(f(d.data),delete a.callbacks[d.id])}}};(function(){n.implement(this,m),this.$normalizePath=function(b){return b.match(/^\w+:/)||(b=location.protocol+"//"+location.host+(b.charAt(0)=="/"?"":location.pathname.replace(/\/[^\/]*$/,""))+"/"+b.replace(/^[\/]+/,"")),b},this.$guessBasePath=function(){if(j.aceBaseUrl){return j.aceBaseUrl}var a=document.getElementsByTagName("script");for(var t=0;t<a.length;t++){var s=a[t],r=s.getAttribute("data-ace-base");if(r){return r.replace(/\/*$/,"/")}var q=s.src||s.getAttribute("src");if(!q){continue}var p=q.match(/^(?:(.*\/)ace\.js|(.*\/)ace-uncompressed\.js)(?:\?|$)/);if(p){return p[1]||p[2]}}return""},this.terminate=function(){this._dispatchEvent("terminate",{}),this.$worker.terminate()},this.send=function(d,c){this.$worker.postMessage({command:d,args:c})},this.call=function(f,e,q){if(q){var p=this.callbackId++;this.callbacks[p]=q,e.push(p)}this.send(f,e)},this.emit=function(d,c){this.$worker.postMessage({event:d,data:c})}}).call(k.prototype),g.WorkerClient=k}),define("ace/mode/behaviour/cstyle",["require","exports","module","pilot/oop","ace/mode/behaviour"],function(j,g,o){var n=j("pilot/oop"),m=j("ace/mode/behaviour").Behaviour,k=function(){this.add("braces","insertion",function(C,B,A,z,y){if(y=="{"){var x=A.getSelectionRange(),w=z.doc.getTextRange(x);return w!==""?{text:"{"+w+"}",selection:!1}:{text:"{}",selection:[1,1]}}if(y=="}"){var v=A.getCursorPosition(),u=z.doc.getLine(v.row),t=u.substring(v.column,v.column+1);if(t=="}"){var s=z.$findOpeningBracket("}",{column:v.column+1,row:v.row});if(s!==null){return{text:"",selection:[1,1]}}}}else{if(y=="\n"){var v=A.getCursorPosition(),u=z.doc.getLine(v.row),t=u.substring(v.column,v.column+1);if(t=="}"){var r=z.findMatchingBracket({row:v.row,column:v.column+1});if(!r){return !1}var q=this.getNextLineIndent(C,u.substring(0,u.length-1),z.getTabString()),p=this.$getIndent(z.doc.getLine(r.row));return{text:"\n"+q+"\n"+p,selection:[1,q.length,1,q.length]}}}}return !1}),this.add("braces","deletion",function(q,p,w,v,u){var t=v.doc.getTextRange(u);if(!u.isMultiLine()&&t=="{"){var s=v.doc.getLine(u.start.row),r=s.substring(u.end.column,u.end.column+1);if(r=="}"){return u.end.column++,u}}return !1}),this.add("parens","insertion",function(z,y,x,w,v){if(v=="("){var u=x.getSelectionRange(),t=w.doc.getTextRange(u);return t!==""?{text:"("+t+")",selection:!1}:{text:"()",selection:[1,1]}}if(v==")"){var s=x.getCursorPosition(),r=w.doc.getLine(s.row),q=r.substring(s.column,s.column+1);if(q==")"){var p=w.$findOpeningBracket(")",{column:s.column+1,row:s.row});if(p!==null){return{text:"",selection:[1,1]}}}}return !1}),this.add("parens","deletion",function(q,p,w,v,u){var t=v.doc.getTextRange(u);if(!u.isMultiLine()&&t=="("){var s=v.doc.getLine(u.start.row),r=s.substring(u.start.column+1,u.start.column+2);if(r==")"){return u.end.column++,u}}return !1}),this.add("string_dquotes","insertion",function(F,E,D,C,B){if(B=='"'){var A=D.getSelectionRange(),z=C.doc.getTextRange(A);if(z!==""){return{text:'"'+z+'"',selection:!1}}var y=D.getCursorPosition(),x=C.doc.getLine(y.row),w=x.substring(y.column-1,y.column);if(w=="\\"){return !1}var v=C.getTokens(A.start.row,A.start.row)[0].tokens,u=0,t,s=-1;for(var r=0;r<v.length;r++){t=v[r],t.type=="string"?s=-1:s<0&&(s=t.value.indexOf('"'));if(t.value.length+u>A.start.column){break}u+=v[r].value.length}if(!t||s<0&&t.type!=="comment"&&(t.type!=="string"||A.start.column!==t.value.length+u-1&&t.value.lastIndexOf('"')===t.value.length-1)){return{text:'""',selection:[1,1]}}if(t&&t.type==="string"){var q=x.substring(y.column,y.column+1);if(q=='"'){return{text:"",selection:[1,1]}}}}return !1}),this.add("string_dquotes","deletion",function(q,p,w,v,u){var t=v.doc.getTextRange(u);if(!u.isMultiLine()&&t=='"'){var s=v.doc.getLine(u.start.row),r=s.substring(u.start.column+1,u.start.column+2);if(r=='"'){return u.end.column++,u}}return !1})};n.inherits(k,m),g.CstyleBehaviour=k}),define("ace/mode/xml",["require","exports","module","pilot/oop","ace/mode/text","ace/tokenizer","ace/mode/xml_highlight_rules","ace/mode/behaviour/xml"],function(s,r,q){var p=s("pilot/oop"),o=s("ace/mode/text").Mode,n=s("ace/tokenizer").Tokenizer,m=s("ace/mode/xml_highlight_rules").XmlHighlightRules,k=s("ace/mode/behaviour/xml").XmlBehaviour,j=function(){this.$tokenizer=new n((new m).getRules()),this.$behaviour=new k};p.inherits(j,o),function(){this.getNextLineIndent=function(e,d,f){return this.$getIndent(d)}}.call(j.prototype),r.Mode=j}),define("ace/mode/xml_highlight_rules",["require","exports","module","pilot/oop","ace/mode/text_highlight_rules"],function(j,g,o){var n=j("pilot/oop"),m=j("ace/mode/text_highlight_rules").TextHighlightRules,k=function(){this.$rules={start:[{token:"text",regex:"<\\!\\[CDATA\\[",next:"cdata"},{token:"xml_pe",regex:"<\\?.*?\\?>"},{token:"comment",merge:!0,regex:"<\\!--",next:"comment"},{token:"text",regex:"<\\/?",next:"tag"},{token:"text",regex:"\\s+"},{token:"text",regex:"[^<]+"}],tag:[{token:"text",regex:">",next:"start"},{token:"keyword",regex:"[-_a-zA-Z0-9:]+"},{token:"text",regex:"\\s+"},{token:"string",regex:'".*?"'},{token:"string",merge:!0,regex:'["].*$',next:"qqstring"},{token:"string",regex:"'.*?'"},{token:"string",merge:!0,regex:"['].*$",next:"qstring"}],qstring:[{token:"string",regex:".*'",next:"tag"},{token:"string",merge:!0,regex:".+"}],qqstring:[{token:"string",regex:'.*"',next:"tag"},{token:"string",merge:!0,regex:".+"}],cdata:[{token:"text",regex:"\\]\\]>",next:"start"},{token:"text",regex:"\\s+"},{token:"text",regex:"(?:[^\\]]|\\](?!\\]>))+"}],comment:[{token:"comment",regex:".*?-->",next:"start"},{token:"comment",merge:!0,regex:".+"}]}};n.inherits(k,m),g.XmlHighlightRules=k}),define("ace/mode/behaviour/xml",["require","exports","module","pilot/oop","ace/mode/behaviour","ace/mode/behaviour/cstyle"],function(k,j,q){var p=k("pilot/oop"),o=k("ace/mode/behaviour").Behaviour,n=k("ace/mode/behaviour/cstyle").CstyleBehaviour,m=function(){this.inherit(n,["string_dquotes"]),this.add("brackets","insertion",function(D,C,B,A,z){if(z=="<"){var y=B.getSelectionRange(),x=A.doc.getTextRange(y);return x!==""?!1:{text:"<>",selection:[1,1]}}if(z==">"){var w=B.getCursorPosition(),v=A.doc.getLine(w.row),u=v.substring(w.column,w.column+1);if(u==">"){return{text:"",selection:[1,1]}}}else{if(z=="\n"){var w=B.getCursorPosition(),v=A.doc.getLine(w.row),t=v.substring(w.column,w.column+2);if(t=="</"){var s=this.$getIndent(A.doc.getLine(w.row))+A.getTabString(),r=this.$getIndent(A.doc.getLine(w.row));return{text:"\n"+s+"\n"+r,selection:[1,s.length,1,s.length]}}}}return !1})};p.inherits(m,o),j.XmlBehaviour=m}),define("ace/mode/html",["require","exports","module","pilot/oop","ace/mode/text","ace/mode/javascript","ace/mode/css","ace/tokenizer","ace/mode/html_highlight_rules","ace/mode/behaviour/xml"],function(w,v,u){var t=w("pilot/oop"),s=w("ace/mode/text").Mode,r=w("ace/mode/javascript").Mode,q=w("ace/mode/css").Mode,p=w("ace/tokenizer").Tokenizer,o=w("ace/mode/html_highlight_rules").HtmlHighlightRules,n=w("ace/mode/behaviour/xml").XmlBehaviour,m=function(){var b=new o;this.$tokenizer=new p(b.getRules()),this.$behaviour=new n,this.$embeds=b.getEmbeds(),this.createModeDelegates({"js-":r,"css-":q})};t.inherits(m,s),function(){this.toggleCommentLines=function(f,e,j,g){return 0},this.getNextLineIndent=function(e,d,f){return this.$getIndent(d)},this.checkOutdent=function(e,d,f){return !1}}.call(m.prototype),v.Mode=m}),define("ace/mode/css",["require","exports","module","pilot/oop","ace/mode/text","ace/tokenizer","ace/mode/css_highlight_rules","ace/mode/matching_brace_outdent","ace/worker/worker_client"],function(u,t,s){var r=u("pilot/oop"),q=u("ace/mode/text").Mode,p=u("ace/tokenizer").Tokenizer,o=u("ace/mode/css_highlight_rules").CssHighlightRules,n=u("ace/mode/matching_brace_outdent").MatchingBraceOutdent,m=u("ace/worker/worker_client").WorkerClient,k=function(){this.$tokenizer=new p((new o).getRules()),this.$outdent=new n};r.inherits(k,q),function(){this.getNextLineIndent=function(j,g,y){var x=this.$getIndent(g),w=this.$tokenizer.getLineTokens(g,j).tokens;if(w.length&&w[w.length-1].type=="comment"){return x}var v=g.match(/^.*\{\s*$/);return v&&(x+=y),x},this.checkOutdent=function(e,d,f){return this.$outdent.checkOutdent(d,f)},this.autoOutdent=function(e,d,f){this.$outdent.autoOutdent(d,f)},this.createWorker=function(e){var d=e.getDocument(),f=new m(["ace","pilot"],"worker-css.js","ace/mode/css_worker","Worker");f.call("setValue",[d.getValue()]),d.on("change",function(b){b.range={start:b.data.range.start,end:b.data.range.end},f.emit("change",b)}),f.on("csslint",function(a){var g=[];a.data.forEach(function(b){g.push({row:b.line-1,column:b.col-1,text:b.message,type:b.type,lint:b})}),e.setAnnotations(g)})}}.call(k.prototype),t.Mode=k}),define("ace/mode/css_highlight_rules",["require","exports","module","pilot/oop","pilot/lang","ace/mode/text_highlight_rules"],function(k,j,q){var p=k("pilot/oop"),o=k("pilot/lang"),n=k("ace/mode/text_highlight_rules").TextHighlightRules,m=function(){function x(g){var f=[],E=g.split("");for(var D=0;D<E.length;D++){f.push("[",E[D].toLowerCase(),E[D].toUpperCase(),"]")}return f.join("")}var C=o.arrayToMap("-moz-box-sizing|-webkit-box-sizing|appearance|azimuth|background-attachment|background-color|background-image|background-position|background-repeat|background|border-bottom-color|border-bottom-style|border-bottom-width|border-bottom|border-collapse|border-color|border-left-color|border-left-style|border-left-width|border-left|border-right-color|border-right-style|border-right-width|border-right|border-spacing|border-style|border-top-color|border-top-style|border-top-width|border-top|border-width|border|bottom|box-sizing|caption-side|clear|clip|color|content|counter-increment|counter-reset|cue-after|cue-before|cue|cursor|direction|display|elevation|empty-cells|float|font-family|font-size-adjust|font-size|font-stretch|font-style|font-variant|font-weight|font|height|left|letter-spacing|line-height|list-style-image|list-style-position|list-style-type|list-style|margin-bottom|margin-left|margin-right|margin-top|marker-offset|margin|marks|max-height|max-width|min-height|min-width|-moz-border-radius|opacity|orphans|outline-color|outline-style|outline-width|outline|overflow|overflow-x|overflow-y|padding-bottom|padding-left|padding-right|padding-top|padding|page-break-after|page-break-before|page-break-inside|page|pause-after|pause-before|pause|pitch-range|pitch|play-during|position|quotes|richness|right|size|speak-header|speak-numeral|speak-punctuation|speech-rate|speak|stress|table-layout|text-align|text-decoration|text-indent|text-shadow|text-transform|top|unicode-bidi|vertical-align|visibility|voice-family|volume|white-space|widows|width|word-spacing|z-index".split("|")),B=o.arrayToMap("rgb|rgba|url|attr|counter|counters".split("|")),A=o.arrayToMap("absolute|all-scroll|always|armenian|auto|baseline|below|bidi-override|block|bold|bolder|border-box|both|bottom|break-all|break-word|capitalize|center|char|circle|cjk-ideographic|col-resize|collapse|content-box|crosshair|dashed|decimal-leading-zero|decimal|default|disabled|disc|distribute-all-lines|distribute-letter|distribute-space|distribute|dotted|double|e-resize|ellipsis|fixed|georgian|groove|hand|hebrew|help|hidden|hiragana-iroha|hiragana|horizontal|ideograph-alpha|ideograph-numeric|ideograph-parenthesis|ideograph-space|inactive|inherit|inline-block|inline|inset|inside|inter-ideograph|inter-word|italic|justify|katakana-iroha|katakana|keep-all|left|lighter|line-edge|line-through|line|list-item|loose|lower-alpha|lower-greek|lower-latin|lower-roman|lowercase|lr-tb|ltr|medium|middle|move|n-resize|ne-resize|newspaper|no-drop|no-repeat|nw-resize|none|normal|not-allowed|nowrap|oblique|outset|outside|overline|pointer|progress|relative|repeat-x|repeat-y|repeat|right|ridge|row-resize|rtl|s-resize|scroll|se-resize|separate|small-caps|solid|square|static|strict|super|sw-resize|table-footer-group|table-header-group|tb-rl|text-bottom|text-top|text|thick|thin|top|transparent|underline|upper-alpha|upper-latin|upper-roman|uppercase|vertical-ideographic|vertical-text|visible|w-resize|wait|whitespace|zero".split("|")),z=o.arrayToMap("aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow".split("|")),y="\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))",w=[{token:"comment",merge:!0,regex:"\\/\\*",next:"ruleset_comment"},{token:"string",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]'},{token:"string",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"constant.numeric",regex:y+x("em")},{token:"constant.numeric",regex:y+x("ex")},{token:"constant.numeric",regex:y+x("px")},{token:"constant.numeric",regex:y+x("cm")},{token:"constant.numeric",regex:y+x("mm")},{token:"constant.numeric",regex:y+x("in")},{token:"constant.numeric",regex:y+x("pt")},{token:"constant.numeric",regex:y+x("pc")},{token:"constant.numeric",regex:y+x("deg")},{token:"constant.numeric",regex:y+x("rad")},{token:"constant.numeric",regex:y+x("grad")},{token:"constant.numeric",regex:y+x("ms")},{token:"constant.numeric",regex:y+x("s")},{token:"constant.numeric",regex:y+x("hz")},{token:"constant.numeric",regex:y+x("khz")},{token:"constant.numeric",regex:y+"%"},{token:"constant.numeric",regex:y},{token:"constant.numeric",regex:"#[a-fA-F0-9]{6}"},{token:"constant.numeric",regex:"#[a-fA-F0-9]{3}"},{token:function(a){return C.hasOwnProperty(a.toLowerCase())?"support.type":B.hasOwnProperty(a.toLowerCase())?"support.function":A.hasOwnProperty(a.toLowerCase())?"support.constant":z.hasOwnProperty(a.toLowerCase())?"support.constant.color":"text"},regex:"\\-?[a-zA-Z_][a-zA-Z0-9_\\-]*"}],v=o.copyArray(w);v.unshift({token:"rparen",regex:"\\}",next:"start"});var u=o.copyArray(w);u.unshift({token:"rparen",regex:"\\}",next:"media"});var t=[{token:"comment",merge:!0,regex:".+"}],s=o.copyArray(t);s.unshift({token:"comment",regex:".*?\\*\\/",next:"start"});var r=o.copyArray(t);r.unshift({token:"comment",regex:".*?\\*\\/",next:"media"});var e=o.copyArray(t);e.unshift({token:"comment",regex:".*?\\*\\/",next:"ruleset"}),this.$rules={start:[{token:"comment",merge:!0,regex:"\\/\\*",next:"comment"},{token:"lparen",regex:"\\{",next:"ruleset"},{token:"string",regex:"@media.*?{",next:"media"},{token:"keyword",regex:"#[a-zA-Z0-9-_]+"},{token:"variable",regex:"\\.[a-zA-Z0-9-_]+"},{token:"string",regex:":[a-zA-Z0-9-_]+"},{token:"constant",regex:"[a-zA-Z0-9-_]+"}],media:[{token:"comment",merge:!0,regex:"\\/\\*",next:"media_comment"},{token:"lparen",regex:"\\{",next:"media_ruleset"},{token:"string",regex:"\\}",next:"start"},{token:"keyword",regex:"#[a-zA-Z0-9-_]+"},{token:"variable",regex:"\\.[a-zA-Z0-9-_]+"},{token:"string",regex:":[a-zA-Z0-9-_]+"},{token:"constant",regex:"[a-zA-Z0-9-_]+"}],comment:s,ruleset:v,ruleset_comment:e,media_ruleset:u,media_comment:r}};p.inherits(m,n),j.CssHighlightRules=m}),define("ace/mode/html_highlight_rules",["require","exports","module","pilot/oop","ace/mode/css_highlight_rules","ace/mode/javascript_highlight_rules","ace/mode/text_highlight_rules"],function(k,j,r){var q=k("pilot/oop"),p=k("ace/mode/css_highlight_rules").CssHighlightRules,o=k("ace/mode/javascript_highlight_rules").JavaScriptHighlightRules,n=k("ace/mode/text_highlight_rules").TextHighlightRules,m=function(){function e(b){return[{token:"string",regex:'".*?"'},{token:"string",merge:!0,regex:'["].*$',next:b+"-qqstring"},{token:"string",regex:"'.*?'"},{token:"string",merge:!0,regex:"['].*$",next:b+"-qstring"}]}function d(g,c){return[{token:"string",merge:!0,regex:".*"+g,next:c},{token:"string",merge:!0,regex:".+"}]}function f(g,b,a){g[b]=[{token:"text",regex:"\\s+"},{token:"meta.tag",regex:"[-_a-zA-Z0-9:]+",next:b+"-attribute-list"},{token:"empty",regex:"",next:b+"-attribute-list"}],g[b+"-qstring"]=d("'",b),g[b+"-qqstring"]=d('"',b),g[b+"-attribute-list"]=[{token:"text",regex:">",next:a},{token:"entity.other.attribute-name",regex:"[-_a-zA-Z0-9:]+"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"text",regex:"\\s+"}].concat(e(b))}this.$rules={start:[{token:"text",merge:!0,regex:"<\\!\\[CDATA\\[",next:"cdata"},{token:"xml_pe",regex:"<\\?.*?\\?>"},{token:"comment",merge:!0,regex:"<\\!--",next:"comment"},{token:"text",regex:"<(?=s*script)",next:"script"},{token:"text",regex:"<(?=s*style)",next:"css"},{token:"text",regex:"<\\/?",next:"tag"},{token:"text",regex:"\\s+"},{token:"text",regex:"[^<]+"}],cdata:[{token:"text",regex:"\\]\\]>",next:"start"},{token:"text",merge:!0,regex:"\\s+"},{token:"text",merge:!0,regex:".+"}],comment:[{token:"comment",regex:".*?-->",next:"start"},{token:"comment",merge:!0,regex:".+"}]},f(this.$rules,"tag","start"),f(this.$rules,"css","css-start"),f(this.$rules,"script","js-start"),this.embedRules(o,"js-",[{token:"comment",regex:"\\/\\/.*(?=<\\/script>)",next:"tag"},{token:"text",regex:"<\\/(?=script)",next:"tag"}]),this.embedRules(p,"css-",[{token:"text",regex:"<\\/(?=style)",next:"tag"}])};q.inherits(m,n),j.HtmlHighlightRules=m}),define("ace/mode/markdown_highlight_rules",["require","exports","module","pilot/oop","ace/mode/text_highlight_rules","ace/mode/javascript_highlight_rules","ace/mode/xml_highlight_rules","ace/mode/html_highlight_rules","ace/mode/css_highlight_rules"],function(w,v,u){function n(d,c){return{token:"support.function",regex:"^```"+d+"\\s*$",next:c+"start"}}var t=w("pilot/oop"),s=w("ace/mode/text_highlight_rules").TextHighlightRules,r=w("ace/mode/javascript_highlight_rules").JavaScriptHighlightRules,q=w("ace/mode/xml_highlight_rules").XmlHighlightRules,p=w("ace/mode/html_highlight_rules").HtmlHighlightRules,o=w("ace/mode/css_highlight_rules").CssHighlightRules,m=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{token:"support.function",regex:"(`+)([^\\r]*?[^`])(\\1)"},{token:"support.function",regex:"^[ ]{4}.+"},{token:"markup.heading.1",regex:"^=+(?=\\s*$)"},{token:"markup.heading.1",regex:"^\\-+(?=\\s*$)"},{token:function(b){return"markup.heading."+b.length},regex:"^#{1,6}"},n("javascript","js-"),n("xml","xml-"),n("html","html-"),n("css","css-"),{token:"support.function",regex:"^```[a-zA-Z]+\\s*$",next:"githubblock"},{token:"string",regex:"^>[ ].+$",next:"blockquote"},{token:["text","constant","text","url","string","text"],regex:'^([ ]{0,3}\\[)([^\\]]+)(\\]:\\s*)([^ ]+)(\\s*(?:["][^"]+["])?\\s*)$'},{token:["text","string","text","constant","text"],regex:"(\\[)((?:[[^\\]]*\\]|[^\\[\\]])*)(\\][ ]?(?:\\n[ ]*)?\\[)(.*?)(\\])"},{token:["text","string","text","markup.underline","string","text"],regex:'(\\[)(\\[[^\\]]*\\]|[^\\[\\]]*)(\\]\\([ \\t]*)(<?(?:(?:[^\\(]*?\\([^\\)]*?\\)\\S*?)|(?:.*?))>?)((?:[ \t]*"(?:.*?)"[ \\t]*)?)(\\))'},{token:"constant",regex:"^[ ]{0,2}(?:[ ]?\\*[ ]?){3,}\\s*$"},{token:"constant",regex:"^[ ]{0,2}(?:[ ]?\\-[ ]?){3,}\\s*$"},{token:"constant",regex:"^[ ]{0,2}(?:[ ]?\\_[ ]?){3,}\\s*$"},{token:"markup.list",regex:"^\\s{0,3}(?:[*+-]|\\d+\\.)\\s+",next:"listblock"},{token:"string",regex:"([*]{2}|[_]{2}(?=\\S))([^\\r]*?\\S[*_]*)(\\1)"},{token:"string",regex:"([*]|[_](?=\\S))([^\\r]*?\\S[*_]*)(\\1)"},{token:["text","url","text"],regex:"(<)((?:https?|ftp|dict):[^'\">\\s]+|(?:mailto:)?[-.\\w]+\\@[-a-z0-9]+(?:\\.[-a-z0-9]+)*\\.[a-z]+)(>)"},{token:"text",regex:"[^\\*_%$`\\[#<>]+"}],listblock:[{token:"empty_line",regex:"^$",next:"start"},{token:"markup.list",regex:".+"}],blockquote:[{token:"empty_line",regex:"^\\s*$",next:"start"},{token:"string",regex:".+"}],githubblock:[{token:"support.function",regex:"^```",next:"start"},{token:"support.function",regex:".+"}]},this.embedRules(r,"js-",[{token:"support.function",regex:"^```",next:"start"}]),this.embedRules(p,"html-",[{token:"support.function",regex:"^```",next:"start"}]),this.embedRules(o,"css-",[{token:"support.function",regex:"^```",next:"start"}]),this.embedRules(q,"xml-",[{token:"support.function",regex:"^```",next:"start"}])};t.inherits(m,s),v.MarkdownHighlightRules=m});define("ace/mode/php",["require","exports","module","pilot/oop","ace/mode/text","ace/tokenizer","ace/mode/php_highlight_rules","ace/mode/matching_brace_outdent","ace/range","ace/mode/behaviour/cstyle"],function(w,v,u){var t=w("pilot/oop"),s=w("ace/mode/text").Mode,r=w("ace/tokenizer").Tokenizer,q=w("ace/mode/php_highlight_rules").PhpHighlightRules,p=w("ace/mode/matching_brace_outdent").MatchingBraceOutdent,o=w("ace/range").Range,n=w("ace/mode/behaviour/cstyle").CstyleBehaviour,m=function(){this.$tokenizer=new r((new q).getRules()),this.$outdent=new p,this.$behaviour=new n};t.inherits(m,s),function(){this.toggleCommentLines=function(H,G,F,E){var D=!0,C=[],B=/^(\s*)#/;for(var A=F;A<=E;A++){if(!B.test(G.getLine(A))){D=!1;break}}if(D){var z=new o(0,0,0,0);for(var A=F;A<=E;A++){var y=G.getLine(A),x=y.match(B);z.start.row=A,z.end.row=A,z.end.column=x[0].length,G.replace(z,x[1])}}else{G.indentRows(F,E,"#")}},this.getNextLineIndent=function(k,j,C){var B=this.$getIndent(j),A=this.$tokenizer.getLineTokens(j,k),z=A.tokens,y=A.state;if(z.length&&z[z.length-1].type=="comment"){return B}if(k=="start"){var x=j.match(/^.*[\{\(\[\:]\s*$/);x&&(B+=C)}return B},this.checkOutdent=function(e,d,f){return this.$outdent.checkOutdent(d,f)},this.autoOutdent=function(e,d,f){this.$outdent.autoOutdent(d,f)}}.call(m.prototype),v.Mode=m}),define("ace/mode/php_highlight_rules",["require","exports","module","pilot/oop","pilot/lang","ace/mode/doc_comment_highlight_rules","ace/mode/text_highlight_rules"],function(k,j,r){var q=k("pilot/oop"),p=k("pilot/lang"),o=k("ace/mode/doc_comment_highlight_rules").DocCommentHighlightRules,n=k("ace/mode/text_highlight_rules").TextHighlightRules,m=function(){var f=p.arrayToMap("abs|acos|acosh|addcslashes|addslashes|aggregate|aggregate_info|aggregate_methods|aggregate_methods_by_list|aggregate_methods_by_regexp|aggregate_properties|aggregate_properties_by_list|aggregate_properties_by_regexp|aggregation_info|amqpconnection|amqpexchange|amqpqueue|apache_child_terminate|apache_get_modules|apache_get_version|apache_getenv|apache_lookup_uri|apache_note|apache_request_headers|apache_reset_timeout|apache_response_headers|apache_setenv|apc_add|apc_bin_dump|apc_bin_dumpfile|apc_bin_load|apc_bin_loadfile|apc_cache_info|apc_cas|apc_clear_cache|apc_compile_file|apc_dec|apc_define_constants|apc_delete|apc_delete_file|apc_exists|apc_fetch|apc_inc|apc_load_constants|apc_sma_info|apc_store|apciterator|apd_breakpoint|apd_callstack|apd_clunk|apd_continue|apd_croak|apd_dump_function_table|apd_dump_persistent_resources|apd_dump_regular_resources|apd_echo|apd_get_active_symbols|apd_set_pprof_trace|apd_set_session|apd_set_session_trace|apd_set_session_trace_socket|appenditerator|array|array_change_key_case|array_chunk|array_combine|array_count_values|array_diff|array_diff_assoc|array_diff_key|array_diff_uassoc|array_diff_ukey|array_fill|array_fill_keys|array_filter|array_flip|array_intersect|array_intersect_assoc|array_intersect_key|array_intersect_uassoc|array_intersect_ukey|array_key_exists|array_keys|array_map|array_merge|array_merge_recursive|array_multisort|array_pad|array_pop|array_product|array_push|array_rand|array_reduce|array_replace|array_replace_recursive|array_reverse|array_search|array_shift|array_slice|array_splice|array_sum|array_udiff|array_udiff_assoc|array_udiff_uassoc|array_uintersect|array_uintersect_assoc|array_uintersect_uassoc|array_unique|array_unshift|array_values|array_walk|array_walk_recursive|arrayaccess|arrayiterator|arrayobject|arsort|asin|asinh|asort|assert|assert_options|atan|atan2|atanh|audioproperties|badfunctioncallexception|badmethodcallexception|base64_decode|base64_encode|base_convert|basename|bbcode_add_element|bbcode_add_smiley|bbcode_create|bbcode_destroy|bbcode_parse|bbcode_set_arg_parser|bbcode_set_flags|bcadd|bccomp|bcdiv|bcmod|bcmul|bcompiler_load|bcompiler_load_exe|bcompiler_parse_class|bcompiler_read|bcompiler_write_class|bcompiler_write_constant|bcompiler_write_exe_footer|bcompiler_write_file|bcompiler_write_footer|bcompiler_write_function|bcompiler_write_functions_from_file|bcompiler_write_header|bcompiler_write_included_filename|bcpow|bcpowmod|bcscale|bcsqrt|bcsub|bin2hex|bind_textdomain_codeset|bindec|bindtextdomain|bson_decode|bson_encode|bumpValue|bzclose|bzcompress|bzdecompress|bzerrno|bzerror|bzerrstr|bzflush|bzopen|bzread|bzwrite|cachingiterator|cairo|cairo_create|cairo_font_face_get_type|cairo_font_face_status|cairo_font_options_create|cairo_font_options_equal|cairo_font_options_get_antialias|cairo_font_options_get_hint_metrics|cairo_font_options_get_hint_style|cairo_font_options_get_subpixel_order|cairo_font_options_hash|cairo_font_options_merge|cairo_font_options_set_antialias|cairo_font_options_set_hint_metrics|cairo_font_options_set_hint_style|cairo_font_options_set_subpixel_order|cairo_font_options_status|cairo_format_stride_for_width|cairo_image_surface_create|cairo_image_surface_create_for_data|cairo_image_surface_create_from_png|cairo_image_surface_get_data|cairo_image_surface_get_format|cairo_image_surface_get_height|cairo_image_surface_get_stride|cairo_image_surface_get_width|cairo_matrix_create_scale|cairo_matrix_create_translate|cairo_matrix_invert|cairo_matrix_multiply|cairo_matrix_rotate|cairo_matrix_transform_distance|cairo_matrix_transform_point|cairo_matrix_translate|cairo_pattern_add_color_stop_rgb|cairo_pattern_add_color_stop_rgba|cairo_pattern_create_for_surface|cairo_pattern_create_linear|cairo_pattern_create_radial|cairo_pattern_create_rgb|cairo_pattern_create_rgba|cairo_pattern_get_color_stop_count|cairo_pattern_get_color_stop_rgba|cairo_pattern_get_extend|cairo_pattern_get_filter|cairo_pattern_get_linear_points|cairo_pattern_get_matrix|cairo_pattern_get_radial_circles|cairo_pattern_get_rgba|cairo_pattern_get_surface|cairo_pattern_get_type|cairo_pattern_set_extend|cairo_pattern_set_filter|cairo_pattern_set_matrix|cairo_pattern_status|cairo_pdf_surface_create|cairo_pdf_surface_set_size|cairo_ps_get_levels|cairo_ps_level_to_string|cairo_ps_surface_create|cairo_ps_surface_dsc_begin_page_setup|cairo_ps_surface_dsc_begin_setup|cairo_ps_surface_dsc_comment|cairo_ps_surface_get_eps|cairo_ps_surface_restrict_to_level|cairo_ps_surface_set_eps|cairo_ps_surface_set_size|cairo_scaled_font_create|cairo_scaled_font_extents|cairo_scaled_font_get_ctm|cairo_scaled_font_get_font_face|cairo_scaled_font_get_font_matrix|cairo_scaled_font_get_font_options|cairo_scaled_font_get_scale_matrix|cairo_scaled_font_get_type|cairo_scaled_font_glyph_extents|cairo_scaled_font_status|cairo_scaled_font_text_extents|cairo_surface_copy_page|cairo_surface_create_similar|cairo_surface_finish|cairo_surface_flush|cairo_surface_get_content|cairo_surface_get_device_offset|cairo_surface_get_font_options|cairo_surface_get_type|cairo_surface_mark_dirty|cairo_surface_mark_dirty_rectangle|cairo_surface_set_device_offset|cairo_surface_set_fallback_resolution|cairo_surface_show_page|cairo_surface_status|cairo_surface_write_to_png|cairo_svg_surface_create|cairo_svg_surface_restrict_to_version|cairo_svg_version_to_string|cairoantialias|cairocontent|cairocontext|cairoexception|cairoextend|cairofillrule|cairofilter|cairofontface|cairofontoptions|cairofontslant|cairofonttype|cairofontweight|cairoformat|cairogradientpattern|cairohintmetrics|cairohintstyle|cairoimagesurface|cairolineargradient|cairolinecap|cairolinejoin|cairomatrix|cairooperator|cairopath|cairopattern|cairopatterntype|cairopdfsurface|cairopslevel|cairopssurface|cairoradialgradient|cairoscaledfont|cairosolidpattern|cairostatus|cairosubpixelorder|cairosurface|cairosurfacepattern|cairosurfacetype|cairosvgsurface|cairosvgversion|cairotoyfontface|cal_days_in_month|cal_from_jd|cal_info|cal_to_jd|calcul_hmac|calculhmac|call_user_func|call_user_func_array|call_user_method|call_user_method_array|callbackfilteriterator|ceil|chdb|chdb_create|chdir|checkdate|checkdnsrr|chgrp|chmod|chop|chown|chr|chroot|chunk_split|class_alias|class_exists|class_implements|class_parents|classkit_import|classkit_method_add|classkit_method_copy|classkit_method_redefine|classkit_method_remove|classkit_method_rename|clearstatcache|clone|closedir|closelog|collator|com|com_addref|com_create_guid|com_event_sink|com_get|com_get_active_object|com_invoke|com_isenum|com_load|com_load_typelib|com_message_pump|com_print_typeinfo|com_propget|com_propput|com_propset|com_release|com_set|compact|connection_aborted|connection_status|connection_timeout|constant|construct|construct|construct|convert_cyr_string|convert_uudecode|convert_uuencode|copy|cos|cosh|count|count_chars|countable|counter_bump|counter_bump_value|counter_create|counter_get|counter_get_meta|counter_get_named|counter_get_value|counter_reset|counter_reset_value|crack_check|crack_closedict|crack_getlastmessage|crack_opendict|crc32|create_function|crypt|ctype_alnum|ctype_alpha|ctype_cntrl|ctype_digit|ctype_graph|ctype_lower|ctype_print|ctype_punct|ctype_space|ctype_upper|ctype_xdigit|cubrid_affected_rows|cubrid_bind|cubrid_client_encoding|cubrid_close|cubrid_close_prepare|cubrid_close_request|cubrid_col_get|cubrid_col_size|cubrid_column_names|cubrid_column_types|cubrid_commit|cubrid_connect|cubrid_connect_with_url|cubrid_current_oid|cubrid_data_seek|cubrid_db_name|cubrid_disconnect|cubrid_drop|cubrid_errno|cubrid_error|cubrid_error_code|cubrid_error_code_facility|cubrid_error_msg|cubrid_execute|cubrid_fetch|cubrid_fetch_array|cubrid_fetch_assoc|cubrid_fetch_field|cubrid_fetch_lengths|cubrid_fetch_object|cubrid_fetch_row|cubrid_field_flags|cubrid_field_len|cubrid_field_name|cubrid_field_seek|cubrid_field_table|cubrid_field_type|cubrid_free_result|cubrid_get|cubrid_get_autocommit|cubrid_get_charset|cubrid_get_class_name|cubrid_get_client_info|cubrid_get_db_parameter|cubrid_get_server_info|cubrid_insert_id|cubrid_is_instance|cubrid_list_dbs|cubrid_load_from_glo|cubrid_lob_close|cubrid_lob_export|cubrid_lob_get|cubrid_lob_send|cubrid_lob_size|cubrid_lock_read|cubrid_lock_write|cubrid_move_cursor|cubrid_new_glo|cubrid_next_result|cubrid_num_cols|cubrid_num_fields|cubrid_num_rows|cubrid_ping|cubrid_prepare|cubrid_put|cubrid_query|cubrid_real_escape_string|cubrid_result|cubrid_rollback|cubrid_save_to_glo|cubrid_schema|cubrid_send_glo|cubrid_seq_drop|cubrid_seq_insert|cubrid_seq_put|cubrid_set_add|cubrid_set_autocommit|cubrid_set_db_parameter|cubrid_set_drop|cubrid_unbuffered_query|cubrid_version|curl_close|curl_copy_handle|curl_errno|curl_error|curl_exec|curl_getinfo|curl_init|curl_multi_add_handle|curl_multi_close|curl_multi_exec|curl_multi_getcontent|curl_multi_info_read|curl_multi_init|curl_multi_remove_handle|curl_multi_select|curl_setopt|curl_setopt_array|curl_version|current|cyrus_authenticate|cyrus_bind|cyrus_close|cyrus_connect|cyrus_query|cyrus_unbind|date|date_add|date_create|date_create_from_format|date_date_set|date_default_timezone_get|date_default_timezone_set|date_diff|date_format|date_get_last_errors|date_interval_create_from_date_string|date_interval_format|date_isodate_set|date_modify|date_offset_get|date_parse|date_parse_from_format|date_sub|date_sun_info|date_sunrise|date_sunset|date_time_set|date_timestamp_get|date_timestamp_set|date_timezone_get|date_timezone_set|dateinterval|dateperiod|datetime|datetimezone|db2_autocommit|db2_bind_param|db2_client_info|db2_close|db2_column_privileges|db2_columns|db2_commit|db2_conn_error|db2_conn_errormsg|db2_connect|db2_cursor_type|db2_escape_string|db2_exec|db2_execute|db2_fetch_array|db2_fetch_assoc|db2_fetch_both|db2_fetch_object|db2_fetch_row|db2_field_display_size|db2_field_name|db2_field_num|db2_field_precision|db2_field_scale|db2_field_type|db2_field_width|db2_foreign_keys|db2_free_result|db2_free_stmt|db2_get_option|db2_last_insert_id|db2_lob_read|db2_next_result|db2_num_fields|db2_num_rows|db2_pclose|db2_pconnect|db2_prepare|db2_primary_keys|db2_procedure_columns|db2_procedures|db2_result|db2_rollback|db2_server_info|db2_set_option|db2_special_columns|db2_statistics|db2_stmt_error|db2_stmt_errormsg|db2_table_privileges|db2_tables|dba_close|dba_delete|dba_exists|dba_fetch|dba_firstkey|dba_handlers|dba_insert|dba_key_split|dba_list|dba_nextkey|dba_open|dba_optimize|dba_popen|dba_replace|dba_sync|dbase_add_record|dbase_close|dbase_create|dbase_delete_record|dbase_get_header_info|dbase_get_record|dbase_get_record_with_names|dbase_numfields|dbase_numrecords|dbase_open|dbase_pack|dbase_replace_record|dbplus_add|dbplus_aql|dbplus_chdir|dbplus_close|dbplus_curr|dbplus_errcode|dbplus_errno|dbplus_find|dbplus_first|dbplus_flush|dbplus_freealllocks|dbplus_freelock|dbplus_freerlocks|dbplus_getlock|dbplus_getunique|dbplus_info|dbplus_last|dbplus_lockrel|dbplus_next|dbplus_open|dbplus_prev|dbplus_rchperm|dbplus_rcreate|dbplus_rcrtexact|dbplus_rcrtlike|dbplus_resolve|dbplus_restorepos|dbplus_rkeys|dbplus_ropen|dbplus_rquery|dbplus_rrename|dbplus_rsecindex|dbplus_runlink|dbplus_rzap|dbplus_savepos|dbplus_setindex|dbplus_setindexbynumber|dbplus_sql|dbplus_tcl|dbplus_tremove|dbplus_undo|dbplus_undoprepare|dbplus_unlockrel|dbplus_unselect|dbplus_update|dbplus_xlockrel|dbplus_xunlockrel|dbx_close|dbx_compare|dbx_connect|dbx_error|dbx_escape_string|dbx_fetch_row|dbx_query|dbx_sort|dcgettext|dcngettext|deaggregate|debug_backtrace|debug_print_backtrace|debug_zval_dump|decbin|dechex|decoct|define|define_syslog_variables|defined|deg2rad|delete|dgettext|die|dio_close|dio_fcntl|dio_open|dio_read|dio_seek|dio_stat|dio_tcsetattr|dio_truncate|dio_write|dir|directoryiterator|dirname|disk_free_space|disk_total_space|diskfreespace|dl|dngettext|dns_check_record|dns_get_mx|dns_get_record|dom_import_simplexml|domainexception|domattr|domattribute_name|domattribute_set_value|domattribute_specified|domattribute_value|domcharacterdata|domcomment|domdocument|domdocument_add_root|domdocument_create_attribute|domdocument_create_cdata_section|domdocument_create_comment|domdocument_create_element|domdocument_create_element_ns|domdocument_create_entity_reference|domdocument_create_processing_instruction|domdocument_create_text_node|domdocument_doctype|domdocument_document_element|domdocument_dump_file|domdocument_dump_mem|domdocument_get_element_by_id|domdocument_get_elements_by_tagname|domdocument_html_dump_mem|domdocument_xinclude|domdocumentfragment|domdocumenttype|domdocumenttype_entities|domdocumenttype_internal_subset|domdocumenttype_name|domdocumenttype_notations|domdocumenttype_public_id|domdocumenttype_system_id|domelement|domelement_get_attribute|domelement_get_attribute_node|domelement_get_elements_by_tagname|domelement_has_attribute|domelement_remove_attribute|domelement_set_attribute|domelement_set_attribute_node|domelement_tagname|domentity|domentityreference|domexception|domimplementation|domnamednodemap|domnode|domnode_add_namespace|domnode_append_child|domnode_append_sibling|domnode_attributes|domnode_child_nodes|domnode_clone_node|domnode_dump_node|domnode_first_child|domnode_get_content|domnode_has_attributes|domnode_has_child_nodes|domnode_insert_before|domnode_is_blank_node|domnode_last_child|domnode_next_sibling|domnode_node_name|domnode_node_type|domnode_node_value|domnode_owner_document|domnode_parent_node|domnode_prefix|domnode_previous_sibling|domnode_remove_child|domnode_replace_child|domnode_replace_node|domnode_set_content|domnode_set_name|domnode_set_namespace|domnode_unlink_node|domnodelist|domnotation|domprocessinginstruction|domprocessinginstruction_data|domprocessinginstruction_target|domtext|domxml_new_doc|domxml_open_file|domxml_open_mem|domxml_version|domxml_xmltree|domxml_xslt_stylesheet|domxml_xslt_stylesheet_doc|domxml_xslt_stylesheet_file|domxml_xslt_version|domxpath|domxsltstylesheet_process|domxsltstylesheet_result_dump_file|domxsltstylesheet_result_dump_mem|dotnet|dotnet_load|doubleval|each|easter_date|easter_days|echo|empty|emptyiterator|enchant_broker_describe|enchant_broker_dict_exists|enchant_broker_free|enchant_broker_free_dict|enchant_broker_get_error|enchant_broker_init|enchant_broker_list_dicts|enchant_broker_request_dict|enchant_broker_request_pwl_dict|enchant_broker_set_ordering|enchant_dict_add_to_personal|enchant_dict_add_to_session|enchant_dict_check|enchant_dict_describe|enchant_dict_get_error|enchant_dict_is_in_session|enchant_dict_quick_check|enchant_dict_store_replacement|enchant_dict_suggest|end|ereg|ereg_replace|eregi|eregi_replace|error_get_last|error_log|error_reporting|errorexception|escapeshellarg|escapeshellcmd|eval|event_add|event_base_free|event_base_loop|event_base_loopbreak|event_base_loopexit|event_base_new|event_base_priority_init|event_base_set|event_buffer_base_set|event_buffer_disable|event_buffer_enable|event_buffer_fd_set|event_buffer_free|event_buffer_new|event_buffer_priority_set|event_buffer_read|event_buffer_set_callback|event_buffer_timeout_set|event_buffer_watermark_set|event_buffer_write|event_del|event_free|event_new|event_set|exception|exec|exif_imagetype|exif_read_data|exif_tagname|exif_thumbnail|exit|exp|expect_expectl|expect_popen|explode|expm1|export|export|extension_loaded|extract|ezmlm_hash|fam_cancel_monitor|fam_close|fam_monitor_collection|fam_monitor_directory|fam_monitor_file|fam_next_event|fam_open|fam_pending|fam_resume_monitor|fam_suspend_monitor|fbsql_affected_rows|fbsql_autocommit|fbsql_blob_size|fbsql_change_user|fbsql_clob_size|fbsql_close|fbsql_commit|fbsql_connect|fbsql_create_blob|fbsql_create_clob|fbsql_create_db|fbsql_data_seek|fbsql_database|fbsql_database_password|fbsql_db_query|fbsql_db_status|fbsql_drop_db|fbsql_errno|fbsql_error|fbsql_fetch_array|fbsql_fetch_assoc|fbsql_fetch_field|fbsql_fetch_lengths|fbsql_fetch_object|fbsql_fetch_row|fbsql_field_flags|fbsql_field_len|fbsql_field_name|fbsql_field_seek|fbsql_field_table|fbsql_field_type|fbsql_free_result|fbsql_get_autostart_info|fbsql_hostname|fbsql_insert_id|fbsql_list_dbs|fbsql_list_fields|fbsql_list_tables|fbsql_next_result|fbsql_num_fields|fbsql_num_rows|fbsql_password|fbsql_pconnect|fbsql_query|fbsql_read_blob|fbsql_read_clob|fbsql_result|fbsql_rollback|fbsql_rows_fetched|fbsql_select_db|fbsql_set_characterset|fbsql_set_lob_mode|fbsql_set_password|fbsql_set_transaction|fbsql_start_db|fbsql_stop_db|fbsql_table_name|fbsql_tablename|fbsql_username|fbsql_warnings|fclose|fdf_add_doc_javascript|fdf_add_template|fdf_close|fdf_create|fdf_enum_values|fdf_errno|fdf_error|fdf_get_ap|fdf_get_attachment|fdf_get_encoding|fdf_get_file|fdf_get_flags|fdf_get_opt|fdf_get_status|fdf_get_value|fdf_get_version|fdf_header|fdf_next_field_name|fdf_open|fdf_open_string|fdf_remove_item|fdf_save|fdf_save_string|fdf_set_ap|fdf_set_encoding|fdf_set_file|fdf_set_flags|fdf_set_javascript_action|fdf_set_on_import_javascript|fdf_set_opt|fdf_set_status|fdf_set_submit_form_action|fdf_set_target_frame|fdf_set_value|fdf_set_version|feof|fflush|fgetc|fgetcsv|fgets|fgetss|file|file_exists|file_get_contents|file_put_contents|fileatime|filectime|filegroup|fileinode|filemtime|fileowner|fileperms|filepro|filepro_fieldcount|filepro_fieldname|filepro_fieldtype|filepro_fieldwidth|filepro_retrieve|filepro_rowcount|filesize|filesystemiterator|filetype|filter_has_var|filter_id|filter_input|filter_input_array|filter_list|filter_var|filter_var_array|filteriterator|finfo_buffer|finfo_close|finfo_file|finfo_open|finfo_set_flags|floatval|flock|floor|flush|fmod|fnmatch|fopen|forward_static_call|forward_static_call_array|fpassthru|fprintf|fputcsv|fputs|fread|frenchtojd|fribidi_log2vis|fscanf|fseek|fsockopen|fstat|ftell|ftok|ftp_alloc|ftp_cdup|ftp_chdir|ftp_chmod|ftp_close|ftp_connect|ftp_delete|ftp_exec|ftp_fget|ftp_fput|ftp_get|ftp_get_option|ftp_login|ftp_mdtm|ftp_mkdir|ftp_nb_continue|ftp_nb_fget|ftp_nb_fput|ftp_nb_get|ftp_nb_put|ftp_nlist|ftp_pasv|ftp_put|ftp_pwd|ftp_quit|ftp_raw|ftp_rawlist|ftp_rename|ftp_rmdir|ftp_set_option|ftp_site|ftp_size|ftp_ssl_connect|ftp_systype|ftruncate|func_get_arg|func_get_args|func_num_args|function_exists|fwrite|gc_collect_cycles|gc_disable|gc_enable|gc_enabled|gd_info|gearmanclient|gearmanjob|gearmantask|gearmanworker|geoip_continent_code_by_name|geoip_country_code3_by_name|geoip_country_code_by_name|geoip_country_name_by_name|geoip_database_info|geoip_db_avail|geoip_db_filename|geoip_db_get_all_info|geoip_id_by_name|geoip_isp_by_name|geoip_org_by_name|geoip_record_by_name|geoip_region_by_name|geoip_region_name_by_code|geoip_time_zone_by_country_and_region|getMeta|getNamed|getValue|get_browser|get_called_class|get_cfg_var|get_class|get_class_methods|get_class_vars|get_current_user|get_declared_classes|get_declared_interfaces|get_defined_constants|get_defined_functions|get_defined_vars|get_extension_funcs|get_headers|get_html_translation_table|get_include_path|get_included_files|get_loaded_extensions|get_magic_quotes_gpc|get_magic_quotes_runtime|get_meta_tags|get_object_vars|get_parent_class|get_required_files|get_resource_type|getallheaders|getconstant|getconstants|getconstructor|getcwd|getdate|getdefaultproperties|getdoccomment|getendline|getenv|getextension|getextensionname|getfilename|gethostbyaddr|gethostbyname|gethostbynamel|gethostname|getimagesize|getinterfacenames|getinterfaces|getlastmod|getmethod|getmethods|getmodifiers|getmxrr|getmygid|getmyinode|getmypid|getmyuid|getname|getnamespacename|getopt|getparentclass|getproperties|getproperty|getprotobyname|getprotobynumber|getrandmax|getrusage|getservbyname|getservbyport|getshortname|getstartline|getstaticproperties|getstaticpropertyvalue|gettext|gettimeofday|gettype|glob|globiterator|gmagick|gmagickdraw|gmagickpixel|gmdate|gmmktime|gmp_abs|gmp_add|gmp_and|gmp_clrbit|gmp_cmp|gmp_com|gmp_div|gmp_div_q|gmp_div_qr|gmp_div_r|gmp_divexact|gmp_fact|gmp_gcd|gmp_gcdext|gmp_hamdist|gmp_init|gmp_intval|gmp_invert|gmp_jacobi|gmp_legendre|gmp_mod|gmp_mul|gmp_neg|gmp_nextprime|gmp_or|gmp_perfect_square|gmp_popcount|gmp_pow|gmp_powm|gmp_prob_prime|gmp_random|gmp_scan0|gmp_scan1|gmp_setbit|gmp_sign|gmp_sqrt|gmp_sqrtrem|gmp_strval|gmp_sub|gmp_testbit|gmp_xor|gmstrftime|gnupg_adddecryptkey|gnupg_addencryptkey|gnupg_addsignkey|gnupg_cleardecryptkeys|gnupg_clearencryptkeys|gnupg_clearsignkeys|gnupg_decrypt|gnupg_decryptverify|gnupg_encrypt|gnupg_encryptsign|gnupg_export|gnupg_geterror|gnupg_getprotocol|gnupg_import|gnupg_init|gnupg_keyinfo|gnupg_setarmor|gnupg_seterrormode|gnupg_setsignmode|gnupg_sign|gnupg_verify|gopher_parsedir|grapheme_extract|grapheme_stripos|grapheme_stristr|grapheme_strlen|grapheme_strpos|grapheme_strripos|grapheme_strrpos|grapheme_strstr|grapheme_substr|gregoriantojd|gupnp_context_get_host_ip|gupnp_context_get_port|gupnp_context_get_subscription_timeout|gupnp_context_host_path|gupnp_context_new|gupnp_context_set_subscription_timeout|gupnp_context_timeout_add|gupnp_context_unhost_path|gupnp_control_point_browse_start|gupnp_control_point_browse_stop|gupnp_control_point_callback_set|gupnp_control_point_new|gupnp_device_action_callback_set|gupnp_device_info_get|gupnp_device_info_get_service|gupnp_root_device_get_available|gupnp_root_device_get_relative_location|gupnp_root_device_new|gupnp_root_device_set_available|gupnp_root_device_start|gupnp_root_device_stop|gupnp_service_action_get|gupnp_service_action_return|gupnp_service_action_return_error|gupnp_service_action_set|gupnp_service_freeze_notify|gupnp_service_info_get|gupnp_service_info_get_introspection|gupnp_service_introspection_get_state_variable|gupnp_service_notify|gupnp_service_proxy_action_get|gupnp_service_proxy_action_set|gupnp_service_proxy_add_notify|gupnp_service_proxy_callback_set|gupnp_service_proxy_get_subscribed|gupnp_service_proxy_remove_notify|gupnp_service_proxy_set_subscribed|gupnp_service_thaw_notify|gzclose|gzcompress|gzdecode|gzdeflate|gzencode|gzeof|gzfile|gzgetc|gzgets|gzgetss|gzinflate|gzopen|gzpassthru|gzputs|gzread|gzrewind|gzseek|gztell|gzuncompress|gzwrite|halt_compiler|haruannotation|haruannotation_setborderstyle|haruannotation_sethighlightmode|haruannotation_seticon|haruannotation_setopened|harudestination|harudestination_setfit|harudestination_setfitb|harudestination_setfitbh|harudestination_setfitbv|harudestination_setfith|harudestination_setfitr|harudestination_setfitv|harudestination_setxyz|harudoc|harudoc_addpage|harudoc_addpagelabel|harudoc_construct|harudoc_createoutline|harudoc_getcurrentencoder|harudoc_getcurrentpage|harudoc_getencoder|harudoc_getfont|harudoc_getinfoattr|harudoc_getpagelayout|harudoc_getpagemode|harudoc_getstreamsize|harudoc_insertpage|harudoc_loadjpeg|harudoc_loadpng|harudoc_loadraw|harudoc_loadttc|harudoc_loadttf|harudoc_loadtype1|harudoc_output|harudoc_readfromstream|harudoc_reseterror|harudoc_resetstream|harudoc_save|harudoc_savetostream|harudoc_setcompressionmode|harudoc_setcurrentencoder|harudoc_setencryptionmode|harudoc_setinfoattr|harudoc_setinfodateattr|harudoc_setopenaction|harudoc_setpagelayout|harudoc_setpagemode|harudoc_setpagesconfiguration|harudoc_setpassword|harudoc_setpermission|harudoc_usecnsencodings|harudoc_usecnsfonts|harudoc_usecntencodings|harudoc_usecntfonts|harudoc_usejpencodings|harudoc_usejpfonts|harudoc_usekrencodings|harudoc_usekrfonts|haruencoder|haruencoder_getbytetype|haruencoder_gettype|haruencoder_getunicode|haruencoder_getwritingmode|haruexception|harufont|harufont_getascent|harufont_getcapheight|harufont_getdescent|harufont_getencodingname|harufont_getfontname|harufont_gettextwidth|harufont_getunicodewidth|harufont_getxheight|harufont_measuretext|haruimage|haruimage_getbitspercomponent|haruimage_getcolorspace|haruimage_getheight|haruimage_getsize|haruimage_getwidth|haruimage_setcolormask|haruimage_setmaskimage|haruoutline|haruoutline_setdestination|haruoutline_setopened|harupage|harupage_arc|harupage_begintext|harupage_circle|harupage_closepath|harupage_concat|harupage_createdestination|harupage_createlinkannotation|harupage_createtextannotation|harupage_createurlannotation|harupage_curveto|harupage_curveto2|harupage_curveto3|harupage_drawimage|harupage_ellipse|harupage_endpath|harupage_endtext|harupage_eofill|harupage_eofillstroke|harupage_fill|harupage_fillstroke|harupage_getcharspace|harupage_getcmykfill|harupage_getcmykstroke|harupage_getcurrentfont|harupage_getcurrentfontsize|harupage_getcurrentpos|harupage_getcurrenttextpos|harupage_getdash|harupage_getfillingcolorspace|harupage_getflatness|harupage_getgmode|harupage_getgrayfill|harupage_getgraystroke|harupage_getheight|harupage_gethorizontalscaling|harupage_getlinecap|harupage_getlinejoin|harupage_getlinewidth|harupage_getmiterlimit|harupage_getrgbfill|harupage_getrgbstroke|harupage_getstrokingcolorspace|harupage_gettextleading|harupage_gettextmatrix|harupage_gettextrenderingmode|harupage_gettextrise|harupage_gettextwidth|harupage_gettransmatrix|harupage_getwidth|harupage_getwordspace|harupage_lineto|harupage_measuretext|harupage_movetextpos|harupage_moveto|harupage_movetonextline|harupage_rectangle|harupage_setcharspace|harupage_setcmykfill|harupage_setcmykstroke|harupage_setdash|harupage_setflatness|harupage_setfontandsize|harupage_setgrayfill|harupage_setgraystroke|harupage_setheight|harupage_sethorizontalscaling|harupage_setlinecap|harupage_setlinejoin|harupage_setlinewidth|harupage_setmiterlimit|harupage_setrgbfill|harupage_setrgbstroke|harupage_setrotate|harupage_setsize|harupage_setslideshow|harupage_settextleading|harupage_settextmatrix|harupage_settextrenderingmode|harupage_settextrise|harupage_setwidth|harupage_setwordspace|harupage_showtext|harupage_showtextnextline|harupage_stroke|harupage_textout|harupage_textrect|hasconstant|hash|hash_algos|hash_copy|hash_file|hash_final|hash_hmac|hash_hmac_file|hash_init|hash_update|hash_update_file|hash_update_stream|hasmethod|hasproperty|header|header_register_callback|header_remove|headers_list|headers_sent|hebrev|hebrevc|hex2bin|hexdec|highlight_file|highlight_string|html_entity_decode|htmlentities|htmlspecialchars|htmlspecialchars_decode|http_build_cookie|http_build_query|http_build_str|http_build_url|http_cache_etag|http_cache_last_modified|http_chunked_decode|http_date|http_deflate|http_get|http_get_request_body|http_get_request_body_stream|http_get_request_headers|http_head|http_inflate|http_match_etag|http_match_modified|http_match_request_header|http_negotiate_charset|http_negotiate_content_type|http_negotiate_language|http_parse_cookie|http_parse_headers|http_parse_message|http_parse_params|http_persistent_handles_clean|http_persistent_handles_count|http_persistent_handles_ident|http_post_data|http_post_fields|http_put_data|http_put_file|http_put_stream|http_redirect|http_request|http_request_body_encode|http_request_method_exists|http_request_method_name|http_request_method_register|http_request_method_unregister|http_response_code|http_send_content_disposition|http_send_content_type|http_send_data|http_send_file|http_send_last_modified|http_send_status|http_send_stream|http_support|http_throttle|httpdeflatestream|httpdeflatestream_construct|httpdeflatestream_factory|httpdeflatestream_finish|httpdeflatestream_flush|httpdeflatestream_update|httpinflatestream|httpinflatestream_construct|httpinflatestream_factory|httpinflatestream_finish|httpinflatestream_flush|httpinflatestream_update|httpmessage|httpmessage_addheaders|httpmessage_construct|httpmessage_detach|httpmessage_factory|httpmessage_fromenv|httpmessage_fromstring|httpmessage_getbody|httpmessage_getheader|httpmessage_getheaders|httpmessage_gethttpversion|httpmessage_getparentmessage|httpmessage_getrequestmethod|httpmessage_getrequesturl|httpmessage_getresponsecode|httpmessage_getresponsestatus|httpmessage_gettype|httpmessage_guesscontenttype|httpmessage_prepend|httpmessage_reverse|httpmessage_send|httpmessage_setbody|httpmessage_setheaders|httpmessage_sethttpversion|httpmessage_setrequestmethod|httpmessage_setrequesturl|httpmessage_setresponsecode|httpmessage_setresponsestatus|httpmessage_settype|httpmessage_tomessagetypeobject|httpmessage_tostring|httpquerystring|httpquerystring_construct|httpquerystring_get|httpquerystring_mod|httpquerystring_set|httpquerystring_singleton|httpquerystring_toarray|httpquerystring_tostring|httpquerystring_xlate|httprequest|httprequest_addcookies|httprequest_addheaders|httprequest_addpostfields|httprequest_addpostfile|httprequest_addputdata|httprequest_addquerydata|httprequest_addrawpostdata|httprequest_addssloptions|httprequest_clearhistory|httprequest_construct|httprequest_enablecookies|httprequest_getcontenttype|httprequest_getcookies|httprequest_getheaders|httprequest_gethistory|httprequest_getmethod|httprequest_getoptions|httprequest_getpostfields|httprequest_getpostfiles|httprequest_getputdata|httprequest_getputfile|httprequest_getquerydata|httprequest_getrawpostdata|httprequest_getrawrequestmessage|httprequest_getrawresponsemessage|httprequest_getrequestmessage|httprequest_getresponsebody|httprequest_getresponsecode|httprequest_getresponsecookies|httprequest_getresponsedata|httprequest_getresponseheader|httprequest_getresponseinfo|httprequest_getresponsemessage|httprequest_getresponsestatus|httprequest_getssloptions|httprequest_geturl|httprequest_resetcookies|httprequest_send|httprequest_setcontenttype|httprequest_setcookies|httprequest_setheaders|httprequest_setmethod|httprequest_setoptions|httprequest_setpostfields|httprequest_setpostfiles|httprequest_setputdata|httprequest_setputfile|httprequest_setquerydata|httprequest_setrawpostdata|httprequest_setssloptions|httprequest_seturl|httprequestpool|httprequestpool_attach|httprequestpool_construct|httprequestpool_destruct|httprequestpool_detach|httprequestpool_getattachedrequests|httprequestpool_getfinishedrequests|httprequestpool_reset|httprequestpool_send|httprequestpool_socketperform|httprequestpool_socketselect|httpresponse|httpresponse_capture|httpresponse_getbuffersize|httpresponse_getcache|httpresponse_getcachecontrol|httpresponse_getcontentdisposition|httpresponse_getcontenttype|httpresponse_getdata|httpresponse_getetag|httpresponse_getfile|httpresponse_getgzip|httpresponse_getheader|httpresponse_getlastmodified|httpresponse_getrequestbody|httpresponse_getrequestbodystream|httpresponse_getrequestheaders|httpresponse_getstream|httpresponse_getthrottledelay|httpresponse_guesscontenttype|httpresponse_redirect|httpresponse_send|httpresponse_setbuffersize|httpresponse_setcache|httpresponse_setcachecontrol|httpresponse_setcontentdisposition|httpresponse_setcontenttype|httpresponse_setdata|httpresponse_setetag|httpresponse_setfile|httpresponse_setgzip|httpresponse_setheader|httpresponse_setlastmodified|httpresponse_setstream|httpresponse_setthrottledelay|httpresponse_status|hw_array2objrec|hw_changeobject|hw_children|hw_childrenobj|hw_close|hw_connect|hw_connection_info|hw_cp|hw_deleteobject|hw_docbyanchor|hw_docbyanchorobj|hw_document_attributes|hw_document_bodytag|hw_document_content|hw_document_setcontent|hw_document_size|hw_dummy|hw_edittext|hw_error|hw_errormsg|hw_free_document|hw_getanchors|hw_getanchorsobj|hw_getandlock|hw_getchildcoll|hw_getchildcollobj|hw_getchilddoccoll|hw_getchilddoccollobj|hw_getobject|hw_getobjectbyquery|hw_getobjectbyquerycoll|hw_getobjectbyquerycollobj|hw_getobjectbyqueryobj|hw_getparents|hw_getparentsobj|hw_getrellink|hw_getremote|hw_getremotechildren|hw_getsrcbydestobj|hw_gettext|hw_getusername|hw_identify|hw_incollections|hw_info|hw_inscoll|hw_insdoc|hw_insertanchors|hw_insertdocument|hw_insertobject|hw_mapid|hw_modifyobject|hw_mv|hw_new_document|hw_objrec2array|hw_output_document|hw_pconnect|hw_pipedocument|hw_root|hw_setlinkroot|hw_stat|hw_unlock|hw_who|hwapi_attribute|hwapi_attribute_key|hwapi_attribute_langdepvalue|hwapi_attribute_value|hwapi_attribute_values|hwapi_checkin|hwapi_checkout|hwapi_children|hwapi_content|hwapi_content_mimetype|hwapi_content_read|hwapi_copy|hwapi_dbstat|hwapi_dcstat|hwapi_dstanchors|hwapi_dstofsrcanchor|hwapi_error_count|hwapi_error_reason|hwapi_find|hwapi_ftstat|hwapi_hgcsp|hwapi_hwstat|hwapi_identify|hwapi_info|hwapi_insert|hwapi_insertanchor|hwapi_insertcollection|hwapi_insertdocument|hwapi_link|hwapi_lock|hwapi_move|hwapi_new_content|hwapi_object|hwapi_object_assign|hwapi_object_attreditable|hwapi_object_count|hwapi_object_insert|hwapi_object_new|hwapi_object_remove|hwapi_object_title|hwapi_object_value|hwapi_objectbyanchor|hwapi_parents|hwapi_reason_description|hwapi_reason_type|hwapi_remove|hwapi_replace|hwapi_setcommittedversion|hwapi_srcanchors|hwapi_srcsofdst|hwapi_unlock|hwapi_user|hwapi_userlist|hypot|ibase_add_user|ibase_affected_rows|ibase_backup|ibase_blob_add|ibase_blob_cancel|ibase_blob_close|ibase_blob_create|ibase_blob_echo|ibase_blob_get|ibase_blob_import|ibase_blob_info|ibase_blob_open|ibase_close|ibase_commit|ibase_commit_ret|ibase_connect|ibase_db_info|ibase_delete_user|ibase_drop_db|ibase_errcode|ibase_errmsg|ibase_execute|ibase_fetch_assoc|ibase_fetch_object|ibase_fetch_row|ibase_field_info|ibase_free_event_handler|ibase_free_query|ibase_free_result|ibase_gen_id|ibase_maintain_db|ibase_modify_user|ibase_name_result|ibase_num_fields|ibase_num_params|ibase_param_info|ibase_pconnect|ibase_prepare|ibase_query|ibase_restore|ibase_rollback|ibase_rollback_ret|ibase_server_info|ibase_service_attach|ibase_service_detach|ibase_set_event_handler|ibase_timefmt|ibase_trans|ibase_wait_event|iconv|iconv_get_encoding|iconv_mime_decode|iconv_mime_decode_headers|iconv_mime_encode|iconv_set_encoding|iconv_strlen|iconv_strpos|iconv_strrpos|iconv_substr|id3_get_frame_long_name|id3_get_frame_short_name|id3_get_genre_id|id3_get_genre_list|id3_get_genre_name|id3_get_tag|id3_get_version|id3_remove_tag|id3_set_tag|id3v2attachedpictureframe|id3v2frame|id3v2tag|idate|idn_to_ascii|idn_to_unicode|idn_to_utf8|ifx_affected_rows|ifx_blobinfile_mode|ifx_byteasvarchar|ifx_close|ifx_connect|ifx_copy_blob|ifx_create_blob|ifx_create_char|ifx_do|ifx_error|ifx_errormsg|ifx_fetch_row|ifx_fieldproperties|ifx_fieldtypes|ifx_free_blob|ifx_free_char|ifx_free_result|ifx_get_blob|ifx_get_char|ifx_getsqlca|ifx_htmltbl_result|ifx_nullformat|ifx_num_fields|ifx_num_rows|ifx_pconnect|ifx_prepare|ifx_query|ifx_textasvarchar|ifx_update_blob|ifx_update_char|ifxus_close_slob|ifxus_create_slob|ifxus_free_slob|ifxus_open_slob|ifxus_read_slob|ifxus_seek_slob|ifxus_tell_slob|ifxus_write_slob|ignore_user_abort|iis_add_server|iis_get_dir_security|iis_get_script_map|iis_get_server_by_comment|iis_get_server_by_path|iis_get_server_rights|iis_get_service_state|iis_remove_server|iis_set_app_settings|iis_set_dir_security|iis_set_script_map|iis_set_server_rights|iis_start_server|iis_start_service|iis_stop_server|iis_stop_service|image2wbmp|image_type_to_extension|image_type_to_mime_type|imagealphablending|imageantialias|imagearc|imagechar|imagecharup|imagecolorallocate|imagecolorallocatealpha|imagecolorat|imagecolorclosest|imagecolorclosestalpha|imagecolorclosesthwb|imagecolordeallocate|imagecolorexact|imagecolorexactalpha|imagecolormatch|imagecolorresolve|imagecolorresolvealpha|imagecolorset|imagecolorsforindex|imagecolorstotal|imagecolortransparent|imageconvolution|imagecopy|imagecopymerge|imagecopymergegray|imagecopyresampled|imagecopyresized|imagecreate|imagecreatefromgd|imagecreatefromgd2|imagecreatefromgd2part|imagecreatefromgif|imagecreatefromjpeg|imagecreatefrompng|imagecreatefromstring|imagecreatefromwbmp|imagecreatefromxbm|imagecreatefromxpm|imagecreatetruecolor|imagedashedline|imagedestroy|imageellipse|imagefill|imagefilledarc|imagefilledellipse|imagefilledpolygon|imagefilledrectangle|imagefilltoborder|imagefilter|imagefontheight|imagefontwidth|imageftbbox|imagefttext|imagegammacorrect|imagegd|imagegd2|imagegif|imagegrabscreen|imagegrabwindow|imageinterlace|imageistruecolor|imagejpeg|imagelayereffect|imageline|imageloadfont|imagepalettecopy|imagepng|imagepolygon|imagepsbbox|imagepsencodefont|imagepsextendfont|imagepsfreefont|imagepsloadfont|imagepsslantfont|imagepstext|imagerectangle|imagerotate|imagesavealpha|imagesetbrush|imagesetpixel|imagesetstyle|imagesetthickness|imagesettile|imagestring|imagestringup|imagesx|imagesy|imagetruecolortopalette|imagettfbbox|imagettftext|imagetypes|imagewbmp|imagexbm|imagick|imagick_adaptiveblurimage|imagick_adaptiveresizeimage|imagick_adaptivesharpenimage|imagick_adaptivethresholdimage|imagick_addimage|imagick_addnoiseimage|imagick_affinetransformimage|imagick_animateimages|imagick_annotateimage|imagick_appendimages|imagick_averageimages|imagick_blackthresholdimage|imagick_blurimage|imagick_borderimage|imagick_charcoalimage|imagick_chopimage|imagick_clear|imagick_clipimage|imagick_clippathimage|imagick_clone|imagick_clutimage|imagick_coalesceimages|imagick_colorfloodfillimage|imagick_colorizeimage|imagick_combineimages|imagick_commentimage|imagick_compareimagechannels|imagick_compareimagelayers|imagick_compareimages|imagick_compositeimage|imagick_construct|imagick_contrastimage|imagick_contraststretchimage|imagick_convolveimage|imagick_cropimage|imagick_cropthumbnailimage|imagick_current|imagick_cyclecolormapimage|imagick_decipherimage|imagick_deconstructimages|imagick_deleteimageartifact|imagick_despeckleimage|imagick_destroy|imagick_displayimage|imagick_displayimages|imagick_distortimage|imagick_drawimage|imagick_edgeimage|imagick_embossimage|imagick_encipherimage|imagick_enhanceimage|imagick_equalizeimage|imagick_evaluateimage|imagick_extentimage|imagick_flattenimages|imagick_flipimage|imagick_floodfillpaintimage|imagick_flopimage|imagick_frameimage|imagick_fximage|imagick_gammaimage|imagick_gaussianblurimage|imagick_getcolorspace|imagick_getcompression|imagick_getcompressionquality|imagick_getcopyright|imagick_getfilename|imagick_getfont|imagick_getformat|imagick_getgravity|imagick_gethomeurl|imagick_getimage|imagick_getimagealphachannel|imagick_getimageartifact|imagick_getimagebackgroundcolor|imagick_getimageblob|imagick_getimageblueprimary|imagick_getimagebordercolor|imagick_getimagechanneldepth|imagick_getimagechanneldistortion|imagick_getimagechanneldistortions|imagick_getimagechannelextrema|imagick_getimagechannelmean|imagick_getimagechannelrange|imagick_getimagechannelstatistics|imagick_getimageclipmask|imagick_getimagecolormapcolor|imagick_getimagecolors|imagick_getimagecolorspace|imagick_getimagecompose|imagick_getimagecompression|imagick_getimagecompressionquality|imagick_getimagedelay|imagick_getimagedepth|imagick_getimagedispose|imagick_getimagedistortion|imagick_getimageextrema|imagick_getimagefilename|imagick_getimageformat|imagick_getimagegamma|imagick_getimagegeometry|imagick_getimagegravity|imagick_getimagegreenprimary|imagick_getimageheight|imagick_getimagehistogram|imagick_getimageindex|imagick_getimageinterlacescheme|imagick_getimageinterpolatemethod|imagick_getimageiterations|imagick_getimagelength|imagick_getimagemagicklicense|imagick_getimagematte|imagick_getimagemattecolor|imagick_getimageorientation|imagick_getimagepage|imagick_getimagepixelcolor|imagick_getimageprofile|imagick_getimageprofiles|imagick_getimageproperties|imagick_getimageproperty|imagick_getimageredprimary|imagick_getimageregion|imagick_getimagerenderingintent|imagick_getimageresolution|imagick_getimagesblob|imagick_getimagescene|imagick_getimagesignature|imagick_getimagesize|imagick_getimagetickspersecond|imagick_getimagetotalinkdensity|imagick_getimagetype|imagick_getimageunits|imagick_getimagevirtualpixelmethod|imagick_getimagewhitepoint|imagick_getimagewidth|imagick_getinterlacescheme|imagick_getiteratorindex|imagick_getnumberimages|imagick_getoption|imagick_getpackagename|imagick_getpage|imagick_getpixeliterator|imagick_getpixelregioniterator|imagick_getpointsize|imagick_getquantumdepth|imagick_getquantumrange|imagick_getreleasedate|imagick_getresource|imagick_getresourcelimit|imagick_getsamplingfactors|imagick_getsize|imagick_getsizeoffset|imagick_getversion|imagick_hasnextimage|imagick_haspreviousimage|imagick_identifyimage|imagick_implodeimage|imagick_labelimage|imagick_levelimage|imagick_linearstretchimage|imagick_liquidrescaleimage|imagick_magnifyimage|imagick_mapimage|imagick_mattefloodfillimage|imagick_medianfilterimage|imagick_mergeimagelayers|imagick_minifyimage|imagick_modulateimage|imagick_montageimage|imagick_morphimages|imagick_mosaicimages|imagick_motionblurimage|imagick_negateimage|imagick_newimage|imagick_newpseudoimage|imagick_nextimage|imagick_normalizeimage|imagick_oilpaintimage|imagick_opaquepaintimage|imagick_optimizeimagelayers|imagick_orderedposterizeimage|imagick_paintfloodfillimage|imagick_paintopaqueimage|imagick_painttransparentimage|imagick_pingimage|imagick_pingimageblob|imagick_pingimagefile|imagick_polaroidimage|imagick_posterizeimage|imagick_previewimages|imagick_previousimage|imagick_profileimage|imagick_quantizeimage|imagick_quantizeimages|imagick_queryfontmetrics|imagick_queryfonts|imagick_queryformats|imagick_radialblurimage|imagick_raiseimage|imagick_randomthresholdimage|imagick_readimage|imagick_readimageblob|imagick_readimagefile|imagick_recolorimage|imagick_reducenoiseimage|imagick_removeimage|imagick_removeimageprofile|imagick_render|imagick_resampleimage|imagick_resetimagepage|imagick_resizeimage|imagick_rollimage|imagick_rotateimage|imagick_roundcorners|imagick_sampleimage|imagick_scaleimage|imagick_separateimagechannel|imagick_sepiatoneimage|imagick_setbackgroundcolor|imagick_setcolorspace|imagick_setcompression|imagick_setcompressionquality|imagick_setfilename|imagick_setfirstiterator|imagick_setfont|imagick_setformat|imagick_setgravity|imagick_setimage|imagick_setimagealphachannel|imagick_setimageartifact|imagick_setimagebackgroundcolor|imagick_setimagebias|imagick_setimageblueprimary|imagick_setimagebordercolor|imagick_setimagechanneldepth|imagick_setimageclipmask|imagick_setimagecolormapcolor|imagick_setimagecolorspace|imagick_setimagecompose|imagick_setimagecompression|imagick_setimagecompressionquality|imagick_setimagedelay|imagick_setimagedepth|imagick_setimagedispose|imagick_setimageextent|imagick_setimagefilename|imagick_setimageformat|imagick_setimagegamma|imagick_setimagegravity|imagick_setimagegreenprimary|imagick_setimageindex|imagick_setimageinterlacescheme|imagick_setimageinterpolatemethod|imagick_setimageiterations|imagick_setimagematte|imagick_setimagemattecolor|imagick_setimageopacity|imagick_setimageorientation|imagick_setimagepage|imagick_setimageprofile|imagick_setimageproperty|imagick_setimageredprimary|imagick_setimagerenderingintent|imagick_setimageresolution|imagick_setimagescene|imagick_setimagetickspersecond|imagick_setimagetype|imagick_setimageunits|imagick_setimagevirtualpixelmethod|imagick_setimagewhitepoint|imagick_setinterlacescheme|imagick_setiteratorindex|imagick_setlastiterator|imagick_setoption|imagick_setpage|imagick_setpointsize|imagick_setresolution|imagick_setresourcelimit|imagick_setsamplingfactors|imagick_setsize|imagick_setsizeoffset|imagick_settype|imagick_shadeimage|imagick_shadowimage|imagick_sharpenimage|imagick_shaveimage|imagick_shearimage|imagick_sigmoidalcontrastimage|imagick_sketchimage|imagick_solarizeimage|imagick_spliceimage|imagick_spreadimage|imagick_steganoimage|imagick_stereoimage|imagick_stripimage|imagick_swirlimage|imagick_textureimage|imagick_thresholdimage|imagick_thumbnailimage|imagick_tintimage|imagick_transformimage|imagick_transparentpaintimage|imagick_transposeimage|imagick_transverseimage|imagick_trimimage|imagick_uniqueimagecolors|imagick_unsharpmaskimage|imagick_valid|imagick_vignetteimage|imagick_waveimage|imagick_whitethresholdimage|imagick_writeimage|imagick_writeimagefile|imagick_writeimages|imagick_writeimagesfile|imagickdraw|imagickdraw_affine|imagickdraw_annotation|imagickdraw_arc|imagickdraw_bezier|imagickdraw_circle|imagickdraw_clear|imagickdraw_clone|imagickdraw_color|imagickdraw_comment|imagickdraw_composite|imagickdraw_construct|imagickdraw_destroy|imagickdraw_ellipse|imagickdraw_getclippath|imagickdraw_getcliprule|imagickdraw_getclipunits|imagickdraw_getfillcolor|imagickdraw_getfillopacity|imagickdraw_getfillrule|imagickdraw_getfont|imagickdraw_getfontfamily|imagickdraw_getfontsize|imagickdraw_getfontstyle|imagickdraw_getfontweight|imagickdraw_getgravity|imagickdraw_getstrokeantialias|imagickdraw_getstrokecolor|imagickdraw_getstrokedasharray|imagickdraw_getstrokedashoffset|imagickdraw_getstrokelinecap|imagickdraw_getstrokelinejoin|imagickdraw_getstrokemiterlimit|imagickdraw_getstrokeopacity|imagickdraw_getstrokewidth|imagickdraw_gettextalignment|imagickdraw_gettextantialias|imagickdraw_gettextdecoration|imagickdraw_gettextencoding|imagickdraw_gettextundercolor|imagickdraw_getvectorgraphics|imagickdraw_line|imagickdraw_matte|imagickdraw_pathclose|imagickdraw_pathcurvetoabsolute|imagickdraw_pathcurvetoquadraticbezierabsolute|imagickdraw_pathcurvetoquadraticbezierrelative|imagickdraw_pathcurvetoquadraticbeziersmoothabsolute|imagickdraw_pathcurvetoquadraticbeziersmoothrelative|imagickdraw_pathcurvetorelative|imagickdraw_pathcurvetosmoothabsolute|imagickdraw_pathcurvetosmoothrelative|imagickdraw_pathellipticarcabsolute|imagickdraw_pathellipticarcrelative|imagickdraw_pathfinish|imagickdraw_pathlinetoabsolute|imagickdraw_pathlinetohorizontalabsolute|imagickdraw_pathlinetohorizontalrelative|imagickdraw_pathlinetorelative|imagickdraw_pathlinetoverticalabsolute|imagickdraw_pathlinetoverticalrelative|imagickdraw_pathmovetoabsolute|imagickdraw_pathmovetorelative|imagickdraw_pathstart|imagickdraw_point|imagickdraw_polygon|imagickdraw_polyline|imagickdraw_pop|imagickdraw_popclippath|imagickdraw_popdefs|imagickdraw_poppattern|imagickdraw_push|imagickdraw_pushclippath|imagickdraw_pushdefs|imagickdraw_pushpattern|imagickdraw_rectangle|imagickdraw_render|imagickdraw_rotate|imagickdraw_roundrectangle|imagickdraw_scale|imagickdraw_setclippath|imagickdraw_setcliprule|imagickdraw_setclipunits|imagickdraw_setfillalpha|imagickdraw_setfillcolor|imagickdraw_setfillopacity|imagickdraw_setfillpatternurl|imagickdraw_setfillrule|imagickdraw_setfont|imagickdraw_setfontfamily|imagickdraw_setfontsize|imagickdraw_setfontstretch|imagickdraw_setfontstyle|imagickdraw_setfontweight|imagickdraw_setgravity|imagickdraw_setstrokealpha|imagickdraw_setstrokeantialias|imagickdraw_setstrokecolor|imagickdraw_setstrokedasharray|imagickdraw_setstrokedashoffset|imagickdraw_setstrokelinecap|imagickdraw_setstrokelinejoin|imagickdraw_setstrokemiterlimit|imagickdraw_setstrokeopacity|imagickdraw_setstrokepatternurl|imagickdraw_setstrokewidth|imagickdraw_settextalignment|imagickdraw_settextantialias|imagickdraw_settextdecoration|imagickdraw_settextencoding|imagickdraw_settextundercolor|imagickdraw_setvectorgraphics|imagickdraw_setviewbox|imagickdraw_skewx|imagickdraw_skewy|imagickdraw_translate|imagickpixel|imagickpixel_clear|imagickpixel_construct|imagickpixel_destroy|imagickpixel_getcolor|imagickpixel_getcolorasstring|imagickpixel_getcolorcount|imagickpixel_getcolorvalue|imagickpixel_gethsl|imagickpixel_issimilar|imagickpixel_setcolor|imagickpixel_setcolorvalue|imagickpixel_sethsl|imagickpixeliterator|imagickpixeliterator_clear|imagickpixeliterator_construct|imagickpixeliterator_destroy|imagickpixeliterator_getcurrentiteratorrow|imagickpixeliterator_getiteratorrow|imagickpixeliterator_getnextiteratorrow|imagickpixeliterator_getpreviousiteratorrow|imagickpixeliterator_newpixeliterator|imagickpixeliterator_newpixelregioniterator|imagickpixeliterator_resetiterator|imagickpixeliterator_setiteratorfirstrow|imagickpixeliterator_setiteratorlastrow|imagickpixeliterator_setiteratorrow|imagickpixeliterator_synciterator|imap_8bit|imap_alerts|imap_append|imap_base64|imap_binary|imap_body|imap_bodystruct|imap_check|imap_clearflag_full|imap_close|imap_create|imap_createmailbox|imap_delete|imap_deletemailbox|imap_errors|imap_expunge|imap_fetch_overview|imap_fetchbody|imap_fetchheader|imap_fetchmime|imap_fetchstructure|imap_fetchtext|imap_gc|imap_get_quota|imap_get_quotaroot|imap_getacl|imap_getmailboxes|imap_getsubscribed|imap_header|imap_headerinfo|imap_headers|imap_last_error|imap_list|imap_listmailbox|imap_listscan|imap_listsubscribed|imap_lsub|imap_mail|imap_mail_compose|imap_mail_copy|imap_mail_move|imap_mailboxmsginfo|imap_mime_header_decode|imap_msgno|imap_num_msg|imap_num_recent|imap_open|imap_ping|imap_qprint|imap_rename|imap_renamemailbox|imap_reopen|imap_rfc822_parse_adrlist|imap_rfc822_parse_headers|imap_rfc822_write_address|imap_savebody|imap_scan|imap_scanmailbox|imap_search|imap_set_quota|imap_setacl|imap_setflag_full|imap_sort|imap_status|imap_subscribe|imap_thread|imap_timeout|imap_uid|imap_undelete|imap_unsubscribe|imap_utf7_decode|imap_utf7_encode|imap_utf8|implementsinterface|implode|import_request_variables|in_array|include|include_once|inclued_get_data|inet_ntop|inet_pton|infiniteiterator|ingres_autocommit|ingres_autocommit_state|ingres_charset|ingres_close|ingres_commit|ingres_connect|ingres_cursor|ingres_errno|ingres_error|ingres_errsqlstate|ingres_escape_string|ingres_execute|ingres_fetch_array|ingres_fetch_assoc|ingres_fetch_object|ingres_fetch_proc_return|ingres_fetch_row|ingres_field_length|ingres_field_name|ingres_field_nullable|ingres_field_precision|ingres_field_scale|ingres_field_type|ingres_free_result|ingres_next_error|ingres_num_fields|ingres_num_rows|ingres_pconnect|ingres_prepare|ingres_query|ingres_result_seek|ingres_rollback|ingres_set_environment|ingres_unbuffered_query|ini_alter|ini_get|ini_get_all|ini_restore|ini_set|innamespace|inotify_add_watch|inotify_init|inotify_queue_len|inotify_read|inotify_rm_watch|interface_exists|intl_error_name|intl_get_error_code|intl_get_error_message|intl_is_failure|intldateformatter|intval|invalidargumentexception|invoke|invokeargs|ip2long|iptcembed|iptcparse|is_a|is_array|is_bool|is_callable|is_dir|is_double|is_executable|is_file|is_finite|is_float|is_infinite|is_int|is_integer|is_link|is_long|is_nan|is_null|is_numeric|is_object|is_readable|is_real|is_resource|is_scalar|is_soap_fault|is_string|is_subclass_of|is_uploaded_file|is_writable|is_writeable|isabstract|iscloneable|isdisabled|isfinal|isinstance|isinstantiable|isinterface|isinternal|isiterateable|isset|issubclassof|isuserdefined|iterator|iterator_apply|iterator_count|iterator_to_array|iteratoraggregate|iteratoriterator|java_last_exception_clear|java_last_exception_get|jddayofweek|jdmonthname|jdtofrench|jdtogregorian|jdtojewish|jdtojulian|jdtounix|jewishtojd|join|jpeg2wbmp|json_decode|json_encode|json_last_error|jsonserializable|judy|judy_type|judy_version|juliantojd|kadm5_chpass_principal|kadm5_create_principal|kadm5_delete_principal|kadm5_destroy|kadm5_flush|kadm5_get_policies|kadm5_get_principal|kadm5_get_principals|kadm5_init_with_password|kadm5_modify_principal|key|krsort|ksort|lcfirst|lcg_value|lchgrp|lchown|ldap_8859_to_t61|ldap_add|ldap_bind|ldap_close|ldap_compare|ldap_connect|ldap_count_entries|ldap_delete|ldap_dn2ufn|ldap_err2str|ldap_errno|ldap_error|ldap_explode_dn|ldap_first_attribute|ldap_first_entry|ldap_first_reference|ldap_free_result|ldap_get_attributes|ldap_get_dn|ldap_get_entries|ldap_get_option|ldap_get_values|ldap_get_values_len|ldap_list|ldap_mod_add|ldap_mod_del|ldap_mod_replace|ldap_modify|ldap_next_attribute|ldap_next_entry|ldap_next_reference|ldap_parse_reference|ldap_parse_result|ldap_read|ldap_rename|ldap_sasl_bind|ldap_search|ldap_set_option|ldap_set_rebind_proc|ldap_sort|ldap_start_tls|ldap_t61_to_8859|ldap_unbind|lengthexception|levenshtein|libxml_clear_errors|libxml_disable_entity_loader|libxml_get_errors|libxml_get_last_error|libxml_set_streams_context|libxml_use_internal_errors|libxmlerror|limititerator|link|linkinfo|list|locale|localeconv|localtime|log|log10|log1p|logicexception|long2ip|lstat|ltrim|lzf_compress|lzf_decompress|lzf_optimized_for|m_checkstatus|m_completeauthorizations|m_connect|m_connectionerror|m_deletetrans|m_destroyconn|m_destroyengine|m_getcell|m_getcellbynum|m_getcommadelimited|m_getheader|m_initconn|m_initengine|m_iscommadelimited|m_maxconntimeout|m_monitor|m_numcolumns|m_numrows|m_parsecommadelimited|m_responsekeys|m_responseparam|m_returnstatus|m_setblocking|m_setdropfile|m_setip|m_setssl|m_setssl_cafile|m_setssl_files|m_settimeout|m_sslcert_gen_hash|m_transactionssent|m_transinqueue|m_transkeyval|m_transnew|m_transsend|m_uwait|m_validateidentifier|m_verifyconnection|m_verifysslcert|magic_quotes_runtime|mail|mailparse_determine_best_xfer_encoding|mailparse_msg_create|mailparse_msg_extract_part|mailparse_msg_extract_part_file|mailparse_msg_extract_whole_part_file|mailparse_msg_free|mailparse_msg_get_part|mailparse_msg_get_part_data|mailparse_msg_get_structure|mailparse_msg_parse|mailparse_msg_parse_file|mailparse_rfc822_parse_addresses|mailparse_stream_encode|mailparse_uudecode_all|main|max|maxdb_affected_rows|maxdb_autocommit|maxdb_bind_param|maxdb_bind_result|maxdb_change_user|maxdb_character_set_name|maxdb_client_encoding|maxdb_close|maxdb_close_long_data|maxdb_commit|maxdb_connect|maxdb_connect_errno|maxdb_connect_error|maxdb_data_seek|maxdb_debug|maxdb_disable_reads_from_master|maxdb_disable_rpl_parse|maxdb_dump_debug_info|maxdb_embedded_connect|maxdb_enable_reads_from_master|maxdb_enable_rpl_parse|maxdb_errno|maxdb_error|maxdb_escape_string|maxdb_execute|maxdb_fetch|maxdb_fetch_array|maxdb_fetch_assoc|maxdb_fetch_field|maxdb_fetch_field_direct|maxdb_fetch_fields|maxdb_fetch_lengths|maxdb_fetch_object|maxdb_fetch_row|maxdb_field_count|maxdb_field_seek|maxdb_field_tell|maxdb_free_result|maxdb_get_client_info|maxdb_get_client_version|maxdb_get_host_info|maxdb_get_metadata|maxdb_get_proto_info|maxdb_get_server_info|maxdb_get_server_version|maxdb_info|maxdb_init|maxdb_insert_id|maxdb_kill|maxdb_master_query|maxdb_more_results|maxdb_multi_query|maxdb_next_result|maxdb_num_fields|maxdb_num_rows|maxdb_options|maxdb_param_count|maxdb_ping|maxdb_prepare|maxdb_query|maxdb_real_connect|maxdb_real_escape_string|maxdb_real_query|maxdb_report|maxdb_rollback|maxdb_rpl_parse_enabled|maxdb_rpl_probe|maxdb_rpl_query_type|maxdb_select_db|maxdb_send_long_data|maxdb_send_query|maxdb_server_end|maxdb_server_init|maxdb_set_opt|maxdb_sqlstate|maxdb_ssl_set|maxdb_stat|maxdb_stmt_affected_rows|maxdb_stmt_bind_param|maxdb_stmt_bind_result|maxdb_stmt_close|maxdb_stmt_close_long_data|maxdb_stmt_data_seek|maxdb_stmt_errno|maxdb_stmt_error|maxdb_stmt_execute|maxdb_stmt_fetch|maxdb_stmt_free_result|maxdb_stmt_init|maxdb_stmt_num_rows|maxdb_stmt_param_count|maxdb_stmt_prepare|maxdb_stmt_reset|maxdb_stmt_result_metadata|maxdb_stmt_send_long_data|maxdb_stmt_sqlstate|maxdb_stmt_store_result|maxdb_store_result|maxdb_thread_id|maxdb_thread_safe|maxdb_use_result|maxdb_warning_count|mb_check_encoding|mb_convert_case|mb_convert_encoding|mb_convert_kana|mb_convert_variables|mb_decode_mimeheader|mb_decode_numericentity|mb_detect_encoding|mb_detect_order|mb_encode_mimeheader|mb_encode_numericentity|mb_encoding_aliases|mb_ereg|mb_ereg_match|mb_ereg_replace|mb_ereg_search|mb_ereg_search_getpos|mb_ereg_search_getregs|mb_ereg_search_init|mb_ereg_search_pos|mb_ereg_search_regs|mb_ereg_search_setpos|mb_eregi|mb_eregi_replace|mb_get_info|mb_http_input|mb_http_output|mb_internal_encoding|mb_language|mb_list_encodings|mb_output_handler|mb_parse_str|mb_preferred_mime_name|mb_regex_encoding|mb_regex_set_options|mb_send_mail|mb_split|mb_strcut|mb_strimwidth|mb_stripos|mb_stristr|mb_strlen|mb_strpos|mb_strrchr|mb_strrichr|mb_strripos|mb_strrpos|mb_strstr|mb_strtolower|mb_strtoupper|mb_strwidth|mb_substitute_character|mb_substr|mb_substr_count|mcrypt_cbc|mcrypt_cfb|mcrypt_create_iv|mcrypt_decrypt|mcrypt_ecb|mcrypt_enc_get_algorithms_name|mcrypt_enc_get_block_size|mcrypt_enc_get_iv_size|mcrypt_enc_get_key_size|mcrypt_enc_get_modes_name|mcrypt_enc_get_supported_key_sizes|mcrypt_enc_is_block_algorithm|mcrypt_enc_is_block_algorithm_mode|mcrypt_enc_is_block_mode|mcrypt_enc_self_test|mcrypt_encrypt|mcrypt_generic|mcrypt_generic_deinit|mcrypt_generic_end|mcrypt_generic_init|mcrypt_get_block_size|mcrypt_get_cipher_name|mcrypt_get_iv_size|mcrypt_get_key_size|mcrypt_list_algorithms|mcrypt_list_modes|mcrypt_module_close|mcrypt_module_get_algo_block_size|mcrypt_module_get_algo_key_size|mcrypt_module_get_supported_key_sizes|mcrypt_module_is_block_algorithm|mcrypt_module_is_block_algorithm_mode|mcrypt_module_is_block_mode|mcrypt_module_open|mcrypt_module_self_test|mcrypt_ofb|md5|md5_file|mdecrypt_generic|memcache|memcache_debug|memcached|memory_get_peak_usage|memory_get_usage|messageformatter|metaphone|method_exists|mhash|mhash_count|mhash_get_block_size|mhash_get_hash_name|mhash_keygen_s2k|microtime|mime_content_type|min|ming_keypress|ming_setcubicthreshold|ming_setscale|ming_setswfcompression|ming_useconstants|ming_useswfversion|mkdir|mktime|money_format|mongo|mongobindata|mongocode|mongocollection|mongoconnectionexception|mongocursor|mongocursorexception|mongocursortimeoutexception|mongodate|mongodb|mongodbref|mongoexception|mongogridfs|mongogridfscursor|mongogridfsexception|mongogridfsfile|mongoid|mongoint32|mongoint64|mongomaxkey|mongominkey|mongoregex|mongotimestamp|move_uploaded_file|mpegfile|mqseries_back|mqseries_begin|mqseries_close|mqseries_cmit|mqseries_conn|mqseries_connx|mqseries_disc|mqseries_get|mqseries_inq|mqseries_open|mqseries_put|mqseries_put1|mqseries_set|mqseries_strerror|msession_connect|msession_count|msession_create|msession_destroy|msession_disconnect|msession_find|msession_get|msession_get_array|msession_get_data|msession_inc|msession_list|msession_listvar|msession_lock|msession_plugin|msession_randstr|msession_set|msession_set_array|msession_set_data|msession_timeout|msession_uniq|msession_unlock|msg_get_queue|msg_queue_exists|msg_receive|msg_remove_queue|msg_send|msg_set_queue|msg_stat_queue|msql|msql_affected_rows|msql_close|msql_connect|msql_create_db|msql_createdb|msql_data_seek|msql_db_query|msql_dbname|msql_drop_db|msql_error|msql_fetch_array|msql_fetch_field|msql_fetch_object|msql_fetch_row|msql_field_flags|msql_field_len|msql_field_name|msql_field_seek|msql_field_table|msql_field_type|msql_fieldflags|msql_fieldlen|msql_fieldname|msql_fieldtable|msql_fieldtype|msql_free_result|msql_list_dbs|msql_list_fields|msql_list_tables|msql_num_fields|msql_num_rows|msql_numfields|msql_numrows|msql_pconnect|msql_query|msql_regcase|msql_result|msql_select_db|msql_tablename|mssql_bind|mssql_close|mssql_connect|mssql_data_seek|mssql_execute|mssql_fetch_array|mssql_fetch_assoc|mssql_fetch_batch|mssql_fetch_field|mssql_fetch_object|mssql_fetch_row|mssql_field_length|mssql_field_name|mssql_field_seek|mssql_field_type|mssql_free_result|mssql_free_statement|mssql_get_last_message|mssql_guid_string|mssql_init|mssql_min_error_severity|mssql_min_message_severity|mssql_next_result|mssql_num_fields|mssql_num_rows|mssql_pconnect|mssql_query|mssql_result|mssql_rows_affected|mssql_select_db|mt_getrandmax|mt_rand|mt_srand|multipleiterator|mysql_affected_rows|mysql_client_encoding|mysql_close|mysql_connect|mysql_create_db|mysql_data_seek|mysql_db_name|mysql_db_query|mysql_drop_db|mysql_errno|mysql_error|mysql_escape_string|mysql_fetch_array|mysql_fetch_assoc|mysql_fetch_field|mysql_fetch_lengths|mysql_fetch_object|mysql_fetch_row|mysql_field_flags|mysql_field_len|mysql_field_name|mysql_field_seek|mysql_field_table|mysql_field_type|mysql_free_result|mysql_get_client_info|mysql_get_host_info|mysql_get_proto_info|mysql_get_server_info|mysql_info|mysql_insert_id|mysql_list_dbs|mysql_list_fields|mysql_list_processes|mysql_list_tables|mysql_num_fields|mysql_num_rows|mysql_pconnect|mysql_ping|mysql_query|mysql_real_escape_string|mysql_result|mysql_select_db|mysql_set_charset|mysql_stat|mysql_tablename|mysql_thread_id|mysql_unbuffered_query|mysqli|mysqli_bind_param|mysqli_bind_result|mysqli_client_encoding|mysqli_connect|mysqli_disable_reads_from_master|mysqli_disable_rpl_parse|mysqli_driver|mysqli_enable_reads_from_master|mysqli_enable_rpl_parse|mysqli_escape_string|mysqli_execute|mysqli_fetch|mysqli_get_metadata|mysqli_master_query|mysqli_param_count|mysqli_report|mysqli_result|mysqli_rpl_parse_enabled|mysqli_rpl_probe|mysqli_rpl_query_type|mysqli_send_long_data|mysqli_send_query|mysqli_set_opt|mysqli_slave_query|mysqli_stmt|mysqli_warning|mysqlnd_ms_get_stats|mysqlnd_ms_query_is_select|mysqlnd_ms_set_user_pick_server|mysqlnd_qc_change_handler|mysqlnd_qc_clear_cache|mysqlnd_qc_get_cache_info|mysqlnd_qc_get_core_stats|mysqlnd_qc_get_handler|mysqlnd_qc_get_query_trace_log|mysqlnd_qc_set_user_handlers|natcasesort|natsort|ncurses_addch|ncurses_addchnstr|ncurses_addchstr|ncurses_addnstr|ncurses_addstr|ncurses_assume_default_colors|ncurses_attroff|ncurses_attron|ncurses_attrset|ncurses_baudrate|ncurses_beep|ncurses_bkgd|ncurses_bkgdset|ncurses_border|ncurses_bottom_panel|ncurses_can_change_color|ncurses_cbreak|ncurses_clear|ncurses_clrtobot|ncurses_clrtoeol|ncurses_color_content|ncurses_color_set|ncurses_curs_set|ncurses_def_prog_mode|ncurses_def_shell_mode|ncurses_define_key|ncurses_del_panel|ncurses_delay_output|ncurses_delch|ncurses_deleteln|ncurses_delwin|ncurses_doupdate|ncurses_echo|ncurses_echochar|ncurses_end|ncurses_erase|ncurses_erasechar|ncurses_filter|ncurses_flash|ncurses_flushinp|ncurses_getch|ncurses_getmaxyx|ncurses_getmouse|ncurses_getyx|ncurses_halfdelay|ncurses_has_colors|ncurses_has_ic|ncurses_has_il|ncurses_has_key|ncurses_hide_panel|ncurses_hline|ncurses_inch|ncurses_init|ncurses_init_color|ncurses_init_pair|ncurses_insch|ncurses_insdelln|ncurses_insertln|ncurses_insstr|ncurses_instr|ncurses_isendwin|ncurses_keyok|ncurses_keypad|ncurses_killchar|ncurses_longname|ncurses_meta|ncurses_mouse_trafo|ncurses_mouseinterval|ncurses_mousemask|ncurses_move|ncurses_move_panel|ncurses_mvaddch|ncurses_mvaddchnstr|ncurses_mvaddchstr|ncurses_mvaddnstr|ncurses_mvaddstr|ncurses_mvcur|ncurses_mvdelch|ncurses_mvgetch|ncurses_mvhline|ncurses_mvinch|ncurses_mvvline|ncurses_mvwaddstr|ncurses_napms|ncurses_new_panel|ncurses_newpad|ncurses_newwin|ncurses_nl|ncurses_nocbreak|ncurses_noecho|ncurses_nonl|ncurses_noqiflush|ncurses_noraw|ncurses_pair_content|ncurses_panel_above|ncurses_panel_below|ncurses_panel_window|ncurses_pnoutrefresh|ncurses_prefresh|ncurses_putp|ncurses_qiflush|ncurses_raw|ncurses_refresh|ncurses_replace_panel|ncurses_reset_prog_mode|ncurses_reset_shell_mode|ncurses_resetty|ncurses_savetty|ncurses_scr_dump|ncurses_scr_init|ncurses_scr_restore|ncurses_scr_set|ncurses_scrl|ncurses_show_panel|ncurses_slk_attr|ncurses_slk_attroff|ncurses_slk_attron|ncurses_slk_attrset|ncurses_slk_clear|ncurses_slk_color|ncurses_slk_init|ncurses_slk_noutrefresh|ncurses_slk_refresh|ncurses_slk_restore|ncurses_slk_set|ncurses_slk_touch|ncurses_standend|ncurses_standout|ncurses_start_color|ncurses_termattrs|ncurses_termname|ncurses_timeout|ncurses_top_panel|ncurses_typeahead|ncurses_ungetch|ncurses_ungetmouse|ncurses_update_panels|ncurses_use_default_colors|ncurses_use_env|ncurses_use_extended_names|ncurses_vidattr|ncurses_vline|ncurses_waddch|ncurses_waddstr|ncurses_wattroff|ncurses_wattron|ncurses_wattrset|ncurses_wborder|ncurses_wclear|ncurses_wcolor_set|ncurses_werase|ncurses_wgetch|ncurses_whline|ncurses_wmouse_trafo|ncurses_wmove|ncurses_wnoutrefresh|ncurses_wrefresh|ncurses_wstandend|ncurses_wstandout|ncurses_wvline|newinstance|newinstanceargs|newt_bell|newt_button|newt_button_bar|newt_centered_window|newt_checkbox|newt_checkbox_get_value|newt_checkbox_set_flags|newt_checkbox_set_value|newt_checkbox_tree|newt_checkbox_tree_add_item|newt_checkbox_tree_find_item|newt_checkbox_tree_get_current|newt_checkbox_tree_get_entry_value|newt_checkbox_tree_get_multi_selection|newt_checkbox_tree_get_selection|newt_checkbox_tree_multi|newt_checkbox_tree_set_current|newt_checkbox_tree_set_entry|newt_checkbox_tree_set_entry_value|newt_checkbox_tree_set_width|newt_clear_key_buffer|newt_cls|newt_compact_button|newt_component_add_callback|newt_component_takes_focus|newt_create_grid|newt_cursor_off|newt_cursor_on|newt_delay|newt_draw_form|newt_draw_root_text|newt_entry|newt_entry_get_value|newt_entry_set|newt_entry_set_filter|newt_entry_set_flags|newt_finished|newt_form|newt_form_add_component|newt_form_add_components|newt_form_add_hot_key|newt_form_destroy|newt_form_get_current|newt_form_run|newt_form_set_background|newt_form_set_height|newt_form_set_size|newt_form_set_timer|newt_form_set_width|newt_form_watch_fd|newt_get_screen_size|newt_grid_add_components_to_form|newt_grid_basic_window|newt_grid_free|newt_grid_get_size|newt_grid_h_close_stacked|newt_grid_h_stacked|newt_grid_place|newt_grid_set_field|newt_grid_simple_window|newt_grid_v_close_stacked|newt_grid_v_stacked|newt_grid_wrapped_window|newt_grid_wrapped_window_at|newt_init|newt_label|newt_label_set_text|newt_listbox|newt_listbox_append_entry|newt_listbox_clear|newt_listbox_clear_selection|newt_listbox_delete_entry|newt_listbox_get_current|newt_listbox_get_selection|newt_listbox_insert_entry|newt_listbox_item_count|newt_listbox_select_item|newt_listbox_set_current|newt_listbox_set_current_by_key|newt_listbox_set_data|newt_listbox_set_entry|newt_listbox_set_width|newt_listitem|newt_listitem_get_data|newt_listitem_set|newt_open_window|newt_pop_help_line|newt_pop_window|newt_push_help_line|newt_radio_get_current|newt_radiobutton|newt_redraw_help_line|newt_reflow_text|newt_refresh|newt_resize_screen|newt_resume|newt_run_form|newt_scale|newt_scale_set|newt_scrollbar_set|newt_set_help_callback|newt_set_suspend_callback|newt_suspend|newt_textbox|newt_textbox_get_num_lines|newt_textbox_reflowed|newt_textbox_set_height|newt_textbox_set_text|newt_vertical_scrollbar|newt_wait_for_key|newt_win_choice|newt_win_entries|newt_win_menu|newt_win_message|newt_win_messagev|newt_win_ternary|next|ngettext|nl2br|nl_langinfo|norewinditerator|normalizer|notes_body|notes_copy_db|notes_create_db|notes_create_note|notes_drop_db|notes_find_note|notes_header_info|notes_list_msgs|notes_mark_read|notes_mark_unread|notes_nav_create|notes_search|notes_unread|notes_version|nsapi_request_headers|nsapi_response_headers|nsapi_virtual|nthmac|number_format|numberformatter|oauth|oauth_get_sbs|oauth_urlencode|oauthexception|oauthprovider|ob_clean|ob_deflatehandler|ob_end_clean|ob_end_flush|ob_etaghandler|ob_flush|ob_get_clean|ob_get_contents|ob_get_flush|ob_get_length|ob_get_level|ob_get_status|ob_gzhandler|ob_iconv_handler|ob_implicit_flush|ob_inflatehandler|ob_list_handlers|ob_start|ob_tidyhandler|oci_bind_array_by_name|oci_bind_by_name|oci_cancel|oci_client_version|oci_close|oci_collection_append|oci_collection_assign|oci_collection_element_assign|oci_collection_element_get|oci_collection_free|oci_collection_max|oci_collection_size|oci_collection_trim|oci_commit|oci_connect|oci_define_by_name|oci_error|oci_execute|oci_fetch|oci_fetch_all|oci_fetch_array|oci_fetch_assoc|oci_fetch_object|oci_fetch_row|oci_field_is_null|oci_field_name|oci_field_precision|oci_field_scale|oci_field_size|oci_field_type|oci_field_type_raw|oci_free_statement|oci_internal_debug|oci_lob_append|oci_lob_close|oci_lob_copy|oci_lob_eof|oci_lob_erase|oci_lob_export|oci_lob_flush|oci_lob_free|oci_lob_getbuffering|oci_lob_import|oci_lob_is_equal|oci_lob_load|oci_lob_read|oci_lob_rewind|oci_lob_save|oci_lob_savefile|oci_lob_seek|oci_lob_setbuffering|oci_lob_size|oci_lob_tell|oci_lob_truncate|oci_lob_write|oci_lob_writetemporary|oci_lob_writetofile|oci_new_collection|oci_new_connect|oci_new_cursor|oci_new_descriptor|oci_num_fields|oci_num_rows|oci_parse|oci_password_change|oci_pconnect|oci_result|oci_rollback|oci_server_version|oci_set_action|oci_set_client_identifier|oci_set_client_info|oci_set_edition|oci_set_module_name|oci_set_prefetch|oci_statement_type|ocibindbyname|ocicancel|ocicloselob|ocicollappend|ocicollassign|ocicollassignelem|ocicollgetelem|ocicollmax|ocicollsize|ocicolltrim|ocicolumnisnull|ocicolumnname|ocicolumnprecision|ocicolumnscale|ocicolumnsize|ocicolumntype|ocicolumntyperaw|ocicommit|ocidefinebyname|ocierror|ociexecute|ocifetch|ocifetchinto|ocifetchstatement|ocifreecollection|ocifreecursor|ocifreedesc|ocifreestatement|ociinternaldebug|ociloadlob|ocilogoff|ocilogon|ocinewcollection|ocinewcursor|ocinewdescriptor|ocinlogon|ocinumcols|ociparse|ociplogon|ociresult|ocirollback|ocirowcount|ocisavelob|ocisavelobfile|ociserverversion|ocisetprefetch|ocistatementtype|ociwritelobtofile|ociwritetemporarylob|octdec|odbc_autocommit|odbc_binmode|odbc_close|odbc_close_all|odbc_columnprivileges|odbc_columns|odbc_commit|odbc_connect|odbc_cursor|odbc_data_source|odbc_do|odbc_error|odbc_errormsg|odbc_exec|odbc_execute|odbc_fetch_array|odbc_fetch_into|odbc_fetch_object|odbc_fetch_row|odbc_field_len|odbc_field_name|odbc_field_num|odbc_field_precision|odbc_field_scale|odbc_field_type|odbc_foreignkeys|odbc_free_result|odbc_gettypeinfo|odbc_longreadlen|odbc_next_result|odbc_num_fields|odbc_num_rows|odbc_pconnect|odbc_prepare|odbc_primarykeys|odbc_procedurecolumns|odbc_procedures|odbc_result|odbc_result_all|odbc_rollback|odbc_setoption|odbc_specialcolumns|odbc_statistics|odbc_tableprivileges|odbc_tables|openal_buffer_create|openal_buffer_data|openal_buffer_destroy|openal_buffer_get|openal_buffer_loadwav|openal_context_create|openal_context_current|openal_context_destroy|openal_context_process|openal_context_suspend|openal_device_close|openal_device_open|openal_listener_get|openal_listener_set|openal_source_create|openal_source_destroy|openal_source_get|openal_source_pause|openal_source_play|openal_source_rewind|openal_source_set|openal_source_stop|openal_stream|opendir|openlog|openssl_cipher_iv_length|openssl_csr_export|openssl_csr_export_to_file|openssl_csr_get_public_key|openssl_csr_get_subject|openssl_csr_new|openssl_csr_sign|openssl_decrypt|openssl_dh_compute_key|openssl_digest|openssl_encrypt|openssl_error_string|openssl_free_key|openssl_get_cipher_methods|openssl_get_md_methods|openssl_get_privatekey|openssl_get_publickey|openssl_open|openssl_pkcs12_export|openssl_pkcs12_export_to_file|openssl_pkcs12_read|openssl_pkcs7_decrypt|openssl_pkcs7_encrypt|openssl_pkcs7_sign|openssl_pkcs7_verify|openssl_pkey_export|openssl_pkey_export_to_file|openssl_pkey_free|openssl_pkey_get_details|openssl_pkey_get_private|openssl_pkey_get_public|openssl_pkey_new|openssl_private_decrypt|openssl_private_encrypt|openssl_public_decrypt|openssl_public_encrypt|openssl_random_pseudo_bytes|openssl_seal|openssl_sign|openssl_verify|openssl_x509_check_private_key|openssl_x509_checkpurpose|openssl_x509_export|openssl_x509_export_to_file|openssl_x509_free|openssl_x509_parse|openssl_x509_read|ord|outeriterator|outofboundsexception|outofrangeexception|output_add_rewrite_var|output_reset_rewrite_vars|overflowexception|overload|override_function|ovrimos_close|ovrimos_commit|ovrimos_connect|ovrimos_cursor|ovrimos_exec|ovrimos_execute|ovrimos_fetch_into|ovrimos_fetch_row|ovrimos_field_len|ovrimos_field_name|ovrimos_field_num|ovrimos_field_type|ovrimos_free_result|ovrimos_longreadlen|ovrimos_num_fields|ovrimos_num_rows|ovrimos_prepare|ovrimos_result|ovrimos_result_all|ovrimos_rollback|pack|parentiterator|parse_ini_file|parse_ini_string|parse_str|parse_url|parsekit_compile_file|parsekit_compile_string|parsekit_func_arginfo|passthru|pathinfo|pclose|pcntl_alarm|pcntl_exec|pcntl_fork|pcntl_getpriority|pcntl_setpriority|pcntl_signal|pcntl_signal_dispatch|pcntl_sigprocmask|pcntl_sigtimedwait|pcntl_sigwaitinfo|pcntl_wait|pcntl_waitpid|pcntl_wexitstatus|pcntl_wifexited|pcntl_wifsignaled|pcntl_wifstopped|pcntl_wstopsig|pcntl_wtermsig|pdf_activate_item|pdf_add_annotation|pdf_add_bookmark|pdf_add_launchlink|pdf_add_locallink|pdf_add_nameddest|pdf_add_note|pdf_add_outline|pdf_add_pdflink|pdf_add_table_cell|pdf_add_textflow|pdf_add_thumbnail|pdf_add_weblink|pdf_arc|pdf_arcn|pdf_attach_file|pdf_begin_document|pdf_begin_font|pdf_begin_glyph|pdf_begin_item|pdf_begin_layer|pdf_begin_page|pdf_begin_page_ext|pdf_begin_pattern|pdf_begin_template|pdf_begin_template_ext|pdf_circle|pdf_clip|pdf_close|pdf_close_image|pdf_close_pdi|pdf_close_pdi_page|pdf_closepath|pdf_closepath_fill_stroke|pdf_closepath_stroke|pdf_concat|pdf_continue_text|pdf_create_3dview|pdf_create_action|pdf_create_annotation|pdf_create_bookmark|pdf_create_field|pdf_create_fieldgroup|pdf_create_gstate|pdf_create_pvf|pdf_create_textflow|pdf_curveto|pdf_define_layer|pdf_delete|pdf_delete_pvf|pdf_delete_table|pdf_delete_textflow|pdf_encoding_set_char|pdf_end_document|pdf_end_font|pdf_end_glyph|pdf_end_item|pdf_end_layer|pdf_end_page|pdf_end_page_ext|pdf_end_pattern|pdf_end_template|pdf_endpath|pdf_fill|pdf_fill_imageblock|pdf_fill_pdfblock|pdf_fill_stroke|pdf_fill_textblock|pdf_findfont|pdf_fit_image|pdf_fit_pdi_page|pdf_fit_table|pdf_fit_textflow|pdf_fit_textline|pdf_get_apiname|pdf_get_buffer|pdf_get_errmsg|pdf_get_errnum|pdf_get_font|pdf_get_fontname|pdf_get_fontsize|pdf_get_image_height|pdf_get_image_width|pdf_get_majorversion|pdf_get_minorversion|pdf_get_parameter|pdf_get_pdi_parameter|pdf_get_pdi_value|pdf_get_value|pdf_info_font|pdf_info_matchbox|pdf_info_table|pdf_info_textflow|pdf_info_textline|pdf_initgraphics|pdf_lineto|pdf_load_3ddata|pdf_load_font|pdf_load_iccprofile|pdf_load_image|pdf_makespotcolor|pdf_moveto|pdf_new|pdf_open_ccitt|pdf_open_file|pdf_open_gif|pdf_open_image|pdf_open_image_file|pdf_open_jpeg|pdf_open_memory_image|pdf_open_pdi|pdf_open_pdi_document|pdf_open_pdi_page|pdf_open_tiff|pdf_pcos_get_number|pdf_pcos_get_stream|pdf_pcos_get_string|pdf_place_image|pdf_place_pdi_page|pdf_process_pdi|pdf_rect|pdf_restore|pdf_resume_page|pdf_rotate|pdf_save|pdf_scale|pdf_set_border_color|pdf_set_border_dash|pdf_set_border_style|pdf_set_char_spacing|pdf_set_duration|pdf_set_gstate|pdf_set_horiz_scaling|pdf_set_info|pdf_set_info_author|pdf_set_info_creator|pdf_set_info_keywords|pdf_set_info_subject|pdf_set_info_title|pdf_set_layer_dependency|pdf_set_leading|pdf_set_parameter|pdf_set_text_matrix|pdf_set_text_pos|pdf_set_text_rendering|pdf_set_text_rise|pdf_set_value|pdf_set_word_spacing|pdf_setcolor|pdf_setdash|pdf_setdashpattern|pdf_setflat|pdf_setfont|pdf_setgray|pdf_setgray_fill|pdf_setgray_stroke|pdf_setlinecap|pdf_setlinejoin|pdf_setlinewidth|pdf_setmatrix|pdf_setmiterlimit|pdf_setpolydash|pdf_setrgbcolor|pdf_setrgbcolor_fill|pdf_setrgbcolor_stroke|pdf_shading|pdf_shading_pattern|pdf_shfill|pdf_show|pdf_show_boxed|pdf_show_xy|pdf_skew|pdf_stringwidth|pdf_stroke|pdf_suspend_page|pdf_translate|pdf_utf16_to_utf8|pdf_utf32_to_utf16|pdf_utf8_to_utf16|pdo|pdo_cubrid_schema|pdo_pgsqllobcreate|pdo_pgsqllobopen|pdo_pgsqllobunlink|pdo_sqlitecreateaggregate|pdo_sqlitecreatefunction|pdoexception|pdostatement|pfsockopen|pg_affected_rows|pg_cancel_query|pg_client_encoding|pg_close|pg_connect|pg_connection_busy|pg_connection_reset|pg_connection_status|pg_convert|pg_copy_from|pg_copy_to|pg_dbname|pg_delete|pg_end_copy|pg_escape_bytea|pg_escape_string|pg_execute|pg_fetch_all|pg_fetch_all_columns|pg_fetch_array|pg_fetch_assoc|pg_fetch_object|pg_fetch_result|pg_fetch_row|pg_field_is_null|pg_field_name|pg_field_num|pg_field_prtlen|pg_field_size|pg_field_table|pg_field_type|pg_field_type_oid|pg_free_result|pg_get_notify|pg_get_pid|pg_get_result|pg_host|pg_insert|pg_last_error|pg_last_notice|pg_last_oid|pg_lo_close|pg_lo_create|pg_lo_export|pg_lo_import|pg_lo_open|pg_lo_read|pg_lo_read_all|pg_lo_seek|pg_lo_tell|pg_lo_unlink|pg_lo_write|pg_meta_data|pg_num_fields|pg_num_rows|pg_options|pg_parameter_status|pg_pconnect|pg_ping|pg_port|pg_prepare|pg_put_line|pg_query|pg_query_params|pg_result_error|pg_result_error_field|pg_result_seek|pg_result_status|pg_select|pg_send_execute|pg_send_prepare|pg_send_query|pg_send_query_params|pg_set_client_encoding|pg_set_error_verbosity|pg_trace|pg_transaction_status|pg_tty|pg_unescape_bytea|pg_untrace|pg_update|pg_version|php_check_syntax|php_ini_loaded_file|php_ini_scanned_files|php_logo_guid|php_sapi_name|php_strip_whitespace|php_uname|phpcredits|phpinfo|phpversion|pi|png2wbmp|popen|pos|posix_access|posix_ctermid|posix_errno|posix_get_last_error|posix_getcwd|posix_getegid|posix_geteuid|posix_getgid|posix_getgrgid|posix_getgrnam|posix_getgroups|posix_getlogin|posix_getpgid|posix_getpgrp|posix_getpid|posix_getppid|posix_getpwnam|posix_getpwuid|posix_getrlimit|posix_getsid|posix_getuid|posix_initgroups|posix_isatty|posix_kill|posix_mkfifo|posix_mknod|posix_setegid|posix_seteuid|posix_setgid|posix_setpgid|posix_setsid|posix_setuid|posix_strerror|posix_times|posix_ttyname|posix_uname|pow|preg_filter|preg_grep|preg_last_error|preg_match|preg_match_all|preg_quote|preg_replace|preg_replace_callback|preg_split|prev|print|print_r|printer_abort|printer_close|printer_create_brush|printer_create_dc|printer_create_font|printer_create_pen|printer_delete_brush|printer_delete_dc|printer_delete_font|printer_delete_pen|printer_draw_bmp|printer_draw_chord|printer_draw_elipse|printer_draw_line|printer_draw_pie|printer_draw_rectangle|printer_draw_roundrect|printer_draw_text|printer_end_doc|printer_end_page|printer_get_option|printer_list|printer_logical_fontheight|printer_open|printer_select_brush|printer_select_font|printer_select_pen|printer_set_option|printer_start_doc|printer_start_page|printer_write|printf|proc_close|proc_get_status|proc_nice|proc_open|proc_terminate|property_exists|ps_add_bookmark|ps_add_launchlink|ps_add_locallink|ps_add_note|ps_add_pdflink|ps_add_weblink|ps_arc|ps_arcn|ps_begin_page|ps_begin_pattern|ps_begin_template|ps_circle|ps_clip|ps_close|ps_close_image|ps_closepath|ps_closepath_stroke|ps_continue_text|ps_curveto|ps_delete|ps_end_page|ps_end_pattern|ps_end_template|ps_fill|ps_fill_stroke|ps_findfont|ps_get_buffer|ps_get_parameter|ps_get_value|ps_hyphenate|ps_include_file|ps_lineto|ps_makespotcolor|ps_moveto|ps_new|ps_open_file|ps_open_image|ps_open_image_file|ps_open_memory_image|ps_place_image|ps_rect|ps_restore|ps_rotate|ps_save|ps_scale|ps_set_border_color|ps_set_border_dash|ps_set_border_style|ps_set_info|ps_set_parameter|ps_set_text_pos|ps_set_value|ps_setcolor|ps_setdash|ps_setflat|ps_setfont|ps_setgray|ps_setlinecap|ps_setlinejoin|ps_setlinewidth|ps_setmiterlimit|ps_setoverprintmode|ps_setpolydash|ps_shading|ps_shading_pattern|ps_shfill|ps_show|ps_show2|ps_show_boxed|ps_show_xy|ps_show_xy2|ps_string_geometry|ps_stringwidth|ps_stroke|ps_symbol|ps_symbol_name|ps_symbol_width|ps_translate|pspell_add_to_personal|pspell_add_to_session|pspell_check|pspell_clear_session|pspell_config_create|pspell_config_data_dir|pspell_config_dict_dir|pspell_config_ignore|pspell_config_mode|pspell_config_personal|pspell_config_repl|pspell_config_runtogether|pspell_config_save_repl|pspell_new|pspell_new_config|pspell_new_personal|pspell_save_wordlist|pspell_store_replacement|pspell_suggest|putenv|px_close|px_create_fp|px_date2string|px_delete|px_delete_record|px_get_field|px_get_info|px_get_parameter|px_get_record|px_get_schema|px_get_value|px_insert_record|px_new|px_numfields|px_numrecords|px_open_fp|px_put_record|px_retrieve_record|px_set_blob_file|px_set_parameter|px_set_tablename|px_set_targetencoding|px_set_value|px_timestamp2string|px_update_record|qdom_error|qdom_tree|quoted_printable_decode|quoted_printable_encode|quotemeta|rad2deg|radius_acct_open|radius_add_server|radius_auth_open|radius_close|radius_config|radius_create_request|radius_cvt_addr|radius_cvt_int|radius_cvt_string|radius_demangle|radius_demangle_mppe_key|radius_get_attr|radius_get_vendor_attr|radius_put_addr|radius_put_attr|radius_put_int|radius_put_string|radius_put_vendor_addr|radius_put_vendor_attr|radius_put_vendor_int|radius_put_vendor_string|radius_request_authenticator|radius_send_request|radius_server_secret|radius_strerror|rand|range|rangeexception|rar_wrapper_cache_stats|rararchive|rarentry|rarexception|rawurldecode|rawurlencode|read_exif_data|readdir|readfile|readgzfile|readline|readline_add_history|readline_callback_handler_install|readline_callback_handler_remove|readline_callback_read_char|readline_clear_history|readline_completion_function|readline_info|readline_list_history|readline_on_new_line|readline_read_history|readline_redisplay|readline_write_history|readlink|realpath|realpath_cache_get|realpath_cache_size|recode|recode_file|recode_string|recursivearrayiterator|recursivecachingiterator|recursivecallbackfilteriterator|recursivedirectoryiterator|recursivefilteriterator|recursiveiterator|recursiveiteratoriterator|recursiveregexiterator|recursivetreeiterator|reflection|reflectionclass|reflectionexception|reflectionextension|reflectionfunction|reflectionfunctionabstract|reflectionmethod|reflectionobject|reflectionparameter|reflectionproperty|reflector|regexiterator|register_shutdown_function|register_tick_function|rename|rename_function|require|require_once|reset|resetValue|resourcebundle|restore_error_handler|restore_exception_handler|restore_include_path|return|rewind|rewinddir|rmdir|round|rpm_close|rpm_get_tag|rpm_is_valid|rpm_open|rpm_version|rrd_create|rrd_error|rrd_fetch|rrd_first|rrd_graph|rrd_info|rrd_last|rrd_lastupdate|rrd_restore|rrd_tune|rrd_update|rrd_xport|rrdcreator|rrdgraph|rrdupdater|rsort|rtrim|runkit_class_adopt|runkit_class_emancipate|runkit_constant_add|runkit_constant_redefine|runkit_constant_remove|runkit_function_add|runkit_function_copy|runkit_function_redefine|runkit_function_remove|runkit_function_rename|runkit_import|runkit_lint|runkit_lint_file|runkit_method_add|runkit_method_copy|runkit_method_redefine|runkit_method_remove|runkit_method_rename|runkit_return_value_used|runkit_sandbox_output_handler|runkit_superglobals|runtimeexception|samconnection_commit|samconnection_connect|samconnection_constructor|samconnection_disconnect|samconnection_errno|samconnection_error|samconnection_isconnected|samconnection_peek|samconnection_peekall|samconnection_receive|samconnection_remove|samconnection_rollback|samconnection_send|samconnection_setDebug|samconnection_subscribe|samconnection_unsubscribe|sammessage_body|sammessage_constructor|sammessage_header|sca_createdataobject|sca_getservice|sca_localproxy_createdataobject|sca_soapproxy_createdataobject|scandir|sdo_das_changesummary_beginlogging|sdo_das_changesummary_endlogging|sdo_das_changesummary_getchangeddataobjects|sdo_das_changesummary_getchangetype|sdo_das_changesummary_getoldcontainer|sdo_das_changesummary_getoldvalues|sdo_das_changesummary_islogging|sdo_das_datafactory_addpropertytotype|sdo_das_datafactory_addtype|sdo_das_datafactory_getdatafactory|sdo_das_dataobject_getchangesummary|sdo_das_relational_applychanges|sdo_das_relational_construct|sdo_das_relational_createrootdataobject|sdo_das_relational_executepreparedquery|sdo_das_relational_executequery|sdo_das_setting_getlistindex|sdo_das_setting_getpropertyindex|sdo_das_setting_getpropertyname|sdo_das_setting_getvalue|sdo_das_setting_isset|sdo_das_xml_addtypes|sdo_das_xml_create|sdo_das_xml_createdataobject|sdo_das_xml_createdocument|sdo_das_xml_document_getrootdataobject|sdo_das_xml_document_getrootelementname|sdo_das_xml_document_getrootelementuri|sdo_das_xml_document_setencoding|sdo_das_xml_document_setxmldeclaration|sdo_das_xml_document_setxmlversion|sdo_das_xml_loadfile|sdo_das_xml_loadstring|sdo_das_xml_savefile|sdo_das_xml_savestring|sdo_datafactory_create|sdo_dataobject_clear|sdo_dataobject_createdataobject|sdo_dataobject_getcontainer|sdo_dataobject_getsequence|sdo_dataobject_gettypename|sdo_dataobject_gettypenamespaceuri|sdo_exception_getcause|sdo_list_insert|sdo_model_property_getcontainingtype|sdo_model_property_getdefault|sdo_model_property_getname|sdo_model_property_gettype|sdo_model_property_iscontainment|sdo_model_property_ismany|sdo_model_reflectiondataobject_construct|sdo_model_reflectiondataobject_export|sdo_model_reflectiondataobject_getcontainmentproperty|sdo_model_reflectiondataobject_getinstanceproperties|sdo_model_reflectiondataobject_gettype|sdo_model_type_getbasetype|sdo_model_type_getname|sdo_model_type_getnamespaceuri|sdo_model_type_getproperties|sdo_model_type_getproperty|sdo_model_type_isabstracttype|sdo_model_type_isdatatype|sdo_model_type_isinstance|sdo_model_type_isopentype|sdo_model_type_issequencedtype|sdo_sequence_getproperty|sdo_sequence_insert|sdo_sequence_move|seekableiterator|sem_acquire|sem_get|sem_release|sem_remove|serializable|serialize|session_cache_expire|session_cache_limiter|session_commit|session_decode|session_destroy|session_encode|session_get_cookie_params|session_id|session_is_registered|session_module_name|session_name|session_pgsql_add_error|session_pgsql_get_error|session_pgsql_get_field|session_pgsql_reset|session_pgsql_set_field|session_pgsql_status|session_regenerate_id|session_register|session_save_path|session_set_cookie_params|session_set_save_handler|session_start|session_unregister|session_unset|session_write_close|setCounterClass|set_error_handler|set_exception_handler|set_file_buffer|set_include_path|set_magic_quotes_runtime|set_socket_blocking|set_time_limit|setcookie|setlocale|setproctitle|setrawcookie|setstaticpropertyvalue|setthreadtitle|settype|sha1|sha1_file|shell_exec|shm_attach|shm_detach|shm_get_var|shm_has_var|shm_put_var|shm_remove|shm_remove_var|shmop_close|shmop_delete|shmop_open|shmop_read|shmop_size|shmop_write|show_source|shuffle|signeurlpaiement|similar_text|simplexml_import_dom|simplexml_load_file|simplexml_load_string|simplexmlelement|simplexmliterator|sin|sinh|sizeof|sleep|snmp|snmp2_get|snmp2_getnext|snmp2_real_walk|snmp2_set|snmp2_walk|snmp3_get|snmp3_getnext|snmp3_real_walk|snmp3_set|snmp3_walk|snmp_get_quick_print|snmp_get_valueretrieval|snmp_read_mib|snmp_set_enum_print|snmp_set_oid_numeric_print|snmp_set_oid_output_format|snmp_set_quick_print|snmp_set_valueretrieval|snmpget|snmpgetnext|snmprealwalk|snmpset|snmpwalk|snmpwalkoid|soapclient|soapfault|soapheader|soapparam|soapserver|soapvar|socket_accept|socket_bind|socket_clear_error|socket_close|socket_connect|socket_create|socket_create_listen|socket_create_pair|socket_get_option|socket_get_status|socket_getpeername|socket_getsockname|socket_last_error|socket_listen|socket_read|socket_recv|socket_recvfrom|socket_select|socket_send|socket_sendto|socket_set_block|socket_set_blocking|socket_set_nonblock|socket_set_option|socket_set_timeout|socket_shutdown|socket_strerror|socket_write|solr_get_version|solrclient|solrclientexception|solrdocument|solrdocumentfield|solrexception|solrgenericresponse|solrillegalargumentexception|solrillegaloperationexception|solrinputdocument|solrmodifiableparams|solrobject|solrparams|solrpingresponse|solrquery|solrqueryresponse|solrresponse|solrupdateresponse|solrutils|sort|soundex|sphinxclient|spl_autoload|spl_autoload_call|spl_autoload_extensions|spl_autoload_functions|spl_autoload_register|spl_autoload_unregister|spl_classes|spl_object_hash|splbool|spldoublylinkedlist|splenum|splfileinfo|splfileobject|splfixedarray|splfloat|splheap|splint|split|spliti|splmaxheap|splminheap|splobjectstorage|splobserver|splpriorityqueue|splqueue|splstack|splstring|splsubject|spltempfileobject|spoofchecker|sprintf|sql_regcase|sqlite3|sqlite3result|sqlite3stmt|sqlite_array_query|sqlite_busy_timeout|sqlite_changes|sqlite_close|sqlite_column|sqlite_create_aggregate|sqlite_create_function|sqlite_current|sqlite_error_string|sqlite_escape_string|sqlite_exec|sqlite_factory|sqlite_fetch_all|sqlite_fetch_array|sqlite_fetch_column_types|sqlite_fetch_object|sqlite_fetch_single|sqlite_fetch_string|sqlite_field_name|sqlite_has_more|sqlite_has_prev|sqlite_key|sqlite_last_error|sqlite_last_insert_rowid|sqlite_libencoding|sqlite_libversion|sqlite_next|sqlite_num_fields|sqlite_num_rows|sqlite_open|sqlite_popen|sqlite_prev|sqlite_query|sqlite_rewind|sqlite_seek|sqlite_single_query|sqlite_udf_decode_binary|sqlite_udf_encode_binary|sqlite_unbuffered_query|sqlite_valid|sqrt|srand|sscanf|ssdeep_fuzzy_compare|ssdeep_fuzzy_hash|ssdeep_fuzzy_hash_filename|ssh2_auth_hostbased_file|ssh2_auth_none|ssh2_auth_password|ssh2_auth_pubkey_file|ssh2_connect|ssh2_exec|ssh2_fetch_stream|ssh2_fingerprint|ssh2_methods_negotiated|ssh2_publickey_add|ssh2_publickey_init|ssh2_publickey_list|ssh2_publickey_remove|ssh2_scp_recv|ssh2_scp_send|ssh2_sftp|ssh2_sftp_lstat|ssh2_sftp_mkdir|ssh2_sftp_readlink|ssh2_sftp_realpath|ssh2_sftp_rename|ssh2_sftp_rmdir|ssh2_sftp_stat|ssh2_sftp_symlink|ssh2_sftp_unlink|ssh2_shell|ssh2_tunnel|stat|stats_absolute_deviation|stats_cdf_beta|stats_cdf_binomial|stats_cdf_cauchy|stats_cdf_chisquare|stats_cdf_exponential|stats_cdf_f|stats_cdf_gamma|stats_cdf_laplace|stats_cdf_logistic|stats_cdf_negative_binomial|stats_cdf_noncentral_chisquare|stats_cdf_noncentral_f|stats_cdf_poisson|stats_cdf_t|stats_cdf_uniform|stats_cdf_weibull|stats_covariance|stats_den_uniform|stats_dens_beta|stats_dens_cauchy|stats_dens_chisquare|stats_dens_exponential|stats_dens_f|stats_dens_gamma|stats_dens_laplace|stats_dens_logistic|stats_dens_negative_binomial|stats_dens_normal|stats_dens_pmf_binomial|stats_dens_pmf_hypergeometric|stats_dens_pmf_poisson|stats_dens_t|stats_dens_weibull|stats_harmonic_mean|stats_kurtosis|stats_rand_gen_beta|stats_rand_gen_chisquare|stats_rand_gen_exponential|stats_rand_gen_f|stats_rand_gen_funiform|stats_rand_gen_gamma|stats_rand_gen_ibinomial|stats_rand_gen_ibinomial_negative|stats_rand_gen_int|stats_rand_gen_ipoisson|stats_rand_gen_iuniform|stats_rand_gen_noncenral_chisquare|stats_rand_gen_noncentral_f|stats_rand_gen_noncentral_t|stats_rand_gen_normal|stats_rand_gen_t|stats_rand_get_seeds|stats_rand_phrase_to_seeds|stats_rand_ranf|stats_rand_setall|stats_skew|stats_standard_deviation|stats_stat_binomial_coef|stats_stat_correlation|stats_stat_gennch|stats_stat_independent_t|stats_stat_innerproduct|stats_stat_noncentral_t|stats_stat_paired_t|stats_stat_percentile|stats_stat_powersum|stats_variance|stomp|stomp_connect_error|stomp_version|stompexception|stompframe|str_getcsv|str_ireplace|str_pad|str_repeat|str_replace|str_rot13|str_shuffle|str_split|str_word_count|strcasecmp|strchr|strcmp|strcoll|strcspn|stream_bucket_append|stream_bucket_make_writeable|stream_bucket_new|stream_bucket_prepend|stream_context_create|stream_context_get_default|stream_context_get_options|stream_context_get_params|stream_context_set_default|stream_context_set_option|stream_context_set_params|stream_copy_to_stream|stream_encoding|stream_filter_append|stream_filter_prepend|stream_filter_register|stream_filter_remove|stream_get_contents|stream_get_filters|stream_get_line|stream_get_meta_data|stream_get_transports|stream_get_wrappers|stream_is_local|stream_notification_callback|stream_register_wrapper|stream_resolve_include_path|stream_select|stream_set_blocking|stream_set_read_buffer|stream_set_timeout|stream_set_write_buffer|stream_socket_accept|stream_socket_client|stream_socket_enable_crypto|stream_socket_get_name|stream_socket_pair|stream_socket_recvfrom|stream_socket_sendto|stream_socket_server|stream_socket_shutdown|stream_supports_lock|stream_wrapper_register|stream_wrapper_restore|stream_wrapper_unregister|streamwrapper|strftime|strip_tags|stripcslashes|stripos|stripslashes|stristr|strlen|strnatcasecmp|strnatcmp|strncasecmp|strncmp|strpbrk|strpos|strptime|strrchr|strrev|strripos|strrpos|strspn|strstr|strtok|strtolower|strtotime|strtoupper|strtr|strval|substr|substr_compare|substr_count|substr_replace|svm|svmmodel|svn_add|svn_auth_get_parameter|svn_auth_set_parameter|svn_blame|svn_cat|svn_checkout|svn_cleanup|svn_client_version|svn_commit|svn_delete|svn_diff|svn_export|svn_fs_abort_txn|svn_fs_apply_text|svn_fs_begin_txn2|svn_fs_change_node_prop|svn_fs_check_path|svn_fs_contents_changed|svn_fs_copy|svn_fs_delete|svn_fs_dir_entries|svn_fs_file_contents|svn_fs_file_length|svn_fs_is_dir|svn_fs_is_file|svn_fs_make_dir|svn_fs_make_file|svn_fs_node_created_rev|svn_fs_node_prop|svn_fs_props_changed|svn_fs_revision_prop|svn_fs_revision_root|svn_fs_txn_root|svn_fs_youngest_rev|svn_import|svn_log|svn_ls|svn_mkdir|svn_repos_create|svn_repos_fs|svn_repos_fs_begin_txn_for_commit|svn_repos_fs_commit_txn|svn_repos_hotcopy|svn_repos_open|svn_repos_recover|svn_revert|svn_status|svn_update|swf_actiongeturl|swf_actiongotoframe|swf_actiongotolabel|swf_actionnextframe|swf_actionplay|swf_actionprevframe|swf_actionsettarget|swf_actionstop|swf_actiontogglequality|swf_actionwaitforframe|swf_addbuttonrecord|swf_addcolor|swf_closefile|swf_definebitmap|swf_definefont|swf_defineline|swf_definepoly|swf_definerect|swf_definetext|swf_endbutton|swf_enddoaction|swf_endshape|swf_endsymbol|swf_fontsize|swf_fontslant|swf_fonttracking|swf_getbitmapinfo|swf_getfontinfo|swf_getframe|swf_labelframe|swf_lookat|swf_modifyobject|swf_mulcolor|swf_nextid|swf_oncondition|swf_openfile|swf_ortho|swf_ortho2|swf_perspective|swf_placeobject|swf_polarview|swf_popmatrix|swf_posround|swf_pushmatrix|swf_removeobject|swf_rotate|swf_scale|swf_setfont|swf_setframe|swf_shapearc|swf_shapecurveto|swf_shapecurveto3|swf_shapefillbitmapclip|swf_shapefillbitmaptile|swf_shapefilloff|swf_shapefillsolid|swf_shapelinesolid|swf_shapelineto|swf_shapemoveto|swf_showframe|swf_startbutton|swf_startdoaction|swf_startshape|swf_startsymbol|swf_textwidth|swf_translate|swf_viewport|swfaction|swfbitmap|swfbutton|swfdisplayitem|swffill|swffont|swffontchar|swfgradient|swfmorph|swfmovie|swfprebuiltclip|swfshape|swfsound|swfsoundinstance|swfsprite|swftext|swftextfield|swfvideostream|swish_construct|swish_getmetalist|swish_getpropertylist|swish_prepare|swish_query|swishresult_getmetalist|swishresult_stem|swishresults_getparsedwords|swishresults_getremovedstopwords|swishresults_nextresult|swishresults_seekresult|swishsearch_execute|swishsearch_resetlimit|swishsearch_setlimit|swishsearch_setphrasedelimiter|swishsearch_setsort|swishsearch_setstructure|sybase_affected_rows|sybase_close|sybase_connect|sybase_data_seek|sybase_deadlock_retry_count|sybase_fetch_array|sybase_fetch_assoc|sybase_fetch_field|sybase_fetch_object|sybase_fetch_row|sybase_field_seek|sybase_free_result|sybase_get_last_message|sybase_min_client_severity|sybase_min_error_severity|sybase_min_message_severity|sybase_min_server_severity|sybase_num_fields|sybase_num_rows|sybase_pconnect|sybase_query|sybase_result|sybase_select_db|sybase_set_message_handler|sybase_unbuffered_query|symlink|sys_get_temp_dir|sys_getloadavg|syslog|system|tag|tan|tanh|tcpwrap_check|tempnam|textdomain|tidy|tidy_access_count|tidy_config_count|tidy_diagnose|tidy_error_count|tidy_get_error_buffer|tidy_get_output|tidy_load_config|tidy_reset_config|tidy_save_config|tidy_set_encoding|tidy_setopt|tidy_warning_count|tidynode|time|time_nanosleep|time_sleep_until|timezone_abbreviations_list|timezone_identifiers_list|timezone_location_get|timezone_name_from_abbr|timezone_name_get|timezone_offset_get|timezone_open|timezone_transitions_get|timezone_version_get|tmpfile|token_get_all|token_name|tokyotyrant|tokyotyrantquery|tokyotyranttable|tostring|tostring|touch|transliterator|traversable|trigger_error|trim|uasort|ucfirst|ucwords|udm_add_search_limit|udm_alloc_agent|udm_alloc_agent_array|udm_api_version|udm_cat_list|udm_cat_path|udm_check_charset|udm_check_stored|udm_clear_search_limits|udm_close_stored|udm_crc32|udm_errno|udm_error|udm_find|udm_free_agent|udm_free_ispell_data|udm_free_res|udm_get_doc_count|udm_get_res_field|udm_get_res_param|udm_hash32|udm_load_ispell_data|udm_open_stored|udm_set_agent_param|uksort|umask|underflowexception|unexpectedvalueexception|uniqid|unixtojd|unlink|unpack|unregister_tick_function|unserialize|unset|urldecode|urlencode|use_soap_error_handler|user_error|usleep|usort|utf8_decode|utf8_encode|v8js|v8jsexception|var_dump|var_export|variant|variant_abs|variant_add|variant_and|variant_cast|variant_cat|variant_cmp|variant_date_from_timestamp|variant_date_to_timestamp|variant_div|variant_eqv|variant_fix|variant_get_type|variant_idiv|variant_imp|variant_int|variant_mod|variant_mul|variant_neg|variant_not|variant_or|variant_pow|variant_round|variant_set|variant_set_type|variant_sub|variant_xor|version_compare|vfprintf|virtual|vpopmail_add_alias_domain|vpopmail_add_alias_domain_ex|vpopmail_add_domain|vpopmail_add_domain_ex|vpopmail_add_user|vpopmail_alias_add|vpopmail_alias_del|vpopmail_alias_del_domain|vpopmail_alias_get|vpopmail_alias_get_all|vpopmail_auth_user|vpopmail_del_domain|vpopmail_del_domain_ex|vpopmail_del_user|vpopmail_error|vpopmail_passwd|vpopmail_set_user_quota|vprintf|vsprintf|w32api_deftype|w32api_init_dtype|w32api_invoke_function|w32api_register_function|w32api_set_call_method|wddx_add_vars|wddx_deserialize|wddx_packet_end|wddx_packet_start|wddx_serialize_value|wddx_serialize_vars|win32_continue_service|win32_create_service|win32_delete_service|win32_get_last_control_message|win32_pause_service|win32_ps_list_procs|win32_ps_stat_mem|win32_ps_stat_proc|win32_query_service_status|win32_set_service_status|win32_start_service|win32_start_service_ctrl_dispatcher|win32_stop_service|wincache_fcache_fileinfo|wincache_fcache_meminfo|wincache_lock|wincache_ocache_fileinfo|wincache_ocache_meminfo|wincache_refresh_if_changed|wincache_rplist_fileinfo|wincache_rplist_meminfo|wincache_scache_info|wincache_scache_meminfo|wincache_ucache_add|wincache_ucache_cas|wincache_ucache_clear|wincache_ucache_dec|wincache_ucache_delete|wincache_ucache_exists|wincache_ucache_get|wincache_ucache_inc|wincache_ucache_info|wincache_ucache_meminfo|wincache_ucache_set|wincache_unlock|wordwrap|xattr_get|xattr_list|xattr_remove|xattr_set|xattr_supported|xdiff_file_bdiff|xdiff_file_bdiff_size|xdiff_file_bpatch|xdiff_file_diff|xdiff_file_diff_binary|xdiff_file_merge3|xdiff_file_patch|xdiff_file_patch_binary|xdiff_file_rabdiff|xdiff_string_bdiff|xdiff_string_bdiff_size|xdiff_string_bpatch|xdiff_string_diff|xdiff_string_diff_binary|xdiff_string_merge3|xdiff_string_patch|xdiff_string_patch_binary|xdiff_string_rabdiff|xhprof_disable|xhprof_enable|xhprof_sample_disable|xhprof_sample_enable|xml_error_string|xml_get_current_byte_index|xml_get_current_column_number|xml_get_current_line_number|xml_get_error_code|xml_parse|xml_parse_into_struct|xml_parser_create|xml_parser_create_ns|xml_parser_free|xml_parser_get_option|xml_parser_set_option|xml_set_character_data_handler|xml_set_default_handler|xml_set_element_handler|xml_set_end_namespace_decl_handler|xml_set_external_entity_ref_handler|xml_set_notation_decl_handler|xml_set_object|xml_set_processing_instruction_handler|xml_set_start_namespace_decl_handler|xml_set_unparsed_entity_decl_handler|xmlreader|xmlrpc_decode|xmlrpc_decode_request|xmlrpc_encode|xmlrpc_encode_request|xmlrpc_get_type|xmlrpc_is_fault|xmlrpc_parse_method_descriptions|xmlrpc_server_add_introspection_data|xmlrpc_server_call_method|xmlrpc_server_create|xmlrpc_server_destroy|xmlrpc_server_register_introspection_callback|xmlrpc_server_register_method|xmlrpc_set_type|xmlwriter_end_attribute|xmlwriter_end_cdata|xmlwriter_end_comment|xmlwriter_end_document|xmlwriter_end_dtd|xmlwriter_end_dtd_attlist|xmlwriter_end_dtd_element|xmlwriter_end_dtd_entity|xmlwriter_end_element|xmlwriter_end_pi|xmlwriter_flush|xmlwriter_full_end_element|xmlwriter_open_memory|xmlwriter_open_uri|xmlwriter_output_memory|xmlwriter_set_indent|xmlwriter_set_indent_string|xmlwriter_start_attribute|xmlwriter_start_attribute_ns|xmlwriter_start_cdata|xmlwriter_start_comment|xmlwriter_start_document|xmlwriter_start_dtd|xmlwriter_start_dtd_attlist|xmlwriter_start_dtd_element|xmlwriter_start_dtd_entity|xmlwriter_start_element|xmlwriter_start_element_ns|xmlwriter_start_pi|xmlwriter_text|xmlwriter_write_attribute|xmlwriter_write_attribute_ns|xmlwriter_write_cdata|xmlwriter_write_comment|xmlwriter_write_dtd|xmlwriter_write_dtd_attlist|xmlwriter_write_dtd_element|xmlwriter_write_dtd_entity|xmlwriter_write_element|xmlwriter_write_element_ns|xmlwriter_write_pi|xmlwriter_write_raw|xpath_eval|xpath_eval_expression|xpath_new_context|xpath_register_ns|xpath_register_ns_auto|xptr_eval|xptr_new_context|xslt_backend_info|xslt_backend_name|xslt_backend_version|xslt_create|xslt_errno|xslt_error|xslt_free|xslt_getopt|xslt_process|xslt_set_base|xslt_set_encoding|xslt_set_error_handler|xslt_set_log|xslt_set_object|xslt_set_sax_handler|xslt_set_sax_handlers|xslt_set_scheme_handler|xslt_set_scheme_handlers|xslt_setopt|xsltprocessor|yaml_emit|yaml_emit_file|yaml_parse|yaml_parse_file|yaml_parse_url|yaz_addinfo|yaz_ccl_conf|yaz_ccl_parse|yaz_close|yaz_connect|yaz_database|yaz_element|yaz_errno|yaz_error|yaz_es|yaz_es_result|yaz_get_option|yaz_hits|yaz_itemorder|yaz_present|yaz_range|yaz_record|yaz_scan|yaz_scan_result|yaz_schema|yaz_search|yaz_set_option|yaz_sort|yaz_syntax|yaz_wait|yp_all|yp_cat|yp_err_string|yp_errno|yp_first|yp_get_default_domain|yp_master|yp_match|yp_next|yp_order|zend_logo_guid|zend_thread_id|zend_version|zip_close|zip_entry_close|zip_entry_compressedsize|zip_entry_compressionmethod|zip_entry_filesize|zip_entry_name|zip_entry_open|zip_entry_read|zip_open|zip_read|ziparchive|ziparchive_addemptydir|ziparchive_addfile|ziparchive_addfromstring|ziparchive_close|ziparchive_deleteindex|ziparchive_deletename|ziparchive_extractto|ziparchive_getarchivecomment|ziparchive_getcommentindex|ziparchive_getcommentname|ziparchive_getfromindex|ziparchive_getfromname|ziparchive_getnameindex|ziparchive_getstatusstring|ziparchive_getstream|ziparchive_locatename|ziparchive_open|ziparchive_renameindex|ziparchive_renamename|ziparchive_setCommentName|ziparchive_setarchivecomment|ziparchive_setcommentindex|ziparchive_statindex|ziparchive_statname|ziparchive_unchangeall|ziparchive_unchangearchive|ziparchive_unchangeindex|ziparchive_unchangename|zlib_get_coding_type".split("|")),e=p.arrayToMap("abstract|and|array|as|break|case|catch|class|clone|const|continue|declare|default|do|else|elseif|enddeclare|endfor|endforeach|endif|endswitch|endwhile|extends|final|for|foreach|function|global|goto|if|implements|interface|instanceof|namespace|new|or|private|protected|public|static|switch|throw|try|use|var|while|xor".split("|")),x=p.arrayToMap("die|echo|empty|exit|eval|include|include_once|isset|list|require|require_once|return|print|unset".split("|")),w=p.arrayToMap("true|false|null|__CLASS__|__DIR__|__FILE__|__LINE__|__METHOD__|__FUNCTION__|__NAMESPACE__".split("|")),v=p.arrayToMap("$GLOBALS|$_SERVER|$_GET|$_POST|$_FILES|$_REQUEST|$_SESSION|$_ENV|$_COOKIE|$php_errormsg|$HTTP_RAW_POST_DATA|$http_response_header|$argc|$argv".split("|")),u=p.arrayToMap("key_exists|cairo_matrix_create_scale|cairo_matrix_create_translate|call_user_method|call_user_method_array|com_addref|com_get|com_invoke|com_isenum|com_load|com_release|com_set|connection_timeout|cubrid_load_from_glo|cubrid_new_glo|cubrid_save_to_glo|cubrid_send_glo|define_syslog_variables|dl|ereg|ereg_replace|eregi|eregi_replace|hw_documentattributes|hw_documentbodytag|hw_documentsize|hw_outputdocument|imagedashedline|maxdb_bind_param|maxdb_bind_result|maxdb_client_encoding|maxdb_close_long_data|maxdb_execute|maxdb_fetch|maxdb_get_metadata|maxdb_param_count|maxdb_send_long_data|mcrypt_ecb|mcrypt_generic_end|mime_content_type|mysql_createdb|mysql_dbname|mysql_db_query|mysql_drop_db|mysql_dropdb|mysql_escape_string|mysql_fieldflags|mysql_fieldflags|mysql_fieldname|mysql_fieldtable|mysql_fieldtype|mysql_freeresult|mysql_listdbs|mysql_list_fields|mysql_listfields|mysql_list_tables|mysql_listtables|mysql_numfields|mysql_numrows|mysql_selectdb|mysql_tablename|mysqli_bind_param|mysqli_bind_result|mysqli_disable_reads_from_master|mysqli_disable_rpl_parse|mysqli_enable_reads_from_master|mysqli_enable_rpl_parse|mysqli_execute|mysqli_fetch|mysqli_get_metadata|mysqli_master_query|mysqli_param_count|mysqli_rpl_parse_enabled|mysqli_rpl_probe|mysqli_rpl_query_type|mysqli_send_long_data|mysqli_send_query|mysqli_slave_query|ocibindbyname|ocicancel|ocicloselob|ocicollappend|ocicollassign|ocicollassignelem|ocicollgetelem|ocicollmax|ocicollsize|ocicolltrim|ocicolumnisnull|ocicolumnname|ocicolumnprecision|ocicolumnscale|ocicolumnsize|ocicolumntype|ocicolumntyperaw|ocicommit|ocidefinebyname|ocierror|ociexecute|ocifetch|ocifetchinto|ocifetchstatement|ocifreecollection|ocifreecursor|ocifreedesc|ocifreestatement|ociinternaldebug|ociloadlob|ocilogoff|ocilogon|ocinewcollection|ocinewcursor|ocinewdescriptor|ocinlogon|ocinumcols|ociparse|ociplogon|ociresult|ocirollback|ocirowcount|ocisavelob|ocisavelobfile|ociserverversion|ocisetprefetch|ocistatementtype|ociwritelobtofile|ociwritetemporarylob|PDF_add_annotation|PDF_add_bookmark|PDF_add_launchlink|PDF_add_locallink|PDF_add_note|PDF_add_outline|PDF_add_pdflink|PDF_add_weblink|PDF_attach_file|PDF_begin_page|PDF_begin_template|PDF_close_pdi|PDF_close|PDF_findfont|PDF_get_font|PDF_get_fontname|PDF_get_fontsize|PDF_get_image_height|PDF_get_image_width|PDF_get_majorversion|PDF_get_minorversion|PDF_get_pdi_parameter|PDF_get_pdi_value|PDF_open_ccitt|PDF_open_file|PDF_open_gif|PDF_open_image_file|PDF_open_image|PDF_open_jpeg|PDF_open_pdi|PDF_open_tiff|PDF_place_image|PDF_place_pdi_page|PDF_set_border_color|PDF_set_border_dash|PDF_set_border_style|PDF_set_char_spacing|PDF_set_duration|PDF_set_horiz_scaling|PDF_set_info_author|PDF_set_info_creator|PDF_set_info_keywords|PDF_set_info_subject|PDF_set_info_title|PDF_set_leading|PDF_set_text_matrix|PDF_set_text_rendering|PDF_set_text_rise|PDF_set_word_spacing|PDF_setgray_fill|PDF_setgray_stroke|PDF_setgray|PDF_setpolydash|PDF_setrgbcolor_fill|PDF_setrgbcolor_stroke|PDF_setrgbcolor|PDF_show_boxed|php_check_syntax|px_set_tablename|px_set_targetencoding|runkit_sandbox_output_handler|session_is_registered|session_register|session_unregisterset_magic_quotes_runtime|magic_quotes_runtime|set_socket_blocking|socket_set_blocking|set_socket_timeout|socket_set_timeout|split|spliti|sql_regcase".split("|")),t=p.arrayToMap("cfunction|old_function".split("|")),s=p.arrayToMap([]);this.$rules={start:[{token:"support",regex:"<\\?(?:php|\\=)"},{token:"support",regex:"\\?>"},{token:"comment",regex:"\\/\\/.*$"},{token:"comment",regex:"#.*$"},(new o).getStartRule("doc-start"),{token:"comment",merge:!0,regex:"\\/\\*",next:"comment"},{token:"string.regexp",regex:"[/](?:(?:\\[(?:\\\\]|[^\\]])+\\])|(?:\\\\/|[^\\]/]))*[/][gimy]*\\s*(?=[).,;]|$)"},{token:"string",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]'},{token:"string",merge:!0,regex:'["].*\\\\$',next:"qqstring"},{token:"string",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"string",merge:!0,regex:"['].*\\\\$",next:"qstring"},{token:"constant.numeric",regex:"0[xX][0-9a-fA-F]+\\b"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"constant.language",regex:"\\b(?:DEFAULT_INCLUDE_PATH|E_(?:ALL|CO(?:MPILE_(?:ERROR|WARNING)|RE_(?:ERROR|WARNING))|ERROR|NOTICE|PARSE|STRICT|USER_(?:ERROR|NOTICE|WARNING)|WARNING)|P(?:EAR_(?:EXTENSION_DIR|INSTALL_DIR)|HP_(?:BINDIR|CONFIG_FILE_(?:PATH|SCAN_DIR)|DATADIR|E(?:OL|XTENSION_DIR)|INT_(?:MAX|SIZE)|L(?:IBDIR|OCALSTATEDIR)|O(?:S|UTPUT_HANDLER_(?:CONT|END|START))|PREFIX|S(?:API|HLIB_SUFFIX|YSCONFDIR)|VERSION))|__COMPILER_HALT_OFFSET__)\\b"},{token:"constant.language",regex:"\\b(?:A(?:B(?:DAY_(?:1|2|3|4|5|6|7)|MON_(?:1(?:0|1|2|)|2|3|4|5|6|7|8|9))|LT_DIGITS|M_STR|SSERT_(?:ACTIVE|BAIL|CALLBACK|QUIET_EVAL|WARNING))|C(?:ASE_(?:LOWER|UPPER)|HAR_MAX|O(?:DESET|NNECTION_(?:ABORTED|NORMAL|TIMEOUT)|UNT_(?:NORMAL|RECURSIVE))|R(?:EDITS_(?:ALL|DOCS|FULLPAGE|G(?:ENERAL|ROUP)|MODULES|QA|SAPI)|NCYSTR|YPT_(?:BLOWFISH|EXT_DES|MD5|S(?:ALT_LENGTH|TD_DES)))|URRENCY_SYMBOL)|D(?:AY_(?:1|2|3|4|5|6|7)|ECIMAL_POINT|IRECTORY_SEPARATOR|_(?:FMT|T_FMT))|E(?:NT_(?:COMPAT|NOQUOTES|QUOTES)|RA(?:_(?:D_(?:FMT|T_FMT)|T_FMT|YEAR)|)|XTR_(?:IF_EXISTS|OVERWRITE|PREFIX_(?:ALL|I(?:F_EXISTS|NVALID)|SAME)|SKIP))|FRAC_DIGITS|GROUPING|HTML_(?:ENTITIES|SPECIALCHARS)|IN(?:FO_(?:ALL|C(?:ONFIGURATION|REDITS)|ENVIRONMENT|GENERAL|LICENSE|MODULES|VARIABLES)|I_(?:ALL|PERDIR|SYSTEM|USER)|T_(?:CURR_SYMBOL|FRAC_DIGITS))|L(?:C_(?:ALL|C(?:OLLATE|TYPE)|M(?:ESSAGES|ONETARY)|NUMERIC|TIME)|O(?:CK_(?:EX|NB|SH|UN)|G_(?:A(?:LERT|UTH(?:PRIV|))|C(?:ONS|R(?:IT|ON))|D(?:AEMON|EBUG)|E(?:MERG|RR)|INFO|KERN|L(?:OCAL(?:0|1|2|3|4|5|6|7)|PR)|MAIL|N(?:DELAY|EWS|O(?:TICE|WAIT))|ODELAY|P(?:ERROR|ID)|SYSLOG|U(?:SER|UCP)|WARNING)))|M(?:ON_(?:1(?:0|1|2|)|2|3|4|5|6|7|8|9|DECIMAL_POINT|GROUPING|THOUSANDS_SEP)|_(?:1_PI|2_(?:PI|SQRTPI)|E|L(?:N(?:10|2)|OG(?:10E|2E))|PI(?:_(?:2|4)|)|SQRT(?:1_2|2)))|N(?:EGATIVE_SIGN|O(?:EXPR|STR)|_(?:CS_PRECEDES|S(?:EP_BY_SPACE|IGN_POSN)))|P(?:ATH(?:INFO_(?:BASENAME|DIRNAME|EXTENSION)|_SEPARATOR)|M_STR|OSITIVE_SIGN|_(?:CS_PRECEDES|S(?:EP_BY_SPACE|IGN_POSN)))|RADIXCHAR|S(?:EEK_(?:CUR|END|SET)|ORT_(?:ASC|DESC|NUMERIC|REGULAR|STRING)|TR_PAD_(?:BOTH|LEFT|RIGHT))|T(?:HOUS(?:ANDS_SEP|EP)|_FMT(?:_AMPM|))|YES(?:EXPR|STR)|STD(?:IN|OUT|ERR))\\b"},{token:function(a){return t.hasOwnProperty(a)?"invalid.deprecated":e.hasOwnProperty(a)?"keyword":x.hasOwnProperty(a)?"keyword":w.hasOwnProperty(a)?"constant.language":v.hasOwnProperty(a)?"variable.language":s.hasOwnProperty(a)?"invalid.illegal":u.hasOwnProperty(a)?"invalid.deprecated":f.hasOwnProperty(a)?"support.function":a.match(/^(\$[a-zA-Z_][a-zA-Z0-9_]*|self|parent)$/)?"variable":"identifier"},regex:"[a-zA-Z_$][a-zA-Z0-9_$]*\\b"},{token:"keyword.operator",regex:"!|\\$|%|&|\\*|\\-\\-|\\-|\\+\\+|\\+|~|===|==|=|!=|!==|<=|>=|<<=|>>=|>>>=|<>|<|>|!|&&|\\|\\||\\?\\:|\\*=|%=|\\+=|\\-=|&=|\\^=|\\b(?:in|instanceof|new|delete|typeof|void)"},{token:"lparen",regex:"[[({]"},{token:"rparen",regex:"[\\])}]"},{token:"text",regex:"\\s+"}],comment:[{token:"comment",regex:".*?\\*\\/",next:"start"},{token:"comment",merge:!0,regex:".+"}],qqstring:[{token:"string",regex:'(?:(?:\\\\.)|(?:[^"\\\\]))*?"',next:"start"},{token:"string",merge:!0,regex:".+"}],qstring:[{token:"string",regex:"(?:(?:\\\\.)|(?:[^'\\\\]))*?'",next:"start"},{token:"string",merge:!0,regex:".+"}]},this.embedRules(o,"doc-",[(new o).getEndRule("start")])};q.inherits(m,n),j.PhpHighlightRules=m}),define("ace/mode/doc_comment_highlight_rules",["require","exports","module","pilot/oop","ace/mode/text_highlight_rules"],function(j,g,o){var n=j("pilot/oop"),m=j("ace/mode/text_highlight_rules").TextHighlightRules,k=function(){this.$rules={start:[{token:"comment.doc.tag",regex:"@[\\w\\d_]+"},{token:"comment.doc",merge:!0,regex:"\\s+"},{token:"comment.doc",merge:!0,regex:"TODO"},{token:"comment.doc",merge:!0,regex:"[^@\\*]+"},{token:"comment.doc",merge:!0,regex:"."}]}};n.inherits(k,m),function(){this.getStartRule=function(b){return{token:"comment.doc",merge:!0,regex:"\\/\\*(?=\\*)",next:b}},this.getEndRule=function(b){return{token:"comment.doc",merge:!0,regex:"\\*\\/",next:b}}}.call(k.prototype),g.DocCommentHighlightRules=k}),define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(g,f,m){var k=g("ace/range").Range,j=function(){};(function(){this.checkOutdent=function(d,c){return/^\s+$/.test(d)?/^\s*\}/.test(c):!1},this.autoOutdent=function(n,d){var s=n.getLine(d),r=s.match(/^(\s*\})/);if(!r){return 0}var q=r[1].length,p=n.findMatchingBracket({row:d,column:q});if(!p||p.row==d){return 0}var o=this.$getIndent(n.getLine(p.row));n.replace(new k(d,0,d,q-1),o)},this.$getIndent=function(d){var c=d.match(/^(\s+)/);return c?c[1]:""}}).call(j.prototype),f.MatchingBraceOutdent=j}),define("ace/mode/behaviour/cstyle",["require","exports","module","pilot/oop","ace/mode/behaviour"],function(j,g,o){var n=j("pilot/oop"),m=j("ace/mode/behaviour").Behaviour,k=function(){this.add("braces","insertion",function(C,B,A,z,y){if(y=="{"){var x=A.getSelectionRange(),w=z.doc.getTextRange(x);return w!==""?{text:"{"+w+"}",selection:!1}:{text:"{}",selection:[1,1]}}if(y=="}"){var v=A.getCursorPosition(),u=z.doc.getLine(v.row),t=u.substring(v.column,v.column+1);if(t=="}"){var s=z.$findOpeningBracket("}",{column:v.column+1,row:v.row});if(s!==null){return{text:"",selection:[1,1]}}}}else{if(y=="\n"){var v=A.getCursorPosition(),u=z.doc.getLine(v.row),t=u.substring(v.column,v.column+1);if(t=="}"){var r=z.findMatchingBracket({row:v.row,column:v.column+1});if(!r){return !1}var q=this.getNextLineIndent(C,u.substring(0,u.length-1),z.getTabString()),p=this.$getIndent(z.doc.getLine(r.row));return{text:"\n"+q+"\n"+p,selection:[1,q.length,1,q.length]}}}}return !1}),this.add("braces","deletion",function(q,p,w,v,u){var t=v.doc.getTextRange(u);if(!u.isMultiLine()&&t=="{"){var s=v.doc.getLine(u.start.row),r=s.substring(u.end.column,u.end.column+1);if(r=="}"){return u.end.column++,u}}return !1}),this.add("parens","insertion",function(z,y,x,w,v){if(v=="("){var u=x.getSelectionRange(),t=w.doc.getTextRange(u);return t!==""?{text:"("+t+")",selection:!1}:{text:"()",selection:[1,1]}}if(v==")"){var s=x.getCursorPosition(),r=w.doc.getLine(s.row),q=r.substring(s.column,s.column+1);if(q==")"){var p=w.$findOpeningBracket(")",{column:s.column+1,row:s.row});if(p!==null){return{text:"",selection:[1,1]}}}}return !1}),this.add("parens","deletion",function(q,p,w,v,u){var t=v.doc.getTextRange(u);if(!u.isMultiLine()&&t=="("){var s=v.doc.getLine(u.start.row),r=s.substring(u.start.column+1,u.start.column+2);if(r==")"){return u.end.column++,u}}return !1}),this.add("string_dquotes","insertion",function(F,E,D,C,B){if(B=='"'){var A=D.getSelectionRange(),z=C.doc.getTextRange(A);if(z!==""){return{text:'"'+z+'"',selection:!1}}var y=D.getCursorPosition(),x=C.doc.getLine(y.row),w=x.substring(y.column-1,y.column);if(w=="\\"){return !1}var v=C.getTokens(A.start.row,A.start.row)[0].tokens,u=0,t,s=-1;for(var r=0;r<v.length;r++){t=v[r],t.type=="string"?s=-1:s<0&&(s=t.value.indexOf('"'));if(t.value.length+u>A.start.column){break}u+=v[r].value.length}if(!t||s<0&&t.type!=="comment"&&(t.type!=="string"||A.start.column!==t.value.length+u-1&&t.value.lastIndexOf('"')===t.value.length-1)){return{text:'""',selection:[1,1]}}if(t&&t.type==="string"){var q=x.substring(y.column,y.column+1);if(q=='"'){return{text:"",selection:[1,1]}}}}return !1}),this.add("string_dquotes","deletion",function(q,p,w,v,u){var t=v.doc.getTextRange(u);if(!u.isMultiLine()&&t=='"'){var s=v.doc.getLine(u.start.row),r=s.substring(u.start.column+1,u.start.column+2);if(r=='"'){return u.end.column++,u}}return !1})};n.inherits(k,m),g.CstyleBehaviour=k});define("ace/mode/xml",["require","exports","module","pilot/oop","ace/mode/text","ace/tokenizer","ace/mode/xml_highlight_rules","ace/mode/behaviour/xml"],function(s,r,q){var p=s("pilot/oop"),o=s("ace/mode/text").Mode,n=s("ace/tokenizer").Tokenizer,m=s("ace/mode/xml_highlight_rules").XmlHighlightRules,k=s("ace/mode/behaviour/xml").XmlBehaviour,j=function(){this.$tokenizer=new n((new m).getRules()),this.$behaviour=new k};p.inherits(j,o),function(){this.getNextLineIndent=function(e,d,f){return this.$getIndent(d)}}.call(j.prototype),r.Mode=j}),define("ace/mode/xml_highlight_rules",["require","exports","module","pilot/oop","ace/mode/text_highlight_rules"],function(j,g,o){var n=j("pilot/oop"),m=j("ace/mode/text_highlight_rules").TextHighlightRules,k=function(){this.$rules={start:[{token:"text",regex:"<\\!\\[CDATA\\[",next:"cdata"},{token:"xml_pe",regex:"<\\?.*?\\?>"},{token:"comment",merge:!0,regex:"<\\!--",next:"comment"},{token:"text",regex:"<\\/?",next:"tag"},{token:"text",regex:"\\s+"},{token:"text",regex:"[^<]+"}],tag:[{token:"text",regex:">",next:"start"},{token:"keyword",regex:"[-_a-zA-Z0-9:]+"},{token:"text",regex:"\\s+"},{token:"string",regex:'".*?"'},{token:"string",merge:!0,regex:'["].*$',next:"qqstring"},{token:"string",regex:"'.*?'"},{token:"string",merge:!0,regex:"['].*$",next:"qstring"}],qstring:[{token:"string",regex:".*'",next:"tag"},{token:"string",merge:!0,regex:".+"}],qqstring:[{token:"string",regex:'.*"',next:"tag"},{token:"string",merge:!0,regex:".+"}],cdata:[{token:"text",regex:"\\]\\]>",next:"start"},{token:"text",regex:"\\s+"},{token:"text",regex:"(?:[^\\]]|\\](?!\\]>))+"}],comment:[{token:"comment",regex:".*?-->",next:"start"},{token:"comment",merge:!0,regex:".+"}]}};n.inherits(k,m),g.XmlHighlightRules=k}),define("ace/mode/behaviour/xml",["require","exports","module","pilot/oop","ace/mode/behaviour","ace/mode/behaviour/cstyle"],function(k,j,q){var p=k("pilot/oop"),o=k("ace/mode/behaviour").Behaviour,n=k("ace/mode/behaviour/cstyle").CstyleBehaviour,m=function(){this.inherit(n,["string_dquotes"]),this.add("brackets","insertion",function(D,C,B,A,z){if(z=="<"){var y=B.getSelectionRange(),x=A.doc.getTextRange(y);return x!==""?!1:{text:"<>",selection:[1,1]}}if(z==">"){var w=B.getCursorPosition(),v=A.doc.getLine(w.row),u=v.substring(w.column,w.column+1);if(u==">"){return{text:"",selection:[1,1]}}}else{if(z=="\n"){var w=B.getCursorPosition(),v=A.doc.getLine(w.row),t=v.substring(w.column,w.column+2);if(t=="</"){var s=this.$getIndent(A.doc.getLine(w.row))+A.getTabString(),r=this.$getIndent(A.doc.getLine(w.row));return{text:"\n"+s+"\n"+r,selection:[1,s.length,1,s.length]}}}}return !1})};p.inherits(m,o),j.XmlBehaviour=m}),define("ace/mode/behaviour/cstyle",["require","exports","module","pilot/oop","ace/mode/behaviour"],function(j,g,o){var n=j("pilot/oop"),m=j("ace/mode/behaviour").Behaviour,k=function(){this.add("braces","insertion",function(C,B,A,z,y){if(y=="{"){var x=A.getSelectionRange(),w=z.doc.getTextRange(x);return w!==""?{text:"{"+w+"}",selection:!1}:{text:"{}",selection:[1,1]}}if(y=="}"){var v=A.getCursorPosition(),u=z.doc.getLine(v.row),t=u.substring(v.column,v.column+1);if(t=="}"){var s=z.$findOpeningBracket("}",{column:v.column+1,row:v.row});if(s!==null){return{text:"",selection:[1,1]}}}}else{if(y=="\n"){var v=A.getCursorPosition(),u=z.doc.getLine(v.row),t=u.substring(v.column,v.column+1);if(t=="}"){var r=z.findMatchingBracket({row:v.row,column:v.column+1});if(!r){return !1}var q=this.getNextLineIndent(C,u.substring(0,u.length-1),z.getTabString()),p=this.$getIndent(z.doc.getLine(r.row));return{text:"\n"+q+"\n"+p,selection:[1,q.length,1,q.length]}}}}return !1}),this.add("braces","deletion",function(q,p,w,v,u){var t=v.doc.getTextRange(u);if(!u.isMultiLine()&&t=="{"){var s=v.doc.getLine(u.start.row),r=s.substring(u.end.column,u.end.column+1);if(r=="}"){return u.end.column++,u}}return !1}),this.add("parens","insertion",function(z,y,x,w,v){if(v=="("){var u=x.getSelectionRange(),t=w.doc.getTextRange(u);return t!==""?{text:"("+t+")",selection:!1}:{text:"()",selection:[1,1]}}if(v==")"){var s=x.getCursorPosition(),r=w.doc.getLine(s.row),q=r.substring(s.column,s.column+1);if(q==")"){var p=w.$findOpeningBracket(")",{column:s.column+1,row:s.row});if(p!==null){return{text:"",selection:[1,1]}}}}return !1}),this.add("parens","deletion",function(q,p,w,v,u){var t=v.doc.getTextRange(u);if(!u.isMultiLine()&&t=="("){var s=v.doc.getLine(u.start.row),r=s.substring(u.start.column+1,u.start.column+2);if(r==")"){return u.end.column++,u}}return !1}),this.add("string_dquotes","insertion",function(F,E,D,C,B){if(B=='"'){var A=D.getSelectionRange(),z=C.doc.getTextRange(A);if(z!==""){return{text:'"'+z+'"',selection:!1}}var y=D.getCursorPosition(),x=C.doc.getLine(y.row),w=x.substring(y.column-1,y.column);if(w=="\\"){return !1}var v=C.getTokens(A.start.row,A.start.row)[0].tokens,u=0,t,s=-1;for(var r=0;r<v.length;r++){t=v[r],t.type=="string"?s=-1:s<0&&(s=t.value.indexOf('"'));if(t.value.length+u>A.start.column){break}u+=v[r].value.length}if(!t||s<0&&t.type!=="comment"&&(t.type!=="string"||A.start.column!==t.value.length+u-1&&t.value.lastIndexOf('"')===t.value.length-1)){return{text:'""',selection:[1,1]}}if(t&&t.type==="string"){var q=x.substring(y.column,y.column+1);if(q=='"'){return{text:"",selection:[1,1]}}}}return !1}),this.add("string_dquotes","deletion",function(q,p,w,v,u){var t=v.doc.getTextRange(u);if(!u.isMultiLine()&&t=='"'){var s=v.doc.getLine(u.start.row),r=s.substring(u.start.column+1,u.start.column+2);if(r=='"'){return u.end.column++,u}}return !1})};n.inherits(k,m),g.CstyleBehaviour=k});define("ace/theme/twilight",["require","exports","module"],function(g,f,m){var k=g("pilot/dom"),j=".ace-twilight .ace_editor {  border: 2px solid rgb(159, 159, 159);}.ace-twilight .ace_editor.ace_focus {  border: 2px solid #327fbd;}.ace-twilight .ace_gutter {  width: 50px;  background: #e8e8e8;  color: #333;  overflow : hidden;}.ace-twilight .ace_gutter-layer {  width: 100%;  text-align: right;}.ace-twilight .ace_gutter-layer .ace_gutter-cell {  padding-right: 6px;}.ace-twilight .ace_print_margin {  width: 1px;  background: #e8e8e8;}.ace-twilight .ace_scroller {  background-color: #141414;}.ace-twilight .ace_text-layer {  cursor: text;  color: #F8F8F8;}.ace-twilight .ace_cursor {  border-left: 2px solid #A7A7A7;}.ace-twilight .ace_cursor.ace_overwrite {  border-left: 0px;  border-bottom: 1px solid #A7A7A7;} .ace-twilight .ace_marker-layer .ace_selection {  background: rgba(221, 240, 255, 0.20);}.ace-twilight .ace_marker-layer .ace_step {  background: rgb(198, 219, 174);}.ace-twilight .ace_marker-layer .ace_bracket {  margin: -1px 0 0 -1px;  border: 1px solid rgba(255, 255, 255, 0.25);}.ace-twilight .ace_marker-layer .ace_active_line {  background: rgba(255, 255, 255, 0.031);}       .ace-twilight .ace_invisible {  color: rgba(255, 255, 255, 0.25);}.ace-twilight .ace_keyword {  color:#CDA869;}.ace-twilight .ace_keyword.ace_operator {  }.ace-twilight .ace_constant {  color:#CF6A4C;}.ace-twilight .ace_constant.ace_language {  }.ace-twilight .ace_constant.ace_library {  }.ace-twilight .ace_constant.ace_numeric {  }.ace-twilight .ace_invalid {  }.ace-twilight .ace_invalid.ace_illegal {  color:#F8F8F8;background-color:rgba(86, 45, 86, 0.75);}.ace-twilight .ace_invalid.ace_deprecated {  text-decoration:underline;font-style:italic;color:#D2A8A1;}.ace-twilight .ace_support {  color:#9B859D;}.ace-twilight .ace_support.ace_function {  color:#DAD085;}.ace-twilight .ace_function.ace_buildin {  }.ace-twilight .ace_string {  color:#8F9D6A;}.ace-twilight .ace_string.ace_regexp {  color:#E9C062;}.ace-twilight .ace_comment {  font-style:italic;color:#5F5A60;}.ace-twilight .ace_comment.ace_doc {  }.ace-twilight .ace_comment.ace_doc.ace_tag {  }.ace-twilight .ace_variable {  color:#7587A6;}.ace-twilight .ace_variable.ace_language {  }.ace-twilight .ace_xml_pe {  color:#494949;}.ace-twilight .ace_meta {  }.ace-twilight .ace_meta.ace_tag {  color:#AC885B;}.ace-twilight .ace_meta.ace_tag.ace_input {  }.ace-twilight .ace_entity.ace_other.ace_attribute-name {  }.ace-twilight .ace_markup.ace_underline {    text-decoration:underline;}.ace-twilight .ace_markup.ace_heading {  color:#CF6A4C;}.ace-twilight .ace_markup.ace_heading.ace_1 {  }.ace-twilight .ace_markup.ace_heading.ace_2 {  }.ace-twilight .ace_markup.ace_heading.ace_3 {  }.ace-twilight .ace_markup.ace_heading.ace_4 {  }.ace-twilight .ace_markup.ace_heading.ace_5 {  }.ace-twilight .ace_markup.ace_heading.ace_6 {  }.ace-twilight .ace_markup.ace_list {  color:#F9EE98;}.ace-twilight .ace_collab.ace_user1 {     }";k.importCssString(j),f.cssClass="ace-twilight"});Ext.ux.AceComponent=Ext.extend(Ext.BoxComponent,{theme:"twilight",mode:"textile",fileUrl:afStudioWSUrls.getFilecontentUrl,file:null,fileParam:"file",loadingText:"loading...",loadingParams:{},afterRender:function(){Ext.ux.AceComponent.superclass.afterRender.call(this);this.initAce.defer(10,this)},onResize:function(d,b,a,c){if(this.editor){this.editor.resize()}},setFileUrl:function(a){this.fileUrl=a},setFile:function(a,b){this.file=a;if(b==true){this.loadFile(this.file)}},setCode:function(a){this.editor.getSession().setValue(a)},getCode:function(){return this.editor.getSession().getValue()},setMode:function(b){var a=(Ext.ux.AceComponent.modes.indexOf(b)!=-1)?require("ace/mode/"+b).Mode:require("ace/mode/textile").Mode;this.editor.getSession().setMode(new a())},setTheme:function(a){if(Ext.ux.AceComponent.themes.indexOf(a)!=-1){this.editor.setTheme("ace/theme/"+a)}},maskEditor:function(){this.el.mask(this.loadingText?this.loadingText:null)},unmaskEditor:function(){var a=this.el;if(a.isMasked()){a.unmask()}},loadFile:function(a){var b=Ext.apply({},this.loadingParams);b[this.fileParam]=a;this.maskEditor();Ext.Ajax.request({url:this.fileUrl,method:"GET",params:b,scope:this,success:function(d,e){this.unmaskEditor();var g=Ext.decode(d.responseText);if(g.success){this.file=a;if(g.data==null){this.setCode("");return}this.setMode(this.getModeByFileExtension(a));this.setCode(g.data)}else{this.setCode("");var f=String.format('File "{0}" loading failure. <br/> {1}',a,g.message?g.message:""),c="Ace editor";Ext.Msg.alert(c,f)}},failure:function(d,e){this.unmaskEditor();var f=String.format('File "{0}" loading failure. <br/> status code: {1} <br /> Message: {2}',a,xhr.status,xhr.statusText||"(none)"),c="Ace editor";Ext.Msg.alert(c,f)}})},initAce:function(){var a=ace.edit(this.el.dom);this.editor=a;this.setTheme(this.theme);if(!this.file){this.setMode(this.mode)}if(this.code&&!this.file){this.setCode(this.code)}if(this.file){this.loadFile(this.file)}},getModeByFileExtension:function(a){var b=/\.(\w+)$/.exec(a);b=b?b[1]:null;var c="textile";switch(b){case"php":case"phtml":c="php";break;case"js":c="javascript";break;case"css":c="css";break;case"html":case"htm":c="html";break;case"json":c="json";break;case"md":c="markdown";break;case"xml":c="xml";break}return c}});Ext.ux.AceComponent.modes=["textile","javascript","css","html","json","markdown","php","xml"];Ext.ux.AceComponent.themes=["twilight"];Ext.reg("ace",Ext.ux.AceComponent);Ext.namespace("afStudio.common");afStudio.common.WidgetLocation=Ext.extend(Ext.ux.form.GroupingComboBox,{url:afStudioWSUrls.moduleGroupedUrl,autoLoad:true,groupField:"group",typeField:"type",valueField:"value",displayField:"text",allowBlank:false,emptyText:"Please select widget location...",blankText:"Widget location is required",msgTarget:"qtip",mode:"local",forceSelection:true,fieldLabel:"Widget Location",loadingText:"Please wait...",initComponent:function(){var b=[this.valueField,this.displayField,this.groupField,this.typeField];var a={};if(Ext.isDefined(this.locationType)){a.type=this.locationType}this.store=new Ext.data.JsonStore({url:this.url,autoLoad:this.autoLoad,baseParams:a,root:"data",idProperty:this.valueField,fields:b,sortInfo:{field:this.typeField?this.typeField:this.groupField,direction:"ASC"}});afStudio.common.WidgetLocation.superclass.initComponent.call(this)},getValue:function(){var c=afStudio.common.WidgetLocation.superclass.getValue.call(this),e=null;if(!Ext.isEmpty(c)){var a=this.store.getById(c),b=a.get(this.groupField),d=a.get(this.typeField);e={"module":c,"place":b,"placeType":d}}return e}});Ext.reg("common.widgetlocation",afStudio.common.WidgetLocation);Ext.namespace("afStudio.common");afStudio.common.ModelFieldsGrid=Ext.extend(Ext.grid.GridPanel,{url:afStudioWSUrls.modelListUrl,autoLoadData:false,multiSelect:false,loadMask:true,border:false,autoScroll:true,autoExpandColumn:"name",_beforeInitComponent:function(){var c=this;var b=new Ext.data.JsonStore({url:c.url,autoLoad:c.autoLoadData,baseParams:{xaction:"read"},root:"data",idProperty:"id",fields:["id","name","type","size","required"]});var a=[{header:"Name",id:"name",sortable:true,dataIndex:"name"},{header:"Type",width:110,sortable:true,align:"center",dataIndex:"type"},{header:"Size",width:44,sortable:true,align:"right",dataIndex:"size"}];var d=null;if(c.multiSelect===true){d=new Ext.grid.CheckboxSelectionModel();a.unshift(d)}else{d=new Ext.grid.RowSelectionModel({singleSelect:true})}return{store:b,selModel:d,columns:a}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.common.ModelFieldsGrid.superclass.initComponent.call(this)}});Ext.reg("common.mfieldsgrid",afStudio.common.ModelFieldsGrid);afStudio.CreateProjectWizard=Ext.extend(Ext.Window,{initComponent:function(){this.initForm1();this.initForm2();this.initForm3();this.initForm4();var a={title:"Your new Project",width:493,closable:true,draggable:true,plain:true,modal:true,resizable:false,bodyBorder:false,border:false,items:[this.form1,this.form2,this.form3,this.form4],buttons:[{text:"Previous",handler:this.previous,scope:this,hidden:true},{text:"Next",handler:this.next,scope:this},{text:"Save Project",handler:this.save,scope:this,hidden:true}],buttonAlign:"right",listeners:{show:function(){for(var b in this.dataview.store.data.items){if(this.dataview.store.data.items[b].json&&afTemplateConfig.template.current==this.dataview.store.data.items[b].json[1].toLowerCase()){this.dataview.selectRange(b,b)}}}}};Ext.apply(this,Ext.apply(this.initialConfig,a));afStudio.CreateProjectWizard.superclass.initComponent.apply(this,arguments)},initForm1:function(){_self=this;var a=[{xtype:"displayfield",name:"infor",hideLabel:true,anchor:"100%",value:'<div  class="guide_header"> <div class="date_cover"> <div>01</div> </div> <h2>This wizard will help guide you through a few steps to setup your new AppFlower Project.</h2> </div> <br> Please choose your project name.',style:"margin-bottom: 15px;"},{xtype:"textfield",enableKeyEvents:true,fieldLabel:"Project name<font color=red>*</font>",anchor:"96%",name:"name",allowBlank:false,vtype:"uniqueNode",listeners:{keyup:function(c,b){var d=c.getValue()}}}];this.form1=new Ext.FormPanel({url:"",defaultType:"textfield",width:480,labelWidth:70,frame:true,title:false,defaults:{allowBlank:false,anchor:"95%"},items:a})},initForm2:function(){_self=this;this.initDataview();var a=[{xtype:"displayfield",name:"infor",hideLabel:true,anchor:"100%",value:'<div  class="guide_header"> <div class="date_cover"> <div>02</div> </div> <h2>Please select how your want your application theme to look like by selecting one of the templates below.</h2> </div>',style:"margin-bottom: 15px;"},this.dataview];this.form2=new Ext.FormPanel({url:"",defaultType:"textfield",width:480,labelWidth:70,frame:true,title:false,hidden:true,defaults:{allowBlank:false,anchor:"95%"},items:a})},initDataview:function(){var b=[["desktoptemplate","Desktop","template_desktop.png"],["viewporttemplate","Viewport","template_viewport.png"]];var a=new Ext.data.SimpleStore({fields:[{name:"id"},{name:"name"},{name:"img"}],sortInfo:{field:"name",direction:"ASC"}});a.loadData(b);this.dataview=new Ext.DataView({itemSelector:"div.thumb-wrap",style:"overflow:auto",multiSelect:true,store:a,tpl:new Ext.XTemplate('<tpl for=".">','<div class="thumb-wrap" id="{id}">','<div class="thumb"><img src="appFlowerStudioPlugin/images/{img}"></div>',"<span>{name}</span></div>","</tpl>")})},initForm3:function(){var a=[{xtype:"displayfield",name:"infor",hideLabel:true,anchor:"100%",value:'<div  class="guide_header"> <div class="date_cover"> <div>03</div> </div> <h2>Please add your first user for this new project.</h2> </div>',style:"margin-bottom: 15px;"},{xtype:"panel",layout:"column",border:false,bodyBorder:false,defaults:{border:false,bodyBorder:false},items:[{xtype:"panel",columnWidth:0.5,layout:"form",style:"margin-right: 5px;",items:[{xtype:"textfield",name:"first_name",fieldLabel:"First Name<font color=red>*</font>",value:afStudioUser.first_name,allowBlank:false,anchor:"92%"}]},{xtype:"panel",layout:"form",columnWidth:0.5,items:[{xtype:"textfield",name:"last_name",fieldLabel:"Last Name<font color=red>*</font>",value:afStudioUser.last_name,allowBlank:false,anchor:"92%"}]},{xtype:"panel",columnWidth:0.5,layout:"form",style:"margin-right: 5px;",items:[{xtype:"textfield",name:"username",fieldLabel:"Username<font color=red>*</font>",value:afStudioUser.username,allowBlank:false,vtype:"username",anchor:"92%"}]},{xtype:"panel",layout:"form",columnWidth:0.5,items:[{xtype:"textfield",name:"email",fieldLabel:"Email<font color=red>*</font>",vtype:"email",value:afStudioUser.email,allowBlank:false,anchor:"92%"}]},{xtype:"panel",columnWidth:0.5,layout:"form",style:"margin-right: 5px;",items:[{xtype:"textfield",name:"password",inputType:"password",fieldLabel:"Password<font color=red>*</font>",allowBlank:false,anchor:"92%"}]},{xtype:"panel",layout:"form",columnWidth:0.5,items:[{xtype:"textfield",name:"repassword",inputType:"password",fieldLabel:"Retype Password<font color=red>*</font>",allowBlank:false,vtype:"checkPassword",anchor:"92%"}]}]},{name:"role",inputType:"hidden",value:"admin"}];this.form3=new Ext.FormPanel({url:"",defaultType:"textfield",width:480,labelWidth:70,frame:true,title:false,hidden:true,defaults:{allowBlank:false,anchor:"100%"},items:a})},initForm4:function(){var a=[{xtype:"displayfield",name:"infor",hideLabel:true,anchor:"100%",style:"margin-bottom: 15px;"}];this.form4=new Ext.FormPanel({url:"",defaultType:"textfield",width:480,labelWidth:70,frame:true,title:false,hidden:true,defaults:{allowBlank:false,anchor:"95%"},items:a})},currentItem:0,next:function(){if(this.items.get(this.currentItem).getForm().isValid()){if(this.currentItem==2){var a=this.form1.getForm().findField("name").getValue();var b='<div  class="guide_header">    <div class="date_cover">        <div>04</div>    </div>    <h2>To connect to your new project from your browser,        you need to ensure your web server is configured to serve the new web project.    </h2></div><br><p>In Apache, this is usually done with the usage of Virtual Hosts.<br /> This can be configured in your Apache Configuration file.<br />This way, you\'ll have direct access to your new project, from your browser.<br />For more instructions on how to configure your apache virtual host - please refer to <a href="http://www.appflower.com/cms/learningcenter" target="_blank">online documentation</a>.</p>';b+="<br /><p><i><b>Create Project Wizard</b> will try to set up Apache virtual host automatically for you.</i></p>";this.form4.getForm().findField("infor").update(b)}this.nextForm()}},nextForm:function(){this.items.get(this.currentItem).hide();this.currentItem++;this.items.get(this.currentItem).show();this.setWindowTitle()},previous:function(){this.items.get(this.currentItem).hide();this.currentItem--;this.items.get(this.currentItem).show();this.setWindowTitle()},save:function(){var c=this;var a=new Ext.LoadMask(this.getEl(),{msg:"<b>Creating new project</b> <br>Please wait..",removeMask:true});a.show();var b=this.form1.getForm().findField("name").getValue();Ext.Ajax.request({url:Ext.urlAppend(afStudioWSUrls.project,Ext.urlEncode({cmd:"saveWizard"})),params:{name:b,template:this.dataview.getSelectedRecords()[0].get("name").toLowerCase(),userForm:Ext.encode(this.form3.getForm().getValues()),},success:function(d,e){var f=Ext.decode(d.responseText);if(f.success){afStudio.Msg.info(f.message)}else{afStudio.Msg.error(f.message)}afStudio.updateConsole(f.console);a.hide();c.close()}})},setWindowTitle:function(){switch(this.currentItem){case 0:this.setTitle("Create New Project");this.buttons[0].hide();break;case 1:this.setTitle("Select Project's Template");this.buttons[1].show();this.buttons[2].hide();break;case 2:this.setTitle("Create Your New Studio User");this.buttons[1].show();this.buttons[2].hide();break;case 3:this.setTitle("Setup A Virtual Host");this.buttons[1].hide();this.buttons[2].show();break}this.center()}});afStudio.databaseConnectionSettings=Ext.extend(Ext.Window,{form:null,initComponent:function(){this.createForm();var a={title:"Database Connection Settings",width:463,autoHeight:true,closable:true,draggable:true,plain:true,modal:true,resizable:false,bodyBorder:false,border:false,items:this.form,buttons:[{text:"Save",handler:this.saveDatabaseSettings,scope:this},{text:"Cancel",handler:this.cancel,scope:this}],buttonAlign:"center"};Ext.apply(this,Ext.apply(this.initialConfig,a));afStudio.databaseConnectionSettings.superclass.initComponent.apply(this,arguments);this.show()},createForm:function(){this.form=new Ext.FormPanel({url:window.afStudioWSUrls.getConfigureDatabaseUrl(),defaultType:"textfield",width:450,frame:true,labelWidth:100,title:false,items:[{xtype:"textfield",fieldLabel:"Database",anchor:"96%",name:"database",allowBlank:false},{xtype:"panel",layout:"column",items:[{xtype:"panel",columnWidth:1,layout:"form",style:"margin-right: 5px;",items:[{xtype:"textfield",fieldLabel:"Host",name:"host",anchor:"92%",allowBlank:false}]},{xtype:"panel",width:100,layout:"form",labelWidth:35,items:[{xtype:"textfield",fieldLabel:"Port",name:"port",anchor:"82%",allowBlank:false}]}]},{xtype:"textfield",fieldLabel:"Username",anchor:"96%",name:"username",allowBlank:false},{xtype:"textfield",fieldLabel:"Password",anchor:"96%",name:"password",allowBlank:false},{xtype:"checkbox",hideLabel:true,boxLabel:"Persistent",name:"persistent"},{xtype:"checkbox",hideLabel:true,boxLabel:"Pooling",name:"pooling"}]});this.form.getForm().load({url:window.afStudioWSUrls.getLoadDatabaseConnectionSettingsUrl(),failure:function(a,b){Ext.Msg.alert("Load failed","Error while getting data")}})},saveDatabaseSettings:function(){var a=this.form.getForm();if(a.isValid()){a.submit({failure:function(b,c){if(c.result){if(c.result.message){Ext.Msg.alert("Failure",c.result.message,function(){if(c.result.redirect){window.location.href=c.result.redirect}})}}},success:function(b,c){if(c.result){if(c.result.message){Ext.Msg.alert("Success",c.result.message,function(){if(c.result.redirect){window.location.href=c.result.redirect}})}}}})}},cancel:function(){this.close()}});afStudio.Logs=Ext.extend(Ext.Window,{form:null,initComponent:function(){var a={title:"Logs",width:463,autoHeight:true,closable:true,draggable:true,plain:true,modal:true,resizable:false,bodyBorder:false,border:false,buttons:[{text:"Save",scope:this},{text:"Cancel",handler:this.cancel,scope:this}],buttonAlign:"center"};Ext.apply(this,Ext.apply(this.initialConfig,a));afStudio.Logs.superclass.initComponent.apply(this,arguments)},cancel:function(){this.close()}});afStudio.Help=Ext.extend(Ext.Window,{form:null,initComponent:function(){var a={title:"Help",width:990,height:600,closable:true,draggable:true,maximizable:true,plain:true,modal:true,bodyBorder:false,border:false,html:String.format('<iframe style="height: 100%; width: 100%;" frameborder=0 src="{0}" id="help-iframe" />',afStudioWSUrls.helpUrl),buttons:[{text:"Cancel",scope:this,handler:this.cancel}],buttonAlign:"center"};Ext.apply(this,Ext.apply(this.initialConfig,a));afStudio.Help.superclass.initComponent.apply(this,arguments);this._initEvents()},_initEvents:function(){this.on("show",function(a){Ext.get("help-iframe").on("load",function(){a.body.unmask()});(function(){a.body.mask("Loading, please Wait...","x-mask-loading")}).defer(100)})},cancel:function(){this.close()}});afStudio.Welcome=Ext.extend(Ext.Window,{form:null,initComponent:function(){var a={title:"Welcome to AppFlower Studio Beta",width:810,height:520,closable:true,draggable:true,plain:true,modal:true,resizable:false,bodyBorder:false,border:false,html:'<div id="welcome-box"> </div>',buttonAlign:"left",buttons:[{xtype:"checkbox",boxLabel:"Show this window when Studio opens",checked:true,handler:function(b,d){if(d){Ext.util.Cookies.set("appFlowerStudioDontShowWelcomePopup","")}else{Ext.util.Cookies.set("appFlowerStudioDontShowWelcomePopup","true",new Date("12/22/2099"))}}}]};Ext.apply(this,Ext.apply(this.initialConfig,a));afStudio.Welcome.superclass.initComponent.apply(this,arguments);this.getHtmlData()},getHtmlData:function(){var a=this;afStudio.xhr.executeAction({url:afStudioWSUrls.welcomeWinUrl,showNoteOnSuccess:false,run:function(b){var c=b;Ext.get("welcome-box").update(c.data);jQuery("a[rel^='prettyPhoto']").prettyPhoto();setTimeout(function(){jQuery("#studio_video_tours ul").jScrollPane()},500);Ext.get("create-project").on("click",function(){a.close();(new afStudio.CreateProjectWizard).show()},this)}})}});afStudio.Settings=Ext.extend(Ext.Window,{dbForm:null,tabPanel:null,projectForm:null,initComponent:function(){this.initTabPanel();var a={title:"Settings",width:463,height:250,closable:true,draggable:true,plain:true,modal:true,resizable:false,bodyBorder:false,border:false,layout:"fit",items:this.tabPanel,buttons:[{text:"Save",handler:this.save,scope:this},{text:"Cancel",handler:this.cancel,scope:this}],buttonAlign:"center"};Ext.apply(this,Ext.apply(this.initialConfig,a));afStudio.Settings.superclass.initComponent.apply(this,arguments)},initTabPanel:function(){this.createTabsUI();this.tabPanel=new Ext.TabPanel({activeTab:0,items:[{xtype:"panel",title:"Project",formName:"projectForm",items:this.projectForm},{xtype:"panel",title:"Database",formName:"dbForm",items:this.dbForm}]})},createTabsUI:function(){this.projectForm=new Ext.FormPanel({url:window.afStudioWSUrls.getConfigureProjectUrl()+"?type=save",bodyStyle:"padding: 5px;",labelWidth:140,border:false,bodyBorder:false,listeners:{"render":function(a){a.getForm().load({url:window.afStudioWSUrls.getConfigureProjectUrl(),failure:function(b,c){Ext.Msg.alert("Load failed","Error while getting data")}})},scope:this},items:[{xtype:"textfield",name:"name",fieldLabel:"Project Name",anchor:"95%",allowBlank:false},{xtype:"displayfield",name:"display_url",fieldLabel:"Url",anchor:"95%",style:"font-weight:bold;"},{xtype:"displayfield",name:"path",fieldLabel:"Path to Project",anchor:"95%",style:"font-weight:bold;"},{xtype:"label",html:"Description:",style:"font: 12px tahoma,arial,helvetica,sans-serif;"},{xtype:"textarea",hideLabel:true,anchor:"100%",name:"description",height:57,style:"margin-top: 5px;"},{xtype:"checkbox",hideLabel:true,boxLabel:"Auto-Deploy on Save",name:"autodeploy"}]});this.dbForm=new Ext.FormPanel({url:window.afStudioWSUrls.getConfigureDatabaseUrl(),defaultType:"textfield",width:450,bodyStyle:"padding: 5px;",border:false,bodyBorder:false,labelWidth:100,title:false,listeners:{"render":function(a){a.getForm().load({url:window.afStudioWSUrls.getLoadDatabaseConnectionSettingsUrl(),failure:function(b,c){Ext.Msg.alert("Load failed","Error while getting data")}})},scope:this},items:[{xtype:"textfield",fieldLabel:"Database",anchor:"96%",name:"database",allowBlank:false,vtype:"database"},{xtype:"panel",layout:"column",border:false,bodyBorder:false,defaults:{border:false,bodyBorder:false},items:[{xtype:"panel",columnWidth:1,layout:"form",style:"margin-right: 5px;",items:[{xtype:"textfield",fieldLabel:"Host",name:"host",anchor:"92%",allowBlank:false,vtype:"host"}]},{xtype:"panel",width:100,layout:"form",labelWidth:35,items:[{xtype:"textfield",fieldLabel:"Port",name:"port",anchor:"82%",allowBlank:true,vtype:"port"}]}]},{xtype:"textfield",fieldLabel:"Username",anchor:"96%",name:"username",allowBlank:false,vtype:"alphanum"},{xtype:"textfield",fieldLabel:"Password",anchor:"96%",name:"password",allowBlank:false,vtype:"alphanum"},{xtype:"checkbox",hideLabel:true,boxLabel:"Persistent",name:"persistent"},{xtype:"checkbox",hideLabel:true,boxLabel:"Pooling",name:"pooling"}]})},save:function(){var a=this.tabPanel.getActiveTab();switch(a.formName){case"projectForm":var b=this.projectForm.getForm();break;case"dbForm":var b=this.dbForm.getForm();break}if(b.isValid()){b.submit({failure:function(c,d){if(d.result){if(d.result.message){Ext.Msg.alert("Failure",d.result.message,function(){if(d.result.redirect){window.location.href=d.result.redirect}})}}},success:function(c,d){if(d.result){if(d.result.message){Ext.Msg.alert("Success",d.result.message,function(){if(d.result.redirect){window.location.href=d.result.redirect}})}}}})}},cancel:function(){this.close()}});Ext.override(Ext.tree.TreeEditor,{onSpecialKey:function(c,b){var a=b?b.getKey():Ext.EventObject.getKey();if(a==Ext.EventObject.ESC){if(b){b.stopEvent()}this.cancelEdit()}else{if(a==Ext.EventObject.ENTER&&!Ext.EventObject.hasModifier()){if(b){b.stopEvent()}this.completeEdit()}}}});Ext.apply(Ext.form.VTypes,{uniqueNode:function(a,b){return true},uniqueNodeText:"Path to Project already exist! Please choose another Project Name!",checkPassword:function(a,b){if(b.ownerCt.ownerCt.ownerCt.getForm().findField("password").getValue()!=a){return false}return true},checkPasswordText:"Retype Password value does not match Password value",database:function(a,b){return/^[a-zA-Z0-9_\-]+$/.test(a)},databaseText:"Database should only contain letters, numbers, _, -",databaseMask:/[a-z0-9_\-]/i,host:function(a,b){return/^[a-zA-Z0-9_\-\.]+$/.test(a)},hostText:"Host should only contain letters, numbers, dots, _, -",hostMask:/[a-z0-9_\-\.]/i,port:function(a,b){return/^[0-9]+$/.test(a)},portText:"Port should only contain numbers",portMask:/[0-9]/i,username:function(a,b){return/^[a-zA-Z0-9_\-\.]+$/.test(a)},usernameText:"Username should only contain letters, numbers, dots, _, -",usernameMask:/[a-z0-9_\-\.]/i});Ext.namespace("afStudio.error");afStudio.error.ApsError=Ext.extend(Ext.Error,{name:"afStudio.error.ApsError"});Ext.namespace("afStudio.notification");afStudio.notification.NotificationMgr={positions:[],heights:[]};afStudio.notification.NotificationWindow=Ext.extend(Ext.Window,{initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,{closeAction:"close",plain:false,shadow:false,draggable:false,bodyStyle:"text-align: left; padding: 10px;",resizable:false}));if(this.autoDestroy){this.task=new Ext.util.DelayedTask(this.close,this)}else{this.closable=true}afStudio.notification.NotificationWindow.superclass.initComponent.call(this)},setMessage:function(a){this.body.update(a)},afterShow:function(){afStudio.notification.NotificationWindow.superclass.afterShow.call(this);this.on("move",function(){afStudio.notification.NotificationMgr.positions.remove(this.pos);if(this.autoDestroy){this.task.cancel()}},this);if(this.autoDestroy){this.task.delay(this.hideDelay||5000)}},animShow:function(){var a=afStudio.notification.NotificationMgr,b=0;this.pos=0;while(a.positions.indexOf(this.pos)>-1){b+=a.heights[this.pos];this.pos++}a.positions.push(this.pos);a.heights[this.pos]=this.getSize().height+10;this.el.alignTo(this.animateTarget||document,"br-br",[-5,-5-(b)]);this.el.slideIn("b",{duration:0.7,callback:this.afterShow,scope:this})},animHide:function(){afStudio.notification.NotificationMgr.positions.remove(this.pos);if(this.el){this.el.ghost("b",{duration:1,remove:false})}},onDestroy:function(){afStudio.notification.NotificationMgr.positions.remove(this.pos);afStudio.notification.NotificationWindow.superclass.onDestroy.call(this)}});afStudio.notification.MessageBox=function(){var a=function(b){b=Ext.apply({width:340,animateTarget:Ext.getBody(),autoScroll:true,autoDestroy:false,notificationType:"INFO"},b||{});var c=new afStudio.notification.NotificationWindow(b);switch(c.notificationType){case"ERROR":c.iconCls="icon-notification-error";c.bodyStyle+="background-color: #fddcdc;";break;case"WARNING":c.iconCls="icon-notification-warning";c.bodyStyle+="background-color: #fefcc7;";break;case"INFO":c.iconCls="icon-notification-info";c.bodyStyle+="background-color: #fff;";break}c.bodyStyle+="padding-bottom: 20px;";c.show();return c};return{DURATION:10000,INFO:"INFO",WARNING:"WARNING",ERROR:"ERROR",notify:function(d,f,e,c){c=c||{};var b=a(Ext.apply(c,{notificationType:d,title:f,html:e}));if(d!=this.ERROR){b.close.defer(this.DURATION,b)}},info:function(){var c,b;if(arguments.length==1){c="Notification";b=arguments[0]}else{c=arguments[0];b=arguments[1]}this.notify(this.INFO,c,b)},warning:function(){var c,b;if(arguments.length==1){c="Warning";b=arguments[0]}else{c=arguments[0];b=arguments[1]}this.notify(this.WARNING,c,b)},error:function(){var c,b;if(arguments.length==1){c="Error";b=arguments[0]}else{c=arguments[0];b=arguments[1]}this.notify(this.ERROR,c,b)}}}();afStudio.Msg=afStudio.notification.MessageBox;Ext.namespace("afStudio.cli");afStudio.cli.CommandLine=Ext.extend(Ext.Panel,{autoScroll:true,bodyStyle:"background-color: black; font-family: monospace; font-size: 11px; color: #88ff88;",constructor:function(a){Ext.apply(this,a);afStudio.cli.CommandLine.superclass.constructor.call(this,a)},afterRender:function(){afStudio.cli.CommandLine.superclass.afterRender.call(this);this.cliWrapper=this.ownerCt;this.on({scope:this,afterrender:this.onCliAfterRender})},maskCli:function(a){this.el.mask(a?a:"loading...")},unmaskCli:function(){this.el.unmask()},scrollCliDown:function(a){a=a?a:1000000;this.body.scroll("bottom",a,true)},onCliAfterRender:Ext.emptyFn,loadCli:Ext.emptyFn,refreshCli:function(){this.loadCli()},setCli:Ext.emptyFn,updateCli:Ext.emptyFn,clearCli:Ext.emptyFn,executeAction:function(a){var b=this;this.maskCli(a.loadingMessage?a.loadingMessage:false);Ext.Ajax.request({url:a.url,params:a.params,scope:a.scope?a.scope:b,success:function(g,e){this.unmaskCli();var d=Ext.decode(g.responseText);if(d.success){Ext.util.Functions.createDelegate(a.run,this,[d],false)()}else{if(Ext.isFunction(a.error)){Ext.util.Functions.createDelegate(a.error,this,[d],false)()}var f=d.content||d.message||"Operation was successfully processed!",c=this.cliWrapper.title||"";afStudio.Msg.error(c,f)}},failure:function(f,d){this.unmaskCli();if(Ext.isFunction(a.error)){Ext.util.Functions.createDelegate(a.error,this,[f],false)()}var e=String.format("Status code: {0}, message: {1}",f.status,f.statusText),c=String.format("Server Error {0}",this.cliWrapper.title||"");afStudio.Msg.error(c,e)}})}});Ext.namespace("afStudio.cli");afStudio.cli.AuditLog=Ext.extend(afStudio.cli.CommandLine,{baseUrl:afStudioWSUrls.getNotificationsUrl(),notificationOffset:0,_beforeInitComponent:function(){var a=this;return{html:""}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.cli.AuditLog.superclass.initComponent.apply(this,arguments)},loadCli:function(){this.executeAction({url:this.baseUrl,params:{cmd:"get",offset:this.notificationOffset},run:function(a){this.notificationOffset=a.data.offset;this.updateCli(a.data.notifications)}})},updateCli:function(a){if(Ext.isString(a)&&a){this.body.dom.innerHTML+=a;this.scrollCliDown()}}});Ext.reg("afStudio.cli.auditLog",afStudio.cli.AuditLog);Ext.namespace("afStudio.cli");afStudio.cli.Console=Ext.extend(afStudio.cli.CommandLine,{baseUrl:afStudioWSUrls.getConsoleUrl(),consoleCommands:afStudioConsoleCommands,_beforeInitComponent:function(){var b=this;var a=new Ext.Toolbar({items:["Enter command:",{xtype:"tbspacer",width:5},{xtype:"textfield",itemId:"cml",width:300,enableKeyEvents:true},{xtype:"tbspacer",width:10},{xtype:"tbtext",text:"<b>cmds:</b> "+b.consoleCommands}]});this.consoleCmdLine=a.getComponent("cml");return{tbar:a,html:""}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.cli.Console.superclass.initComponent.apply(this,arguments);this._afterInitComponent()},_afterInitComponent:function(){this.consoleCmdLine.on("keyup",this.onConsoleCmdLineKeyUp,this)},onCliAfterRender:function(){this.loadCli()},loadCli:function(){var a=this;this.executeAction({url:a.baseUrl,params:{command:"start"},run:function(b){this.updateCli(b.console)}})},refreshCli:function(){this.scrollCliDown()},setCli:function(a){this.body.dom.innerHTML=a;this.scrollCliDown()},updateCli:function(a){if(Ext.isString(a)&&a){this.body.dom.innerHTML+=a;this.scrollCliDown()}},clearCli:function(){this.setCli("")},onConsoleCmdLineKeyUp:function(f,c){var d=this,b=f.getValue(),a=c?c.getKey():Ext.EventObject.getKey();if(a==Ext.EventObject.ENTER){f.setValue("");if(b=="clear"){this.clearCli()}else{this.executeAction({url:d.baseUrl,params:{command:b},loadingMessage:String.format('Executing command "{0}"...',b),run:function(e){this.updateCli(e.console)}})}}}});Ext.reg("afStudio.cli.console",afStudio.cli.Console);Ext.namespace("afStudio.cli");afStudio.cli.Debug=Ext.extend(afStudio.cli.CommandLine,{baseUrl:afStudioWSUrls.getDebugUrl(),_beforeInitComponent:function(){var d=this;var b=new Ext.data.JsonStore({autoLoad:false,url:d.baseUrl,storeId:"cli-debug",root:"data",totalProperty:"total",fields:["text"]});var a=new Ext.XTemplate('<tpl for=".">','<div class="thumb-wrap">',"{text}",'<div class="x-clear"></div>',"</div>","</tpl>");this.debugDataView=new Ext.DataView({store:b,tpl:a,autoHeight:true,forceFit:true});var c=new Ext.PagingToolbar({store:b,pageSize:1,displayInfo:true});return{tbar:{id:"debug-toolbar",items:[]},bbar:c,items:[this.debugDataView]}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.cli.Debug.superclass.initComponent.apply(this,arguments)},loadCli:function(){var d=this,a=this.debugDataView.getStore(),c=this.getTopToolbar(),b=this.getBottomToolbar();this.executeAction({url:d.baseUrl,params:{command:"main"},run:function(f){a.loadData(f);a.setBaseParam("file_name",null);a.setBaseParam("command",null);b.moveLast();this.scrollCliDown();c.removeAll();var e=f.files.length;if(e>0){Ext.each(f.files,function(j,g){c.addButton({itemId:j,text:j});c.getComponent(j).on({click:d.onFileClick.createDelegate(d)});if(g!=e-1){c.add("-")}})}c.doLayout()}})},onFileClick:function(c,a){var f=this,b=this.debugDataView.getStore(),d=this.getBottomToolbar();this.maskCli();b.baseParams.file_name=c.itemId;b.baseParams.command="file";b.load({params:{start:0,limit:1}});this.unmaskCli();d.moveLast()}});Ext.reg("afStudio.cli.debug",afStudio.cli.Debug);Ext.namespace("afStudio.cli");afStudio.cli.WindowWrapper=Ext.extend(Ext.Window,{width:1007,height:600,closable:true,closeAction:"hide",draggable:true,plain:true,modal:true,maximizable:true,border:false,bodyBorder:false,layout:"fit",closeWindow:function(){if(this.closeAction=="hide"){this.hide()}else{this.close()}},constructor:function(a){Ext.apply(this,a);afStudio.cli.WindowWrapper.superclass.constructor.call(this,a)},initComponent:function(){afStudio.cli.WindowWrapper.superclass.initComponent.apply(this,arguments);var a=this;this.on({beforeshow:function(){var b=this.items.itemAt(0);b.refreshCli()}})}});Ext.ns("afStudio.cli");afStudio.cli.CommandLineMgr=function(){var c=new afStudio.cli.Console();var a=new afStudio.cli.WindowWrapper({title:"Console",iconCls:"icon-console",items:c});var d=new afStudio.cli.WindowWrapper({title:"Debug",iconCls:"icon-debug",items:new afStudio.cli.Debug()});var b=new afStudio.cli.WindowWrapper({title:"Notifications",iconCls:"icon-debug-auditlog",items:new afStudio.cli.AuditLog()});return{init:function(){a.show().closeWindow()},showConsole:function(){a.show()},showAuditLog:function(){b.show()},showDebug:function(){d.show()},updateConsole:function(e){c.updateCli(e)},setConsole:function(e){c.setCli(e)}}}();afStudio.Cli=afStudio.cli.CommandLineMgr;Ext.ns("afStudio.navigation");afStudio.navigation.BaseTreeEditor=Ext.extend(Ext.tree.TreeEditor,{beforeNodeClick:Ext.emptyFn});afStudio.navigation.BaseItemTreePanel=Ext.extend(Ext.tree.TreePanel,{animate:true,autoScroll:true,editorFieldInvalid:'The value in this node is invalid! <br /> accepts only alphanumeric symbols and "_", begins from "_" or alpha.',leafNodeCfg:{},branchNodeCfg:{},constructor:function(b){var c=this;var a=new Ext.tree.TreeNode({path:"root",text:c.title||"root",draggable:false});Ext.applyIf(b,{root:a,rootVisible:false,tools:[{id:"refresh",handler:c.loadRootNode,scope:this}]});afStudio.navigation.BaseItemTreePanel.superclass.constructor.call(this,b)},initComponent:function(){var a=this;this.treeSorter=new Ext.tree.TreeSorter(this,{folderSort:true,dir:"asc"});this.treeEditor=new afStudio.navigation.BaseTreeEditor(this,{cancelOnEsc:true,completeOnEnter:true,ignoreNoChange:true});afStudio.navigation.BaseItemTreePanel.superclass.initComponent.apply(this,arguments)},initEvents:function(){afStudio.navigation.BaseItemTreePanel.superclass.initEvents.apply(this,arguments);var a=this;a.loader.on({scope:a,beforeload:a.onLoaderBeforeLoad,load:a.onLoaderLoad,loadexception:a.onLoaderLoadException});a.treeEditor.on({scope:a,beforecomplete:a.onEditorBeforeComplete,complete:a.onEditorComplete,canceledit:a.onEditorCancelEdit});a.on({scope:a,contextmenu:a.onNodeContextMenu,click:a.onNodeClick,dblclick:a.onNodeDblClick,activate:{fn:a.onItemActivate,single:true}});a.treeKeyMap=new Ext.KeyMap(this.el,[{key:Ext.EventObject.ENTER,fn:function(){var c=this.getSelectionModel(),b=c.getSelectedNode();if(b.isLeaf()){this.runNode(b)}else{if(b.isExpandable()){b.isExpanded()?b.collapse():b.expand()}}},scope:this}])},maskItemTree:function(){this.body.mask("Loading, please Wait...","x-mask-loading")},unmaskItemTree:function(){this.body.unmask()},getNodeAttribute:function(c,b,a){return c.attributes[b]?c.attributes[b]:(a?a:null)},getParentNodeAttribute:function(c,b,a){return this.getNodeAttribute(c.parentNode,b,a)},expandParentNodes:function(a){if(!Ext.isEmpty(a.parentNode)){this.expandParentNodes(a.parentNode)}a.expand()},selectNode:function(a){this.selectPath(a.getPath())},selectChildNodeByText:function(b,c){var e=this,d=this.getSelectionModel();this.expandParentNodes(b);var a;if(b&&!b.isLeaf()){a=b.findChild("text",c,false);a?d.select(a):null}return a},loadRootNode:function(c){var b=this,a=this.loader;Ext.isFunction(c)?a.load(this.root,c,b):a.load(this.root)},initialItemState:function(){var b=this.getRootNode(),d=this.getSelectionModel();if(!b.isExpanded()){b.expand()}if(b.firstChild&&!b.firstChild.isLeaf()){b.firstChild.expand(false,true,function(f){d.select(f);f.ui.getEl().focus()});var e=b.childNodes,c,a=e.length;for(c=1;c<a;c++){e[c].expand()}}},onItemActivate:function(){this.loadRootNode(this.initialItemState)},refreshNode:function(b,a,d){var c=this;this.loadRootNode(function(){var f=this.getRootNode(),e=Ext.isString(b)?f.findChild("text",b,true):f,g;if(e){g=this.selectChildNodeByText(e,a)}if(Ext.isFunction(d)){Ext.util.Functions.createDelegate(d,c,[g])()}})},onLoaderBeforeLoad:function(a,b,c){this.maskItemTree()},onLoaderLoad:function(a,b,c){this.unmaskItemTree()},onLoaderLoadException:function(a,b,c){this.unmaskItemTree()},onNodeClick:Ext.emptyFn,onNodeDblClick:Ext.emptyFn,onNodeContextMenu:Ext.emptyFn,isValidNodeName:function(b,a){return/^[^\d]\w*$/im.test(a)?true:false},onEditorBeforeComplete:function(b,d,a){var c=b.editNode;if(!this.isValidNodeName(c,d)){b.field.markInvalid(this.editorFieldInvalid);return false}},onEditorComplete:function(b,d,a){var c=b.editNode;if(this.getNodeAttribute(c,"NEW_NODE")){c.setText(d);this.addNodeController(c)}else{if(d!=a){this.renameNodeController(c,d,a)}}},onEditorCancelEdit:function(b,d,a){var c=b.editNode;if(this.getNodeAttribute(c,"NEW_NODE")){c.remove()}},addNodeController:Ext.emptyFn,renameNodeController:Ext.emptyFn,runNode:Ext.emptyFn,addLeafNode:function(b){var a=Ext.apply({},this.leafNodeCfg);a.NEW_NODE=true;this.addNode(b,a)},addBranchNode:function(b,c){var a=Ext.apply({},this.branchNodeCfg);a.NEW_NODE=true;if(c&&Ext.isObject(c)){Ext.apply(a,c)}this.addNode(b,a)},addNode:function(b,a){var d=this.treeEditor,c;b.expand();c=b.appendChild(new Ext.tree.TreeNode(Ext.apply({},a)));this.selectNode(c);d.triggerEdit(c)},executeAction:function(b){var c=this,a=true;afStudio.vp.mask({msg:b.loadingMessage?b.loadingMessage:"Loading...",region:"center"});Ext.Ajax.request({url:b.url,params:b.params,scope:b.scope?b.scope:c,success:function(j,f){afStudio.vp.unmask("center");var e=Ext.decode(j.responseText);var g=e.content||e.message||(e.success?"Operation was successfully processed!":"Some error occured."),d=this.title||"";if(e.success){if(b.run){Ext.util.Functions.createDelegate(b.run,this,[e],false)()}if(e.console){afStudio.updateConsole(e.console)}if(b.logMessage){this.fireEvent("logmessage",this,b.logMessage)}if(!Ext.isDefined(b.showNoteOnSuccess)&&a===true){afStudio.Msg.info(d,g)}else{if(b.showNoteOnSuccess===true){afStudio.Msg.info(d,g)}}}else{if(Ext.isFunction(b.error)){Ext.util.Functions.createDelegate(b.error,this,[e],false)()}afStudio.Msg.error(d,g)}},failure:function(g,e){afStudio.vp.unmask("center");if(Ext.isFunction(b.error)){Ext.util.Functions.createDelegate(b.error,this,[g],false)()}var f=String.format("Status code: {0}, message: {1}",g.status,g.statusText),d=String.format("Server Error {0}",this.title||"");afStudio.Msg.error(d,f)}})}});afStudio.navigation.ModelItem=Ext.extend(afStudio.navigation.BaseItemTreePanel,{baseUrl:afStudioWSUrls.modelListUrl,leafNodeCfg:{text:"NewModel",iconCls:"icon-model",leaf:true},modelContextMenu:new Ext.menu.Menu({items:[{itemId:"edit-model",text:"Edit model",iconCls:"icon-models-edit"},{itemId:"rename-model",text:"Rename model",iconCls:"icon-edit"},{itemId:"delete-model",text:"Delete model",iconCls:"icon-models-delete"}],listeners:{itemclick:function(c){var b=c.parentMenu.contextNode,a=b.getOwnerTree();switch(c.itemId){case"delete-model":a.deleteNodeModel(b);break;case"edit-model":a.runNode(b);break;case"rename-model":a.treeEditor.triggerEdit(b);break}}}}),_beforeInitComponent:function(){var b=this;var a=new Ext.tree.TreeLoader({url:this.baseUrl,baseParams:{cmd:"get"}});return{title:"Models",loader:a,iconCls:"icon-databases",bbar:{items:["->",{text:"Add Model",iconCls:"icon-models-add",handler:b.onAddModelClick,scope:b}]}}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.navigation.ModelItem.superclass.initComponent.apply(this,arguments)},onAddModelClick:function(){var b=this,a=this.getRootNode();this.addLeafNode(a)},runNode:function(c){var d=this,a=this.getNodeAttribute(c,"text"),b=this.getNodeAttribute(c,"schema");this.executeAction({url:d.baseUrl,params:{xaction:"read",model:a,schema:b},showNoteOnSuccess:false,loadingMessage:String.format('Loading model "{0}"...',a),run:function(e){var f=new afStudio.models.ModelTab({_node:c,fieldsStructure:e,modelName:a,schemaName:b});afStudio.vp.addToWorkspace(f,true)}})},onNodeDblClick:function(a,b){this.runNode(a)},onNodeContextMenu:function(a,b){a.select();this.modelContextMenu.contextNode=a;this.modelContextMenu.showAt(b.getXY())},addNodeController:function(c){var d=this,a=this.getNodeAttribute(c,"text"),b=this.getNodeAttribute(c,"schema");this.executeAction({url:d.baseUrl,params:{cmd:"add",with_primary:true,model:a,schema:b},loadingMessage:String.format('"{0}" model creation...',a),logMessage:String.format('Models: model "{0}" was created',a),run:function(e){this.refreshNode(this.root,a,this.runNode)},error:function(e){c.remove()}})},renameNodeController:function(d,e,b){var f=this,a=this.getRootNode(),c=this.getNodeAttribute(d,"schema");this.executeAction({url:f.baseUrl,params:{cmd:"rename",model:b,renamedModel:e,schema:c},loadingMessage:String.format('Renaming model from "{0}" to {1} ...',b,e),logMessage:String.format('Models: model "{0}" was renamed to "{1}"',b,e),run:function(g){this.refreshNode(a,e,this.runNode)},error:function(g){d.setText(b)}})},deleteNodeModel:function(d){var f=this,a=this.getRootNode(),b=this.getNodeAttribute(d,"text"),c=this.getNodeAttribute(d,"schema"),e=String.format('Are you sure you want to delete model "{0}" ?',b);Ext.Msg.confirm("Models",e,function(g){if(g=="yes"){f.executeAction({url:f.baseUrl,params:{cmd:"delete",model:b,schema:c},loadingMessage:String.format('Model "{0}" deleting ...',b),logMessage:String.format('Models: model "{0}" was deleted',b),run:function(j){this.loadRootNode(function(){afStudio.vp.clearWorkspace()})}})}})}});Ext.reg("afStudio.navigation.modelItem",afStudio.navigation.ModelItem);afStudio.navigation.LayoutItem=Ext.extend(afStudio.navigation.BaseItemTreePanel,{baseUrl:"/appFlowerStudio/layout",layoutMetaUrl:"/afsLayoutBuilder/get",addNewPageUrl:"/afsLayoutBuilder/new",renamePageUrl:"/afsLayoutBuilder/rename",deletePageUrl:"/afsLayoutBuilder/delete",editorFieldInvalid:'Page name is invalid! <br /> accepts only alpha-numeric symbols and "_", begins from "_" or alpha.',leafNodeCfg:{text:"NewPage",iconCls:"icon-layout",type:"page",leaf:true},appContextMenu:new Ext.menu.Menu({items:[{itemId:"app-add-page",text:"Add Layout",iconCls:"icon-models-add"}],listeners:{itemclick:function(c){var b=c.parentMenu.contextNode,a=b.getOwnerTree();a.addLeafNode(b)}}}),pageContextMenu:new Ext.menu.Menu({items:[{itemId:"edit-page",text:"Edit Layout",iconCls:"icon-models-edit"},{itemId:"rename-page",text:"Rename Layout",iconCls:"icon-edit"},{itemId:"delete-page",text:"Delete Layout",iconCls:"icon-models-delete"},{itemId:"set_as_homepage",text:"Set Layout as Homepage",iconCls:"icon-models-set_as_homepage"}],listeners:{itemclick:function(c){var b=c.parentMenu.contextNode,a=b.getOwnerTree();switch(c.itemId){case"edit-page":a.runNode(b);break;case"rename-page":a.treeEditor.triggerEdit(b);break;case"delete-page":a.deletePage(b);break;case"set_as_homepage":a.setPageAsHomepage(b);break}}}}),_beforeInitComponent:function(){var a=this;var b=new Ext.tree.TreeLoader({url:this.baseUrl,baseParams:{cmd:"getList"}});return{title:"Layout",loader:b,iconCls:"icon-layout_content",bbar:{items:["->",{text:"Add Layout",iconCls:"icon-pages-add",scope:a,handler:a.onAddPageClick}]}}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.navigation.LayoutItem.superclass.initComponent.apply(this,arguments)},onAddPageClick:function(){var b=this,a=this.getRootNode(),c=this.getSelectionModel().getSelectedNode();if(a.hasChildNodes()){if(!Ext.isEmpty(c)){if(c.isLeaf()){this.addLeafNode(c.parentNode)}else{this.addLeafNode(c)}}else{this.addLeafNode(a.firstChild)}}},runNode:function(b){var a=this,c=a.getNodeAttribute(b,"text"),d=a.getParentNodeAttribute(b,"text");afStudio.xhr.executeAction({url:a.layoutMetaUrl,params:{app:d,page:c},mask:String.format('Loading layout "{0}" metadata...',c),showNoteOnSuccess:false,run:function(e){afStudio.vp.addToWorkspace(new afStudio.layoutDesigner.DesignerPanel({layoutMeta:e.content,layoutApp:d,layoutPage:c}),true)}})},onNodeDblClick:function(a,b){if(this.getNodeAttribute(a,"type")=="page"){this.runNode(a)}},onNodeContextMenu:function(b,c){var a=this,d;b.select();switch(b.attributes.type){case"app":d=a.appContextMenu;break;case"page":d=a.pageContextMenu;break}if(d){d.contextNode=b;d.showAt(c.getXY())}},addNodeController:function(c){var b=this,a=this.getParentNodeAttribute(c,"text"),d=this.getNodeAttribute(c,"text");this.executeAction({url:b.addNewPageUrl,params:{app:a,page:d},loadingMessage:String.format('"{0}" page creation...',d),logMessage:String.format('Layout "{0}" was created',d),run:function(e){this.refreshNode(a,d,this.runNode)},error:function(e){c.remove()}})},renameNodeController:function(d,e,b){var c=this,a=this.getParentNodeAttribute(d,"text");this.executeAction({url:c.renamePageUrl,params:{app:a,page:b,name:e},loadingMessage:String.format('Renaming page from "{0}" to {1} ...',b,e),logMessage:String.format('Layout "{0}" was renamed to "{1}"',b,e),run:function(f){this.refreshNode(a,e,this.runNode)},error:function(f){d.setText(b)}})},deletePage:function(e){var d=this,c=this.getRootNode(),b=this.getParentNodeAttribute(e,"text"),a=this.getNodeAttribute(e,"text"),f=String.format('Are you sure you want to delete page "{0}"?',a);Ext.Msg.confirm("Layout Designer",f,function(g){if(g=="yes"){d.executeAction({url:d.deletePageUrl,params:{app:b,page:a},loadingMessage:String.format('"{0}" page deleting ...',a),logMessage:String.format('Layout "{0}" was deleted',a),run:function(j){this.loadRootNode(function(){this.selectChildNodeByText(c,b).expand();afStudio.vp.clearWorkspace()})}})}})},setPageAsHomepage:function(c){var b=afStudioWSUrls.pageSetAsHomepage,a=this.getNodeAttribute(c,"widgetUri");this.executeAction({url:b,params:{widgetUri:a},loadingMessage:String.format("Set {0} as homepage...",a),logMessage:String.format('Layout "{0}" was set as homepage.',a)})}});Ext.reg("afStudio.navigation.layoutItem",afStudio.navigation.LayoutItem);afStudio.navigation.WidgetItem=Ext.extend(afStudio.navigation.BaseItemTreePanel,{baseUrl:afStudioWSUrls.moduleListUrl,branchNodeCfg:{text:"NewModule",type:"module",allowChildren:true,iconCls:"icon-folder",children:[]},appContextMenu:new Ext.menu.Menu({items:[{itemId:"add-module",text:"Add module",iconCls:"icon-models-add"}],listeners:{itemclick:function(c){var b=c.parentMenu.contextNode,a=b.getOwnerTree();switch(c.itemId){case"add-module":a.onAddModule(b);break}}}}),moduleContextMenu:new Ext.menu.Menu({items:[{itemId:"rename-module",text:"Rename module",iconCls:"icon-edit"},{itemId:"delete-module",text:"Delete module",iconCls:"icon-models-delete"}],listeners:{itemclick:function(c){var b=c.parentMenu.contextNode,a=b.getOwnerTree();switch(c.itemId){case"rename-module":a.treeEditor.triggerEdit(b);break;case"delete-module":a.deleteNodeModule(b);break}}}}),xmlContextMenu:new Ext.menu.Menu({items:[{itemId:"edit-xml",text:"Edit Widget",iconCls:"icon-models-edit"},{itemId:"rename-xml",text:"Rename Widget",iconCls:"icon-edit"},{itemId:"delete-xml",text:"Delete Widget",iconCls:"icon-models-delete"},{itemId:"set_as_homepage-xml",text:"Set Widget as Homepage",iconCls:"icon-models-set_as_homepage"}],listeners:{itemclick:function(c){var b=c.parentMenu.contextNode,a=b.getOwnerTree();switch(c.itemId){case"delete-xml":a.deleteNodeXml(b);break;case"edit-xml":a.runNode(b);break;case"rename-xml":a.treeEditor.triggerEdit(b);break;case"set_as_homepage-xml":a.setWidgetAsHomepage(b);break}}}}),_beforeInitComponent:function(){var b=this;var a=new Ext.tree.TreeLoader({url:this.baseUrl});return{title:"Widgets",loader:a,iconCls:"icon-models",bbar:{items:["->",{text:"Add Widget",iconCls:"icon-widgets-add",handler:b.onAddWidget,scope:b},"-",{text:"Add Module",iconCls:"icon-models-add",handler:b.onAddModule,scope:b}]}}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.navigation.WidgetItem.superclass.initComponent.apply(this,arguments)},getNodeModule:function(b){var a;switch(b.attributes.type){case"app":a=false;break;case"module":a=b.text;break;case"xml":a=b.attributes.module;break}return a},getNodeApp:function(b){var a=this.getNodeAttribute(b,"type"),c;switch(a){case"app":c=this.getNodeAttribute(b,"text");break;case"module":case"xml":c=this.getNodeAttribute(b,"app");break}return c},getNodeActionPath:function(a){return this.getNodeAttribute(a,"actionPath")},getNodeSecurityPath:function(a){return this.getNodeAttribute(a,"securityPath")},onAddModule:function(b){this.appContextMenu;var a=this.getRootNode();if(!b.ownerTree){b=this.getSelectionModel().getSelectedNode();if(!b){b=a.firstChild}else{if(b.attributes.type!="app"){b=a.findChild("text",b.attributes.app)}}}this.addBranchNode(b,{app:this.getNodeApp(b)})},isValidNodeType:function(a){return["app","module","xml"].indexOf(a)!=-1},isValidNodeName:function(c,a){var b=this.getNodeAttribute(c,"type");if(["app","module"].indexOf(b)!=-1){return this.constructor.superclass.isValidNodeName.call(this,c,a)}else{return/^[^\d]\w*\.xml$/im.test(a)?true:false}},runNode:function(a){this.showWidgetDesignerForNode(a)},onNodeDblClick:function(a,b){if(this.getNodeAttribute(a,"type")=="xml"){this.runNode(a)}},onNodeContextMenu:function(b,c){var f=this,a=this.getNodeAttribute(b,"type");b.select();if(f.isValidNodeType(a)){var d=f[a+"ContextMenu"];d.contextNode=b;d.showAt(c.getXY())}},addNodeController:function(b){var c=this,a=this.getNodeAttribute(b,"type");if(c.isValidNodeType(a)){c["addNode"+a.ucfirst()](b)}},renameNodeController:function(c,d,a){var e=this,b=this.getNodeAttribute(c,"type");if(e.isValidNodeType(b)){e["renameNode"+b.ucfirst()](c,d,a)}},onAddWidget:function(){var a=this;var b=new afStudio.wd.WidgetsBuilder({placeType:"app",listeners:{widgetcreated:function(c){var d=String.format("/{0}/{1}/{2}.xml",a.root.text,c.data.place,c.data.widgetUri);a.loadRootNode(function(){this.selectPath(d,"text",function(g,f){if(g){a.showWidgetDesignerForNode(f)}else{a.initialItemState();var e=Ext.copyTo({},c.data,"actionPath, securityPath, place, placeType");e.uri=c.data.widgetUri;afStudio.WD.showWidgetDesigner(e)}})})}}});b.show()},addNodeModule:function(b){var d=this,a=this.getNodeModule(b),c=this.getNodeApp(b);this.executeAction({url:afStudioWSUrls.moduleAddUrl,params:{type:"app",place:c,name:a},loadingMessage:String.format('"{0}" module creation...',a),logMessage:String.format('Widgets: module "{0}" was created',a),run:function(e){this.refreshNode(c,a)},error:function(e){b.remove()}})},renameNodeModule:function(c,d,b){var a={params:{type:"app",place:this.getNodeApp(c),name:b,renamed:d},url:afStudioWSUrls.moduleRenameUrl,node:c,refreshNode:this.getNodeApp(c),msg:"module"};this.renameNode(a,d,b)},renameNodeXml:function(e,f,c){var a=this.getNodeApp(e),d=this.getNodeModule(e);var b={params:{type:"app",place:a,moduleName:d,oldValue:c,newValue:f},url:afStudioWSUrls.widgetRenameUrl,node:e,refreshNode:a,msg:"widget"};this.renameNode(b,f,c)},renameNode:function(a,d,f){var e=this,b=a.refreshNode?a.refreshNode:this.getRootNode(),c=a.url?a.url:e.baseUrl;this.executeAction({url:c,params:a.params,loadingMessage:String.format('Renaming {0} from "{1}" to {2} ...',a.msg,f,d),logMessage:String.format('Widgets: {0} "{1}" was renamed to "{2}"',a.msg,f,d),run:function(g){this.refreshNode(b,d,function(){this.getRootNode().expandChildNodes()})},error:function(g){a.node.setText(f)}})},deleteNodeModule:function(b){var a={params:{type:"app",place:this.getNodeApp(b),name:this.getNodeModule(b)},url:afStudioWSUrls.moduleDeleteUrl,item:b.text,msg:"module"};this.deleteNode(a)},deleteNodeXml:function(d){var a=this.getNodeApp(d),b=this.getNodeModule(d);var c={params:{type:"app",place:a,moduleName:b,name:d.text},url:afStudioWSUrls.widgetDeleteUrl,item:d.text,msg:"widget"};this.deleteNode(c)},deleteNode:function(a){var d=this,c=String.format('Are you sure you want to delete {0} "{1}"?',a.msg,a.item),b=a.url?a.url:d.baseUrl;Ext.Msg.confirm("Plugins",c,function(e){if(e=="yes"){d.executeAction({url:b,params:a.params,loadingMessage:String.format('{0} "{1}" deleting ...',a.msg,a.item),logMessage:String.format('Widgets: {0} "{1}" was deleted',a.msg,a.item),run:function(f){this.loadRootNode(this.initialItemState);afStudio.vp.clearWorkspace()}})}})},showWidgetDesignerForNode:function(a){afStudio.WD.showWidgetDesigner({uri:this.getNodeAttribute(a,"widgetUri"),actionPath:this.getNodeActionPath(a),actionName:this.getNodeAttribute(a,"actionName"),securityPath:this.getNodeSecurityPath(a),placeType:"app",place:this.getNodeApp(a)})},setWidgetAsHomepage:function(c){var b=afStudioWSUrls.widgetSetAsHomepage,a=this.getNodeAttribute(c,"widgetUri");this.executeAction({url:b,params:{widgetUri:a},loadingMessage:String.format("Set {0} as homepage...",a),logMessage:String.format("Widget {0} was set as homepage.",a)})}});Ext.reg("afStudio.navigation.widgetItem",afStudio.navigation.WidgetItem);afStudio.navigation.PluginItem=Ext.extend(afStudio.navigation.BaseItemTreePanel,{baseUrl:afStudioWSUrls.pluginListUrl,branchNodeCfg:{text:"NewPlugin",type:"plugin",allowChildren:true,iconCls:"icon-folder",children:[]},pluginContextMenu:new Ext.menu.Menu({items:[{itemId:"add-module",text:"Add Module",iconCls:"icon-models-add"},{itemId:"rename-plugin",text:"Rename Plugin",iconCls:"icon-edit"},{itemId:"delete-plugin",text:"Delete Plugin",iconCls:"icon-models-delete"}],listeners:{itemclick:function(c){var b=c.parentMenu.contextNode,a=b.getOwnerTree();switch(c.itemId){case"delete-plugin":a.deleteNodePlugin(b);break;case"rename-plugin":a.treeEditor.triggerEdit(b);break;case"add-module":a.addBranchNode(b,{text:"NewModule",type:"module"});break}}}}),moduleContextMenu:new Ext.menu.Menu({items:[{itemId:"rename-module",text:"Rename Module",iconCls:"icon-edit"},{itemId:"delete-module",text:"Delete Module",iconCls:"icon-models-delete"}],listeners:{itemclick:function(c){var b=c.parentMenu.contextNode,a=b.getOwnerTree();switch(c.itemId){case"delete-module":a.deleteNodeModule(b);break;case"rename-module":a.treeEditor.triggerEdit(b);break}}}}),xmlContextMenu:new Ext.menu.Menu({items:[{itemId:"edit-plugin-xml",text:"Edit Widget",iconCls:"icon-models-edit"},{itemId:"rename-plugin-xml",text:"Rename Widget",iconCls:"icon-edit"},{itemId:"delete-plugin-xml",text:"Delete Widget",iconCls:"icon-models-delete"}],listeners:{itemclick:function(c){var b=c.parentMenu.contextNode,a=b.getOwnerTree();switch(c.itemId){case"delete-plugin-xml":a.deleteNodeXml(b);break;case"edit-plugin-xml":a.runNode(b);break;case"rename-plugin-xml":a.treeEditor.triggerEdit(b);break}}}}),_beforeInitComponent:function(){var b=this;var a=new Ext.tree.TreeLoader({url:this.baseUrl});return{title:"Plugins",loader:a,iconCls:"icon-bricks",bbar:{items:["->",{text:"Add Widget",iconCls:"icon-widgets-add",handler:b.onAddWidget,scope:b},{text:"Add plugin",iconCls:"icon-models-add",handler:b.onAddPluginClick,scope:b}]}}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.navigation.PluginItem.superclass.initComponent.apply(this,arguments)},onAddPluginClick:function(){var a=this.getRootNode();this.addBranchNode(a)},onAddWidget:function(){var b=this,a=afStudioWSUrls.modelListUrl;var c=new afStudio.wd.WidgetsBuilder({modelsUrl:a,fieldsUrl:a,placeType:"plugin",listeners:{widgetcreated:function(d){var e=String.format("/{0}/{1}/{2}.xml",b.root.text,d.data.place,d.data.widgetUri);b.loadRootNode(function(){this.selectPath(e,"text",function(j,g){if(j){b.showWidgetDesignerForNode(g)}else{b.initialItemState();var f=Ext.copyTo({},d.data,"actionPath, securityPath, place, placeType");f.uri=d.data.widgetUri;afStudio.WD.showWidgetDesigner(f)}})})}}});c.show()},isValidNodeType:function(a){return["plugin","module","xml"].indexOf(a)!=-1},isValidNodeName:function(c,a){var b=this.getNodeAttribute(c,"type");if(["plugin","module"].indexOf(b)!=-1){return this.constructor.superclass.isValidNodeName.call(this,c,a)}else{return/^[^\d]\w*\.xml$/im.test(a)?true:false}},runNode:function(a){this.showWidgetDesignerForNode(a)},onNodeDblClick:function(a,b){if(this.getNodeAttribute(a,"type")=="xml"){this.runNode(a)}},onNodeContextMenu:function(b,c){var f=this,a=this.getNodeAttribute(b,"type");b.select();if(f.isValidNodeType(a)){var d=f[a+"ContextMenu"];d.contextNode=b;d.showAt(c.getXY())}},addNodeController:function(b){var c=this,a=this.getNodeAttribute(b,"type");if(c.isValidNodeType(a)){c["addNode"+a.ucfirst()](b)}},renameNodeController:function(c,d,a){var e=this,b=this.getNodeAttribute(c,"type");if(e.isValidNodeType(b)){e["renameNode"+b.ucfirst()](c,d,a)}},addNodePlugin:function(c){var d=this,a=d.getRootNode(),b=this.getNodeAttribute(c,"text","");this.executeAction({url:afStudioWSUrls.pluginAddUrl,params:{name:b},loadingMessage:String.format('"{0}" plugin creation...',b),logMessage:String.format('Plugins: plugin "{0}" was created',b),run:function(e){this.refreshNode(a,b)},error:function(e){c.remove()}})},addNodeModule:function(c){var d=this,a=this.getNodeAttribute(c,"text"),b=this.getParentNodeAttribute(c,"text");this.executeAction({url:afStudioWSUrls.moduleAddUrl,params:{type:"plugin",place:b,name:a},loadingMessage:String.format('"{0}" module creation...',a),logMessage:String.format('Plugins: module "{0}" was created',a),run:function(e){this.refreshNode(b,a)},error:function(e){c.remove()}})},renameNodePlugin:function(c,d,b){var a={params:{newValue:d,oldValue:b},url:afStudioWSUrls.pluginRenameUrl,node:c,msg:"plugin"};this.renameNode(a,d,b)},renameNodeModule:function(c,d,b){var a={params:{type:"plugin",place:this.getParentNodeAttribute(c,"text"),name:b,renamed:d},url:afStudioWSUrls.moduleRenameUrl,node:c,refreshNode:this.getParentNodeAttribute(c,"text"),msg:"module"};this.renameNode(a,d,b)},renameNodeXml:function(d,f,b){var e=this.getParentNodeAttribute(d.parentNode,"text"),c=this.getParentNodeAttribute(d,"text");var a={params:{type:"plugin",place:e,moduleName:c,oldValue:b,newValue:f},url:afStudioWSUrls.widgetRenameUrl,node:d,refreshNode:e,msg:"widget"};this.renameNode(a,f,b)},renameNode:function(a,d,f){var e=this,b=a.refreshNode?a.refreshNode:e.getRootNode(),c=a.url?a.url:e.baseUrl;this.executeAction({url:c,params:a.params,loadingMessage:String.format('Renaming {0} from "{1}" to {2} ...',a.msg,f,d),logMessage:String.format('Plugins: {0} "{1}" was renamed to "{2}"',a.msg,f,d),run:function(g){this.refreshNode(b,d,function(){this.getRootNode().expandChildNodes()})},error:function(g){a.node.setText(f)}})},deleteNodePlugin:function(b){var a={params:{name:b.text},url:afStudioWSUrls.pluginDeleteUrl,item:b.text,msg:"plugin"};this.deleteNode(a)},deleteNodeModule:function(b){var a={params:{type:"plugin",place:b.parentNode.text,name:b.text},url:afStudioWSUrls.moduleDeleteUrl,item:b.text,msg:"module"};this.deleteNode(a)},deleteNodeXml:function(c){var d=this.getParentNodeAttribute(c.parentNode,"text"),a=this.getParentNodeAttribute(c,"text");var b={params:{type:"plugin",place:d,moduleName:a,name:c.text},url:afStudioWSUrls.widgetDeleteUrl,item:c.text,msg:"widget"};this.deleteNode(b)},deleteNode:function(a){var d=this,c=String.format('Are you sure you want to delete {0} "{1}"?',a.msg,a.item),b=a.url?a.url:d.baseUrl;Ext.Msg.confirm("Plugins",c,function(e){if(e=="yes"){d.executeAction({url:b,params:a.params,loadingMessage:String.format('{0} "{1}" deleting ...',a.msg,a.item),logMessage:String.format('Plugins: {0} "{1}" was deleted',a.msg,a.item),run:function(f){this.loadRootNode(this.initialItemState);afStudio.vp.clearWorkspace()}})}})},showWidgetDesignerForNode:function(a){var b=this.getParentNodeAttribute(a.parentNode,"text");afStudio.WD.showWidgetDesigner({uri:this.getNodeAttribute(a,"widgetUri"),actionPath:this.getNodeAttribute(a,"actionPath"),actionName:this.getNodeAttribute(a,"actionName"),securityPath:this.getNodeAttribute(a,"securityPath"),placeType:"plugin",place:b})}});Ext.reg("afStudio.navigation.pluginItem",afStudio.navigation.PluginItem);Ext.namespace("afStudio.viewport");afStudio.viewport.StudioToolbar=Ext.extend(Ext.Toolbar,{initComponent:function(){var a=this;var b={items:[{id:"mstudio",text:"Studio BETA",iconCls:"icon-studio",menu:{ignoreParentClicks:true,items:[{text:"Project",iconCls:"icon-studio-project",listeners:{added:function(c){a.setProjectMenu(c)},activate:function(c){a.setProjectMenu(c)}}},{text:"Users",iconCls:"icon-users",hidden:(afStudioUser.is_admin)?false:true,handler:function(){(new afStudio.UsersList).show()}},{text:"Settings",iconCls:"icon-studio-settings",handler:function(){(new afStudio.Settings()).show()}},"-",{text:"Help",iconCls:"icon-studio-help",handler:function(c,d){(new afStudio.Help()).show()}}]}},{text:"Theme Designer",iconCls:"icon-theme",handler:function(){(new afStudio.Theme()).show()}},{text:"Tools",iconCls:"icon-tools",menu:{items:[{text:"Console",iconCls:"icon-tools-console",handler:function(){afStudio.Cli.showConsole()}},{text:"DB Query",iconCls:"icon-data",handler:function(c,d){(new afStudio.dbQuery.QueryWindow()).show()}},{text:"Code Browser",iconCls:"icon-code-editor",handler:function(c,d){(new afStudio.CodeEditor()).show()}}]}},{text:"Debug",iconCls:"icon-debug",menu:{items:[{text:"AuditLog",iconCls:"icon-debug-auditlog",handler:function(){afStudio.Cli.showAuditLog()}},{text:"Debug",iconCls:"icon-debug-run",handler:function(){afStudio.Cli.showDebug()}}]}},{text:"Run",iconCls:"icon-runs",menu:{items:[{text:"Run",iconCls:"icon-run-run",scope:a,handler:a.runProject}]}},{xtype:"tbfill"},{text:'<img src="/images/famfamfam/user_go.png" border="0">',handler:function(){window.location.href="/afsAuthorize/signout"},tooltip:{text:"Click to log out",title:"admin"}}]};Ext.apply(this,Ext.apply(this.initialConfig,b));afStudio.viewport.StudioToolbar.superclass.initComponent.apply(this,arguments)},setProjectMenu:function(b){var a=this;if(b.menu){b.menu.removeAll()}else{b.menu=new Ext.menu.Menu({ignoreParentClicks:true})}if(afStudioProjectsManagementEnabled){b.menu.addMenuItem({text:"Create new project",iconCls:"icon-studio-create-project",handler:function(d,f){Ext.Ajax.request({url:Ext.urlAppend(afStudioWSUrls.project,Ext.urlEncode({cmd:"checkConfig"})),success:function(e){var g=Ext.decode(e.responseText);if(g.success){(new afStudio.CreateProjectWizard(g["dataset"])).show()}else{afStudio.Msg.error('Sorry but your local environment looks like not configured for "Create New Project" functionality to work')}}})}})}b.menu.addMenuItem({text:"Export project",iconCls:"icon-studio-export-project",menu:{ignoreParentClicks:true,items:[{text:"Sources",iconCls:"icon-studio-export-project-source",handler:function(){var d=Ext.urlAppend(afStudioWSUrls.exportUrl,Ext.urlEncode({type:"project"}));window.open(d,"export-win")}},{text:"DB",iconCls:"icon-studio-export-project-sql",menu:{items:[{text:"structure",iconCls:"icon-studio-export-project-sql",handler:function(d,g){var f=Ext.urlAppend(afStudioWSUrls.exportUrl,Ext.urlEncode({type:"db"}));window.open(f,"export-win")}},{text:"structure + data (for mysql)",iconCls:"icon-studio-export-project-sql",handler:function(d,g){var f=Ext.urlAppend(afStudioWSUrls.exportUrl,Ext.urlEncode({by_os:true,type:"db"}));window.open(f,"export-win")}}]}}]}});if(afStudioProjectsManagementEnabled){var c=afStudio.getRecentProjects();if(c.length>0){b.menu.addSeparator();b.menu.addMenuItem({text:"Recent projects",iconCls:"icon-studio-recent-projects",menu:a.getRecentProjectsMenu(c)})}}b.menu.doLayout()},getRecentProjectsMenu:function(a){recentProjectsMenu=new Ext.menu.Menu();for(key in a){if(a[key].url){recentProjectsMenu.add({text:a[key].text,href:a[key].url})}}return recentProjectsMenu},runProject:function(){var a=Ext.urlAppend(afStudioWSUrls.project,Ext.urlEncode({cmd:"run"}));afStudio.xhr.executeAction({url:a,mask:{msg:"Run command..."},showNoteOnSuccess:false,run:function(b){window.open(b.query,"runProject")}})}});Ext.reg("afStudio.viewport.studioToolbar",afStudio.viewport.StudioToolbar);Ext.namespace("afStudio.viewport");afStudio.viewport.StudioViewport=Ext.extend(Ext.Viewport,{_beforeInitComponent:function(){var b=new Ext.Panel({id:"north_panel",region:"north",height:32,border:false,bodyStyle:"background-color:#dfe8f6;",items:afStudio.tb});var a=new Ext.Panel({id:"center_panel",region:"center",layout:"fit",margins:{right:5},bodyStyle:"padding: 8px; background-image: url(/appFlowerStudioPlugin/images/bg/background_3.6.2_beta.jpg); background-position: 50% 50%; background-repeat: no-repeat;"});var c=new afStudio.viewport.WestPanel();this.viewRegions={north:b,center:a,west:c};return{id:"studio-viewport",layout:"border",items:[b,c,a]}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.viewport.StudioViewport.superclass.initComponent.apply(this,arguments)},mask:function(a){var c=Ext.isString(a)?a:"Loading, please wait...",b;if(Ext.isObject(a)){c=a.msg?a.msg:c;b=a.region?a.region:undefined}if(["center","west","north","south"].indexOf(b)!=-1){this.viewRegions[b].body.mask(c,"x-mask-loading")}else{this.el.mask(c,"x-mask-loading")}},unmask:function(a){if(a&&["center","west","north","south"].indexOf(a)!=-1){this.viewRegions[a].body.unmask()}this.el.unmask()},addToWorkspace:function(a,c){var d=this.viewRegions.center;if(c===true){d.removeAll(true)}var b=d.add(a);d.doLayout();return b},clearWorkspace:function(){var a=this.viewRegions.center;a.removeAll(true)}});afStudio.viewport.WestPanel=Ext.extend(Ext.Panel,{initComponent:function(){var b=afStudioUser.name||"user";var c=afStudioUser.username||"user";var a={id:"west_panel",title:"Navigation",region:"west",split:true,layout:"accordion",layoutConfig:{animate:true},width:220,minWidth:220,collapsible:true,activeItem:"models",listeners:{afterlayout:{fn:function(){var d=this.layout.activeItem;d.fireEvent("activate",d)},single:true}},defaults:{border:false},items:[{id:"models",xtype:"afStudio.navigation.modelItem"},{id:"layoutdesigner",xtype:"afStudio.navigation.layoutItem"},{id:"widgets",xtype:"afStudio.navigation.widgetItem"},{id:"plugins",xtype:"afStudio.navigation.pluginItem"},{id:"profile",title:"My Profile",autoScroll:true,iconCls:"user",html:"<div id='westpanel_link'>"+"<div style='background-color:#f8f8f8; border:1px solid #ddd;font-size:11px;'>"+"<b>Welcome, "+b+"</b><br>"+"Username: "+c+"<br>"+"<a href='#'>[Edit My Profile]</a>"+"</div>"+"</div>"}]};Ext.apply(this,Ext.apply(this.initialConfig,a));afStudio.viewport.WestPanel.superclass.initComponent.apply(this,arguments);this._initEvents()},onEditProfileLinkClick:function(){(new afStudio.UserWindow({mode:"edit",username:afStudioUser.username})).show()},onProfilePanelShow:function(a){a.body.child("A").on("click",this.onEditProfileLinkClick,this)},_initEvents:function(){Ext.getCmp("profile").on("afterrender",this.onProfilePanelShow,this)}});afStudio.viewport.SouthPanel=Ext.extend(Ext.Panel,{_beforeInitComponent:function(){return{region:"south",layout:"fit",height:215,split:true,collapseMode:"mini",items:[]}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.viewport.SouthPanel.superclass.initComponent.apply(this,arguments)}});Ext.ns("afStudio.models");afStudio.models.TypeComboBox=Ext.extend(Ext.ux.form.GroupingComboBox,{_beforeInitComponent:function(){var b=this;var a=new Ext.data.SimpleStore({fields:["group","value","text"],data:[["TEXT","char","char"],["TEXT","varchar","varchar"],["TEXT","longvarchar","longvarchar"],["TEXT","clob","clob"],["NUMBERS","numeric","numeric"],["NUMBERS","decimal","decimal"],["NUMBERS","tinyint","tinyint"],["NUMBERS","smallint","smallint"],["NUMBERS","integer","integer"],["NUMBERS","bigint","bigint"],["NUMBERS","real","real"],["NUMBERS","float","float"],["NUMBERS","double","double"],["NUMBERS","boolean","boolean"],["BINRAY","binary","binary"],["BINRAY","varbinary","varbinary"],["BINRAY","longvarbinary","longvarbinary"],["BINRAY","blob","blob"],["TEMPORA DATE/TIME","date","date"],["TEMPORA DATE/TIME","time","time"],["TEMPORA DATE/TIME","timestamp","timestamp"],["TEMPORA DATE/TIME","integer","integer"]]});return{triggerAction:"all",forceSelection:true,groupField:"group",valueField:"value",displayField:"text",mode:"local",store:a}},initComponent:function(){Ext.apply(this,Ext.applyIf(this.initialConfig,this._beforeInitComponent()));afStudio.models.TypeComboBox.superclass.initComponent.apply(this,arguments)}});Ext.reg("afStudio.models.typeCombo",afStudio.models.TypeComboBox);Ext.ns("afStudio.models");afStudio.models.TypeBuilder=(function(){return{invalidFieldName:'Field name must contain only characters, digits or "_" and start from character or "_"',createEditor:function(b,c,a){var e=null;if(b){var d=b.indexOf("(");if(d!=-1){b=b.substring(0,d)}}switch(b){case"boolean":e=new Ext.grid.GridEditor(new Ext.form.ComboBox({typeAhead:true,triggerAction:"all",lazyRender:true,editable:false,mode:"local",valueField:"field",displayField:"field",store:[[true,"true"],[false,"false"]]}));break;case"char":case"varchar":case"longvarchar":case"timestamp":e=new Ext.grid.GridEditor(new Ext.form.TextField({maxLength:c?c:Number.MAX_VALUE}));break;case"bigint":case"numeric":case"decimal":case"integer":case"smallint":e=new Ext.grid.GridEditor(new Ext.form.NumberField({allowDecimals:false,maxLength:c?c:Number.MAX_VALUE}));break;case"tinyint":e=new Ext.grid.GridEditor(new Ext.form.NumberField({autoCreate:{tag:"input",type:"text",size:"20",autocomplete:"off",maxlength:3},maxValue:255,allowDecimals:false,maxLength:c?c:3}));break;case"real":case"float":case"double":e=new Ext.grid.GridEditor(new Ext.form.NumberField({decimalPrecision:6,maxLength:c?c:Number.MAX_VALUE}));break;case"date":e=new Ext.grid.GridEditor(new Ext.form.DateField());break;case"time":e=new Ext.grid.GridEditor(new Ext.form.TimeField());break;case"binary":case"varbinary":case"longvarbinary":case"blob":case"clob":e=new Ext.grid.GridEditor(new Ext.form.DisplayField());break}if(e){e.on("beforecomplete",function(j,g,f){if(b=="boolean"){a=a?true:false}g=g?g:a;j.setValue(g)})}return e?e:null},createRenderer:function(a){var b=null;switch(a){case"bigint":case"numeric":case"decimal":case"integer":case"smallint":b=function(c,d){d.attr='style="text-align:right;"';return Ext.util.Format.number(c,"0.0,/i")};break;case"date":b=function(d){var c=Date.parse(d);return !isNaN(c)?new Date(c).format("m/d/Y"):d};break;default:b=function(c){return c};break}return b}}})();Ext.ns("afStudio.models");afStudio.models.RelationPicker=Ext.extend(Ext.Window,{closePicker:function(){if(this.closeAction=="hide"){this.hide()}else{this.close()}},pickRelation:function(){var c=this,e=this.modelsTree.getSelectionModel().getSelectedNode(),b=this.fieldsGrid.getSelectionModel().getSelected(),a=this.modelsTree.getModel(e),d=b.get("name");this.closePicker();this.fireEvent("relationpicked",a+"."+d)},initialRelationPick:function(d){var c=this,a=d.split(".");var b=c.modelsTree.getRootNode();(function(){var e=c.modelsTree.findModelByName(a[0]);if(e){c.modelsTree.selectModel(e);c.fieldsGrid.show();c.loadModelFields(e,function(g){if(a[1]){for(var j=0,f=g.length;j<f;j++){if(g[j].get("name")==a[1]){c.fieldsGrid.getSelectionModel().selectRecords([g[j]],false);break}}}})}else{c.fieldsGrid.getStore().removeAll();c.modelsTree.getSelectionModel().clearSelections()}}).defer(500)},loadModelFields:function(b,d){var c=this.modelsTree.getSchema(b),a=this.modelsTree.getModel(b);this.fieldsGrid.getStore().load({params:{schema:c,model:a},callback:d||Ext.emptyFn})},onModelClick:function(a,b){this.fieldsGrid.show();this.loadModelFields(a)},onModelsLoad:function(a,b){this.fieldsGrid.getStore().removeAll();this.fieldsGrid.hide()},onFieldsSelectionChange:function(b){var a=this.getFooterToolbar().getComponent("pick-relation");b.hasSelection()?a.enable():a.disable()},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._initCmp()));afStudio.models.RelationPicker.superclass.initComponent.apply(this,arguments);this._initEvents()},_initCmp:function(){var b=this;var a=new afStudio.common.ModelFieldsGrid({ref:"../fieldsGrid",hidden:true});return{title:"Relation Picker",iconCls:"icon-table-relationship",modal:true,width:600,height:400,maximizable:true,plain:true,layout:"border",items:[{region:"west",layout:"fit",width:220,items:[{id:"models-picker",xtype:"afStudio.models.modelTree",url:b.modelsUrl,border:false,ref:"../modelsTree"}]},{region:"center",layout:"fit",items:[a]}],buttons:[{itemId:"pick-relation",text:"ok",disabled:true,iconCls:"icon-accept",handler:Ext.util.Functions.createDelegate(b.pickRelation,b)}]}},_initEvents:function(){var b=this,d=this.modelsTree,a=this.fieldsGrid,c=a.getSelectionModel();b.addEvents("relationpicked");d.on({scope:this,click:this.onModelClick,modelsload:this.onModelsLoad});c.on({scope:this,selectionchange:this.onFieldsSelectionChange})}});Ext.ns("afStudio.models");N=afStudio.models;N.RelationCombo=Ext.extend(Ext.form.ComboBox,{_beforeInitComponent:function(){var b=this;var a=new Ext.data.JsonStore({url:b.relationUrl,baseParams:{xaction:"readrelation"},root:"data",fields:["id","value"]});return{maskRe:/[\w\.]/,triggerClass:"x-form-relation-trigger",typeAhead:true,lazyRender:true,queryParam:"query",mode:"remote",minChars:1,editable:true,forceSelection:true,store:a,valueField:"id",displayField:"value",hiddenName:"relation",name:"relation"}},initComponent:function(){Ext.apply(this,Ext.applyIf(this.initialConfig,this._beforeInitComponent()));afStudio.models.RelationCombo.superclass.initComponent.apply(this,arguments)},initEvents:function(){afStudio.models.RelationCombo.superclass.initEvents.apply(this,arguments);this.keyNav.down=function(a){if(!this.isExpanded()){}else{this.inKeyMode=true;this.selectNext()}return false};this.keyNav.enter=function(f){var d=this.getRawValue(),a=this.view.getSelectedIndexes()[0],b=this.store,c=b.getAt(a);if(d.indexOf(".")==-1){if(c){this.setRawValue(c.get(this.initialConfig.displayField)+".");this.doQuery(c.get(this.initialConfig.displayField)+".")}}else{this.onViewClick()}}},createRelationPicker:function(){var a=this;a.relationPicker=new afStudio.models.RelationPicker({modelsUrl:afStudioWSUrls.modelListUrl,fieldsUrl:afStudioWSUrls.modelListUrl,closable:true,closeAction:"hide",listeners:{relationpicked:function(c){if(a.fieldsGrid){var b=a.fieldsGrid.getSelectionModel().getSelectedCell();a.fieldsGrid.startEditing(b[0],b[1]);if(c){a.setValue(c)}a.fieldsGrid.stopEditing()}else{a.setValue(c)}}}})},onTriggerClick:function(b){if(this.readOnly||this.disabled){return}if(this.isExpanded()){this.collapse();this.el.focus()}if(!this.relationPicker){this.createRelationPicker()}if(this.fieldsGrid){this.fieldsGrid.stopEditing()}var a=this;this.relationPicker.show(null,function(){this.initialRelationPick(a.getRawValue()||a.getValue())})}});Ext.reg("relationcombo",N.RelationCombo);delete N;Ext.ns("afStudio.models");afStudio.models.TreeEditor=Ext.extend(Ext.tree.TreeEditor,{beforeNodeClick:function(a,b){}});afStudio.models.ModelTree=Ext.extend(Ext.tree.TreePanel,{url:afStudioWSUrls.modelListUrl,maskModelTree:function(a){this.body.mask(a?a:"Loading, please Wait...","x-mask-loading")},unmaskModelTree:function(){this.body.unmask()},selectModel:function(a){this.selectPath(a.getPath())},findModelByName:function(a){return this.getRootNode().findChild("text",a)},reloadModels:function(a){if(Ext.isFunction(a)){this.getRootNode().reload(a)}else{this.getRootNode().reload()}},refreshModels:function(d,b,c,a){this.reloadModels()},getSchema:function(a){return a.attributes.schema||undefined},getModel:function(a){return a.text},onModelClick:function(a,b){},onModelDbClick:Ext.emptyFn,onLoaderBeforeLoad:function(a,b,c){this.maskModelTree()},onLoaderLoad:function(a,c,b){this.unmaskModelTree();this.fireEvent("modelsload",a,b)},onLoaderLoadException:function(a,c,b){this.unmaskModelTree()},_beforeInitComponent:function(){var d=this;var b=new Ext.tree.AsyncTreeNode({path:"root",text:"ModelRoot",draggable:false});var c=[{id:"refresh",handler:Ext.util.Functions.createDelegate(d.refreshModels,d)}];var a=new Ext.tree.TreeLoader({url:this.modelsUrl||this.url,baseParams:{cmd:"get"}});return{title:"Models",loader:a,iconCls:"icon-models",autoScroll:true,method:"post",root:b,rootVisible:false,tools:c}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.models.ModelTree.superclass.initComponent.apply(this,arguments);this._initEvents()},_initEvents:function(){var a=this;a.addEvents("modelsload");a.on({dblclick:Ext.util.Functions.createDelegate(a.onModelDbClick,a),afterrender:function(){a.loader.on({beforeload:Ext.util.Functions.createDelegate(a.onLoaderBeforeLoad,a),load:Ext.util.Functions.createDelegate(a.onLoaderLoad,a),loadexception:Ext.util.Functions.createDelegate(a.onLoaderLoadException,a)})}});a.root.expand()}});Ext.reg("afStudio.models.modelTree",afStudio.models.ModelTree);Ext.ns("afStudio.models");afStudio.models.FieldsGrid=Ext.extend(Ext.grid.EditorGridPanel,{saveModel:function(){var d=this,c=d.getStore(),b=c.proxy.url,a=c.getRange(),e=[],g=false;Ext.each(a,function(k,j){e.push(k.data)});if(!Ext.isEmpty(c.getModifiedRecords())){Ext.each(c.getModifiedRecords(),function(k,j){if(!g&&k.json&&k.data.name!=k.json.name){g=true}})}var f=function(k,j){afStudio.vp.mask({region:"center",msg:"Altering "+k.model+" model..."});Ext.Ajax.request({url:b,params:{xaction:"alterModel",model:k.model,schema:k.schema,fields:Ext.encode(e)},success:function(p,n){afStudio.vp.unmask("center");var m=Ext.decode(p.responseText);var o=String.format('"{0}" model structure was saved',k.model);k.fireEvent("logmessage",k,o);if(m.success){afStudio.Msg.info(m.message);c.commitChanges();k.fireEvent("altermodel")}else{k.fireEvent("altermodelexception",p);afStudio.Msg.warning(m.message)}},failure:function(n,m){afStudio.vp.unmask("center");k.fireEvent("altermodelfailure",n);afStudio.Msg.error("Status: "+n.status)}})};if(g){Ext.MessageBox.confirm("Confirm","Field name has been changed - all data for old field will be lost. Are you sure you want to do that?",function(j){if(j=="yes"){f(d,e)}})}else{f(d,e)}},insertAfterField:function(){var d=this,a=d.getSelectionModel().getSelectedCell(),c=a?a[0]+1:(d.store.getCount()>0?1:0);var b=new d.store.recordType({name:"",type:"integer",required:false,primaryString:false});d.stopEditing();d.store.insert(c,b);d.startEditing(c,a?a[1]:0)},insertBeforeField:function(){var d=this,a=d.getSelectionModel().getSelectedCell(),c=a?a[0]:0;var b=new d.store.recordType({name:"",type:"integer",required:false,primaryString:false});d.stopEditing();d.store.insert(c,b);d.startEditing(c,a?a[1]:0)},deleteField:function(){var c=this,a=c.getSelectionModel().getSelectedCell();if(a){var b=c.store.getAt(a[0]);c.store.remove(b)}},booleanEditorBuilder:function(){return{editor:new Ext.form.ComboBox({typeAhead:true,triggerAction:"all",lazyRender:true,editable:false,mode:"local",valueField:"field",displayField:"field",store:[[true,"true"],[false,"false"]]}),renderer:function(b,c,a){c.css+=" x-grid3-check-col-td";return'<div class="x-grid3-check-col'+(b?"-on":"")+'" />'}}},typeEditorBuilder:function(){return{editor:new afStudio.models.TypeComboBox({lazyRender:true})}},nameEditorBuilder:function(){var a=this,b=[];return{editor:new Ext.form.TextField({allowBlank:false,maskRe:/[\w]/,validator:function(c){return/^[^\d]\w*$/im.test(c)?true:afStudio.models.TypeBuilder.invalidFieldName}})}},loadModelData:function(a){this.getStore().loadData(a)},_beforeInitComponent:function(){var e=this;function a(g,j){return j.primaryKey?"primary":(j.index=="unique"?"unique":(j.index?"index":null))}function d(g,j){return(j.foreignModel&&j.foreignReference)?j.foreignModel+"."+j.foreignReference:null}var f=new Ext.data.JsonStore({url:afStudioWSUrls.modelListUrl,autoLoad:false,baseParams:{xaction:"read",model:e.model,schema:e.schema},storeId:"model-fields-st",root:"data",idProperty:"id",fields:[{name:"id"},{name:"key",mapping:"id",convert:a},{name:"relation",mapping:"id",convert:d},{name:"autoIncrement"},{name:"primaryKey"},{name:"index"},{name:"name"},{name:"type"},{name:"size"},{name:"primaryString",type:"boolean",defaultValue:false},{name:"required"},{name:"default"},{name:"foreignTable"},{name:"foreignModel"},{name:"foreignReference"},{name:"onDelete"}]});var c=new Ext.grid.ColumnModel({defaults:{sortable:true},columns:[{header:'<div class="model-pk-hd">&#160;</div>',width:25,dataIndex:"key",editor:new Ext.form.ComboBox({typeAhead:true,triggerAction:"all",lazyRender:true,editable:false,mode:"local",valueField:"field",displayField:"field",store:[["","None"],["primary","Primary"],["index","Index"],["unique","Unique"]]}),renderer:function(j){var g="";switch(j){case"primary":g='<div class="pk-cell">&#160;</div>';break;case"index":g='<div class="index-cell">&#160;</div>';break;case"unique":g='<div class="unique-cell">&#160;</div>';break}return g}},{header:"Name",width:100,dataIndex:"name",editor:e.nameEditorBuilder().editor},{header:"Type",width:100,dataIndex:"type",editor:e.typeEditorBuilder().editor},{header:"Size",width:50,dataIndex:"size",editor:new Ext.form.NumberField({allowDecimals:false,allowNegative:false})},{header:"Autoincrement",width:55,dataIndex:"autoIncrement",editor:e.booleanEditorBuilder().editor,renderer:e.booleanEditorBuilder().renderer},{header:"Default value",width:100,dataIndex:"default",editor:new Ext.form.TextField()},{header:"Relation",width:150,dataIndex:"relation",editor:new afStudio.models.RelationCombo({relationUrl:afStudioWSUrls.modelListUrl,fieldsGrid:e})},{header:"Required",width:50,dataIndex:"required",align:"center",editor:e.booleanEditorBuilder().editor,renderer:e.booleanEditorBuilder().renderer},{header:"On Delete",width:50,dataIndex:"onDelete",align:"center",editor:new Ext.form.ComboBox({typeAhead:true,triggerAction:"all",lazyRender:true,editable:false,mode:"local",valueField:"field",displayField:"field",value:"none",store:[["cascade","cascade"],["setnull","setnull"],["restrict","restrict"],["none","none"]]})},{header:"ObjectToString",width:60,dataIndex:"primaryString",align:"center",xtype:"templatecolumn",tpl:'<input type="radio" name="primaryString" <tpl if="primaryString">checked="checked"</tpl> />',listeners:{click:function(m,j,o,n){if(Ext.get(n.target).is("input[type=radio]")){var g=j.getStore(),k=g.getAt(o);g.each(function(p){p.set("primaryString",false)});k.set("primaryString",true);g.commitChanges()}}}}]});var b=new Ext.Toolbar({items:[{text:"Save",iconCls:"icon-save",scope:e,handler:e.saveModel},"-",{text:"Insert",iconCls:"icon-add",menu:{items:[{text:"Insert after",scope:e,handler:e.insertAfterField},{text:"Insert before",scope:e,handler:e.insertBeforeField}]}},"-",{text:"Delete",iconCls:"afs-icon-delete",scope:e,handler:e.deleteField}]});return{title:"Model Config",iconCls:"icon-table-gear",clicksToEdit:1,store:f,colModel:c,columnLines:true,loadMask:true,autoScroll:true,tbar:b,viewConfig:{forceFit:true},plugins:["cellEditorBuilder"]}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.models.FieldsGrid.superclass.initComponent.apply(this,arguments);this._afterInitComponent()},_afterInitComponent:function(){var c=this,b=c.getStore(),a=c.getColumnModel();c.addEvents("altermodel","altermodelexception","altermodelfailure");c.loadModelData(c._data)}});Ext.reg("afStudio.models.fieldsGrid",afStudio.models.FieldsGrid);Ext.ns("afStudio.models");afStudio.models.ModelStore=Ext.extend(Ext.data.Store,{autoSave:false,constructor:function(a){a=a||{};this.proxy=a.proxy;delete a.proxy;this.readerCfg=Ext.applyIf(a.readerCfg||{},{root:"data"});delete a.readerCfg;this.reader=new Ext.data.JsonReader(this.readerCfg);this.writerCfg=Ext.applyIf(a.writerCfg||{},{listful:true});delete a.writerCfg;this.writer=new Ext.data.JsonWriter(this.writerCfg),afStudio.models.ModelStore.superclass.constructor.call(this,a);this.initStoreEvents()},initStoreEvents:function(){this.on({scope:this,load:this.onLoad,beforewrite:this.onBeforewrite})},onLoad:function(c,b){var a=[new this.recordType()];this.add(a)},onBeforewrite:function(b,e,a,d){if(e==Ext.data.Api.actions.create){var c=[];Ext.each(a,function(g,f){var k=true;for(var j in g.data){k=false;break}if(k){c.push(f)}});Ext.each(c,function(f){a.splice(f,1)});if(Ext.isEmpty(a)){return false}}}});Ext.ns("afStudio.models");Ext.override(Ext.form.Field,{initEvents:function(){this.mon(this.el,Ext.EventManager.getKeyEvent(),this.fireKey,this);this.mon(this.el,"focus",this.onFocus,this);this.mon(this.el,"blur",this.onBlur,this,this.inEditor?{buffer:10}:null)}});afStudio.models.modelGridView=Ext.extend(Ext.grid.GridView,{beforeColMenuShow:function(){var a=this.cm,c=a.getColumnCount();this.colMenu.removeAll();for(var b=0;b<c;b++){if(a.config[b].fixed!==true&&a.config[b].hideable!==false&&!a.config[b].uninit){this.colMenu.add(new Ext.menu.CheckItem({itemId:"col-"+a.getColumnId(b),text:a.getColumnHeader(b),checked:!a.isHidden(b),hideOnClick:false,disabled:a.config[b].hideable===false}))}}},afterRenderUI:function(){var a=this.grid;this.initElements();Ext.fly(this.innerHd).on("click",this.handleHdDown,this);this.mainHd.on({scope:this,mouseover:this.handleHdOver,mouseout:this.handleHdOut,mousemove:this.handleHdMove});this.scroller.on("scroll",this.syncScroll,this);if(a.enableColumnResize!==false){this.splitZone=new Ext.grid.GridView.SplitDragZone(a,this.mainHd.dom)}if(a.enableColumnMove){this.columnDrag=new Ext.grid.GridView.ColumnDragZone(a,this.innerHd);this.columnDrop=new Ext.grid.HeaderDropZone(a,this.mainHd.dom)}var b=a;if(b.enableHdMenu!==false){this.hmenu=new Ext.menu.Menu({id:b.id+"-hctx",show:function(d,e,c){this.parentMenu=c;if(!this.el){this.render()}this.fireEvent("beforeshow",this);this._el=d;this.showAt(this.el.getAlignToXY(d,e||this.defaultAlign),c,false)}});this.colMenu=new Ext.menu.Menu({id:b.id+"-hcols-menu"});this.colMenu.on("beforeshow",this.beforeColMenuShow,this);this.colMenu.on("itemclick",this.columnMenuClick,this);this.hmenu.add({itemId:"asc",text:this.sortAscText,cls:"xg-hmenu-sort-asc"},{itemId:"desc",text:this.sortDescText,cls:"xg-hmenu-sort-desc"},"-",{itemId:"addfb",text:"Add Field Before"},{itemId:"addfa",text:"Add Field After"},"-",{itemId:"dupb",text:"Duplicate Field"},{itemId:"editb",text:"Edit Field"},{itemId:"renameb",text:"Rename Field"},{itemId:"deletef",text:"Delete Field"},"-",{itemId:"columns",hideOnClick:false,text:this.columnsText,menu:this.colMenu,iconCls:"x-cols-icon"});this.hmenu.on("itemclick",this.handleHdMenuClick,this)}if(a.trackMouseOver){this.mainBody.on({scope:this,mouseover:this.onRowOver,mouseout:this.onRowOut})}if(a.enableDragDrop||a.enableDrag){this.dragZone=new Ext.grid.GridDragZone(a,{ddGroup:a.ddGroup||"GridDD"})}this.updateHeaderSortState()},columnMenuClick:function(c){var b=this.hdCtxIndex,a=this.cm,d=this.ds;b=a.getIndexById(c.itemId.substr(4));if(b!=-1){if(c.checked&&a.getColumnsBy(this.isHideableColumn,this).length<=2){this.onDenyColumnHide();return false}a.setHidden(b,c.checked)}return true},getUninitColumn:function(){for(var a=0;a<this.cm.config.length;a++){var b=this.cm.config[a];if(b.uninit){return a}}return 0},createDupheader:function(e){for(var c=1;c<=this.cm.config.length;c++){var d=e+c;var a=true;for(var b=0;b<this.cm.config.length;b++){if(d==this.cm.getColumnHeader(b)){a=false;break}}if(a){return d}}return e+(this.cm.config+1)},handleHdMenuClick:function(m){var f=this.hdCtxIndex,j=this.cm,b=this.ds;switch(m.itemId){case"asc":b.sort(j.getDataIndex(f),"ASC");break;case"desc":b.sort(j.getDataIndex(f),"DESC");break;case"addfa":var g=this.getUninitColumn();this.cm.config[g].uninit=false;this.cm.moveColumn(g,f+1);this.cm.setHidden(f+1,false);break;case"addfb":var g=this.getUninitColumn();this.cm.config[g].uninit=false;this.cm.moveColumn(g,f);this.cm.setHidden(f,false);break;case"dupb":var g=this.getUninitColumn();this.cm.config[g].uninit=false;this.cm.moveColumn(g,f+1);var c=this.cm.getColumnHeader(f);this.cm.setColumnHeader(f+1,this.createDupheader(c));this.cm.setHidden(f+1,false);break;case"renameb":var d=this.findHeaderCell(m.parentMenu._el);this.editHeadColumn(d.firstChild,f);break;case"editb":var a=j.config[f].fieldDefinition||{};if(!m.renameWindow){m.renameWindow=new afStudio.models.EditFieldWindow({gridView:this})}m.renameWindow.fieldDefinition=a;m.renameWindow.fieldIndex=f;m.renameWindow.show(m.el);break;case"deletef":var k=j.getColumnCount(true);if(k>2){j.setHidden(f,true);j.setColumnHeader(f,this.grid.defautHeaderTitle);j.setEditor(f,null);j.config[f].uninit=true;j.config[f].fieldDefinition.exists=false}break;case"ctext":var e=this.grid.createEditer();j.config[f].editor=e;break;case"ccheckbox":var e=this.grid.createEditer(new Ext.form.Checkbox());j.config[f].editor=e;break;case"cchoice":var e=this.grid.createEditer(new Ext.form.ComboBox({typeAhead:true,triggerAction:"all",lazyRender:true,mode:"local",valueField:"field",displayField:"field",store:new Ext.data.ArrayStore({fields:["field"],data:[]})}));e.on("beforestartedit",function(t,n,v){var o=t.field.store;var w=this.grid.store;o.removeAll();var p=[];for(var r=0;r<w.getCount();r++){var s=w.getAt(r);var v=s.get(j.getDataIndex(f));if(v==""||v==null){continue}var u=true;for(var q=0;q<p.length;q++){if(p[q][0]==v){u=false;break}}if(u){p.push([v])}}o.loadData(p);return true},this);j.config[f].editor=e;break;case"cdate":var e=this.grid.createEditer(new Ext.form.DateField());e.getValue=function(){var n=this.field.getValue();return n.format("m/d/Y")};j.config[f].editor=e;break;case"cpassword":var e=this.grid.createEditer(new Ext.form.TextField({inputType:"password"}));j.config[f].editor=e;j.config[f].renderer=function(n){return"XXXX"};break;case"cnumber":var e=this.grid.createEditer(new Ext.form.NumberField());j.config[f].align="right";j.config[f].editor=e;break;case"ccurrency":var e=this.grid.createEditer(new Ext.form.NumberField());j.config[f].editor=e;j.config[f].align="right";j.config[f].renderer=Ext.util.Format["usMoney"];break;case"ctime":var e=this.grid.createEditer(new Ext.form.TimeField());j.config[f].editor=e;break;case"cemail":var e=this.grid.createEditer(new Ext.form.TextField({vtype:"email"}));j.config[f].editor=e;break;case"cphonenumber":var e=this.grid.createEditer(new Ext.form.NumberField({maxLength:12}));j.config[f].editor=e;break;case"crate":var e=this.grid.createEditer(new Ext.form.SliderField({minValue:0,maxValue:5}));j.config[f].editor=e;break}return true},showNextColumn:function(b){var a=this.cm;if(b<=this.grid.maxColumns){a.setHidden(b+1,false);a.config[b+1].uninit=false}},headEditComplete:function(d,c,b){var e=d._index,a=this.cm;if(c!=b){a.setColumnHeader(e,c);var f=a.config[e].fieldDefinition;if(f){f.name=c;if(!f.exists){a.setEditor(e,afStudio.models.TypeBuilder.createEditor("varchar"));f.exists=true}}}},editHeadColumn:function(d,b){var a=new Ext.grid.GridEditor(new Ext.form.TextField({allowBlank:false,maskRe:/[\w]/,validator:function(f){return/^[^\d]\w*$/im.test(f)?true:afStudio.models.TypeBuilder.invalidFieldName}}));a._index=b;a.on({scope:this,complete:this.headEditComplete});a.startEdit(d,this.cm.getColumnHeader(b));var e=true;for(var c=b+1;c<this.grid.maxColumns;c++){if(!this.cm.isHidden(c)){e=false;break}}if(e){this.showNextColumn(b)}},handleHdDown:function(g,d){var f=this.findHeaderCell(d);if(!f){return}var c=this.getCellIndex(f);if(Ext.fly(d).hasClass("x-grid3-hd-btn")){g.stopEvent();Ext.fly(f).addClass("x-grid3-hd-menu-open");this.hdCtxIndex=c;var b=this.hmenu.items,a=this.cm;this.hmenu.on("hide",function(){Ext.fly(f).removeClass("x-grid3-hd-menu-open")},this,{single:true});this.hmenu.show(d,"tl-bl?")}else{this.editHeadColumn(f.firstChild,c)}}});afStudio.models.ExcelGridPanel=Ext.extend(Ext.grid.EditorGridPanel,{maxColumns:20,defautHeaderTitle:"NewField",autoScroll:true,columnLines:true,clicksToEdit:1,createEditer:function(a){var b=a?a:new Ext.form.TextField();return new Ext.grid.GridEditor(b)},beforeInit:function(){var c=[new Ext.grid.RowNumberer()],g=[];for(var e=0;e<this.maxColumns;e++){var f=true;if(e==0){f=false}c.push({header:this.defautHeaderTitle,dataIndex:"c"+e,width:80,hidden:f,uninit:f,editor:this.createEditer()});g.push({name:"c"+e})}var k=this.columns?new Ext.grid.ColumnModel(this.columns):new Ext.grid.ColumnModel(c);var j;if(this.store){j=this.store;if(this.store.getCount()==0){var d=this.store.recordType;this.store.add([new d()])}}else{j=new Ext.data.SimpleStore({fields:g,data:[[""]]})}var b=new Ext.grid.CellSelectionModel({onEditorKey:function(u,s){if(s.getKey()==s.TAB){this.handleKeyDown(s)}if(s.getKey()==s.ENTER){var o,p=this.grid,v=p.lastEdit,q=p.activeEditor,n=s.shiftKey,w,v,m,t;if(n){o=p.walkCells(v.row-1,v.col,-1,this.acceptsNav,this)}else{o=p.walkCells(v.row+1,v.col,1,this.acceptsNav,this)}if(o){m=o[0];t=o[1];if(p.isEditor&&p.editing){w=p.activeEditor;if(w&&w.field.triggerBlur){w.field.triggerBlur()}}p.startEditing(m,t)}}}});var a={store:j,cm:k,selModel:b,view:new afStudio.models.modelGridView()};Ext.apply(this,Ext.apply(this.initialConfig,a))},afterInit:function(){this.on({scope:this,afteredit:function(d){var f=d.row+1,a=d.column,c=this.store,b=c.getCount();if(b==f){c.add([new c.recordType()])}if(this.getColumnModel().getColumnCount(true)==(a+1)&&a<this.maxColumns){this.getView().showNextColumn(a)}}})},initComponent:function(){this.beforeInit();afStudio.models.ExcelGridPanel.superclass.initComponent.apply(this,arguments);this.afterInit()}});afStudio.models.ModelGrid=Ext.extend(afStudio.models.ExcelGridPanel,{recordsPerPage:25,createUninitColumn:function(b){var a=this.defautHeaderTitle;return{header:a,dataIndex:"c"+b,uninit:true,width:80,hidden:b==0?false:true,editor:afStudio.models.TypeBuilder.createEditor(),fieldDefinition:{name:a,type:"varchar",exists:false}}},beforeInit:function(){var f=this,g=f._data.data,a=["id"],b=!Ext.isEmpty(g),e=[new Ext.grid.RowNumberer()];if(g.length>0){Ext.each(g,function(n,k){var m={header:n.name,dataIndex:"c"+k,width:80,hidden:false,renderer:afStudio.models.TypeBuilder.createRenderer(n.type),fieldDefinition:Ext.apply(n,{exists:true})};if(!n.autoIncrement){m.editor=afStudio.models.TypeBuilder.createEditor(n.type,n.size,n["default"])}e.push(m);a.push({name:"c"+k})})}for(var d=e.length-1;d<=this.maxColumns;d++){e.push(this.createUninitColumn(d));a.push({name:"c"+d})}f.store=new afStudio.models.ModelStore({proxy:f.storeProxy,readerCfg:{fields:a,idProperty:"id"}});f.store.load({params:{start:0,limit:f.recordsPerPage}});f.columns=e;afStudio.models.ModelGrid.superclass.beforeInit.apply(this,arguments);var j=new Ext.PagingToolbar({store:f.store,displayInfo:true,displayMsg:"Displaying records {0} - {1} of {2}",pageSize:f.recordsPerPage});var c={iconCls:"icon-database-table",loadMask:true,viewConfig:{forceFit:true},tbar:[{text:"Save",iconCls:"icon-save",scope:this,handler:function(n,o){var m=this.getColumnModel(),k=[];Ext.iterate(m.config,function(q){if(q.id!="numberer"&&q.fieldDefinition.exists){k.push(q.fieldDefinition)}});if(k.length){var p=this.getTopToolbar();p.getComponent("insert").enable();p.getComponent("delete").enable()}afStudio.xhr.executeAction({url:afStudioWSUrls.modelListUrl,params:{xaction:"alterModel",model:f.model,schema:f.schema,fields:Ext.encode(k)},mask:{msg:String.format('Saving "{0}" model...',f.model),region:"center"},showNoteOnSuccess:false,logMessage:String.format('Model "{0}" was successfully saved.',f.model),scope:this,run:function(q){this.fireEvent("alterfield");this.getStore().save()}})}},"-",{text:"Insert",itemId:"insert",disabled:!b,iconCls:"icon-add",menu:{items:[{text:"Insert after",scope:f,handler:f.insertAfterField},{text:"Insert before",scope:f,handler:f.insertBeforeField}]}},"-",{text:"Delete",itemId:"delete",disabled:!b,iconCls:"afs-icon-delete",scope:this,handler:function(m,o){var k=this.getSelectionModel().getSelectedCell();if(k){var n=this.store.getAt(k[0]);this.store.remove(n)}}},"-",{text:"Create Widget",iconCls:"icon-widgets-add",handler:function(k,m){if(!f.createWidgetWindow){f.createWidgetWindow=new afStudio.models.CreateWidgetWindow({model:f.model,fields:f._data})}f.createWidgetWindow.fields=f._data;f.createWidgetWindow.show()}}],bbar:j};Ext.apply(this,Ext.apply(this.initialConfig,c))},afterInit:function(){afStudio.models.ModelGrid.superclass.afterInit.apply(this,arguments);this.addEvents("alterfield","alterfieldexception","alterfieldfailure","logmessage")},insertAfterField:function(c,j){var g=this,a=g.getSelectionModel().getSelectedCell(),f=a?a[0]+1:this.store.getCount();var d=new g.store.recordType({name:"",type:"varchar",size:"11",required:false});g.stopEditing();g.store.insert(f,d);g.startEditing(f,a?a[1]:0)},insertBeforeField:function(){var d=this,a=d.getSelectionModel().getSelectedCell(),c=a?a[0]:0;var b=new d.store.recordType({name:"",type:"varchar",size:"11",required:false});d.stopEditing();d.store.insert(c,b);d.startEditing(c,a?a[1]:0)}});Ext.reg("afStudio.models.modelGrid",afStudio.models.ModelGrid);Ext.ns("afStudio.models");afStudio.models.EditFieldWindow=Ext.extend(Ext.Window,{maskWindow:function(a){this.bwrap.mask(a?a:"loading...")},unmaskWindow:function(){this.bwrap.unmask()},updateFieldDefinition:function(c){var d=this,b=d.fieldIndex,a=d.gridView.cm;a.setColumnHeader(b,c.name);a.config[b].editor=afStudio.models.TypeBuilder.createEditor(c.type,Ext.util.Format.trim(c.size),c["default"]);a.config[b].renderer=afStudio.models.TypeBuilder.createRenderer(c.type);d.gridView.refresh();a.config[b].fieldDefinition.name=c["name"];a.config[b].fieldDefinition.type=c.type;a.config[b].fieldDefinition.size=Ext.util.Format.trim(c.size);a.config[b].fieldDefinition.required=c["required"];a.config[b].fieldDefinition["default"]=c["default"];a.config[b].fieldDefinition.autoIncrement=c["autoIncrement"];a.config[b].fieldDefinition.key=c["key"];a.config[b].fieldDefinition.relation=c["relation"];a.config[b].fieldDefinition.onDelete=c["onDelete"]},doFieldAction:function(g){var f=this,d=f.gridView.grid,b=d.model,e=d.schema,a,c;a=afStudioWSUrls.modelListUrl;c="alterModelUpdateField";f.maskWindow();Ext.Ajax.request({url:a,params:{xaction:c,model:b,field:g.field,schema:e,fieldDef:Ext.encode(g.fieldData)},success:function(m,k){var j=Ext.decode(m.responseText);f.unmaskWindow();if(j.success){f.updateFieldDefinition(g.fieldData);Ext.isFunction(g.callback)?g.callback():null;d.fireEvent("alterfield")}else{d.fireEvent("alterfieldexception",m);afStudio.Msg.warning(j.message)}},failure:function(k,j){f.unmaskWindow();d.fireEvent("alterfieldfailure",k);afStudio.Msg.error("Status: "+k.status)}})},updateModelField:function(c,a){var b=this;this.doFieldAction({field:c,fieldData:a,callback:Ext.util.Functions.createDelegate((function(){this.closeEditFieldWindow()}),b)})},createModelField:function(e){var d=this,c=d.fieldDefinition,b=d.fieldIndex,a=d.gridView.cm;this.doFieldAction({fieldData:e,callback:Ext.util.Functions.createDelegate((function(){a.config[b].fieldDefinition.exists=true;this.closeEditFieldWindow()}),d)})},closeEditFieldWindow:function(){if(this.closeAction=="hide"){this.hide()}else{this.close()}},saveUpdates:function(){var e=this,c=e.fieldDefinition,b=e.fieldIndex,a=e.gridView.cm,f=c.exists,d=e.fieldForm.getForm();if(d.isValid()){var g=d.getFieldValues();if(f){if(c.name!=g.name){Ext.MessageBox.confirm("Confirm","Field name has been changed - all data for old field will be lost. Are you sure you want to do that?",function(j){if(j=="yes"){e.updateModelField(c.name,g)}})}else{e.updateModelField(c.name,g)}}else{e.createModelField(g)}}},cancelEditing:function(){this.closeEditFieldWindow()},loadFieldData:function(){var d=this,b=d.fieldDefinition,e=d.gridView,c=d.fieldForm.getForm();c.loadRecord(new Ext.data.Record(b));if(b.foreignModel){c.findField("relation").setValue(b.foreignModel+"."+b.foreignReference)}var a;if(b.key){a=b.key}else{if(b.primaryKey||b.index||b.index){a=b.primaryKey?"primary":(b.index=="unique"?"unique":(b.index?"index":""))}}c.findField("key").setValue(a)},onShowEvent:function(){var c=this.fieldForm,b=c.getComponent("fields-tab");c.getForm().reset();var a=b.findByType("field");Ext.each(a,function(d){d.setValue("")});b.setActiveTab(0);this.loadFieldData()},_beforeInitComponent:function(){var b=this;var a=new Ext.FormPanel({ref:"fieldForm",baseCls:"x-plain",style:"padding: 5px",border:false,labelWidth:100,defaults:{width:230,msgTarget:"qtip"},items:[{xtype:"textfield",fieldLabel:"Name",allowBlank:false,maskRe:/[\w]/,validator:function(c){return/^[^\d]\w*$/im.test(c)?true:afStudio.models.TypeBuilder.invalidFieldName},name:"name"},{xtype:"afStudio.models.typeCombo",fieldLabel:"Type",allowBlank:false,name:"type"},{xtype:"numberfield",allowDecimals:false,allowNegative:false,fieldLabel:"Size",name:"size"},{xtype:"tabpanel",itemId:"fields-tab",width:336,height:100,style:"margin-top: 10px;",activeTab:0,defaults:{layout:"form",frame:true},items:[{title:"Attributes",defaults:{width:215},items:[{xtype:"checkbox",fieldLabel:"Required",name:"required"},{xtype:"textfield",fieldLabel:"Default value",name:"default"}]},{title:"Key",defaults:{width:215},items:[{xtype:"checkbox",fieldLabel:"Autoincrement",name:"autoIncrement"},{xtype:"combo",fieldLabel:"Key",typeAhead:true,triggerAction:"all",editable:false,mode:"local",valueField:"field",displayField:"field",store:[["","None"],["primary","Primary"],["index","Index"],["unique","Unique"]],hiddenName:"key",name:"key"}]},{title:"Relation",defaults:{width:215},items:[{xtype:"relationcombo",relationUrl:afStudioWSUrls.modelListUrl,listWidth:250,fieldLabel:"Relation",name:"relation"},{xtype:"combo",fieldLabel:"On Delete",typeAhead:true,triggerAction:"all",editable:false,mode:"local",valueField:"field",displayField:"field",store:[["cascade","cascade"],["setnull","setnull"],["restrict","restrict"],["none","none"]],hiddenName:"onDelete",name:"onDelete"}]}]},{xtype:"spacer",height:10}],buttons:[{text:"Save",iconCls:"icon-accept",scope:this,handler:this.saveUpdates},{text:"Cancel",iconCls:"afs-icon-cancel",scope:this,handler:this.cancelEditing}]});return{title:"Edit Field",modal:true,frame:true,width:360,autoHeight:true,resizable:false,closeAction:"hide",closable:false,items:[a]}},initComponent:function(){Ext.apply(this,Ext.applyIf(this.initialConfig,this._beforeInitComponent()));afStudio.models.EditFieldWindow.superclass.initComponent.apply(this,arguments);this._afterInitComponent()},_afterInitComponent:function(){var a=this;a.on({scope:this,show:this.onShowEvent})}});Ext.ns("afStudio.models");afStudio.models.CreateWidgetWindow=Ext.extend(Ext.Window,{_beforeInitComponent:function(){var b=this;var a=new Ext.FormPanel({ref:"fieldForm",monitorValid:true,labelWidth:120,border:false,baseCls:"x-plain",style:"padding: 5px",defaults:{anchor:"100%",msgTarget:"qtip"},items:[{xtype:"checkboxgroup",ref:"widgetTypes",fieldLabel:"Widget Types",allowBlank:false,blankText:"At least one widget type must be selected",style:"margin: 0 2px 4px;",columns:1,defaults:{checked:true},items:[{boxLabel:"List",name:"list"},{boxLabel:"Edit",name:"edit"},{boxLabel:"Show",name:"show"}]},{xtype:"common.widgetlocation",ref:"widgetLocation",autoLoad:false,allowBlank:true},{xtype:"common.mfieldsgrid",ref:"fieldsGrid",title:"Fields",multiSelect:true,height:200,border:true},{xtype:"checkbox",ref:"refresh",fieldLabel:"Overwrite Existing",name:"refresh"}],buttons:[{text:"Create",iconCls:"icon-accept",formBind:true,scope:b,handler:this.createWidgets},{text:"Cancel",iconCls:"afs-icon-cancel",scope:b,handler:this.cancelCreation}]});return{title:"Create Widgets",iconCls:"icon-widgets-add",closeAction:"hide",modal:true,frame:true,width:600,autoHeight:true,resizable:false,items:[a]}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.models.EditFieldWindow.superclass.initComponent.apply(this,arguments)},onShow:function(){var b=this,a=this.fieldForm.fieldsGrid,c=a.getSelectionModel();a.store.loadData(b.fields);c.selectAll.defer(10,c);this.fieldForm.widgetLocation.store.reload()},closeWindow:function(){(this.closeAction=="hide")?this.hide():this.close()},getGenerateData:function(){var g={model:this.model},e=this.fieldForm;var b=e.fieldsGrid.getSelectionModel().getSelections();if(Ext.isEmpty(b)){afStudio.Msg.warning("Create Widgets","Must be selected at least one field");return null}else{var a=[];Ext.each(b,function(j,f){a[f]=j.data.name});g.fields=a.join(",")}if(e.widgetTypes.getValue().length>0){var d=[];Ext.each(e.widgetTypes.getValue(),function(j,f){d[f]=j.getName()});g.type=d.join(",")}var c=e.widgetLocation.getValue();if(c!=null){g.module_name=c.module;g.place_type=c.placeType;g.place=c.place}g.refresh=e.refresh.getValue();return g},createWidgets:function(){var a=this.getGenerateData();if(a==null){return}afStudio.xhr.executeAction({url:afStudioWSUrls.widgetGenerateUrl,params:a,mask:"Processing creation...",scope:this,run:function(b,c){var d=afStudio.vp.viewRegions.west;if(c.params.place_type=="plugins"){d.get("plugins").onItemActivate()}else{d.get("widgets").onItemActivate()}}});this.closeWindow()},cancelCreation:function(){this.closeWindow()}});Ext.ns("afStudio.models");afStudio.models.DependencyCellEditorBuilder=Ext.extend(Ext.util.Observable,{grid:null,defaultEditor:null,mainDataIndex:"type",dependencyDataIndex:"default",sizeDataIndex:"size",onGridBeforeEdit:function(d){var c=this,f=d.column,a=d.grid.getStore().getAt(d.row),j=d.grid.getColumnModel(),k=j.getDataIndex(f),g=a.get(c.mainDataIndex),m=a.get(c.sizeDataIndex),b;if(k==c.dependencyDataIndex){if(this.defaultEditor){j.config[f].editor=this.defaultEditor}b=afStudio.models.TypeBuilder.createEditor(g,m);this.defaultEditor=j.config[f].editor;j.config[f].editor=b?b:this.defaultEditor}},init:function(a){this.grid=a;this.grid.on({beforeedit:Ext.util.Functions.createDelegate(this.onGridBeforeEdit,this)})}});Ext.preg("cellEditorBuilder",afStudio.models.DependencyCellEditorBuilder);Ext.ns("afStudio.models");afStudio.models.ModelTab=Ext.extend(Ext.TabPanel,{modelUrl:afStudioWSUrls.modelListUrl,alterModelAction:function(b){var a=this;afStudio.xhr.executeAction({url:a.modelUrl,params:{xaction:"read",model:a.modelName,schema:a.schemaName},mask:{region:"center",msg:"Updating "+a.modelName+" model..."},showNoteOnSuccess:false,run:function(c,d){b(c)}})},onAlterModel:function(){var b=this,a=b._modelData;b.alterModelAction(function(c){b.remove(a,true);b._modelData=b.createModelDataGrid(c);b.insert(0,b._modelData);b.doLayout()})},onAlterField:function(){var b=this._modelConfig,a=this._modelData;this.alterModelAction(function(c){b.loadModelData(c);a._data=c})},createModelConfigGrid:function(a){var b=this;return new afStudio.models.FieldsGrid({itemId:"model-fields",_data:a,model:b.modelName,schema:b.schemaName})},createModelDataGrid:function(a){var c=this,b=c.modelName;return new afStudio.models.ModelGrid({itemId:"model-data",title:b,_data:a,model:c.modelName,schema:c.schemaName,storeProxy:new Ext.data.HttpProxy({api:{read:afStudioWSUrls.getModelGridDataReadUrl(b),create:afStudioWSUrls.getModelGridDataCreateUrl(b),update:afStudioWSUrls.getModelGridDataUpdateUrl(b),destroy:afStudioWSUrls.getModelGridDataDeleteUrl(b)}})})},_beforeInitComponent:function(){var d=this,a=d.fieldsStructure,c=d.modelName,b=d.schemaName;this._modelConfig=d.createModelConfigGrid(a);this._modelData=d.createModelDataGrid(a);return{activeTab:0,items:[d._modelData,d._modelConfig]}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.models.ModelTab.superclass.initComponent.apply(this,arguments);this._afterInitComponent()},_afterInitComponent:function(){var c=this,b=c._modelConfig,a=c._modelData;this.relayEvents(b,["altermodel"]);this.relayEvents(a,["alterfield"]);c.on({scope:c,altermodel:c.onAlterModel,alterfield:c.onAlterField})}});Ext.reg("afStudio.models.modelTab",afStudio.models.ModelTab);Ext.ns("afStudio.dbQuery");afStudio.dbQuery.QueryResultsTab=Ext.extend(Ext.TabPanel,{createQueryResult:function(b,d){var a={closable:true};a.title=b.query;if(b.success===false){var c=Ext.isArray(b.message)?b.message.join(", "):b.message;a.html=String.format("<div>Query: <i><b>{0}</b></i><br /><br />Error: {1}</div>",b.query,c)}else{if(b.data.length&&b.meta.length){d.query=b.query;Ext.apply(a,{xtype:"afStudio.dbQuery.queryResultsGrid",queryParam:d,queryResult:b})}else{var c=Ext.isArray(b.message)?b.message.join(", "):b.message;a.html=String.format("<div>Query: <i><b>{0}</b></i><br /><br />{1}</div>",b.query,c)}}return a},_beforeInitComponent:function(){var b=this,a=[];Ext.iterate(this.metaData.dataset,function(e,d){var c=b.createQueryResult(e,Ext.apply({},b.metaData.queryParam));a.push(c)});return{activeTab:0,enableTabScroll:true,items:a}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.dbQuery.QueryResultsTab.superclass.initComponent.apply(this,arguments);this._afterInitComponent()},_afterInitComponent:function(){}});Ext.reg("afStudio.dbQuery.queryResultsTab",afStudio.dbQuery.QueryResultsTab);Ext.ns("afStudio.dbQuery");afStudio.dbQuery.QueryResultsGrid=Ext.extend(Ext.grid.GridPanel,{recordsPerPage:50,queryUrl:afStudioWSUrls.dbQueryQueryUrl,loadResultsData:function(a){this.getStore().loadData(a)},_beforeInitComponent:function(){var g=this,a=this.queryResult.meta||[],j=this.title||"Query Result",k,e=[],b=[],c;if(a.length>0){b=[new Ext.ux.grid.PagingRowNumberer({header:"Rec #",width:50})];for(var d=0,f=a.length;d<f;d++){b.push({header:a[d],dataIndex:a[d],width:80});e.push({name:a[d]})}}Ext.apply(g.queryParam,{query:g.queryResult.query});k=new Ext.data.JsonStore({url:g.queryUrl,root:"data",totalProperty:"total",baseParams:g.queryParam,fields:e});c=new Ext.PagingToolbar({store:k,displayInfo:true,displayMsg:"Displaying records {0} - {1} of {2}",pageSize:g.recordsPerPage});return{title:j,iconCls:"icon-database-table",loadMask:true,store:k,columns:b,columnLines:true,viewConfig:{forceFit:true,emptyText:"Empty data-set"},bbar:c}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.dbQuery.DataGrid.superclass.initComponent.apply(this,arguments);this._afterInitComponent()},_afterInitComponent:function(){var a=this;a.on({scope:a,afterrender:function(){a.loadResultsData(a.queryResult?a.queryResult:[])}})}});Ext.reg("afStudio.dbQuery.queryResultsGrid",afStudio.dbQuery.QueryResultsGrid);Ext.ns("afStudio.dbQuery");afStudio.dbQuery.TableModelTab=Ext.extend(Ext.TabPanel,{modelUrl:afStudioWSUrls.modelListUrl,createStructureGrid:function(a){return new afStudio.dbQuery.StructureGrid({itemId:"structure-grid",storeDataUrl:this.modelUrl,metaData:a,model:this.modelName,schema:this.schemaName})},createDataGrid:function(a){return new afStudio.dbQuery.DataGrid({itemId:"data-grid",storeDataUrl:afStudioWSUrls.getModelGridDataReadUrl(this.modelName),metaData:a,model:this.modelName,schema:this.schemaName})},_beforeInitComponent:function(){var a=this;this._structureGrid=a.createStructureGrid(a.metaData);this._dataGrid=a.createDataGrid(a.metaData);return{activeTab:0,items:[a._dataGrid,a._structureGrid]}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.dbQuery.TableModelTab.superclass.initComponent.apply(this,arguments);this._afterInitComponent()},_afterInitComponent:function(){var c=this,b=c._modelConfig,a=c._modelData}});Ext.reg("afStudio.dbQuery.tableModelTab",afStudio.dbQuery.TableModelTab);Ext.ns("afStudio.dbQuery");afStudio.dbQuery.DataGrid=Ext.extend(Ext.grid.GridPanel,{recordsPerPage:50,_beforeInitComponent:function(){var g=this,a=g.metaData,c=["id"],b,f,e=[];if(a.length>0){e=[new Ext.ux.grid.PagingRowNumberer({header:"Rec #",width:50})];for(var d=0;d<a.length;d++){e.push({header:a[d].name,dataIndex:"c"+d,width:80,renderer:afStudio.models.TypeBuilder.createRenderer(a[d].type)});c.push({name:"c"+d})}}b=new Ext.data.JsonStore({url:g.storeDataUrl,root:"data",idProperty:"id",fields:c});f=new Ext.PagingToolbar({store:b,displayInfo:true,displayMsg:"Displaying records {0} - {1} of {2}",pageSize:g.recordsPerPage});return{title:"Data",iconCls:"icon-database-table",loadMask:true,store:b,columns:e,columnLines:true,viewConfig:{forceFit:true},bbar:f}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.dbQuery.DataGrid.superclass.initComponent.apply(this,arguments);this._afterInitComponent()},_afterInitComponent:function(){var a=this;this.on("afterrender",function(b){b.getStore().load({params:{start:0,limit:a.recordsPerPage}})})}});Ext.ns("afStudio.dbQuery");afStudio.dbQuery.StructureGrid=Ext.extend(Ext.grid.GridPanel,{loadModelData:function(a){this.getStore().loadData(a)},booleanRenderer:function(b,c,a){c.css+=" x-grid3-check-col-td";return'<div class="x-grid3-check-col'+(b?"-on":"")+'"> </div>'},_beforeInitComponent:function(){var e=this,b,c;function a(f,g){return g.primaryKey?"primary":(g.index=="unique"?"unique":(g.index?"index":null))}function d(f,g){return(g.foreignModel&&g.foreignReference)?g.foreignModel+"."+g.foreignReference:null}b=new Ext.data.JsonStore({url:e.storeDataUrl,autoLoad:false,baseParams:{xaction:"read",model:e.model,schema:e.schema},idProperty:"id",fields:[{name:"id"},{name:"key",mapping:"id",convert:a},{name:"relation",mapping:"id",convert:d},{name:"autoIncrement"},{name:"primaryKey"},{name:"index"},{name:"name"},{name:"type"},{name:"size"},{name:"required"},{name:"default"},{name:"foreignTable"},{name:"foreignModel"},{name:"foreignReference"},{name:"onDelete"}]});c=new Ext.grid.ColumnModel({defaults:{sortable:true},columns:[{header:'<div class="model-pk-hd">&#160;</div>',width:25,dataIndex:"key",renderer:function(n,g,f,o,k,j){var m="";switch(n){case"primary":m='<div class="pk-cell">&#160;</div>';break;case"index":m='<div class="index-cell">&#160;</div>';break;case"unique":m='<div class="unique-cell">&#160;</div>';break}return m}},{header:"Name",width:100,dataIndex:"name"},{header:"Type",width:100,dataIndex:"type"},{header:"Size",width:50,dataIndex:"size"},{header:"Autoincrement",width:55,dataIndex:"autoIncrement",renderer:e.booleanRenderer},{header:"Default value",width:100,dataIndex:"default"},{header:"Relation",width:150,sortable:true,dataIndex:"relation"},{header:"Required",width:50,sortable:true,dataIndex:"required",align:"center",renderer:e.booleanRenderer},{header:"On Delete",width:50,sortable:true,dataIndex:"onDelete",align:"center"}]});return{title:"Structure",iconCls:"icon-table-gear",store:b,colModel:c,columnLines:true,loadMask:true,autoScroll:true,viewConfig:{forceFit:true}}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.dbQuery.StructureGrid.superclass.initComponent.apply(this,arguments);this._afterInitComponent()},_afterInitComponent:function(){var c=this,b=c.getStore(),a=c.getColumnModel();c.loadModelData(c.metaData)}});Ext.reg("afStudio.dbQuery.structureGrid",afStudio.dbQuery.StructureGrid);Ext.ns("afStudio.dbQuery");afStudio.dbQuery.QueryForm=Ext.extend(Ext.FormPanel,{queryUrl:afStudioWSUrls.dbQueryComplexQueryUrl,executeQuery:function(){var c=this,d=c.getForm(),e=c.queryTypeCmp.getValue(),a=this.dbQueryWindow.westPanel.getCurrentConnection(),b=Ext.apply(d.getFieldValues(),a);if(e=="sql"&&!a){afStudio.Msg.warning("Connection is not specified. <br /> Please select DataBase or DB's table.");return}c.dbQueryWindow.maskDbQuery();d.submit({clientValidation:true,url:c.queryUrl,params:{connection:a,start:0,limit:afStudio.dbQuery.QueryResultsGrid.prototype.recordsPerPage},success:function(f,g){c.dbQueryWindow.unmaskDbQuery();c.fireEvent("executequery",{result:g.result,queryParam:b})},failure:function(f,g){c.dbQueryWindow.unmaskDbQuery();switch(g.failureType){case Ext.form.Action.CLIENT_INVALID:afStudio.Msg.info("DBQuery","Query text is empty.");break;case Ext.form.Action.CONNECT_FAILURE:afStudio.Msg.error("DBQuery","Ajax communication failed");break;case Ext.form.Action.SERVER_INVALID:c.fireEvent("executequery",{result:g.result,queryParam:b});break}}})},_beforeInitComponent:function(){var a=this;return{region:"north",layout:"form",height:140,frame:true,iconCls:"icon-sql",margins:"0 5 5 5",title:"SQL",items:[{layout:"column",border:false,defaults:{border:false},items:[{layout:"form",columnWidth:1,style:"margin-right: 5px;",items:{xtype:"combo",ref:"../../queryTypeCmp",fieldLabel:"Query type",anchor:"100%",triggerAction:"all",value:"sql",hiddenName:"type",name:"type",store:[["sql","sql"],["propel","propel"]]}},{items:{xtype:"button",text:"Query",iconCls:"icon-accept",scope:a,handler:a.executeQuery}}]},{xtype:"textarea",ref:"queryText",enableKeyEvents:true,msgTarget:"qtip",allowBlank:false,blankText:"Query field is required",hideLabel:true,height:80,name:"query",anchor:"100% "}]}},initComponent:function(){Ext.apply(this,Ext.applyIf(this.initialConfig,this._beforeInitComponent()));afStudio.dbQuery.QueryForm.superclass.initComponent.apply(this,arguments);this._afterInitComponent()},_afterInitComponent:function(){var a=this;a.addEvents("executequery");this.queryText.on({scope:this,keydown:this.onQueryFieldKeyDown})},onQueryFieldKeyDown:function(a,b){if(b.ctrlKey&&b.getKey()==Ext.EventObject.ENTER){this.executeQuery()}}});Ext.reg("afStudio.dbQuery.queryForm",afStudio.dbQuery.QueryForm);Ext.ns("afStudio.dbQuery");afStudio.dbQuery.QueryWindow=Ext.extend(Ext.Window,{onExecuteQuery:function(a){this.centerPanel.showQueryResult(a)},onDBNodeClick:function(c,d,a){var b=this;switch(a){case"table":b.centerPanel.showTableData(c.attributes);break;case"database":b.centerPanel.showDatabaseTables(c.childNodes);break}},maskDbQuery:function(a){this.body.mask("Querying...","x-mask-loading")},unmaskDbQuery:function(){this.body.unmask()},cancelBtnPressed:function(){this.close()},_beforeInitComponent:function(){var a=this;a.westPanel=new afStudio.dbQuery.DBStructureTree({region:"west",split:true,width:250});a.northPanel=new afStudio.dbQuery.QueryForm({dbQueryWindow:a});a.centerPanel=new afStudio.dbQuery.ContentPanel();return{title:"Database Query",width:1007,height:600,closable:true,draggable:true,plain:true,modal:true,maximizable:true,bodyBorder:false,border:false,items:[a.northPanel,a.westPanel,a.centerPanel],layout:"border"}},initComponent:function(){Ext.apply(this,Ext.applyIf(this.initialConfig,this._beforeInitComponent()));afStudio.dbQuery.QueryWindow.superclass.initComponent.apply(this,arguments);this._afterInitComponent()},_afterInitComponent:function(){var a=this;a.relayEvents(a.westPanel,["dbnodeclick"]);a.relayEvents(a.northPanel,["executequery"]);a.on({scope:a,dbnodeclick:a.onDBNodeClick,executequery:a.onExecuteQuery})}});Ext.ns("afStudio.dbQuery");afStudio.dbQuery.DBStructureTree=Ext.extend(Ext.tree.TreePanel,{structureUrl:afStudioWSUrls.dbQueryDatabaseListUrl,getCurrentConnection:function(){var a=this.getSelectionModel().getSelectedNode();return a?(a.hasChildNodes()?a.attributes.connection:a.parentNode.attributes.connection):null},maskTree:function(a){this.body.mask(a?a:"loading...")},unmaskTree:function(){this.body.unmask()},onBeforeLoad:function(a,b,c){this.maskTree.defer(10,this,["loading..."])},onLoad:function(a,b,c){this.unmaskTree()},onNodeClick:function(a,b){this.fireEvent("dbnodeclick",a,b,a.isLeaf()?"table":"database")},_beforeInitComponent:function(){var b=this;var a=new Ext.tree.AsyncTreeNode({id:"database",text:"Databases",expanded:true});return{layout:"fit",margins:"0 0 0 5",boxMinWidth:150,animate:true,autoScroll:true,containerScroll:true,rootVisible:false,root:a,dataUrl:b.structureUrl}},initComponent:function(){Ext.apply(this,Ext.applyIf(this.initialConfig,this._beforeInitComponent()));afStudio.dbQuery.DBStructureTree.superclass.initComponent.apply(this,arguments);this._afterInitComponent()},_afterInitComponent:function(){var c=this,a=c.getLoader();c.addEvents("dbnodeclick");var b=new Ext.tree.TreeSorter(c,{folderSort:true});c.on({click:c.onNodeClick,buffer:500,scope:c});a.on({beforeload:c.onBeforeLoad,load:c.onLoad,scope:c})}});Ext.reg("afStudio.dbQuery.dbStructureTree",afStudio.dbQuery.DBStructureTree);Ext.ns("afStudio.dbQuery");afStudio.dbQuery.ContentPanel=Ext.extend(Ext.Panel,{maskContent:function(a){this.body.mask(a?a:"loading","x-mask-loading");return this},unmaskContent:function(){this.body.unmask();return this},clearPanel:function(){this.removeAll(true);return this},createTableListGrid:function(a){return new Ext.grid.GridPanel({title:"Tables",autoScroll:true,columns:[{header:"Name"}],store:new Ext.data.JsonStore({fields:[{name:"text"}],data:a}),viewConfig:{forceFit:true}})},showQueryResult:function(c){var b=c.result.dataset,e=c.result.success,a={};this.maskContent();if(e){if(Ext.isArray(b)&&b.length>1){a=new afStudio.dbQuery.QueryResultsTab({metaData:{dataset:b,queryParam:c.queryParam}})}else{if(b[0].data.length&&b[0].meta.length){a=new afStudio.dbQuery.QueryResultsGrid({queryResult:b[0],queryParam:c.queryParam})}else{var d=Ext.isArray(b[0].message)?b[0].message.join(", "):b[0].message;a.html=String.format("<div>Query: <i><b>{0}</b></i><br /><br />{1}</div>",b[0].query,d)}}}else{var d="";Ext.iterate(b,function(f){d+=String.format("<div>Query: <i>{0}</i><br />Error: {1}</div> <hr />",f.query,f.message)});Ext.apply(a,{html:c.result.message+"<br /><br />"+d})}this.unmaskContent().clearPanel().add(a);this.doLayout()},showTableData:function(c){var d=this,a=c.model,b=c.schema;d.maskContent("loading metadata...");Ext.Ajax.request({url:afStudioWSUrls.modelListUrl,params:{xaction:"read",model:a,schema:b},success:function(e,j){d.unmaskContent();var f=Ext.decode(e.responseText),g={};if(f.success){g=new afStudio.dbQuery.TableModelTab({metaData:f.data,modelName:a,schemaName:b})}else{g.html=String.format("<div>Error: {0}</div>",f.message)}d.clearPanel().add(g);d.doLayout()}})},showDatabaseTables:function(b){this.maskContent();var a=this.createTableListGrid(b);this.unmaskContent().clearPanel().add(a);this.doLayout()},_beforeInitComponent:function(){return{region:"center",margins:"0 5 0 0",layout:"fit",border:true,bodyBorder:true,hideBorders:true}},initComponent:function(){Ext.apply(this,Ext.applyIf(this.initialConfig,this._beforeInitComponent()));afStudio.dbQuery.ContentPanel.superclass.initComponent.apply(this,arguments);this._afterInitComponent()},_afterInitComponent:function(){var a=this;a.on({render:function(b){(function(){a.maskContent("Please select table...")}).defer(100)}})}});Ext.reg("afStudio.dbQuery.contentPanel",afStudio.dbQuery.ContentPanel);Ext.namespace("afStudio.layoutDesigner.view");afStudio.layoutDesigner.view.TabViewPanel=Ext.extend(Ext.TabPanel,{constructor:function(a){Ext.apply(a,{enableTabScroll:true,plugins:new afStudio.layoutDesigner.view.TabbedViewCloseMenuPlugin()});afStudio.layoutDesigner.view.TabViewPanel.superclass.constructor.call(this,a)},allTabsAreClosed:function(){if(this.items.getCount()==0){this.fireEvent("alltabswereclosed")}},onRender:function(b,a){afStudio.layoutDesigner.view.TabViewPanel.superclass.onRender.call(this,b,a);this.addEvents("alltabswereclosed")},initEvents:function(){afStudio.layoutDesigner.view.TabViewPanel.superclass.initEvents.call(this);this.strip.on("dblclick",this.onStripDblClick,this)},onStripMouseDown:function(b){if(b.button!==0){return}b.preventDefault();var a=this.findTargets(b);if(a.close){if(a.item.fireEvent("beforeclose",a.item)!==false){a.item.fireEvent("close",a.item);this.remove(a.item)}this.allTabsAreClosed();return}if(a.item&&a.item!=this.activeTab){this.setActiveTab(a.item)}},onStripDblClick:function(c){var b=this.plugins,a=this.findTargets(c);if(!Ext.isEmpty(a.item)){b.setActiveTabProperty(a.item);b.onRename()}}});Ext.namespace("afStudio.layoutDesigner.view");afStudio.layoutDesigner.view.TabbedViewCloseMenuPlugin=Ext.extend(Ext.ux.TabCloseMenu,{renameTabText:"Rename Tab",createMenu:function(){if(!this.menu){var a=[{itemId:"close",text:this.closeTabText,scope:this,handler:this.onClose},{itemId:"rename",text:this.renameTabText,scope:this,handler:this.onRename}];if(this.showCloseAll){a.push("-")}a.push({itemId:"closeothers",text:this.closeOtherTabsText,scope:this,handler:this.onCloseOthers});if(this.showCloseAll){a.push({itemId:"closeall",text:this.closeAllTabsText,scope:this,handler:this.onCloseAll})}this.menu=new Ext.menu.Menu({items:a})}return this.menu},setActiveTabProperty:function(a){this.active=a},allTabsAreClosed:function(){if(this.tabs.items.getCount()==0){this.tabs.fireEvent("alltabswereclosed")}},confirmTabClosingDialog:function(a,c){var b=this;Ext.Msg.confirm("Layout Designer",a,function(d){if(d=="yes"){c()}})},pickTabsToClose:function(b){var d=this;var a=[];var c=[];this.tabs.items.each(function(e){if(e.closable){if(!b||e!=this.active){a.push(e);c.push(e.viewMeta.attributes.title)}}},this);return{tabs:a,meta:c}},onRename:function(){var a=this.active;if(!this.pickerWin){this.pickerWin=new afStudio.layoutDesigner.TabNamePickerWindow();this.pickerWin.on("tabnamepicked",this.renameTab,this)}this.pickerWin.show(a,function(){var b=this.pickerForm.tabNameField;b.setValue(a.title);b.focus(true,200)})},renameTab:function(b){var a=this.active;a.setTitle(b);a.fireEvent("viewtitlechange",a,b)},onClose:function(){var d=this,c=this.active,b;b='Are you sure you want to delete tab view "'+c.viewMeta.attributes.title+'"';function a(){var e=this.active;if(e.fireEvent("beforeclose",e)!==false){e.fireEvent("close",e);this.tabs.remove(e);this.allTabsAreClosed()}}this.confirmTabClosingDialog(b,Ext.util.Functions.createDelegate(a,d))},onCloseOthers:function(){var d=this,c;var b=this.pickTabsToClose(true);c="Are you sure you want to delete tab views? <br />"+b.meta.join(", ");function a(e){this.doClose(e)}this.confirmTabClosingDialog(c,Ext.util.Functions.createDelegate(a,d,[b.tabs]))},onCloseAll:function(){var d=this,c;var b=this.pickTabsToClose(false);c="Are you sure you want to delete all tab views and their components?";function a(e){this.doClose(e)}this.confirmTabClosingDialog(c,Ext.util.Functions.createDelegate(a,d,[b.tabs]))},doClose:function(b){var a=this.active;if(a.fireEvent("beforeclose",a,true,b)!==false){Ext.each(b,function(c){c.fireEvent("close",c);this.tabs.remove(c)},this)}this.allTabsAreClosed()}});Ext.preg("afStudio.layoutDesigner.view.tabbedViewCloseMenuPlugin",afStudio.layoutDesigner.view.TabbedViewCloseMenuPlugin);Ext.namespace("afStudio.layoutDesigner.view");afStudio.layoutDesigner.view.Page=Ext.extend(Ext.Container,{layout:"border",_beforeInitComponent:function(){afStudio.vp.mask({msg:String.format('"{0}" view building...',this.pageMeta["i:title"]),region:"center"});var a=afStudio.layoutDesigner.view.ViewFactory.buildLayout(this.pageMeta);return{items:a}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.layoutDesigner.view.Page.superclass.initComponent.apply(this,arguments);this._afterInitComponent()},_afterInitComponent:function(){var a=this;afStudio.vp.unmask("center");a.on("afterrender",a.initPageView,a)},initPageView:function(){this.designPanel=this.ownerCt},refreshPageLayout:function(){var a=this.designPanel;a.updateLayoutView(new afStudio.layoutDesigner.view.Page({pageMeta:this.pageMeta}))},getPageMetaData:function(){return this.pageMeta},getContentView:function(){var a=this.find("region","center")[0];return Ext.isDefined(a)?a:null},getActiveContentView:function(){var c=this,a=c.getContentView(),b=afStudio.layoutDesigner.view.MetaDataProcessor;if(Ext.isEmpty(a)){throw new afStudio.error.ApsError("Content view is not defined! <br />[Class: afStudio.layoutDesigner.view.Page, method: getActiveContentView]")}if(b.isViewTabbed(a.viewMeta)){a=a.getActiveTab()}return a},addWidgetComponentToContentView:function(a){var b=this.getActiveContentView();b.addViewComponent({attributes:{name:a.widget,module:a.module}},a.widgetUri);this.doLayout()},setActiveContentViewLayout:function(b){var c=this,a=this.getActiveContentView();a.setLayoutMeta(b)},updateMetaData:function(b){var a=afStudio.layoutDesigner.view.MetaDataProcessor;if(Ext.isArray(this.pageMeta["i:area"])){this.pageMeta["i:area"][b.position]=b.meta}else{this.pageMeta["i:area"]=b.meta}if(Ext.isFunction(b.callback)){Ext.util.Functions.createDelegate(b.callback,this,[this.designPanel])()}}});Ext.reg("afStudio.layoutDesigner.view.page",afStudio.layoutDesigner.view.Page);Ext.namespace("afStudio.layoutDesigner.view");afStudio.layoutDesigner.view.NormalView=Ext.extend(Ext.ux.Portal,{widgetMetaUrl:afStudioWSUrls.widgetUrl,viewMetaPosition:0,emptyViewMessage:"View has no widgets added yet, add you first widget to get started.",viewLayout:1,emptyView:true,setViewMessageBox:function(a){if(!Ext.isDefined(this.viewMessageBox)){this.viewMessageBox=new afStudio.layoutDesigner.view.ViewMessageBox({viewContainer:this.ownerCt,viewMessage:a})}return this.viewMessageBox},showEmptyViewMessage:function(){this.setViewMessageBox(this.emptyViewMessage);this.add(this.viewMessageBox)},getViewLayout:function(){return this.viewMeta.attributes.layout},getViewComponentsMetaData:function(){return this.viewMeta["i:component"]},getPage:function(){return this.findParentByType("afStudio.layoutDesigner.view.page",true)},constructor:function(a){if(!Ext.isDefined(a.viewMeta.attributes.layout)){a.viewMeta.attributes.layout=this.viewLayout}afStudio.layoutDesigner.view.NormalView.superclass.constructor.call(this,a)},_beforeInitComponent:function(){var b=this;var a=this.initView();return{items:a}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.layoutDesigner.view.NormalView.superclass.initComponent.apply(this,arguments);this._afterInitComponent()},_afterInitComponent:function(){var a=this;a.addEvents("viewtitlechange");a.on({afterrender:a.initViewComponents,beforeclose:a.onBeforeCloseView,close:a.onCloseView,viewtitlechange:a.onViewTitleChange,beforedrop:a.beforeComponentDrop,drop:a.dropComponent,scope:a})},initView:function(){var e=this,b=afStudio.layoutDesigner.view.ViewFactory,d=this.getViewLayout(),a=b.getLayoutCfg(d),c=[];Ext.each(a,function(f,g,j){c.push(e.createViewColumn(g,f))});return c},initViewComponents:function(){var d=this,c=this.getViewComponentsMetaData();if(!Ext.isEmpty(c)){this.emptyView=false;if(Ext.isArray(c)){Ext.each(c,function(e,k,j){var g=e.attributes.column||0,f=d.createViewComponent(e,null);d.items.itemAt(g).add(f)})}else{var b=c.attributes.column||0,a=d.createViewComponent(c,null);d.items.itemAt(b).add(a)}d.doLayout()}else{this.emptyView=true;this.showEmptyViewMessage()}},getComponentMetaIndex:function(d,g){var b=g?g:this.getViewComponentsMetaData();var c;for(var e=0,a=b.length;e<a;e++){var f=true;Ext.iterate(d.attributes,function(j,k){if(b[e]["attributes"][j]!=k){return(f=false)}});if(f){c=e;break}}return c},updateViewMetaData:function(b){var a=this.ownerCt;a.updateMetaData({meta:this.viewMeta,position:this.viewMetaPosition,callback:b})},deleteViewMetaData:function(){var a=this.ownerCt;var b=Ext.apply({},this.viewMeta);delete this.viewMeta;a.deleteViewMetaData({meta:b,position:this.viewMetaPosition})},addViewComponentMetaData:function(a){var b=this.viewMeta["i:component"];if(Ext.isArray(b)){b.push(a)}else{if(Ext.isDefined(b)){this.viewMeta["i:component"]=[b,a]}else{this.viewMeta["i:component"]=a}}this.updateViewMetaData()},deleteViewComponentMetaData:function(a){var c=this.viewMeta["i:component"];if(Ext.isArray(c)){var b=this.getComponentMetaIndex(a);if(Ext.isDefined(b)){c.splice(b,1)}if(c.length==0){delete this.viewMeta["i:component"]}}else{delete this.viewMeta["i:component"]}this.updateViewMetaData()},setLayoutMeta:function(g){var j=this.viewMeta["i:component"],c=afStudio.layoutDesigner.view.MetaDataProcessor,e=afStudio.layoutDesigner.view.ViewFactory,b=this.ownerCt,a=e.getLayoutColumnMaxValue(g);this.viewMeta.attributes.layout=g;if(Ext.isDefined(j)){if(Ext.isArray(j)){for(var d=0,f=j.length;d<f;d++){if(j[d]["attributes"]["column"]>=a){j[d]["attributes"]["column"]=a}}}else{if(j["attributes"]["column"]>=a){j["attributes"]["column"]=a}}}var m;if(b.viewMeta&&c.isViewTabbed(b.viewMeta)){var k=b.getActiveTab();m=b.items.indexOf(k)}this.updateViewMetaData(function(n){this.refreshPageLayout();if(m){n.layoutView.getContentView().setActiveTab(m)}})},addViewComponent:function(b,d){var a=this.createViewComponent(b,d);var c=0;b.attributes.column=c;this.addViewComponentMetaData(b);if(this.emptyView){this.remove(this.viewMessageBox,true);this.emptyView=false}this.items.itemAt(c).add(a);this.doLayout()},createViewColumn:function(b,a){return{itemId:"portal-column-"+b,columnWidth:a,style:"padding: 5px",defaults:{bodyCssClass:"layout-designer-widget"}}},createViewComponent:function(e,f,c){var d=this,j=e.attributes.name,b=e.attributes.module,a=d.getPage(),k=a.pageMeta["i:title"];var g=new Ext.ux.Portlet({componentMeta:e,frame:true,title:String.format("{0} / {1}",b,j),html:String.format("<br /><center>Widget {0} </center><br />",f||k),tools:[{id:"close",handler:Ext.util.Functions.createDelegate(d.removeWidget,d)}],buttons:[{text:"Preview",handler:Ext.util.Functions.createDelegate(d.previewWidget,d,[j,b,e])},{text:"Edit",handler:Ext.util.Functions.createDelegate(d.editWidget,d,[j,b,e])}],buttonAlign:"center"});return g},previewWidget:function(c,d,b){var a=b.attributes.module+"/"+b.attributes.name;afStudio.WD.previewWidget(a)},editWidget:function(b,c,a){afStudio.xhr.executeAction({url:this.widgetMetaUrl,params:{module_name:c,action_name:b},mask:{region:"center"},showNoteOnSuccess:false,run:function(e,f){var d=e.data;afStudio.WD.showWidgetDesigner({uri:d.widgetUri,actionPath:d.actionPath,actionName:d.actionName,securityPath:d.securityPath,placeType:d.placeType,place:d.place})}})},removeWidget:function(d,c,a){var b=a.componentMeta;this.deleteViewComponentMetaData(b);a.destroy()},onBeforeCloseView:Ext.emptyFn,onCloseView:function(a){this.deleteViewMetaData()},onViewTitleChange:function(a,b){this.viewMeta.attributes.title=b;this.updateViewMetaData()},beforeComponentDrop:Ext.emptyFn,getColumnMetaData:function(b){var c={component:[],index:[]},a=this.getViewComponentsMetaData();if(Ext.isArray(a)){Ext.iterate(a,function(f,d,e){if((f.attributes.column||0)==b){c.component.push(f);c.index.push(d)}})}else{if((a.attributes.column||0)==b){c.component.push(a);c.index.push(0)}}return c},dropComponent:function(d){var b=d.panel,j=b.componentMeta,g=d.position,c=d.columnIndex;var a=Ext.util.Functions.createDelegate(function(n){for(var m=0,k=n.index.length;m<k;m++){this.viewMeta["i:component"][n.index[m]]=n.component[m]}},this);j.attributes.column=d.columnIndex;var e=this.getColumnMetaData(c),f=this.getComponentMetaIndex(j,e.component);if(!Ext.isEmpty(e.component)){if(f>g){e.component.dragUp(f,g);a(e)}else{if(f<g){e.component.dragDown(f,g);a(e)}}}this.updateViewMetaData()}});Ext.reg("afStudio.layoutDesigner.view.normalView",afStudio.layoutDesigner.view.NormalView);Ext.namespace("afStudio.layoutDesigner.view");afStudio.layoutDesigner.view.MetaDataProcessor=function(){return{isViewTabbed:function(a){return Ext.isDefined(a["i:tab"])?true:false},getContentViewMeta:function(b){var a,c;if(Ext.isArray(b["i:area"])){Ext.each(b["i:area"],function(d,e){if(d.attributes.type=="content"){a=d;c=e;return false}})}else{a=b["i:area"]}return{contentView:a,contentIdx:c}},changeContentViewMetaData:function(e,d){var b=this.getContentViewMeta(d),g=this.isViewTabbed(b.contentView),a=g?this.getTabbedViewComponents(b.contentView["i:tab"]):this.getNormalViewComponents(b.contentView["i:component"]);var j={};if(e=="tabbed"){var c=Ext.apply({title:d["i:title"]},b.contentView.attributes);delete c.type;j={"attributes":b.contentView.attributes,"i:tab":{"attributes":c}};if(!Ext.isEmpty(Ext.flatten(a))){j["i:tab"]["i:component"]=Ext.flatten(a)}}else{var f=Ext.apply({},b.contentView.attributes);f.layout=(f.layout>a.maxLayout)?f.layout:a.maxLayout;j={"attributes":f,"i:component":Ext.flatten(a.components)}}if(!Ext.isEmpty(b.contentIdx)){d["i:area"][b.contentIdx]=j}else{d["i:area"]=j}return d},getTabbedViewComponents:function(b){var c,a;if(Ext.isDefined(b)){c=[];if(Ext.isArray(b)){a=1;Ext.each(b,function(e,d){if(e["i:component"]){if(e.attributes.layout>a){a=e.attributes.layout}c.push(this.getNormalViewComponents(e["i:component"]))}},this)}else{if(b["i:component"]){a=b.attributes.layout;c.push(this.getNormalViewComponents(b["i:component"]))}}}return{components:c,maxLayout:a}},getNormalViewComponents:function(a){var b;if(Ext.isDefined(a)){b=[];if(Ext.isArray(a)){Ext.each(a,function(e,d){b.push(e)})}else{b.push(a)}}return b}}}();Ext.namespace("afStudio.layoutDesigner.view");afStudio.layoutDesigner.view.ViewMessageBox=Ext.extend(Ext.Panel,{floating:true,style:"z-index: 10; text-align: center; font-size: 20px;",width:600,_beforeInitComponent:function(){var a=this;return{items:{ref:"messageHolder",xtype:"container",style:"padding: 20px",html:this.viewMessage}}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.layoutDesigner.view.ViewMessageBox.superclass.initComponent.apply(this,arguments);this._afterInitComponent()},_afterInitComponent:function(){var a=this;a.on({afterrender:a.onAfterRender,scope:a})},onAfterRender:function(){var b=this.viewContainer.getBox(),a=Ext.util.Format.round(b.width/2,0)-this.getWidth()/2,c=Ext.util.Format.round(b.height/2,0)-this.getHeight();this.setPosition(a,c)}});Ext.namespace("afStudio.layoutDesigner.view");afStudio.layoutDesigner.view.TabbedView=Ext.extend(afStudio.layoutDesigner.view.TabViewPanel,{viewLayout:1,viewMetaPosition:0,getViewLayout:function(){return this.viewMeta.attributes.layout},getViewTabsMetaData:function(){return this.viewMeta["i:tab"]},addEmptyTabMetaData:function(){var a=this.getViewTabsMetaData();var b;if(Ext.isArray(a)){b=this.viewMeta["i:tab"].push({});b--}else{if(Ext.isDefined(a)){this.viewMeta["i:tab"]=[a,{}];b=1}else{this.viewMeta["i:tab"]=[{}];b=0}}return b},getViewTabMetaData:function(a){return this.getViewTabsMetaData()[a]},getViewTabComponentsMetaData:function(a){return this.getViewTabMetaData(a)["i:component"]},getViewTabLayout:function(b){var a=b.attributes.layout;return !Ext.isDefined(a)?this.getViewLayout():a},constructor:function(a){if(!Ext.isDefined(a.viewMeta.attributes.layout)){a.viewMeta.attributes.layout=this.viewLayout}afStudio.layoutDesigner.view.TabbedView.superclass.constructor.call(this,a)},_beforeInitComponent:function(){var b=this;var a=this.initView();return{activeTab:0,anchor:"100%",items:a}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.layoutDesigner.view.TabbedView.superclass.initComponent.apply(this,arguments);this._afterInitComponent()},_afterInitComponent:function(){var a=this;a.on({alltabswereclosed:a.onAllTabsWereClosed,scope:a})},initView:function(){var c=this,a=this.getViewTabsMetaData(),b=[];Ext.each(a,function(d,f,e){b.push(c.createTabView(d,f))});return b},createTabView:function(c,b){var e=this,d=c.attributes.title;c.attributes.layout=this.getViewTabLayout(c);var a=new afStudio.layoutDesigner.view.NormalView({title:d,viewMeta:c,viewMetaPosition:b,closable:true});return a},updateMetaData:function(b){var a=this.ownerCt;Ext.apply(this.getViewTabMetaData(b.position),b.meta);a.updateMetaData({meta:this.viewMeta,position:this.viewMetaPosition,callback:b.callback})},deleteViewMetaData:function(g){var c=this.ownerCt;if(Ext.isArray(this.viewMeta["i:tab"])){var d=this.viewMeta["i:tab"];for(var e=0,a=d.length;e<a;e++){var f=true;Ext.iterate(g.meta.attributes,function(j,k){if(d[e]["attributes"][j]!=k){f=false}});if(f){delete d[e];break}}var b=[];for(var e=0,a=d.length;e<a;e++){if(Ext.isDefined(d[e])){b.push(d[e])}}if(b.length>0){this.viewMeta["i:tab"]=b}else{delete this.viewMeta["i:tab"]}}else{delete this.viewMeta["i:tab"]}c.updateMetaData(Ext.apply(g,{meta:this.viewMeta}))},addTabViewComponent:function(c){var e=this;var d={"attributes":{layout:1,title:c}};var a=e.addEmptyTabMetaData();function b(f){this.refreshPageLayout();f.layoutView.getContentView().setActiveTab(a)}e.updateMetaData({position:a,meta:d,callback:b})},onAllTabsWereClosed:function(){var b=this.ownerCt;function a(c){this.refreshPageLayout()}Ext.util.Functions.createDelegate(a,b,[b.designPanel])()}});Ext.reg("afStudio.layoutDesigner.view.tabbedView",afStudio.layoutDesigner.view.TabbedView);Ext.namespace("afStudio.layoutDesigner.view");afStudio.layoutDesigner.view.ViewFactory=function(){return{viewLayoutConfig:{1:[1],2:[0.5,0.5],3:[0.25,0.75],4:[0.75,0.25],5:[0.33,0.33,0.33],6:[0.5,0.25,0.25],7:[0.25,0.5,0.25],8:[0.25,0.25,0.25,0.25],9:[0.4,0.2,0.2,0.2]},getLayoutCfg:function(a){return this.viewLayoutConfig[a]},getLayoutColumnsNumber:function(a){return this.getLayoutCfg(a).length},getLayoutColumnMaxValue:function(a){return this.getLayoutColumnsNumber(a)-1},buildLayout:function(b){var a=[];if(Ext.isArray(b["i:area"])){Ext.each(b["i:area"],function(e,c,d){a.push(this.createView(e,c))},this)}else{a.push(this.createView(b["i:area"],0))}return a},createView:function(b,e){var d,c,a;switch(b.attributes.type){case"content":c={viewMetaPosition:e,region:"center"};break;case"sidebar":c={viewMetaPosition:e,region:"west",split:true,collapseMode:"mini",width:b.attributes.width?b.attributes.width:200};break;case"footer":c={viewMetaPosition:e,region:"south",split:true,collapseMode:"mini",height:130};break}c.viewMeta=b;a=afStudio.layoutDesigner.view.MetaDataProcessor.isViewTabbed(b)?new afStudio.layoutDesigner.view.TabbedView(c):new afStudio.layoutDesigner.view.NormalView(c);return a}}}();Ext.namespace("afStudio.layoutDesigner");afStudio.layoutDesigner.WidgetSelectorTreeWindow=Ext.extend(Ext.Window,{widgetListUrl:"/afsLayoutBuilder/getWidgetList",closeWidgetSelectorTreeWindow:function(){if(this.closeAction=="hide"){this.hide()}else{this.close()}},selectWidget:function(){var a=this.selectorTree,d=a.getSelectionModel(),c=d.getSelectedNode();if(this.isNodeWidget(c)){var b={module:this.getNodeAttribute(c,"module"),widget:this.getNodeAttribute(c,"widget"),widgetUri:this.getNodeAttribute(c,"widgetUri")};this.closeWidgetSelectorTreeWindow();this.fireEvent("widgetselect",b)}},loadWidgetList:function(){var b=this.selectorTree.getLoader(),a=this.selectorTree.root;b.load(a,function(){this.expandChildNodes()})},onWidgetSelectorShow:function(){this.addWidgetBtn.disable();this.loadWidgetList()},_beforeInitComponent:function(){var b=this;var a=new Ext.tree.TreePanel({ref:"selectorTree",autoScroll:true,animate:true,containerScroll:true,anchor:"100%",border:false,dataUrl:b.widgetListUrl,root:{nodeType:"node",text:"WidgetList",draggable:false,id:"widget-list-root"},rootVisible:false});return{title:"Add Widget",closeAction:"hide",modal:true,frame:true,width:348,height:400,closable:true,resizable:false,layout:"fit",items:a,buttonAlign:"center",buttons:[{text:"Add Widget",ref:"../addWidgetBtn",disabled:true,handler:b.selectWidget,scope:b},{text:"Cancel",handler:b.closeWidgetSelectorTreeWindow,scope:b}]}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.layoutDesigner.WidgetSelectorTreeWindow.superclass.initComponent.apply(this,arguments);this._afterInitComponent()},_afterInitComponent:function(){var c=this,a=this.selectorTree,b=a.getLoader();c.addEvents("widgetselect");b.on({beforeload:function(d,e,f){e.getOwnerTree().body.mask("loading, please wait...","x-mask-loading")},load:function(d,e,f){e.getOwnerTree().body.unmask()},loadexception:function(d,e,f){e.getOwnerTree().body.unmask()}});a.on({click:c.onNodeClick,dblclick:c.onNodeDblClick,scope:c});c.on({"show":Ext.util.Functions.createDelegate(c.onWidgetSelectorShow,c)})},getNodeAttribute:function(c,b,a){return c.attributes[b]?c.attributes[b]:(a?a:null)},isNodeWidget:function(c){var b=this.getNodeAttribute(c,"type"),a=false;if(b=="xml"){a=true}return a},onNodeClick:function(a,b){if(this.isNodeWidget(a)){this.addWidgetBtn.enable()}else{this.addWidgetBtn.disable()}},onNodeDblClick:function(a,b){if(this.isNodeWidget(a)){this.selectWidget()}}});Ext.namespace("afStudio.layoutDesigner");afStudio.layoutDesigner.TabNamePickerWindow=Ext.extend(Ext.Window,{closePickerWindow:function(){if(this.closeAction=="hide"){this.hide()}else{this.close()}},pickTabName:function(){var b=this.pickerForm.getForm();if(b.isValid()){var a=this.pickerForm.tabNameField.getValue();this.closePickerWindow();this.fireEvent("tabnamepicked",a)}},onTabNamePickerShow:function(){var b=this,a=this.pickerForm;a.getForm().reset();a.tabNameField.focus(true,200)},onTabPickerFieldKeyPress:function(b,a){if(a.getKey()==a.ENTER){this.pickTabName()}},_beforeInitComponent:function(){var b=this;var a=new Ext.FormPanel({ref:"pickerForm",baseCls:"x-plain",anchor:"100%",border:false,defaults:{anchor:"100%",msgTarget:"qtip"},items:[{xtype:"textfield",ref:"tabNameField",allowBlank:false,blankText:"Tab title is required!",vtype:"alphanum",hideLabel:true,height:35,style:"font-size: 20px",enableKeyEvents:true,name:"tabNameField"}]});return{title:"Choose tab title",closeAction:"hide",modal:true,frame:true,width:200,height:100,closable:true,resizable:false,items:a,buttonAlign:"center",buttons:[{text:"Save",handler:b.pickTabName,scope:b},{text:"Cancel",handler:b.closePickerWindow,scope:b}]}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.layoutDesigner.TabNamePickerWindow.superclass.initComponent.apply(this,arguments);this._afterInitComponent()},_afterInitComponent:function(){var b=this,a=this.pickerForm.tabNameField;b.addEvents("tabnamepicked");a.on("keypress",b.onTabPickerFieldKeyPress,b);b.on({show:b.onTabNamePickerShow,scope:b})}});Ext.namespace("afStudio.layoutDesigner");afStudio.layoutDesigner.DesignerPanel=Ext.extend(Ext.Panel,{widgetMetaUrl:afStudioWSUrls.widgetUrl,saveLayoutUrl:afStudioWSUrls.layoutSaveUrl,pagePreviewWindow:null,executeAction:function(a){afStudio.vp.mask({msg:a.loadingMessage?a.loadingMessage:"Loading...",region:"center"});Ext.Ajax.request({url:a.url,params:a.params,success:function(d,c){afStudio.vp.unmask("center");var b=Ext.decode(d.responseText);if(b.success){Ext.util.Functions.createDelegate(a.run,a.scope?a.scope:this,[b],false)()}else{Ext.Msg.alert("Error",b.content)}},failure:function(c,b){afStudio.vp.unmask("center");Ext.Msg.alert("Error",String.format("Status code: {0}, message: {1}",c.status,c.statusText))}})},isLayoutTabbed:function(){var a=this.layoutView.getContentView(),b=a.viewMeta;return this.isViewTabbed(b)},getFormatMenuItem:function(b){var a=this.getTopToolbar().getComponent("formatMenu").menu;return a.getComponent(b)},getFormatTypeMenuItem:function(a){var b=this.getFormatMenuItem("typeItem").menu;return b.getComponent(a)},getFormatLayoutMenuItem:function(a){var b=this.getFormatMenuItem("layoutItem").menu;return b.getComponent(a)},updateDesignerPanelControls:function(){var a=this.getFormatMenuItem("addNewTab");if(this.isLayoutTabbed()){this.getFormatTypeMenuItem("tabbedView").setChecked(true,true);a.enable()}else{this.getFormatTypeMenuItem("normalView").setChecked(true,true);a.disable()}},updateLayoutView:function(a){this.removeAll(true);this.layoutView=this.add(a);this.doLayout();this.updateDesignerPanelControls()},_beforeInitComponent:function(){var b=this;var a=new Ext.Toolbar({items:[{text:"Save",itemId:"saveLayoutBtn",iconCls:"icon-save"},"-",{text:"Add Widget",itemId:"addWidgetBtn",iconCls:"icon-add"},"-",{text:"Format",itemId:"formatMenu",iconCls:"icon-format",menu:{ignoreParentClicks:true,items:[{text:"Type",itemId:"typeItem",menu:{defaults:{xtype:"menucheckitem",group:"layoutType"},items:[{itemId:"normalView",type:"normal",text:"Normal"},{itemId:"tabbedView",type:"tabbed",text:"Tabbed"}]}},{text:"Columns",itemId:"layoutItem",menu:{items:[{xtype:"combo",itemId:"layoutStructure",triggerAction:"all",mode:"local",emptyText:"Select an item...",forceSelection:true,store:[[1,"1 - column 100%"],[2,"2 - columns 50/50"],[3,"3 - columns 25/75"],[4,"4 - columns 75/25"],[5,"5 - columns 33/33/33"],[6,"6 - columns - 50/25/25"],[7,"7 - columns 25/50/25"],[8,"8 - columns 25/25/25/25"],[9,"9 - columns - 40/20/20/20"]]}]}},{itemId:"addNewTab",text:"Add new Tab"}]}},"-",{text:"Preview",itemId:"previewPageBtn",iconCls:"icon-preview"}]});return{title:this.layoutPage||"Layout Designer",layout:"fit",tbar:a,items:{xtype:"afStudio.layoutDesigner.view.page",pageMeta:b.layoutMeta,ref:"layoutView"}}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.layoutDesigner.DesignerPanel.superclass.initComponent.apply(this,arguments);this._afterInitComponent()},_afterInitComponent:function(){var e=this,d=e.getTopToolbar(),c=d.getComponent("saveLayoutBtn"),b=d.getComponent("addWidgetBtn"),a=d.getComponent("previewPageBtn");e.addEvents("layouttypechanged");c.on("click",e.onSaveDesignerLayout,e);b.on("click",e.onClickNewWidget,e);a.on("click",e.onPreviewPage,e);e.getFormatLayoutMenuItem("layoutStructure").on({select:e.onSelectDesignerColumnsNumber,scope:e});e.getFormatMenuItem("typeItem").menu.on({itemclick:e.onLayoutTypeChanged,scope:e});e.getFormatMenuItem("addNewTab").on({click:e.onClickAddNewPagesTab,scope:e});e.on("afterrender",e.initDesignerPanel,e)},initDesignerPanel:function(){this.updateDesignerPanelControls()},onLayoutTypeChanged:function(d,g){var k=this,j=d.type,c=k.layoutView.getContentView().viewMeta,b=k.layoutView.pageMeta;var a=k.isViewTabbed(c);switch(j){case"normal":if(a){var f=k.changeContentViewMetaData("normal",b);k.updateLayoutView(new afStudio.layoutDesigner.view.Page({pageMeta:f}))}break;case"tabbed":if(!a){var f=k.changeContentViewMetaData("tabbed",b);k.updateLayoutView(new afStudio.layoutDesigner.view.Page({pageMeta:f}))}break}this.fireEvent("layouttypechanged",d.type);this.updateDesignerPanelControls()},onSelectDesignerColumnsNumber:function(e,a,c){var d=this.layoutView,b=e.getValue();d.setActiveContentViewLayout(b)},onClickAddNewPagesTab:function(){if(!this.tabNamePickerWindow){this.tabNamePickerWindow=new afStudio.layoutDesigner.TabNamePickerWindow();this.tabNamePickerWindow.on("tabnamepicked",this.onAddNewPagesTab,this)}this.tabNamePickerWindow.show()},onAddNewPagesTab:function(a){var b=this.layoutView.getContentView();b.addTabViewComponent(a)},onClickNewWidget:function(){if(!this.widgetSelectorWindow){this.widgetSelectorWindow=new afStudio.layoutDesigner.WidgetSelectorTreeWindow();this.widgetSelectorWindow.on("widgetselect",this.onAddWidget,this)}this.widgetSelectorWindow.show()},onAddWidget:function(a){var b=this.layoutView;b.addWidgetComponentToContentView(a)},onSaveDesignerLayout:function(){var b=this,a=b.layoutView.getPageMetaData();b.executeAction({url:b.saveLayoutUrl,params:{app:b.layoutApp,page:b.layoutPage,definition:Ext.encode(a)},scope:b,run:function(c){afStudio.Msg.info("Layout Designer",c.content);this.fireEvent("logmessage",this,"layout saved")},loadingMessage:"Saving..."})},onPreviewPage:function(){var a=String.format("/#/pages/{0}",this.layoutPage);this.pagePreviewWindow=window.open(a,"layoutDesignerPagePreview")},resizeItems:function(){var c=this;var b=c.columnsNumber;c.resizer=[];for(var a=0;a<b;a++){var d=new Ext.Resizable("portal-column-"+a,{width:200,minWidth:100,minHeight:50,listeners:{beforeresize:function(j,g){var f=Ext.fly(j.el);j._width=Ext.fly(f).getWidth()},resize:function(k,g,f,j){c.resizerHandler(k,g,f,j)}}});c.resizer.push(d)}},autoAdjust:function(){var d=Ext.DomQuery.select('div[class*="x-portlet"]',this.designerPortal.el);for(var c=0,a=d.length;c<a;c++){var e=Ext.getCmp(d[c].id);var b=e.ownerCt.getWidth();e.setWidth(b);Ext.get(d[c]).setWidth(b);e.doLayout();e.ownerCt.doLayout()}}});Ext.reg("afStudio.layoutDesigner.designerPanel",afStudio.layoutDesigner.DesignerPanel);Ext.apply(afStudio.layoutDesigner.DesignerPanel.prototype,afStudio.layoutDesigner.view.MetaDataProcessor);afStudio.BaseEditor=Ext.extend(Ext.Window,{initComponent:function(){this.checkHelperFileExist();this.createRegions();var a={width:813,height:550,closable:true,draggable:true,modal:true,resizable:false,bodyBorder:false,border:false,layout:"border",items:[this.centerPanel],buttons:[{text:"Cancel",handler:this.cancel,scope:this}],buttonAlign:"center"};Ext.apply(this,Ext.apply(this.initialConfig,a));afStudio.BaseEditor.superclass.initComponent.apply(this,arguments)},createRegions:function(){this.codeEditor=new Ext.ux.AceComponent({file:"root/apps/frontend/lib/helper/"+this.helper+"Helper.php"});this.centerPanel=new Ext.Panel({layout:"fit",region:"center",items:[this.codeEditor],tbar:[{text:"Save",iconCls:"icon-save",handler:this.save,scope:this},"->",{text:"Theme",iconCls:"icon-run-run",handler:this.tdshortcut,scope:this}]})},save:function(){Ext.Ajax.request({url:afStudioWSUrls.getHelperFileSaveUrl(),params:{helper:this.helper},xmlData:this.codeEditor.getCode(),success:function(a,b){var c=Ext.decode(a.responseText);afStudio.Msg.info(c.message)}})},checkHelperFileExist:function(){Ext.Ajax.request({url:afStudioWSUrls.getCheckHelperFileExistUrl(),params:{helper:this.helper},failure:function(a,b){var c=Ext.decode(a.responseText);afStudio.Msg.error(a.responseText)}})},cancel:function(){this.close()},tdshortcut:function(){this.close();(new afStudio.Theme()).show()}});afStudio.CssEditor=Ext.extend(Ext.Window,{initComponent:function(){this.createRegions();var a={title:"CSS Editor",layout:"border",width:813,height:550,modal:true,closable:true,draggable:true,resizable:false,bodyBorder:false,border:false,items:[this.westPanel,this.centerPanel],buttonAlign:"center",buttons:[{text:"Cancel",scope:this,handler:this.cancel}]};Ext.apply(this,Ext.apply(this.initialConfig,a));afStudio.CssEditor.superclass.initComponent.apply(this,arguments)},createRegions:function(){this.westPanel=new Ext.ux.FileTreePanel({title:"Files",iconCls:"icon-models",split:true,region:"west",url:afStudioWSUrls.getFiletreeUrl,loadMask:true,width:220,rootText:"CSS",rootPath:"root/web/css",newfileText:"file.css",maxFileSize:524288*2*10,autoScroll:true,enableProgress:false,fileCt:this,fileOpenSingleClick:true});this.codeEditor=new Ext.ux.AceComponent();this.centerPanel=new Ext.Panel({region:"center",layout:"fit",items:this.codeEditor,tbar:[{text:"Save",iconCls:"icon-save",scope:this,handler:this.save},"->",{text:"Theme",iconCls:"icon-run-run",scope:this,handler:this.tdshortcut}]})},save:function(){var a=this,b=this.codeEditor;afStudio.xhr.executeAction({url:afStudioWSUrls.getFilecontentUrl,params:{file:b.file,code:b.getCode()},scope:a,logMessage:String.format("CssEditor file [{0}] was saved",b.file)})},cancel:function(){this.close()},tdshortcut:function(){this.close();(new afStudio.Theme()).show()},openFile:function(a,b){if(b!=this.codeEditor.file){this.codeEditor.loadFile(b)}},renameFile:function(b,d,a){var c=this.codeEditor;if(c.file==a){c.setFile(d)}},deleteFile:function(a){this.codeEditor.setCode("")}});afStudio.Theme=Ext.extend(Ext.Window,{tabPanel:null,initComponent:function(){this.initDataviewThemeSelector();this.initDataviewEditors();this.initTabPanel();var a={title:"Theme Designer",width:463,height:250,closable:true,draggable:true,plain:true,modal:true,resizable:false,bodyBorder:false,border:false,layout:"fit",items:this.tabPanel,buttons:[{id:this.id+"-customize-btn-ts",text:"Set Theme",hidden:true,disabled:true,handler:this.customizeThemeSelector,scope:this},{id:this.id+"-customize-btn-e",text:"Customize",hidden:true,disabled:true,handler:this.customizeEditors,scope:this},{text:"Cancel",handler:this.cancel,scope:this}],buttonAlign:"center",listeners:{show:function(){for(var b in this.dataviewThemeSelector.store.data.items){if(this.dataviewThemeSelector.store.data.items[b].json&&afTemplateConfig.template.current==this.dataviewThemeSelector.store.data.items[b].json[1].toLowerCase()){this.dataviewThemeSelector.selectRange(b,b)}}}}};Ext.apply(this,Ext.apply(this.initialConfig,a));afStudio.Theme.superclass.initComponent.apply(this,arguments)},initDataviewThemeSelector:function(){var a=this;var c=[["desktoptemplate","Desktop","template_desktop.png"],["viewporttemplate","Viewport","template_viewport.png"]];var b=new Ext.data.SimpleStore({fields:[{name:"id"},{name:"name"},{name:"img"}],sortInfo:{field:"name",direction:"ASC"},data:c});this.dataviewThemeSelector=new Ext.DataView({id:"themeselector",itemSelector:"div.thumb-wrap",style:"overflow: auto;",multiSelect:true,listeners:{selectionchange:function(d,f){var e=Ext.getCmp(this.id+"-customize-btn-ts");if(f.length){e.enable()}else{e.disable()}},dblclick:function(d,f,g,j){a.customizeThemeSelector(a.close)},scope:this},store:b,tpl:new Ext.XTemplate('<tpl for=".">','<div class="thumb-wrap" id="{id}">','<div class="thumb"><img src="appFlowerStudioPlugin/images/{img}"></div>',"<span>{name}</span></div>","</tpl>")})},initDataviewEditors:function(){var a=this;var c=afTemplateConfig.template.helpers[afTemplateConfig.template.current];var b=new Ext.data.SimpleStore({fields:[{name:"id"},{name:"name"},{name:"img"},{name:"editor"}],data:c});this.dataviewEditors=new Ext.DataView({id:"editors",itemSelector:"div.thumb-wrap",style:"overflow:auto",multiSelect:true,listeners:{selectionchange:function(d,f){var e=Ext.getCmp(this.id+"-customize-btn-e");if(f.length){e.enable()}else{e.disable()}},dblclick:function(d,f,g,j){a.customizeEditors();a.close()},scope:this},store:b,tpl:new Ext.XTemplate('<tpl for=".">','<div class="thumb-wrap" id="{id}">','<div class="thumb"><img src="appFlowerStudioPlugin/images/{img}"></div>',"<span>{name}</span></div>","</tpl>")})},updateDataviewEditors:function(){var a=afTemplateConfig.template.helpers[afTemplateConfig.template.current];this.dataviewEditors.store.loadData(a)},initTabPanel:function(){var a=this;this.tabPanel=new Ext.TabPanel({activeTab:0,items:[{title:"Theme Selector",items:this.dataviewThemeSelector},{title:"Editors",autoScroll:true,items:this.dataviewEditors}],listeners:{tabchange:function(b,c){switch(c.items.keys[0]){case"themeselector":a.buttons[0].show();a.buttons[1].hide();break;case"editors":a.buttons[1].show();a.buttons[0].hide();break}}}})},customizeThemeSelector:function(c){var a=this;if(this.dataviewThemeSelector.getSelectedIndexes()){var b=this.dataviewThemeSelector.getSelectedRecords()[0].get("name");Ext.Ajax.request({url:afStudioWSUrls.getTemplateSelectorUrl(),method:"post",params:{cmd:"update",template:b},callback:function(e,f,d){d=Ext.decode(d.responseText);if(!d.success){afStudio.Msg.error(d.message)}else{afTemplateConfig.template.current=b.toLowerCase();afStudio.Msg.info(d.message);a.updateDataviewEditors();if(Ext.isFunction(c)){Ext.util.Functions.createDelegate(c,a)()}}}})}},customizeEditors:function(){if(this.dataviewEditors.getSelectedIndexes()){var id=this.dataviewEditors.getSelectedRecords()[0].get("id"),name=this.dataviewEditors.getSelectedRecords()[0].get("name"),editor=this.dataviewEditors.getSelectedRecords()[0].get("editor");if(editor!=""){eval("new "+editor+"({helper: '"+id+"',title:'"+name+"'}).show()")}else{afStudio.Msg.error("There is not javascript Editor set for this button.")}this.close()}},cancel:function(){this.close()}});Ext.ns("afStudio.data.type");afStudio.data.type.Type=Ext.extend(Object,{type:null,union:null,editorField:null,invalidMessage:"The value is invalid",restrictions:null,convert:function(a){return null},validate:function(f){var e=afStudio.data.type.TypeRestrictions,b=this.restrictions;if(this.union){if(!this.validateUnion(f)&&!b){return this.invalidMessage}else{if(this.validateUnion(f)){return true}}}var d=true;for(var c in b){var a=e[c],g=b[c],d=a.validate(f,g);if(d!==true){d=false;break}}return d?true:this.invalidMessage},validateUnion:function(f){var b=this.union,d=afStudio.data.Types;if(!Ext.isArray(b)){throw String.format('Type.union: The union "{0}" is not an array.',b)}for(var c=0,a=b.length;c<a;c++){var e=Ext.isString(b[c])?d.getType(b[c]):b[c];if(e.validate(f)===true){return true}}return false},editor:function(g,j){j=Ext.isDefined(j)?Boolean(j):true;var g=g||{},b=this.restrictions?this.restrictions.enumeration:[],f;var a=function(m){if(m==""){return true}m=j?this.convert(m):m;return this.validate(m)}.createDelegate(this);g.validator=a;if(!Ext.isEmpty(b)){var k=[];for(var e=0,d=b.length;e<d;e++){k.push([b[e],b[e]])}f=new Ext.form.ComboBox(Ext.apply({editable:true,typeAhead:true,lazyRender:true,local:true,store:k,triggerAction:"all"},g))}else{var c=this.editorField;if(g.editorField){c=g.editorField;delete g.editorField}f=new c(g)}return f}});Ext.ns("afStudio.data.type");afStudio.data.type.Number=Ext.extend(afStudio.data.type.Type,{type:"number",editorField:Ext.form.NumberField,validate:function(a){if(Ext.isNumber(a)){return afStudio.data.type.Number.superclass.validate.call(this,a)}return this.invalidMessage}});afStudio.data.type.Auto=Ext.extend(afStudio.data.type.Type,{editorField:Ext.form.TextField,type:"auto",convert:function(a){return a}});afStudio.data.type.Boolean=Ext.extend(afStudio.data.type.Type,{type:"boolean",restrictions:{enumeration:[true,false]},convert:function(a){return a===true||a==="true"||a==1?true:false},validate:function(a){if(Ext.isBoolean(a)){return afStudio.data.type.Boolean.superclass.validate.call(this,a)}return this.invalidMessage},editor:function(a){a=Ext.apply(a||{},{editable:false,forceSelection:true});return afStudio.data.type.Boolean.superclass.editor.call(this,a)}});afStudio.data.type.Date=Ext.extend(afStudio.data.type.Type,{type:"date",editorField:Ext.form.DateField,convert:function(d){var b=["m/d/Y","n/j/Y","n/j/y","m/j/y","n/d/y","m/j/Y","n/d/Y","m-d-y","m-d-Y","m/d","m-d","md","mdy","mdY","d","Y-m-d","n-j","n/j"];if(!d){return null}if(Ext.isDate(d)){return d}var e;for(var f=0,a=b.length;f<a&&!e;f++){e=Date.parseDate(d,b[f])}if(e){return e}var c=Date.parse(d);return c?new Date(c):null},validate:function(a){if(Ext.isDate(a)){return afStudio.data.type.Date.superclass.validate.call(this,a)}return this.invalidMessage}});afStudio.data.type.Float=Ext.extend(afStudio.data.type.Number,{type:"float",convert:function(a){return(a!==undefined&&a!==null&&a!=="")?parseFloat(a,10):null}});afStudio.data.type.Integer=Ext.extend(afStudio.data.type.Number,{type:"integer",convert:function(a){return(a!==undefined&&a!==null&&a!=="")?parseInt(a,10):null},validate:function(b){var a=afStudio.data.type.Integer.superclass.validate.call(this,b);return((a===true)&&(b%1==0))?true:this.invalidMessage},editor:function(a){a=Ext.apply(a||{},{allowDecimals:false});return afStudio.data.type.Integer.superclass.editor.call(this,a)}});afStudio.data.type.String=Ext.extend(afStudio.data.type.Type,{editorField:Ext.form.TextField,type:"string",convert:function(a){return(a===undefined||a===null)?"":String(a)},validate:function(a){if(Ext.isString(a)||Ext.isString(this.convert(a))){return afStudio.data.type.String.superclass.validate.call(this,a)}return this.invalidMessage}});afStudio.data.type.VarType=Ext.extend(afStudio.data.type.String,{type:"varType",restrictions:{pattern:/^\{[\w-]+\}$/}});afStudio.data.type.PermissionType=Ext.extend(afStudio.data.type.String,{type:"permissionType",restrictions:{pattern:/^(\w+|\*)(\s*,\s*\w+)*$/}});afStudio.data.type.PositiveInteger=Ext.extend(afStudio.data.type.Integer,{type:"positiveInteger",invalidMessage:"The value must be >= 0",restrictions:{minInclusive:0},editor:function(a){a=Ext.apply(a||{},{allowNegative:false});return afStudio.data.type.PositiveInteger.superclass.editor.call(this,a)}});afStudio.data.type.InternalUriType=Ext.extend(afStudio.data.type.String,{type:"internalUriType",invalidMessage:"The value is not a valid internal URI",restrictions:{pattern:new RegExp("^/?[\\w]+?/[\\w]+?\\??[\\w=\\-&+%{}]*$")}});afStudio.data.type.AbsoluteUriType=Ext.extend(afStudio.data.type.String,{type:"absoluteUriType",restrictions:{pattern:/^\/?[\w/-]+\.[a-z]{1,4}$/}});afStudio.data.type.AnyURI=Ext.extend(afStudio.data.type.String,{type:"anyURI",restrictions:{pattern:RegExp("^((https?|ftp|file):/)?(/[\\w\\-.]+)*/?(\\?[\\w\\-.~%!$&'()*+,;=:@/?]*)?(\\#[\\w\\-.~%!$&'()*+,;=:@/?]*)?$")}});afStudio.data.type.CombinedUriType=Ext.extend(afStudio.data.type.String,{type:"combinedUriType",union:["internalUriType","varType","anyURI"]});afStudio.data.type.ViewType=Ext.extend(afStudio.data.type.String,{type:"viewType",union:["varType"],restrictions:{enumeration:["edit","list","show","layout","html","wizard","menu"]}});afStudio.data.type.ValueType=Ext.extend(afStudio.data.type.String,{type:"valueType",union:["varType"],restrictions:{enumeration:["orm","file","static"]}});afStudio.data.type.ValueStructureType=Ext.extend(afStudio.data.type.String,{type:"valueStructureType",union:["varType"],restrictions:{enumeration:["class & method","source","item"]}});afStudio.data.type.FetchType=Ext.extend(afStudio.data.type.String,{type:"fetchType",union:["varType"],restrictions:{enumeration:["static","instance"]}});afStudio.data.type.AlignType=Ext.extend(afStudio.data.type.String,{type:"alignType",union:["varType"],restrictions:{enumeration:["left","center","right"]}});afStudio.data.type.SortType=Ext.extend(afStudio.data.type.String,{type:"sortType",union:["varType"],restrictions:{enumeration:["ASC","DESC"]}});afStudio.data.type.HandlerType=Ext.extend(afStudio.data.type.String,{type:"handlerType",union:["varType"],restrictions:{enumeration:["beforedestroy","beforehide","beforerender","beforeshow","beforestaterestore","beforestatesave","blur","change","check","destroy","disable","enable","focus","hide","invalid","move","render","resize","show","specialkey","staterestore","statesave","valid","click","beforeselect","collapse","expand","keydown","keyup","keypress","select","autosize","beforequery","activate","initialize","beforepush","beforesync","push","mouseover","mouseout","mousedown","sync"]}});afStudio.data.type.DbNameType=Ext.extend(afStudio.data.type.String,{type:"dbNameType",restrictions:{pattern:/^\w+$/}});afStudio.data.type.ArrayType=Ext.extend(afStudio.data.type.String,{type:"arrayType",restrictions:{pattern:/^\[\w+\s*:\s*["'\.\w]+?(\s*,\s*\w+\s*:\s*["'\.\w]+?)*\]$/}});afStudio.data.type.StateType=Ext.extend(afStudio.data.type.String,{type:"stateType",union:["varType"],restrictions:{enumeration:["editable","readonly","disabled"]}});afStudio.data.type.InputType=Ext.extend(afStudio.data.type.String,{type:"inputType",union:["varType"],restrictions:{enumeration:["input","textarea","checkbox","radio","password","hidden","file","combo","multicombo","doublemulticombo","static","doubletree","datetime","color","date","include"]}});Ext.ns("afStudio.data.type");afStudio.data.type.TypeRestrictions=(function(){return{length:{message:"length: The value's length must be {0}",validate:function(a,b){return a.length==b?true:String.format(this.message,b)}},minLength:{message:"minLength: The value's length must not be less than {0}",validate:function(a,b){return a.length>=b?true:String.format(this.message,b)}},maxLength:{message:"minLength: The value's length must not be more than {0}",validate:function(a,b){return a.length<=b?true:String.format(this.message,b)}},pattern:{message:"pattern: The value contains invalid characters",validate:function(a,b){if(!(b instanceof RegExp)){throw String.format('TypeRestrictions.pattern: The facet "{0}" is not a regular expression.',b)}return b.test(a)?true:this.message}},enumeration:{message:'enum: value "{0}" is not in enumeration list "{1}"',validate:function(a,b){if(!Ext.isArray(b)){throw String.format('TypeRestrictions.enumeration: The facet "{0}" is not an array.',b)}return b.indexOf(a)!=-1?true:String.format(this.message,a,b)}},minInclusive:{message:"minInclusive: value {0} must be greater than or equal to {1}",validate:function(a,b){if(!Ext.isNumber(b)){throw String.format('TypeRestrictions.minInclusive: The facet "{0}" is not a number.',b)}return a>=b?true:String.format(this.message,a,b)}},maxInclusive:{message:"maxInclusive: value {0} must be less than or equal to {1}",validate:function(a,b){if(!Ext.isNumber(b)){throw String.format('TypeRestrictions.maxInclusive: The facet "{0}" is not a number.',b)}return a<=b?true:String.format(this.message,a,b)}},minExclusive:{message:"minExclusive: value {0} must be greater than {1}",validate:function(a,b){if(!Ext.isNumber(b)){throw String.format('TypeRestrictions.minExclusive: The facet "{0}" is not a number.',b)}return a>b?true:String.format(this.message,a,b)}},maxExclusive:{message:"maxExclusive: value {0} must be less than {1}",validate:function(a,b){if(!Ext.isNumber(b)){throw String.format('TypeRestrictions.maxExclusive: The facet "{0}" is not a number.',b)}return a<b?true:String.format(this.message,a,b)}}}})();Ext.ns("afStudio.data");T=afStudio.data.type;afStudio.data.Types=(function(){return{getType:function(a){return this[a.toUpperCase()]},AUTO:new T.Auto,STRING:new T.String,INTEGER:new T.Integer,FLOAT:new T.Float,BOOLEAN:new T.Boolean,DATE:new T.Date,VARTYPE:new T.VarType,POSITIVEINTEGER:new T.PositiveInteger,PERMISSIONTYPE:new T.PermissionType,ANYURI:new T.AnyURI,INTERNALURITYPE:new T.InternalUriType,ABSOLUTEURITYPE:new T.AbsoluteUriType,COMBINEDURITYPE:new T.CombinedUriType,VIEWTYPE:new T.ViewType,VALUETYPE:new T.ValueType,VALUESTRUCTURETYPE:new T.ValueStructureType,FETCHTYPE:new T.FetchType,ALIGNTYPE:new T.AlignType,SORTTYPE:new T.SortType,HANDLERTYPE:new T.HandlerType,DBNAMETYPE:new T.DbNameType,ARRAYTYPE:new T.ArrayType,STATETYPE:new T.StateType,INPUTTYPE:new T.InputType}})();afStudio.data.Types.INT=afStudio.data.Types.INTEGER;afStudio.data.Types.DOUBLE=afStudio.data.Types.FLOAT;afStudio.data.Types.TOKEN=afStudio.data.Types.STRING;afStudio.data.Types.QNAME=afStudio.data.Types.STRING;delete T;Ext.ns("afStudio.model.template");N=afStudio.model.template;N.ModelNode={TITLE:"i:title",DESCRIPTION:"i:description",MENU:"i:menu",CONFIRM:"i:confirm",FIELDS:"i:fields",FIELD:"i:field",COLUMN:"i:column",BUTTON:"i:button",LINK:"i:link",RADIO_GROUP:"i:radiogroup",IF:"i:if",ALTERNATE_DESCRIPTIONS:"i:alternateDescriptions",GROUPING:"i:grouping",SET:"i:set",REF:"i:ref",PARAMS:"i:params",PARAM:"i:param",DATA_SOURCE:"i:datasource",DATA_STORE:"i:datastore",ACTIONS:"i:actions",ACTION:"i:action",ROW_ACTIONS:"i:rowactions",MORE_ACTIONS:"i:moreactions",AREA:"i:area",WIDGET_CATEGORIES:"i:widgetCategories",EXTRA_HELP:"i:extrahelp",OPTIONS:"i:options",CLASS:"i:class",METHOD:"i:method",HANDLER:"i:handler",VALUE:"i:value",TOOLTIP:"i:tooltip",VALIDATOR:"i:validator",HELP:"i:help",TRIGGER:"i:trigger",WINDOW:"i:window",SOURCE:"i:source",ITEM:"i:item"};afStudio.ModelNode=N.ModelNode;delete N;Ext.ns("afStudio.model.template");N=afStudio.model.template;N.BaseTemplate=Ext.extend(Object,{structure:[],constructor:function(){this.extendStructure([{name:afStudio.ModelNode.TITLE,required:true}])},processStructure:function(a){Ext.iterate(this.structure,function(e,c){var b=e,d=false;if(Ext.isObject(e)){b=e.name;d=(e.required===true)?true:false}if(a.getImmediateModelNode(b)==null&&d){a.createNode(b)}})},extendStructure:function(b){var d=[];for(var c=0,a=b.length;c<a;c++){var e=b[c];d[c]=Ext.isObject(e)?Ext.apply({},e):e}this.structure=this.structure.concat(d)},getNodeIdx:function(b){var c=this.structure,a=Ext.each(c,function(e,d){return !(Ext.isObject(e)?e.name==b:e==b)});return Ext.isDefined(a)?a:null},setNode:function(d,b){var a=this.getNodeIdx(d);if(a!=null){var c=this.structure[a];if(!Ext.isObject(c)){c=this.structure[a]={name:c}}Ext.iterate(b,function(f,e){c[f]=e})}},removeNode:function(b){var a=this.getNodeIdx(b);if(a!=null){return this.structure.splice(a,1)}return null}});delete N;Ext.ns("afStudio.model.template");N=afStudio.model.template;N.WidgetTemplate=Ext.extend(N.BaseTemplate,{constructor:function(){afStudio.model.template.WidgetTemplate.superclass.constructor.call(this);this.extendStructure([afStudio.ModelNode.CONFIRM,afStudio.ModelNode.ACTIONS])}});N.WidgetViewTemplate=Ext.extend(N.WidgetTemplate,{constructor:function(){afStudio.model.template.WidgetViewTemplate.superclass.constructor.call(this);this.extendStructure([{name:afStudio.ModelNode.DATA_SOURCE},{name:afStudio.ModelNode.FIELDS,required:true},afStudio.ModelNode.DESCRIPTION,afStudio.ModelNode.ALTERNATE_DESCRIPTIONS,afStudio.ModelNode.GROUPING])}});N.EditTemplate=Ext.extend(N.WidgetViewTemplate,{});N.ShowTemplate=Ext.extend(N.WidgetViewTemplate,{});N.ListTemplate=Ext.extend(N.WidgetViewTemplate,{constructor:function(){afStudio.model.template.ListTemplate.superclass.constructor.call(this);this.removeNode(afStudio.ModelNode.GROUPING);this.setNode(afStudio.ModelNode.TITLE,{required:false});this.extendStructure([afStudio.ModelNode.PARAMS,afStudio.ModelNode.ROW_ACTIONS,afStudio.ModelNode.MORE_ACTIONS])}});N.WizardTemplate=Ext.extend(N.WidgetTemplate,{constructor:function(){afStudio.model.template.WizardTemplate.superclass.constructor.call(this);this.extendStructure([afStudio.ModelNode.DATA_STORE,{name:afStudio.ModelNode.AREA,required:true},afStudio.ModelNode.WIDGET_CATEGORIES,afStudio.ModelNode.EXTRA_HELP])}});N.HtmlTemplate=Ext.extend(N.WidgetTemplate,{constructor:function(){afStudio.model.template.HtmlTemplate.superclass.constructor.call(this);this.extendStructure([{name:afStudio.ModelNode.PARAMS,required:true},afStudio.ModelNode.OPTIONS,afStudio.ModelNode.MORE_ACTIONS])}});delete N;Ext.ns("afStudio.model");Ext.ns("afStudio.model.widget");afStudio.model.Node=Ext.extend(Ext.util.Observable,{NODE_DATA:"data",pathSeparator:"/",nodeTypes:[],_content:{name:"_content",type:"string"},constructor:function(a){a=a||{};this.leaf=a.leaf;this.tag=this.tag||a.tag;this.modelType=a.modelType||null;this.id=this.id||a.id;if(!this.id){this.id=Ext.id(null,this.tag+"-")}this.initProperties(a.properties);this.initNodeTypes(a.nodeTypes);this[this.NODE_DATA]=this._content?new afStudio.model.Property(this._content):null;this.childNodes=[];this.parentNode=null;this.firstChild=null;this.lastChild=null;this.previousSibling=null;this.nextSibling=null;this.addEvents({"beforeModelNodeAppend":true,"modelNodeAppend":true,"beforeModelNodeRemove":true,"modelNodeRemove":true,"beforeModelNodeMove":true,"modelNodeMove":true,"beforeModelNodeInsert":true,"modelNodeInsert":true,"beforeModelPropertyChanged":true,"modelPropertyChanged":true,"beforeModelNodeCreated":true,"modelNodeCreated":true,"modelReconfigure":true});this.listeners=a.listeners;afStudio.model.Node.superclass.constructor.call(this);var b=a.definition||this.defaultDefinition;if(b){this.initNodeDefinition(b)}this.initEvents()},initProperties:function(a){var b=this,c=a||this.properties;this.properties=new Ext.util.MixedCollection(false,function(d){return d.name});Ext.iterate(c,function(d){b.properties.add(new afStudio.model.Property(d))})},initNodeTypes:function(a){var b=a||this.nodeTypes;if(!Ext.isArray(b)){throw new afStudio.model.error.NodeError("nodeTypes type")}this.nodeTypes=[];Ext.each(b,function(c){this.nodeTypes.push(c)},this)},initNodeDefinition:function(a){this.applyNodeDefinition(a,true)},applyNodeDefinition:function(b,a){var c=this;if(!Ext.isDefined(b)){return}a?this.suspendEvents():null;if(Ext.isObject(b)){var d=Ext.apply({},b);if(d.attributes){this.applyProperties(d.attributes);delete d.attributes}if(Ext.isDefined(d._content)){this.setNodeData(d._content);delete d._content}else{Ext.iterate(d,function(f,e){if(Ext.isArray(e)){Ext.iterate(e,function(g){c.createNode(f,g)})}else{c.createNode(f,e)}})}}else{this.setNodeData(b)}a?this.resumeEvents():null},initEvents:function(){var a=this;a.on({modelNodeCreated:a.onModelNodeCreated,beforeModelPropertyChanged:a.onBeforeModelPropertyChanged,modelPropertyChanged:a.onModelPropertyChanged,beforeModelNodeRemove:a.onBeforeModelNodeRemove})},fireEvent:function(b){if(Ext.data.Node.superclass.fireEvent.apply(this,arguments)===false){return false}var a=this.getOwnerTree();if(a){if(a.proxyNodeEvent.apply(a,arguments)===false){return false}}return true},isLeaf:function(){return this.leaf===true},setFirstChild:function(a){this.firstChild=a},setLastChild:function(a){this.lastChild=a},isLast:function(){return(!this.parentNode?true:this.parentNode.lastChild==this)},isFirst:function(){return(!this.parentNode?true:this.parentNode.firstChild==this)},isDirectRootChild:function(){var a=this.getRootNode();return a==this.parentNode},isSimilarNode:function(a){if(this==a){return false}return(this.tag==a.tag)},isRequired:function(){if(this.getDepth()==0){return true}var a=this.getStructuralData();return a?a.required:false},hasMany:function(){var a=this.getStructuralData();return a?a.hasMany:false},getTypeStructure:function(b){var a={name:null,required:false,hasMany:false,unique:null};if(Ext.isObject(b)){a.name=b.name;a.required=Ext.isBoolean(b.required)?b.required:false;a.hasMany=Ext.isBoolean(b.hasMany)?b.hasMany:false;a.unique=Ext.value(b.unique,null)}else{a.name=b}return a},getStructuralData:function(d){var d=this.parentNode||d;if(d){var e=this.tag,c=d.nodeTypes;var a=Ext.each(c,function(f){return !(e==(Ext.isObject(f)?f.name:f))});var b=Ext.isDefined(a)?c[a]:null;if(b){return this.getTypeStructure(b)}}return null},hasChildWithType:function(a){return this.findChildById(a,false,true)!=null?true:false},hasChildNodes:function(){return !this.isLeaf()&&this.childNodes.length>0},appendChild:function(e){var f=false;if(Ext.isArray(e)){f=e}else{if(arguments.length>1){f=arguments}}if(f){for(var d=0,a=f.length;d<a;d++){this.appendChild(f[d])}}else{if(this.fireEvent("beforeModelNodeAppend",this.ownerTree,this,e)===false){return false}var b=this.childNodes.length;var c=e.parentNode;if(c){if(e.fireEvent("beforeModelNodeMove",e.getOwnerTree(),e,c,this,b)===false){return false}c.removeChild(e)}b=this.childNodes.length;if(b===0){this.setFirstChild(e)}this.childNodes.push(e);e.parentNode=this;var g=this.childNodes[b-1];if(g){e.previousSibling=g;g.nextSibling=e}else{e.previousSibling=null}e.nextSibling=null;this.setLastChild(e);e.setOwnerTree(this.getOwnerTree());this.fireEvent("modelNodeAppend",this.ownerTree,this,e,b);if(c){e.fireEvent("modelNodeMove",this.ownerTree,e,c,this,b)}return e}},removeChild:function(c,b){var a=this.childNodes.indexOf(c);if(a==-1){return false}if(this.fireEvent("beforeModelNodeRemove",this.ownerTree,this,c)===false){return false}this.childNodes.splice(a,1);if(c.previousSibling){c.previousSibling.nextSibling=c.nextSibling}if(c.nextSibling){c.nextSibling.previousSibling=c.previousSibling}if(this.firstChild==c){this.setFirstChild(c.nextSibling)}if(this.lastChild==c){this.setLastChild(c.previousSibling)}this.fireEvent("modelNodeRemove",this.ownerTree,this,c,a);if(b){c.destroy(true)}else{c.clear()}return c},clear:function(a){this.setOwnerTree(null,a);this.parentNode=this.previousSibling=this.nextSibling=null;if(a){this.firstChild=this.lastChild=null}},destroy:function(a){if(a===true){this.purgeListeners();this.clear(true);Ext.each(this.childNodes,function(b){b.destroy(true)});this.childNodes=null}else{this.remove(true)}},insertBefore:function(d,a){if(!a){return this.appendChild(d)}if(d==a){return false}if(this.fireEvent("beforeModelNodeInsert",this.ownerTree,this,d,a)===false){return false}var b=this.childNodes.indexOf(a);var c=d.parentNode;var e=b;if(c==this&&this.childNodes.indexOf(d)<b){e--}if(c){if(d.fireEvent("beforeModelNodeMove",d.getOwnerTree(),d,c,this,b,a)===false){return false}c.removeChild(d)}if(e===0){this.setFirstChild(d)}this.childNodes.splice(e,0,d);d.parentNode=this;var f=this.childNodes[e-1];if(f){d.previousSibling=f;f.nextSibling=d}else{d.previousSibling=null}d.nextSibling=a;a.previousSibling=d;d.setOwnerTree(this.getOwnerTree());this.fireEvent("modelNodeInsert",this.ownerTree,this,d,a,e);if(c){d.fireEvent("modelNodeMove",this.ownerTree,d,c,this,e,a)}return d},remove:function(a){if(this.parentNode){this.parentNode.removeChild(this,a)}return this},removeAll:function(a){var c=this.childNodes,b;while((b=c[0])){this.removeChild(b,a)}return this},item:function(a){return this.childNodes[a]},replaceChild:function(a,c){var b=c?c.nextSibling:null;this.removeChild(c);this.insertBefore(a,b);return c},indexOf:function(a){return this.childNodes.indexOf(a)},getOwnerTree:function(){if(!this.ownerTree){var a=this;while(a){if(a.ownerTree){this.ownerTree=a.ownerTree;break}a=a.parentNode}}return this.ownerTree},getDepth:function(){var b=0,a=this;while(a.parentNode){++b;a=a.parentNode}return b},setOwnerTree:function(a,b){if(a!=this.ownerTree){if(this.ownerTree){this.ownerTree.unregisterNode(this)}this.ownerTree=a;if(b!==true){Ext.each(this.childNodes,function(c){c.setOwnerTree(a)})}if(a){a.registerNode(this)}}},setId:function(b){if(b!==this.id){var a=this.ownerTree;if(a){a.unregisterNode(this)}this.id=b;if(a){a.registerNode(this)}this.onIdChange(b)}},onIdChange:Ext.emptyFn,getPath:function(c){c=c||"id";var e=this.parentNode,a=[this[c]];while(e){a.unshift(e[c]);e=e.parentNode}var d=this.getPathSeparator();return d+a.join(d)},getPathSeparator:function(){return this.getOwnerTree()?this.getOwnerTree().pathSeparator:this.pathSeparator},bubble:function(c,b,a){var d=this;while(d){if(c.apply(b||d,a||[d])===false){break}d=d.parentNode}},cascade:function(f,e,b){if(f.apply(e||this,b||[this])!==false){var d=this.childNodes;for(var c=0,a=d.length;c<a;c++){d[c].cascade(f,e,b)}}},eachChild:function(f,e,b){var d=this.childNodes;for(var c=0,a=d.length;c<a;c++){if(f.apply(e||d[c],b||[d[c]])===false){break}}},filterChildren:function(a){return this.filterChildrenBy(function(b){return b.tag==a})},filterChildrenBy:function(c,b){var a=[];this.eachChild(function(d){if(c.apply(b||d,[d])===true){a.push(d)}},b);return a},findChild:function(a,d,c,b){return this.findChildBy(function(){var e=this.getPropertyValue(d);return(this.tag==a)&&(e&&e==c)},null,b)},findChildById:function(c,a,b){return this.findChildBy(function(){return b?new RegExp("^"+c+"(?:-\\d+)?$","i").test(this.id):this.id==c},null,a)},findChildBy:function(g,f,b){var e=this.childNodes,a=e.length,d=0,j,c;for(;d<a;d++){j=e[d];if(g.call(f||j,j)===true){return j}else{if(b){c=j.findChildBy(g,f,b);if(c!=null){return c}}}}return null},sort:function(e,d){var c=this.childNodes;var a=c.length;if(a>0){var f=d?function(){return e.apply(d,arguments)}:e;c.sort(f);for(var b=0;b<a;b++){var g=c[b];g.previousSibling=c[b-1];g.nextSibling=c[b+1];if(b===0){this.setFirstChild(g)}if(b==a-1){this.setLastChild(g)}}}},contains:function(a){return a.isAncestor(this)},isAncestor:function(a){var b=this.parentNode;while(b){if(b==a){return true}b=b.parentNode}return false},getProperties:function(){return this.properties},getPropertiesHash:function(c){var b=this.getProperties(),a={};b.eachKey(function(d,e){if(!Ext.isEmpty(e.value)||(c&&!Ext.isEmpty(e.defaultValue))){a[d]=c?(Ext.isDefined(e.value)?e.value:e.defaultValue):e.value}});return a},getProperty:function(a){return this.properties.get(a)},getPropertyValue:function(b){var a=this.getProperty(b);return a?a.getValue():undefined},setProperty:function(d,a){var c=this.properties.get(d);if(!Ext.isDefined(c)){return null}var b=c.getValue();if(c.validate(a)&&this.fireEvent("beforeModelPropertyChanged",this,d,a,b)){c.setValue(a);this.fireEvent("modelPropertyChanged",this,d,a,b);if(c.reconfigure){this.reconfigure(c,d,a)}}return c},getNodeData:function(){return this[this.NODE_DATA]},getNodeDataValue:function(){var a=this.getNodeData();return a?a.getValue():undefined},setNodeData:function(c){var b=this.NODE_DATA;if(!this[b]){return}var a=this[b].getValue();if(this.fireEvent("beforeModelPropertyChanged",this,"_content",c,a)){this[b].setValue(c);this.fireEvent("modelPropertyChanged",this,"_content",c,a)}},applyProperties:function(b,a){if(!Ext.isObject(b)){throw new afStudio.model.error.PropertyError("incorrect-properties")}a?this.suspendEvents():null;Ext.iterate(b,function(d,c){if(this.setProperty(d,c)===null){var e=new afStudio.model.Property({name:d,value:c});this.properties.add(e)}},this);a?this.resumeEvents():null},getPropertiesSource:function(){var c=this.getProperties(),b={};c.eachKey(function(d,e){b[d]=e.getPropertyHash()});if(this.isNodeDataUsed()){var a=this.getNodeData();b["_content"]=a.getPropertyHash()}return b},isNodeDataUsed:function(){var a=this.getNodeData();return Ext.isEmpty(this.nodeTypes)&&a},getRootNode:function(){var a=this.parentNode;while(a&&a.parentNode){a=a.parentNode}return a},getModelType:function(){return this.modelType},getNodeConstructorByName:function(d){var a=this.getModelType(),c=String(d).trim(),b=[afStudio.model];if(a){if(["layout","menu"].indexOf(a)==-1){b.unshift(afStudio.model.widget)}}if(/^i:(\w+)/i.test(c)){c=c.replace(/^i:(\w+)/i,function(f,e){return e.ucfirst()})}Ext.iterate(b,function(e){if(Ext.isFunction(e[c])){c=e[c];return false}});return Ext.isFunction(c)?c:null},createNode:function(c,b){var d=null;if(Ext.isEmpty(c)){throw new afStudio.model.error.NodeError("node-undefined")}if(this.fireEvent("beforeModelNodeCreated",this.ownerTree,this,c)){var a=this.getNodeConstructorByName(c);a=a?a:afStudio.model.Node;d=new a({tag:c,modelType:this.getModelType(),definition:b});if(this.fireEvent("modelNodeCreated",this.ownerTree,this,d)){d=this.appendChild(d);d.onNodeCreate()}}return d},onNodeCreate:function(){},reconfigure:function(d,b,c){var a=d.reconfigure;if(Ext.isDefined(a[c])){this.nodeTypes.length=0;this.removeAll(true);Ext.each(a[c],function(e){this.nodeTypes.push(e)},this);this.fireEvent("modelReconfigure",this)}},validate:function(){var d=this.getProperties(),a=this.nodeTypes;var e={node:this.tag,error:null,children:[]};var b=[];d.eachKey(function(f,g){if(!g.isValid()){var j={};j[f]=g.getErrors();b.push(j)}});if(this.isNodeDataUsed()){var c=this.getNodeData();if(!c.isValid()){b.push({"_content":c.getErrors()})}}Ext.each(a,function(g){var f=this.getTypeStructure(g);if(f.required&&!this.hasChildWithType(f.name)){var j={};j[f.name]=String.format("Required {0} <u>{1}</u> node",f.hasMany?"at least one":"",f.name);b.push(j)}},this);this.eachChild(function(f){var g=f.validate();if(g!==true){e.children.push(g)}});if(b.length>0||e.children.length>0){e.error=Ext.value(b,null);return e}return true},onModelNodeCreated:function(f,b,e){afStudio.Logger.info('@model "modelNodeCreated"',b,e);var g=e.tag,a=e.getStructuralData(b),d=true;var c;if(a){if(b.hasChildWithType(g)){if(!a.hasMany){d=false;c=String.format("<b>{0}</b> can contain only one <u>{1}</u> child node.",b.tag,g)}else{if(a.unique&&b.findChild(g,a.unique,e.getPropertyValue(a.unique))){d=false;c=String.format("<b>{0}</b> property <u>{1}</u> should be unique.",g,a.unique)}}}}else{d=false;c=String.format("<b>{0}</b> cannot contain <u>{1}</u> child node.",b.tag,g)}if(!d){afStudio.Msg.warning("Model",c)}return d},onBeforeModelPropertyChanged:function(b,d,c,a){return true},onModelPropertyChanged:function(b,d,c,a){return true},onBeforeModelNodeRemove:function(a,b,c){return true},toString:function(){var b=this;var a=new Ext.XTemplate('[model.Node: "{tag}", ID: "{id}", {NODE_DATA}: {[this.getData()]}]',{compiled:true,disableFormats:true,getData:function(){return b[b.NODE_DATA]?b[b.NODE_DATA].getValue():null}});return a.apply(this)}});Ext.ns("afStudio.model");afStudio.model.TypedNode=Ext.extend(afStudio.model.Node,{properties:[],constructor:function(a){a=a||{};this.applyType(a.modelType);afStudio.model.TypedNode.superclass.constructor.call(this,a)},applyType:function(b){var c=this[b+"Properties"];if(c){this.properties=this.properties.concat(c)}var a=this[b+"NodeTypes"];if(a){this.nodeTypes=this.nodeTypes.concat(a)}}});Ext.ns("afStudio.model");afStudio.model.Property=Ext.extend(Object,{required:false,readOnly:false,constructor:function(a){Ext.apply(this,a);var b=afStudio.data.Types;if(this.type){if(Ext.isString(this.type)){this.type=b.getType(this.type)||b.AUTO}}else{this.type=b.AUTO}},validate:function(a){return(!Ext.isEmpty(a)||this.type.validate(a)===true)?true:false},isValid:function(){return this.required?(!Ext.isEmpty(this.value)&&this.type.validate(this.value)===true):true},getErrors:function(){var a=this.type.validate(this.value);if(this.required&&this.value==""){a="This property is required."}return a===true?[]:a},getValue:function(){return Ext.isDefined(this.value)?this.value:this.defaultValue},setValue:function(a){if(!this.validate(a)){return false}this.value=a},getPropertyHash:function(){var a=["name","value","type","required","readOnly","defaultValue"],c={};for(var b in this){if(!Ext.isFunction(this[b])&&a.indexOf(b)!==-1){c[b]=this[b]}}return c}});Ext.ns("afStudio.model.error");afStudio.model.error.NodeError=Ext.extend(Ext.Error,{name:"afStudio.model.NodeError",lang:{"node-undefined":"Model Node is not defined.","nodeTypes type":'The "nodeTypes" cfg/property type is not correct. Must be an Array.'}});Ext.ns("afStudio.model.error");afStudio.model.error.PropertyError=Ext.extend(Ext.Error,{name:"afStudio.model.PropertyError",lang:{"incorrect-properties":'The "properties" type is not correct, should be an object.'}});afStudio.model.Params=Ext.extend(afStudio.model.Node,{id:afStudio.ModelNode.PARAMS,tag:afStudio.ModelNode.PARAMS,properties:[],nodeTypes:[{name:afStudio.ModelNode.PARAM,required:true,hasMany:true,unique:"name"}]});afStudio.model.Description=Ext.extend(afStudio.model.Node,{tag:afStudio.ModelNode.DESCRIPTION,_content:{name:"_content",required:true},properties:[{name:"image",type:"token"},{name:"condition",type:"token"},{name:"permissions",type:"permissionType",defaultValue:"*"}]});afStudio.model.Param=Ext.extend(afStudio.model.Node,{tag:afStudio.ModelNode.PARAM,_content:{name:"_content",required:true},defaultDefinition:{attributes:{name:"i:param"}},properties:[{name:"name",type:"token",required:true}]});afStudio.model.Root=Ext.extend(afStudio.model.Node,{id:"root",tag:"root",properties:[{name:"xmlns:i",readOnly:true},{name:"xmlns:xsi",readOnly:true},{name:"xsi:schemaLocation",readOnly:true},{name:"type",type:"viewType",required:true,readOnly:true}],constructor:function(a){afStudio.model.Root.superclass.constructor.call(this,a);this.modelType=this.getPropertyValue("type");this.initStructure(a.structureTpl);this.processStructure()},initStructure:function(a){var b=this.getModelType();if(a){a=Ext.isFunction(a)?a:afStudio.model.template[a]}else{if(b){var c=b.ucfirst()+"Template";a=afStudio.model.template[c]}}this.strTpl=Ext.isFunction(a)?new a():undefined},processStructure:function(){if(!this.strTpl){return}this.suspendEvents();this.strTpl.processStructure(this);this.resumeEvents();this.nodeTypes=this.nodeTypes.concat(this.strTpl.structure)},getRootNode:function(){return this},getModelType:function(){return this.getPropertyValue("type")},getModelNode:function(a){return this.findChildById(a,true)},getImmediateModelNode:function(a){return this.findChildById(a,false,true)},isValid:function(){var a={children:[]};this.eachChild(function(b){var c=b.validate();if(c!==true){a.children.push(c)}});return a.children.length>0?a:true}});afStudio.model.Title=Ext.extend(afStudio.model.Node,{id:afStudio.ModelNode.TITLE,tag:afStudio.ModelNode.TITLE,_content:{name:"_content",required:true}});afStudio.model.AlternateDescriptions=Ext.extend(afStudio.model.Node,{id:afStudio.ModelNode.ALTERNATE_DESCRIPTIONS,tag:afStudio.ModelNode.ALTERNATE_DESCRIPTIONS,properties:[{name:"permissions",type:"permissionType",defaultValue:"*"}],nodeTypes:[{name:afStudio.ModelNode.DESCRIPTION,required:true,hasMany:true}]});afStudio.model.widget.If=Ext.extend(afStudio.model.Node,{tag:afStudio.ModelNode.IF,_content:null,properties:[{name:"test",type:"token",required:true}],nodeCfg:{"i:fields":[{name:afStudio.ModelNode.FIELD,required:true,hasMany:true,unique:"name"},{name:afStudio.ModelNode.BUTTON,hasMany:true,unique:"name"},{name:afStudio.ModelNode.RADIO_GROUP,hasMany:true,unique:"name"}],"i:field":[{name:afStudio.ModelNode.VALUE},{name:afStudio.ModelNode.TOOLTIP},{name:afStudio.ModelNode.HELP},{name:afStudio.ModelNode.VALIDATOR,hasMany:true,unique:"name"},{name:afStudio.ModelNode.HANDLER,hasMany:true}],"i:actions":[{name:afStudio.ModelNode.ACTION,required:true,hasMany:true,unique:"name"}]},onNodeCreate:function(){var b=this,c=this.parentNode.tag,a=this.nodeCfg;Ext.iterate(a,function(e,d){if(e==c){b.nodeTypes.length=0;Ext.each(d,function(f){b.nodeTypes.push(f)});return false}});this.fireEvent("modelReconfigure",this)}});afStudio.model.widget.Source=Ext.extend(afStudio.model.Node,{tag:afStudio.ModelNode.SOURCE,_content:null,properties:[{name:"name",type:"token",required:true}]});afStudio.model.Class=Ext.extend(afStudio.model.Node,{tag:afStudio.ModelNode.CLASS,_content:{name:"_content",required:true}});afStudio.model.widget.Fields=Ext.extend(afStudio.model.TypedNode,{id:afStudio.ModelNode.FIELDS,tag:afStudio.ModelNode.FIELDS,properties:[{name:"classic",type:"boolean",defaultValue:"false"},{name:"bodyStyle",type:"token"},{name:"redirect",type:"internalUriType"},{name:"remoteLoad",type:"boolean"},{name:"plugin",type:"token"}],listProperties:[{name:"action",type:"internalUriType",defaultValue:"n/a"},{name:"tree",type:"boolean",defaultValue:false},{name:"selectable",type:"boolean",defaultValue:true},{name:"exportable",type:"boolean",defaultValue:true},{name:"expandButton",type:"boolean"},{name:"select",type:"boolean",defaultValue:false},{name:"pager",type:"boolean",defaultValue:true},{name:"remoteSort",type:"boolean",defaultValue:false},{name:"iconCls",type:"token"},{name:"icon",type:"token",defaultValue:"/images/famfamfam/accept.png"},{name:"remoteFilter",type:"boolean"},{name:"pagerTemplate",type:"token"}],editProperties:[{name:"url",type:"internalUriType"},{name:"resetable",type:"boolean",defaultValue:true},{name:"resetlabel",type:"token",defaultValue:"Reset"},{name:"submitlabel",type:"token",defaultValue:"Submit"},{name:"multipart",type:"boolean",defaultValue:false},{name:"submit",type:"boolean",defaultValue:true},{name:"border",type:"boolean",defaultValue:true},{name:"labelWidth",type:"positiveInteger",defaultValue:75}],listNodeTypes:[{name:afStudio.ModelNode.COLUMN,required:true,hasMany:true,unique:"name"}],editNodeTypes:[{name:afStudio.ModelNode.FIELD,required:true,hasMany:true,unique:"name"},{name:afStudio.ModelNode.BUTTON,hasMany:true,unique:"name"},{name:afStudio.ModelNode.LINK,hasMany:true,unique:"name"},{name:afStudio.ModelNode.RADIO_GROUP,hasMany:true,unique:"name"},{name:afStudio.ModelNode.IF}],showNodeTypes:[{name:afStudio.ModelNode.FIELD,required:true,hasMany:true,unique:"name"},{name:afStudio.ModelNode.BUTTON,hasMany:true,unique:"name"},{name:afStudio.ModelNode.LINK,hasMany:true,unique:"name"},{name:afStudio.ModelNode.RADIO_GROUP,hasMany:true,unique:"name"},{name:afStudio.ModelNode.IF}],onBeforeModelNodeRemove:function(a,c,g){var f=afStudio.ModelNode;if(a&&g.tag==f.FIELD){var e=a.root,j=g.getPropertyValue("name"),b=e.getImmediateModelNode(f.GROUPING);if(b&&!Ext.isEmpty(j)){var d=b.findChild(f.REF,"to",j,true);if(d){d.remove(true)}}}return true}});afStudio.model.widget.BaseAction=Ext.extend(afStudio.model.Node,{properties:[{name:"permissions",type:"permissionType",defaultValue:"*"}],nodeTypes:[{name:afStudio.ModelNode.ACTION,required:true,hasMany:true,unique:"name"},{name:afStudio.ModelNode.IF,hasMany:true}]});afStudio.model.widget.Actions=Ext.extend(afStudio.model.widget.BaseAction,{id:afStudio.ModelNode.ACTIONS,tag:afStudio.ModelNode.ACTIONS});afStudio.model.widget.Rowactions=Ext.extend(afStudio.model.widget.BaseAction,{id:afStudio.ModelNode.ROW_ACTIONS,tag:afStudio.ModelNode.ROW_ACTIONS});afStudio.model.widget.Moreactions=Ext.extend(afStudio.model.widget.BaseAction,{id:afStudio.ModelNode.MORE_ACTIONS,tag:afStudio.ModelNode.MORE_ACTIONS});afStudio.model.widget.Method=Ext.extend(afStudio.model.Node,{id:afStudio.ModelNode.METHOD,tag:afStudio.ModelNode.METHOD,properties:[{name:"name",type:"token",required:true},{name:"type",type:"fetchType",defaultValue:"static"}],defaultDefinition:{attributes:{name:"i:method"}},nodeTypes:[{name:afStudio.ModelNode.PARAM,hasMany:true,unique:"name"}]});afStudio.model.widget.Value=Ext.extend(afStudio.model.Node,{tag:afStudio.ModelNode.VALUE,properties:[{name:"type",type:"valueType",required:true},{name:"structure",type:"valueStructureType",defaultValue:"source",reconfigure:{"class & method":[{name:afStudio.ModelNode.CLASS,required:true},{name:afStudio.ModelNode.METHOD,required:true}],"source":[{name:afStudio.ModelNode.SOURCE,required:true}],"item":[{name:afStudio.ModelNode.ITEM,required:true,hasMany:true}]}},{name:"permissions",type:"permissionType",defaultValue:"*"}],defaultDefinition:{attributes:{type:"orm"}},nodeTypes:[{name:afStudio.ModelNode.SOURCE,required:true}],onNodeCreate:function(){var c=this,b=this.getProperty("structure"),a=b.reconfigure;Ext.iterate(a,function(e,d){var f=true;Ext.each(d,function(j){var g=c.getTypeStructure(j);if(g.required&&c.hasChildWithType(g.name)===false){return(f=false)}});if(f){b.setValue(e);c.nodeTypes.length=0;Ext.each(d,function(g){c.nodeTypes.push(g)});return false}})}});afStudio.model.widget.Grouping=Ext.extend(afStudio.model.Node,{id:afStudio.ModelNode.GROUPING,tag:afStudio.ModelNode.GROUPING,properties:[{name:"title",type:"token",defaultValue:"Default"},{name:"isSetting",type:"boolean",defaultValue:false},{name:"collapsed",type:"boolean",defaultValue:false}],nodeTypes:[{name:afStudio.ModelNode.SET,required:true,hasMany:true}]});afStudio.model.widget.Radiogroup=Ext.extend(afStudio.model.Node,{tag:afStudio.ModelNode.RADIO_GROUP,properties:[{name:"name",type:"token",required:true},{name:"label",type:"token",required:true},{name:"comment",type:"token"},{name:"help",type:"token"},{name:"permissions",type:"permissionType",defaultValue:"*"}],nodeTypes:[{name:afStudio.ModelNode.FIELD,required:true,hasMany:true,unique:"name"}]});afStudio.model.widget.Item=Ext.extend(afStudio.model.Node,{tag:afStudio.ModelNode.ITEM,_content:null,properties:[{name:"value",type:"token",required:true}]});afStudio.model.widget.Button=Ext.extend(afStudio.model.Node,{tag:afStudio.ModelNode.BUTTON,properties:[{name:"name",type:"token",required:true},{name:"label",type:"token",required:true},{name:"action",type:"combinedUriType",required:true},{name:"icon",type:"absoluteUriType"},{name:"iconCls",type:"token"},{name:"state",type:"stateType",defaultValue:"editable"},{name:"style",type:"token"},{name:"updater",type:"boolean",defaultValue:false},{name:"permissions",type:"permissionType",defaultValue:"*"}],nodeTypes:[{name:afStudio.ModelNode.HANDLER,hasMany:true}],defaultDefinition:{attributes:{label:"Button"}}});afStudio.model.widget.Datasource=Ext.extend(afStudio.model.Node,{id:afStudio.ModelNode.DATA_SOURCE,tag:afStudio.ModelNode.DATA_SOURCE,properties:[{name:"type",type:"valueType",required:true},{name:"className",type:"token"},{name:"modelName",type:"token"},{name:"lister",type:"boolean",defaultValue:false},{name:"dataLoadedHandler",type:"token"}],nodeTypes:[{name:afStudio.ModelNode.CLASS,required:true},afStudio.ModelNode.METHOD]});afStudio.model.widget.Window=Ext.extend(afStudio.model.Node,{tag:afStudio.ModelNode.WINDOW,_content:null,properties:[{name:"title",type:"token",required:true},{name:"component",type:"internalUriType",required:true},{name:"className",type:"token",required:true},{name:"methodName",type:"token",required:true},{name:"width",type:"positiveInteger",defaultValue:500},{name:"iconCls",type:"token"}]});afStudio.model.widget.Confirm=Ext.extend(afStudio.model.Node,{id:afStudio.ModelNode.CONFIRM,tag:afStudio.ModelNode.CONFIRM,_content:null,properties:[{name:"url",type:"internalUriType",required:true},{name:"permissions",type:"permissionType",defaultValue:"*"},{name:"title",type:"token",defaultValue:"Confirmation"}]});afStudio.model.widget.Column=Ext.extend(afStudio.model.Node,{tag:afStudio.ModelNode.COLUMN,_content:null,properties:[{name:"name",type:"dbNameType",required:true},{name:"label",type:"token",required:true},{name:"qtip",type:"boolean",defaultValue:false},{name:"help",type:"token"},{name:"width",type:"positiveInteger"},{name:"editable",type:"boolean",defaultValue:false},{name:"sortable",type:"boolean",defaultValue:true},{name:"resizable",type:"boolean",defaultValue:true},{name:"style",type:"token"},{name:"groupField",type:"boolean"},{name:"sort",type:"sortType"},{name:"hidden",type:"boolean",defaultValue:false},{name:"hideable",type:"boolean",defaultValue:true},{name:"align",type:"alignType",defaultValue:"left"},{name:"filter",type:"arrayType"},{name:"permissions",type:"permissionType",defaultValue:"*"},{name:"link",type:"boolean",defaultValue:false}],defaultDefinition:{attributes:{name:"Column",label:"Column"}},toString:function(){var a=new Ext.XTemplate('[model.Node: "{tag}", ID: "{id}", properties: {[this.toJson(values.properties.map)]}]',{compiled:true,disableFormats:true,toJson:function(b){return Ext.encode({"name":b.name.value,"label":b.label.value})}});return a.apply(this)}});afStudio.model.widget.Set=Ext.extend(afStudio.model.Node,{tag:afStudio.ModelNode.SET,properties:[{name:"title",type:"token",required:true},{name:"tabtitle",type:"token"},{name:"columns",type:"positiveInteger",defaultValue:1},{name:"float",type:"boolean",defaultValue:false},{name:"collapsed",type:"boolean",defaultValue:false},{name:"tabHeight",type:"positiveInteger",defaultValue:225},{name:"iconCls",type:"token"},{name:"icon",type:"absoluteUriType"}],defaultDefinition:{attributes:{title:"Field-Set"}},nodeTypes:[{name:afStudio.ModelNode.REF,required:true,hasMany:true,unique:"to"}]});afStudio.model.widget.Validator=Ext.extend(afStudio.model.Node,{tag:afStudio.ModelNode.VALIDATOR,properties:[{name:"name",type:"token",required:true},{name:"permissions",type:"permissionType",defaultValue:"*"}],nodeTypes:[{name:afStudio.ModelNode.PARAM,hasMany:true,unique:"name"}]});afStudio.model.widget.Link=Ext.extend(afStudio.model.Node,{tag:afStudio.ModelNode.LINK,_content:null,properties:[{name:"name",type:"QName",required:true},{name:"action",type:"combinedUriType",required:true},{name:"text",type:"token",required:true},{name:"type",type:"token",readOnly:true,defaultValue:"link"},{name:"permissions",type:"permissionType",defaultValue:"*"}]});afStudio.model.widget.Handler=Ext.extend(afStudio.model.Node,{tag:afStudio.ModelNode.HANDLER,properties:[{name:"action",type:"token",required:true},{name:"type",type:"handlerType",defaultValue:"click"},{name:"is_script",type:"boolean",defaultValue:true}],defaultDefinition:{attributes:{action:"i:handler"}},nodeTypes:[{name:afStudio.ModelNode.PARAM,hasMany:true,unique:"name"}]});afStudio.model.widget.Action=Ext.extend(afStudio.model.Node,{tag:afStudio.ModelNode.ACTION,_content:null,properties:[{name:"name",type:"token",required:true},{name:"url",type:"combinedUriType",required:true},{name:"condition",type:"token"},{name:"script",type:"token"},{name:"params",type:"token"},{name:"icon",type:"absoluteUriType"},{name:"iconCls",type:"token"},{name:"tooltip",type:"token"},{name:"text",type:"token"},{name:"style",type:"token"},{name:"post",type:"boolean",defaultValue:false},{name:"forceSelection",type:"boolean"},{name:"confirmMsg",type:"string"},{name:"confirm",type:"boolean"},{name:"updater",type:"boolean",defaultValue:false},{name:"popup",type:"boolean",defaultValue:false},{name:"popupSettings",type:"token"},{name:"permissions",type:"permissionType",defaultValue:"*"}],defaultDefinition:{attributes:{name:"i:action",url:"#"}},nodeTypes:[{name:afStudio.ModelNode.HANDLER,hasMany:true}],toString:function(){var a=new Ext.XTemplate('[model.Node: "{tag}", ID: "{id}", properties: {[this.toJson(values.properties.map)]}]',{compiled:true,disableFormats:true,toJson:function(b){return Ext.encode({"name":b.name.value,"url":b.url.value})}});return a.apply(this)}});afStudio.model.widget.Ref=Ext.extend(afStudio.model.TypedNode,{tag:afStudio.ModelNode.REF,_content:null,properties:[{name:"to",type:"QName",required:true},{name:"break",type:"boolean",defaultValue:false},{name:"group",type:"boolean",defaultValue:false},{name:"title",type:"token"},{name:"tip",type:"token"},{name:"json",type:"token"}],wizardProperties:[{name:"as",type:"token"}],onBeforeModelPropertyChanged:function(e,b,k){var m=this.getOwnerTree();if(m&&b=="to"){var j=afStudio.ModelNode,a=m.root,g=a.getImmediateModelNode(j.FIELDS),d=a.getImmediateModelNode(j.GROUPING);if(!Ext.isEmpty(k)){var f=g.filterChildrenBy(function(o){return o.tag==j.FIELD&&o.getPropertyValue("name")==k});if(Ext.isEmpty(f)){afStudio.Msg.warning(String.format("Widget Designer - {0} node",j.REF),String.format("Incorrect <u>to</u> property. <br/> Field with <u>name</u> = <b>{0}</b> does not exists.",k));return false}var c=d.findChild(j.REF,"to",k,true);if(c){afStudio.Msg.warning(String.format("Widget Designer - {0} node",j.REF),String.format("Field <b>{0}</b> is already associated with another ref node. <br /> Please use another field name.",k));return false}}}return true}});afStudio.model.widget.Field=Ext.extend(afStudio.model.Node,{tag:afStudio.ModelNode.FIELD,properties:[{name:"name",type:"token",required:true},{name:"label",type:"token",required:true},{name:"type",type:"inputType",defaultValue:"input"},{name:"selected",type:"token"},{name:"state",type:"stateType",defaultValue:"editable"},{name:"value",type:"token"},{name:"style",type:"token"},{name:"width",type:"positiveInteger"},{name:"height",type:"positiveInteger"},{name:"checked",type:"boolean"},{name:"rich",type:"boolean",defaultValue:false},{name:"content",type:"token"},{name:"module",type:"token"},{name:"action",type:"token"},{name:"fromLegend",type:"token",defaultValue:"Options"},{name:"toLegend",type:"token",defaultValue:"Selected"},{name:"dateFormat",type:"token"},{name:"timeFormat",type:"token"},{name:"clear",type:"boolean",defaultValue:true},{name:"session",type:"boolean",defaultValue:false},{name:"disabled",type:"boolean",defaultValue:false},{name:"plugin",type:"token",defaultValue:"*"},{name:"url",type:"internalUriType"},{name:"vtype",type:"token"},{name:"minChars",type:"positiveInteger"},{name:"permissions",type:"permissionType",defaultValue:"*"}],defaultDefinition:{attributes:{name:"field",label:"field"}},nodeTypes:[{name:afStudio.ModelNode.VALUE},{name:afStudio.ModelNode.TOOLTIP},{name:afStudio.ModelNode.HELP},{name:afStudio.ModelNode.VALIDATOR,hasMany:true,unique:"name"},{name:afStudio.ModelNode.HANDLER,hasMany:true},{name:afStudio.ModelNode.TRIGGER},{name:afStudio.ModelNode.WINDOW},{name:afStudio.ModelNode.IF}],onModelPropertyChanged:function(f,c,j,b){var k=this.getOwnerTree();if(k&&c=="name"){var g=afStudio.ModelNode,a=k.root,e=a.getImmediateModelNode(g.GROUPING);if(e){var d=e.findChild(g.REF,"to",b,true);if(d){if(Ext.isEmpty(j)){afStudio.Msg.warning(String.format("Widget Designer - {0} node",g.FIELD),String.format('Field "{0}" is grouped and must have <b>name</b> property.',b));f.setProperty(c,b);return false}else{d.setProperty("to",j)}}}}return true}});afStudio.model.widget.Trigger=Ext.extend(afStudio.model.Node,{tag:afStudio.ModelNode.TRIGGER,_content:null,properties:[{name:"text",type:"token"},{name:"icon",type:"absoluteUriType",defaultValue:"/images/famfamfam/cancel.png"},{name:"permissions",type:"permissionType",defaultValue:"*"}]});Ext.ns("afStudio.definition.error");afStudio.definition.error.DefinitionError=Ext.extend(Ext.Error,{name:"afStudio.definition.DefinitionError",lang:{"create-entity":"Entity was not created"}});Ext.ns("afStudio.definition");afStudio.definition.DataDefinition=Ext.extend(Ext.util.Observable,{data:null,constructor:function(a){a=a||{};this.data=a.data||null;this.addEvents("entityRemove","entityAdd");this.listeners=a.listeners;afStudio.definition.DataDefinition.superclass.constructor.call(this)},getEntity:Ext.emptyFn,removeEntity:Ext.emptyFn,addEntity:Ext.emptyFn,equal:function(a,b){},getData:function(){return this.out(this.data)},setData:function(a){this.data=a;return this},out:function(b,a){return this.cloneObj(b,a)},cloneObj:function(d,e){if(d===null||d===undefined){return d}var c=Object.prototype.toString.call(d);if(c==="[object Date]"){return new Date(d.getTime())}var b,f,a;if(c==="[object Array]"){b=d.length;f=[];while(b--){f[b]=this.cloneObj(d[b],e)}}else{if(c==="[object Object]"&&d.constructor===Object){f={};for(a in d){f[a]=this.cloneObj(d[a],e)}}}if(e===true&&Ext.isBoolean(d)){d=String(d)}return f||d}});Ext.ns("afStudio.definition");afStudio.definition.ViewDefinition=Ext.extend(afStudio.definition.DataDefinition,{getEntity:function(a){var b=this.getEntityObj(a).entity;return this.out(b)},getDataForSave:function(){var a=this.out(this.data,true);return a},setEntityAttribute:function(c,a,j){var e=this.getEntityObj(c),k=e.parent,b=e.key,d=e.idx,f=e.entity;var g=c.getProperty(a);if(a!="_content"&&Ext.isEmpty(j)){this.removeEntityAttribute(f,a);return}if(!Ext.isObject(f)){if(c.getProperties().length>0||c.nodeTypes.length>0){f=k[b]={_content:f}}}if(a=="_content"){if(Ext.isObject(f)){f._content=j}else{if(d!=null){k[b][d]=j}else{k[b]=j}}}else{if(!f.attributes){f.attributes={}}f.attributes[a]=j}},removeEntityAttribute:function(b,a){if(b.attributes){delete b.attributes[a];if(this.isEmptyEntityAttributes(b)){delete b.attributes}}},isEmptyEntityAttributes:function(a){for(var b in a.attributes){return false}return true},addEntity:function(c,e){var g=this.getEntityObj(c),a=g.parent,d=g.key,f=g.entity;var b=this.createEntity(e);this.addEntDefinition(f,e.tag,b)},insertBeforeEntity:function(g,b,e,j){var f=this.getEntityObj(e,j),k=f.parent,a=f.key,c=f.idx;if(!b.isSimilarNode(e)){this.addEntity(g,b);return}var d=this.createEntity(b);if(c!=null){k[a].splice(c,0,d)}},removeEntity:function(c,g){var f=this.getEntityObj(c,g),a=f.parent,b=f.key,e=f.idx,d=f.entity;if(e!=null){a[b].splice(e,1);Ext.isEmpty(a[b])?delete a[b]:null}else{delete a[b]}this.fireEvent("entityRemove",d)},createEntity:function(b){var e=b.getPropertiesHash(),f=b.getNodeData()?b.getNodeData().getValue():null,a=null;var d=true;for(var c in e){d=false;break}if(b.getProperties().length>0||b.nodeTypes.length>0){a={}}if(e&&!d){a={attributes:{}};Ext.apply(a.attributes,e)}if(f!=null){if(Ext.isObject(a)){a._content=f}else{a=f}}if(b.hasChildNodes()){a=!Ext.isObject(a)?{_content:a}:a;b.eachChild(function(j){var g=this.createEntity(j);this.addEntDefinition(a,j.tag,g)},this)}return a},getEntityObj:function(f,k){var e=f.getOwnerTree(),t=f.getPathSeparator(),s=f.getPath().split(t);s.splice(0,2);if(s.length==0){return{parent:null,entity:this.data,key:"root",idx:null}}var p,o,q=null;p=o=this.data;for(var j=0,g=s.length;j<g;j++){var d=s[j],c=d.replace(/-\d+$/,"");p=o;var m=o[c];if(Ext.isDefined(m)){if(Ext.isArray(m)){var b=e.getNodeById(d);if(!b){throw new Ext.Error(String.format('ViewDefinition. Model does not contain Node {0} with ID = "{1}"',f,d))}q=this.searchEntityIndex(o,c,b,(j==g-1)?k:null);if(q==null){throw new Ext.Error(String.format("ViewDefinition. Cannot get model node's entity, node: {0}, path: {1}",f,s))}o=m[q]}else{o=m}}else{o=null;break}}var a=(s[s.length-1]).replace(/-\d+$/,"");var r={parent:p,entity:o,key:a,idx:Ext.isArray(p[a])?q:null};return r},equal:function(a,c){var d=c.getPropertiesHash(),e=c.getNodeData()?c.getNodeData().getValue():null;var b=true;if(Ext.isObject(a)){Ext.iterate(a.attributes,function(g,f){return(!Ext.isEmpty(f)&&d[g]!==f)?(b=false):true});if(b&&Ext.isDefined(a._content)&&e!=a._content){b=false}}else{b=(a==e)}return b},searchEntityIndex:function(k,n,b,m){var j=k[n],f=b.parentNode,d=f.indexOf(b);d=Ext.isEmpty(m)?d:m;if(d==-1){return null}if(d>(j.length-1)){var e=0;Ext.iterate(k,function(q,p,r){if(["attributes","_content",n].indexOf(q)==-1){e+=!Ext.isArray(p)?1:p.length}});d-=e}var a;for(var c=0,g=j.length;c<g;c++){if(this.equal(j[c],b)&&d==c){a=c;break}}return Ext.isNumber(a)?a:null},addEntDefinition:function(c,a,b){var d=c[a];if(Ext.isDefined(d)){if(!Ext.isArray(d)){c[a]=[d]}c[a].push(b)}else{c[a]=b}}});Ext.ns("afStudio.controller.error");afStudio.controller.error.ControllerError=Ext.extend(Ext.Error,{name:"afStudio.controller.ControllerError",lang:{"widget-cfg-incorrect":"Widget configuration object is not correct.","init-view":"View initialization error.","view-constructor":"View constructor is not a Function."}});Ext.ns("afStudio.controller");afStudio.controller.BaseController=Ext.extend(Ext.util.Observable,{viewDefinition:null,pathSeparator:"/",root:null,ready:false,constructor:function(a){a=a||{};this.id=a.id||this.id;if(!this.id){this.id=Ext.id(null,"view-controller-")}if(a.url){if(Ext.isObject(a.url)){this.url=Ext.apply(Ext.isObject(this.url)?this.url:{},a.url)}else{this.url=a.url}}if(a.viewDefinition){this.viewDefinition=new afStudio.definition.ViewDefinition({data:a.viewDefinition})}else{this.viewDefinition=new afStudio.definition.ViewDefinition()}this.views=a.views||{};this.nodeHash={};this.addEvents("beforeModelNodeAppend","modelNodeAppend","beforeModelNodeRemove","modelNodeRemove","beforeModelNodeMove","modelNodeMove","beforeModelNodeInsert","modelNodeInsert","beforeModelPropertyChanged","modelPropertyChanged","beforeModelNodeCreated","modelNodeCreated","modelNodeSelect","modelReconfigure","ready","beforeLoadViewDefinition","loadViewDefinition","beforeSaveViewDefinition","saveViewDefinition");if(a.listeners){this.listeners=a.listeners}afStudio.controller.BaseController.superclass.constructor.call(this)},run:function(){if(!this.viewDefinition.getData()){this.loadViewDefinition()}else{this.initController()}},initController:function(){this.initModel();this.initView();this.ready=true;this.fireEvent("ready",this)},isReady:function(){return this.ready},getViewDefinition:function(){return this.viewDefinition},getUrl:function(b,c){var a=this.url;a=Ext.isObject(a)?a[b]:a;if(a){return c?Ext.urlAppend(a,Ext.urlEncode(c)):a}return null},getView:function(a){return this.views[a]},loadViewDefinition:function(c){var a=this,b=this.getUrl("read");c=Ext.isObject(c)?c:null;if(this.fireEvent("beforeLoadViewDefinition")){afStudio.xhr.executeAction({url:b,params:c,mask:{region:"center"},showNoteOnSuccess:false,scope:a,run:function(d,e){this.viewDefinition.setData(d.data);this.fireEvent("loadViewDefinition",this.viewDefinition);this.initController()}})}},saveView:function(a){this.saveViewDefinition(a)},saveViewDefinition:function(d){var a=this,c=this.getUrl("save"),b=this.viewDefinition.getDataForSave();d=Ext.apply(d||{},{data:Ext.util.JSON.encode(b),createNewWidget:false});if(this.fireEvent("beforeSaveViewDefinition",b)){afStudio.xhr.executeAction({url:c,params:d,mask:{msg:"Processing...",region:"center"},scope:a,run:function(e,f){this.fireEvent("saveViewDefinition",b)}})}},initModel:function(){var b=this.viewDefinition.getData();var a=new afStudio.model.Root({definition:b});this.registerModel(a);this.initModelEvents()},initView:function(){Ext.iterate(this.views,function(c,b,a){if(!Ext.isFunction(b.view)){throw new afStudio.controller.error.ControllerError("view-constructor")}this.registerView(c,b.view,b.cfg?b.cfg:{})},this)},initModelEvents:function(){var a=this;a.on({scope:a,modelNodeAppend:function(e,c,d,b){afStudio.Logger.info("@controller modelNodeAppend",c,d,b);this.viewDefinition.addEntity(c,d);afStudio.Logger.info("definition",this.viewDefinition.getData())},modelNodeInsert:function(e,c,d,b,f){afStudio.Logger.info("@controller modelNodeInsert",c,d,b);this.viewDefinition.insertBeforeEntity(c,d,b,f);afStudio.Logger.info("definition",this.viewDefinition.getData())},modelNodeRemove:function(d,b,c,e){afStudio.Logger.info("@controller modelNodeRemove",b,c);this.viewDefinition.removeEntity(c,e);afStudio.Logger.info("definition",this.viewDefinition.getData())},beforeModelPropertyChanged:function(c,d,b){afStudio.Logger.info("@controller beforeModelPropertyChanged",c,d,b);if(d!="structure"){this.viewDefinition.setEntityAttribute(c,d,b)}afStudio.Logger.info("definition",this.viewDefinition.getData())}})},proxyNodeEvent:function(){return this.fireEvent.apply(this,arguments)},getRootNode:function(){return this.root},registerModel:function(a){this.root=a;a.isRoot=true;a.setOwnerTree(this);return a},registerView:function(d,b,a){var c=this;a=Ext.apply(a||{},{controller:c});b=c.views[d]=new b(a);b.relayEvents(c,["modelNodeAppend","modelNodeInsert","modelNodeRemove","modelNodeMove","modelNodeSelect","modelPropertyChanged","modelReconfigure"])},validateModel:function(){return this.root.isValid()},getNodeById:function(a){return this.nodeHash[a]},registerNode:function(a){this.nodeHash[a.id]=a},unregisterNode:function(a){delete this.nodeHash[a.id]},toString:function(){return"[BaseController"+(this.id?" "+this.id:"")+"]"},selectModelNode:function(b,a){afStudio.Logger.info("@controller selectModelNode",b);b=Ext.isString(b)?this.getNodeById(b):b;if(!b){return}this.fireEvent("modelNodeSelect",b,a?a:undefined)},destroy:function(){Ext.iterate(this.views,function(b,a){Ext.destroy(a)});this.views=null;this.root=this.viewDefinition=this.nodeHash=null}});afStudio.controller.ViewController=Ext.extend(afStudio.controller.BaseController,{url:{read:afStudioWSUrls.widgetGetDefinitionUrl,save:afStudioWSUrls.widgetSaveDefinitionUrl},constructor:function(a){a=a||{};afStudio.controller.ViewController.superclass.constructor.call(this,a);if(!a.widget&&!Ext.isObject(a.widget)){throw new afStudio.controller.error.ControllerError("widget-cfg-incorrect")}this.widget=a.widget;this.setupUrls();this.setupViews()},setupUrls:function(){this.url={read:this.getUrl("read",{uri:this.widget.uri}),save:this.getUrl("save",{uri:this.widget.uri})}},setupViews:function(){Ext.apply(this.views,{inspectorTree:{view:afStudio.view.inspector.InspectorTree,cfg:{border:false}},propertyGrid:{view:afStudio.view.property.PropertyGrid,cfg:{border:false}}})},getModelType:function(){var a=this.getRootNode();return a.getModelType()},getWidget:function(){return this.widget},loadViewDefinition:function(a){a=Ext.copyTo(a||{},this.widget,"place, placeType");afStudio.controller.ViewController.superclass.loadViewDefinition.apply(this,[a])},saveView:function(a){a=Ext.copyTo(a||{},this.widget,"uri, place, placeType");a.widgetType=this.getModelType();afStudio.controller.ViewController.superclass.saveView.apply(this,[a])}});Ext.ns("afStudio.view.inspector");afStudio.view.inspector.sorter={};S=afStudio.view.inspector.sorter;N=afStudio.ModelNode;S[N.TITLE]=1;S[N.CONFIRM]=4;S[N.PARAMS]=5;S[N.ROW_ACTIONS]=8;S[N.FIELDS]=12;S[N.ACTIONS]=16;S[N.MORE_ACTIONS]=20;S[N.DATA_SOURCE]=6;S[N.DATA_STORE]=6;S[N.GROUPING]=28;S[N.DESCRIPTION]=32;S[N.ALTERNATE_DESCRIPTIONS]=34;S[N.MENU]=2;S[N.SCRIPTS]=3;S[N.FIELD]=100;S[N.COLUMN]=100;S[N.BUTTON]=101;S[N.LINK]=102;S[N.RADIO_GROUP]=103;S[N.ACTION]=110;S[N.IF]=111;S[N.SET]=104;S[N.REF]=105;S[N.PARAM]=130;S[N.AREA]=10;S[N.EXTRA_HELP]=36;S[N.OPTIONS]=5;S[N.CLASS]=108;S[N.METHOD]=109;S[N.VALUE]=140;S[N.TOOLTIP]=142;S[N.HELP]=144;S[N.VALIDATOR]=146;S[N.HANDLER]=148;S[N.WINDOW]=150;S[N.TRIGGER]=152;delete N;delete S;afStudio.view.inspector.InspectorSorter=Ext.extend(Ext.tree.TreeSorter,{constructor:function(a,b){afStudio.view.inspector.InspectorSorter.superclass.constructor.apply(this,[a,b]);var c=this.sortType;this.sortFn=function(k,j){var e=k.modelNode,d=j.modelNode;var o=c(e.tag),n=c(d.tag);if(o<n){return -1}else{if(o>n){return 1}else{var m=e.parentNode,g=m.indexOf(e),f=m.indexOf(d);return g-f}}}},sortType:function(b){var a=afStudio.view.inspector.sorter[b];return Ext.isDefined(a)?a:500}});Ext.ns("afStudio.view.inspector");afStudio.view.inspector.InspectorTree=Ext.extend(Ext.tree.TreePanel,{autoScroll:true,_beforeInitComponent:function(){var c=this.controller.getRootNode(),b=this.controller.widget;this.enableDD=true;this.root={expanded:true,modelNode:c,properties:{name:String.format("{0} ({1}-{2})",b.uri,b.place,b.placeType)}};var a=this.loader;if(!a){a=new afStudio.view.inspector.InspectorLoader()}else{if(Ext.isObject(a)&&!a.load){a=new afStudio.view.inspector.InspectorLoader(a)}}this.loader=a},initComponent:function(){this._beforeInitComponent();afStudio.view.inspector.InspectorTree.superclass.initComponent.apply(this,arguments);this._afterInitComponent()},_afterInitComponent:function(){var a=this;this.treeSorter=new afStudio.view.inspector.InspectorSorter(this)},expandPathByModelNode:function(g,j){var e=g.getPath();if(Ext.isEmpty(e)){if(j){j(false,undefined)}return}var c=e.split(this.pathSeparator),b=this.root;if(b.modelNode.id!=c[1]){if(j){j(false,null)}return}var a=1;var d=function(){if(++a==c.length){if(j){j(true,b)}return}var f=b.findChildByAssociatedModel(c[a]);if(!f){if(j){j(false,b)}return}b=f;f.expand(false,false,d)};b.expand(false,false,d)},getCmpByModel:function(c){var a=this.getRootNode(),b;b=a.findChildBy(function(d){return d.modelNode==c},null,true);if(!b){this.expandPathByModelNode(c,function(d,e){if(d===true){b=e}})}return b},initEvents:function(){afStudio.view.inspector.InspectorTree.superclass.initEvents.apply(this,arguments);var a=this,b=a.getSelectionModel();a.on({scope:a,modelNodeInsert:a.onModelNodeInsert,modelNodeAppend:a.onModelNodeAppend,modelNodeRemove:a.onModelNodeRemove,modelNodeSelect:a.onModelNodeSelect,modelPropertyChanged:a.onModelPropertyChanged,modelReconfigure:a.onModelNodeReconfigure,contextmenu:a.onNodeContextMenu,nodedragover:a.onNodeDragOver,nodedrop:a.onNodeDrop});a.mon(b,{selectionchange:a.onNodeSelectionChange,scope:a})},onModelNodeSelect:function(c,b){if(b!=this){afStudio.Logger.info("@view [InspectorTree] onModelNodeSelect");var a=this.getCmpByModel(c);if(!a.isSelected()){this.selectPath(a.getPath())}}},onModelNodeAppend:function(e,c,d,b){afStudio.Logger.info('@view [InspectorTree] "modelNodeAppend"');var a=this.getCmpByModel(c);a.reload(function(){var f=this.getCmpByModel(d);f.select()},this)},onModelNodeInsert:function(e,c,d,b){afStudio.Logger.info('@view [InspectorTree] "modelNodeInsert"');var a=this.getCmpByModel(c);a.reload(function(){var f=this.getCmpByModel(d);f.select()},this)},onModelNodeRemove:function(d,b,c){afStudio.Logger.info('@view [InspectorTree] "modelNodeRemove"');var a=this.getCmpByModel(c);if(a){a.remove(true)}},onModelPropertyChanged:function(c,d,b){afStudio.Logger.info('@view [InspectorTree] "modelPropertyChanged"',c,d,b);var a=this.getCmpByModel(c);if(a.labelProperty==d){a.setText(Ext.value(b,"(none)"))}},onModelNodeReconfigure:function(b){afStudio.Logger.info('@view [InspectorTree] "reconfigure"',b);var a=this.getCmpByModel(b.parentNode?b.parentNode:b);a.reload(function(){var c=this.getCmpByModel(b);c.select()},this)},onNodeContextMenu:function(a,b){var c=a.contextMenu;a.select();if(c){c.contextNode=a;c.showAt(b.getXY())}},onNodeDragOver:function(f){var e=f.dropNode,d=f.point,c=f.target,b=e.modelNode,a=c.modelNode;if(d=="append"||(b.tag!=a.tag)||(b.parentNode!=a.parentNode)){return false}},onNodeDrop:function(d){var c=d.dropNode.modelNode,b=d.point,a=d.target.modelNode;if(b=="above"){a.parentNode.insertBefore(c,a)}else{if(b=="below"){a.parentNode.insertBefore(c,a.nextSibling)}}},onNodeSelectionChange:function(b,a){if(a){afStudio.Logger.info('@view [InspectorTree] "selectModelNode"',a.modelNode);this.controller.selectModelNode(a.modelNode,this)}}});afStudio.view.inspector.nodeType={};Ext.reg("inspector.inspectorTree",afStudio.view.inspector.InspectorTree);Ext.ns("afStudio.view.inspector");afStudio.view.inspector.InspectorLoader=Ext.extend(Ext.util.Observable,{clearOnLoad:true,uiProviders:{},constructor:function(a){Ext.apply(this,a);this.addEvents("beforeload","load");afStudio.view.inspector.InspectorLoader.superclass.constructor.call(this)},load:function(b,c,a){if(this.clearOnLoad){while(b.firstChild){b.removeChild(b.firstChild)}}this.processData(b,c,a||b);this.runCallback(c,a||b,[b])},getModelProperties:function(a){return a.getPropertiesHash()},processData:function(a){if(this.fireEvent("beforeload",this,a)!==false){var b=a.modelNode;if(b instanceof afStudio.model.Node){a.beginUpdate();Ext.each(b.childNodes,function(d){var e=d.nodeTypes.length>0?false:true;var c={modelNode:d,leaf:e,properties:this.getModelProperties(d)};var f=this.createNode(c);if(f){a.appendChild(f)}},this);a.endUpdate();this.fireEvent("load",this,a)}else{throw new afStudio.view.inspector.error.LoaderError("incorrect-model")}}},createNode:function(attr){if(this.baseAttrs){Ext.applyIf(attr,this.baseAttrs)}if(this.applyLoader!==false&&!attr.loader){attr.loader=this}if(Ext.isString(attr.uiProvider)){attr.uiProvider=this.uiProviders[attr.uiProvider]||eval(attr.uiProvider)}var nodeType=attr.modelNode.tag?this.resolveNodeType(attr.modelNode.tag):null;if(nodeType){return new nodeType(attr)}else{return attr.leaf?new afStudio.view.inspector.TreeNode(attr):new afStudio.view.inspector.ContainerNode(attr)}},resolveNodeType:function(b){var c=String(b).trim(),a=[afStudio.view.inspector.nodeType];c=/^i:(\w+)/i.test(c)?c.replace(/^i:(\w+)/i,function(e,d){return d.ucfirst()}):c.ucfirst();c+="Node";Ext.iterate(a,function(d){if(Ext.isFunction(d[c])){c=d[c];return false}});return Ext.isFunction(c)?c:null},runCallback:function(a,c,b){if(Ext.isFunction(a)){a.apply(c,b)}},destroy:function(){this.purgeListeners()}});Ext.ns("afStudio.view.inspector.error");afStudio.view.inspector.error.LoaderError=Ext.extend(Ext.Error,{name:"afStudio.view.inspector.error.LoaderError",lang:{"incorrect-model":"Assosiated with tree node model is not correct."}});afStudio.view.inspector.TreeNode=function(a){a=a||{};if(a.modelNode){this.modelNode=a.modelNode;delete a.modelNode}this.properties=a.properties;delete a.properties;this.initNode(a);afStudio.view.inspector.TreeNode.superclass.constructor.call(this,a);this.resolveNodeText();this.initContextMenu()};afStudio.view.inspector.TreeNode.deleteNodeCxtText="Delete",afStudio.view.inspector.TreeNode.addNodeCxtText="Add",Ext.extend(afStudio.view.inspector.TreeNode,Ext.tree.TreeNode,{labelProperty:"name",contextMenu:new Ext.menu.Menu({items:[{itemId:"delete",text:afStudio.view.inspector.TreeNode.deleteNodeCxtText,iconCls:"afs-icon-delete"}],listeners:{itemclick:function(c){var b=c.parentMenu.contextNode,a=b.getOwnerTree();switch(c.itemId){case"delete":b.removeModelNode();break}}}}),initNode:function(a){},resolveNodeText:function(){var a=this.attributes,c=this.properties,b=this.labelProperty;if(Ext.isDefined(c[b])){this.text=a.text=c[b]}else{this.text=a.text=this.modelNode.tag}},initContextMenu:function(){var a=this.modelNode;if(a.isRequired()&&!a.hasMany()){this.contextMenu=null}},removeModelNode:function(){this.modelNode.remove(true)},findChildByAssociatedModel:function(b,a){return this.findChildBy(function(){return this.modelNode.id==(Ext.isString(b)?b:b.id)},null,a)}});afStudio.view.inspector.nodeType.node=afStudio.view.inspector.TreeNode;afStudio.view.inspector.ContainerNode=function(a){this.loaded=a&&a.loaded===true;this.loading=false;afStudio.view.inspector.ContainerNode.superclass.constructor.apply(this,arguments);this.addEvents("beforeload","load")};afStudio.view.inspector.ContainerNode.deleteAllNodeCxtText="Delete all children";Ext.extend(afStudio.view.inspector.ContainerNode,afStudio.view.inspector.TreeNode,{initContextMenu:function(){var g=afStudio.view.inspector;var e=this,f=this.modelNode,a=f.nodeTypes,j=g.TreeNode.addNodeCxtText,c=g.TreeNode.deleteNodeCxtText,d=g.ContainerNode.deleteAllNodeCxtText,k=[];Ext.iterate(a,function(p,m){var o=Ext.isObject(p)?p.name:p;k[m]={text:o,node:o,controll:"add"}});if(k.length>1){k=[{text:j,iconCls:"icon-add",menu:{items:k,listeners:{itemclick:function(m){switch(m.controll){case"add":e.addModelNode(m.node);break}}}}}]}else{k[0].itemId=k[0].controll;delete k[0].controll;k[0].text=String.format("{0} {1}",j,k[0].text);k[0].iconCls="icon-add"}if(!f.isRequired()||f.isRequired()&&f.hasMany()){k.push({itemId:"delete",text:c,iconCls:"afs-icon-delete"})}k.push({itemId:"deleteAllChildren",text:d,iconCls:"afs-icon-delete"});var b=new Ext.menu.Menu({ignoreParentClicks:true,items:k,listeners:{itemclick:function(n){var m=e;switch(n.itemId){case"add":m.addModelNode(n.node);break;case"deleteAllChildren":m.removeAllModelNodes();break;case"delete":m.removeAllModelNodes();m.removeModelNode();break}}}});this.contextMenu=b},addModelNode:function(a){var b=this.modelNode.createNode(a)},removeAllModelNodes:function(){this.modelNode.removeAll(true)},destroy:function(a){afStudio.view.inspector.ContainerNode.superclass.destroy.call(this,a);Ext.destroy(this.contextMenu)},expand:function(b,e,j,c){if(this.loading){var g;var d=function(){if(!this.loading){clearInterval(g);this.expand(b,e,j,c)}}.createDelegate(this);g=setInterval(d,200);return}if(!this.loaded){if(this.fireEvent("beforeload",this)===false){return}this.loading=true;this.ui.beforeLoad(this);var a=this.loader||this.attributes.loader||this.getOwnerTree().getLoader();if(a){a.load(this,this.loadComplete.createDelegate(this,[b,e,j,c]),this);return}}afStudio.view.inspector.ContainerNode.superclass.expand.call(this,b,e,j,c)},isLoading:function(){return this.loading},loadComplete:function(a,c,d,b){this.loading=false;this.loaded=true;this.ui.afterLoad(this);this.fireEvent("load",this);this.expand(a,c,d,b)},isLoaded:function(){return this.loaded},hasChildNodes:function(){if(!this.isLeaf()&&!this.loaded){return true}else{return afStudio.view.inspector.ContainerNode.superclass.hasChildNodes.call(this)}},reload:function(b,a){this.collapse(false,false);while(this.firstChild){this.removeChild(this.firstChild).destroy()}this.childrenRendered=false;this.loaded=false;if(this.isHiddenRoot()){this.expanded=false}this.expand(false,false,b,a)}});afStudio.view.inspector.nodeType.container=afStudio.view.inspector.ContainerNode;afStudio.view.inspector.FieldNode=Ext.extend(afStudio.view.inspector.ContainerNode,{initNode:function(a){a.iconCls="icon-field"}});afStudio.view.inspector.nodeType.FieldNode=afStudio.view.inspector.FieldNode;afStudio.view.inspector.HandlerNode=Ext.extend(afStudio.view.inspector.ContainerNode,{labelProperty:"action"});afStudio.view.inspector.nodeType.HandlerNode=afStudio.view.inspector.HandlerNode;afStudio.view.inspector.RootNode=Ext.extend(afStudio.view.inspector.ContainerNode,{initContextMenu:function(){var g=afStudio.view.inspector;var e=this,f=this.modelNode,a=f.nodeTypes,j=g.TreeNode.addNodeCxtText,c=g.TreeNode.deleteNodeCxtText,d=g.ContainerNode.deleteAllNodeCxtText,k=[];Ext.iterate(a,function(r,m){var q=r,p=false,o=false;if(Ext.isObject(r)){q=r.name;p=r.required==true?true:false;o=r.hasMany==true?true:false}if(!p||p&&o){k.push({text:q,node:q,controll:"add"})}});if(k.length>1){k=[{text:j,iconCls:"icon-add",menu:{items:k,listeners:{itemclick:function(m){switch(m.controll){case"add":e.addModelNode(m.node);break}}}}}]}else{k[0].itemId=k[0].controll;delete k[0].controll;k[0].text=String.format("{0} {1}",j,k[0].text);k[0].iconCls="icon-add"}var b=new Ext.menu.Menu({ignoreParentClicks:true,items:k,listeners:{itemclick:function(n){var m=e;switch(n.itemId){case"add":m.addModelNode(n.node);break}}}});this.contextMenu=b}});afStudio.view.inspector.nodeType.RootNode=afStudio.view.inspector.RootNode;afStudio.view.inspector.SetNode=Ext.extend(afStudio.view.inspector.ContainerNode,{labelProperty:"title"});afStudio.view.inspector.nodeType.SetNode=afStudio.view.inspector.SetNode;afStudio.view.inspector.MethodNode=Ext.extend(afStudio.view.inspector.ContainerNode,{labelProperty:"tag"});afStudio.view.inspector.nodeType.MethodNode=afStudio.view.inspector.MethodNode;afStudio.view.inspector.ColumnNode=Ext.extend(afStudio.view.inspector.TreeNode,{initNode:function(a){a.iconCls="icon-field"}});afStudio.view.inspector.nodeType.ColumnNode=afStudio.view.inspector.ColumnNode;afStudio.view.inspector.RefNode=Ext.extend(afStudio.view.inspector.TreeNode,{labelProperty:"to"});afStudio.view.inspector.nodeType.RefNode=afStudio.view.inspector.RefNode;Ext.ns("afStudio.view.property");afStudio.view.property.PropertyRecord=Ext.data.Record.create([{name:"name",type:"string"},"value","type",{name:"required",type:"boolean"},"defaultValue","readOnly"]);afStudio.view.property.PropertyStore=Ext.extend(Ext.grid.PropertyStore,{constructor:function(a,b){this.grid=a;this.store=new Ext.data.GroupingStore({recordType:afStudio.view.property.PropertyRecord,groupDir:"DESC",groupField:"required"});if(b){this.setSource(b)}Ext.util.Observable.constructor.call(this)},setSource:function(c){this.source=c;this.store.removeAll();var b=[];for(var a in c){if(this.isEditableProperty(c[a])){c[a].value=Ext.isDefined(c[a].value)?c[a].value:c[a].defaultValue;b.push(new afStudio.view.property.PropertyRecord(c[a],a))}}this.store.loadRecords({records:b},{},true)},isEditableProperty:function(b){var a=afStudio.data.Types,c=b.type;if(c){if(Ext.isString(c)&&a.getType(c)){return true}else{if(Ext.isObject(c)){return a.getType(c.type)?true:false}}}return false},setValue:function(c,b){var a=this.getRec(c);if(a){a.set("value",b);a.commit();this.source[c].value=b}}});Ext.ns("afStudio.view.property");afStudio.view.property.PropertyColumnModel=Ext.extend(Ext.grid.PropertyColumnModel,{requiredText:"Required",constructor:function(b,a){this.grid=b;Ext.grid.PropertyColumnModel.superclass.constructor.call(this,[{header:this.nameText,width:50,sortable:true,dataIndex:"name",id:"name",menuDisabled:true},{header:this.valueText,width:50,resizable:false,dataIndex:"value",id:"value",menuDisabled:true},{header:this.requiredText,resizable:false,dataIndex:"required",id:"required",menuDisabled:true,hidden:true}]);this.store=a;this.buildEditors();this.renderCellDelegate=this.renderCell.createDelegate(this);this.renderPropDelegate=this.renderProp.createDelegate(this)},buildEditors:function(){var c=afStudio.data.Types,f=Ext.grid,e={};for(var b in c){var d=c[b],a=d.type;if(Ext.isFunction(d)){continue}e[a]=new f.GridEditor(d.editor({style:"text-align: left;"}))}this.editors=e},getCellEditor:function(b,e){var d=this.store.getProperty(e),c=d.get("type"),a=c.type;if(d.get("readOnly")){return null}if(this.grid.customEditors[a]){return this.grid.customEditors[a]}if(this.editors[a]){return this.editors[a]}},renderProp:function(d,b,c){var a=afStudio.view.property.PropertyColumnModel.superclass.renderProp.apply(this,arguments);return c.get("required")?"<b>"+a+"</b>":a},renderCell:function(d,b,c){var a=this.grid.customRenderers[c.get("type")];if(a){return a.apply(this,arguments)}if(c.get("required")&&Ext.isEmpty(c.get("value"))){b.attr='style="background-color:#E6052A;"'}var e=d;if(Ext.isDate(d)){e=this.renderDate(d)}else{if(typeof d=="boolean"){e=this.renderBool(d)}}return Ext.util.Format.htmlEncode(e)}});Ext.ns("afStudio.view.property");afStudio.view.property.PropertyGrid=Ext.extend(Ext.grid.EditorGridPanel,{enableColumnMove:false,stripeRows:false,trackMouseOver:false,clicksToEdit:1,enableHdMenu:false,viewConfig:{forceFit:true},initComponent:function(){this.customRenderers=this.customRenderers||{};this.customEditors=this.customEditors||{};this.lastEditRow=null;var b=new afStudio.view.property.PropertyStore(this);this.propStore=b;var a=new afStudio.view.property.PropertyColumnModel(this,b);b.store.sort("name","ASC");this.cm=a;this.ds=b.store;this.view=new Ext.grid.GroupingView({forceFit:true,hideGroupedColumn:true,showGroupName:false,groupTextTpl:'{[values.gvalue == true ? "Mandatory" : "Optional"]}'});afStudio.view.property.PropertyGrid.superclass.initComponent.call(this,arguments)},initEvents:function(){afStudio.view.property.PropertyGrid.superclass.initEvents.call(this);var a=this;a.mon(a.selModel,{scope:a,beforecellselect:function(d,c,b){if(b===0){this.startEditing.defer(200,this,[c,1]);return false}}});a.mon(a.view,{scope:a,refresh:a.onViewRefresh});a.on({scope:a,modelNodeRemove:a.onModelNodeRemove,modelNodeSelect:a.onModelNodeSelect,modelPropertyChanged:a.onModelPropertyChanged})},onRender:function(){afStudio.view.property.PropertyGrid.superclass.onRender.apply(this,arguments);this.getGridEl().addClass("x-props-grid")},afterRender:function(){afStudio.view.property.PropertyGrid.superclass.afterRender.apply(this,arguments);if(this.source){this.setSource(this.source)}},onEditComplete:function(b,d,a){this.editing=false;this.lastActiveEditor=this.activeEditor;this.activeEditor=null;var c=b.record,j=this.colModel.getDataIndex(b.col);d=this.postEditValue(d,a,c,j);if(this.forceValidation===true||String(d)!==String(a)){var g=this.modelNode,f={grid:this,record:c,field:j,originalValue:a,value:d,row:b.row,column:b.col,modelNode:g,cancel:false};if(this.fireEvent("validateedit",f)!==false&&!f.cancel&&String(d)!==String(a)){if(c.id=="_content"){g.setNodeData(f.value)}else{g.setProperty(c.id,f.value)}delete f.cancel;this.fireEvent("afteredit",f)}}this.view.focusCell(b.row,b.col)},onModelNodeRemove:function(c,a,b){afStudio.Logger.info('@view [PropertyGrid] "modelNodeRemove"');if(this.modelNode==b){this.setSource({})}},onModelNodeSelect:function(b,a){afStudio.Logger.info('@view [PropertyGrid] "modelNodeSelect"');this.modelNode=b;this.setSource(b.getPropertiesSource())},onModelPropertyChanged:function(b,c,a){afStudio.Logger.info('@view [PropertyGrid] "modelPropertyChanged"');if(this.modelNode==b){this.setProperty(c,a);this.onViewRefresh(this.view)}},onViewRefresh:function(m){var b=this.getStore();for(var e=0,g=b.getCount();e<g;e++){var a=b.getAt(e),f=String.format("<b>{0}:</b> {1}",a.get("name"),a.get("value")),n=m.getRow(e),d=Ext.get(n).select(".x-grid3-cell-inner");for(var c=0,k=d.getCount();c<k;c++){Ext.QuickTips.register({target:d.item(c),text:f})}}},setSource:function(a){this.propStore.setSource(a)},hideMandatoryChecker:function(){var a=Ext.select('div[id$="gp-required-true-hd"]');if(a){a.setStyle({display:"none"})}},getSource:function(){return this.propStore.getSource()},setProperty:function(b,a){this.propStore.setValue(b,a)}});Ext.reg("property.propertyGrid",afStudio.view.property.PropertyGrid);Ext.ns("afStudio.wd");afStudio.wd.ModelInterface=(function(){return{NODES:afStudio.ModelNode,getModelNodeByPath:function(e){var j=this.controller;var g=Ext.isArray(e)?e:e.split(j.pathSeparator),a=this.controller.getRootNode(),f;for(var d=0,b=g.length;d<b;d++){f=a.findChildById(g[d]);f=!f?a.findChildById(g[d],false,true):f;if(!f){break}a=f}return f},getModelNode:function(a){var b=this.controller;if(Ext.isString(a)){a=(a.indexOf(b.pathSeparator)!=-1)?this.getModelNodeByPath(a):b.getNodeById(a)}return a},getModelNodeProperties:function(a){var a=this.getModelNode(a),b=a.getPropertiesHash(true);b[this.NODE_ID_MAPPER]=a.id;return b},getModelNodeProperty:function(a,b){var c=this.getModelNodeProperties(a);return c[b]},getModelNodeValue:function(b){var b=this.getModelNode(b),a={};a[this.NODE_VALUE_MAPPER]=b.getNodeDataValue();a[this.NODE_ID_MAPPER]=b.id;return a},getPropertyEditor:function(b,c,a){var a=a||{},d=b.getProperty(c);return d.type.editor(a)},isModelNodeExists:function(d,b){var e=this.controller,a=e.getRootNode();d=!Ext.isString(d)?d.id:d;return e.getNodeById(d)?true:(b?(a.findChildById(d,true,true)!=null?true:false):false)},getModelChildrenProperties:function(e,j,f){if(this.isModelNodeExists(e)){var e=this.getModelNode(e),b=Ext.isString(j)?j:j.tag;var d;if(Ext.isDefined(f)){d=e.filterChildrenBy(function(o){if(o.tag!=b){return false}var m=o.getPropertiesHash(true),k=true;if(Ext.isArray(f)){Ext.each(f,function(n){return k=(Ext.isEmpty(m[n])?false:true)})}else{if(Ext.isObject(f)){Ext.iterate(f,function(p,n){return k=(m[p]!=n?false:true)})}else{if(Ext.isFunction(f)){if(f.apply(this,[m])===false){k=false}}}}return k})}else{d=e.filterChildren(b)}var g=[];for(var c=0,a=d.length;c<a;c++){g[c]=this.getModelNodeProperties(d[c])}return g}return[]},isModelStatus:function(e,b,c){if(this.isModelNodeExists(e)){e=this.getModelNode(e);if(Ext.isFunction(b)){return b.call(c||this,e)}else{var a=true;for(var f in b){var d=e.getPropertyValue(f);if(d!=b[f]){a=false;break}}return a}}return false},getActions:function(){var a=this.NODES;return this.getModelChildrenProperties(a.ACTIONS,a.ACTION)},getMoreActions:function(){var a=this.NODES;return this.getModelChildrenProperties(a.MORE_ACTIONS,a.ACTION)}}})();Ext.ns("afStudio.wd");afStudio.wd.ModelMapper=(function(){return{NODE_ID_MAPPER:"_model_",NODE_VALUE_MAPPER:"value",getCmpByModel:function(b,c){var d=Ext.isString(b)?b:b.id,a=null;if(Ext.isDefined(c)){a=this.modelMapper[d+"#"+c]}if(Ext.isEmpty(a)){a=this.modelMapper[d]}if(a){return Ext.isFunction(a)?a():a}return null},getModelByCmp:function(c){var e=c[this.NODE_ID_MAPPER],b,d;var a=e.indexOf("#");if(a!=-1){d=e.substr(a+1);e=e.substring(0,a)}b=this.getModelNode(e);if(d){return[b,b.getPropertyValue(d)]}return b},mapCmpToModel:function(b,a){var c=Ext.isString(b)?b:b.id;this.modelMapper[c]=a},unmapCmpFromModel:function(a){a=Ext.isString(a)?a:a.id;delete this.modelMapper[a]},createMapper:function(b){var a=Array.prototype.slice.call(arguments,1);return b.createDelegate(this,a)}}})();Ext.ns("afStudio.wd");afStudio.wd.ModelReflector=(function(){return{EXEC_ADD:"add",EXEC_INSERT:"insert",EXEC_REMOVE:"remove",EXEC_UPDATE:"update",getExecutorToken:function(a){return a.replace(/^i:(\w+)/i,"$1").ucfirst()},correctExecutorLine:function(a,b,c,d){return a},getExecutor:function(c,d,e){var b=this.getExecutorToken(d.tag);b=this.correctExecutorLine(b,c,d,e);var a=String.format("execute{0}{1}{2}",c.ucfirst(),b,e?e.ucfirst():"");afStudio.Logger.info("@executor",a);return Ext.isFunction(this[a])?this[a].createDelegate(this):null}}})();Ext.ns("afStudio.wd.list");afStudio.wd.list.ListModelInterface=(function(){return{getColumns:function(){var a=this.NODES;return this.getModelChildrenProperties(a.FIELDS,a.COLUMN)},getRowActions:function(){var a=this.NODES;return this.getModelChildrenProperties(a.ROW_ACTIONS,a.ACTION)}}})();Ext.apply(afStudio.wd.list.ListModelInterface,afStudio.wd.ModelInterface);Ext.ns("afStudio.wd.list");afStudio.wd.list.ListModelReflector=(function(){return{correctExecutorLine:function(a,b,c,d){if(["Action","Description"].indexOf(a)!=-1){var e=this.getExecutorToken(c.parentNode.tag);a=e+a}return a},executeAddTitle:function(a){this.setHeaderTitle(a);this.header.show();if(this.ownerCt&&Ext.isFunction(this.ownerCt.doLayout)){this.ownerCt.doLayout()}},executeRemoveTitle:function(b,a){this.unmapCmpFromModel(b);this.hideHeader()},executeUpdateTitle_content:function(c,b,d,a){b.setTitle(a.trim()?a:"&#160;")},executeAddRootDescription:function(b){var a=this.getTopToolbar().getComponent("desc");a.show()},executeRemoveRootDescription:function(c,b){var a=this.getTopToolbar().getComponent("desc");a.hide();this.doLayout()},executeUpdateRootDescription_content:function(c,b,d,a){var b=this.getTopToolbar().getComponent("desc");b.get(0).setText(a.trim()?a:"&#160;")},hasCheckboxSelModel:function(){return this.selModel instanceof Ext.grid.CheckboxSelectionModel},setSelModel:function(a){Ext.destroy(this.sm);this.selModel=a;this.selModel.init(this)},executeAddColumn:function(d,b,e){var a=this.getColumnModel(),c=this.getModelNodeProperties(d),f=this.createColumn(c);b=!e&&this.hasCheckboxSelModel()?++b:b;a.config.splice(b,0,f);a.setConfig(a.config)},executeRemoveColumn:function(c,d){var b=this.getColumnModel(),a=d[1];this.unmapCmpFromModel(c);b.config.splice(a,1);b.setConfig(b.config)},executeInsertColumn:function(d,b,c){var a=c[1];this.executeAddColumn(d,a,true)},executeUpdateColumnLabel:function(d,e,f,c){var b=this.getColumnModel(),a=e[1];b.setColumnHeader(a,c)},executeUpdateColumnHidden:function(d,e,f,c){var b=this.getColumnModel(),a=e[1];b.setHidden(a,c)},executeUpdateColumnHideable:function(d,e,f,c){var b=this.getColumnModel(),a=e[1];b.config[a].hideable=c;b.setConfig(b.config)},executeUpdateColumnResizable:function(d,e,f,c){var b=this.getColumnModel(),a=e[1];b.config[a].fixed=!c;b.setConfig(b.config)},executeUpdateColumnWidth:function(d,e,f,c){var b=this.getColumnModel(),a=e[1];b.config[a].width=c;b.setConfig(b.config)},executeUpdateFieldsSelect:function(f,e,g,b){var a=this.getColumnModel();if(b){var c=new Ext.grid.CheckboxSelectionModel();this.setSelModel(c);a.config.unshift(c);a.setConfig(a.config)}else{var d=new Ext.grid.RowSelectionModel();this.setSelModel(d);a.config.shift();a.setConfig(a.config)}},executeUpdateFieldsExportable:function(c,b,d,a){a?b.show():b.hide();this.updateActionBarVisibilityState()},executeUpdateFieldsSelectable:function(e,d,f,a){var c=d[0],b=d[1];a?(c.enable(),b.enable()):(c.disable(),b.disable());this.updateActionBarVisibilityState()},executeUpdateFieldsExpandButton:function(c,b,d,a){a?b.show():b.hide();this.updateActionBarVisibilityState()},executeUpdateFieldsPager:function(c,b,d,a){a?b.show():b.hide();this.doLayout()},executeAddRowactionsAction:function(e,b){var a=this.getColumnModel(),d=a.getColumnById("action-column"),c=this.getModelNodeProperties(e);if(!d){d=this.createRowActionColumn([c]);a.config.push(d);a.setConfig(a.config)}else{var f=this.createRowAction(c);d.items.splice(b,0,f);this.updateActionsColumnWidth()}this.view.refresh()},executeRemoveRowactionsAction:function(e,c){var b=this.getColumnModel(),d=b.getColumnById("action-column"),a=c[1];this.unmapCmpFromModel(e);d.items.splice(a,1);if(d.items.length==0){b.config.pop();b.setConfig(b.config)}else{this.updateActionsColumnWidth()}this.view.refresh()},executeInsertRowactionsAction:function(d,b,c){var a=c[1];this.executeAddRowactionsAction(d,a)},executeUpdateRowactionsActionName:function(e,d,f,b){var a=d[0],c=a.name;a.name=b;a.tooltip=(Ext.isEmpty(a.tooltip)||a.tooltip==c)?b:a.tooltip;a.altText=(Ext.isEmpty(a.altText)||a.altText==c)?b:a.altText;this.view.refresh()},executeUpdateRowactionsActionIconCls:function(c,b,d,a){b[0].iconCls=a;this.view.refresh()},executeUpdateRowactionsActionIcon:function(c,b,d,a){b[0].icon=a;this.view.refresh()},executeUpdateRowactionsActionText:function(c,b,d,a){b[0].altText=a?a:b[0].name;this.view.refresh()},executeUpdateRowactionsActionTooltip:function(c,b,d,a){b[0].tooltip=a?a:b[0].name;this.view.refresh()},removeAction:function(b,a){a.destroy();this.unmapCmpFromModel(b);this.updateActionBarVisibilityState()},setActionName:function(a,b){var c=a.name;a.name=b;if(Ext.isEmpty(a.text)||a.text==c){a.setText(b)}},setActionStyle:function(a,b){a.el.dom.removeAttribute("style","");a.el.applyStyles(b)},executeAddActionsAction:function(c,a){var d=this.getActionToolBar(),b=this.getModelNodeProperties(c),e=this.createAction(b);d.insertButton(a,e);this.updateActionBarVisibilityState()},executeRemoveActionsAction:function(b,a){this.removeAction(b,a[0])},executeInsertActionsAction:function(c,b,d){var a=d[1];this.executeAddActionsAction(c,a)},executeUpdateActionsActionName:function(c,b,d,a){this.setActionName(b[0],a)},executeUpdateActionsActionText:function(c,b,d,a){b[0].setText(a?a:b[0].name)},executeUpdateActionsActionIconCls:function(c,b,d,a){b[0].setIconClass(a)},executeUpdateActionsActionTooltip:function(c,b,d,a){b[0].setTooltip(a)},executeUpdateActionsActionIcon:function(c,b,d,a){b[0].setIcon(a)},executeUpdateActionsActionStyle:function(c,b,d,a){this.setActionStyle(b[0],a)},executeAddMoreactionsAction:function(d,b,f){var e=this.getActionToolBar(),a=e.getComponent("more").menu,c=this.getModelNodeProperties(d),g=this.createMoreAction(c);b=!f?b+3:b;a.insert(b,g);this.updateActionBarVisibilityState()},executeRemoveMoreactionsAction:function(b,a){this.removeAction(b,a[0])},executeInsertMoreactionsAction:function(c,b,d){var a=d[1];this.executeAddMoreactionsAction(c,a,true)},executeUpdateMoreactionsActionName:function(c,b,d,a){this.setActionName(b[0],a)},executeUpdateMoreactionsActionText:function(c,b,d,a){b[0].setText(a?a:b[0].name)},executeUpdateMoreactionsActionIconCls:function(c,b,d,a){b[0].setIconClass(a)},executeUpdateMoreactionsActionIcon:function(c,b,f,a){b[0].icon=a;try{b[0].el.child("img").set({src:a})}catch(d){}},executeUpdateMoreactionsActionStyle:function(c,b,f,a){b[0].style=a;try{this.setActionStyle(b[0],a)}catch(d){}}}})();Ext.applyIf(afStudio.wd.list.ListModelReflector,afStudio.wd.ModelReflector);Ext.ns("afStudio.wd.list");afStudio.wd.list.ListGridView=Ext.extend(Ext.grid.GridView,{beforeColMenuShow:function(){var b=this.cm,d=b.getColumnCount(),a=this.colMenu,c;a.removeAll();for(c=0;c<d;c++){var e=b.config[c];if(e.hideable!==false&&e.xtype!="listactioncolumn"){a.add(new Ext.menu.CheckItem({text:b.getColumnHeader(c),itemId:"col-"+b.getColumnId(c),checked:!b.isHidden(c),disabled:b.config[c].hideable===false,hideOnClick:false}))}}},afterRenderUI:function(){var a=this.grid;this.initElements();Ext.fly(this.innerHd).on("click",this.handleHdDown,this);this.mainHd.on({scope:this,mouseover:this.handleHdOver,mouseout:this.handleHdOut,mousemove:this.handleHdMove});this.scroller.on("scroll",this.syncScroll,this);if(a.enableColumnResize!==false){this.splitZone=new Ext.grid.GridView.SplitDragZone(a,this.mainHd.dom)}if(a.enableColumnMove){this.columnDrag=new afStudio.wd.list.ListGridView.ColumnDragZone(a,this.innerHd);this.columnDrop=new Ext.grid.HeaderDropZone(a,this.mainHd.dom)}if(a.enableHdMenu!==false){this.hmenu=new Ext.menu.Menu({id:a.id+"-hctx",show:function(c,d,b){this.parentMenu=b;if(!this.el){this.render()}this.fireEvent("beforeshow",this);this._el=c;this.showAt(this.el.getAlignToXY(c,d||this.defaultAlign,this.defaultOffsets),b)}});this.colMenu=new Ext.menu.Menu({id:a.id+"-hcols-menu"});this.colMenu.on({scope:this,beforeshow:this.beforeColMenuShow,itemclick:this.handleColumnMenuClick});this.hmenu.add({itemId:"renameClm",text:"Rename Column"},{itemId:"deleteClm",text:"Delete Column"},"-",{itemId:"columns",text:this.columnsText,menu:this.colMenu,hideOnClick:false,iconCls:"x-cols-icon"});this.hmenu.on("itemclick",this.handleHdMenuClick,this)}if(a.trackMouseOver){this.mainBody.on({scope:this,mouseover:this.onRowOver,mouseout:this.onRowOut})}if(a.enableDragDrop||a.enableDrag){this.dragZone=new Ext.grid.GridDragZone(a,{ddGroup:a.ddGroup||"GridDD"})}this.updateHeaderSortState()},handleColumnMenuClick:function(c){var b=this.hdCtxIndex,a=this.cm,d=this.ds;b=a.getIndexById(c.itemId.substr(4));if(b!=-1){if(c.checked&&a.getColumnsBy(this.isHideableColumn,this).length<=1){this.onDenyColumnHide();return false}a.setHidden(b,c.checked)}return true},handleHdMenuClick:function(d){var b=this.hdCtxIndex,a=this.cm,f=this.ds,c=a.getDataIndex(b);switch(d.itemId){case"renameClm":var g=this.findHeaderCell(d.parentMenu._el);this.editHeader(g.firstChild,b);break;case"deleteClm":var e=a.config[b];this.grid.removeColumn(e);break}return true},editHeader:function(b,j){var a=this.grid,k=this.cm,c=k.config[j],f=k.getColumnHeader(j);var d=a.getModelByCmp(c),e=a.getPropertyEditor(d,"label"),g=new Ext.grid.GridEditor(e);g._node=d;g.on("complete",this.onHeaderEditComplete,this);g.startEdit(b,f)},onHeaderEditComplete:function(c,b,a){var d=c._node;if(b!=a){d.setProperty("label",b)}},handleHdDown:function(k,n){var m=this.cm,g=this.findHeaderCell(n),j=this.getCellIndex(g),d=this.hmenu,b=d.items,a=this.headerMenuOpenCls;if(Ext.fly(n).hasClass("x-grid3-hd-btn")){k.stopEvent();Ext.fly(g).addClass(a);this.hdCtxIndex=j;d.on("hide",function(){Ext.fly(g).removeClass(a)},this,{single:true});d.show(n,"tl-bl?")}else{if(j!==false){var c=this.cm.getColumnId(j);if(Ext.isDefined(c)){var f=this.cm.getColumnById(c);if(c=="checker"||f.xtype=="listactioncolumn"){return false}}this.editHeader(g.firstChild,j)}}}});afStudio.wd.list.ListGridView.ColumnDragZone=Ext.extend(Ext.grid.GridView.ColumnDragZone,{onBeforeDrag:function(f,g){var b=this.view.cm,c=this.view.findCellIndex(f.header),a=c!==false?b.getColumnId(c):null;if(Ext.isDefined(a)){var d=b.getColumnById(a);if(a=="checker"||d.xtype=="listactioncolumn"){return false}}return true},beforeDragDrop:function(j,g,k){var b=this.view.cm,f=this.getDragData(g),c=this.view.findCellIndex(f.header),a=c!==false?b.getColumnId(c):undefined;if(Ext.isDefined(a)){var d=b.getColumnById(a);if(a=="checker"||d.xtype=="listactioncolumn"){this.onInvalidDrop(j,g,k);return false}}return true}});Ext.ns("afStudio.wd.list");afStudio.wd.list.ActionColumn=Ext.extend(Ext.grid.ActionColumn,{constructor:function(b){afStudio.wd.list.ActionColumn.superclass.constructor.call(this,b);var f=this,c=b.items||(f.items=[f]),a=c.length,d,e;f.renderer=function(g,j){g=Ext.isFunction(b.renderer)?(b.renderer.apply(this,arguments)||""):"";j.css+=" x-action-col-cell";for(d=0,len=c.length;d<len;d++){e=c[d];g+='<img width="16" alt="'+e.altText+'" src="'+(e.icon?e.icon:(Ext.isEmpty(e.iconCls)?"":Ext.BLANK_IMAGE_URL))+'" class="x-action-col-icon x-action-col-'+String(d)+" "+(e.iconCls||"")+" "+(Ext.isFunction(e.getClass)?e.getClass.apply(e.scope||this.scope||this,arguments):"")+'"'+((e.tooltip)?' ext:qtip="'+e.tooltip+'"':"")+" />"}return g}}});Ext.apply(Ext.grid.Column.types,{listactioncolumn:afStudio.wd.list.ActionColumn});Ext.ns("afStudio.wd.list");afStudio.wd.list.ListView=Ext.extend(Ext.grid.GridPanel,{rowActionWidth:18,actionsColumnWidth:58,_beforeInitComponent:function(){var a=this;this.modelMapper={};var c=this.createColumns();var f=this.resolveSelectionModel();var b=new Ext.data.ArrayStore({idIndex:0,data:[[]],fields:[]});var e=this.createActions();var d=this.createDescription();return{header:true,store:b,selModel:f,columns:c,view:new afStudio.wd.list.ListGridView(),columnLines:true,autoScroll:true,tbar:{xtype:"container",defaults:{xtype:"toolbar"},items:[e,d]},bbar:{xtype:"paging",hidden:true,store:b,displayInfo:true}}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.wd.list.ListView.superclass.initComponent.apply(this,arguments);this._afterInitComponent()},_afterInitComponent:function(){var a=this;this.configureView()},afterRender:function(){afStudio.wd.list.ListView.superclass.afterRender.call(this);this.header.setVisibilityMode(Ext.Element.DISPLAY);if(!this.title){this.hideHeader()}},setHeaderTitle:function(b){var a=this.NODE_VALUE_MAPPER,c=this.getModelNodeValue(b);this.setTitle(c[a]?c[a]:"&#160;");this.mapCmpToModel(b.id,this)},hideHeader:function(){var a=this.getResizeEl().getHeight();this.header.hide();this.setHeight(a)},configureView:function(){var c=this.NODES,g=this.NODE_ID_MAPPER,p=this.NODE_VALUE_MAPPER,n=this.getActionToolBar(),o=n.getComponent("more").menu;var e=this.getModelNodeByPath(c.TITLE);if(e){this.setHeaderTitle(e)}var j=this.getModelNode(c.FIELDS);var d=o.getComponent("sel-all"),b=o.getComponent("desel-all"),f=o.getComponent("exports"),q=n.getComponent("expanded-view");this.mapCmpToModel(j.id+"#selectable",this.createMapper(function(){return[d,b]}));d[g]=b[g]=j.id+"#selectable";this.mapCmpToModel(j.id+"#exportable",f);f[g]=j.id+"#exportable";this.mapCmpToModel(j.id+"#expandButton",q);q[g]=j.id+"#expandButton";var k=this.getModelNodeProperties(c.FIELDS);k.selectable?(d.enable(),b.enable()):(d.disable(),b.disable());k.exportable?f.show():f.hide();k.expandButton?q.show():q.hide();this.updateActionBarVisibilityState();if(this.isModelStatus(c.FIELDS,{pager:true})){var m=this.getBottomToolbar();m.show();this.mapCmpToModel(j.id+"#pager",m)}},initEvents:function(){afStudio.wd.list.ListView.superclass.initEvents.call(this);var a=this;this.on({scope:a,contextmenu:function(b){b.preventDefault()},columnmove:a.onColumnMove,columnresize:a.onColumnResize,modelNodeAppend:a.onModelNodeAppend,modelNodeInsert:a.onModelNodeInsert,modelNodeRemove:a.onModelNodeRemove,modelPropertyChanged:a.onModelPropertyChanged})},onModelNodeAppend:function(d,b,c,a){afStudio.Logger.info("@view [ListView] modelNodeAppend");var e=this.getExecutor(this.EXEC_ADD,c);if(e){e(c,a)}},onModelNodeInsert:function(e,c,d,a){afStudio.Logger.info("@view [ListView] modelNodeInsert");var b=this.getCmpByModel(a),f=this.getExecutor(this.EXEC_INSERT,d);if(f){f(d,a,b)}},onModelNodeRemove:function(d,b,c){afStudio.Logger.info("@view [ListView] modelNodeRemove");var a=this.getCmpByModel(c),e=this.getExecutor(this.EXEC_REMOVE,c);if(e){e(c,a)}},onModelPropertyChanged:function(c,d,b){afStudio.Logger.info("@view [ListView] modelPropertyChanged");var a=this.getCmpByModel(c,d),e=this.getExecutor(this.EXEC_UPDATE,c,d);if(e){e(c,a,d,b)}},onColumnMove:function(j,c){var b=this.getColumnModel();if(j!=c){var f=b.config[c],e=this.getModelByCmp(f),d=e.parentNode;if(this.hasCheckboxSelModel()){j--;c--}var a=(j<c)?c+1:c;var g=d.item(a);d.insertBefore(e,g)}},onColumnResize:function(b,c){var a=this.getColumnModel(),d=this.getModelByCmp(a.config[b]);d.setProperty("width",c)},updateActionBarVisibilityState:function(){var b=this.getActionToolBar(),a=0;this.updateMoreActionVisibilityState();b.items.each(function(c){if(c.hidden){a++}});if(a>0&&((a+1)==b.items.getCount())){b.hide()}else{b.show()}this.doLayout()},updateMoreActionVisibilityState:function(){var e=this.getActionToolBar(),b=e.getComponent("more"),d=b.menu.getComponent("sel-all"),c=b.menu.getComponent("desel-all");if(d.disabled&&c.disabled){var a=2;b.menu.items.each(function(f){if(f.hidden){a++}});if(a==b.menu.items.getCount()){b.hide()}else{b.show()}}else{b.show()}},columnMapper:function(d){var c=this.NODE_ID_MAPPER,b=this.getColumnModel(),a=Ext.each(b.config,function(e){return !(e[c]==d)});return[b.config[a],a]},rowActionMapper:function(e){var c=this.NODE_ID_MAPPER,b=this.getColumnModel(),d=b.getColumnById("action-column"),a=Ext.each(d.items,function(f){return !(f[c]==e)});return[d.items[a],a]},actionMapper:function(d){var b=this.NODE_ID_MAPPER,c=this.getActionToolBar(),a;c.items.each(function(f,g,e){if(g>e-3){return false}if(f[b]==d){a=g;return false}});return[c.items.itemAt(a),a]},moreActionMapper:function(e){var c=this.NODE_ID_MAPPER,d=this.getActionToolBar(),b=d.getComponent("more").menu,a;b.items.each(function(f,g){if(g>2&&f[c]==e){a=g;return false}});return[b.items.itemAt(a),a]},resolveSelectionModel:function(){return this.isModelStatus(this.NODES.FIELDS,{"select":true})?new Ext.grid.CheckboxSelectionModel():new Ext.grid.RowSelectionModel()},createColumns:function(){var j=this,a=this.NODES,f=[];var e=this.resolveSelectionModel();if(e instanceof Ext.grid.CheckboxSelectionModel){f.push(e)}if(j.isModelNodeExists(a.COLUMN,true)){var d=j.getColumns();for(var k=0,g=d.length;k<g;k++){var m=this.createColumn(d[k]);f.push(m)}}var b=j.getRowActions();if(!Ext.isEmpty(j.getRowActions())){f.push(this.createRowActionColumn(b))}return f},createColumn:function(c){var a=c[this.NODE_ID_MAPPER];this.mapCmpToModel(a,this.createMapper(this.columnMapper,a));var b={id:a,header:c.label};Ext.copyTo(b,c,"width, hidden, hideable");b[this.NODE_ID_MAPPER]=a;return b},removeColumn:function(a){var b=this.getModelByCmp(a);b.remove(true)},createRowActionColumn:function(e){var b=this,d=this.rowActionWidth,c=this.actionsColumnWidth;var a={id:"action-column",xtype:"listactioncolumn",header:"Actions",menuDisabled:true,width:c,fixed:true,items:[]};Ext.iterate(e,function(j,f){var g=b.createRowAction(j);a.items.push(g)});a.width=(e.length*d)>c?(e.length*d):c;return a},updateActionsColumnWidth:function(){var b=this.getColumnModel(),d=b.getColumnById("action-column"),a=b.getIndexById("action-column"),e=d.items.length;var c=(e*this.rowActionWidth)>this.actionsColumnWidth?(e*this.rowActionWidth):this.actionsColumnWidth;b.setColumnWidth(a,c)},createRowAction:function(c){var a=c[this.NODE_ID_MAPPER];this.mapCmpToModel(a,this.createMapper(this.rowActionMapper,a));var b={name:c.name,iconCls:c.iconCls,icon:c.icon,altText:c.text?c.text:c.name,tooltip:c.tooltip?c.tooltip:c.name};b[this.NODE_ID_MAPPER]=a;return b},getActionToolBar:function(){return this.getTopToolbar().getComponent("actions")},createActions:function(){var e={itemId:"actions",items:["->",{itemId:"expanded-view",text:"Expanded View",iconCls:"icon-application-split"},{itemId:"more",text:"More Actions",menu:{items:[{itemId:"exports",text:"Exports",iconCls:"icon-database-save"},{itemId:"sel-all",text:"Select All"},{itemId:"desel-all",text:"Deselect All"}]}}]};var c=e.items[2];var a=this.getActions();if(!Ext.isEmpty(a)){var d=a.length;for(var b=d-1;b>=0;b--){e.items.unshift(this.createAction(a[b]))}}a=this.getMoreActions();if(!Ext.isEmpty(a)){Ext.iterate(a,function(f){c.menu.items.push(this.createMoreAction(f))},this)}return e},createActionObj:function(b){var c={name:b.name,text:b.text?b.text:b.name,iconCls:b.iconCls,icon:b.icon,tooltip:b.tooltip,style:b.style};c[this.NODE_ID_MAPPER]=b[this.NODE_ID_MAPPER];return c},createAction:function(b){var a=b[this.NODE_ID_MAPPER];this.mapCmpToModel(a,this.createMapper(this.actionMapper,a));return this.createActionObj(b)},createMoreAction:function(b){var a=b[this.NODE_ID_MAPPER];this.mapCmpToModel(a,this.createMapper(this.moreActionMapper,a));return this.createActionObj(b)},createDescription:function(){var e={itemId:"desc",hidden:true,items:{xtype:"tbtext",style:"white-space: normal;",text:""}};var c=this.NODE_VALUE_MAPPER,d=this.NODE_ID_MAPPER,b=this.NODES;var a=this.getModelNodeByPath(b.DESCRIPTION);if(a){var f=this.getModelNodeValue(a);if(f[c]){e.hidden=false;e.items.text=f[c]}this.mapCmpToModel(f[d],this.createMapper(function(){return this.getTopToolbar().getComponent("desc")}));e[d]=f[d]}return e},onDestroy:function(){afStudio.wd.list.ListView.superclass.onDestroy.call(this);this.modelMapper=null}});Ext.applyIf(afStudio.wd.list.ListView.prototype,afStudio.wd.ModelMapper);Ext.apply(afStudio.wd.list.ListView.prototype,afStudio.wd.list.ListModelInterface);Ext.apply(afStudio.wd.list.ListView.prototype,afStudio.wd.list.ListModelReflector);Ext.reg("wd.listView",afStudio.wd.list.ListView);Ext.ns("afStudio.wd.edit");afStudio.wd.edit.EditModelInterface=(function(){return{isGrouped:function(){var a=this.getModelNodeByPath(this.NODES.GROUPING);return a?true:false},getFields:function(a){return this.getModelChildrenProperties(this.NODES.FIELDS,this.NODES.FIELD,a)},getField:function(a,c){var b=this.getFields({name:a})[0];if(!b){return null}return c===true?this.getModelNode(b[this.NODE_ID_MAPPER]):b},getFieldsButtons:function(){return this.getModelChildrenProperties(this.NODES.FIELDS,this.NODES.BUTTON)},getFieldSets:function(a){return this.getModelChildrenProperties(this.NODES.GROUPING,this.NODES.SET,a)},getTabbedFieldSets:function(){return this.getFieldSets(["tabtitle"])},getPlainFieldSets:function(){return this.getFieldSets(function(a){return Ext.isEmpty(a.tabtitle)})},isSetTabbed:function(a){return this.isModelStatus(a,function(b){return Ext.isEmpty(b.getPropertyValue("tabtitle"))?false:true})},getRefsFromSet:function(a,b){return this.getModelChildrenProperties(a,this.NODES.REF,b)},getFieldsFromSet:function(b){var c=this.getRefsFromSet(b),a=[];Ext.each(c,function(e){var d=this.getFields({name:e.to});a.push({ref:e,field:d[0]})},this);return a},getFieldsFromDefaultSet:function(){var e=this.NODE_ID_MAPPER;var c=this.getFieldSets(),d=[],b=[];Ext.each(c,function(f){var g=this.getFieldsFromSet(f[e]);Ext.each(g,function(j){d.push(j.field.name)})},this);var a=this.getFields();Ext.each(a,function(g){if(d.indexOf(g.name)==-1){b.push(g)}});return b},getDefaultSetFieldIndex:function(b){var c=this.NODE_ID_MAPPER,a=this.getFieldsFromDefaultSet();var d=Ext.each(a,function(e){return e[c]==b[c]?false:true});return Ext.isDefined(d)?d:null},getRefByField:function(c,b){if(!Ext.isString(c)&&!(c instanceof afStudio.model.Node)){throw new Ext.Error('afStudio.wd.edit.EditModelInterface, getRefByField() parameter "fld" is not correct.'+'Accepts "String" as field name and "afStudio.model.Node" as field node')}var f=this.NODE_ID_MAPPER,a=Ext.isString(c)?c:c.getPropertyValue("name"),e=null;if(Ext.isEmpty(a)){return null}var d=this.getFieldSets();Ext.each(d,function(g){var j=this.getRefsFromSet(g[f],{to:a});if(!Ext.isEmpty(j)){e=(b===true)?this.getModelNode(j[0][f]):j[0];return false}},this);return e}}})();Ext.apply(afStudio.wd.edit.EditModelInterface,afStudio.wd.ModelInterface);Ext.ns("afStudio.wd.edit");afStudio.wd.edit.EditModelReflector=(function(){return{correctExecutorLine:function(a,b,c,d){if(["Field","Description"].indexOf(a)!=-1){var e=this.getExecutorToken(c.parentNode.tag);a=e+a}return a},removeComponent:function(b,a){a.destroy(true);this.unmapCmpFromModel(b)},executeAddRootDescription:function(){var a=this.getTopToolbar();a.show()},executeRemoveRootDescription:function(){var b=this.getTopToolbar(),a=b.getComponent("description");a.setText("&#160;");b.hide();this.doLayout()},executeUpdateRootDescription_content:function(d,c,e,a){var f=this.getTopToolbar(),b=f.getComponent("description");b.setText(a.trim()?a:"&#160;")},executeUpdateFieldsSubmitlabel:function(c,b,d,a){b.setText(a)},executeUpdateFieldsResetlabel:function(c,b,d,a){b.setText(a)},executeUpdateFieldsSubmit:function(c,b,d,a){if(a===false){b.sub.hide();b.res.hide()}else{b.sub.show();if(this.getModelByCmp(b.res)[1]){b.res.show()}}this.doLayout()},executeUpdateFieldsResetable:function(c,b,d,a){a?b.show():b.hide()},addButton:function(e,a,c){c=Ext.isDefined(c)?c:"button";var d=this.getFooterToolbar(),b=this.getModelNodeProperties(e),f=this.createButton(b,c);a=this.getButtonIndex(e,a,c);d.insertButton(a,f);this.doLayout()},removeButton:function(b,a){this.removeComponent(b,a)},insertButton:function(j,b,e,d,f){f=Ext.isDefined(f)?f:"button";var c=this.getFooterToolbar(),k=this.getModelNodeProperties(b),a=this.createButton(k,f),g=c.items.indexOf(d);c.insertButton(g,a);this.doLayout()},setButtonName:function(c,a){var b=c.name;c.name=a;if(Ext.isEmpty(c.text)||c.text==b){c.setText(a)}},setButtonText:function(b,a){b.setText(a?a:b.name)},executeAddButton:function(b,a){this.addButton(b,a)},executeRemoveButton:function(b,a){this.removeButton(b,a)},executeInsertButton:function(c,d,a,b){this.insertButton(c,d,a,b)},executeUpdateButtonLabel:function(c,b,d,a){this.setButtonText(b,a)},executeUpdateButtonName:function(c,b,d,a){this.setButtonName(b,a)},executeUpdateButtonIconCls:function(c,b,d,a){b.setIconClass(a)},executeUpdateButtonIcon:function(c,b,d,a){b.setIcon(a)},executeAddAction:function(b,a){this.addButton(b,a,"action")},executeRemoveAction:function(b,a){this.removeButton(b,a)},executeInsertAction:function(c,d,a,b){this.insertButton(c,d,a,b,"action")},executeUpdateActionName:function(c,b,d,a){this.setButtonName(b,a)},executeUpdateActionText:function(c,b,d,a){this.setButtonText(b,a)},executeUpdateActionIconCls:function(c,b,d,a){b.setIconClass(a)},executeUpdateActionIcon:function(c,b,d,a){b.setIcon(a)},executeUpdateActionTooltip:function(c,b,d,a){b.setTooltip(a)},executeUpdateFieldsLabelWidth:function(c,b,d,a){this.labelWidth=Ext.isEmpty(a)?100:a},setFieldContent:function(c,b,a){var d=this.getModelNodeProperty(c,"value");b.content=a;b.setValue(Ext.isEmpty(a)&&!Ext.isEmpty(d)?d:a)},setFieldValue:function(b,a){if(Ext.isEmpty(b.content)){b.setValue(a)}},relocateField:function(d,a){if(d.nextSibling){var e=d.parentNode,b=d.nextSibling,c=this.getCmpByModel(b);this.executeInsertFieldsField(e,d,b,c)}else{this.executeAddFieldsField(d,a)}},executeAddFieldsField:function(b,j){var k=this.getModelNodeProperties(b);if(this.isGrouped()){var d=this.getRefByField(b,true);if(d){var c=this.getCmpByModel(d),e=this.createField(k);c.add(e);c.doLayout()}else{var a=this.getDefaultSet();if(a){var e=this.createField(k);a.add(e);this.updateDefaultSetVisibility();a.doLayout()}else{a=this.createDefaultFieldSet([k]);var f=this.getTabbedSet();if(f){this.insert(this.items.indexOf(f),a)}else{this.add(a)}this.doLayout()}}}else{var e=this.createField(k),g=this.getFieldIndex(b,j);this.insert(g,e);this.doLayout()}},executeRemoveFieldsField:function(b,a){a.destroy()},executeInsertFieldsField:function(k,c,e,d){var m=this.getModelNodeProperties(c);if(this.isGrouped()){var b=this.getRefByField(c,true);if(b){var f=this.createField(m);d=this.getCmpByModel(b);d.add(f);d.doLayout()}else{var a=this.getDefaultSet();if(a){var f=this.createField(m);if(!c.isSimilarNode(e)){a.add(f)}else{var j=a.items.indexOf(d);if(j==-1){j=this.getDefaultSetInsertFieldIndex(k,e)}a.insert(j,f)}this.updateDefaultSetVisibility();a.doLayout()}else{a=this.createDefaultFieldSet([m]);var g=this.getTabbedSet();if(g){this.insert(this.items.indexOf(g),a)}else{this.add(a)}this.doLayout()}}}else{var f=this.createField(m);if(!c.isSimilarNode(e)){this.add(f)}else{var j=this.items.indexOf(d);this.insert(j,f)}this.doLayout()}},executeUpdateFieldsFieldType:function(e,d,f,b){if(this.isGrouped()){var g=this.getDefaultSet();if(g&&g.items.indexOf(d)!=-1){var a=g.items.indexOf(d);g.remove(d,true);this.relocateField(e,a)}else{var c=d.ownerCt;c.removeAll(true);this.executeAddFieldsField(e)}}else{var a=this.items.indexOf(d);this.remove(d,true);this.executeAddFieldsField(e,a)}},executeUpdateFieldsFieldLabel:function(c,b,d,a){if(b.label){b.label.update(!Ext.isEmpty(a)?(a+":"):a)}},executeUpdateFieldsFieldContent:function(c,b,d,a){this.setFieldContent(c,b,a)},executeUpdateFieldsFieldValue:function(c,b,d,a){this.setFieldValue(b,a)},executeUpdateFieldsFieldDisabled:function(c,b,d,a){a==true?b.disable():b.enable()},executeUpdateFieldsFieldHeight:function(c,b,d,a){b.setHeight(a);if(b.getXType()=="multiselect"){Ext.getCmp(b.el.child("fieldset").id).setHeight(a)}},executeUpdateFieldsFieldWidth:function(c,b,d,a){b.setWidth(a);if(b.getXType()=="multiselect"){Ext.getCmp(b.el.child("fieldset").id).setWidth(a)}},executeUpdateFieldsFieldStyle:function(d,c,e,a){var b=c.el.getStyles("width","height");c.el.dom.removeAttribute("style","");c.el.applyStyles(b).applyStyles(a)},executeUpdateFieldsFieldState:function(c,b,d,a){switch(a){case"editable":b.enable();b.setReadOnly(false);break;case"readonly":b.enable();b.setReadOnly(true);break;case"disabled":b.disable();break}},executeUpdateFieldsFieldChecked:function(c,b,d,a){if(["checkbox","radio"].indexOf(b.getXType())!=-1){b.setValue(a)}},executeUpdateFieldsFieldRich:function(c,b,d,a){if(b.getXType()=="textarea"){this.executeUpdateFieldsFieldType(c,b,d,a)}},executeUpdateFieldsFieldDateFormat:function(d,c,e,a){var b=c.getXType();if(["datefield","xdatetime"].indexOf(b)!=-1){if(b=="xdatetime"){c.df.format=a}else{c.format=a}}},executeUpdateFieldsFieldTimeFormat:function(c,b,d,a){if(b.getXType()=="xdatetime"){}},changeFieldSetTitle:function(a,b){a.setTitle(b?b:"&#160;")},executeAddGrouping:function(c,a){this.removeAll(true);var b=this.getFields(),d=this.createDefaultFieldSet(b);this.add(d);this.doLayout()},executeRemoveGrouping:function(c,b){var d=this.getModelNode(this.NODES.FIELDS),a=this.getFields();this.removeAll(true);Ext.each(a,function(j){var g=this.createField(j),k=this.getModelNode(j[this.NODE_ID_MAPPER]),f=d.indexOf(k),e=this.getFieldIndex(k,f);this.insert(e,g)},this);this.doLayout()},executeUpdateGroupingCollapsed:function(c,b,e,a){var d=this.getDefaultSet();a==true?d.collapse():d.expand()},executeUpdateGroupingTitle:function(c,b,e,a){var d=this.getDefaultSet();this.changeFieldSetTitle(d,a)},executeAddSet:function(e,b){var a=this.getModelNodeProperties(e),f=this.getTabbedSet();if(this.isSetTabbed(e)){if(f){var d=this.createTab(a);f.add(d);f.doLayout()}else{f=this.createTabPanel([a]);this.add(f);this.doLayout()}}else{if(f){var g=this.items.indexOf(f);b=this.getDefaultSet()?g-1:g}var c=this.createFieldSet(a);this.insert(b,c);this.doLayout()}},executeRemoveSet:function(c,b){var d=b.findByType("field"),f=this.getModelNode(this.NODES.FIELDS),a=[];Ext.each(d,function(j){var k=this.getModelNode(j[this.NODE_ID_MAPPER]),g=f.indexOf(k);a.push({field:k,pos:g})},this);if(this.isSetTabbed(c)){var e=this.getTabbedSet();b.ownerCt.destroy();if(e.items.getCount()==0){e.destroy()}}else{b.destroy()}Ext.each(a,function(g){this.relocateField(g.field,g.pos)},this)},executeInsertSet:function(g,a,d,c){var e=this.getTabbedSet(),f=this.getModelNodeProperties(a),j=this.getFieldSetInsertionIndex(g,a,d,c);if(this.isSetTabbed(a)){if(e){var b=this.createTab(f);e.insert(j,b);e.doLayout()}else{e=this.createTabPanel([f]);this.add(e);this.doLayout()}}else{var k=this.createFieldSet(f),j=this.getFieldSetInsertionIndex(g,a,d,c);this.insert(j,k);this.doLayout()}},relocateFieldSet:function(e){var d=e.parentNode,b=e.nextSibling;if(b){var c=this.getCmpByModel(b);this.executeInsertSet(d,e,b,c)}else{var a=d.indexOf(e);this.executeAddSet(e,a)}},executeUpdateSetTitle:function(c,b,d,a){this.changeFieldSetTitle(b,a)},executeUpdateSetCollapsed:function(c,b,d,a){a==true?b.collapse():b.expand()},executeUpdateSetFloat:function(c,b,d,a){this.isSetTabbed(c)?b.ownerCt.destroy():b.destroy();this.relocateFieldSet(c)},executeUpdateSetTabtitle:function(d,c,e,a,b){if(!Ext.isEmpty(a)){if(!Ext.isEmpty(b)){c.ownerCt.setTitle(a)}else{c.destroy();this.relocateFieldSet(d)}}else{if(Ext.isEmpty(this.getTabbedFieldSets())){var f=this.getTabbedSet();f.destroy()}else{c.ownerCt.destroy()}this.relocateFieldSet(d)}},createRefField:function(b){var c=null,a=b.getPropertyValue("to");if(a){c=this.getField(a);if(!Ext.isEmpty(c)){c=this.createField(c)}}return c},updateFloatingRefWidth:function(a){var b=a.items.getCount(),c=Ext.util.Format.round(1/b,2);a.items.each(function(e,d){e.columnWidth=c})},removeReferenceCmp:function(a,d,f){var f=Ext.isDefined(f)?f:a.getPropertyValue("break"),e=a.previousSibling,c=a.nextSibling,d=d?d:this.getCmpByModel(a),b=d.ownerCt;d.destroy();if(f&&c&&e&&!e.getPropertyValue("break")){this.relocateRefsUp(a,b)}else{this.updateFloatingRefWidth(b);b.doLayout()}},relocateRefsDown:function(j){var n=j.parentNode,p=this.getCmpByModel(n),e=n.getPropertyValue("float"),c=j.previousSibling,b=j.nextSibling;var d=b;while(d){this.getCmpByModel(d).destroy();if(d.getPropertyValue("break")){break}d=d.nextSibling}var o=this.getCmpByModel(c).ownerCt;this.updateFloatingRefWidth(o);var k=this.createRefWrapper(e);while(b){var g=this.createRefField(b),a=this.getModelNodeProperties(b);this.wrapField(k,g,a);if(b.getPropertyValue("break")){break}b=b.nextSibling}this.updateFloatingRefWidth(k);var m=p.items.indexOf(o)+1;p.insert(m,k);p.doLayout()},relocateRefsUp:function(g,m){var k=g.parentNode,n=this.getCmpByModel(k),c=g.previousSibling,b=g.nextSibling;var j=this.getCmpByModel(b).ownerCt,d=b;while(d){this.getCmpByModel(d).destroy();if(d.getPropertyValue("break")){break}d=d.nextSibling}j.destroy();while(b){var e=this.createRefField(b),a=this.getModelNodeProperties(b);this.wrapField(m,e,a);if(b.getPropertyValue("break")){break}b=b.nextSibling}this.updateFloatingRefWidth(m);n.doLayout()},insertRefNode:function(k,g){var n=k.parentNode,o=this.getCmpByModel(n),j=n.getPropertyValue("float"),c=k.previousSibling,b=k.nextSibling,d=this.getModelNodeProperties(k),e=this.createRefField(k);var m=this,f=function(p){if(!j&&o.items.getCount()!=0){var q=o.items.itemAt(0);m.wrapField(q,e,d,1,p);q.doLayout()}else{var q=m.createRefWrapper(j);m.wrapField(q,e,d);o.insert(p,q);o.doLayout()}},a=function(r,t,s){var p=m.getCmpByModel(r),q=p.ownerCt;if(Ext.isEmpty(t)){t=q.items.indexOf(p);t=Ext.isDefined(s)?t+s:t}m.wrapField(q,e,d,null,t);m.updateFloatingRefWidth(q);q.doLayout()};if(j){if(c){if(c.getPropertyValue("break")){if(d["break"]||!b){g=o.items.indexOf(this.getCmpByModel(c).ownerCt)+1;f(g)}else{a(b,0)}}else{if(d["break"]){a(c,null,1);if(b){this.relocateRefsDown(k)}}else{a(c,null,1)}}}else{if(d["break"]||!b){f(0)}else{a(b)}}}else{f(g)}},executeAddRef:function(b,a){this.insertRefNode(b,a)},executeInsertRef:function(a,d,b,c){this.insertRefNode(d,a.indexOf(d))},executeRemoveRef:function(g,k){var e=this.getModelNodeProperties(g),c=this.getModelNodeProperty(g,"to"),o=this.getModelNode(this.NODES.FIELDS),b=g.previousSibling,a=g.nextSibling,m=g.parentNode,p=this.getCmpByModel(m),n=k.ownerCt;if(!k.nextSibling()&&!k.previousSibling()){n.destroy()}else{this.removeReferenceCmp(g,k)}if(!Ext.isEmpty(c)&&this.getField(c)){var d=this.getField(c)[this.NODE_ID_MAPPER],f=this.getModelNode(d),j=this.getDefaultSetInsertFieldIndex(o,f);this.relocateField(f,j)}},executeUpdateRefTo:function(e,d,f,a,b){var c;if(Ext.isEmpty(a)){c=this.getField(b,true);if(c){this.relocateField(c)}return}c=this.getField(a,true);if(this.getField(b,true)){this.relocateField(this.getField(b,true))}this.relocateField(c)},executeUpdateRefBreak:function(e,d,f,a,c){var b=e.parentNode;if(b.getPropertyValue("float")===true){if(a===true){this.removeReferenceCmp(e,d,c);this.insertRefNode(e,b.indexOf(e))}else{this.relocateRefsUp(e,d.ownerCt)}}}}})();Ext.applyIf(afStudio.wd.edit.EditModelReflector,afStudio.wd.ModelReflector);Ext.ns("afStudio.wd.edit");afStudio.wd.edit.EditView=Ext.extend(Ext.FormPanel,{frame:true,_beforeInitComponent:function(){var d=this;this.modelMapper={};var a=this.getModelNodeProperty(this.NODES.FIELDS,"labelWidth");var b=this.createFormCmp();var c=this.createButtons();return{autoScroll:true,labelWidth:a,items:b,tbar:{style:"border-bottom: 2px solid #C00; margin-bottom: 4px; padding: 4px;",items:[]},buttons:c}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.wd.edit.EditView.superclass.initComponent.apply(this,arguments);this._afterInitComponent()},initEvents:function(){afStudio.wd.edit.EditView.superclass.initEvents.call(this);var a=this;this.on({scope:a,modelNodeAppend:a.onModelNodeAppend,modelNodeInsert:a.onModelNodeInsert,modelNodeRemove:a.onModelNodeRemove,modelPropertyChanged:a.onModelPropertyChanged})},onDestroy:function(){this.modelMapper=null;afStudio.wd.edit.EditView.superclass.onDestroy.call(this)},_afterInitComponent:function(){this.configureView()},configureView:function(){var c=this.getTopToolbar();var b=this.getModelNodeByPath(this.NODES.DESCRIPTION),a=this.createDescription();c.add(a);b==null?c.hide():c.show()},onModelNodeAppend:function(d,b,c,a){afStudio.Logger.info("@view [EditView] modelNodeAppend");var e=this.getExecutor(this.EXEC_ADD,c);if(e){e(c,a)}},onModelNodeInsert:function(e,c,d,a){afStudio.Logger.info("@view [EditView] modelNodeInsert");var b=this.getCmpByModel(a),f=this.getExecutor(this.EXEC_INSERT,d);if(f){f(c,d,a,b)}},onModelNodeRemove:function(d,a,c){afStudio.Logger.info("@view [EditView] modelNodeRemove");var b=this.getCmpByModel(c),e=this.getExecutor(this.EXEC_REMOVE,c);if(e){e(c,b)}},onModelPropertyChanged:function(d,e,a,b){afStudio.Logger.info("@view [EditView] modelPropertyChanged");var c=this.getCmpByModel(d,e),f=this.getExecutor(this.EXEC_UPDATE,d,e);if(f){f(d,c,e,a,b)}},getDefaultSet:function(){var a=this.getComponent("default-set");return !Ext.isEmpty(a)?a:null},getTabbedSet:function(){var a=this.findByType("tabpanel");return a.length?a[0]:null},updateDefaultSetVisibility:function(){var b=this.getDefaultSet();if(b){var a=true;b.items.each(function(c){if(c.getXType()!="hidden"){a=false;return false}},this);!a?b.show():b.hide()}},updateDefaultSetExistence:function(a){if(a.items.getCount()==0){a.destroy()}else{this.updateDefaultSetVisibility()}},createFormCmp:function(){var c=[];if(this.isGrouped()){Ext.each(this.getPlainFieldSets(),function(e){c.push(this.createFieldSet(e))},this);var b=this.getFieldsFromDefaultSet();if(b.length){var d=this.createDefaultFieldSet(b);c.push(d)}var a=this.getTabbedFieldSets();if(!Ext.isEmpty(a)){c.push(this.createTabPanel(a))}}else{Ext.each(this.getFields(),function(e){c.push(this.createField(e))},this)}return c},createField:function(d){var c=this.NODE_ID_MAPPER,j=d[c];var b=this.getCmpByModel(j);if(b){b.destroy()}var e,a={},g;Ext.copyTo(a,d,"name, value, content, style, width, height, disabled");Ext.apply(a,{fieldLabel:d.label,labelStyle:"font-weight: bold;"});if(Ext.isDefined(d.content)){a.value=d.content}switch(d.type){case"input":e=Ext.form.TextField;break;case"textarea":e=d.rich?Ext.form.HtmlEditor:Ext.form.TextArea;break;case"checkbox":e=Ext.form.Checkbox;a.checked=Ext.isDefined(d.checked)?d.checked:false;break;case"radio":e=Ext.form.Radio;a.checked=Ext.isDefined(d.checked)?d.checked:false;break;case"password":e=Ext.form.TextField;a.inputType="password";break;case"hidden":e=Ext.form.Hidden;break;case"file":e=Ext.form.TextField;a.inputType="file";break;case"combo":e=Ext.form.ComboBox;Ext.apply(a,{store:[]});break;case"static":e=Ext.form.DisplayField;break;case"date":e=Ext.form.DateField;a.format=d.dateFormat?d.dateFormat:"Y-m-d";break;case"datetime":e=Ext.ux.form.DateTime;Ext.apply(a,{dateFormat:d.dateFormat?d.dateFormat:"Y-m-d",timeFormat:d.timeFormat?d.timeFormat:"H:i:s"});break;case"multicombo":e=Ext.ux.Multiselect;a.tbar=[{text:"clear"}];break;case"doublemulticombo":e=Ext.ux.ItemSelectorAutoSuggest;Ext.apply(a,{toStore:new Ext.data.ArrayStore(),toTBar:[{text:"clear"}],imagePath:"/appFlowerPlugin/extjs-3/plugins/multiselect/images"});break;case"doubletree":e=Ext.ux.TreeItemSelector;a.imagePath="/appFlowerPlugin/extjs-3/plugins/multiselect/images";break;case"color":e=Ext.ux.ColorField;break;default:e=Ext.form.DisplayField;a.value=String.format("<b>type</b> = {0}",d.type);break}if(d.state=="readonly"){a.readOnly=true}else{if(d.state=="disabled"){a.readOnly=true;a.submitValue=false}}a[c]=j;g=new e(a);if(!g.rendered){g.on({scope:this,afterrender:{fn:function(f){var k=function(){var m=this.getModelByCmp(f);this.controller.selectModelNode(m,this)}.createDelegate(this);f.label?f.label.on("click",k):null;f.on("focus",k)},single:true},beforedestroy:{fn:function(f){this.unmapCmpFromModel(f[this.NODE_ID_MAPPER])}}})}this.mapCmpToModel(j,g);return g},createButtons:function(){var d=[];this.createResetSubmitButtons(d);var b=this.getFieldsButtons();for(var a=b.length,c=a-1;c>=0;c--){d.unshift(this.createButton(b[c]))}Ext.each(this.getActions(),function(e){d.push(this.createButton(e,"action"))},this);return d},createResetSubmitButtons:function(e){var b=this.NODE_ID_MAPPER,g=this.NODES;var a=this.getModelNodeProperties(g.FIELDS);var d=Ext.isDefined(a.submit)?a.submit:true;var c=new Ext.Button({text:a.submitlabel?a.submitlabel:"Submit",iconCls:"icon-accept",hidden:!d});c[b]=g.FIELDS+"#submit";this.mapCmpToModel(g.FIELDS+"#submitlabel",c);var f=new Ext.Button({text:a.resetlabel?a.resetlabel:"Reset",iconCls:"icon-application-form",hidden:!d?true:(Ext.isDefined(a.resetable)?!a.resetable:false)});f[b]=g.FIELDS+"#resetable";this.mapCmpToModel(g.FIELDS+"#resetable",f);this.mapCmpToModel(g.FIELDS+"#resetlabel",f);this.mapCmpToModel(g.FIELDS+"#submit",{sub:c,res:f});e.push(c,f)},createButton:function(d,e){var b=this.NODE_ID_MAPPER,a={},c;e=Ext.isDefined(e)?e:"button";Ext.copyTo(a,d,"name, iconCls, icon, style");a[b]=d[b];if(e=="button"){a.text=d.label?d.label:d.name;if(d.state&&d.state=="disabled"){a.disabled=true}}else{if(e=="action"){Ext.apply(a,{text:d.text?d.text:d.name,tooltip:d.tooltip})}}c=new Ext.Button(a);c.on("click",function(f){var g=this.getModelByCmp(f);this.controller.selectModelNode(g,this)},this);this.mapCmpToModel(d[b],c);return c},createFieldSet:function(c){var e=this.NODE_ID_MAPPER,b={},g;Ext.copyTo(b,c,"title, collapsed");Ext.apply(b,{collapsible:true,items:[]});b[e]=c[e];g=new Ext.form.FieldSet(b);g.on("beforedestroy",function(k){this.unmapCmpFromModel(k[this.NODE_ID_MAPPER])},this);this.mapCmpToModel(c[e],g);var a=this.getFieldsFromSet(c[e]),j=c["float"];if(!Ext.isEmpty(a)){var d=this.createRefWrapper(j),f=this.getColumnWidth(a,0);g.add(d);Ext.each(a,function(o,k){var n=o.ref,m=o.field,p=this.createField(m);this.wrapField(d,p,n,f);if(n["break"]&&k!=a.length-1){d=this.createRefWrapper(j);f=this.getColumnWidth(a,k+1);g.add(d)}},this)}return g},createDefaultFieldSet:function(a){var g=this.NODES,b={},f;var d=this.getModelNodeProperties(g.GROUPING);Ext.copyTo(b,d,"title, collapsed");Ext.apply(b,{itemId:"default-set",collapsible:true});var e=true,c=[];Ext.each(a,function(j){if(j.type!="hidden"){e=false}c.push(this.createField(j))},this);Ext.apply(b,{hidden:e,labelWidth:this.labelWidth,items:c});f=new Ext.form.FieldSet(b);f.on("remove",function(j,k){this.updateDefaultSetExistence(j)},this);return f},createTabPanel:function(a){var c=new Ext.TabPanel({activeTab:0,height:300,padding:10});var b=[];Ext.each(a,function(d){b.push(this.createTab(d))},this);c.add(b);return c},createTab:function(a){var b=new Ext.Panel({title:a.tabtitle,layout:"anchor",autoScroll:true,items:this.createFieldSet(a)});return b},createDescription:function(){var a={itemId:"description",style:"white-space: normal;",text:"&#160;"};var b=this.getModelNodeByPath(this.NODES.DESCRIPTION);if(b){var c=this.getModelNodeValue(b);if(c[this.NODE_VALUE_MAPPER]){a.text=c[this.NODE_VALUE_MAPPER]}}return new Ext.Toolbar.TextItem(a)},createRefWrapper:function(a){a=!Ext.isDefined(a)?false:a;var b={defaults:{xtype:"container",layout:"form",labelAlign:a?"top":"left"},items:[]};if(a){b.layout="column"}return new Ext.Container(b)},wrapField:function(j,g,f,e,c){var d=this.NODE_ID_MAPPER,a={};e=Ext.isDefined(e)?e:1;Ext.apply(a,{layout:"form",columnWidth:e,labelWidth:this.labelWidth,items:g});a[d]=f[d];var b=new Ext.Container(a);b.on("beforedestroy",function(k){this.unmapCmpFromModel(k[this.NODE_ID_MAPPER])},this);this.mapCmpToModel(f[d],b);Ext.isNumber(c)?j.insert(c,b):j.add(b)},getColumnWidth:function(b,d){var e=0,a=b.length;if(d<a){for(var c=d;c<a;c++){e++;if(b[c].ref["break"]==true){break}}}e=(e==0)?1:e;return Ext.util.Format.round(1/e,2)},getButtonIndex:function(f,a,e){var d=this.controller.getViewDefinition(),c=d.getEntityObj(f,a).idx;c=(c==null)?0:c;e=Ext.isDefined(e)?e:"button";if(e=="action"){var b=this.getFooterToolbar().items.getCount();if(c<b){c+=b-c}}return c},getFieldIndex:function(d,a){var c=this.controller.getViewDefinition(),b=c.getEntityObj(d,a).idx;b=(b==null)?0:b;return b},getDefaultSetInsertFieldIndex:function(d,c){var e=this.getDefaultSet(),a=d.indexOf(c),b=null;if(e==null){return 0}e.items.each(function(g,f){var j=d.indexOf(this.getModelByCmp(g));if(a<j){b=f;return false}},this);if(b==null){b=e.items.getCount()}return b},getFieldSetInsertionIndex:function(d,j,b,c){var a=-1;if(this.isSetTabbed(j)){var f=this.getTabbedSet();if(this.isSetTabbed(b)){a=f.items.indexOf(c.ownerCt)}if(a==-1){var e=this.getTabbedFieldSets(),g=d.indexOf(b);Ext.each(e,function(p,k){var q=this.getModelNode(p[this.NODE_ID_MAPPER]),m=d.indexOf(q);if(g<m){var o=this.getCmpByModel(q).ownerCt;a=f.items.indexOf(o);return false}},this);if(a==-1){a=e.length-1}}}else{a=this.items.indexOf(c);if(a==-1){var e=this.getPlainFieldSets(),g=d.indexOf(b);Ext.each(e,function(o,k){var p=this.getModelNode(o[this.NODE_ID_MAPPER]),m=d.indexOf(p);if(g<m){a=this.items.indexOf(this.getCmpByModel(p));return false}},this);if(a==-1){a=e.length-1}}}return a},dumpMapper:function(){afStudio.Logger.info("modelMapper",this.modelMapper);Ext.iterate(this.modelMapper,function(b,a,c){afStudio.Logger.info(b,a)})}});Ext.applyIf(afStudio.wd.edit.EditView.prototype,afStudio.wd.ModelMapper);Ext.apply(afStudio.wd.edit.EditView.prototype,afStudio.wd.edit.EditModelInterface);Ext.apply(afStudio.wd.edit.EditView.prototype,afStudio.wd.edit.EditModelReflector);Ext.reg("wd.editView",afStudio.wd.edit.EditView);Ext.ns("afStudio.wd.show");afStudio.wd.show.ShowView=Ext.extend(Ext.FormPanel,{initComponent:function(){afStudio.wd.show.ShowView.superclass.initComponent.apply(this,arguments);this.messageBox=new afStudio.layoutDesigner.view.ViewMessageBox({viewContainer:this,viewMessage:'<p>"Show" widget GUI is under development</p> <span style="font-size:10px;">You can work with widget, to see the results use "Preview" button.</span>'});this.add(this.messageBox);this.on("afterlayout",function(){this.messageBox.onAfterRender()},this)}});Ext.ns("afStudio.wd.html");afStudio.wd.html.HtmlView=Ext.extend(Ext.FormPanel,{initComponent:function(){afStudio.wd.html.HtmlView.superclass.initComponent.apply(this,arguments);this.messageBox=new afStudio.layoutDesigner.view.ViewMessageBox({viewContainer:this,viewMessage:'<p>"Html" widget GUI is under development</p> <span style="font-size:10px;">You can work with widget, to see the results use "Preview" button.</span>'});this.add(this.messageBox);this.on("afterlayout",function(){this.messageBox.onAfterRender()},this)}});afStudio.WD=function(){return{previewWidget:function(b,c){var a=Ext.urlAppend(afStudioWSUrls.widgetPreviewUrl,Ext.urlEncode({uri:b,title:c}));window.open(a,"widget-preview")},getGuiView:function(a){var c=a.ucfirst()+"View";try{return afStudio.wd[a][c]}catch(b){afStudio.Msg.warning("Widget Designer",String.format("<b>{0}</b> was not found <br/> view type - <u>{1}</u>",c,a))}return null},showWidgetDesigner:function(a){var b=new afStudio.controller.ViewController({widget:a,listeners:{ready:function(d){var e=d.getModelType(),c=afStudio.WD.getGuiView(e);if(c){d.registerView("widget",c)}else{afStudio.vp.clearWorkspace();afStudio.Msg.info(String.format("View type {0} is under development",e));return}afStudio.vp.addToWorkspace({xtype:"wd",controller:d},true)}}});b.run()},getViewCarcass:function(a){return{attributes:{"type":a,"xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation":"http://www.appflower.com/schema/appflower.xsd","xmlns:i":"http://www.appflower.com/schema/"}}}}}();Ext.namespace("afStudio.wd");afStudio.wd.WDContainer=Ext.extend(Ext.Container,{layout:"border",initComponent:function(){Ext.apply(this,{defaults:{margins:"5"},items:[{region:"center",ref:"widgetdesigner",xtype:"widgetdesigner",controller:this.controller},{region:"east",ref:"filetree",xtype:"filetreepanel",width:280,minWidth:200,split:true,collapsible:true,collapsed:true,cmargins:"5",title:"Code Browser",url:afStudioWSUrls.getFiletreeUrl,rootText:"Home",maxFileSize:524288*2*10,autoScroll:true,enableProgress:false}]});afStudio.wd.WDContainer.superclass.initComponent.apply(this,arguments);this.filetree.fileCt=this.widgetdesigner}});Ext.reg("wd",afStudio.wd.WDContainer);Ext.override(Ext.grid.GridDragZone,{afterRepair:function(){Ext.fly(this.DDM.currentTarget).parent("TABLE").frame("#FFA7A7",1);this.dragging=false}});Ext.ns("afStudio.wd");afStudio.wd.WidgetsBuilder=Ext.extend(Ext.Window,{_beforeInitComponent:function(){var b=this;this.RelationRec=Ext.data.Record.create(["id","model","name","field","type","size"]);this.relationsGrid=new Ext.grid.GridPanel({id:"rel-grid",flex:1,ddGroup:"widgetsBuilderRel",enableDragDrop:true,loadMask:true,border:true,style:"padding-bottom: 5px;",autoScroll:true,store:new Ext.data.ArrayStore({idIndex:0,fields:["id","model","name","field","type","size"]}),viewConfig:{scrollOffset:19,forceFit:true},columns:[{header:"Selected fields",sortable:false,menuDisabled:true,width:170,dataIndex:"name"}],bbar:{items:["->",{text:"Remove All",ref:"../removeAllBtn",iconCls:"afs-icon-delete",disabled:true,handler:function(){var c=b.relationsGrid.store.getRange();b.removeSelectedFields(c)}}]}});this.basket=new Ext.Panel({id:"widgets-basket",height:70,bodyStyle:"padding: 5px;",html:"<center><br>Drop Item here,<br> to remove it</br></center>"});var a=new Ext.grid.CheckboxSelectionModel({singleSelect:true});this.fieldsGrid=new afStudio.common.ModelFieldsGrid({id:"fields-grid",ddGroup:"widgetsBuilder",enableDragDrop:true,multiSelect:true,hidden:true});this.modulesCombo=new afStudio.common.WidgetLocation({locationType:b.placeType,anchor:"100%"});this.actionInput=new Ext.form.TextField({fieldLabel:"Widget Name",allowBlank:false,blankText:"Widget name is required",msgTarget:"qtip",anchor:"100%"});this.typeCombo=new Ext.form.ComboBox({fieldLabel:"Widget Type",triggerAction:"all",anchor:"100%",forceSelection:true,store:[["list","List"],["edit","Edit"],["show","Show"]],value:"list"});this.widgetForm=new Ext.FormPanel({labelWidth:100,bodyStyle:"padding: 5px;",items:[this.modulesCombo,this.actionInput,this.typeCombo]});return{title:"Create new widget",y:150,width:450,height:150,modal:true,tbar:{id:this.id+"help-toolbar",hidden:true,items:["Please select the fields for each model you want to have displayed in your Widget. And drag each field to the Selected fields area."]},layout:"card",activeItem:0,defaults:{border:false,bodyBorder:false},items:[{hideBorders:true,items:b.widgetForm},{layout:"border",items:[{region:"west",margins:"5 5 5 5",layout:"fit",width:220,items:[{xtype:"afStudio.models.modelTree",ref:"../../modelsTree",border:false}]},{region:"center",margins:"5 5 5 0",layout:"fit",items:this.fieldsGrid},{region:"east",margins:"5 5 5 0",layout:"vbox",layoutConfig:{align:"stretch"},width:235,border:false,bodyBorder:false,bodyStyle:"background-color: #DFE8F6",items:[this.relationsGrid,this.basket]}]}],buttonAlign:"left",buttons:[{text:"Cancel",scope:this,handler:this.cancel},"->",{text:"&laquo; Back",id:this.id+"-back-btn",disabled:true,handler:this.chStep.createDelegate(b,[0])},{text:"Next &raquo;",id:this.id+"-next-btn",handler:this.chStep.createDelegate(b,[1])},{text:"Save &raquo;",id:this.id+"-save-btn",hidden:true,scope:this,handler:this.create}]}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.wd.WidgetsBuilder.superclass.initComponent.apply(this,arguments);this._afterInitComponent()},_afterInitComponent:function(){this.addEvents("widgetcreated");this.on("show",this.onWndShow,this);this.relationsGrid.getView().on("refresh",this.onRelGridRefresh);this.modelsTree.on({scope:this,click:this.onModelClick,modelsload:this.onModelsLoad})},onWndShow:function(){var c=this;c.widgetForm.items.itemAt(0).focus(true,200);var a=this.relationsGrid.getView().scroller.dom;new Ext.dd.DropTarget(a,{ddGroup:"widgetsBuilder",notifyDrop:function(o,n,j){var g=o.dragData.selections,k=c.modelsTree.getSelectionModel().getSelectedNode(),f=c.modelsTree.getModel(k);if(!Ext.isEmpty(g)){o.grid.store.remove(g);Ext.each(g,function(e){var e=new c.RelationRec({id:e.get("id"),model:f,name:f+"."+e.get("name"),field:e.get("name"),type:e.get("type"),size:e.get("size"),required:e.get("required")});c.relationsGrid.store.add(e)});c.relationsGrid.removeAllBtn.enable();return true}else{this.dragging=false}}});var d=c.basket;var b=d.body.dom;new Ext.dd.DropTarget(b,{ddGroup:"widgetsBuilderRel",notifyEnter:function(k,j,f){d.body.stopFx();var g=f.grid.getId();if("fields-grid"==g){return this.dropNotAllowed}else{d.body.highlight("#E56060");return this.dropAllowed}},notifyDrop:function(k,j,f){var g=f.grid.getId();if("fields-grid"==g){Ext.fly(this.DDM.currentTarget).parent("TABLE").frame("#8db2e3",1);this.dragging=false;return false}else{c.removeSelectedFields(k.dragData.selections);return true}}})},removeSelectedFields:function(c){if(Ext.isEmpty(c)){return}this.relationsGrid.store.remove(c);if(this.relationsGrid.store.getCount()==0){this.relationsGrid.removeAllBtn.disable()}var d=this.modelsTree.getSelectionModel().getSelectedNode(),b=d?this.modelsTree.getModel(d):null,a=this.fieldsGrid.store;if(b==null){return}Ext.each(c,function(e){if(e.get("model")==b&&!a.getById(e.get("id"))){var f=new a.recordType({id:e.get("id"),name:e.get("field"),type:e.get("type"),size:e.get("size"),required:e.get("required")});a.add(f)}})},loadModelFields:function(b,d){var c=this.modelsTree.getSchema(b),a=this.modelsTree.getModel(b);this.fieldsGrid.getStore().load({params:{schema:c,model:a},callback:d||Ext.emptyFn})},onModelClick:function(a,b){this.fieldsGrid.show();this.loadModelFields(a)},onModelsLoad:function(a,b){this.fieldsGrid.getStore().removeAll();this.fieldsGrid.hide()},onRelGridRefresh:function(o){var a=o.grid,b=a.getStore();for(var g=0,m=b.getCount();g<m;g++){var c=b.getAt(g);var k="<b>Field Specification</b><br>";k+="<br><b>Model: </b>"+c.get("model");k+="<br><b>Field: </b>"+c.get("field");var n=c.get("type");if(n){k+="<br><b>Type: </b>"+n}var q=c.get("size");if(q){k+="<br><b>Size: </b>"+q}var p=o.getRow(g);var f=Ext.get(p).select(".x-grid3-cell-inner");for(var e=0,d=f.getCount();e<d;e++){Ext.QuickTips.register({target:f.item(e),text:k})}}},chStep:function(c){var a;if(c==1){var b=this.widgetForm;if(!b.getForm().isValid()){return}a={width:840,height:450};Ext.getCmp(this.id+"-save-btn").show();Ext.getCmp(this.id+"-next-btn").hide();Ext.getCmp(this.id+"-back-btn").enable();Ext.getCmp(this.id+"help-toolbar").show()}else{a={width:450,height:150};Ext.getCmp(this.id+"-save-btn").hide();Ext.getCmp(this.id+"-next-btn").show();Ext.getCmp(this.id+"-back-btn").disable();Ext.getCmp(this.id+"help-toolbar").hide()}this.setSize(a);this.setPagePosition((Ext.getBody().getWidth()-a.width)/2,150);this.getLayout().setActiveItem(c)},create:function(){var c=[];this.relationsGrid.getStore().each(function(j){if(j.data){c.push(j.data)}});if(Ext.isEmpty(c)){afStudio.Msg.warning("Widget Builder","Widget can be created - <u>no one field is selected</u>");return}var d=this.modulesCombo.getValue(),f=this.actionInput.getValue(),b=d.module+"/"+f,e=this.typeCombo.getValue(),a=d.place;var g=this.buildWidgetDefinition(f,e,c);afStudio.xhr.executeAction({url:afStudioWSUrls.widgetSaveDefinitionUrl,params:{uri:b,data:Ext.util.JSON.encode(g),createNewWidget:true,widgetType:e,place:a,placeType:this.placeType},mask:true,scope:this,run:function(j,k){this.fireEvent("widgetcreated",j);this.close()}})},cancel:function(){this.close()},buildWidgetDefinition:function(g,f,e){var k=afStudio.WD.getViewCarcass(f),c=afStudio.ModelNode;k[c.TITLE]=g;k[c.FIELDS]={};var a;if(e.length>1){a=[];Ext.each(e,function(m){a.push({attributes:{name:m.field,label:m.field.ucfirst()}})})}else{a={attributes:{name:e[0].field,label:e[0].field.ucfirst()}}}if(f!="list"){k[c.FIELDS][c.FIELD]=a}else{k[c.FIELDS][c.COLUMN]=a}var d=e[0].model,b=k[c.DATA_SOURCE]={attributes:{type:"orm"}};var j=b[c.METHOD]={attributes:{name:null}};if(f=="list"){b.attributes.modelName=d;b[c.CLASS]="ModelCriteriaFetcher";j.attributes.name="getDataForList";j[c.PARAM]={attributes:{name:"modelName"},_content:d}}else{b[c.CLASS]=d+"Peer";j.attributes.name="retrieveByPk";j[c.PARAM]={attributes:{name:"id"},_content:"{id}"}}return k}});afStudio.wd.ModelErrorWindow=Ext.extend(Ext.Window,{layout:"fit",_beforeInitComponent:function(){var b=this;var a=new Ext.ux.tree.TreeGrid({enableHdMenu:false,enableSort:false,root:new Ext.tree.AsyncTreeNode({children:[]}),loader:{baseAttrs:{expanded:true}},columns:[{header:"Node",dataIndex:"node",width:200},{header:"Errors",width:360,dataIndex:"error",tpl:new Ext.XTemplate('<tpl for=".">{[this.getError(values.error)]}</tpl>',{getError:function(d){var c="";if(d){Ext.each(d,function(e){Ext.iterate(e,function(g,f){c+=String.format("<b>{0}</b> : {1}",g,f)});c+="<br />"})}else{c="---"}return c}})}]});this.tree=a;return{title:"Widget Designer",closeAction:"hide",frame:true,width:600,height:320,iconCls:"icon-notification-error",closable:false,resizable:true,items:a,buttonAlign:"center",buttons:[{text:"Close",scope:b,handler:b.closeWindow}]}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.wd.ModelErrorWindow.superclass.initComponent.apply(this,arguments)},initEvents:function(){afStudio.wd.ModelErrorWindow.superclass.initEvents.call(this);this.on({scope:this,show:this.onShowWindow})},closeWindow:function(){if(this.closeAction=="hide"){this.hide()}else{this.close()}},onShowWindow:function(){var b=this.tree,a=b.getLoader(),c=b.getRootNode();c.attributes=this.modelErrors;a.load(c)}});afStudio.wd.DesignerPanel=Ext.extend(Ext.Panel,{layout:"fit",_beforeInitComponent:function(){var a=this,e=this.controller,d=e.getView("widget");var b=[{text:"Save",itemId:"saveBtn",iconCls:"icon-save",listeners:{scope:a,click:a.onSaveWidget}},"-",{text:"Preview",itemId:"previewBtn",iconCls:"icon-preview",listeners:{scope:a,click:a.onPreviewWidget}}];return{border:true,bodyStyle:"padding: 4px;",tbar:{items:b},items:d}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.wd.DesignerPanel.superclass.initComponent.apply(this,arguments)},getMenuItem:function(a){return this.getTopToolbar().getComponent(a)},showWidgetErrors:function(a){if(!this.errorWin){this.errorWin=new afStudio.wd.ModelErrorWindow()}this.errorWin.modelErrors=a;this.errorWin.show()},onSaveWidget:function(){var b=this.controller,a=b.validateModel();if(a===true){b.saveView()}else{this.showWidgetErrors(a)}},onPreviewWidget:function(){var f=this.controller,b=f.getWidget();var a=f.getRootNode(),e=a.getImmediateModelNode(afStudio.ModelNode.TITLE),d=e?e.getNodeDataValue():null;afStudio.WD.previewWidget(b.uri,d)}});Ext.reg("wd.designerPanel",afStudio.wd.DesignerPanel);afStudio.wd.InspectorPalette=Ext.extend(Ext.Container,{layout:"accordion",style:"border-top: 1px solid #99BBE8;",_beforeInitComponent:function(){var d=this.controller,a=d.getView("inspectorTree"),b=d.getView("propertyGrid");return{items:[{title:"Widget Inspector",layout:"border",defaults:{layout:"fit",border:false},items:[{region:"center",ref:"../itCt",items:a},{region:"south",ref:"../pgCt",split:true,collapseMode:"mini",items:b}]}]}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.wd.InspectorPalette.superclass.initComponent.apply(this,arguments);this._afterInitComponent()},_afterInitComponent:function(){this.on({scope:this,afterrender:function(){(function(){h=this.pgCt.ownerCt.getInnerHeight()/2;this.pgCt.setHeight(h);this.pgCt.ownerCt.doLayout()}).defer(100,this)}})}});Ext.reg("wd.inspectorPalette",afStudio.wd.InspectorPalette);afStudio.wd.Editor=Ext.extend(Ext.Container,{layout:"fit",_beforeInitComponent:function(){var a={};if(this.file){a.file=this.file;delete this.file}if(this.theme){a.theme=this.theme;delete this.theme}if(this.mode){a.mode=this.mode;delete this.mode}if(this.fileUrl){a.fileUrl=this.fileUrl;delete this.fileUrl}this.ace=new Ext.ux.AceComponent(a);return{items:this.ace}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.wd.Editor.superclass.initComponent.apply(this,arguments)},getCode:function(){return this.ace.getCode()},setFile:function(a,b){this.ace.setFile(a,b)},getFile:function(){return this.ace.file}});Ext.namespace("afStudio.wd");afStudio.wd.CodeEditor=Ext.extend(Ext.Panel,{layout:"fit",closable:true,_beforeInitComponent:function(){var b=this,a=this.findParentByType("widgetdesigner");b.ace=new afStudio.wd.Editor({file:this.file});return{title:this.fileName,iconCls:"icon-script-edit",tbar:[{text:"Save",itemId:"saveBtn",iconCls:"icon-save"}],defaults:{style:"padding: 5px;"},items:{layout:"fit",items:b.ace}}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.wd.CodeEditor.superclass.initComponent.apply(this,arguments);this._afterInitComponent()},_afterInitComponent:function(){var a=this,b=this.getTopToolbar().getComponent("saveBtn");b.on("click",a.onCodeSave,a)},onCodeSave:function(){var a=this,b=a.ace;afStudio.xhr.executeAction({url:afStudioWSUrls.getFilecontentUrl,params:{file:b.getFile(),code:b.getCode()},scope:a,logMessage:String.format('WD file "{0}" [{1}] was saved',this.fileName,this.file)})},setFile:function(b,c,a){if(a==this.file){this.setTitle(b);this.fileName=b;this.file=c;this.ace.setFile(this.file,true)}else{this.file=this.file.replace(a,c);this.ace.setFile(this.file)}}});Ext.reg("wd.codeEditor",afStudio.wd.CodeEditor);Ext.namespace("afStudio.wd");afStudio.wd.Designer=Ext.extend(Ext.Panel,{layout:"border",_beforeInitComponent:function(){var a=this.controller;return{title:"Widget Designer",defaults:{layout:"fit",border:false,style:"padding: 4px;"},items:[{region:"center",items:[{xtype:"wd.designerPanel",controller:a}]},{region:"east",width:350,minWidth:300,split:true,collapseMode:"mini",baseCls:"x-plain",items:[{xtype:"wd.inspectorPalette",controller:a}]}]}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.wd.Designer.superclass.initComponent.apply(this,arguments)}});Ext.reg("wd.designer",afStudio.wd.Designer);Ext.namespace("afStudio.wd");afStudio.wd.WidgetDesigner=Ext.extend(Ext.TabPanel,{_beforeInitComponent:function(){var b=this.controller,a=b.getWidget();return{activeTab:0,enableTabScroll:true,items:[{xtype:"wd.designer",controller:b},{xtype:"wd.codeEditor",fileName:"security.yml",tabTip:a.securityPath,file:a.securityPath},{xtype:"wd.codeEditor",fileName:a.actionName,tabTip:a.actionPath,file:a.actionPath}]}},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,this._beforeInitComponent()));afStudio.wd.WidgetDesigner.superclass.initComponent.apply(this,arguments)},addCodeEditorTab:function(c,b){var a=this.add({xtype:"wd.codeEditor",fileName:c,tabTip:b,file:b});this.setActiveTab(a.getId())},findCodeTabs:function(d,c){var b=this.findByType("wd.codeEditor",true),a=[];Ext.each(b,function(g){var e=g.file;if(e&&(c?e==d:e.indexOf(d)===0)){a.push(g)}});return a},openFile:function(a,b){var c=this.findCodeTabs(b,true);if(c.length>0){c[0].show()}else{this.addCodeEditorTab(a,b)}},renameFile:function(b,d,a){var c=this.findCodeTabs(a);Ext.each(c,function(e){e.setFile(b,d,a)},this)},deleteFile:function(b){var a=this.findCodeTabs(b);Ext.each(a,function(c){this.remove(c)},this)},beforeDestroy:function(){Ext.destroy(this.controller);afStudio.wd.WidgetDesigner.superclass.beforeDestroy.apply(this)}});Ext.reg("widgetdesigner",afStudio.wd.WidgetDesigner);afStudio.UserWindow=Ext.extend(Ext.Window,{form:null,mode:"add",formData:null,isRoleFieldAvailable:true,captchaSrc:"/afsUserManager/captcha?width=415&height=50",initComponent:function(){this.initForm();var b=("edit"==this.mode)?"You can edit an existing user from this widget":"You can add a new user from this widget";var a={width:463,title:b,autoHeight:true,closable:true,draggable:true,plain:true,modal:true,resizable:false,bodyBorder:false,border:false,items:this.form,buttons:[{text:"Save user data",handler:this.saveForm,scope:this},{text:"Cancel",handler:this.closeForm,scope:this}],buttonAlign:"center"};Ext.apply(this,Ext.apply(this.initialConfig,a));afStudio.UserWindow.superclass.initComponent.apply(this,arguments);this._initEvents()},initForm:function(){var a=[{name:"first_name",fieldLabel:"First Name"},{name:"last_name",fieldLabel:"Last Name"},{name:"username",fieldLabel:"Username",readOnly:("edit"==this.mode)?true:false,vtype:"username"},{name:"email",fieldLabel:"Email",vtype:"email"},{name:"password",inputType:"password",fieldLabel:"Password",allowBlank:("edit"==this.mode)?true:false},{xtype:"combo",mode:"local",triggerAction:"all",hidden:(this.isRoleFieldAvailable&&afStudioUser.is_admin)?false:true,disabled:(this.isRoleFieldAvailable&&afStudioUser.is_admin)?false:true,fieldLabel:"User Role",emptyText:"Please select user role...",store:[["admin","Administrator"],["user","Studio User"]],hiddenName:"role",name:"role"}];if(false==this.isRoleFieldAvailable){a[a.length]={fieldLabel:"Verification",helpText:"<i>Type the code you see below</i>",name:"captcha",emptyText:"Please enter text from the verification image..."};a[a.length]={xtype:"label",html:['<img style="cursor: pointer;" ext:qtip="Please click on the picture if you can\'t see the symbols" id="verificationimage" src="',this.captchaSrc,'">'].join("")}}this.form=new Ext.FormPanel({url:"",defaultType:"textfield",width:450,labelWidth:70,frame:true,title:false,defaults:{allowBlank:false,anchor:"95%",plugins:[Ext.ux.plugins.HelpText],helpType:"comment"},items:a})},closeForm:function(){this.close()},saveForm:function(){var a=this.form.getForm();if(a.isValid()){var b=a.getValues();Ext.Ajax.request({url:("edit"==this.mode)?"/afsUserManager/update":"/afsUserManager/create",params:{username:b["username"],user:Ext.encode(b)},success:function(d,e){d=Ext.decode(d.responseText);if(!d.success){if(Ext.isArray(d.message)){for(var f=0,c=d.message.length;f<c;f++){var g=d.message[f];this.form.find("name",g.fieldname)[0].markInvalid(g.message)}}if(false==this.isRoleFieldAvailable){this.refreshCaptcha()}}else{afStudio.Msg.info("System Message",d.message);this.closeForm();if(Ext.isFunction(this.onFormClose)){this.onFormClose()}}},failure:function(c,d){},scope:this})}},refreshCaptcha:function(){var a=(new Date()).format("U");var b=Ext.get("verificationimage");b.dom.src=[this.captchaSrc,"&",a].join("")},onWindowShow:function(a){if("edit"==this.mode){a.getEl().mask("Please wait...");Ext.Ajax.request({url:"/afsUserManager/get",params:{username:this.username},success:function(b,c){a.getEl().unmask();b=Ext.decode(b.responseText);this.setUserData(b)},failure:function(b,c){},scope:this})}if(Ext.get("verificationimage")){Ext.get("verificationimage").on("click",this.refreshCaptcha,this)}},setUserData:function(a){if(a){this.form.getForm().setValues({first_name:a.first_name,last_name:a.last_name,username:a.username,email:a.email,role:a.role})}},_initEvents:function(){this.on({"show":this.onWindowShow,scope:this})},cancel:function(){this.close()}});afStudio.UsersList=Ext.extend(Ext.Window,{initComponent:function(){this.createUserGrid();var a={tbar:[{text:"Create user",iconCls:"icon-add",handler:this.showDialog,scope:this}],title:"Users Management",width:813,layout:"fit",height:550,closable:true,draggable:true,modal:true,resizable:false,bodyBorder:false,border:false,items:[this.usersGrid],buttonAlign:"center"};Ext.apply(this,Ext.apply(this.initialConfig,a));afStudio.UsersList.superclass.initComponent.apply(this,arguments);this._initEvents()},onUserDelete:function(d,b){var a=Ext.getCmp("manage-users-grid");var f=b.getAttribute("username");if(f){var c=function(e){if("yes"==e){Ext.Ajax.request({url:"afsUserManager/delete",params:{username:f},callback:function(j,k,g){g=Ext.decode(g.responseText);if(!g.success){Ext.Msg.alert("Failure","Server-side failure with status code: "+g.status)}else{Ext.Msg.alert("System Message","User was successfully deleted");a.getStore().load()}}})}};Ext.Msg.confirm("Delete user","Are you sure want delete selected user?",c)}},onUserEdit:function(c,a){var d=a.getAttribute("username");var b=function(){Ext.getCmp("manage-users-grid").getStore().load()};(new afStudio.UserWindow({mode:"edit",username:d,onFormClose:b})).show()},refreshGrid:function(){Ext.getCmp("manage-users-grid").getStore().load()},showDialog:function(b,a){(new afStudio.UserWindow({mode:"add",onFormClose:this.refreshGrid})).show()},createUserGrid:function(){var c=Ext.data.Record.create([{name:"id",type:"int"},{name:"first_name"},{name:"last_name"},{name:"email"},{name:"password"},{name:"role"},{name:"username"}]);var d=new Ext.data.Store({proxy:new Ext.data.HttpProxy({url:"/afsUserManager/getList"}),reader:new Ext.data.JsonReader({root:"data",totalProperty:"total",id:"id",fields:c}),remoteSort:true,listeners:{"load":function(){Ext.addBehaviors({"IMG.deleteUserEmptyCls@click":this.onUserDelete,"IMG.editUserEmptyCls@click":this.onUserEdit})},scope:this}});var b=function(e,g,f){return'<img class="deleteUserEmptyCls" username="'+e+'" ext:qtip="Delete User" style="cursor: pointer;" src="/appFlowerStudioPlugin/images/delete.png">'+'<img class="editUserEmptyCls" username="'+e+'" ext:qtip="Edit User" style="cursor: pointer;margin-left: 5px" src="/appFlowerStudioPlugin/images/pencil.png">';return e};var a=new Ext.grid.ColumnModel([new Ext.grid.RowNumberer(),{header:"First Name",sortable:false,dataIndex:"first_name"},{header:"Last Name",sortable:false,dataIndex:"last_name"},{header:"Username",sortable:false,dataIndex:"username"},{header:"Email",sortable:false,dataIndex:"email"},{header:"Role",sortable:false,fixed:true,width:75,dataIndex:"role"},{header:"Actions",sortable:false,fixed:true,width:75,dataIndex:"username",renderer:b}]);this.usersGrid=new Ext.grid.GridPanel({id:"manage-users-grid",store:d,showDialog:this.showDialog,viewConfig:{scrollOffset:19,forceFit:true},cm:a,loadMask:true,border:true,autoScroll:true})},onWindowShow:function(){this.usersGrid.getStore().load()},_initEvents:function(){this.on({"show":this.onWindowShow,scope:this})},cancel:function(){this.close()}});
/*
 * jQuery JavaScript Library v1.4.4
 * http://jquery.com/
 *
 * Copyright 2010, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2010, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Date: Thu Nov 11 19:04:53 2010 -0500
 */
(function(az,aD){function k(t,c,E){if(E===aD&&t.nodeType===1){E=t.getAttribute("data-"+c);if(typeof E==="string"){try{E=E==="true"?true:E==="false"?false:E==="null"?null:!ad.isNaN(E)?parseFloat(E):ae.test(E)?ad.parseJSON(E):E}catch(B){}ad.data(t,c,E)}else{E=aD}}return E}function ao(){return false}function L(){return true}function a1(t,c,B){B[0].type=t;return ad.event.handle.apply(c,B)}function D(a6){var Z,Y,X,W,V,P,U,E,ab,c,B,t=[];W=[];V=ad.data(this,this.nodeType?"events":"__events__");if(typeof V==="function"){V=V.events}if(!(a6.liveFired===this||!V||!V.live||a6.button&&a6.type==="click")){if(a6.namespace){B=RegExp("(^|\\.)"+a6.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)")}a6.liveFired=this;var aa=V.live.slice(0);for(U=0;U<aa.length;U++){V=aa[U];V.origType.replace(al,"")===a6.type?W.push(V.selector):aa.splice(U--,1)}W=ad(a6.target).closest(W,a6.currentTarget);E=0;for(ab=W.length;E<ab;E++){c=W[E];for(U=0;U<aa.length;U++){V=aa[U];if(c.selector===V.selector&&(!B||B.test(V.namespace))){P=c.elem;X=null;if(V.preType==="mouseenter"||V.preType==="mouseleave"){a6.type=V.preType;X=ad(a6.relatedTarget).closest(V.selector)[0]}if(!X||X!==P){t.push({elem:P,handleObj:V,level:c.level})}}}}E=0;for(ab=t.length;E<ab;E++){W=t[E];if(Y&&W.level>Y){break}a6.currentTarget=W.elem;a6.data=W.handleObj.data;a6.handleObj=W.handleObj;B=W.handleObj.origHandler.apply(W.elem,arguments);if(B===false||a6.isPropagationStopped()){Y=W.level;if(B===false){Z=false}if(a6.isImmediatePropagationStopped()){break}}}return Z}}function ak(t,c){return(t&&t!=="*"?t+".":"")+c.replace(p,"`").replace(a5,"&")}function aO(t,c,E){if(ad.isFunction(c)){return ad.grep(t,function(U,P){return !!c.call(U,P,U)===E})}else{if(c.nodeType){return ad.grep(t,function(P){return P===c===E})}else{if(typeof c==="string"){var B=ad.grep(t,function(P){return P.nodeType===1});if(aT.test(c)){return ad.filter(c,B,!E)}else{c=ad.filter(c,B)}}}}return ad.grep(t,function(P){return ad.inArray(P,c)>=0===E})}function aA(t,c){var B=0;c.each(function(){if(this.nodeName===(t[B]&&t[B].nodeName)){var V=ad.data(t[B++]),U=ad.data(this,V);if(V=V&&V.events){delete U.handle;U.events={};for(var P in V){for(var E in V[P]){ad.event.add(this,P,V[P][E],V[P][E].data)}}}}})}function aG(t,c){c.src?ad.ajax({url:c.src,async:false,dataType:"script"}):ad.globalEval(c.text||c.textContent||c.innerHTML||"");c.parentNode&&c.parentNode.removeChild(c)}function ac(t,c,E){var B=c==="width"?t.offsetWidth:t.offsetHeight;if(E==="border"){return B}ad.each(c==="width"?ah:H,function(){E||(B-=parseFloat(ad.css(t,"padding"+this))||0);if(E==="margin"){B+=parseFloat(ad.css(t,"margin"+this))||0}else{B-=parseFloat(ad.css(t,"border"+this+"Width"))||0}});return B}function w(t,c,E,B){if(ad.isArray(c)&&c.length){ad.each(c,function(U,P){E||s.test(t)?B(t,P):w(t+"["+(typeof P==="object"||ad.isArray(P)?U:"")+"]",P,E,B)})}else{if(!E&&c!=null&&typeof c==="object"){ad.isEmptyObject(c)?B(t,""):ad.each(c,function(U,P){w(t+"["+U+"]",P,E,B)})}else{B(t,c)}}}function aq(t,c){var B={};ad.each(C.concat.apply([],C.slice(0,c)),function(){B[this]=t});return B}function o(t){if(!g[t]){var c=ad("<"+t+">").appendTo("body"),B=c.css("display");c.remove();if(B==="none"||B===""){B="block"}g[t]=B}return g[t]}function aY(c){return ad.isWindow(c)?c:c.nodeType===9?c.defaultView||c.parentWindow:false}var J=az.document,ad=function(){function bn(){if(!bm.isReady){try{J.documentElement.doScroll("left")}catch(bo){setTimeout(bn,1);return}bm.ready()}}var bm=function(bo,bp){return new bm.fn.init(bo,bp)},bl=az.jQuery,bk=az.$,bj,bh=/^(?:[^<]*(<[\w\W]+>)[^>]*$|#([\w\-]+)$)/,be=/\S/,bf=/^\s+/,bb=/\s+$/,X=/\W/,a7=/\d/,ba=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,a6=/^[\],:{}\s]*$/,V=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,Y=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,W=/(?:^|:|,)(?:\s*\[)+/g,P=/(webkit)[ \/]([\w.]+)/,bi=/(opera)(?:.*version)?[ \/]([\w.]+)/,bg=/(msie) ([\w.]+)/,bc=/(mozilla)(?:.*? rv:([\w.]+))?/,bd=navigator.userAgent,a9=false,a8=[],aa,U=Object.prototype.toString,Z=Object.prototype.hasOwnProperty,E=Array.prototype.push,B=Array.prototype.slice,t=String.prototype.trim,ab=Array.prototype.indexOf,c={};bm.fn=bm.prototype={init:function(bp,br){var bo,bs,bq;if(!bp){return this}if(bp.nodeType){this.context=this[0]=bp;this.length=1;return this}if(bp==="body"&&!br&&J.body){this.context=J;this[0]=J.body;this.selector="body";this.length=1;return this}if(typeof bp==="string"){if((bo=bh.exec(bp))&&(bo[1]||!br)){if(bo[1]){bq=br?br.ownerDocument||br:J;if(bs=ba.exec(bp)){if(bm.isPlainObject(br)){bp=[J.createElement(bs[1])];bm.fn.attr.call(bp,br,true)}else{bp=[bq.createElement(bs[1])]}}else{bs=bm.buildFragment([bo[1]],[bq]);bp=(bs.cacheable?bs.fragment.cloneNode(true):bs.fragment).childNodes}return bm.merge(this,bp)}else{if((bs=J.getElementById(bo[2]))&&bs.parentNode){if(bs.id!==bo[2]){return bj.find(bp)}this.length=1;this[0]=bs}this.context=J;this.selector=bp;return this}}else{if(!br&&!X.test(bp)){this.selector=bp;this.context=J;bp=J.getElementsByTagName(bp);return bm.merge(this,bp)}else{return !br||br.jquery?(br||bj).find(bp):bm(br).find(bp)}}}else{if(bm.isFunction(bp)){return bj.ready(bp)}}if(bp.selector!==aD){this.selector=bp.selector;this.context=bp.context}return bm.makeArray(bp,this)},selector:"",jquery:"1.4.4",length:0,size:function(){return this.length},toArray:function(){return B.call(this,0)},get:function(bo){return bo==null?this.toArray():bo<0?this.slice(bo)[0]:this[bo]},pushStack:function(bp,bq,bo){var br=bm();bm.isArray(bp)?E.apply(br,bp):bm.merge(br,bp);br.prevObject=this;br.context=this.context;if(bq==="find"){br.selector=this.selector+(this.selector?" ":"")+bo}else{if(bq){br.selector=this.selector+"."+bq+"("+bo+")"}}return br},each:function(bo,bp){return bm.each(this,bo,bp)},ready:function(bo){bm.bindReady();if(bm.isReady){bo.call(J,bm)}else{a8&&a8.push(bo)}return this},eq:function(bo){return bo===-1?this.slice(bo):this.slice(bo,+bo+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(B.apply(this,arguments),"slice",B.call(arguments).join(","))},map:function(bo){return this.pushStack(bm.map(this,function(bq,bp){return bo.call(bq,bp,bq)}))},end:function(){return this.prevObject||bm(null)},push:E,sort:[].sort,splice:[].splice};bm.fn.init.prototype=bm.fn;bm.extend=bm.fn.extend=function(){var bo,bw,bt,bq,bs,bu=arguments[0]||{},br=1,bp=arguments.length,bv=false;if(typeof bu==="boolean"){bv=bu;bu=arguments[1]||{};br=2}if(typeof bu!=="object"&&!bm.isFunction(bu)){bu={}}if(bp===br){bu=this;--br}for(;br<bp;br++){if((bo=arguments[br])!=null){for(bw in bo){bt=bu[bw];bq=bo[bw];if(bu!==bq){if(bv&&bq&&(bm.isPlainObject(bq)||(bs=bm.isArray(bq)))){if(bs){bs=false;bt=bt&&bm.isArray(bt)?bt:[]}else{bt=bt&&bm.isPlainObject(bt)?bt:{}}bu[bw]=bm.extend(bv,bt,bq)}else{if(bq!==aD){bu[bw]=bq}}}}}}return bu};bm.extend({noConflict:function(bo){az.$=bk;if(bo){az.jQuery=bl}return bm},isReady:false,readyWait:1,ready:function(bp){bp===true&&bm.readyWait--;if(!bm.readyWait||bp!==true&&!bm.isReady){if(!J.body){return setTimeout(bm.ready,1)}bm.isReady=true;if(!(bp!==true&&--bm.readyWait>0)){if(a8){var bq=0,bo=a8;for(a8=null;bp=bo[bq++];){bp.call(J,bm)}bm.fn.trigger&&bm(J).trigger("ready").unbind("ready")}}}},bindReady:function(){if(!a9){a9=true;if(J.readyState==="complete"){return setTimeout(bm.ready,1)}if(J.addEventListener){J.addEventListener("DOMContentLoaded",aa,false);az.addEventListener("load",bm.ready,false)}else{if(J.attachEvent){J.attachEvent("onreadystatechange",aa);az.attachEvent("onload",bm.ready);var bo=false;try{bo=az.frameElement==null}catch(bp){}J.documentElement.doScroll&&bo&&bn()}}}},isFunction:function(bo){return bm.type(bo)==="function"},isArray:Array.isArray||function(bo){return bm.type(bo)==="array"},isWindow:function(bo){return bo&&typeof bo==="object"&&"setInterval" in bo},isNaN:function(bo){return bo==null||!a7.test(bo)||isNaN(bo)},type:function(bo){return bo==null?String(bo):c[U.call(bo)]||"object"},isPlainObject:function(bo){if(!bo||bm.type(bo)!=="object"||bo.nodeType||bm.isWindow(bo)){return false}if(bo.constructor&&!Z.call(bo,"constructor")&&!Z.call(bo.constructor.prototype,"isPrototypeOf")){return false}for(var bp in bo){}return bp===aD||Z.call(bo,bp)},isEmptyObject:function(bo){for(var bp in bo){return false}return true},error:function(bo){throw bo},parseJSON:function(bo){if(typeof bo!=="string"||!bo){return null}bo=bm.trim(bo);if(a6.test(bo.replace(V,"@").replace(Y,"]").replace(W,""))){return az.JSON&&az.JSON.parse?az.JSON.parse(bo):(new Function("return "+bo))()}else{bm.error("Invalid JSON: "+bo)}},noop:function(){},globalEval:function(bp){if(bp&&be.test(bp)){var bq=J.getElementsByTagName("head")[0]||J.documentElement,bo=J.createElement("script");bo.type="text/javascript";if(bm.support.scriptEval){bo.appendChild(J.createTextNode(bp))}else{bo.text=bp}bq.insertBefore(bo,bq.firstChild);bq.removeChild(bo)}},nodeName:function(bo,bp){return bo.nodeName&&bo.nodeName.toUpperCase()===bp.toUpperCase()},each:function(bq,bt,bp){var bu,br=0,bs=bq.length,bo=bs===aD||bm.isFunction(bq);if(bp){if(bo){for(bu in bq){if(bt.apply(bq[bu],bp)===false){break}}}else{for(;br<bs;){if(bt.apply(bq[br++],bp)===false){break}}}}else{if(bo){for(bu in bq){if(bt.call(bq[bu],bu,bq[bu])===false){break}}}else{for(bp=bq[0];br<bs&&bt.call(bp,br,bp)!==false;bp=bq[++br]){}}}return bq},trim:t?function(bo){return bo==null?"":t.call(bo)}:function(bo){return bo==null?"":bo.toString().replace(bf,"").replace(bb,"")},makeArray:function(bp,bq){var bo=bq||[];if(bp!=null){var br=bm.type(bp);bp.length==null||br==="string"||br==="function"||br==="regexp"||bm.isWindow(bp)?E.call(bo,bp):bm.merge(bo,bp)}return bo},inArray:function(bp,bq){if(bq.indexOf){return bq.indexOf(bp)}for(var bo=0,br=bq.length;bo<br;bo++){if(bq[bo]===bp){return bo}}return -1},merge:function(bp,br){var bo=bp.length,bs=0;if(typeof br.length==="number"){for(var bq=br.length;bs<bq;bs++){bp[bo++]=br[bs]}}else{for(;br[bs]!==aD;){bp[bo++]=br[bs++]}}bp.length=bo;return bp},grep:function(bq,bt,bp){var bu=[],br;bp=!!bp;for(var bs=0,bo=bq.length;bs<bo;bs++){br=!!bt(bq[bs],bs);bp!==br&&bu.push(bq[bs])}return bu},map:function(bq,bt,bp){for(var bu=[],br,bs=0,bo=bq.length;bs<bo;bs++){br=bt(bq[bs],bs,bp);if(br!=null){bu[bu.length]=br}}return bu.concat.apply([],bu)},guid:1,proxy:function(bp,bq,bo){if(arguments.length===2){if(typeof bq==="string"){bo=bp;bp=bo[bq];bq=aD}else{if(bq&&!bm.isFunction(bq)){bo=bq;bq=aD}}}if(!bq&&bp){bq=function(){return bp.apply(bo||this,arguments)}}if(bp){bq.guid=bp.guid=bp.guid||bq.guid||bm.guid++}return bq},access:function(bq,bt,bp,bv,br,bs){var bo=bq.length;if(typeof bt==="object"){for(var bu in bt){bm.access(bq,bu,bt[bu],bv,br,bp)}return bq}if(bp!==aD){bv=!bs&&bv&&bm.isFunction(bp);for(bu=0;bu<bo;bu++){br(bq[bu],bt,bv?bp.call(bq[bu],bu,br(bq[bu],bt)):bp,bs)}return bq}return bo?br(bq[0],bt):aD},now:function(){return(new Date).getTime()},uaMatch:function(bo){bo=bo.toLowerCase();bo=P.exec(bo)||bi.exec(bo)||bg.exec(bo)||bo.indexOf("compatible")<0&&bc.exec(bo)||[];return{browser:bo[1]||"",version:bo[2]||"0"}},browser:{}});bm.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(bo,bp){c["[object "+bp+"]"]=bp.toLowerCase()});bd=bm.uaMatch(bd);if(bd.browser){bm.browser[bd.browser]=true;bm.browser.version=bd.version}if(bm.browser.webkit){bm.browser.safari=true}if(ab){bm.inArray=function(bo,bp){return ab.call(bp,bo)}}if(!/\s/.test("\u00a0")){bf=/^[\s\xA0]+/;bb=/[\s\xA0]+$/}bj=bm(J);if(J.addEventListener){aa=function(){J.removeEventListener("DOMContentLoaded",aa,false);bm.ready()}}else{if(J.attachEvent){aa=function(){if(J.readyState==="complete"){J.detachEvent("onreadystatechange",aa);bm.ready()}}}}return az.jQuery=az.$=bm}();(function(){ad.support={};var Z=J.documentElement,X=J.createElement("script"),W=J.createElement("div"),V="script"+ad.now();W.style.display="none";W.innerHTML="   <link/><table></table><a href='/a' style='color:red;float:left;opacity:.55;'>a</a><input type='checkbox'/>";var U=W.getElementsByTagName("*"),P=W.getElementsByTagName("a")[0],B=J.createElement("select"),E=B.appendChild(J.createElement("option"));if(!(!U||!U.length||!P)){ad.support={leadingWhitespace:W.firstChild.nodeType===3,tbody:!W.getElementsByTagName("tbody").length,htmlSerialize:!!W.getElementsByTagName("link").length,style:/red/.test(P.getAttribute("style")),hrefNormalized:P.getAttribute("href")==="/a",opacity:/^0.55$/.test(P.style.opacity),cssFloat:!!P.style.cssFloat,checkOn:W.getElementsByTagName("input")[0].value==="on",optSelected:E.selected,deleteExpando:true,optDisabled:false,checkClone:false,scriptEval:false,noCloneEvent:true,boxModel:null,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableHiddenOffsets:true};B.disabled=true;ad.support.optDisabled=!E.disabled;X.type="text/javascript";try{X.appendChild(J.createTextNode("window."+V+"=1;"))}catch(t){}Z.insertBefore(X,Z.firstChild);if(az[V]){ad.support.scriptEval=true;delete az[V]}try{delete X.test}catch(Y){ad.support.deleteExpando=false}Z.removeChild(X);if(W.attachEvent&&W.fireEvent){W.attachEvent("onclick",function c(){ad.support.noCloneEvent=false;W.detachEvent("onclick",c)});W.cloneNode(true).fireEvent("onclick")}W=J.createElement("div");W.innerHTML="<input type='radio' name='radiotest' checked='checked'/>";Z=J.createDocumentFragment();Z.appendChild(W.firstChild);ad.support.checkClone=Z.cloneNode(true).cloneNode(true).lastChild.checked;ad(function(){var ab=J.createElement("div");ab.style.width=ab.style.paddingLeft="1px";J.body.appendChild(ab);ad.boxModel=ad.support.boxModel=ab.offsetWidth===2;if("zoom" in ab.style){ab.style.display="inline";ab.style.zoom=1;ad.support.inlineBlockNeedsLayout=ab.offsetWidth===2;ab.style.display="";ab.innerHTML="<div style='width:4px;'></div>";ad.support.shrinkWrapBlocks=ab.offsetWidth!==2}ab.innerHTML="<table><tr><td style='padding:0;display:none'></td><td>t</td></tr></table>";var aa=ab.getElementsByTagName("td");ad.support.reliableHiddenOffsets=aa[0].offsetHeight===0;aa[0].style.display="";aa[1].style.display="none";ad.support.reliableHiddenOffsets=ad.support.reliableHiddenOffsets&&aa[0].offsetHeight===0;ab.innerHTML="";J.body.removeChild(ab).style.display="none"});Z=function(ab){var aa=J.createElement("div");ab="on"+ab;var a6=ab in aa;if(!a6){aa.setAttribute(ab,"return;");a6=typeof aa[ab]==="function"}return a6};ad.support.submitBubbles=Z("submit");ad.support.changeBubbles=Z("change");Z=X=W=U=P=null}})();var a4={},ae=/^(?:\{.*\}|\[.*\])$/;ad.extend({cache:{},uuid:0,expando:"jQuery"+ad.now(),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},data:function(t,c,U){if(ad.acceptData(t)){t=t==az?a4:t;var P=t.nodeType,E=P?t[ad.expando]:null,B=ad.cache;if(!(P&&!E&&typeof c==="string"&&U===aD)){if(P){E||(t[ad.expando]=E=++ad.uuid)}else{B=t}if(typeof c==="object"){if(P){B[E]=ad.extend(B[E],c)}else{ad.extend(B,c)}}else{if(P&&!B[E]){B[E]={}}}t=P?B[E]:B;if(U!==aD){t[c]=U}return typeof c==="string"?t[c]:t}}},removeData:function(B,c){if(ad.acceptData(B)){B=B==az?a4:B;var V=B.nodeType,U=V?B[ad.expando]:B,P=ad.cache,E=V?P[U]:U;if(c){if(E){delete E[c];V&&ad.isEmptyObject(E)&&ad.removeData(B)}}else{if(V&&ad.support.deleteExpando){delete B[ad.expando]}else{if(B.removeAttribute){B.removeAttribute(ad.expando)}else{if(V){delete P[U]}else{for(var t in B){delete B[t]}}}}}}},acceptData:function(t){if(t.nodeName){var c=ad.noData[t.nodeName.toLowerCase()];if(c){return !(c===true||t.getAttribute("classid")!==c)}}return true}});ad.fn.extend({data:function(B,c){var W=null;if(typeof B==="undefined"){if(this.length){var V=this[0].attributes,U;W=ad.data(this[0]);for(var P=0,t=V.length;P<t;P++){U=V[P].name;if(U.indexOf("data-")===0){U=U.substr(5);k(this[0],U,W[U])}}}return W}else{if(typeof B==="object"){return this.each(function(){ad.data(this,B)})}}var E=B.split(".");E[1]=E[1]?"."+E[1]:"";if(c===aD){W=this.triggerHandler("getData"+E[1]+"!",[E[0]]);if(W===aD&&this.length){W=ad.data(this[0],B);W=k(this[0],B,W)}return W===aD&&E[1]?this.data(E[0]):W}else{return this.each(function(){var Y=ad(this),X=[E[0],c];Y.triggerHandler("setData"+E[1]+"!",X);ad.data(this,B,c);Y.triggerHandler("changeData"+E[1]+"!",X)})}},removeData:function(c){return this.each(function(){ad.removeData(this,c)})}});ad.extend({queue:function(t,c,E){if(t){c=(c||"fx")+"queue";var B=ad.data(t,c);if(!E){return B||[]}if(!B||ad.isArray(E)){B=ad.data(t,c,ad.makeArray(E))}else{B.push(E)}return B}},dequeue:function(t,c){c=c||"fx";var E=ad.queue(t,c),B=E.shift();if(B==="inprogress"){B=E.shift()}if(B){c==="fx"&&E.unshift("inprogress");B.call(t,function(){ad.dequeue(t,c)})}}});ad.fn.extend({queue:function(t,c){if(typeof t!=="string"){c=t;t="fx"}if(c===aD){return ad.queue(this[0],t)}return this.each(function(){var B=ad.queue(this,t,c);t==="fx"&&B[0]!=="inprogress"&&ad.dequeue(this,t)})},dequeue:function(c){return this.each(function(){ad.dequeue(this,c)})},delay:function(t,c){t=ad.fx?ad.fx.speeds[t]||t:t;c=c||"fx";return this.queue(c,function(){var B=this;setTimeout(function(){ad.dequeue(B,c)},t)})},clearQueue:function(c){return this.queue(c||"fx",[])}});var aS=/[\n\t]/g,aw=/\s+/,d=/\r/g,aV=/^(?:href|src|style)$/,aI=/^(?:button|input)$/i,aj=/^(?:button|input|object|select|textarea)$/i,I=/^a(?:rea)?$/i,aF=/^(?:radio|checkbox)$/i;ad.props={"for":"htmlFor","class":"className",readonly:"readOnly",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",colspan:"colSpan",tabindex:"tabIndex",usemap:"useMap",frameborder:"frameBorder"};ad.fn.extend({attr:function(t,c){return ad.access(this,t,c,true,ad.attr)},removeAttr:function(c){return this.each(function(){ad.attr(this,c,"");this.nodeType===1&&this.removeAttribute(c)})},addClass:function(X){if(ad.isFunction(X)){return this.each(function(Y){var Z=ad(this);Z.addClass(X.call(this,Y,Z.attr("class")))})}if(X&&typeof X==="string"){for(var W=(X||"").split(aw),V=0,U=this.length;V<U;V++){var P=this[V];if(P.nodeType===1){if(P.className){for(var E=" "+P.className+" ",t=P.className,B=0,c=W.length;B<c;B++){if(E.indexOf(" "+W[B]+" ")<0){t+=" "+W[B]}}P.className=ad.trim(t)}else{P.className=X}}}}return this},removeClass:function(B){if(ad.isFunction(B)){return this.each(function(Y){var X=ad(this);X.removeClass(B.call(this,Y,X.attr("class")))})}if(B&&typeof B==="string"||B===aD){for(var c=(B||"").split(aw),W=0,V=this.length;W<V;W++){var U=this[W];if(U.nodeType===1&&U.className){if(B){for(var P=(" "+U.className+" ").replace(aS," "),t=0,E=c.length;t<E;t++){P=P.replace(" "+c[t]+" "," ")}U.className=ad.trim(P)}else{U.className=""}}}}return this},toggleClass:function(t,c){var E=typeof t,B=typeof c==="boolean";if(ad.isFunction(t)){return this.each(function(U){var P=ad(this);P.toggleClass(t.call(this,U,P.attr("class"),c),c)})}return this.each(function(){if(E==="string"){for(var W,V=0,P=ad(this),U=c,X=t.split(aw);W=X[V++];){U=B?U:!P.hasClass(W);P[U?"addClass":"removeClass"](W)}}else{if(E==="undefined"||E==="boolean"){this.className&&ad.data(this,"__className__",this.className);this.className=this.className||t===false?"":ad.data(this,"__className__")||""}}})},hasClass:function(t){t=" "+t+" ";for(var c=0,B=this.length;c<B;c++){if((" "+this[c].className+" ").replace(aS," ").indexOf(t)>-1){return true}}return false},val:function(B){if(!arguments.length){var c=this[0];if(c){if(ad.nodeName(c,"option")){var W=c.attributes.value;return !W||W.specified?c.value:c.text}if(ad.nodeName(c,"select")){var V=c.selectedIndex;W=[];var U=c.options;c=c.type==="select-one";if(V<0){return null}var P=c?V:0;for(V=c?V+1:U.length;P<V;P++){var t=U[P];if(t.selected&&(ad.support.optDisabled?!t.disabled:t.getAttribute("disabled")===null)&&(!t.parentNode.disabled||!ad.nodeName(t.parentNode,"optgroup"))){B=ad(t).val();if(c){return B}W.push(B)}}return W}if(aF.test(c.type)&&!ad.support.checkOn){return c.getAttribute("value")===null?"on":c.value}return(c.value||"").replace(d,"")}return aD}var E=ad.isFunction(B);return this.each(function(aa){var Y=ad(this),Z=B;if(this.nodeType===1){if(E){Z=B.call(this,aa,Y.val())}if(Z==null){Z=""}else{if(typeof Z==="number"){Z+=""}else{if(ad.isArray(Z)){Z=ad.map(Z,function(ab){return ab==null?"":ab+""})}}}if(ad.isArray(Z)&&aF.test(this.type)){this.checked=ad.inArray(Y.val(),Z)>=0}else{if(ad.nodeName(this,"select")){var X=ad.makeArray(Z);ad("option",this).each(function(){this.selected=ad.inArray(ad(this).val(),X)>=0});if(!X.length){this.selectedIndex=-1}}else{this.value=Z}}}})}});ad.extend({attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attr:function(t,c,U,P){if(!t||t.nodeType===3||t.nodeType===8){return aD}if(P&&c in ad.attrFn){return ad(t)[c](U)}P=t.nodeType!==1||!ad.isXMLDoc(t);var E=U!==aD;c=P&&ad.props[c]||c;var B=aV.test(c);if((c in t||t[c]!==aD)&&P&&!B){if(E){c==="type"&&aI.test(t.nodeName)&&t.parentNode&&ad.error("type property can't be changed");if(U===null){t.nodeType===1&&t.removeAttribute(c)}else{t[c]=U}}if(ad.nodeName(t,"form")&&t.getAttributeNode(c)){return t.getAttributeNode(c).nodeValue}if(c==="tabIndex"){return(c=t.getAttributeNode("tabIndex"))&&c.specified?c.value:aj.test(t.nodeName)||I.test(t.nodeName)&&t.href?0:aD}return t[c]}if(!ad.support.style&&P&&c==="style"){if(E){t.style.cssText=""+U}return t.style.cssText}E&&t.setAttribute(c,""+U);if(!t.attributes[c]&&t.hasAttribute&&!t.hasAttribute(c)){return aD}t=!ad.support.hrefNormalized&&P&&B?t.getAttribute(c,2):t.getAttribute(c);return t===null?aD:t}});var al=/\.(.*)$/,O=/^(?:textarea|input|select)$/i,p=/\./g,a5=/ /g,u=/[^\w\s.|`]/g,e=function(c){return c.replace(u,"\\$&")},ag={focusin:0,focusout:0};ad.event={add:function(ab,Z,Y,X){if(!(ab.nodeType===3||ab.nodeType===8)){if(ad.isWindow(ab)&&ab!==az&&!ab.frameElement){ab=az}if(Y===false){Y=ao}else{if(!Y){return}}var W,V;if(Y.handler){W=Y;Y=W.handler}if(!Y.guid){Y.guid=ad.guid++}if(V=ad.data(ab)){var P=ab.nodeType?"events":"__events__",U=V[P],E=V.handle;if(typeof U==="function"){E=U.handle;U=U.events}else{if(!U){ab.nodeType||(V[P]=V=function(){});V.events=U={}}}if(!E){V.handle=E=function(){return typeof ad!=="undefined"&&!ad.event.triggered?ad.event.handle.apply(E.elem,arguments):aD}}E.elem=ab;Z=Z.split(" ");for(var aa=0,c;P=Z[aa++];){V=W?ad.extend({},W):{handler:Y,data:X};if(P.indexOf(".")>-1){c=P.split(".");P=c.shift();V.namespace=c.slice(0).sort().join(".")}else{c=[];V.namespace=""}V.type=P;if(!V.guid){V.guid=Y.guid}var B=U[P],t=ad.event.special[P]||{};if(!B){B=U[P]=[];if(!t.setup||t.setup.call(ab,X,c,E)===false){if(ab.addEventListener){ab.addEventListener(P,E,false)}else{ab.attachEvent&&ab.attachEvent("on"+P,E)}}}if(t.add){t.add.call(ab,V);if(!V.handler.guid){V.handler.guid=Y.guid}}B.push(V);ad.event.global[P]=true}ab=null}}},global:{},remove:function(a6,Z,Y,X){if(!(a6.nodeType===3||a6.nodeType===8)){if(Y===false){Y=ao}var W,V,P=0,U,E,ab,c,B,t,aa=a6.nodeType?"events":"__events__",a8=ad.data(a6),a7=a8&&a8[aa];if(a8&&a7){if(typeof a7==="function"){a8=a7;a7=a7.events}if(Z&&Z.type){Y=Z.handler;Z=Z.type}if(!Z||typeof Z==="string"&&Z.charAt(0)==="."){Z=Z||"";for(W in a7){ad.event.remove(a6,W+Z)}}else{for(Z=Z.split(" ");W=Z[P++];){c=W;U=W.indexOf(".")<0;E=[];if(!U){E=W.split(".");W=E.shift();ab=RegExp("(^|\\.)"+ad.map(E.slice(0).sort(),e).join("\\.(?:.*\\.)?")+"(\\.|$)")}if(B=a7[W]){if(Y){c=ad.event.special[W]||{};for(V=X||0;V<B.length;V++){t=B[V];if(Y.guid===t.guid){if(U||ab.test(t.namespace)){X==null&&B.splice(V--,1);c.remove&&c.remove.call(a6,t)}if(X!=null){break}}}if(B.length===0||X!=null&&B.length===1){if(!c.teardown||c.teardown.call(a6,E)===false){ad.removeEvent(a6,W,a8.handle)}delete a7[W]}}else{for(V=0;V<B.length;V++){t=B[V];if(U||ab.test(t.namespace)){ad.event.remove(a6,c,t.handler,V);B.splice(V--,1)}}}}}if(ad.isEmptyObject(a7)){if(Z=a8.handle){Z.elem=null}delete a8.events;delete a8.handle;if(typeof a8==="function"){ad.removeData(a6,aa)}else{ad.isEmptyObject(a8)&&ad.removeData(a6)}}}}}},trigger:function(Z,X,W,V){var U=Z.type||Z;if(!V){Z=typeof Z==="object"?Z[ad.expando]?Z:ad.extend(ad.Event(U),Z):ad.Event(U);if(U.indexOf("!")>=0){Z.type=U=U.slice(0,-1);Z.exclusive=true}if(!W){Z.stopPropagation();ad.event.global[U]&&ad.each(ad.cache,function(){this.events&&this.events[U]&&ad.event.trigger(Z,X,this.handle.elem)})}if(!W||W.nodeType===3||W.nodeType===8){return aD}Z.result=aD;Z.target=W;X=ad.makeArray(X);X.unshift(Z)}Z.currentTarget=W;(V=W.nodeType?ad.data(W,"handle"):(ad.data(W,"__events__")||{}).handle)&&V.apply(W,X);V=W.parentNode||W.ownerDocument;try{if(!(W&&W.nodeName&&ad.noData[W.nodeName.toLowerCase()])){if(W["on"+U]&&W["on"+U].apply(W,X)===false){Z.result=false;Z.preventDefault()}}}catch(P){}if(!Z.isPropagationStopped()&&V){ad.event.trigger(Z,X,V,true)}else{if(!Z.isDefaultPrevented()){var B;V=Z.target;var E=U.replace(al,""),t=ad.nodeName(V,"a")&&E==="click",Y=ad.event.special[E]||{};if((!Y._default||Y._default.call(W,Z)===false)&&!t&&!(V&&V.nodeName&&ad.noData[V.nodeName.toLowerCase()])){try{if(V[E]){if(B=V["on"+E]){V["on"+E]=null}ad.event.triggered=true;V[E]()}}catch(c){}if(B){V["on"+E]=B}ad.event.triggered=false}}}},handle:function(B){var c,W,V,U;W=[];var P=ad.makeArray(arguments);B=P[0]=ad.event.fix(B||az.event);B.currentTarget=this;c=B.type.indexOf(".")<0&&!B.exclusive;if(!c){V=B.type.split(".");B.type=V.shift();W=V.slice(0).sort();V=RegExp("(^|\\.)"+W.join("\\.(?:.*\\.)?")+"(\\.|$)")}B.namespace=B.namespace||W.join(".");U=ad.data(this,this.nodeType?"events":"__events__");if(typeof U==="function"){U=U.events}W=(U||{})[B.type];if(U&&W){W=W.slice(0);U=0;for(var t=W.length;U<t;U++){var E=W[U];if(c||V.test(E.namespace)){B.handler=E.handler;B.data=E.data;B.handleObj=E;E=E.handler.apply(this,P);if(E!==aD){B.result=E;if(E===false){B.preventDefault();B.stopPropagation()}}if(B.isImmediatePropagationStopped()){break}}}}return B.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(t){if(t[ad.expando]){return t}var c=t;t=ad.Event(c);for(var E=this.props.length,B;E;){B=this.props[--E];t[B]=c[B]}if(!t.target){t.target=t.srcElement||J}if(t.target.nodeType===3){t.target=t.target.parentNode}if(!t.relatedTarget&&t.fromElement){t.relatedTarget=t.fromElement===t.target?t.toElement:t.fromElement}if(t.pageX==null&&t.clientX!=null){c=J.documentElement;E=J.body;t.pageX=t.clientX+(c&&c.scrollLeft||E&&E.scrollLeft||0)-(c&&c.clientLeft||E&&E.clientLeft||0);t.pageY=t.clientY+(c&&c.scrollTop||E&&E.scrollTop||0)-(c&&c.clientTop||E&&E.clientTop||0)}if(t.which==null&&(t.charCode!=null||t.keyCode!=null)){t.which=t.charCode!=null?t.charCode:t.keyCode}if(!t.metaKey&&t.ctrlKey){t.metaKey=t.ctrlKey}if(!t.which&&t.button!==aD){t.which=t.button&1?1:t.button&2?3:t.button&4?2:0}return t},guid:100000000,proxy:ad.proxy,special:{ready:{setup:ad.bindReady,teardown:ad.noop},live:{add:function(c){ad.event.add(this,ak(c.origType,c.selector),ad.extend({},c,{handler:D,guid:c.handler.guid}))},remove:function(c){ad.event.remove(this,ak(c.origType,c.selector),c)}},beforeunload:{setup:function(t,c,B){if(ad.isWindow(this)){this.onbeforeunload=B}},teardown:function(t,c){if(this.onbeforeunload===c){this.onbeforeunload=null}}}}};ad.removeEvent=J.removeEventListener?function(t,c,B){t.removeEventListener&&t.removeEventListener(c,B,false)}:function(t,c,B){t.detachEvent&&t.detachEvent("on"+c,B)};ad.Event=function(c){if(!this.preventDefault){return new ad.Event(c)}if(c&&c.type){this.originalEvent=c;this.type=c.type}else{this.type=c}this.timeStamp=ad.now();this[ad.expando]=true};ad.Event.prototype={preventDefault:function(){this.isDefaultPrevented=L;var c=this.originalEvent;if(c){if(c.preventDefault){c.preventDefault()}else{c.returnValue=false}}},stopPropagation:function(){this.isPropagationStopped=L;var c=this.originalEvent;if(c){c.stopPropagation&&c.stopPropagation();c.cancelBubble=true}},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=L;this.stopPropagation()},isDefaultPrevented:ao,isPropagationStopped:ao,isImmediatePropagationStopped:ao};var G=function(t){var c=t.relatedTarget;try{for(;c&&c!==this;){c=c.parentNode}if(c!==this){t.type=t.data;ad.event.handle.apply(this,arguments)}}catch(B){}},r=function(c){c.type=c.data;ad.event.handle.apply(this,arguments)};ad.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,c){ad.event.special[t]={setup:function(B){ad.event.add(this,c,B&&B.selector?r:G,t)},teardown:function(B){ad.event.remove(this,c,B&&B.selector?r:G)}}});if(!ad.support.submitBubbles){ad.event.special.submit={setup:function(){if(this.nodeName.toLowerCase()!=="form"){ad.event.add(this,"click.specialSubmit",function(t){var c=t.target,B=c.type;if((B==="submit"||B==="image")&&ad(c).closest("form").length){t.liveFired=aD;return a1("submit",this,arguments)}});ad.event.add(this,"keypress.specialSubmit",function(t){var c=t.target,B=c.type;if((B==="text"||B==="password")&&ad(c).closest("form").length&&t.keyCode===13){t.liveFired=aD;return a1("submit",this,arguments)}})}else{return false}},teardown:function(){ad.event.remove(this,".specialSubmit")}}}if(!ad.support.changeBubbles){var an,b=function(t){var c=t.type,B=t.value;if(c==="radio"||c==="checkbox"){B=t.checked}else{if(c==="select-multiple"){B=t.selectedIndex>-1?ad.map(t.options,function(E){return E.selected}).join("-"):""}else{if(t.nodeName.toLowerCase()==="select"){B=t.selectedIndex}}}return B},ai=function(t,c){var P=t.target,E,B;if(!(!O.test(P.nodeName)||P.readOnly)){E=ad.data(P,"_change_data");B=b(P);if(t.type!=="focusout"||P.type!=="radio"){ad.data(P,"_change_data",B)}if(!(E===aD||B===E)){if(E!=null||B){t.type="change";t.liveFired=aD;return ad.event.trigger(t,c,P)}}}};ad.event.special.change={filters:{focusout:ai,beforedeactivate:ai,click:function(t){var c=t.target,B=c.type;if(B==="radio"||B==="checkbox"||c.nodeName.toLowerCase()==="select"){return ai.call(this,t)}},keydown:function(t){var c=t.target,B=c.type;if(t.keyCode===13&&c.nodeName.toLowerCase()!=="textarea"||t.keyCode===32&&(B==="checkbox"||B==="radio")||B==="select-multiple"){return ai.call(this,t)}},beforeactivate:function(c){c=c.target;ad.data(c,"_change_data",b(c))}},setup:function(){if(this.type==="file"){return false}for(var c in an){ad.event.add(this,c+".specialChange",an[c])}return O.test(this.nodeName)},teardown:function(){ad.event.remove(this,".specialChange");return O.test(this.nodeName)}};an=ad.event.special.change.filters;an.focus=an.beforeactivate}J.addEventListener&&ad.each({focus:"focusin",blur:"focusout"},function(t,c){function B(E){E=ad.event.fix(E);E.type=c;return ad.event.trigger(E,null,E.target)}ad.event.special[c]={setup:function(){ag[c]++===0&&J.addEventListener(t,B,true)},teardown:function(){--ag[c]===0&&J.removeEventListener(t,B,true)}}});ad.each(["bind","one"],function(t,c){ad.fn[c]=function(W,V,U){if(typeof W==="object"){for(var P in W){this[c](P,V,W[P],U)}return this}if(ad.isFunction(V)||V===false){U=V;V=aD}var B=c==="one"?ad.proxy(U,function(X){ad(this).unbind(X,B);return U.apply(this,arguments)}):U;if(W==="unload"&&c!=="one"){this.one(W,V,U)}else{P=0;for(var E=this.length;P<E;P++){ad.event.add(this[P],W,B,V)}}return this}});ad.fn.extend({unbind:function(t,c){if(typeof t==="object"&&!t.preventDefault){for(var E in t){this.unbind(E,t[E])}}else{E=0;for(var B=this.length;E<B;E++){ad.event.remove(this[E],t,c)}}return this},delegate:function(t,c,E,B){return this.live(c,E,B,t)},undelegate:function(t,c,B){return arguments.length===0?this.unbind("live"):this.die(c,null,B,t)},trigger:function(t,c){return this.each(function(){ad.event.trigger(t,c,this)})},triggerHandler:function(t,c){if(this[0]){var B=ad.Event(t);B.preventDefault();B.stopPropagation();ad.event.trigger(B,c,this[0]);return B.result}},toggle:function(t){for(var c=arguments,B=1;B<c.length;){ad.proxy(t,c[B++])}return this.click(ad.proxy(t,function(P){var E=(ad.data(this,"lastToggle"+t.guid)||0)%B;ad.data(this,"lastToggle"+t.guid,E+1);P.preventDefault();return c[E].apply(this,arguments)||false}))},hover:function(t,c){return this.mouseenter(t).mouseleave(c||t)}});var aU={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};ad.each(["live","die"],function(t,c){ad.fn[c]=function(Z,Y,X,W){var U,V=0,P,aa,B=W||this.selector;W=W?this:ad(this.context);if(typeof Z==="object"&&!Z.preventDefault){for(U in Z){W[c](U,Y,Z[U],B)}return this}if(ad.isFunction(Y)){X=Y;Y=aD}for(Z=(Z||"").split(" ");(U=Z[V++])!=null;){P=al.exec(U);aa="";if(P){aa=P[0];U=U.replace(al,"")}if(U==="hover"){Z.push("mouseenter"+aa,"mouseleave"+aa)}else{P=U;if(U==="focus"||U==="blur"){Z.push(aU[U]+aa);U+=aa}else{U=(aU[U]||U)+aa}if(c==="live"){aa=0;for(var E=W.length;aa<E;aa++){ad.event.add(W[aa],"live."+ak(U,B),{data:Y,selector:B,handler:X,origType:U,origHandler:X,preType:P})}}else{W.unbind("live."+ak(U,B),X)}}}return this}});ad.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),function(t,c){ad.fn[c]=function(E,B){if(B==null){B=E;E=null}return arguments.length>0?this.bind(c,E,B):this.trigger(c)};if(ad.attrFn){ad.attrFn[c]=true}});az.attachEvent&&!az.addEventListener&&ad(az).bind("unload",function(){for(var t in ad.cache){if(ad.cache[t].handle){try{ad.event.remove(ad.cache[t].handle.elem)}catch(c){}}}});(function(){function a7(bf,be,bc,bd,bb,ba){bb=0;for(var bh=bd.length;bb<bh;bb++){var bg=bd[bb];if(bg){var bi=false;for(bg=bg[bf];bg;){if(bg.sizcache===bc){bi=bd[bg.sizset];break}if(bg.nodeType===1&&!ba){bg.sizcache=bc;bg.sizset=bb}if(bg.nodeName.toLowerCase()===be){bi=bg;break}bg=bg[bf]}bd[bb]=bi}}}function aa(bf,be,bc,bd,bb,ba){bb=0;for(var bh=bd.length;bb<bh;bb++){var bg=bd[bb];if(bg){var bi=false;for(bg=bg[bf];bg;){if(bg.sizcache===bc){bi=bd[bg.sizset];break}if(bg.nodeType===1){if(!ba){bg.sizcache=bc;bg.sizset=bb}if(typeof be!=="string"){if(bg===be){bi=true;break}}else{if(U.filter(be,[bg]).length>0){bi=bg;break}}}bg=bg[bf]}bd[bb]=bi}}}var Y=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,X=0,W=Object.prototype.toString,V=false,P=true;[0,0].sort(function(){P=false;return 0});var U=function(bh,bg,bd,be){bd=bd||[];var bc=bg=bg||J;if(bg.nodeType!==1&&bg.nodeType!==9){return[]}if(!bh||typeof bh!=="string"){return bd}var bb,bm,bl,bn,bk,bj=true,bi=U.isXML(bg),ba=[],bf=bh;do{Y.exec("");if(bb=Y.exec(bf)){bf=bb[3];ba.push(bb[1]);if(bb[2]){bn=bb[3];break}}}while(bb);if(ba.length>1&&a6.exec(bh)){if(ba.length===2&&E.relative[ba[0]]){bm=Z(ba[0]+ba[1],bg)}else{for(bm=E.relative[ba[0]]?[bg]:U(ba.shift(),bg);ba.length;){bh=ba.shift();if(E.relative[bh]){bh+=ba.shift()}bm=Z(bh,bm)}}}else{if(!be&&ba.length>1&&bg.nodeType===9&&!bi&&E.match.ID.test(ba[0])&&!E.match.ID.test(ba[ba.length-1])){bb=U.find(ba.shift(),bg,bi);bg=bb.expr?U.filter(bb.expr,bb.set)[0]:bb.set[0]}if(bg){bb=be?{expr:ba.pop(),set:t(be)}:U.find(ba.pop(),ba.length===1&&(ba[0]==="~"||ba[0]==="+")&&bg.parentNode?bg.parentNode:bg,bi);bm=bb.expr?U.filter(bb.expr,bb.set):bb.set;if(ba.length>0){bl=t(bm)}else{bj=false}for(;ba.length;){bb=bk=ba.pop();if(E.relative[bk]){bb=ba.pop()}else{bk=""}if(bb==null){bb=bg}E.relative[bk](bl,bb,bi)}}else{bl=[]}}bl||(bl=bm);bl||U.error(bk||bh);if(W.call(bl)==="[object Array]"){if(bj){if(bg&&bg.nodeType===1){for(bh=0;bl[bh]!=null;bh++){if(bl[bh]&&(bl[bh]===true||bl[bh].nodeType===1&&U.contains(bg,bl[bh]))){bd.push(bm[bh])}}}else{for(bh=0;bl[bh]!=null;bh++){bl[bh]&&bl[bh].nodeType===1&&bd.push(bm[bh])}}}else{bd.push.apply(bd,bl)}}else{t(bl,bd)}if(bn){U(bn,bc,bd,be);U.uniqueSort(bd)}return bd};U.uniqueSort=function(bb){if(a9){V=P;bb.sort(a9);if(V){for(var ba=1;ba<bb.length;ba++){bb[ba]===bb[ba-1]&&bb.splice(ba--,1)}}}return bb};U.matches=function(bb,ba){return U(bb,null,null,ba)};U.matchesSelector=function(bb,ba){return U(ba,null,null,[bb]).length>0};U.find=function(bf,be,bc){var bd;if(!bf){return[]}for(var bb=0,ba=E.order.length;bb<ba;bb++){var bh,bg=E.order[bb];if(bh=E.leftMatch[bg].exec(bf)){var bi=bh[1];bh.splice(1,1);if(bi.substr(bi.length-1)!=="\\"){bh[1]=(bh[1]||"").replace(/\\/g,"");bd=E.find[bg](bh,be,bc);if(bd!=null){bf=bf.replace(E.match[bg],"");break}}}}bd||(bd=be.getElementsByTagName("*"));return{set:bd,expr:bf}};U.filter=function(bi,bh,bd,be){for(var bc,bb,bn=bi,bm=[],bo=bh,bl=bh&&bh[0]&&U.isXML(bh[0]);bi&&bh.length;){for(var bk in E.filter){if((bc=E.leftMatch[bk].exec(bi))!=null&&bc[2]){var bj,ba,bg=E.filter[bk];ba=bc[1];bb=false;bc.splice(1,1);if(ba.substr(ba.length-1)!=="\\"){if(bo===bm){bm=[]}if(E.preFilter[bk]){if(bc=E.preFilter[bk](bc,bo,bd,bm,be,bl)){if(bc===true){continue}}else{bb=bj=true}}if(bc){for(var bf=0;(ba=bo[bf])!=null;bf++){if(ba){bj=bg(ba,bc,bf,bo);var bp=be^!!bj;if(bd&&bj!=null){if(bp){bb=true}else{bo[bf]=false}}else{if(bp){bm.push(ba);bb=true}}}}}if(bj!==aD){bd||(bo=bm);bi=bi.replace(E.match[bk],"");if(!bb){return[]}break}}}}if(bi===bn){if(bb==null){U.error(bi)}else{break}}bn=bi}return bo};U.error=function(ba){throw"Syntax error, unrecognized expression: "+ba};var E=U.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(ba){return ba.getAttribute("href")}},relative:{"+":function(bc,bb){var bf=typeof bb==="string",ba=bf&&!/\W/.test(bb);bf=bf&&!ba;if(ba){bb=bb.toLowerCase()}ba=0;for(var be=bc.length,bd;ba<be;ba++){if(bd=bc[ba]){for(;(bd=bd.previousSibling)&&bd.nodeType!==1;){}bc[ba]=bf||bd&&bd.nodeName.toLowerCase()===bb?bd||false:bd===bb}}bf&&U.filter(bb,bc,true)},">":function(bc,bb){var bf,ba=typeof bb==="string",be=0,bd=bc.length;if(ba&&!/\W/.test(bb)){for(bb=bb.toLowerCase();be<bd;be++){if(bf=bc[be]){bf=bf.parentNode;bc[be]=bf.nodeName.toLowerCase()===bb?bf:false}}}else{for(;be<bd;be++){if(bf=bc[be]){bc[be]=ba?bf.parentNode:bf.parentNode===bb}}ba&&U.filter(bb,bc,true)}},"":function(bc,bb,bf){var ba,be=X++,bd=aa;if(typeof bb==="string"&&!/\W/.test(bb)){ba=bb=bb.toLowerCase();bd=a7}bd("parentNode",bb,be,bc,ba,bf)},"~":function(bc,bb,bf){var ba,be=X++,bd=aa;if(typeof bb==="string"&&!/\W/.test(bb)){ba=bb=bb.toLowerCase();bd=a7}bd("previousSibling",bb,be,bc,ba,bf)}},find:{ID:function(bb,ba,bc){if(typeof ba.getElementById!=="undefined"&&!bc){return(bb=ba.getElementById(bb[1]))&&bb.parentNode?[bb]:[]}},NAME:function(bc,bb){if(typeof bb.getElementsByName!=="undefined"){for(var bf=[],ba=bb.getElementsByName(bc[1]),be=0,bd=ba.length;be<bd;be++){ba[be].getAttribute("name")===bc[1]&&bf.push(ba[be])}return bf.length===0?null:bf}},TAG:function(bb,ba){return ba.getElementsByTagName(bb[1])}},preFilter:{CLASS:function(bd,bc,bg,ba,bf,be){bd=" "+bd[1].replace(/\\/g,"")+" ";if(be){return bd}be=0;for(var bb;(bb=bc[be])!=null;be++){if(bb){if(bf^(bb.className&&(" "+bb.className+" ").replace(/[\t\n]/g," ").indexOf(bd)>=0)){bg||ba.push(bb)}else{if(bg){bc[be]=false}}}}return false},ID:function(ba){return ba[1].replace(/\\/g,"")},TAG:function(ba){return ba[1].toLowerCase()},CHILD:function(bb){if(bb[1]==="nth"){var ba=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(bb[2]==="even"&&"2n"||bb[2]==="odd"&&"2n+1"||!/\D/.test(bb[2])&&"0n+"+bb[2]||bb[2]);bb[2]=ba[1]+(ba[2]||1)-0;bb[3]=ba[3]-0}bb[0]=X++;return bb},ATTR:function(bc,bb,bf,ba,be,bd){bb=bc[1].replace(/\\/g,"");if(!bd&&E.attrMap[bb]){bc[1]=E.attrMap[bb]}if(bc[2]==="~="){bc[4]=" "+bc[4]+" "}return bc},PSEUDO:function(bc,bb,be,ba,bd){if(bc[1]==="not"){if((Y.exec(bc[3])||"").length>1||/^\w/.test(bc[3])){bc[3]=U(bc[3],null,null,bb)}else{bc=U.filter(bc[3],bb,be,true^bd);be||ba.push.apply(ba,bc);return false}}else{if(E.match.POS.test(bc[0])||E.match.CHILD.test(bc[0])){return true}}return bc},POS:function(ba){ba.unshift(true);return ba}},filters:{enabled:function(ba){return ba.disabled===false&&ba.type!=="hidden"},disabled:function(ba){return ba.disabled===true},checked:function(ba){return ba.checked===true},selected:function(ba){return ba.selected===true},parent:function(ba){return !!ba.firstChild},empty:function(ba){return !ba.firstChild},has:function(bb,ba,bc){return !!U(bc[3],bb).length},header:function(ba){return/h\d/i.test(ba.nodeName)},text:function(ba){return"text"===ba.type},radio:function(ba){return"radio"===ba.type},checkbox:function(ba){return"checkbox"===ba.type},file:function(ba){return"file"===ba.type},password:function(ba){return"password"===ba.type},submit:function(ba){return"submit"===ba.type},image:function(ba){return"image"===ba.type},reset:function(ba){return"reset"===ba.type},button:function(ba){return"button"===ba.type||ba.nodeName.toLowerCase()==="button"},input:function(ba){return/input|select|textarea|button/i.test(ba.nodeName)}},setFilters:{first:function(bb,ba){return ba===0},last:function(bc,bb,bd,ba){return bb===ba.length-1},even:function(bb,ba){return ba%2===0},odd:function(bb,ba){return ba%2===1},lt:function(bb,ba,bc){return ba<bc[3]-0},gt:function(bb,ba,bc){return ba>bc[3]-0},nth:function(bb,ba,bc){return bc[3]-0===ba},eq:function(bb,ba,bc){return bc[3]-0===ba}},filter:{PSEUDO:function(bc,bb,bf,ba){var be=bb[1],bd=E.filters[be];if(bd){return bd(bc,bf,bb,ba)}else{if(be==="contains"){return(bc.textContent||bc.innerText||U.getText([bc])||"").indexOf(bb[3])>=0}else{if(be==="not"){bb=bb[3];bf=0;for(ba=bb.length;bf<ba;bf++){if(bb[bf]===bc){return false}}return true}else{U.error("Syntax error, unrecognized expression: "+be)}}}},CHILD:function(bd,bc){var bh=bc[1],ba=bd;switch(bh){case"only":case"first":for(;ba=ba.previousSibling;){if(ba.nodeType===1){return false}}if(bh==="first"){return true}ba=bd;case"last":for(;ba=ba.nextSibling;){if(ba.nodeType===1){return false}}return true;case"nth":bh=bc[2];var bf=bc[3];if(bh===1&&bf===0){return true}var be=bc[0],bb=bd.parentNode;if(bb&&(bb.sizcache!==be||!bd.nodeIndex)){var bg=0;for(ba=bb.firstChild;ba;ba=ba.nextSibling){if(ba.nodeType===1){ba.nodeIndex=++bg}}bb.sizcache=be}ba=bd.nodeIndex-bf;return bh===0?ba===0:ba%bh===0&&ba/bh>=0}},ID:function(bb,ba){return bb.nodeType===1&&bb.getAttribute("id")===ba},TAG:function(bb,ba){return ba==="*"&&bb.nodeType===1||bb.nodeName.toLowerCase()===ba},CLASS:function(bb,ba){return(" "+(bb.className||bb.getAttribute("class"))+" ").indexOf(ba)>-1},ATTR:function(bc,bb){var bf=bb[1];bf=E.attrHandle[bf]?E.attrHandle[bf](bc):bc[bf]!=null?bc[bf]:bc.getAttribute(bf);var ba=bf+"",be=bb[2],bd=bb[4];return bf==null?be==="!=":be==="="?ba===bd:be==="*="?ba.indexOf(bd)>=0:be==="~="?(" "+ba+" ").indexOf(bd)>=0:!bd?ba&&bf!==false:be==="!="?ba!==bd:be==="^="?ba.indexOf(bd)===0:be==="$="?ba.substr(ba.length-bd.length)===bd:be==="|="?ba===bd||ba.substr(0,bd.length+1)===bd+"-":false},POS:function(bc,bb,be,ba){var bd=E.setFilters[bb[2]];if(bd){return bd(bc,be,bb,ba)}}}},a6=E.match.POS,c=function(bb,ba){return"\\"+(ba-0+1)},B;for(B in E.match){E.match[B]=RegExp(E.match[B].source+/(?![^\[]*\])(?![^\(]*\))/.source);E.leftMatch[B]=RegExp(/(^(?:.|\r|\n)*?)/.source+E.match[B].source.replace(/\\(\d+)/g,c))}var t=function(bb,ba){bb=Array.prototype.slice.call(bb,0);if(ba){ba.push.apply(ba,bb);return ba}return bb};try{Array.prototype.slice.call(J.documentElement.childNodes,0)}catch(ab){t=function(bc,bb){var be=0,ba=bb||[];if(W.call(bc)==="[object Array]"){Array.prototype.push.apply(ba,bc)}else{if(typeof bc.length==="number"){for(var bd=bc.length;be<bd;be++){ba.push(bc[be])}}else{for(;bc[be];be++){ba.push(bc[be])}}}return ba}}var a9,a8;if(J.documentElement.compareDocumentPosition){a9=function(bb,ba){if(bb===ba){V=true;return 0}if(!bb.compareDocumentPosition||!ba.compareDocumentPosition){return bb.compareDocumentPosition?-1:1}return bb.compareDocumentPosition(ba)&4?-1:1}}else{a9=function(bd,bc){var bg,ba,bf=[],be=[];bg=bd.parentNode;ba=bc.parentNode;var bb=bg;if(bd===bc){V=true;return 0}else{if(bg===ba){return a8(bd,bc)}else{if(bg){if(!ba){return 1}}else{return -1}}}for(;bb;){bf.unshift(bb);bb=bb.parentNode}for(bb=ba;bb;){be.unshift(bb);bb=bb.parentNode}bg=bf.length;ba=be.length;for(bb=0;bb<bg&&bb<ba;bb++){if(bf[bb]!==be[bb]){return a8(bf[bb],be[bb])}}return bb===bg?a8(bd,be[bb],-1):a8(bf[bb],bc,1)};a8=function(bb,ba,bc){if(bb===ba){return bc}for(bb=bb.nextSibling;bb;){if(bb===ba){return -1}bb=bb.nextSibling}return 1}}U.getText=function(bc){for(var bb="",bd,ba=0;bc[ba];ba++){bd=bc[ba];if(bd.nodeType===3||bd.nodeType===4){bb+=bd.nodeValue}else{if(bd.nodeType!==8){bb+=U.getText(bd.childNodes)}}}return bb};(function(){var bb=J.createElement("div"),ba="script"+(new Date).getTime(),bc=J.documentElement;bb.innerHTML="<a name='"+ba+"'/>";bc.insertBefore(bb,bc.firstChild);if(J.getElementById(ba)){E.find.ID=function(bd,bf,be){if(typeof bf.getElementById!=="undefined"&&!be){return(bf=bf.getElementById(bd[1]))?bf.id===bd[1]||typeof bf.getAttributeNode!=="undefined"&&bf.getAttributeNode("id").nodeValue===bd[1]?[bf]:aD:[]}};E.filter.ID=function(bd,bf){var be=typeof bd.getAttributeNode!=="undefined"&&bd.getAttributeNode("id");return bd.nodeType===1&&be&&be.nodeValue===bf}}bc.removeChild(bb);bc=bb=null})();(function(){var ba=J.createElement("div");ba.appendChild(J.createComment(""));if(ba.getElementsByTagName("*").length>0){E.find.TAG=function(bc,bf){var bb=bf.getElementsByTagName(bc[1]);if(bc[1]==="*"){for(var be=[],bd=0;bb[bd];bd++){bb[bd].nodeType===1&&be.push(bb[bd])}bb=be}return bb}}ba.innerHTML="<a href='#'></a>";if(ba.firstChild&&typeof ba.firstChild.getAttribute!=="undefined"&&ba.firstChild.getAttribute("href")!=="#"){E.attrHandle.href=function(bb){return bb.getAttribute("href",2)}}ba=null})();J.querySelectorAll&&function(){var bb=U,ba=J.createElement("div");ba.innerHTML="<p class='TEST'></p>";if(!(ba.querySelectorAll&&ba.querySelectorAll(".TEST").length===0)){U=function(bd,bh,bg,be){bh=bh||J;bd=bd.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!be&&!U.isXML(bh)){if(bh.nodeType===9){try{return t(bh.querySelectorAll(bd),bg)}catch(bk){}}else{if(bh.nodeType===1&&bh.nodeName.toLowerCase()!=="object"){var bf=bh.getAttribute("id"),bj=bf||"__sizzle__";bf||bh.setAttribute("id",bj);try{return t(bh.querySelectorAll("#"+bj+" "+bd),bg)}catch(bi){}finally{bf||bh.removeAttribute("id")}}}}return bb(bd,bh,bg,be)};for(var bc in bb){U[bc]=bb[bc]}ba=null}}();(function(){var bc=J.documentElement,bb=bc.matchesSelector||bc.mozMatchesSelector||bc.webkitMatchesSelector||bc.msMatchesSelector,bd=false;try{bb.call(J.documentElement,"[test!='']:sizzle")}catch(ba){bd=true}if(bb){U.matchesSelector=function(bg,bf){bf=bf.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!U.isXML(bg)){try{if(bd||!E.match.PSEUDO.test(bf)&&!/!=/.test(bf)){return bb.call(bg,bf)}}catch(be){}}return U(bf,null,null,[bg]).length>0}}})();(function(){var ba=J.createElement("div");ba.innerHTML="<div class='test e'></div><div class='test'></div>";if(!(!ba.getElementsByClassName||ba.getElementsByClassName("e").length===0)){ba.lastChild.className="e";if(ba.getElementsByClassName("e").length!==1){E.order.splice(1,0,"CLASS");E.find.CLASS=function(bc,bd,bb){if(typeof bd.getElementsByClassName!=="undefined"&&!bb){return bd.getElementsByClassName(bc[1])}};ba=null}}})();U.contains=J.documentElement.contains?function(bb,ba){return bb!==ba&&(bb.contains?bb.contains(ba):true)}:J.documentElement.compareDocumentPosition?function(bb,ba){return !!(bb.compareDocumentPosition(ba)&16)}:function(){return false};U.isXML=function(ba){return(ba=(ba?ba.ownerDocument||ba:0).documentElement)?ba.nodeName!=="HTML":false};var Z=function(bd,bc){for(var bg,ba=[],bf="",be=bc.nodeType?[bc]:bc;bg=E.match.PSEUDO.exec(bd);){bf+=bg[0];bd=bd.replace(E.match.PSEUDO,"")}bd=E.relative[bd]?bd+"*":bd;bg=0;for(var bb=be.length;bg<bb;bg++){U(bd,be[bg],ba)}return U.filter(bf,ba)};ad.find=U;ad.expr=U.selectors;ad.expr[":"]=ad.expr.filters;ad.unique=U.uniqueSort;ad.text=U.getText;ad.isXMLDoc=U.isXML;ad.contains=U.contains})();var aW=/Until$/,aC=/^(?:parents|prevUntil|prevAll)/,aJ=/,/,aT=/^.[^:#\[\.,]*$/,ar=Array.prototype.slice,K=ad.expr.match.POS;ad.fn.extend({find:function(B){for(var c=this.pushStack("","find",B),V=0,U=0,P=this.length;U<P;U++){V=c.length;ad.find(B,this[U],c);if(U>0){for(var E=V;E<c.length;E++){for(var t=0;t<V;t++){if(c[t]===c[E]){c.splice(E--,1);break}}}}}return c},has:function(t){var c=ad(t);return this.filter(function(){for(var E=0,B=c.length;E<B;E++){if(ad.contains(this,c[E])){return true}}})},not:function(c){return this.pushStack(aO(this,c,false),"not",c)},filter:function(c){return this.pushStack(aO(this,c,true),"filter",c)},is:function(c){return !!c&&ad.filter(c,this).length>0},closest:function(X,W){var V=[],U,P,E=this[0];if(ad.isArray(X)){var t,B={},c=1;if(E&&X.length){U=0;for(P=X.length;U<P;U++){t=X[U];B[t]||(B[t]=ad.expr.match.POS.test(t)?ad(t,W||this.context):t)}for(;E&&E.ownerDocument&&E!==W;){for(t in B){U=B[t];if(U.jquery?U.index(E)>-1:ad(E).is(U)){V.push({selector:t,elem:E,level:c})}}E=E.parentNode;c++}}return V}t=K.test(X)?ad(X,W||this.context):null;U=0;for(P=this.length;U<P;U++){for(E=this[U];E;){if(t?t.index(E)>-1:ad.find.matchesSelector(E,X)){V.push(E);break}else{E=E.parentNode;if(!E||!E.ownerDocument||E===W){break}}}}V=V.length>1?ad.unique(V):V;return this.pushStack(V,"closest",X)},index:function(c){if(!c||typeof c==="string"){return ad.inArray(this[0],c?ad(c):this.parent().children())}return ad.inArray(c.jquery?c[0]:c,this)},add:function(t,c){var E=typeof t==="string"?ad(t,c||this.context):ad.makeArray(t),B=ad.merge(this.get(),E);return this.pushStack(!E[0]||!E[0].parentNode||E[0].parentNode.nodeType===11||!B[0]||!B[0].parentNode||B[0].parentNode.nodeType===11?B:ad.unique(B))},andSelf:function(){return this.add(this.prevObject)}});ad.each({parent:function(c){return(c=c.parentNode)&&c.nodeType!==11?c:null},parents:function(c){return ad.dir(c,"parentNode")},parentsUntil:function(t,c,B){return ad.dir(t,"parentNode",B)},next:function(c){return ad.nth(c,2,"nextSibling")},prev:function(c){return ad.nth(c,2,"previousSibling")},nextAll:function(c){return ad.dir(c,"nextSibling")},prevAll:function(c){return ad.dir(c,"previousSibling")},nextUntil:function(t,c,B){return ad.dir(t,"nextSibling",B)},prevUntil:function(t,c,B){return ad.dir(t,"previousSibling",B)},siblings:function(c){return ad.sibling(c.parentNode.firstChild,c)},children:function(c){return ad.sibling(c.firstChild)},contents:function(c){return ad.nodeName(c,"iframe")?c.contentDocument||c.contentWindow.document:ad.makeArray(c.childNodes)}},function(t,c){ad.fn[t]=function(P,E){var B=ad.map(this,c,P);aW.test(t)||(E=P);if(E&&typeof E==="string"){B=ad.filter(E,B)}B=this.length>1?ad.unique(B):B;if((this.length>1||aJ.test(E))&&aC.test(t)){B=B.reverse()}return this.pushStack(B,t,ar.call(arguments).join(","))}});ad.extend({filter:function(t,c,B){if(B){t=":not("+t+")"}return c.length===1?ad.find.matchesSelector(c[0],t)?[c[0]]:[]:ad.find.matches(t,c)},dir:function(t,c,E){var B=[];for(t=t[c];t&&t.nodeType!==9&&(E===aD||t.nodeType!==1||!ad(t).is(E));){t.nodeType===1&&B.push(t);t=t[c]}return B},nth:function(t,c,E){c=c||1;for(var B=0;t;t=t[E]){if(t.nodeType===1&&++B===c){break}}return t},sibling:function(t,c){for(var B=[];t;t=t.nextSibling){t.nodeType===1&&t!==c&&B.push(t)}return B}});var aH=/ jQuery\d+="(?:\d+|null)"/g,aQ=/^\s+/,aZ=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,aM=/<([\w:]+)/,v=/<tbody/i,f=/<|&#?\w+;/,ax=/<(?:script|object|embed|option|style)/i,Q=/checked\s*(?:[^=]|=\s*.checked.)/i,aX=/\=([^="'>\s]+\/)>/g,at={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};at.optgroup=at.option;at.tbody=at.tfoot=at.colgroup=at.caption=at.thead;at.th=at.td;if(!ad.support.htmlSerialize){at._default=[1,"div<div>","</div>"]}ad.fn.extend({text:function(c){if(ad.isFunction(c)){return this.each(function(t){var B=ad(this);B.text(c.call(this,t,B.text()))})}if(typeof c!=="object"&&c!==aD){return this.empty().append((this[0]&&this[0].ownerDocument||J).createTextNode(c))}return ad.text(this)},wrapAll:function(t){if(ad.isFunction(t)){return this.each(function(B){ad(this).wrapAll(t.call(this,B))})}if(this[0]){var c=ad(t,this[0].ownerDocument).eq(0).clone(true);this[0].parentNode&&c.insertBefore(this[0]);c.map(function(){for(var B=this;B.firstChild&&B.firstChild.nodeType===1;){B=B.firstChild}return B}).append(this)}return this},wrapInner:function(c){if(ad.isFunction(c)){return this.each(function(t){ad(this).wrapInner(c.call(this,t))})}return this.each(function(){var t=ad(this),B=t.contents();B.length?B.wrapAll(c):t.append(c)})},wrap:function(c){return this.each(function(){ad(this).wrapAll(c)})},unwrap:function(){return this.parent().each(function(){ad.nodeName(this,"body")||ad(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,true,function(c){this.nodeType===1&&this.appendChild(c)})},prepend:function(){return this.domManip(arguments,true,function(c){this.nodeType===1&&this.insertBefore(c,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(t){this.parentNode.insertBefore(t,this)})}else{if(arguments.length){var c=ad(arguments[0]);c.push.apply(c,this.toArray());return this.pushStack(c,"before",arguments)}}},after:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(t){this.parentNode.insertBefore(t,this.nextSibling)})}else{if(arguments.length){var c=this.pushStack(this,"after",arguments);c.push.apply(c,ad(arguments[0]).toArray());return c}}},remove:function(t,c){for(var E=0,B;(B=this[E])!=null;E++){if(!t||ad.filter(t,[B]).length){if(!c&&B.nodeType===1){ad.cleanData(B.getElementsByTagName("*"));ad.cleanData([B])}B.parentNode&&B.parentNode.removeChild(B)}}return this},empty:function(){for(var t=0,c;(c=this[t])!=null;t++){for(c.nodeType===1&&ad.cleanData(c.getElementsByTagName("*"));c.firstChild;){c.removeChild(c.firstChild)}}return this},clone:function(t){var c=this.map(function(){if(!ad.support.noCloneEvent&&!ad.isXMLDoc(this)){var E=this.outerHTML,B=this.ownerDocument;if(!E){E=B.createElement("div");E.appendChild(this.cloneNode(true));E=E.innerHTML}return ad.clean([E.replace(aH,"").replace(aX,'="$1">').replace(aQ,"")],B)[0]}else{return this.cloneNode(true)}});if(t===true){aA(this,c);aA(this.find("*"),c.find("*"))}return c},html:function(t){if(t===aD){return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(aH,""):null}else{if(typeof t==="string"&&!ax.test(t)&&(ad.support.leadingWhitespace||!aQ.test(t))&&!at[(aM.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(aZ,"<$1></$2>");try{for(var c=0,E=this.length;c<E;c++){if(this[c].nodeType===1){ad.cleanData(this[c].getElementsByTagName("*"));this[c].innerHTML=t}}}catch(B){this.empty().append(t)}}else{ad.isFunction(t)?this.each(function(U){var P=ad(this);P.html(t.call(this,U,P.html()))}):this.empty().append(t)}}return this},replaceWith:function(c){if(this[0]&&this[0].parentNode){if(ad.isFunction(c)){return this.each(function(t){var E=ad(this),B=E.html();E.replaceWith(c.call(this,t,B))})}if(typeof c!=="string"){c=ad(c).detach()}return this.each(function(){var t=this.nextSibling,B=this.parentNode;ad(this).remove();t?ad(t).before(c):ad(B).append(c)})}else{return this.pushStack(ad(ad.isFunction(c)?c():c),"replaceWith",c)}},detach:function(c){return this.remove(c,true)},domManip:function(X,W,V){var U,P,E,t=X[0],B=[];if(!ad.support.checkClone&&arguments.length===3&&typeof t==="string"&&Q.test(t)){return this.each(function(){ad(this).domManip(X,W,V,true)})}if(ad.isFunction(t)){return this.each(function(Y){var Z=ad(this);X[0]=t.call(this,Y,W?Z.html():aD);Z.domManip(X,W,V)})}if(this[0]){U=t&&t.parentNode;U=ad.support.parentNode&&U&&U.nodeType===11&&U.childNodes.length===this.length?{fragment:U}:ad.buildFragment(X,this,B);E=U.fragment;if(P=E.childNodes.length===1?E=E.firstChild:E.firstChild){W=W&&ad.nodeName(P,"tr");P=0;for(var c=this.length;P<c;P++){V.call(W?ad.nodeName(this[P],"table")?this[P].getElementsByTagName("tbody")[0]||this[P].appendChild(this[P].ownerDocument.createElement("tbody")):this[P]:this[P],P>0||U.cacheable||this.length>1?E.cloneNode(true):E)}}B.length&&ad.each(B,aG)}return this}});ad.buildFragment=function(t,c,U){var P,E,B;c=c&&c[0]?c[0].ownerDocument||c[0]:J;if(t.length===1&&typeof t[0]==="string"&&t[0].length<512&&c===J&&!ax.test(t[0])&&(ad.support.checkClone||!Q.test(t[0]))){E=true;if(B=ad.fragments[t[0]]){if(B!==1){P=B}}}if(!P){P=c.createDocumentFragment();ad.clean(t,c,P,U)}if(E){ad.fragments[t[0]]=B?P:1}return{fragment:P,cacheable:E}};ad.fragments={};ad.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,c){ad.fn[t]=function(V){var U=[];V=ad(V);var P=this.length===1&&this[0].parentNode;if(P&&P.nodeType===11&&P.childNodes.length===1&&V.length===1){V[c](this[0]);return this}else{P=0;for(var E=V.length;P<E;P++){var B=(P>0?this.clone(true):this).get();ad(V[P])[c](B);U=U.concat(B)}return this.pushStack(U,t,V.selector)}}});ad.extend({clean:function(Z,X,W,V){X=X||J;if(typeof X.createElement==="undefined"){X=X.ownerDocument||X[0]&&X[0].ownerDocument||J}for(var U=[],P=0,B;(B=Z[P])!=null;P++){if(typeof B==="number"){B+=""}if(B){if(typeof B==="string"&&!f.test(B)){B=X.createTextNode(B)}else{if(typeof B==="string"){B=B.replace(aZ,"<$1></$2>");var E=(aM.exec(B)||["",""])[1].toLowerCase(),t=at[E]||at._default,Y=t[0],c=X.createElement("div");for(c.innerHTML=t[1]+B+t[2];Y--;){c=c.lastChild}if(!ad.support.tbody){Y=v.test(B);E=E==="table"&&!Y?c.firstChild&&c.firstChild.childNodes:t[1]==="<table>"&&!Y?c.childNodes:[];for(t=E.length-1;t>=0;--t){ad.nodeName(E[t],"tbody")&&!E[t].childNodes.length&&E[t].parentNode.removeChild(E[t])}}!ad.support.leadingWhitespace&&aQ.test(B)&&c.insertBefore(X.createTextNode(aQ.exec(B)[0]),c.firstChild);B=c.childNodes}}if(B.nodeType){U.push(B)}else{U=ad.merge(U,B)}}}if(W){for(P=0;U[P];P++){if(V&&ad.nodeName(U[P],"script")&&(!U[P].type||U[P].type.toLowerCase()==="text/javascript")){V.push(U[P].parentNode?U[P].parentNode.removeChild(U[P]):U[P])}else{U[P].nodeType===1&&U.splice.apply(U,[P+1,0].concat(ad.makeArray(U[P].getElementsByTagName("script"))));W.appendChild(U[P])}}}return U},cleanData:function(X){for(var W,V,U=ad.cache,P=ad.event.special,E=ad.support.deleteExpando,t=0,B;(B=X[t])!=null;t++){if(!(B.nodeName&&ad.noData[B.nodeName.toLowerCase()])){if(V=B[ad.expando]){if((W=U[V])&&W.events){for(var c in W.events){P[c]?ad.event.remove(B,c):ad.removeEvent(B,c,W.handle)}}if(E){delete B[ad.expando]}else{B.removeAttribute&&B.removeAttribute(ad.expando)}delete U[V]}}}}});var z=/alpha\([^)]*\)/i,aL=/opacity=([^)]*)/,av=/-([a-z])/ig,M=/([A-Z])/g,m=/^-?\d+(?:px)?$/i,x=/^-?\d/,j={position:"absolute",visibility:"hidden",display:"block"},ah=["Left","Right"],H=["Top","Bottom"],am,a2,aK,a0=function(t,c){return c.toUpperCase()};ad.fn.css=function(t,c){if(arguments.length===2&&c===aD){return this}return ad.access(this,t,c,true,function(P,E,B){return B!==aD?ad.style(P,E,B):ad.css(P,E)})};ad.extend({cssHooks:{opacity:{get:function(t,c){if(c){var B=am(t,"opacity","opacity");return B===""?"1":B}else{return t.style.opacity}}}},cssNumber:{zIndex:true,fontWeight:true,opacity:true,zoom:true,lineHeight:true},cssProps:{"float":ad.support.cssFloat?"cssFloat":"styleFloat"},style:function(X,W,V,U){if(!(!X||X.nodeType===3||X.nodeType===8||!X.style)){var P,E=ad.camelCase(W),t=X.style,B=ad.cssHooks[E];W=ad.cssProps[E]||E;if(V!==aD){if(!(typeof V==="number"&&isNaN(V)||V==null)){if(typeof V==="number"&&!ad.cssNumber[E]){V+="px"}if(!B||!("set" in B)||(V=B.set(X,V))!==aD){try{t[W]=V}catch(c){}}}}else{if(B&&"get" in B&&(P=B.get(X,false,U))!==aD){return P}return t[W]}}},css:function(t,c,U){var P,E=ad.camelCase(c),B=ad.cssHooks[E];c=ad.cssProps[E]||E;if(B&&"get" in B&&(P=B.get(t,true,U))!==aD){return P}else{if(am){return am(t,c,E)}}},swap:function(t,c,P){var E={},B;for(B in c){E[B]=t.style[B];t.style[B]=c[B]}P.call(t);for(B in c){t.style[B]=E[B]}},camelCase:function(c){return c.replace(av,a0)}});ad.curCSS=ad.css;ad.each(["height","width"],function(t,c){ad.cssHooks[c]={get:function(U,P,E){var B;if(P){if(U.offsetWidth!==0){B=ac(U,c,E)}else{ad.swap(U,j,function(){B=ac(U,c,E)})}if(B<=0){B=am(U,c,c);if(B==="0px"&&aK){B=aK(U,c,c)}if(B!=null){return B===""||B==="auto"?"0px":B}}if(B<0||B==null){B=U.style[c];return B===""||B==="auto"?"0px":B}return typeof B==="string"?B:B+"px"}},set:function(E,B){if(m.test(B)){B=parseFloat(B);if(B>=0){return B+"px"}}else{return B}}}});if(!ad.support.opacity){ad.cssHooks.opacity={get:function(t,c){return aL.test((c&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?parseFloat(RegExp.$1)/100+"":c?"1":""},set:function(t,c){var P=t.style;P.zoom=1;var E=ad.isNaN(c)?"":"alpha(opacity="+c*100+")",B=P.filter||"";P.filter=z.test(B)?B.replace(z,E):P.filter+" "+E}}}if(J.defaultView&&J.defaultView.getComputedStyle){a2=function(t,c,E){var B;E=E.replace(M,"-$1").toLowerCase();if(!(c=t.ownerDocument.defaultView)){return aD}if(c=c.getComputedStyle(t,null)){B=c.getPropertyValue(E);if(B===""&&!ad.contains(t.ownerDocument.documentElement,t)){B=ad.style(t,E)}}return B}}if(J.documentElement.currentStyle){aK=function(t,c){var U,P,E=t.currentStyle&&t.currentStyle[c],B=t.style;if(!m.test(E)&&x.test(E)){U=B.left;P=t.runtimeStyle.left;t.runtimeStyle.left=t.currentStyle.left;B.left=c==="fontSize"?"1em":E||0;E=B.pixelLeft+"px";B.left=U;t.runtimeStyle.left=P}return E===""?"auto":E}}am=a2||aK;if(ad.expr&&ad.expr.filters){ad.expr.filters.hidden=function(t){var c=t.offsetHeight;return t.offsetWidth===0&&c===0||!ad.support.reliableHiddenOffsets&&(t.style.display||ad.css(t,"display"))==="none"};ad.expr.filters.visible=function(c){return !ad.expr.filters.hidden(c)}}var aN=ad.now(),ay=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,R=/^(?:select|textarea)/i,A=/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,n=/^(?:GET|HEAD)$/,s=/\[\]$/,ap=/\=\?(&|$)/,y=/\?/,a3=/([?&])_=[^&]*/,aR=/^(\w+:)?\/\/([^\/?#]+)/,aE=/%20/g,af=/#.*$/,aP=ad.fn.load;ad.fn.extend({load:function(t,c,U){if(typeof t!=="string"&&aP){return aP.apply(this,arguments)}else{if(!this.length){return this}}var P=t.indexOf(" ");if(P>=0){var E=t.slice(P,t.length);t=t.slice(0,P)}P="GET";if(c){if(ad.isFunction(c)){U=c;c=null}else{if(typeof c==="object"){c=ad.param(c,ad.ajaxSettings.traditional);P="POST"}}}var B=this;ad.ajax({url:t,type:P,dataType:"html",data:c,complete:function(V,W){if(W==="success"||W==="notmodified"){B.html(E?ad("<div>").append(V.responseText.replace(ay,"")).find(E):V.responseText)}U&&B.each(U,[V.responseText,W,V])}});return this},serialize:function(){return ad.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?ad.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||R.test(this.nodeName)||A.test(this.type))}).map(function(t,c){var B=ad(this).val();return B==null?null:ad.isArray(B)?ad.map(B,function(E){return{name:c.name,value:E}}):{name:c.name,value:B}}).get()}});ad.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(t,c){ad.fn[c]=function(B){return this.bind(c,B)}});ad.extend({get:function(t,c,E,B){if(ad.isFunction(c)){B=B||E;E=c;c=null}return ad.ajax({type:"GET",url:t,data:c,success:E,dataType:B})},getScript:function(t,c){return ad.get(t,null,c,"script")},getJSON:function(t,c,B){return ad.get(t,c,B,"json")},post:function(t,c,E,B){if(ad.isFunction(c)){B=B||E;E=c;c={}}return ad.ajax({type:"POST",url:t,data:c,success:E,dataType:B})},ajaxSetup:function(c){ad.extend(ad.ajaxSettings,c)},ajaxSettings:{url:location.href,global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,xhr:function(){return new az.XMLHttpRequest},accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},ajax:function(bc){var bb=ad.extend(true,{},ad.ajaxSettings,bc),ba,a9,a8,a6=bb.type.toUpperCase(),Z=n.test(a6);bb.url=bb.url.replace(af,"");bb.context=bc&&bc.context!=null?bc.context:bb;if(bb.data&&bb.processData&&typeof bb.data!=="string"){bb.data=ad.param(bb.data,bb.traditional)}if(bb.dataType==="jsonp"){if(a6==="GET"){ap.test(bb.url)||(bb.url+=(y.test(bb.url)?"&":"?")+(bb.jsonp||"callback")+"=?")}else{if(!bb.data||!ap.test(bb.data)){bb.data=(bb.data?bb.data+"&":"")+(bb.jsonp||"callback")+"=?"}}bb.dataType="json"}if(bb.dataType==="json"&&(bb.data&&ap.test(bb.data)||ap.test(bb.url))){ba=bb.jsonpCallback||"jsonp"+aN++;if(bb.data){bb.data=(bb.data+"").replace(ap,"="+ba+"$1")}bb.url=bb.url.replace(ap,"="+ba+"$1");bb.dataType="script";var aa=az[ba];az[ba]=function(bd){if(ad.isFunction(aa)){aa(bd)}else{az[ba]=aD;try{delete az[ba]}catch(be){}}a8=bd;ad.handleSuccess(bb,P,a9,a8);ad.handleComplete(bb,P,a9,a8);V&&V.removeChild(W)}}if(bb.dataType==="script"&&bb.cache===null){bb.cache=false}if(bb.cache===false&&Z){var X=ad.now(),E=bb.url.replace(a3,"$1_="+X);bb.url=E+(E===bb.url?(y.test(bb.url)?"&":"?")+"_="+X:"")}if(bb.data&&Z){bb.url+=(y.test(bb.url)?"&":"?")+bb.data}bb.global&&ad.active++===0&&ad.event.trigger("ajaxStart");X=(X=aR.exec(bb.url))&&(X[1]&&X[1].toLowerCase()!==location.protocol||X[2].toLowerCase()!==location.host);if(bb.dataType==="script"&&a6==="GET"&&X){var V=J.getElementsByTagName("head")[0]||J.documentElement,W=J.createElement("script");if(bb.scriptCharset){W.charset=bb.scriptCharset}W.src=bb.url;if(!ba){var U=false;W.onload=W.onreadystatechange=function(){if(!U&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){U=true;ad.handleSuccess(bb,P,a9,a8);ad.handleComplete(bb,P,a9,a8);W.onload=W.onreadystatechange=null;V&&W.parentNode&&V.removeChild(W)}}}V.insertBefore(W,V.firstChild);return aD}var t=false,P=bb.xhr();if(P){bb.username?P.open(a6,bb.url,bb.async,bb.username,bb.password):P.open(a6,bb.url,bb.async);try{if(bb.data!=null&&!Z||bc&&bc.contentType){P.setRequestHeader("Content-Type",bb.contentType)}if(bb.ifModified){ad.lastModified[bb.url]&&P.setRequestHeader("If-Modified-Since",ad.lastModified[bb.url]);ad.etag[bb.url]&&P.setRequestHeader("If-None-Match",ad.etag[bb.url])}X||P.setRequestHeader("X-Requested-With","XMLHttpRequest");P.setRequestHeader("Accept",bb.dataType&&bb.accepts[bb.dataType]?bb.accepts[bb.dataType]+", */*; q=0.01":bb.accepts._default)}catch(B){}if(bb.beforeSend&&bb.beforeSend.call(bb.context,P,bb)===false){bb.global&&ad.active--===1&&ad.event.trigger("ajaxStop");P.abort();return false}bb.global&&ad.triggerGlobal(bb,"ajaxSend",[P,bb]);var c=P.onreadystatechange=function(bd){if(!P||P.readyState===0||bd==="abort"){t||ad.handleComplete(bb,P,a9,a8);t=true;if(P){P.onreadystatechange=ad.noop}}else{if(!t&&P&&(P.readyState===4||bd==="timeout")){t=true;P.onreadystatechange=ad.noop;a9=bd==="timeout"?"timeout":!ad.httpSuccess(P)?"error":bb.ifModified&&ad.httpNotModified(P,bb.url)?"notmodified":"success";var bf;if(a9==="success"){try{a8=ad.httpData(P,bb.dataType,bb)}catch(be){a9="parsererror";bf=be}}if(a9==="success"||a9==="notmodified"){ba||ad.handleSuccess(bb,P,a9,a8)}else{ad.handleError(bb,P,a9,bf)}ba||ad.handleComplete(bb,P,a9,a8);bd==="timeout"&&P.abort();if(bb.async){P=null}}}};try{var a7=P.abort;P.abort=function(){P&&Function.prototype.call.call(a7,P);c("abort")}}catch(ab){}bb.async&&bb.timeout>0&&setTimeout(function(){P&&!t&&c("timeout")},bb.timeout);try{P.send(Z||bb.data==null?null:bb.data)}catch(Y){ad.handleError(bb,P,null,Y);ad.handleComplete(bb,P,a9,a8)}bb.async||c();return P}},param:function(t,c){var P=[],E=function(V,U){U=ad.isFunction(U)?U():U;P[P.length]=encodeURIComponent(V)+"="+encodeURIComponent(U)};if(c===aD){c=ad.ajaxSettings.traditional}if(ad.isArray(t)||t.jquery){ad.each(t,function(){E(this.name,this.value)})}else{for(var B in t){w(B,t[B],c,E)}}return P.join("&").replace(aE,"+")}});ad.extend({active:0,lastModified:{},etag:{},handleError:function(t,c,E,B){t.error&&t.error.call(t.context,c,E,B);t.global&&ad.triggerGlobal(t,"ajaxError",[c,t,B])},handleSuccess:function(t,c,E,B){t.success&&t.success.call(t.context,B,E,c);t.global&&ad.triggerGlobal(t,"ajaxSuccess",[c,t])},handleComplete:function(t,c,B){t.complete&&t.complete.call(t.context,c,B);t.global&&ad.triggerGlobal(t,"ajaxComplete",[c,t]);t.global&&ad.active--===1&&ad.event.trigger("ajaxStop")},triggerGlobal:function(t,c,B){(t.context&&t.context.url==null?ad(t.context):ad.event).trigger(c,B)},httpSuccess:function(t){try{return !t.status&&location.protocol==="file:"||t.status>=200&&t.status<300||t.status===304||t.status===1223}catch(c){}return false},httpNotModified:function(t,c){var E=t.getResponseHeader("Last-Modified"),B=t.getResponseHeader("Etag");if(E){ad.lastModified[c]=E}if(B){ad.etag[c]=B}return t.status===304},httpData:function(t,c,P){var E=t.getResponseHeader("content-type")||"",B=c==="xml"||!c&&E.indexOf("xml")>=0;t=B?t.responseXML:t.responseText;B&&t.documentElement.nodeName==="parsererror"&&ad.error("parsererror");if(P&&P.dataFilter){t=P.dataFilter(t,c)}if(typeof t==="string"){if(c==="json"||!c&&E.indexOf("json")>=0){t=ad.parseJSON(t)}else{if(c==="script"||!c&&E.indexOf("javascript")>=0){ad.globalEval(t)}}}return t}});if(az.ActiveXObject){ad.ajaxSettings.xhr=function(){if(az.location.protocol!=="file:"){try{return new az.XMLHttpRequest}catch(t){}}try{return new az.ActiveXObject("Microsoft.XMLHTTP")}catch(c){}}}ad.support.ajax=!!ad.ajaxSettings.xhr();var g={},F=/^(?:toggle|show|hide)$/,q=/^([+\-]=)?([\d+.\-]+)(.*)$/,au,C=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];ad.fn.extend({show:function(t,c,E){if(t||t===0){return this.animate(aq("show",3),t,c,E)}else{E=0;for(var B=this.length;E<B;E++){t=this[E];c=t.style.display;if(!ad.data(t,"olddisplay")&&c==="none"){c=t.style.display=""}c===""&&ad.css(t,"display")==="none"&&ad.data(t,"olddisplay",o(t.nodeName))}for(E=0;E<B;E++){t=this[E];c=t.style.display;if(c===""||c==="none"){t.style.display=ad.data(t,"olddisplay")||""}}return this}},hide:function(t,c,B){if(t||t===0){return this.animate(aq("hide",3),t,c,B)}else{t=0;for(c=this.length;t<c;t++){B=ad.css(this[t],"display");B!=="none"&&ad.data(this[t],"olddisplay",B)}for(t=0;t<c;t++){this[t].style.display="none"}return this}},_toggle:ad.fn.toggle,toggle:function(t,c,E){var B=typeof t==="boolean";if(ad.isFunction(t)&&ad.isFunction(c)){this._toggle.apply(this,arguments)}else{t==null||B?this.each(function(){var P=B?t:ad(this).is(":hidden");ad(this)[P?"show":"hide"]()}):this.animate(aq("toggle",3),t,c,E)}return this},fadeTo:function(t,c,E,B){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:c},t,E,B)},animate:function(t,c,P,E){var B=ad.speed(c,P,E);if(ad.isEmptyObject(t)){return this.each(B.complete)}return this[B.queue===false?"each":"queue"](function(){var X=ad.extend({},B),V,W=this.nodeType===1,Z=W&&ad(this).is(":hidden"),U=this;for(V in t){var Y=ad.camelCase(V);if(V!==Y){t[Y]=t[V];delete t[V];V=Y}if(t[V]==="hide"&&Z||t[V]==="show"&&!Z){return X.complete.call(this)}if(W&&(V==="height"||V==="width")){X.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY];if(ad.css(this,"display")==="inline"&&ad.css(this,"float")==="none"){if(ad.support.inlineBlockNeedsLayout){if(o(this.nodeName)==="inline"){this.style.display="inline-block"}else{this.style.display="inline";this.style.zoom=1}}else{this.style.display="inline-block"}}}if(ad.isArray(t[V])){(X.specialEasing=X.specialEasing||{})[V]=t[V][1];t[V]=t[V][0]}}if(X.overflow!=null){this.style.overflow="hidden"}X.curAnim=ad.extend({},t);ad.each(t,function(ab,ba){var a7=new ad.fx(U,X,ab);if(F.test(ba)){a7[ba==="toggle"?Z?"show":"hide":ba](t)}else{var a6=q.exec(ba),a8=a7.cur()||0;if(a6){var aa=parseFloat(a6[2]),a9=a6[3]||"px";if(a9!=="px"){ad.style(U,ab,(aa||1)+a9);a8=(aa||1)/a7.cur()*a8;ad.style(U,ab,a8+a9)}if(a6[1]){aa=(a6[1]==="-="?-1:1)*aa+a8}a7.custom(a8,aa,a9)}else{a7.custom(a8,ba,"")}}});return true})},stop:function(t,c){var B=ad.timers;t&&this.queue([]);this.each(function(){for(var E=B.length-1;E>=0;E--){if(B[E].elem===this){c&&B[E](true);B.splice(E,1)}}});c||this.dequeue();return this}});ad.each({slideDown:aq("show",1),slideUp:aq("hide",1),slideToggle:aq("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,c){ad.fn[t]=function(P,E,B){return this.animate(c,P,E,B)}});ad.extend({speed:function(t,c,E){var B=t&&typeof t==="object"?ad.extend({},t):{complete:E||!E&&c||ad.isFunction(t)&&t,duration:t,easing:E&&c||c&&!ad.isFunction(c)&&c};B.duration=ad.fx.off?0:typeof B.duration==="number"?B.duration:B.duration in ad.fx.speeds?ad.fx.speeds[B.duration]:ad.fx.speeds._default;B.old=B.complete;B.complete=function(){B.queue!==false&&ad(this).dequeue();ad.isFunction(B.old)&&B.old.call(this)};return B},easing:{linear:function(t,c,E,B){return E+B*t},swing:function(t,c,E,B){return(-Math.cos(t*Math.PI)/2+0.5)*B+E}},timers:[],fx:function(t,c,B){this.options=c;this.elem=t;this.prop=B;if(!c.orig){c.orig={}}}});ad.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(ad.fx.step[this.prop]||ad.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop]}var c=parseFloat(ad.css(this.elem,this.prop));return c&&c>-10000?c:0},custom:function(t,c,U){function P(V){return E.step(V)}var E=this,B=ad.fx;this.startTime=ad.now();this.start=t;this.end=c;this.unit=U||this.unit||"px";this.now=this.start;this.pos=this.state=0;P.elem=this.elem;if(P()&&ad.timers.push(P)&&!au){au=setInterval(B.tick,B.interval)}},show:function(){this.options.orig[this.prop]=ad.style(this.elem,this.prop);this.options.show=true;this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());ad(this.elem).show()},hide:function(){this.options.orig[this.prop]=ad.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(B){var c=ad.now(),V=true;if(B||c>=this.options.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();this.options.curAnim[this.prop]=true;for(var U in this.options.curAnim){if(this.options.curAnim[U]!==true){V=false}}if(V){if(this.options.overflow!=null&&!ad.support.shrinkWrapBlocks){var P=this.elem,E=this.options;ad.each(["","X","Y"],function(W,X){P.style["overflow"+X]=E.overflow[W]})}this.options.hide&&ad(this.elem).hide();if(this.options.hide||this.options.show){for(var t in this.options.curAnim){ad.style(this.elem,t,this.options.orig[t])}}this.options.complete.call(this.elem)}return false}else{B=c-this.startTime;this.state=B/this.options.duration;c=this.options.easing||(ad.easing.swing?"swing":"linear");this.pos=ad.easing[this.options.specialEasing&&this.options.specialEasing[this.prop]||c](this.state,B,0,1,this.options.duration);this.now=this.start+(this.end-this.start)*this.pos;this.update()}return true}};ad.extend(ad.fx,{tick:function(){for(var t=ad.timers,c=0;c<t.length;c++){t[c]()||t.splice(c--,1)}t.length||ad.fx.stop()},interval:13,stop:function(){clearInterval(au);au=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(c){ad.style(c.elem,"opacity",c.now)},_default:function(c){if(c.elem.style&&c.elem.style[c.prop]!=null){c.elem.style[c.prop]=(c.prop==="width"||c.prop==="height"?Math.max(0,c.now):c.now)+c.unit}else{c.elem[c.prop]=c.now}}}});if(ad.expr&&ad.expr.filters){ad.expr.filters.animated=function(c){return ad.grep(ad.timers,function(t){return c===t.elem}).length}}var a=/^t(?:able|d|h)$/i,aB=/^(?:body|html)$/i;ad.fn.offset="getBoundingClientRect" in J.documentElement?function(t){var c=this[0],U;if(t){return this.each(function(V){ad.offset.setOffset(this,t,V)})}if(!c||!c.ownerDocument){return null}if(c===c.ownerDocument.body){return ad.offset.bodyOffset(c)}try{U=c.getBoundingClientRect()}catch(P){}var E=c.ownerDocument,B=E.documentElement;if(!U||!ad.contains(B,c)){return U||{top:0,left:0}}c=E.body;E=aY(E);return{top:U.top+(E.pageYOffset||ad.support.boxModel&&B.scrollTop||c.scrollTop)-(B.clientTop||c.clientTop||0),left:U.left+(E.pageXOffset||ad.support.boxModel&&B.scrollLeft||c.scrollLeft)-(B.clientLeft||c.clientLeft||0)}}:function(X){var W=this[0];if(X){return this.each(function(Y){ad.offset.setOffset(this,X,Y)})}if(!W||!W.ownerDocument){return null}if(W===W.ownerDocument.body){return ad.offset.bodyOffset(W)}ad.offset.initialize();var V,U=W.offsetParent,P=W.ownerDocument,E=P.documentElement,t=P.body;V=(P=P.defaultView)?P.getComputedStyle(W,null):W.currentStyle;for(var B=W.offsetTop,c=W.offsetLeft;(W=W.parentNode)&&W!==t&&W!==E;){if(ad.offset.supportsFixedPosition&&V.position==="fixed"){break}V=P?P.getComputedStyle(W,null):W.currentStyle;B-=W.scrollTop;c-=W.scrollLeft;if(W===U){B+=W.offsetTop;c+=W.offsetLeft;if(ad.offset.doesNotAddBorder&&!(ad.offset.doesAddBorderForTableAndCells&&a.test(W.nodeName))){B+=parseFloat(V.borderTopWidth)||0;c+=parseFloat(V.borderLeftWidth)||0}U=W.offsetParent}if(ad.offset.subtractsBorderForOverflowNotVisible&&V.overflow!=="visible"){B+=parseFloat(V.borderTopWidth)||0;c+=parseFloat(V.borderLeftWidth)||0}V=V}if(V.position==="relative"||V.position==="static"){B+=t.offsetTop;c+=t.offsetLeft}if(ad.offset.supportsFixedPosition&&V.position==="fixed"){B+=Math.max(E.scrollTop,t.scrollTop);c+=Math.max(E.scrollLeft,t.scrollLeft)}return{top:B,left:c}};ad.offset={initialize:function(){var t=J.body,c=J.createElement("div"),U,P,E,B=parseFloat(ad.css(t,"marginTop"))||0;ad.extend(c.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"});c.innerHTML="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";t.insertBefore(c,t.firstChild);U=c.firstChild;P=U.firstChild;E=U.nextSibling.firstChild.firstChild;this.doesNotAddBorder=P.offsetTop!==5;this.doesAddBorderForTableAndCells=E.offsetTop===5;P.style.position="fixed";P.style.top="20px";this.supportsFixedPosition=P.offsetTop===20||P.offsetTop===15;P.style.position=P.style.top="";U.style.overflow="hidden";U.style.position="relative";this.subtractsBorderForOverflowNotVisible=P.offsetTop===-5;this.doesNotIncludeMarginInBodyOffset=t.offsetTop!==B;t.removeChild(c);ad.offset.initialize=ad.noop},bodyOffset:function(t){var c=t.offsetTop,B=t.offsetLeft;ad.offset.initialize();if(ad.offset.doesNotIncludeMarginInBodyOffset){c+=parseFloat(ad.css(t,"marginTop"))||0;B+=parseFloat(ad.css(t,"marginLeft"))||0}return{top:c,left:B}},setOffset:function(Y,W,V){var U=ad.css(Y,"position");if(U==="static"){Y.style.position="relative"}var P=ad(Y),E=P.offset(),t=ad.css(Y,"top"),B=ad.css(Y,"left"),c=U==="absolute"&&ad.inArray("auto",[t,B])>-1;U={};var X={};if(c){X=P.position()}t=c?X.top:parseInt(t,10)||0;B=c?X.left:parseInt(B,10)||0;if(ad.isFunction(W)){W=W.call(Y,V,E)}if(W.top!=null){U.top=W.top-E.top+t}if(W.left!=null){U.left=W.left-E.left+B}"using" in W?W.using.call(Y,U):P.css(U)}};ad.fn.extend({position:function(){if(!this[0]){return null}var t=this[0],c=this.offsetParent(),E=this.offset(),B=aB.test(c[0].nodeName)?{top:0,left:0}:c.offset();E.top-=parseFloat(ad.css(t,"marginTop"))||0;E.left-=parseFloat(ad.css(t,"marginLeft"))||0;B.top+=parseFloat(ad.css(c[0],"borderTopWidth"))||0;B.left+=parseFloat(ad.css(c[0],"borderLeftWidth"))||0;return{top:E.top-B.top,left:E.left-B.left}},offsetParent:function(){return this.map(function(){for(var c=this.offsetParent||J.body;c&&!aB.test(c.nodeName)&&ad.css(c,"position")==="static";){c=c.offsetParent}return c})}});ad.each(["Left","Top"],function(t,c){var B="scroll"+c;ad.fn[B]=function(U){var P=this[0],E;if(!P){return null}if(U!==aD){return this.each(function(){if(E=aY(this)){E.scrollTo(!t?U:ad(E).scrollLeft(),t?U:ad(E).scrollTop())}else{this[B]=U}})}else{return(E=aY(P))?"pageXOffset" in E?E[t?"pageYOffset":"pageXOffset"]:ad.support.boxModel&&E.document.documentElement[B]||E.document.body[B]:P[B]}}});ad.each(["Height","Width"],function(t,c){var B=c.toLowerCase();ad.fn["inner"+c]=function(){return this[0]?parseFloat(ad.css(this[0],B,"padding")):null};ad.fn["outer"+c]=function(E){return this[0]?parseFloat(ad.css(this[0],B,E?"margin":"border")):null};ad.fn[B]=function(U){var P=this[0];if(!P){return U==null?null:this}if(ad.isFunction(U)){return this.each(function(V){var W=ad(this);W[B](U.call(this,V,W[B]()))})}if(ad.isWindow(P)){return P.document.compatMode==="CSS1Compat"&&P.document.documentElement["client"+c]||P.document.body["client"+c]}else{if(P.nodeType===9){return Math.max(P.documentElement["client"+c],P.body["scroll"+c],P.documentElement["scroll"+c],P.body["offset"+c],P.documentElement["offset"+c])}else{if(U===aD){P=ad.css(P,B);var E=parseFloat(P);return ad.isNaN(E)?P:E}else{return this.css(B,typeof U==="string"?U:U+"px")}}}}})})(window);(function(d,e,f){d.fn.jScrollPane=function(a){function c(br,bc){var bk,ba=this,a2,bF,aK,bD,a7,a1,s,aO,bi,bS,bs,aW,bh,aX,aV,a0,a6,bz,a3,aM,bv,by,bK,bC,bl,aT,bu,bm,aI,bq,bP,aZ,bf,bG=true,bb=true,bQ=false,aU=false,bA=br.clone(false,false).empty(),bN=d.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";bP=br.css("paddingTop")+" "+br.css("paddingRight")+" "+br.css("paddingBottom")+" "+br.css("paddingLeft");aZ=(parseInt(br.css("paddingLeft"),10)||0)+(parseInt(br.css("paddingRight"),10)||0);function bx(k){var n,m,r,p,q,g,j,o;bk=k;if(a2===f){j=br.scrollTop();o=br.scrollLeft();br.css({overflow:"hidden",padding:0});bF=br.innerWidth()+aZ;aK=br.innerHeight();br.width(bF);a2=d('<div class="jspPane" />').css("padding",bP).append(br.children());bD=d('<div class="jspContainer" />').css({width:bF+"px",height:aK+"px"}).append(a2).appendTo(br)}else{br.css("width","");g=br.innerWidth()+aZ!=bF||br.outerHeight()!=aK;if(g){bF=br.innerWidth()+aZ;aK=br.innerHeight();bD.css({width:bF+"px",height:aK+"px"})}if(!g&&bf==a7&&a2.outerHeight()==a1){br.width(bF);return}bf=a7;a2.css("width","");br.width(bF);bD.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}n=a2.clone(false,false).css("position","absolute");m=d('<div style="width:1px; position: relative;" />').append(n);d("body").append(m);a7=Math.max(a2.outerWidth(),n.outerWidth());m.remove();a1=a2.outerHeight();s=a7/bF;aO=a1/aK;bi=aO>1;bS=s>1;if(!(bS||bi)){br.removeClass("jspScrollable");a2.css({top:0,width:bD.width()-aZ});aR();bp();a9();aJ();bH()}else{br.addClass("jspScrollable");r=bk.maintainPosition&&(bh||a0);if(r){p=bU();q=bW()}bR();bw();bn();if(r){bd(p,false);be(q,false)}bg();bJ();bB();if(bk.enableKeyboardNavigation){a8()}if(bk.clickOnTrack){aP()}bt();if(bk.hijackInternalLinks){aS()}}if(bk.autoReinitialise&&!bq){bq=setInterval(function(){bx(bk)},bk.autoReinitialiseDelay)}else{if(!bk.autoReinitialise&&bq){clearInterval(bq)}}j&&br.scrollTop(0)&&be(j,false);o&&br.scrollLeft(0)&&bd(o,false);br.trigger("jsp-initialised",[bS||bi])}function bR(){if(bi){bD.append(d('<div class="jspVerticalBar" />').append(d('<div class="jspCap jspCapTop" />'),d('<div class="jspTrack" />').append(d('<div class="jspDrag" />').append(d('<div class="jspDragTop" />'),d('<div class="jspDragBottom" />'))),d('<div class="jspCap jspCapBottom" />')));a6=bD.find(">.jspVerticalBar");bz=a6.find(">.jspTrack");bs=bz.find(">.jspDrag");if(bk.showArrows){by=d('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",bT(0,-1)).bind("click.jsp",bV);bK=d('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",bT(0,1)).bind("click.jsp",bV);if(bk.arrowScrollOnHover){by.bind("mouseover.jsp",bT(0,-1,by));bK.bind("mouseover.jsp",bT(0,1,bK))}bE(bz,bk.verticalArrowPositions,by,bK)}aM=aK;bD.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){aM-=d(this).outerHeight()});bs.hover(function(){bs.addClass("jspHover")},function(){bs.removeClass("jspHover")}).bind("mousedown.jsp",function(j){d("html").bind("dragstart.jsp selectstart.jsp",bV);bs.addClass("jspActive");var g=j.pageY-bs.position().top;d("html").bind("mousemove.jsp",function(k){a5(k.pageY-g,false)}).bind("mouseup.jsp mouseleave.jsp",bo);return false});aQ()}}function aQ(){bz.height(aM+"px");bh=0;a3=bk.verticalGutter+bz.outerWidth();a2.width(bF-a3-aZ);if(a6.position().left===0){a2.css("margin-left",a3+"px")}}function bw(){if(bS){bD.append(d('<div class="jspHorizontalBar" />').append(d('<div class="jspCap jspCapLeft" />'),d('<div class="jspTrack" />').append(d('<div class="jspDrag" />').append(d('<div class="jspDragLeft" />'),d('<div class="jspDragRight" />'))),d('<div class="jspCap jspCapRight" />')));bC=bD.find(">.jspHorizontalBar");bl=bC.find(">.jspTrack");aX=bl.find(">.jspDrag");if(bk.showArrows){bm=d('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",bT(-1,0)).bind("click.jsp",bV);aI=d('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",bT(1,0)).bind("click.jsp",bV);if(bk.arrowScrollOnHover){bm.bind("mouseover.jsp",bT(-1,0,bm));aI.bind("mouseover.jsp",bT(1,0,aI))}bE(bl,bk.horizontalArrowPositions,bm,aI)}aX.hover(function(){aX.addClass("jspHover")},function(){aX.removeClass("jspHover")}).bind("mousedown.jsp",function(j){d("html").bind("dragstart.jsp selectstart.jsp",bV);aX.addClass("jspActive");var g=j.pageX-aX.position().left;d("html").bind("mousemove.jsp",function(k){a4(k.pageX-g,false)}).bind("mouseup.jsp mouseleave.jsp",bo);return false});aT=bD.innerWidth();bI()}}function bI(){bD.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){aT-=d(this).outerWidth()});bl.width(aT+"px");a0=0}function bn(){if(bS&&bi){var j=bl.outerHeight(),g=bz.outerWidth();aM-=j;d(bC).find(">.jspCap:visible,>.jspArrow").each(function(){aT+=d(this).outerWidth()});aT-=g;aK-=g;bF-=j;bl.parent().append(d('<div class="jspCorner" />').css("width",j+"px"));aQ();bI()}if(bS){a2.width((bD.outerWidth()-aZ)+"px")}a1=a2.outerHeight();aO=a1/aK;if(bS){bu=Math.ceil(1/s*aT);if(bu>bk.horizontalDragMaxWidth){bu=bk.horizontalDragMaxWidth}else{if(bu<bk.horizontalDragMinWidth){bu=bk.horizontalDragMinWidth}}aX.width(bu+"px");aV=aT-bu;bL(a0)}if(bi){bv=Math.ceil(1/aO*aM);if(bv>bk.verticalDragMaxHeight){bv=bk.verticalDragMaxHeight}else{if(bv<bk.verticalDragMinHeight){bv=bk.verticalDragMinHeight}}bs.height(bv+"px");aW=aM-bv;bM(bh)}}function bE(o,m,p,j){var g="before",n="after",k;if(m=="os"){m=/Mac/.test(navigator.platform)?"after":"split"}if(m==g){n=m}else{if(m==n){g=m;k=p;p=j;j=k}}o[g](p)[n](j)}function bT(k,g,j){return function(){bj(k,g,this,j);this.blur();return false}}function bj(n,o,g,k){g=d(g).addClass("jspActive");var m,p,q=true,j=function(){if(n!==0){ba.scrollByX(n*bk.arrowButtonSpeed)}if(o!==0){ba.scrollByY(o*bk.arrowButtonSpeed)}p=setTimeout(j,q?bk.initialDelay:bk.arrowRepeatFreq);q=false};j();m=k?"mouseout.jsp":"mouseup.jsp";k=k||d("html");k.bind(m,function(){g.removeClass("jspActive");p&&clearTimeout(p);p=null;k.unbind(m)})}function aP(){aJ();if(bi){bz.bind("mousedown.jsp",function(k){if(k.originalTarget===f||k.originalTarget==k.currentTarget){var n=d(this),g=n.offset(),m=k.pageY-g.top-bh,p,q=true,j=function(){var t=n.offset(),r=k.pageY-t.top-bv/2,v=aK*bk.scrollPagePercent,u=aW*v/(a1-aK);if(m<0){if(bh-u>r){ba.scrollByY(-v)}else{a5(r)}}else{if(m>0){if(bh+u<r){ba.scrollByY(v)}else{a5(r)}}else{o();return}}p=setTimeout(j,q?bk.initialDelay:bk.trackClickRepeatFreq);q=false},o=function(){p&&clearTimeout(p);p=null;d(document).unbind("mouseup.jsp",o)};j();d(document).bind("mouseup.jsp",o);return false}})}if(bS){bl.bind("mousedown.jsp",function(k){if(k.originalTarget===f||k.originalTarget==k.currentTarget){var n=d(this),g=n.offset(),m=k.pageX-g.left-a0,p,q=true,j=function(){var t=n.offset(),r=k.pageX-t.left-bu/2,v=bF*bk.scrollPagePercent,u=aV*v/(a7-bF);if(m<0){if(a0-u>r){ba.scrollByX(-v)}else{a4(r)}}else{if(m>0){if(a0+u<r){ba.scrollByX(v)}else{a4(r)}}else{o();return}}p=setTimeout(j,q?bk.initialDelay:bk.trackClickRepeatFreq);q=false},o=function(){p&&clearTimeout(p);p=null;d(document).unbind("mouseup.jsp",o)};j();d(document).bind("mouseup.jsp",o);return false}})}}function aJ(){if(bl){bl.unbind("mousedown.jsp")}if(bz){bz.unbind("mousedown.jsp")}}function bo(){d("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp");if(bs){bs.removeClass("jspActive")}if(aX){aX.removeClass("jspActive")}}function a5(g,j){if(!bi){return}if(g<0){g=0}else{if(g>aW){g=aW}}if(j===f){j=bk.animateScroll}if(j){ba.animate(bs,"top",g,bM)}else{bs.css("top",g);bM(g)}}function bM(n){if(n===f){n=bs.position().top}bD.scrollTop(0);bh=n;var j=bh===0,m=bh==aW,k=n/aW,g=-k*(a1-aK);if(bG!=j||bQ!=m){bG=j;bQ=m;br.trigger("jsp-arrow-change",[bG,bQ,bb,aU])}aL(j,m);a2.css("top",g);br.trigger("jsp-scroll-y",[-g,j,m]).trigger("scroll")}function a4(j,g){if(!bS){return}if(j<0){j=0}else{if(j>aV){j=aV}}if(g===f){g=bk.animateScroll}if(g){ba.animate(aX,"left",j,bL)}else{aX.css("left",j);bL(j)}}function bL(n){if(n===f){n=aX.position().left}bD.scrollTop(0);a0=n;var j=a0===0,k=a0==aV,m=n/aV,g=-m*(a7-bF);if(bb!=j||aU!=k){bb=j;aU=k;br.trigger("jsp-arrow-change",[bG,bQ,bb,aU])}aN(j,k);a2.css("left",g);br.trigger("jsp-scroll-x",[-g,j,k]).trigger("scroll")}function aL(j,g){if(bk.showArrows){by[j?"addClass":"removeClass"]("jspDisabled");bK[g?"addClass":"removeClass"]("jspDisabled")}}function aN(j,g){if(bk.showArrows){bm[j?"addClass":"removeClass"]("jspDisabled");aI[g?"addClass":"removeClass"]("jspDisabled")}}function be(g,k){var j=g/(a1-aK);a5(j*aW,k)}function bd(k,g){var j=k/(a7-bF);a4(j*aV,g)}function bO(k,q,g){var t,w,v,x=0,m=0,j,r,o,p,n;try{t=d(k)}catch(u){return}w=t.outerHeight();v=t.outerWidth();bD.scrollTop(0);bD.scrollLeft(0);while(!t.is(".jspPane")){x+=t.position().top;m+=t.position().left;t=t.offsetParent();if(/^body|html$/i.test(t[0].nodeName)){return}}j=bW();r=j+aK;if(x<j||q){p=x-bk.verticalGutter}else{if(x+w>r){p=x-aK+w+bk.verticalGutter}}if(p){be(p,g)}viewportLeft=bU();o=viewportLeft+bF;if(m<viewportLeft||q){n=m-bk.horizontalGutter}else{if(m+v>o){n=m-bF+v+bk.horizontalGutter}}if(n){bd(n,g)}}function bU(){return -a2.position().left}function bW(){return -a2.position().top}function bJ(){bD.unbind(bN).bind(bN,function(k,j,m,o){var n=a0,g=bh;ba.scrollBy(m*bk.mouseWheelSpeed,-o*bk.mouseWheelSpeed,false);return n==a0&&g==bh})}function aR(){bD.unbind(bN)}function bV(){return false}function bg(){a2.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(g){bO(g.target,false)})}function bp(){a2.find(":input,a").unbind("focus.jsp")}function a8(){var g,k;a2.focus(function(){br.focus()});br.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(m){if(m.target!==this){return}var n=a0,o=bh;switch(m.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:g=m.keyCode;j();break;case 35:be(a1-aK);g=null;break;case 36:be(0);g=null;break}k=m.keyCode==g&&n!=a0||o!=bh;return !k}).bind("keypress.jsp",function(m){if(m.keyCode==g){j()}return !k});if(bk.hideFocus){br.css("outline","none");if("hideFocus" in bD[0]){br.attr("hideFocus",true)}}else{br.css("outline","");if("hideFocus" in bD[0]){br.attr("hideFocus",false)}}function j(){var m=a0,n=bh;switch(g){case 40:ba.scrollByY(bk.keyboardSpeed,false);break;case 38:ba.scrollByY(-bk.keyboardSpeed,false);break;case 34:case 32:ba.scrollByY(aK*bk.scrollPagePercent,false);break;case 33:ba.scrollByY(-aK*bk.scrollPagePercent,false);break;case 39:ba.scrollByX(bk.keyboardSpeed,false);break;case 37:ba.scrollByX(-bk.keyboardSpeed,false);break}k=m!=a0||n!=bh;return k}}function a9(){br.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp")}function bt(){if(location.hash&&location.hash.length>1){var j,k;try{j=d(location.hash)}catch(g){return}if(j.length&&a2.find(location.hash)){if(bD.scrollTop()===0){k=setInterval(function(){if(bD.scrollTop()>0){bO(location.hash,true);d(document).scrollTop(bD.position().top);clearInterval(k)}},50)}else{bO(location.hash,true);d(document).scrollTop(bD.position().top)}}}}function bH(){d("a.jspHijack").unbind("click.jsp-hijack").removeClass("jspHijack")}function aS(){bH();d("a[href^=#]").addClass("jspHijack").bind("click.jsp-hijack",function(){var g=this.href.split("#"),j;if(g.length>1){j=g[1];if(j.length>0&&a2.find("#"+j).length>0){bO("#"+j,true);return false}}})}function bB(){var n,o,k,m,j,g=false;bD.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(q){var p=q.originalEvent.touches[0];n=bU();o=bW();k=p.pageX;m=p.pageY;j=false;g=true}).bind("touchmove.jsp",function(p){if(!g){return}var q=p.originalEvent.touches[0],r=a0,t=bh;ba.scrollTo(n+k-q.pageX,o+m-q.pageY);j=j||Math.abs(k-q.pageX)>5||Math.abs(m-q.pageY)>5;return r==a0&&t==bh}).bind("touchend.jsp",function(p){g=false}).bind("click.jsp-touchclick",function(p){if(j){j=false;return false}})}function aY(){var g=bW(),j=bU();br.removeClass("jspScrollable").unbind(".jsp");br.replaceWith(bA.append(a2.children()));bA.scrollTop(g);bA.scrollLeft(j)}d.extend(ba,{reinitialise:function(g){g=d.extend({},bk,g);bx(g)},scrollToElement:function(j,k,g){bO(j,k,g)},scrollTo:function(j,g,k){bd(j,k);be(g,k)},scrollToX:function(j,g){bd(j,g)},scrollToY:function(g,j){be(g,j)},scrollToPercentX:function(j,g){bd(j*(a7-bF),g)},scrollToPercentY:function(j,g){be(j*(a1-aK),g)},scrollBy:function(k,g,j){ba.scrollByX(k,j);ba.scrollByY(g,j)},scrollByX:function(g,k){var m=bU()+g,j=m/(a7-bF);a4(j*aV,k)},scrollByY:function(g,k){var m=bW()+g,j=m/(a1-aK);a5(j*aW,k)},positionDragX:function(g,j){a4(g,j)},positionDragY:function(j,g){a4(j,g)},animate:function(n,j,g,k){var m={};m[j]=g;n.animate(m,{duration:bk.animateDuration,ease:bk.animateEase,queue:false,step:k})},getContentPositionX:function(){return bU()},getContentPositionY:function(){return bW()},getContentWidth:function(){return a7()},getContentHeight:function(){return a1()},getPercentScrolledX:function(){return bU()/(a7-bF)},getPercentScrolledY:function(){return bW()/(a1-aK)},getIsScrollableH:function(){return bS},getIsScrollableV:function(){return bi},getContentPane:function(){return a2},scrollToBottom:function(g){a5(aW,g)},hijackInternalLinks:function(){aS()},destroy:function(){aY()}});bx(bc)}a=d.extend({},d.fn.jScrollPane.defaults,a);d.each(["mouseWheelSpeed","arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){a[this]=a[this]||a.speed});var b;this.each(function(){var k=d(this),j=k.data("jsp");if(j){j.reinitialise(a)}else{j=new c(k,a);k.data("jsp",j)}b=b?b.add(k):k});return b};d.fn.jScrollPane.defaults={showArrows:false,maintainPosition:true,clickOnTrack:true,autoReinitialise:false,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,animateScroll:false,animateDuration:300,animateEase:"linear",hijackInternalLinks:false,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:0,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:false,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:true,hideFocus:false,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:0.8}})(jQuery,this);(function(a){a.prettyPhoto={version:"3.1"};a.fn.prettyPhoto=function(d){d=jQuery.extend({animation_speed:"fast",slideshow:5000,autoplay_slideshow:false,opacity:0.8,show_title:true,allow_resize:true,default_width:500,default_height:344,counter_separator_label:"/",theme:"pp_default",horizontal_padding:20,hideflash:false,wmode:"opaque",autoplay:true,modal:false,overlay_gallery:true,keyboard_shortcuts:true,changepicturecallback:function(){},callback:function(){},ie6_fallback:true,markup:'<div class="pp_pic_holder">       <div class="ppt">&nbsp;</div>       <div class="pp_top">        <div class="pp_left"></div>        <div class="pp_middle"></div>        <div class="pp_right"></div>       </div>       <div class="pp_content_container">        <div class="pp_left">        <div class="pp_right">         <div class="pp_content">          <div class="pp_loaderIcon"></div>          <div class="pp_fade">           <a href="#" class="pp_expand" title="Expand the image">Expand</a>           <div class="pp_hoverContainer">            <a class="pp_next" href="#">next</a>            <a class="pp_previous" href="#">previous</a>           </div>           <div id="pp_full_res"></div>           <div class="pp_details">            <div class="pp_nav">             <a href="#" class="pp_arrow_previous">Previous</a>             <p class="currentTextHolder">0/0</p>             <a href="#" class="pp_arrow_next">Next</a>            </div>            <p class="pp_description"></p>            <a class="pp_close" href="#">Close</a>           </div>          </div>         </div>        </div>        </div>       </div>       <div class="pp_bottom">        <div class="pp_left"></div>        <div class="pp_middle"></div>        <div class="pp_right"></div>       </div>      </div>      <div class="pp_overlay"></div>',gallery_markup:'<div class="pp_gallery">         <a href="#" class="pp_arrow_previous">Previous</a>         <div>          <ul>           {gallery}          </ul>         </div>         <a href="#" class="pp_arrow_next">Next</a>        </div>',image_markup:'<img id="fullResImage" src="{path}" />',flash_markup:'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="{width}" height="{height}"><param name="wmode" value="{wmode}" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="{path}" /><embed src="{path}" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="{width}" height="{height}" wmode="{wmode}"></embed></object>',quicktime_markup:'<object classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" codebase="http://www.apple.com/qtactivex/qtplugin.cab" height="{height}" width="{width}"><param name="src" value="{path}"><param name="autoplay" value="{autoplay}"><param name="type" value="video/quicktime"><embed src="{path}" height="{height}" width="{width}" autoplay="{autoplay}" type="video/quicktime" pluginspage="http://www.apple.com/quicktime/download/"></embed></object>',iframe_markup:'<iframe src ="{path}" width="{width}" height="{height}" frameborder="no"></iframe>',inline_markup:'<div class="pp_inline">{content}</div>',custom_markup:""},d);var n=this,m=false,t,r,s,u,x,y,f=a(window).height(),B=a(window).width(),g;doresize=true,scroll_pos=z();a(window).unbind("resize.prettyphoto").bind("resize.prettyphoto",function(){q();w()});if(d.keyboard_shortcuts){a(document).unbind("keydown.prettyphoto").bind("keydown.prettyphoto",function(C){if(typeof $pp_pic_holder!="undefined"){if($pp_pic_holder.is(":visible")){switch(C.keyCode){case 37:a.prettyPhoto.changePage("previous");C.preventDefault();break;case 39:a.prettyPhoto.changePage("next");C.preventDefault();break;case 27:if(!settings.modal){a.prettyPhoto.close()}C.preventDefault();break}}}})}a.prettyPhoto.initialize=function(){settings=d;if(settings.theme=="pp_default"){settings.horizontal_padding=16}if(settings.ie6_fallback&&a.browser.msie&&parseInt(a.browser.version)==6){settings.theme="light_square"}theRel=a(this).attr("rel");galleryRegExp=/\[(?:.*)\]/;isSet=(galleryRegExp.exec(theRel))?true:false;pp_images=(isSet)?jQuery.map(n,function(D,C){if(a(D).attr("rel").indexOf(theRel)!=-1){return a(D).attr("href")}}):a.makeArray(a(this).attr("href"));pp_titles=(isSet)?jQuery.map(n,function(D,C){if(a(D).attr("rel").indexOf(theRel)!=-1){return(a(D).find("img").attr("alt"))?a(D).find("img").attr("alt"):""}}):a.makeArray(a(this).find("img").attr("alt"));pp_descriptions=(isSet)?jQuery.map(n,function(D,C){if(a(D).attr("rel").indexOf(theRel)!=-1){return(a(D).attr("title"))?a(D).attr("title"):""}}):a.makeArray(a(this).attr("title"));set_position=jQuery.inArray(a(this).attr("href"),pp_images);e(this);if(settings.allow_resize){a(window).bind("scroll.prettyphoto",function(){q()})}a.prettyPhoto.open();return false};a.prettyPhoto.open=function(C){if(typeof settings=="undefined"){settings=d;if(a.browser.msie&&a.browser.version==6){settings.theme="light_square"}pp_images=a.makeArray(arguments[0]);pp_titles=(arguments[1])?a.makeArray(arguments[1]):a.makeArray("");pp_descriptions=(arguments[2])?a.makeArray(arguments[2]):a.makeArray("");isSet=(pp_images.length>1)?true:false;set_position=0;e(C.target)}if(a.browser.msie&&a.browser.version==6){a("select").css("visibility","hidden")}if(settings.hideflash){a("object,embed").css("visibility","hidden")}k(a(pp_images).size());a(".pp_loaderIcon").show();if($ppt.is(":hidden")){$ppt.css("opacity",0).show()}$pp_overlay.show().fadeTo(settings.animation_speed,settings.opacity);$pp_pic_holder.find(".currentTextHolder").text((set_position+1)+settings.counter_separator_label+a(pp_images).size());$pp_pic_holder.find(".pp_description").show().html(unescape(pp_descriptions[set_position]));movie_width=(parseFloat(b("width",pp_images[set_position])))?b("width",pp_images[set_position]):settings.default_width.toString();movie_height=(parseFloat(b("height",pp_images[set_position])))?b("height",pp_images[set_position]):settings.default_height.toString();if(movie_height.indexOf("%")!=-1){movie_height=parseFloat((a(window).height()*parseFloat(movie_height)/100)-150);m=true}if(movie_width.indexOf("%")!=-1){movie_width=parseFloat((a(window).width()*parseFloat(movie_width)/100)-150);m=true}$pp_pic_holder.fadeIn(function(){(settings.show_title&&pp_titles[set_position]!=""&&typeof pp_titles[set_position]!="undefined")?$ppt.html(unescape(pp_titles[set_position])):$ppt.html("&nbsp;");imgPreloader="";skipInjection=false;switch(A(pp_images[set_position])){case"image":imgPreloader=new Image();nextImage=new Image();if(isSet&&set_position<a(pp_images).size()-1){nextImage.src=pp_images[set_position+1]}prevImage=new Image();if(isSet&&pp_images[set_position-1]){prevImage.src=pp_images[set_position-1]}$pp_pic_holder.find("#pp_full_res")[0].innerHTML=settings.image_markup.replace(/{path}/g,pp_images[set_position]);imgPreloader.onload=function(){t=p(imgPreloader.width,imgPreloader.height);j()};imgPreloader.onerror=function(){alert("Image cannot be loaded. Make sure the path is correct and image exist.");a.prettyPhoto.close()};imgPreloader.src=pp_images[set_position];break;case"youtube":t=p(movie_width,movie_height);movie="http://www.youtube.com/embed/"+b("v",pp_images[set_position]);if(settings.autoplay){movie+="?autoplay=1"}toInject=settings.iframe_markup.replace(/{width}/g,t["width"]).replace(/{height}/g,t["height"]).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,movie);break;case"vimeo":t=p(movie_width,movie_height);movie_id=pp_images[set_position];var E=/http:\/\/(www\.)?vimeo.com\/(\d+)/;var D=movie_id.match(E);movie="http://player.vimeo.com/video/"+D[2]+"?title=0&amp;byline=0&amp;portrait=0";if(settings.autoplay){movie+="&autoplay=1;"}vimeo_width=t["width"]+"/embed/?moog_width="+t["width"];toInject=settings.iframe_markup.replace(/{width}/g,vimeo_width).replace(/{height}/g,t["height"]).replace(/{path}/g,movie);break;case"quicktime":t=p(movie_width,movie_height);t["height"]+=15;t["contentHeight"]+=15;t["containerHeight"]+=15;toInject=settings.quicktime_markup.replace(/{width}/g,t["width"]).replace(/{height}/g,t["height"]).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,pp_images[set_position]).replace(/{autoplay}/g,settings.autoplay);break;case"flash":t=p(movie_width,movie_height);flash_vars=pp_images[set_position];flash_vars=flash_vars.substring(pp_images[set_position].indexOf("flashvars")+10,pp_images[set_position].length);filename=pp_images[set_position];filename=filename.substring(0,filename.indexOf("?"));toInject=settings.flash_markup.replace(/{width}/g,t["width"]).replace(/{height}/g,t["height"]).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,filename+"?"+flash_vars);break;case"iframe":t=p(movie_width,movie_height);frame_url=pp_images[set_position];frame_url=frame_url.substr(0,frame_url.indexOf("iframe")-1);toInject=settings.iframe_markup.replace(/{width}/g,t["width"]).replace(/{height}/g,t["height"]).replace(/{path}/g,frame_url);break;case"ajax":doresize=false;t=p(movie_width,movie_height);doresize=true;skipInjection=true;a.get(pp_images[set_position],function(F){toInject=settings.inline_markup.replace(/{content}/g,F);$pp_pic_holder.find("#pp_full_res")[0].innerHTML=toInject;j()});break;case"custom":t=p(movie_width,movie_height);toInject=settings.custom_markup;break;case"inline":myClone=a(pp_images[set_position]).clone().append('<br clear="all" />').css({"width":settings.default_width}).wrapInner('<div id="pp_full_res"><div class="pp_inline"></div></div>').appendTo(a("body")).show();doresize=false;t=p(a(myClone).width(),a(myClone).height());doresize=true;a(myClone).remove();toInject=settings.inline_markup.replace(/{content}/g,a(pp_images[set_position]).html());break}if(!imgPreloader&&!skipInjection){$pp_pic_holder.find("#pp_full_res")[0].innerHTML=toInject;j()}});return false};a.prettyPhoto.changePage=function(C){currentGalleryPage=0;if(C=="previous"){set_position--;if(set_position<0){set_position=a(pp_images).size()-1}}else{if(C=="next"){set_position++;if(set_position>a(pp_images).size()-1){set_position=0}}else{set_position=C}}if(!doresize){doresize=true}a(".pp_contract").removeClass("pp_contract").addClass("pp_expand");o(function(){a.prettyPhoto.open()})};a.prettyPhoto.changeGalleryPage=function(C){if(C=="next"){currentGalleryPage++;if(currentGalleryPage>totalPage){currentGalleryPage=0}slide_speed=settings.animation_speed}else{if(C=="previous"){currentGalleryPage--;if(currentGalleryPage<0){currentGalleryPage=totalPage}slide_speed=settings.animation_speed}else{currentGalleryPage=C;slide_speed=0}}slide_to=currentGalleryPage*(itemsPerPage*itemWidth);itemsToSlide=(currentGalleryPage==totalPage)?pp_images.length-((totalPage)*itemsPerPage):itemsPerPage;$pp_gallery.find("ul").animate({left:-slide_to},slide_speed)};a.prettyPhoto.startSlideshow=function(){if(typeof g=="undefined"){$pp_pic_holder.find(".pp_play").unbind("click").removeClass("pp_play").addClass("pp_pause").click(function(){a.prettyPhoto.stopSlideshow();return false});g=setInterval(a.prettyPhoto.startSlideshow,settings.slideshow)}else{a.prettyPhoto.changePage("next")}};a.prettyPhoto.stopSlideshow=function(){$pp_pic_holder.find(".pp_pause").unbind("click").removeClass("pp_pause").addClass("pp_play").click(function(){a.prettyPhoto.startSlideshow();return false});clearInterval(g);g=undefined};a.prettyPhoto.close=function(){if($pp_overlay.is(":animated")){return}a.prettyPhoto.stopSlideshow();$pp_pic_holder.stop().find("object,embed").css("visibility","hidden");a("div.pp_pic_holder,div.ppt,.pp_fade").fadeOut(settings.animation_speed,function(){a(this).remove()});$pp_overlay.fadeOut(settings.animation_speed,function(){if(a.browser.msie&&a.browser.version==6){a("select").css("visibility","visible")}if(settings.hideflash){a("object,embed").css("visibility","visible")}a(this).remove();a(window).unbind("scroll.prettyphoto");settings.callback();doresize=true;r=false;delete settings})};function j(){a(".pp_loaderIcon").hide();$ppt.fadeTo(settings.animation_speed,1);projectedTop=scroll_pos["scrollTop"]+((f/2)-(t["containerHeight"]/2));if(projectedTop<0){projectedTop=0}$pp_pic_holder.find(".pp_content").animate({height:t["contentHeight"],width:t["contentWidth"]},settings.animation_speed);$pp_pic_holder.animate({"top":projectedTop,"left":(B/2)-(t["containerWidth"]/2),width:t["containerWidth"]},settings.animation_speed,function(){$pp_pic_holder.find(".pp_hoverContainer,#fullResImage").height(t["height"]).width(t["width"]);$pp_pic_holder.find(".pp_fade").fadeIn(settings.animation_speed);if(isSet&&A(pp_images[set_position])=="image"){$pp_pic_holder.find(".pp_hoverContainer").show()}else{$pp_pic_holder.find(".pp_hoverContainer").hide()}if(t["resized"]){a("a.pp_expand,a.pp_contract").show()}else{a("a.pp_expand").hide()}if(settings.autoplay_slideshow&&!g&&!r){a.prettyPhoto.startSlideshow()}settings.changepicturecallback();r=true});c()}function o(C){$pp_pic_holder.find("#pp_full_res object,#pp_full_res embed").css("visibility","hidden");$pp_pic_holder.find(".pp_fade").fadeOut(settings.animation_speed,function(){a(".pp_loaderIcon").show();C()})}function k(C){(C>1)?a(".pp_nav").show():a(".pp_nav").hide()}function p(D,C){resized=false;v(D,C);imageWidth=D,imageHeight=C;if(((y>B)||(x>f))&&doresize&&settings.allow_resize&&!m){resized=true,fitting=false;while(!fitting){if((y>B)){imageWidth=(B-200);imageHeight=(C/D)*imageWidth}else{if((x>f)){imageHeight=(f-200);imageWidth=(D/C)*imageHeight}else{fitting=true}}x=imageHeight,y=imageWidth}v(imageWidth,imageHeight);if((y>B)||(x>f)){p(y,x)}}return{width:Math.floor(imageWidth),height:Math.floor(imageHeight),containerHeight:Math.floor(x),containerWidth:Math.floor(y)+(settings.horizontal_padding*2),contentHeight:Math.floor(s),contentWidth:Math.floor(u),resized:resized}}function v(D,C){D=parseFloat(D);C=parseFloat(C);$pp_details=$pp_pic_holder.find(".pp_details");$pp_details.width(D);detailsHeight=parseFloat($pp_details.css("marginTop"))+parseFloat($pp_details.css("marginBottom"));$pp_details=$pp_details.clone().addClass(settings.theme).width(D).appendTo(a("body")).css({"position":"absolute","top":-10000});detailsHeight+=$pp_details.height();detailsHeight=(detailsHeight<=34)?36:detailsHeight;if(a.browser.msie&&a.browser.version==7){detailsHeight+=8}$pp_details.remove();$pp_title=$pp_pic_holder.find(".ppt");$pp_title.width(D);titleHeight=parseFloat($pp_title.css("marginTop"))+parseFloat($pp_title.css("marginBottom"));$pp_title=$pp_title.clone().appendTo(a("body")).css({"position":"absolute","top":-10000});titleHeight+=$pp_title.height();$pp_title.remove();s=C+detailsHeight;u=D;x=s+titleHeight+$pp_pic_holder.find(".pp_top").height()+$pp_pic_holder.find(".pp_bottom").height();y=D}function A(C){if(C.match(/youtube\.com\/watch/i)){return"youtube"}else{if(C.match(/vimeo\.com/i)){return"vimeo"}else{if(C.match(/\b.mov\b/i)){return"quicktime"}else{if(C.match(/\b.swf\b/i)){return"flash"}else{if(C.match(/\biframe=true\b/i)){return"iframe"}else{if(C.match(/\bajax=true\b/i)){return"ajax"}else{if(C.match(/\bcustom=true\b/i)){return"custom"}else{if(C.substr(0,1)=="#"){return"inline"}else{return"image"}}}}}}}}}function q(){if(doresize&&typeof $pp_pic_holder!="undefined"){scroll_pos=z();contentHeight=$pp_pic_holder.height(),contentwidth=$pp_pic_holder.width();projectedTop=(f/2)+scroll_pos["scrollTop"]-(contentHeight/2);if(projectedTop<0){projectedTop=0}if(contentHeight>f){return}$pp_pic_holder.css({"top":projectedTop,"left":(B/2)+scroll_pos["scrollLeft"]-(contentwidth/2)})}}function z(){if(self.pageYOffset){return{scrollTop:self.pageYOffset,scrollLeft:self.pageXOffset}}else{if(document.documentElement&&document.documentElement.scrollTop){return{scrollTop:document.documentElement.scrollTop,scrollLeft:document.documentElement.scrollLeft}}else{if(document.body){return{scrollTop:document.body.scrollTop,scrollLeft:document.body.scrollLeft}}}}}function w(){f=a(window).height(),B=a(window).width();if(typeof $pp_overlay!="undefined"){$pp_overlay.height(a(document).height()).width(B)}}function c(){if(isSet&&settings.overlay_gallery&&A(pp_images[set_position])=="image"&&(settings.ie6_fallback&&!(a.browser.msie&&parseInt(a.browser.version)==6))){itemWidth=52+5;navWidth=(settings.theme=="facebook"||settings.theme=="pp_default")?50:30;itemsPerPage=Math.floor((t["containerWidth"]-100-navWidth)/itemWidth);itemsPerPage=(itemsPerPage<pp_images.length)?itemsPerPage:pp_images.length;totalPage=Math.ceil(pp_images.length/itemsPerPage)-1;if(totalPage==0){navWidth=0;$pp_gallery.find(".pp_arrow_next,.pp_arrow_previous").hide()}else{$pp_gallery.find(".pp_arrow_next,.pp_arrow_previous").show()}galleryWidth=itemsPerPage*itemWidth;fullGalleryWidth=pp_images.length*itemWidth;$pp_gallery.css("margin-left",-((galleryWidth/2)+(navWidth/2))).find("div:first").width(galleryWidth+5).find("ul").width(fullGalleryWidth).find("li.selected").removeClass("selected");goToPage=(Math.floor(set_position/itemsPerPage)<totalPage)?Math.floor(set_position/itemsPerPage):totalPage;a.prettyPhoto.changeGalleryPage(goToPage);$pp_gallery_li.filter(":eq("+set_position+")").addClass("selected")}else{$pp_pic_holder.find(".pp_content").unbind("mouseenter mouseleave")}}function e(C){a("body").append(settings.markup);$pp_pic_holder=a(".pp_pic_holder"),$ppt=a(".ppt"),$pp_overlay=a("div.pp_overlay");if(isSet&&settings.overlay_gallery){currentGalleryPage=0;toInject="";for(var D=0;D<pp_images.length;D++){if(!pp_images[D].match(/\b(jpg|jpeg|png|gif)\b/gi)){classname="default";img_src=""}else{classname="";img_src=pp_images[D]}toInject+="<li class='"+classname+"'><a href='#'><img src='"+img_src+"' width='50' alt='' /></a></li>"}toInject=settings.gallery_markup.replace(/{gallery}/g,toInject);$pp_pic_holder.find("#pp_full_res").after(toInject);$pp_gallery=a(".pp_pic_holder .pp_gallery"),$pp_gallery_li=$pp_gallery.find("li");$pp_gallery.find(".pp_arrow_next").click(function(){a.prettyPhoto.changeGalleryPage("next");a.prettyPhoto.stopSlideshow();return false});$pp_gallery.find(".pp_arrow_previous").click(function(){a.prettyPhoto.changeGalleryPage("previous");a.prettyPhoto.stopSlideshow();return false});$pp_pic_holder.find(".pp_content").hover(function(){$pp_pic_holder.find(".pp_gallery:not(.disabled)").fadeIn()},function(){$pp_pic_holder.find(".pp_gallery:not(.disabled)").fadeOut()});itemWidth=52+5;$pp_gallery_li.each(function(E){a(this).find("a").click(function(){a.prettyPhoto.changePage(E);a.prettyPhoto.stopSlideshow();return false})})}if(settings.slideshow){$pp_pic_holder.find(".pp_nav").prepend('<a href="#" class="pp_play">Play</a>');$pp_pic_holder.find(".pp_nav .pp_play").click(function(){a.prettyPhoto.startSlideshow();return false})}$pp_pic_holder.attr("class","pp_pic_holder "+settings.theme);$pp_overlay.css({"opacity":0,"height":a(document).height(),"width":a(window).width()}).bind("click",function(){if(!settings.modal){a.prettyPhoto.close()}});a("a.pp_close").bind("click",function(){a.prettyPhoto.close();return false});a("a.pp_expand").bind("click",function(E){if(a(this).hasClass("pp_expand")){a(this).removeClass("pp_expand").addClass("pp_contract");doresize=false}else{a(this).removeClass("pp_contract").addClass("pp_expand");doresize=true}o(function(){a.prettyPhoto.open()});return false});$pp_pic_holder.find(".pp_previous, .pp_nav .pp_arrow_previous").bind("click",function(){a.prettyPhoto.changePage("previous");a.prettyPhoto.stopSlideshow();return false});$pp_pic_holder.find(".pp_next, .pp_nav .pp_arrow_next").bind("click",function(){a.prettyPhoto.changePage("next");a.prettyPhoto.stopSlideshow();return false});q()}return this.unbind("click.prettyphoto").bind("click.prettyphoto",a.prettyPhoto.initialize)};function b(e,d){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c="[\\?&]"+e+"=([^&#]*)";var g=new RegExp(c);var f=g.exec(d);return(f==null)?"":f[1]}})(jQuery);afStudio.CodeEditor=Ext.extend(Ext.Window,{initComponent:function(){this.createRegions();var a={title:"Code Browser",layout:"border",width:"100%",height:Ext.getBody().getViewSize().height-25,y:25,closable:true,draggable:true,resizable:false,bodyBorder:false,border:false,items:[this.westPanel,this.centerPanel],buttonAlign:"center",buttons:[{text:"Cancel",scope:this,handler:this.cancel}]};Ext.apply(this,Ext.apply(this.initialConfig,a));afStudio.CodeEditor.superclass.initComponent.apply(this,arguments);Ext.EventManager.on(window,"resize",this.updateCodeBrowserHeight,this)},updateCodeBrowserHeight:function(){this.setHeight(Ext.getBody().getViewSize().height-25)},onDestroy:function(){Ext.EventManager.un(window,"resize",this.updateCodeBrowserHeight,this);afStudio.CodeEditor.superclass.onDestroy.call(this)},createRegions:function(){this.westPanel=new Ext.ux.FileTreePanel({title:"Files",iconCls:"icon-models",split:true,region:"west",url:afStudioWSUrls.getFiletreeUrl,loadMask:true,width:220,rootText:"Project",rootPath:"root",newfileText:"newFile.php",maxFileSize:524288*2*10,autoScroll:true,enableProgress:false,fileCt:this,fileOpenSingleClick:true});this.codeEditor=new Ext.ux.AceComponent();this.centerPanel=new Ext.Panel({region:"center",layout:"fit",items:this.codeEditor,tbar:[{text:"Save",iconCls:"icon-save",scope:this,handler:this.save}]})},save:function(){var a=this,b=this.codeEditor;afStudio.xhr.executeAction({url:afStudioWSUrls.getFilecontentUrl,params:{file:b.file,code:b.getCode()},scope:a,logMessage:String.format("CodeEditor file [{0}] was saved",b.file)})},cancel:function(){this.close()},openFile:function(a,b){if(b!=this.codeEditor.file){this.codeEditor.loadFile(b)}},renameFile:function(b,d,a){var c=this.codeEditor;if(c.file==a){c.setFile(d)}},deleteFile:function(a){this.codeEditor.setCode("")}});